# 前言

计算机图形编程被认为是难度最大的主题之一，因为它涉及到复杂的数学、编程和图形概念，这些对普通开发者来说可能令人望而生畏。此外，随着可用的替代游戏引擎，如 Unity 和 Unreal，了解图形编程变得很重要，因为使用这些更复杂的游戏引擎制作 2D 或 3D 游戏要容易得多。这些引擎也使用一些渲染 API，如 OpenGL、Vulkan、Direct3D 和 Metal，来绘制场景中的对象，而游戏引擎中的图形引擎构成了其超过 50%的部分。因此，了解图形编程和图形 API 是至关重要的。

本书的目标是将这个复杂主题分解成小块，使其易于理解。因此，我们将从理解数学、编程和图形基础知识所需的基本概念开始。

在本书的下一部分，我们将创建一个 2D 游戏，最初使用**简单快速多媒体库**（**SFML**），它涵盖了创建任何游戏所需的基本知识，并且你可以用它非常容易地制作任何游戏，无需担心游戏对象是如何绘制的。我们将使用 SFML 仅用于绘制我们的游戏对象。

在本书的下一部分，我们将了解游戏对象是如何使用 OpenGL 在屏幕上呈现的。OpenGL 是一个高级图形 API，它使我们能够快速将内容渲染到场景中。在 SFML 中创建的简单精灵在实际上绘制到屏幕之前要经过很多步骤。我们将看到一张简单的图像是如何被加载并在屏幕上显示的，以及完成这一过程所需的步骤。但这只是开始。我们将看到如何向游戏添加 3D 物理效果，并从头开始开发基于物理的游戏。最后，我们将添加一些光照，使场景更加有趣。

带着对 OpenGL 的知识，我们将进一步深入图形编程，看看 Vulkan 是如何工作的。Vulkan 是 OpenGL 的后继者，是一个低级、冗长的图形 API。OpenGL 是一个高级图形 API，它隐藏了很多内部工作原理。使用 Vulkan，你可以完全访问 GPU，并且通过 Vulkan 图形 API，我们将学习如何渲染我们的游戏对象。

# 本书面向的对象

本书的目标是针对那些渴望使用 C++和 OpenGL 或 Vulkan 图形 API 学习游戏开发的开发者。本书也适用于那些希望更新他们现有知识的人。假设读者对 C++编程有一些先前的了解。

# 本书涵盖的内容

**第一章**，**C++概念**，涵盖了 C++编程的基础知识，这是理解并编写本书章节所必需的。

第二章*，数学和图形概念*，本章涵盖了数学的基本主题，如向量计算和矩阵知识。这些对于图形编程和基础物理编程至关重要。然后，我们将继续介绍图形编程的基础，从如何将多个顶点发送到图形管线以及它们如何被转换为形状并在屏幕上渲染开始。

第三章，*设置你的游戏*，介绍了 SFML 框架，它的用途和限制。它还涵盖了创建 Visual Studio 项目并将 SFML 添加到其中的方法，创建一个具有游戏基本框架的基本窗口以初始化、更新、渲染和关闭它。我们还将学习如何绘制不同的形状，以及如何向场景添加纹理精灵和键盘输入*。

第四章，*创建你的游戏*，介绍了创建角色类并为角色添加功能以使其移动和跳跃。我们还将创建敌人类以填充游戏中的敌人。我们将添加火箭类，以便玩家在射击时可以生成火箭。最后，我们将添加碰撞检测以检测两个精灵之间的碰撞。

第五章*，完成你的游戏*，介绍了完成游戏并添加评分、文本和音频等润色细节。我们还将为玩家角色添加一些动画，使游戏更加生动。

第六章*，开始使用 OpenGL*，探讨了 OpenGL 是什么，它的优点和缺点。我们将 OpenGL 集成到 Visual Studio 项目中，并使用 GLFW 创建一个窗口。我们将创建一个基本的游戏循环，并使用顶点和片段着色器渲染我们的第一个 3D 对象。

第七章*，基于游戏对象构建*，涵盖了向对象添加纹理。我们将把 Bullet 物理库包含到项目中以添加场景的物理效果。我们将了解如何将物理效果与我们的 3D OpenGL 渲染对象集成。最后，我们将创建一个基本关卡来测试物理效果。

第八章*，通过碰撞、循环和光照增强你的游戏*，涵盖了添加游戏结束条件和完成游戏循环。我们将通过添加一些基本的 3D 光照和文本来显示得分和游戏结束条件，为游戏添加一些润色细节。

第九章*，从 Vulkan 入门*，探讨了 Vulkan 的需求以及它与 OpenGL 的不同之处。我们将探讨 Vulkan 的优缺点，将其集成到 Visual Studio 项目中，并添加 GLFW 以创建项目窗口。我们将创建一个应用程序和一个 Vulkan 实例，并添加验证层以检查 Vulkan 是否按需运行。我们还将获取物理设备属性并创建逻辑设备。

第十章，*准备清晰屏幕*，介绍了创建一个可以渲染场景的窗口表面。我们还需要创建一个交换链，以便在前后缓冲区之间进行 ping-pong 操作，并创建图像视图和帧缓冲区，这些视图将附加到它们上。我们将创建绘制命令缓冲区以记录和提交图形命令，并创建一个渲染通道以清除屏幕。

第十一章，*创建对象资源*，介绍了绘制几何形状所需资源的创建。这包括添加一个包含所有几何信息（包括顶点和索引数据）的网格类。我们将创建对象缓冲区以存储顶点、索引和统一缓冲区。我们还将创建描述符集布局和描述符集，最后将创建着色器并将它们转换为 SPIR-V 二进制格式。

第十二章，*绘制 Vulkan 对象*，介绍了创建图形管道，其中我们设置顶点并启用视口、多采样、深度和模板测试。我们还将创建一个对象类，这将有助于创建对象缓冲区、描述符集和对象的图形管道。我们将创建一个摄像机类来通过它观察世界，然后最终渲染对象。在章节末尾，我们还将看到如何同步发送的信息。

# 要充分利用本书

本书设计为从头到尾，逐章阅读。如果您对某章的内容已有先验知识，那么请随意跳过。

有一些 C++编程的先验编程经验是好的，但如果没有，本书中有一章介绍 C++编程，涵盖了基础知识。假设没有图形编程的先验知识。

要运行 OpenGL 和 Vulkan 项目，请确保您的硬件支持当前版本的 API。本书使用 OpenGL 4.5 和 Vulkan 1.1。大多数 GPU 供应商支持 OpenGL 和 Vulkan，但有关支持的 GPU 完整列表，请参阅 GPU 制造商或维基百科，在[`en.wikipedia.org/wiki/Vulkan_(API)`](https://en.wikipedia.org/wiki/Vulkan_(API))。

# 下载示例代码文件

您可以从[www.packt.com](http://www.packt.com)的账户中下载本书的示例代码文件。如果您在其他地方购买了这本书，您可以访问[www.packtpub.com/support](https://www.packtpub.com/support)并注册，以便将文件直接通过电子邮件发送给您。

您可以通过以下步骤下载代码文件：

1.  在[www.packt.com](http://www.packt.com)登录或注册。

1.  选择“支持”标签。

1.  点击“代码下载”。

1.  在搜索框中输入书名，并遵循屏幕上的说明。

下载完成后，请确保您使用最新版本的以下软件解压缩或提取文件夹：

+   Windows 上的 WinRAR/7-Zip

+   Mac 上的 Zipeg/iZip/UnRarX

+   Linux 上的 7-Zip/PeaZip

本书代码包也托管在 GitHub 上，网址为[`github.com/PacktPublishing/CPP-Game-Development-By-Example`](https://github.com/PacktPublishing/CPP-Game-Development-By-Example)。如果代码有更新，它将在现有的 GitHub 仓库中更新。

我们还有其他来自我们丰富图书和视频目录的代码包可供选择，这些代码包可在[`github.com/PacktPublishing/`](https://github.com/PacktPublishing/)找到。去看看吧！

# 下载彩色图像

我们还提供了一份包含本书中使用的截图/图表彩色图像的 PDF 文件。您可以从这里下载：

[`www.packtpub.com/sites/default/files/downloads/9781789535303_ColorImages.pdf`](https://www.packtpub.com/sites/default/files/downloads/9781789535303_ColorImages.pdf)[.](https://www.packtpub.com/sites/default/files/downloads/9781789535303_ColorImages.pdf)

# 使用的约定

本书使用了多种文本约定。

`CodeInText`：表示文本中的代码单词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 昵称。以下是一个示例：“在这里，将`Hello, World`的打印任务分配给`main`函数。”

代码块设置如下：

```cpp
#include <iostream>
// Program prints out "Hello, World" to screen
int main()
{
std::cout<< "Hello, World."<<std::endl;
return 0;
} 
```

当我们希望您注意代码块中的特定部分时，相关的行或项目将以粗体显示：

```cpp
int main() {
    //init game objects
        while (window.isOpen()) {
            // Handle Keyboard events
            // Update Game Objects in the scene
    window.clear(sf::Color::Red);
    // Render Game Objects
    window.display();
        }
        return 0;
    }
```

**粗体**：表示新术语、重要单词或您在屏幕上看到的单词。例如，菜单或对话框中的单词在文本中显示如下。以下是一个示例：“在输入和链接器下，输入以下`.lib`文件。”

警告或重要注意事项显示如下。

技巧和窍门显示如下。

# 联系我们

我们始终欢迎读者的反馈。

**一般反馈**：如果您对本书的任何方面有疑问，请在邮件主题中提及书名，并通过`customercare@packtpub.com`给我们发送电子邮件。

**勘误**: 尽管我们已经尽最大努力确保内容的准确性，但错误仍然可能发生。如果您在这本书中发现了错误，我们将非常感激您能向我们报告。请访问 [www.packtpub.com/support/errata](https://www.packtpub.com/support/errata)，选择您的书籍，点击勘误提交表单链接，并输入详细信息。

**盗版**: 如果您在互联网上以任何形式发现我们作品的非法副本，如果您能提供位置地址或网站名称，我们将不胜感激。请通过`copyright@packt.com`与我们联系，并附上材料的链接。

**如果您有兴趣成为作者**: 如果您在某个领域有专业知识，并且您有兴趣撰写或为书籍做出贡献，请访问 [authors.packtpub.com](http://authors.packtpub.com/)。

# 评价

请留下您的评价。一旦您阅读并使用过这本书，为何不在购买它的网站上留下评价呢？潜在读者可以查看并使用您的客观意见来做出购买决定，我们 Packt 公司可以了解您对我们产品的看法，我们的作者也可以看到他们对书籍的反馈。谢谢！

想了解更多关于 Packt 的信息，请访问 [packt.com](http://www.packt.com/)。
