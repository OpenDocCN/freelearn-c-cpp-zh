# 前言

欢迎来到《使用虚幻引擎 5 进行游戏开发模式》。在这本书中，我们将探讨设计模式，这是一系列工具和实践，通过这些我们可以学会编写更快、更容易协作的代码。我们还将探索各种不同的模式，并学习如何在虚幻引擎 5 的项目开发中应用它们。

在阅读完本书之后，你将能够设计出具有完美 C++/蓝图混合的、可维护和可扩展的系统。

# 本书面向对象

本书面向使用虚幻引擎并希望提高 C++编码实践的初学者和中级游戏开发者。本书将帮助你使用设计模式生成干净、可重用的代码。我们将介绍一些入门任务，以展示使用虚幻引擎 5 及其工具的关键基础；然而，我们不会从头开始教授你虚幻引擎。

你应该对虚幻引擎 4 或 5 有一些经验，但不需要对工具集有深入的工作理解。

# 本书涵盖内容

*第一章*, 《理解虚幻引擎 5 及其层次结构》，探讨虚幻引擎 5 并提供简要的历史背景。我们将研究“模糊”层，它连接了 C++和蓝图之间的差距，并学习如何将蓝图翻译回 C++。

*第二章*, 《“你好，模式”》，关注支撑所有优秀代码的原则。我们将探讨设计模式以及一些常见的蓝图错误，并研究我们如何修复它们。

*第三章*, 《UE5 实战模式：双缓冲、享元和空间划分》，揭示了虚幻引擎 5 如何采用这三种设计模式，我们在探索引擎中的各种工具时将了解这些模式。

*第四章*, 《UE5 中的预制模式：组件、行为树和更新方法》，利用这三个设计模式的预构建实现，并探索引擎中的工具来扩展简单系统。

*第五章*, 《遗忘计时器》，深化你对计时器的理解，探讨其使用可能引起的问题，并探索两种无需计时器的系统构建方法。

*第六章*, 《清晰的通信——接口和事件观察者模式》，探讨允许我们改进不同演员之间通信的设计模式，产生更有效的通信解决方案。

*第七章*, 《完美解耦的系统》，揭示我们如何使用 UML 作为规划类层次结构的方法，以解耦引用列车。

*第八章*, 《构建设计模式：单例、命令和状态》，检查这三个设计模式，以了解它们的用法、局限性和在多种游戏类型中的适用性。

*第九章*，*使用行为模式结构化代码 – 模板、子类沙盒和类型对象*，在构建 C++ 的武器类时探讨了三种最常见的行为模式，我们将通过 Blueprint 进行扩展，探讨两种语言如何一起使用。

*第十章*，*通过模式优化*，深入探讨在发布游戏之前优化的关键元素，通过探索脏标志、数据局部性和对象池设计模式。

# 为了充分利用本书

您需要在您的计算机上安装 Unreal Engine 5 版本。所有代码示例已在 Unreal Engine 5.0.3 上测试，并且应该与引擎的后续版本兼容。然而，如果 Epic Games 对核心引擎进行任何重大更改，这可能不成立。

| **本书涵盖的软件/硬件** | **操作系统要求** |
| --- | --- |
| Unreal Engine 5 | Windows |
| Visual Studio 或 JetBrains Rider | Windows |

**如果您正在使用本书的数字版，我们建议您自己输入代码或从书的 GitHub 仓库（下一节中提供链接）获取代码。这样做将帮助您避免与代码的复制和粘贴相关的任何潜在错误** **。**

我们在 GitHub 仓库中包含了书中找到的代码的注释版本，而不是在代码示例中包含注释，这使得代码在书中更容易阅读和跟踪。

# 下载示例代码文件

您可以从 GitHub 下载本书的示例代码文件：[`github.com/PacktPublishing/Game-Development-Patterns-with-Unreal-Engine-5`](https://github.com/PacktPublishing/Game-Development-Patterns-with-Unreal-Engine-5)。如果代码有更新，它将在 GitHub 仓库中更新。

我们还有其他来自我们丰富图书和视频目录的代码包，可在 [`github.com/PacktPublishing/`](https://github.com/PacktPublishing/) 获取。查看它们吧！

# 使用的约定

本书使用了多种文本约定。

`文本中的代码`: 表示文本中的代码单词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 昵称。以下是一个示例：“这也适用于我们将用于显示玩家得分的`ScoreWidget`类，它作为`Chapter` `Resources`文件夹的一部分提供。”

代码块设置如下：

```cpp
class APlayerController_CH7 : public APlayerController
{
public:
    void Init();
protected:
    UPROPERTY(EditAnywhere)
    TSubclassOf<APawn> _PlayerPawn;
    UPROPERTY(VisibleAnywhere, BlueprintReadOnly)
    TObjectPtr<ACharacter_CH7> _Character;
}
```

**粗体**: 表示新术语、重要单词或屏幕上看到的单词。例如，菜单或对话框中的单词以粗体显示。以下是一个示例：“启用“**调试编辑器符号**”旁边的复选框，然后点击**应用**。”

小贴士或重要注意事项

看起来像这样。

# 联系我们

欢迎读者反馈。

**一般反馈**：如果您对本书的任何方面有疑问，请通过电子邮件发送至 customercare@packtpub.com，并在邮件主题中提及书名。

**勘误**：尽管我们已经尽最大努力确保内容的准确性，但错误仍然可能发生。如果您在这本书中发现了错误，我们非常感谢您能向我们报告。请访问[www.packtpub.com/support/errata](http://www.packtpub.com/support/errata)并填写表格。

**盗版**：如果您在互联网上发现任何形式的我们作品的非法副本，我们非常感谢您能提供位置地址或网站名称。请通过版权@packtpub.com 与我们联系，并提供材料的链接。

**如果您有兴趣成为作者**：如果您在某个领域有专业知识，并且您有兴趣撰写或为书籍做出贡献，请访问[authors.packtpub.com](http://authors.packtpub.com)。

# 分享您的想法

一旦您阅读了《使用 Unreal Engine 5 的 Game Development Patterns》，我们非常乐意听到您的想法！请[点击此处直接访问此书的 Amazon 评论页面](https://packt.link/r/1803243252)并分享您的反馈。

您的评论对我们和科技社区非常重要，并将帮助我们确保我们提供高质量的内容。

# 下载此书的免费 PDF 副本

感谢您购买此书！

您喜欢随时随地阅读，但无法携带您的印刷书籍到处走？您的电子书购买是否与您选择的设备不兼容？

别担心，现在每购买一本 Packt 图书，您都可以免费获得该书的 DRM 免费 PDF 版本。

在任何地方、任何地方、任何设备上阅读。从您最喜欢的技术书籍中搜索、复制和粘贴代码到您的应用程序中。

优惠远不止这些，您还可以获得独家折扣、时事通讯和每日免费内容的每日电子邮件访问权限

按照以下简单步骤获取优惠：

1.  扫描二维码或访问以下链接

![下载此书的免费 PDF 副本](img/B18297_QR_Free_PDF.jpg)

[`packt.link/free-ebook/9781803243252`](https://packt.link/free-ebook/9781803243252)

1.  提交您的购买证明

1.  就这些！我们将直接将您的免费 PDF 和其他优惠发送到您的电子邮件地址

# 第一部分：从 Unreal Engine 5 中学习

在本部分中，我们将探索 Unreal Engine 及其内置的设计模式，或者作为引擎内许多工具的一部分可供使用。

我们将首先探索 Unreal Engine 5 及其如何与代码层协同工作，然后探讨开发者在使用 Blueprint 时常见的错误以及如何修复它们。然后，我们将发现一系列不同的模式，通过混合 Blueprint 和 C++构建的示例来探索这些模式，并使用包括 World Partition 和 AI 行为树在内的各种工具。

本部分包含以下章节：

+   *第一章*, *理解虚幻引擎 5 及其层级*

+   *第二章*, *“Hello Patterns”*

+   *第三章*, *UE5 中的模式实战 – 双缓冲、享元和空间划分*

+   *第四章*, *UE5 中的预制模式 – 组件、行为树和更新方法*
