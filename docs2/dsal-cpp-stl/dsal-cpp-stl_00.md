# 前言

欢迎阅读*使用 C++ STL 的数据结构和算法*，这是一本旨在加深你对使用 C++ `std::vector`提供的强大工具理解数据结构和算法、深入讨论 STL 算法及其与现代 C++特性的增强、以及深入探讨创建与 STL 兼容的类型和算法的资源的书籍。

本书分为五个部分，每部分都专注于 STL 的不同方面。*第一部分*，*精通 std::vector*，详细介绍了向量的基本用法及其与 STL 算法的操纵。*第二部分*，*理解 STL 数据结构*，通过序列、有序和无序关联容器以及容器适配器扩展了你的知识库。*第三部分*，*精通 STL 算法*，全面覆盖了基本、数值和基于范围的算法，重点关注最佳实践。*第四部分*，*创建与 STL 兼容的类型和算法*，指导你开发自己的类型和算法，这些类型和算法可以无缝地与 STL 集成。最后，*第五部分*，*STL 数据结构和算法：内部机制*，提供了关于异常安全性、线程安全性、并发性以及 STL 与最新 C++特性（如概念和协程）交互的高级见解。

每一章的结构都是为了在先前介绍的概念基础上进行构建，确保学习体验的连贯性。到本书结束时，你应该能够熟练地应用 STL 的实践应用，有信心和专业知识应对现代软件挑战。让我们开始这段旅程，不仅为了理解 STL 的机制，还要欣赏其在构建卓越 C++软件中的优雅和强大。

# 本书面向对象

本书是为希望提高其将 STL 组件应用于解决复杂问题效率的技能和知识的中级 C++开发者而编写的。

# 本书涵盖内容

*第一章*，*std::vector 的基础知识*，介绍了`std::vector`，将其与 C 风格数组进行比较，并演示了其声明、初始化和元素操作。

*第二章*，*使用 std::vector 精通迭代器*，探讨了 STL 中不同类型的迭代器及其在`std::vector`环境中的应用，包括自定义迭代器的创建。

*第三章*，*使用 std::vector 精通内存和分配器*，讨论了向量的容量与大小，内存优化技术以及为提高性能而设计的自定义分配器的设计。

*第四章*，*使用 std::vector 精通算法*，深入探讨了向量上的算法操作，如排序和搜索，以及理解迭代器失效的重要性。

*第五章*, *为 std::vector 辩护*, 检查了`std::vector`作为 STL 容器的首选性能方面、实际应用和多功能性。

*第六章*, *高级序列容器使用*, 分析了序列容器如 `std::array`、`std::deque` 等的高级使用场景和最佳实践。

*第七章*, *高级有序关联容器使用*, 探讨了有序关联容器如 `std::set` 和 `std::map` 的复杂性及其独特的性能考虑。

*第八章*, *高级无序关联容器使用*, 研究无序关联容器，突出其内部工作原理和用例。

*第九章*, *高级容器适配器使用*, 专注于容器适配器如 `std::stack` 和 `std::queue`，讨论了它们的实现和何时有效地使用它们。

*第十章*, *高级容器视图使用,* 介绍了容器视图如 `std::span` 和 `std::mdspan`，提供了它们效用和性能优势的见解。

*第十一章*, *基本算法和搜索*, 涵盖了 STL 中排序和搜索的基础算法及其实际应用。

*第十二章*, *操作和转换*, 详细介绍了在 STL 容器内转换数据的技术，包括复制、移动和删除元素的细微差别。

*第十三章*, *数值和基于范围的运算*, 探索了数值运算及其在范围上的应用，展示了它们如何优化算法的复杂性。

*第十四章*, *排列、划分和堆*, 深入探讨了 STL 中的数据组织算法，如划分和堆操作。

*第十五章*, *使用范围的现代 STL*, 讨论了使用范围的现代 STL 方法，增强了算法的可组合性和效率。

*第十六章*, *创建 STL 类型容器*, 指导创建与 STL 算法兼容的自定义容器，并介绍实现完全集成所需的基本组件。

*第十七章*, *创建与 STL 兼容的算法*, 详细介绍了与 STL 容器无缝工作并遵循 STL 原则的自定义算法的开发。

*第十八章*, *类型特性和策略*, 深入探讨了类型特性和策略的高级主题，这对于编写可适应和高效的模板代码至关重要。

*第十九章*，*异常安全性*，探讨了 STL 保证的异常安全性级别以及如何使用 noexcept 编写健壮的 STL 兼容代码。

*第二十章*，*STL 的线程安全和并发*，讨论了 STL 容器的并发和线程安全特性、防止竞态条件以及多线程编程的最佳实践。

*第二十一章*，*STL 与概念和协程的交互*，探讨了 STL 与最新 C++特性（如概念和协程）之间的交互，展示了它们的协同作用。

*第二十二章*，*STL 的并行算法*，介绍了 STL 中并行算法的执行策略、constexpr 的作用以及性能和效率的考虑因素。

# 要充分利用本书

在开始本书之前，读者应该对基本的 C++编程概念有牢固的掌握，例如语法、控制结构以及基本的面向对象原则。对指针、内存管理和模板基础的理解也是假设的，因为这些是有效利用 STL 的基础。本书假设读者熟悉 C++11 标准特性，因为许多示例和解释都依赖于这个语言版本或更新的版本。此外，对数组、链表等数据结构以及经典算法的基本了解将有助于理解本书中讨论的高级主题。

| **本书涵盖的软件/硬件** | **操作系统要求** |
| --- | --- |
| C++ | Windows、macOS 或 Linux |
| C++ STL |  |

**如果您正在使用本书的数字版，我们建议您亲自输入代码或从本书的 GitHub 仓库（下一节中有一个链接）获取代码。这样做将帮助您避免与代码复制和粘贴相关的任何潜在错误。**

# 下载示例代码文件

您可以从 GitHub 下载本书的示例代码文件。如果代码有更新，它将在 GitHub 仓库中更新。

我们还有来自我们丰富的图书和视频目录的其他代码包，可在[`github.com/PacktPublishing/`](https://github.com/PacktPublishing/)找到。查看它们！

# 使用的约定

本书使用了多种文本约定。

`文本中的代码`：表示文本中的代码单词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 账号。以下是一个示例：“这就是 std::vector 的精华所在；过度分配减少了频繁和可能计算成本高昂的重新分配的需求。”

代码块设置如下：

```cpp
template <typename T,
          typename AllocatorPolicy = std::allocator<T>>
class CustomVector {
  // Implementation using AllocatorPolicy for memory
  // allocation
};
```

任何命令行输入或输出都应如下编写：

```cpp
Time without reserve: 0.01195 seconds
Time with reserve:    0.003685 seconds
```

小贴士或重要提示

看起来是这样的。

# 联系我们

我们始终欢迎读者的反馈。

**一般反馈**：如果您对此书的任何方面有疑问，请通过电子邮件发送给我们 customercare@packtpub.com，并在邮件主题中提及书名。

**勘误**：尽管我们已经尽最大努力确保内容的准确性，但错误仍然可能发生。如果您在此书中发现错误，我们将不胜感激，如果您能向我们报告，我们将不胜感激。请访问 [www.packtpub.com/support/errata](http://www.packtpub.com/support/errata) 并填写表格。

**盗版**：如果您在互联网上以任何形式发现我们作品的非法副本，我们将不胜感激，如果您能提供位置地址或网站名称，我们将不胜感激。请通过电子邮件发送链接到 copyright@packt.com 与我们联系。

**如果您有兴趣成为作者**：如果您在某个主题上具有专业知识，并且您有兴趣撰写或为书籍做出贡献，请访问 [authors.packtpub.com](http://authors.packtpub.com)

# 分享您的想法

一旦您阅读了《使用 C++ STL 的数据结构和算法》，我们非常乐意听到您的想法！请[点击此处直接进入此书的亚马逊评论页面](https://packt.link/r/1835468551)并分享您的反馈。

您的评论对我们和科技社区非常重要，并将帮助我们确保我们提供高质量的内容。

# 下载此书的免费 PDF 副本

感谢您购买此书！

您喜欢在路上阅读，但无法携带您的印刷书籍到处走？

您的电子书购买是否与您选择的设备不兼容？

不要担心，现在，随着每本 Packt 书籍，您都可以免费获得该书的 DRM 免费 PDF 版本。

在任何地方、任何设备上阅读。直接从您最喜欢的技术书籍中搜索、复制和粘贴代码到您的应用程序中。

优惠不会就此结束，您还可以获得独家折扣、时事通讯和每日免费内容的每日电子邮件。

按照以下简单步骤获取优惠：

1.  扫描下面的二维码或访问以下链接

![二维码](img/B21945_QR_Free_PDF.jpg)

[`packt.link/free-ebook/978-1-83546-855-5`](https://packt.link/free-ebook/978-1-83546-855-5)

1.  提交您的购买证明

1.  就这些！我们将直接将您的免费 PDF 和其他优惠发送到您的电子邮件地址。

# 第一部分：精通 std::vector

在本部分中，我们将构建我们对 C++ `std::vector`的知识。我们将从介绍`std::vector`开始，将其与传统 C 风格数组进行对比，并涵盖初始化、访问和修改元素等基本操作。然后，我们将深入到迭代器的复杂性，揭示它们在`std::vector`操作中的类型和用途，以及基于范围的 for 循环的优雅性。通过构建对优化资源分配和释放的理解，我们解开了内存管理的神秘面纱，包括创建自定义分配器的介绍。然后，本节将构建到将算法应用于排序、搜索和高效操作向量内容，强调自定义比较器的作用以及理解迭代器失效的重要性。最后一章总结了`std::vector`的性能考虑和实际应用，巩固了其在 C++开发者默认容器选择中的地位。

本部分包含以下章节：

+   *第一章**：std::vector 的基础知识*

+   *第二章**：掌握使用 std::vector 的迭代器*

+   *第三章**：掌握使用 std::vector 的内存和分配器*

+   *第四章**：掌握使用 std::vector 的算法*

+   *第五章**：为 std::vector 辩护*
