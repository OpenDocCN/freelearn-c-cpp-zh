# 前言

物联网（IoT）是科技界的一个增长话题，越来越多的使用众筹活动资助的硬件项目都包含一些连接对象。这些对象可以是连接到网络的智能手表、气象站、摄像头、能源监控设备，甚至是机器人。谷歌和三星等许多行业巨头也正在进入市场，推出连接对象和可穿戴设备。

另一方面，全世界有成千上万的人使用 Arduino 平台来创建硬件项目。由于 Arduino 非常易于使用，它不仅允许爱好者，还允许艺术家和没有技术背景的人创建令人惊叹的硬件项目。该平台始终在不断发展，提供新的解决方案，使人们能够创建越来越复杂的 DIY 项目。

Arduino 最新推出的板子之一——Arduino Yún，和谐地融合了这两个世界。这块板的发布受到了全球爱好者的欢迎，他们希望开发连接对象。确实，开发物联网应用程序一直相当复杂，需要硬件和 Web 应用程序开发方面的专业知识。然而，我们将看到为什么使用 Arduino Yún 可以使这个过程变得容易得多。

Arduino Yún 的尺寸与最常见的 Arduino 板——Arduino Uno 相同。然而，不同之处在于它配备了一个小型 Linux 机器，该机器在独立的处理器上运行，以及一个板载 Wi-Fi 芯片，这样您就可以将板子连接到您的本地 Wi-Fi 网络。

他们与 Arduino Yún 板一起做的聪明事是创建了一个 Bridge 库，允许您从板上的常规 Arduino 微控制器调用 Linux 机器的功能。这样，您可以通过与 Arduino Uno 板相同的编程方式使用 Linux 机器的强大功能。例如，您可以使用 Python 等高级语言编写整个程序，并从 Arduino 草图调用它们。

事实上，板子上还配备了板载 Wi-Fi，这改变了所有的一切。这块板是在与 Temboo 网络服务的紧密合作下开发的，该服务提供了许多库，用于将板子与 Google Docs、Gmail 和 Dropbox 等 Web 服务进行接口。

由于所有这些原因，使用 Arduino Yún 将使您能够构建连接的应用程序，而无需您是该领域的专家。利用嵌入式 Linux 机器、Wi-Fi 连接和 Temboo 库的力量，您将能够轻松地创建自己的物联网设备。为了展示 Arduino Yún 究竟可以做什么，我已经使用这块板子构建了四个令人兴奋的项目，在阅读这本书之后，您也将能够构建这些项目。

# 本书涵盖内容

第一章, *构建连接到云的气象站*，介绍了 Arduino Yún 的物联网功能。在本章中，我们将构建一个气象测量站（测量温度、湿度和光照水平），并将数据发送到网络。该项目将通过 Temboo 将数据发送到 Google Docs 电子表格，并在电子表格中记录结果，以便图形化显示。这个项目的优点是，这些数据可以通过登录您的 Google 账户并访问电子表格从世界任何地方访问。

第二章, *创建远程能源监控和控制设备*，通过创建一个开关设备（如灯泡）的项目来专注于能源管理。我们将把电流传感器接口连接到项目，以测量连接到项目的设备的能源消耗。该项目还将能够远程开关设备，我们将为您构建一个界面，让您可以从电脑和移动设备控制这个开关。

第三章, *创建自己的云连接摄像头*，让我们能够通过将标准 USB 摄像头连接到 Arduino Yún 来构建我们自己的 DIY 无线安全摄像头。我们将使用这个项目执行两个令人兴奋的应用：首先，当在摄像头前方检测到运动时，我们将自动上传图片，然后我们将使摄像头从 YouTube 直播视频，这样你就可以从任何地方监控家里的情况。

第四章, *Wi-Fi 控制的移动机器人*，专注于机器人技术。我们将构建一个带有两个轮子和前方超声波距离传感器的 Wi-Fi 控制的移动机器人。此外，我们将利用 Arduino Yún 的强大功能，通过 Wi-Fi 轻松控制这个机器人。为此，我们将构建一个网页界面，用于控制机器人的移动，并且这个界面还将显示前方传感器的测量距离。

# 你需要这本书的物品

这本书的主要重点是 Arduino Yún 板；因此，当然，你需要一块 Arduino Yún 板来制作书中的所有四个项目。根据章节的不同，你还需要一些硬件组件。这些组件的详细信息在每个章节的开头给出。

你还需要在电脑上安装一些软件来使项目工作。第一个是 Arduino IDE 的最新 beta 版本（唯一可以与 Yún 一起工作的版本）。对于所有这些项目，我使用了 Arduino IDE 版本 1.5.6-r2，但所有更新的版本也应该可以工作。你可以在 [`arduino.cc/en/main/software#toc3`](http://arduino.cc/en/main/software#toc3) 下载 Arduino IDE。

你还需要在电脑上运行一个用于某些项目的 Web 服务器。我建议使用一个集成了 Web 服务器和数据库的软件，并且为你处理所有细节。如果你使用的是 Windows，我推荐使用 EasyPHP，它可以在 [`www.easyphp.org/`](http://www.easyphp.org/) 找到。

在 OS X 系统下，我推荐使用 MAMP，它可以在 [`www.mamp.info/`](http://www.mamp.info/) 找到。

对于 Linux，你可以按照 [`doc.ubuntu-fr.org/lamp`](http://doc.ubuntu-fr.org/lamp) 提供的说明来安装 Web 服务器。

确保服务器此时正在运行；我们将在本书的几个项目中使用它。

所有项目都假设你的 Arduino Yún 板已经配置并连接到你的 Wi-Fi 网络。要配置和连接 Yún 到 Wi-Fi 网络，只需遵循几个步骤。第一步是将 Arduino 板插入墙壁插座并等待片刻。

一段时间后，你应该会在电脑上的 Wi-Fi 网络列表中看到由 Yún 创建的新 Wi-Fi 网络。连接到它，打开浏览器，并输入以下命令：

```cpp
arduino.local

```

这应该会打开由 Arduino Yún 板提供服务的页面。你将被提示输入你的 Yún 板的密码；请输入一个你容易记住的密码，因为你在尝试本书中的项目时需要多次使用它。

然后，你将被带到一个新的页面，其中包含有关你的 Yún 板的一些信息。你可以更改板子的名称（我们将在所有项目中使用它），还可以设置你的 Wi-Fi 参数。你必须设置这些参数，以便板子可以连接到你的家庭 Wi-Fi 网络。从列表中选择正确的网络，输入你的密码，然后点击 **Configure & Restart**。

然后，Yún 将重新启动并连接到你的网络。在这个时候，你也可以重新连接你的电脑到本地 Wi-Fi 网络。一段时间后，你可以在浏览器中输入以下命令，并加上你给你的 Arduino 板起的名字：

```cpp
myarduinoyun.local

```

你应该会再次回到相同的页面，但这次，Yún 板已经连接到你的本地 Wi-Fi 网络。如果一切正常，这意味着 Yún 板已经准备好用于本书中的所有项目。

你还需要打开 Yún 的 REST API。这个设置在 Yún 的配置页面上进行配置，你必须选择 **OPEN**，它靠近 **REST API ACCESS**。当选项被更改后，再次重启 Yún 板。

注意，您有两种方式来编程您的 Yún 板：您可以直接通过 micro USB 将其连接到您的电脑，或者通过 USB 适配器连接到墙上，然后通过 Wi-Fi 上传草图。

# 本书面向对象

如果您想使用 Arduino 平台构建令人兴奋的物联网应用程序，这本书就是为您准备的。如果您计划构建一些酷炫的项目来自动化您的家庭并远程监控它，您将喜欢这本书。您将学习如何测量数据、控制设备、使用 USB 摄像头远程监控您的家庭，并构建一个 Wi-Fi 控制的移动机器人。

就技能而言，本书假设您已经对 Arduino 平台（例如，使用 Arduino Uno）有一些了解，并且对电子和编程有一些基本知识。请注意，即使没有 Arduino Yún 和板上 Linux 机器的先前经验，本书也可以使用。

# 惯例

在本书中，您将找到多种文本样式，以区分不同类型的信息。以下是一些这些样式的示例及其含义的解释。

文本中的代码单词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 用户名如下所示：“警报机制发生在名为`sendTempAlert`的新函数中，如果温度低于限制，则会调用此函数。”

代码块设置如下：

```cpp
[default]
String data = "";
data = data + timeString + "," + String(temperature) + "," + String(humidity) + "," + String(lightLevel);
```

当我们希望您注意代码块中的特定部分时，相关的行或项目将以粗体显示：

```cpp
[default]
if (client) {
  // Process request
 process(client);

  // Close connection and free resources.
  client.stop();
}
```

任何命令行输入或输出都如下所示：

```cpp
# http://myarduinoyun.local/arduino/digital/8/1

```

**新术语**和**重要词汇**以粗体显示。您在屏幕上看到的、在菜单或对话框中的单词，例如，在文本中显示如下：“只需单击**interface.html**，界面应该打开并调整到您的手机屏幕大小。”

### 注意

警告或重要注意事项以如下所示的框显示。

### 提示

技巧和窍门看起来像这样。

# 读者反馈

我们始终欢迎读者的反馈。请告诉我们您对这本书的看法——您喜欢什么或可能不喜欢什么。读者反馈对我们开发您真正能从中获得最大收益的标题非常重要。

要向我们发送一般反馈，只需发送电子邮件到`<feedback@packtpub.com>`，并在邮件的主题中提及书名。

如果您在某个主题上具有专业知识，并且您有兴趣撰写或为本书做出贡献，请参阅我们的作者指南[www.packtpub.com/authors](http://www.packtpub.com/authors)。

# 客户支持

现在您是 Packt 图书的骄傲拥有者，我们有一些事情可以帮助您从您的购买中获得最大收益。

## 下载示例代码

您可以从[`www.packtpub.com`](http://www.packtpub.com)您购买的所有 Packt 书籍的账户中下载示例代码文件。如果您在其他地方购买了这本书，您可以访问[`www.packtpub.com/support`](http://www.packtpub.com/support)，注册以直接将文件通过电子邮件发送给您。

本书四个项目的所有最新代码也可以在[`github.com/openhomeautomation/geeky-projects-yun`](https://github.com/openhomeautomation/geeky-projects-yun)找到。

## 下载本书的彩色图像

我们还为您提供了一个包含本书中使用的截图/图表彩色图像的 PDF 文件。这些彩色图像将帮助您更好地理解输出中的变化。您可以从以下链接下载此文件：[`www.packtpub.com/sites/default/files/downloads/8007OS_ColoredImages.pdf`](https://www.packtpub.com/sites/default/files/downloads/8007OS_ColoredImages.pdf)。

## 错误清单

尽管我们已经尽一切努力确保内容的准确性，但错误仍然可能发生。如果您在我们的书中发现错误——可能是文本或代码中的错误——如果您能向我们报告，我们将不胜感激。这样做可以节省其他读者的挫败感，并帮助我们改进本书的后续版本。如果您发现任何错误清单，请通过访问[`www.packtpub.com/support`](http://www.packtpub.com/support)，选择您的书籍，点击**错误提交表单**链接，并输入您的错误详细信息来报告它们。一旦您的错误得到验证，您的提交将被接受，错误将被上传到我们的网站，或添加到该标题的错误清单部分。

## 盗版

互联网上版权材料的盗版是一个跨所有媒体的持续问题。在 Packt，我们非常重视我们版权和许可证的保护。如果您在互联网上遇到我们作品的任何非法副本，无论形式如何，请立即提供位置地址或网站名称，以便我们可以寻求补救措施。

如果您怀疑有盗版材料，请通过 `<copyright@packtpub.com>` 联系我们，并提供链接。

我们感谢您在保护我们作者和我们提供有价值内容的能力方面的帮助。

## 咨询

如果您在本书的任何方面遇到问题，可以通过 `<questions@packtpub.com>` 联系我们，我们将尽力解决。
