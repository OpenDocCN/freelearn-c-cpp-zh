<html><head></head><body>
<div><h1 class="chapter-number" id="_idParaDest-16"><a id="_idTextAnchor015"/>1</h1>
<h1 id="_idParaDest-17"><a id="_idTextAnchor016"/>Introduction to the IoT and Arduino</h1>
<p>Connecting any device or machinery to the most advanced communication network in the world, the internet, opens endless possibilities for the progress of human beings.</p>
<p>The realization of an interconnected world involves many different technologies and technical aspects, regulations, and even ethical principles.</p>
<p>In this chapter, you will learn<a id="_idIndexMarker000"/> about the whole architecture of an end-to-end <strong class="bold">Internet of Things</strong> (<strong class="bold">IoT</strong>) application, including the different software layers and the communication channels required between its various components. We’ll also analyze similarities and differences<a id="_idIndexMarker001"/> between the IoT and its industrial version, the <strong class="bold">Industrial Internet of Things</strong> (<strong class="bold">IIoT</strong>), and we’ll look at the <strong class="bold">Industry 4.0</strong> concept and what digital transformation<a id="_idIndexMarker002"/> for industry implies.</p>
<p>This information is fundamental for understanding the IoT, IIoT, and I4, as well as for evaluating its impact on our daily lives.</p>
<p>Finally, we will cover the principles and benefits behind the open source licensing model adopted by Arduino and some approaches to protecting your intellectual property in the source code of your projects.</p>
<p>By the end of this chapter, you will be able to specify the technical requirements of a commercial IoT application that implements<a id="_idIndexMarker003"/> new digital business model patterns enabled by the IoT and is built on the <strong class="bold">Arduino IoT Cloud</strong> platform with respect to the Arduino trademarks.</p>
<p>In this chapter, we’re going to cover the following main topics:</p>
<ul>
<li>What is the Internet of Things?</li>
<li>Benefits for users</li>
<li>The enablement of different business models</li>
<li>The architecture of an end-to-end IoT application</li>
<li>Communication technologies and protocols</li>
<li>Security aspects and device provisioning</li>
<li>Open source</li>
</ul>
<h1 id="_idParaDest-18"><a id="_idTextAnchor017"/>What is the Internet of Things?</h1>
<p>There is not a single official definition<a id="_idIndexMarker004"/> of the IoT, but the following sentence covers the concept in its entirety:</p>
<p><em class="italic">The Internet of Things or, briefly, IoT is the concept of connecting physical objects to a network and other devices to let them interact with each other and with human beings to share information and take action through </em><em class="italic">the Internet.</em></p>
<p>These physical objects are electronic devices using different telecommunication technologies to connect to a network. It’s not surprising that the choice of network falls to the internet, not only because of the name of this technology but the characteristics of the internet itself:</p>
<ul>
<li>A digital network</li>
<li>Worldwide coverage</li>
<li>Standardized specifications</li>
<li>Widely used for personal and professional communications</li>
</ul>
<p>IoT devices are often called <strong class="bold">IoT Nodes</strong> because they are part<a id="_idIndexMarker005"/> of this network.</p>
<p>They feature sensors to detect or measure a physical property, such as the temperature of the environment or the speed of a vehicle. In other<a id="_idIndexMarker006"/> cases, they are connected to external machinery, devices, or appliances, always with the same purpose: collecting the values of physical properties, often called <strong class="bold">Telemetry Elements</strong>, and transmitting them to the internet. Once the values have reached the internet, they can arrive almost everywhere in the world in a few hundredths of a second.</p>
<p>You may think about interfacing an IoT node to an industrial machine to remotely transmit the information about its running conditions, and eventually alert a maintenance operator, in case of a fault. Or, connecting the node to your coffee machine to measure the level of the coffee grounds with the possibility to check it remotely while you are at the supermarket so that you can buy another pack only if required.</p>
<p>As a matter of fact, the IoT opens up the possibility to virtually infinite applications because connecting a device to the internet implies the possibility to both monitor the environment and send commands to the node remotely.</p>
<p>In fact, the telecommunication<a id="_idIndexMarker007"/> technologies used in the IoT are bidirectional and information can flow from the IoT node to the internet and vice versa. The interaction among IoT nodes is mainly related to the exchange of digital information by using the internet as the communication media.</p>
<h2 id="_idParaDest-19"><a id="_idTextAnchor018"/>Intelligence at the edge versus on the cloud</h2>
<p>It’s important to underline<a id="_idIndexMarker008"/> that IoT nodes also have processing<a id="_idIndexMarker009"/> capabilities to different extents; they can be programmed to receive information from the internet and implement some logic accordingly.</p>
<p>Another example might help. You can interface IoT <em class="italic">Node #1</em> to a weather station, collect information about the forecast, and transmit it to IoT <em class="italic">Node #2</em> connected to your automatic irrigation unit. You may program <em class="italic">Node #2</em> to prevent a waste of water in case rain is expected in the next few hours. Another node, <em class="italic">Node #3</em>, can embed a sensor and share the soil moisture value with <em class="italic">Node #2</em> through the internet so that irrigation is activated, if necessary, when the forecast is good and the soil requires water.</p>
<p>This may not be relevant to my small garden, but you might consider the benefits in the case of extensive fields, where different areas may be irrigated depending on the crop’s requirements.</p>
<p>When the control logic is programmed directly on a node, we say that it is <em class="italic">at the edge</em>, referring to the edge between the physical and the digital world.</p>
<p>The logic can also be programmed <em class="italic">on the cloud</em>. In this case, there is an application running on a computer connected to the internet. In fact, the cloud empowers a huge number of computers connected together and to the internet with the aim of sharing computational and storage power, as well as balancing the computational load across multiple systems. With the <em class="italic">on-the-cloud</em> approach, the application on the cloud receives telemetry elements from one or more IoT nodes, aggregates the information, and defines the commands to send back to the same or other IoT nodes.</p>
<p>I talk about commands because IoT nodes can also be interfaced with actuators, such as motors, pumps, electro valves, electrical relays, and any other device responsible for moving and controlling a mechanism. This means that an IoT node can interact with the physical world by performing physical, programmed actions as a reaction to certain measures.</p>
<p>Considering the example of irrigation, the IoT node is electrically connected to a hydraulic servo valve and drives it to control the flow of water to the nozzles.</p>
<p>IoT nodes always implement embedded control logic to some extent, even when the intelligence of the application resides <em class="italic">on the cloud</em>. This is required to receive, interpret, and react to the commands from the application server on the cloud.</p>
<p>The distinction between <em class="italic">on the edge</em> and <em class="italic">on the cloud</em> is mainly related to the real intelligence of the application, such as the capability to understand when it’s necessary to irrigate on the basis of the forecast and the moisture of the soil.</p>
<p>So, intelligence <em class="italic">on the edge</em> is completely programmed on the node by writing software code in a structured language<a id="_idIndexMarker010"/> such as C++ or MicroPython, or adopting artificial intelligence models<a id="_idIndexMarker011"/> based on neural networks. With the <em class="italic">on-the-cloud</em> approach, it is the responsibility of application software running on a cloud server to decide to automatically trigger a valve.</p>
<p>The choice between on-the-edge and on-the-cloud implementations is mainly driven by the application and the required response time. Implementations on the cloud allow more freedom in terms of programmable features. This is because the cloud is composed of multiple servers working together and it has virtually no constraints of memory and computational power. On the other hand, deployments on the edge remove some bottlenecks related to the latency of communication networks, reducing the response time of an IoT node and allowing it to interact with the physical world in real time.</p>
<p>It’s worth noting that an implementation on the edge doesn’t preclude the benefit of implementing manual remote control of the nodes in addition to automatic control. For example, an operator could interact<a id="_idIndexMarker012"/> with the devices in the field through a graphical user interface visualized on a web page (called a <em class="italic">dashboard</em>). They would see the actual values of environmental conditions and could trigger the valve as they liked.</p>
<p>The programmer of the application is responsible for defining and configuring the dashboards, which can be as complex as required, with widgets to visualize and insert data such as graphs and textboxes, and trigger commands such as switches, sliders, pushbuttons, and many others.</p>
<p>The market sees an increasing number of on-the-edge applications for various use cases where microcontroller devices can be successfully adopted as control units of IoT nodes. This trend has led to the continuous, fast improvements in hardware components, with augmented computational capabilities and a consequent decrease in their cost, as well as the mass availability of wireless telecommunication technologies characterized by very low power consumption and long-distance transmission range.</p>
<p>When we consider the installation of IoT nodes in remote and not easily accessible areas, energy autonomy is a very important aspect: we want to reduce the need for battery recharging as much as possible to decrease the costs of human intervention. Ideally, a good IoT application is supposed to be fully autonomous!</p>
<p>When you adopt one of the <strong class="bold">Low-Power Wide Area Network</strong> (<strong class="bold">LPWAN</strong>) technologies, you need to consider<a id="_idIndexMarker013"/> that a decreased power consumption comes at the expense of a reduced quantity of data that can be transmitted with a single message and a higher interval between messages. It’s like considering data as a form of energy and applying the energy conservation law: if you decrease the power, you decrease the amount of data, not only the transmission range.</p>
<p>A decreased amount of data per message and a longer interval between two transmissions mean that you need to reduce<a id="_idIndexMarker014"/> the information exchanged with the cloud so that the cloud needs<a id="_idIndexMarker015"/> less time to collect all the values to process.</p>
<p>When this duration, which we may call <strong class="bold">Cloud Latency Time</strong>, is too long, then it’s worth implementing<a id="_idIndexMarker016"/> intelligence on the edge.</p>
<h2 id="_idParaDest-20"><a id="_idTextAnchor019"/>The Arduino ecosystem</h2>
<p>It’s not possible<a id="_idIndexMarker017"/> to connect a single device to every type of sensor, actuator, external machinery, and device in the same way, because each element implements different electrical interfaces and ways to communicate.</p>
<p>Manufacturers produce IoT nodes, or components suitable for building IoT nodes, focusing on defined use cases and technologies, and adopting some of the various standards available on the market. Every person developing an IoT project has the responsibility to select the nodes with the best characteristics for their application. When a complete product with the required features is not readily available in the market, you may use electronic modules to build your IoT nodes as you like. This is where Arduino comes in handy.</p>
<p>We assume you know what Arduino is since you’re reading this book. Anyway, I think it’s worth mentioning that Ardu<a id="_idTextAnchor020"/>ino is not only a technology but an ecosystem maintained by the commercial business of the same name. The modular ecosystem is composed of electronic microcontroller based development boards, firmware, software libraries and tools to program boards and the cloud platform described in this book.</p>
<p>The Arduino team engineers every single component with particular attention to its usability and the user experience, according to the mission of the company, which is to <em class="italic">“enable anyone to innovate by making complex technologies open and simple to use.”</em> (M. Banzi, cofounder of Arduino).</p>
<p>It’s not surprising that the Arduino Cloud also follows the same approach, and you’ll see how easy it is to develop an IoT cloud application with the Arduino Cloud, without programming but configuring it. The ease of use of the Arduino Cloud is related to the native on-the-edge model: Arduino follows the technology trend of implementing the intelligence on the nodes, leaving the data storage and visualization tasks to the cloud.</p>
<p>You may still deploy an IoT solution on the cloud with the Arduino Cloud when you interface the Arduino Cloud with third-party services where the application logic and the intelligence are implemented.</p>
<p>Besides officially Arduino-compatible development boards, you can also use popular development boards such as the ESP32 &amp; ESP8266 series development boards with the Arduino IoT Cloud. This feature helps the developer to use existing hardware solutions to migrate their products to the Arduino IoT Cloud without changing existing hardware technologies.</p>
<p>The other important aspect of the Arduino ecosystem is related to making technologies open. Most of the hardware and software produced by Arduino is publicly released under open source licenses, and by the end of this chapter, you will know the benefits and the obligations related to open source<a id="_idIndexMarker018"/> licenses and how to protect your intellectual property. Arduino<a id="_idIndexMarker019"/> also provides professional hardware devices for industry use, such as the <strong class="bold">Portenta series</strong>, which is specially designed for IoT and AI solutions. <strong class="bold">Arduino Opta</strong> <strong class="bold">Programmable Logic Controllers</strong> (<strong class="bold">PLCs</strong>) are the new product line in the PRO series, which is designed<a id="_idIndexMarker020"/> for industry deployment. For more details regarding<a id="_idIndexMarker021"/> the PRO series, please visit <a href="https://store-usa.arduino.cc/collections/pro-family">https://store-usa.arduino.cc/collections/pro-family</a>.</p>
<h2 id="_idParaDest-21"><a id="_idTextAnchor021"/>The IoT, big data, artificial intelligence, and machine learning</h2>
<p>We have seen that an IoT application<a id="_idIndexMarker022"/> involves the connection between the physical and digital worlds to create some sort of digital automation of physical processes. The outcome is the result of the following:</p>
<ul>
<li>Connecting devices to the internet</li>
<li>Allowing devices to share information to interact and collaborate</li>
<li>Implementing smart applications that can take intelligent actions</li>
</ul>
<p>When we talk about digitalization, other buzzwords are often used together with the IoT: <strong class="bold">big data</strong>, <strong class="bold">artificial intelligence</strong>, and <strong class="bold">machine learning</strong>. These are complementary sciences<a id="_idIndexMarker023"/> that can be used to realize complex digital projects. We’ll describe<a id="_idIndexMarker024"/> what they are and how they are used in conjunction with the IoT next.</p>
<p><strong class="bold">Big data</strong> refers to extremely large and complex datasets<a id="_idIndexMarker025"/> and to the science that studies how to process them. Traditional data processing software is unable to handle big data in a reasonable amount of time due to the size of the datasets and their unstructured and disaggregated nature, so dedicated technologies are necessary to extract valuable insights and knowledge used to support decision-making and strategic planning.</p>
<p>When we consider hundreds or thousands of IoT nodes sharing different values in real time, collected from the physical world, you may understand that the size and variety of the data require much more than a traditional database.</p>
<p>Big data involves an implementation of logic on the cloud. Even when an on-the-edge model is used for a fast response time in the physical world, data can be sent to the cloud for long-term processing without time constraints. Here, big data can be supportive.</p>
<p>For example, with reference to our example of smart irrigation, a node can use values from soil moisture sensors to control a hydraulic valve on the edge and also share information with a cloud application that uses data from multiple nodes to adapt a model for weather forecast considering, and also additional information from national weather stations.</p>
<p>You may consider big data as the cloud application processing raw data to extract and store valuable information.</p>
<p>Artificial intelligence and machine learning<a id="_idIndexMarker026"/> are often referred to as being the same science, but they are not. <strong class="bold">Artificial Intelligence</strong> (<strong class="bold">AI</strong>), is a broad field that encompasses<a id="_idIndexMarker027"/> many different subdisciplines, including <strong class="bold">Machine </strong><strong class="bold">Learning</strong> (<strong class="bold">ML</strong>).</p>
<p>AI is the broader concept of machines being able to carry out tasks in a way that would normally require human intelligence, such as visual perception, speech recognition, decision-making, language translation, and others.</p>
<p>ML is a specific subfield of AI that focuses on enabling computers to learn from data and make predictions or decisions without being explicitly programmed to do so. Usually, ML involves training a model on a dataset and using the trained model to make predictions or decisions on new data.</p>
<p>In summary, AI is the broader concept of the mimicking of human intelligence by machines, while ML is a specific method/technique to achieve AI, which allows the machine to learn from data, instead of being explicitly programmed.</p>
<p>AI and ML models can be trained by using the data collected by big data tools and used to interpret other new data from the same or another big data platform.</p>
<p>Once trained, the models can be deployed on the cloud and on the edge as well, depending on their size and the technical features of the nodes.</p>
<p>While big data tools processes the data directly with analytical models, AI/ML works on patterns in data in order to recognize situations and trends.</p>
<p>For example, you can use big data<a id="_idIndexMarker028"/> to extract the trends of soil moisture in a wide<a id="_idIndexMarker029"/> region where thousands of sensors collect values every hour and big data can support you in distinguishing between daily, monthly, and seasonal changes over a period of years.</p>
<p>ML works <a id="_idIndexMarker030"/>differently; it ingests values of different types, such as weather forecast parameters, and identifies patterns that affect your observations. You may create an ML model by training a neural network with temperature, atmospheric pressure, humidity, wind speed, and soil moisture values across a period. Then you provide another set of data from a different period, without the soil moisture values, and the model is able to suggest indications about irrigation needs.</p>
<p>With reference to the following diagram, you may see the complete dataflow of a complex application, where the IoT senses the physical world, reacts immediately on the edge when required, and forwards the values to big data for offline or batch processing (not in real time):</p>
<div><div><img alt="Figure 1.1 – Data integration with other technologies" src="img/B19752_01_01.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.1 – Data integration with other technologies</p>
<p>Big data<a id="_idIndexMarker031"/> stores and aggregates<a id="_idIndexMarker032"/> the values that are used to train<a id="_idIndexMarker033"/> and run AI/ML models. These models make decisions and send commands back to IoT nodes that interact with the physical world.</p>
<h2 id="_idParaDest-22"><a id="_idTextAnchor022"/>The IoT, IIoT, and I4.0</h2>
<p>The IoT concept<a id="_idIndexMarker034"/> has been widely applied in different aspects of our lives and<a id="_idIndexMarker035"/> some applications are already part of our daily routines.</p>
<p>For example, you may buy a smart doorbell online for tens of dollars. This device integrates a microphone and a loudspeaker and connects to your Wi-Fi. This IoT node remotely alerts you on your mobile when someone rings, and it allows you to have a conversation with the visitor in front of your door, even if you are miles away from your house. With some models, you may even unlock the door.</p>
<p>Have you ever switched on a light in your house by asking Alexa®, Google Assistant™, or Apple’s Siri to do so? All those IoT nodes are examples of applications in the smart building and home vertical.</p>
<p>Advanced solutions manage air conditioning, windows, and curtains depending on the environmental situation, measured by presence detection, temperature, and sunlight sensors.</p>
<p>We’ve already introduced an application in the agriculture market, with others related to tracking live animals and their conditions by localizing them with GPS technologies and measuring their vital parameters. For example, a rapid heartbeat can be a symptom of stress due to overheating or the presence of a predator.</p>
<p>We all like to receive frequently updated tracking information about the shipping of our last online purchase. The online tracking of deliveries is also useful to freight forwarding companies to reduce the risks of complaints and the associated operative costs. All this is possible thanks to the usage of handheld devices connected to the internet and small IoT nodes attached to valuable goods, capable of sending their location wirelessly to a cloud application. Logistics is definitely one of the sectors where the IoT is successfully adopted, but the healthcare, retail, smart infrastructure, security, and surveillance markets also offer many examples of IoT applications.</p>
<p>The deployment of an IoT application in the industrial environment is commonly referred to as the IIoT.</p>
<p>IIoT applications mainly focus on collecting data from the physical world to better understand how to improve industrial processes, make better use of plants, and optimize the consumption of energy, water, human work, and other resources involved in activities.</p>
<p>The main target is an increase in performance and a reduction of costs in all departments.</p>
<p class="callout-heading">Important note</p>
<p class="callout">This is not the place to cover the implications in terms of the workforce, but I would like to say that the IIoT doesn’t directly imply the reduction of operators, but their training and technical growth can be managed from a cost-reduction perspective when good, fair employment policies are adopted.</p>
<p>The adoption of the IoT principles<a id="_idIndexMarker036"/> in the industrial environment requires particular attention in the implementation and deployment of nodes because the environment can be harsher in terms of temperatures, vibrations, and electromagnetic pollution.</p>
<p>The overheating caused by higher temperatures in certain industrial environments causes failures in the electronic components of nodes and reduces their lifespan.</p>
<p>Vibration fatigue is another main cause of failures of electronic devices. The vibrations transfer to the electronic board when a node is installed in contact with a machine, and they apply stress to the components, resulting in early failure.</p>
<p>Industrial environments are quite dense with industrial motors in machinery, power cables, the cellular devices of operators, and other sources of electromagnetic fields.</p>
<p>The preceding aspects<a id="_idIndexMarker037"/> affect IIoT nodes only, while the application of the IoT to the industrial environment has other implications on the cloud side:</p>
<ul>
<li><strong class="bold">Scalability</strong>: Cloud infrastructures for the IIoT typically require it to easily handle and store large amounts of data from a vast number of IoT devices</li>
<li><strong class="bold">Data security</strong>: The industrial market requires improved cloud security measures to protect against cyber threats to cloud applications and IIoT devices</li>
<li><strong class="bold">Data localization</strong>: One of the frequent requests from the industrial market is that all data remains confidential and confined to the local country</li>
</ul>
<p>Several reasons<a id="_idIndexMarker038"/> justify a request for cloud data to remain in the local country. Data privacy and security concerns are evident when you consider that keeping data within a country ensures that it is subject to the jurisdiction and protection of local laws.</p>
<p>Furthermore, some countries have strict regulations regarding the storage and handling of sensitive data, and keeping it within the country helps organizations comply with these regulations.</p>
<p>Last but not least are considerations related to performance and cost-effectiveness: accessing data and applications stored in a remote location can result in slower performance and higher latency. Likewise, transferring data across international borders can be expensive and complex, making it more cost-effective to store data within a country.</p>
<p><strong class="bold">Industry 4.0</strong>, known as the <strong class="bold">Fourth Industrial Revolution</strong>, is a broader concept than the IIoT and refers to the application<a id="_idIndexMarker039"/> of the IIoT specifically in smart factories for the production<a id="_idIndexMarker040"/> of consumer goods.</p>
<p>In this way, production processes are controlled and monitored in real time and digitalization empowers machines and devices to make decisions, freeing up human workers for higher-level tasks. This is a decentralized decision-making approach, where production is driven by data collected and analyzed by machines and devices in order to speed up a continuous improvement of the production processes.</p>
<p>Flexible manufacturing processes allow the mass production of customized products in batches of one pace having features defined by every single customer at the time of online shopping.</p>
<p>Industry 4.0 means connecting a fully automated factory to the internet to improve the customer experience and optimize the overall business performance.</p>
<p>Customers can go to their preferred online store to buy a pair of running shoes, select the model, choose the materials, configure the colors of the different parts, and place an order. After payment by credit card, the order digitally arrives at the factory, where robots and machinery are configured in real time to get material from the warehouse, produce your custom shoes, including printing your name on them and the box, and then return the box to the warehouse ready for shipment.</p>
<p>Not a single piece of paper has been printed throughout the whole process. The facility managers can consult metrics online regarding the performance of the factory and the customer receives their personalized shoes delivered at home.</p>
<p>This is not a dream, and it’s already possible with the manufacturer Nike®, famous worldwide.</p>
<p>Industry 4.0 requires<a id="_idIndexMarker041"/> a wider software architecture than the IIoT cloud.</p>
<p>You may consider<a id="_idIndexMarker042"/> that the IIoT cloud is already interfaced with the machinery and devices of a production plant in an IIoT application. Industry 4.0 additionally connects digital systems from the different departments of the business, including the following:</p>
<ul>
<li><strong class="bold">Enterprise Resource Planning</strong> (<strong class="bold">ERP</strong>): To automate and manage core business processes<a id="_idIndexMarker043"/> for optimal performance</li>
<li><strong class="bold">Computerized Maintenance Management System</strong> (<strong class="bold">CMMS</strong>): To manage assets, schedule<a id="_idIndexMarker044"/> maintenance, and track work orders</li>
<li><strong class="bold">Warehouse Management Systems</strong> (<strong class="bold">WMSs</strong>): To support inventory and manage supply chain<a id="_idIndexMarker045"/> fulfillment operations</li>
</ul>
<p>Here, we have discussed the IoT<a id="_idIndexMarker046"/> in detail, as well as cloud versus edge processing and AI implementations. We have covered some details about the Arduino ecosystem, including their PRO line of products. Later, we discussed the IoT, big data, artificial intelligence, and machine learning, including the IIoT, as they all are very important pillars in high-level projects. In the next section, we will discuss what benefits there are for users by implementing the IoT in daily life as well as in industry.</p>
<h1 id="_idParaDest-23"><a id="_idTextAnchor023"/>Benefits for users</h1>
<p>Applications based<a id="_idIndexMarker047"/> on these smart technologies offer huge benefits to end users such as automating tasks and making Things remotely controllable and monitorable.</p>
<p>The IoT and IIoT improve our efficiency by letting IoT applications optimize the usage of resources and allowing us to reduce costs. They also enhance our safety and security, because IoT devices can provide real-time monitoring and alerts.</p>
<p>Data collection and analysis by IoT nodes can be used to personalize our experiences and the augmented connectivity provided by IoT solutions creates new possibilities for communication and collaboration.</p>
<p>Finally, the IoT and IIoT enable new and modern business models, as we’ll see in the next section.</p>
<p>You may ask why all this is happening now and if it comes without a cost.</p>
<p>The history of the IoT can be traced back to the 1980s when the term was first used by British technology pioneer Kevin Ashton in a presentation about the potential for interconnected devices.</p>
<p>In the early 2000s, the development of wireless networking standards such as Bluetooth and Wi-Fi made it easier to connect devices to the internet and cellular connectivity became a consumer market.</p>
<p>Ten years later, major technology companies, such as Microsoft, Google, and Amazon, began to invest in IoT cloud platforms.</p>
<p>Today, after 40 years, the progress of software technology has made big data, data analytics tools, and cloud platforms accessible and affordable for most people. The internet is a predominant medium of communication and the decreased cost of electronics, together with ecosystems such as Arduino, has made the technology easy to use.</p>
<p>The IoT indirectly brings costs to businesses of every size because they need to seize the moment, adopt these technologies, and keep up with progress to remain competitive in the market.</p>
<p>The social impact of the IoT<a id="_idIndexMarker048"/> is related to the introduction of different behaviors and the risk of human beings losing some manual and practical capabilities. For example, people who used to travel by car before navigation applications were available on mobile phones had a certain sense of orientation; nowadays, this skill has almost disappeared.</p>
<p>The IIoT introduces the risk of misleading managers to think that these technologies support cost savings by reducing the workforce because everything is automated. Actually, the personnel need training to maintain, troubleshoot, and improve the new systems, and it’s important that business managers understand this.</p>
<p>In the end, it is the responsibility<a id="_idIndexMarker049"/> of everyone involved in an IoT project to consider the application and manage the social effects properly. It means that it’s also your responsibility, dear reader.</p>
<h1 id="_idParaDest-24"><a id="_idTextAnchor024"/>The enablement of different business models</h1>
<p>Joseph Turow, the Robert<a id="_idIndexMarker050"/> Lewis Shayon Professor of Communication<a id="_idIndexMarker051"/> at the Annenberg School for Communication at the University of Pennsylvania, said <em class="italic">“Despite hacks and privacy issues, people will feel a need to keep connected, partly because companies will reward them for doing so (or make life difficult if </em><em class="italic">they don’t)”</em>.</p>
<p>This improved connectivity among Things and people has an immediate consequence on the evolution of the patterns of digital business models.</p>
<p>The following figure, from the whitepaper <em class="italic">Business Models and the Internet of Things</em> by the Bosch IoT Lab, shows the evolution of web technologies and what business models were enabled<a id="_idIndexMarker052"/> in the different phases:</p>
<div><div><img alt="Figure 1.2 – Evolution of web technologies" src="img/B19752_01_02.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.2 – Evolution of web technologies</p>
<p>We are now fully in the Web 3.0 phase where the IoT requires a drastic shift of mindset in the creation and the capture of commercial value. The Business School of Harvard University spotted this change and highlighted a series of implications.</p>
<p>First of all, customers require their needs to be addressed in real time. The IoT even allows businesses to address emergent needs in a predictive manner.</p>
<p>The possibilities offered<a id="_idIndexMarker053"/> by the IoT change the product management processes<a id="_idIndexMarker054"/> during their life cycle. The obsolescence reduces and it happens over a longer time because new versions of a product are evaluated by considering aggregated information about usage, collected automatically from products themselves, and analyzed to identify the effective requirements. Furthermore, the proposed user experience is based expressly on the <em class="italic">collaboration</em> of the products with others, eventually manufactured by third parties.</p>
<p>This moves the value of the products in such a way that customers perceive more benefits in the personalization of the products and their features than in commodity advantages such as lower cost, higher quality, and immediate availability. Or, in the case of professional and industrial products, brand and ownership of the intellectual property.</p>
<p>The appreciation for the collaboration capabilities of IoT products also suggests manufacturers should invest resources in understanding how other ecosystems work and make money, with the aim of developing a certain level of compatibility, more so than making a big effort to leverage internal core competencies and existing resources and processes.</p>
<p>Once the features of the new version are identified and implemented, manufacturers can often update many products at the same time, and remotely over the air. This is one of the appealing services that can be offered as the intrinsic value of a product or a paid service for subscribers.</p>
<p>The increased possibility to offer additional services moves the path to profit in the business strategy. The new approach is the search for the optimal balance between immediate and recurrent revenues. Immediate revenues, related to the traditional core business, often require a lot of effort and large investments to scale the number of sold products. On the other hand, the activities required to establish and maintain a good service offering, based on IoT capabilities, guarantee recurrent revenues in time.</p>
<h2 id="_idParaDest-25"><a id="_idTextAnchor025"/>Business models enabled by the IoT</h2>
<p>When you buy a mobile phone<a id="_idIndexMarker055"/> from one of the two or three main<a id="_idIndexMarker056"/> manufacturers, typically, you don’t pay the real value of the device itself, but the perceived value of the product. Many people are keen on spending more on a mobile that represents a status symbol, rather than on an anonymous model, even with the same features. The status symbol is a benefit perceived as product value.</p>
<p>In a similar way, we may calculate the price of an IoT solution on the benefits it provides, instead of its costs. For example, we may consider a smart building project for energy efficiency: the IoT system tracks and analyzes energy usage, automatically controls illumination in common areas, and allows the owner of a building to identify areas for improvement and reduce their energy costs.</p>
<p>According to this model, called <strong class="bold">outcome-based</strong>, a solution provider may propose the system for a percentage<a id="_idIndexMarker057"/> of the savings on the energy bills of the customer, plus the installation and removal costs. They maintain the property using their IoT hardware without selling it but, when they close the contract, they have created a source of recurrent revenue for a certain amount of time. At the end of the contract period, they remove and reuse the IoT products for another installation. In this way, the cost of the IoT hardware is an investment of the solution provider and, considering the product life cycle mentioned previously and the low level of wear of these devices, it can generate a good return.</p>
<p>Paying for the benefits provided doesn’t implicitly mean paying more than the value of the product, but it can still<a id="_idIndexMarker058"/> be convenient for both parties involved. This is the case with the <strong class="bold">pay-per-usage</strong> model. Going back to the smart irrigation example, farmers can then use the IoT application provided by the water company to water their crops, with charges based on the amount of water used. The goal is not to make money on the IoT device itself but to use the data produced by the nodes to track usage.</p>
<p>The <strong class="bold">asset-sharing</strong> model is a pay-per-usage model characterized<a id="_idIndexMarker059"/> by the fact that the asset monitored by the IoT nodes is shared among multiple customers. For example, in the last few years, many businesses have bought and rented electric scooters in many different cities in the world. The user enrolls on the provider’s platform and uses their mobile, connected to the internet, to start and stop the rental and enable the scooter accordingly. This is a very good example of an IoT application in the smart cities vertical: both the user’s mobile and the scooter are connected to, and interact through, the internet. In this case, the user pays for the benefit of riding in certain areas less than they would pay to buy their own scooter because they share the IoT product, the scooter, with the local community. The asset-sharing model is based on the concept of selling extra capacity to the market and solves the big concern that everyone has when buying expensive equipment: will I be able to utilize it to its maximum capacity?</p>
<p>When we talk about<a id="_idIndexMarker060"/> business models related to the sale of services, the <strong class="bold">subscription</strong> model is the most well known: the user doesn’t pay to own the solution, but they pay an amount regularly to use it. This model is usually adopted by companies offering smart home devices such as connected thermostats, security cameras, and smart locks. Customers pay a monthly or annual fee for access to the devices, as well as the ability to control and monitor them through a mobile app.</p>
<p>One type of IoT subscription<a id="_idIndexMarker061"/> business model with a growing trend in its adoption is <strong class="bold">asset tracking</strong>. The reduction in power consumption and dimensions, as well as the decreased dimensions and costs of IoT nodes, enable a progressive adoption to localize different assets they are attached to. In this case, the subscriber doesn’t pay for the IoT nodes but for regular access to the localization data and the movements of the assets.</p>
<p>The IoT supports the proposal<a id="_idIndexMarker062"/> of other kinds of services; for example, a predictive<a id="_idIndexMarker063"/> maintenance IoT solution enables the sales of a convenient maintenance service, where the contract is appealing to both the contractor and the customer. The contractor can keep their tariffs lower because they don’t need to schedule periodical visits to their customer: the system will inform them in advance to plan the intervention before it becomes urgent. At the same time, they can enlarge their customer base to justify the cost of the installed solutions.</p>
<p>A consultancy company can install an IoT solution to measure the performance of machinery in a production plant without stopping any machine because all data is collected by autonomous IoT nodes<a id="_idIndexMarker064"/> that don’t need interfaces to the existing plant. Data is used to measure the <strong class="bold">Overall Equipment Effectiveness</strong> (<strong class="bold">OEE</strong>) and suggest how to optimize the usage of the plant. In this case, the core business of the company is not the sale of IoT solutions, but the services deriving from the data collected by the IoT application.</p>
<p>The <strong class="bold">razor-blade</strong> business model in the IoT is similar to traditional models but with the added convenience<a id="_idIndexMarker065"/> and customization of IoT technology. The goal is to get the product in the customer’s hands, at cost or even less, to start selling your other products. The name comes from the company Gillette®, the inventor and first adopter: its main revenues come from the sale of the blades while razors are just the main source to bring about the sales of blades as one razor sold will generate multiple purchases of blades. In a similar way, HP® sells inkjet printers at a very low price with the aim of gaining revenues from the sale of the cartridges. The IoT can monitor the customer’s habits and suggest the optimal model for the consumable. It can also increase the probability of reordering because an order can be placed automatically by a device.</p>
<p>There are cases where businesses provide IoT applications with their hardware for free because its purpose is to monetize by collecting and reselling users’ data. This pertains to the situation involving driving habit monitoring devices. While these devices offer valuable insights to users, insurance companies derive significant benefits by analyzing driving patterns across a large number of individuals. Introducing this model can be seen as an expansion of your primary business, where you initially focus on addressing the needs of your end users and subsequently explore opportunities to generate revenue from their data. These two approaches can coexist harmoniously as long as you prioritize transparency with your customers regarding data usage and take necessary measures to safeguard their privacy.</p>
<p>In the preceding section, we have discussed<a id="_idIndexMarker066"/> what innovations and improvements<a id="_idIndexMarker067"/> end users benefit from due to smart products. The IoT has not only improved end users’ lifestyles but has also helped new business models to emerge, as well as helping industries to shift toward Industry 4.0, which helps industries run their production lines securely, quickly, and cost-effectively.</p>
<h1 id="_idParaDest-26"><a id="_idTextAnchor026"/>The architecture of an end-to-end IoT application</h1>
<p>Now that we know<a id="_idIndexMarker068"/> more about the IoT, we have seen its principles and some examples of different applications, the time is good to dig more into the technical aspects with the analysis of the architecture of an IoT application.</p>
<p>We have already introduced IoT nodes, cloud platforms, and applications. A picture is better than a thousand words to explain how they work together and the following diagram shows the architecture of an IoT solution in its entirety:</p>
<div><div><img alt="Figure 1.3 – High-level architecture of an IoT system" src="img/B19752_01_03.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.3 – High-level architecture of an IoT system</p>
<p>There is an important difference between<a id="_idIndexMarker069"/> cloud platforms and cloud applications. <strong class="bold">Cloud platforms</strong> implement communication, user and device management, data storage and security, and other basic services; <strong class="bold">c</strong><strong class="bold">loud applications</strong> implement the logic of the application, the dashboards, and all the specific aspects<a id="_idIndexMarker070"/> of the application.</p>
<p>In this sense, the Arduino IoT Cloud can be considered a cloud application running on the AWS cloud platform.</p>
<p>Thanks to the connectivity offered by the internet, you may set up even a complex IoT solution that features many different functionalities, just by exploiting multiple cloud applications, frameworks, and services already implemented by third parties and interconnected via the internet. This means that you don’t need to develop or configure everything from scratch and you may save time and headaches; it also explains the reason why multiple cloud platforms and cloud applications are visualized in the preceding figure.</p>
<p>Examples of these functionalities can be <strong class="bold">Single Sign-On</strong> (<strong class="bold">SSO</strong>), a user authentication service that allows a user to use<a id="_idIndexMarker071"/> one set of login credentials (e.g., name and password) to access multiple applications – such as social media platforms, and tons of others. You just need to decide what you need, search on the internet for the preferred provider, and easily integrate those features in your application without the need to program them. This is also valid for the Arduino Cloud platform, which offers a couple of different ways to interface with third-party applications, as we’ll see in <a href="B19752_12.xhtml#_idTextAnchor251"><em class="italic">Chapter 12</em></a>.</p>
<p>The gateway<a id="_idIndexMarker072"/> is the last type of module we need to talk about. <strong class="bold">Gateways</strong> support the connection between nodes and cloud platforms. Or, more precisely, they are the bridge connecting<a id="_idIndexMarker073"/> nodes to the internet and allowing the exchange of data between nodes and cloud applications. There are many different types of gateways, characterized by the communication technologies they implement.</p>
<p>Your Wi-Fi router is a perfect example of a gateway: it’s connected to the internet and it accepts connections from other devices via Wi-Fi. It converts the Wi-Fi device into the data transportation technology of your internet provider (landline, Ethernet, or fiber-optic cable).</p>
<p>Gateways may also implement additional functionalities, such as data filtering, protocol conversion, and security. Every IoT application includes gateways in the architecture, even when they are not directly managed by you or the programmer of the solution.</p>
<p>Let’s consider an application with nodes using cellular connectivity. It may look like the nodes are directly connected to the internet, but it’s not the case. In fact, the nodes connect to the cellular network as well as dedicated gateways managed by the network provider. It’s important to clearly understand the presence of all the components in the architecture because each part can be a point of weakness in the case of an issue and can make the troubleshooting<a id="_idIndexMarker074"/> longer and more complex.</p>
<h1 id="_idParaDest-27"><a id="_idTextAnchor027"/>Communication technologies and protocols</h1>
<p>Data flows through<a id="_idIndexMarker075"/> a number of different<a id="_idIndexMarker076"/> devices during the back-and-forth between IoT nodes and cloud applications. These devices implement various communication technologies and protocols and the following<a id="_idIndexMarker077"/> diagram shows the most common<a id="_idIndexMarker078"/> choices:</p>
<div><div><img alt="Figure 1.4 – Communication technologies and protocols" src="img/B19752_01_04.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.4 – Communication technologies and protocols</p>
<p>In relation to the four main communication paths in the whole chain, the main distinction is related to the wireless or wired nature of the communication.</p>
<p>As per the preceding figure, the <em class="italic">field-to-device</em> path is usually wired: sensors, actuators, and devices<a id="_idIndexMarker079"/> connect to an IoT node<a id="_idIndexMarker080"/> thanks to wires. They pack and exchange<a id="_idIndexMarker081"/> data according to one of the standards for wired interfaces shown in the figure.</p>
<p>The <em class="italic">device-to-gateway</em> path can be wired or wireless depending<a id="_idIndexMarker082"/> on the technical requirement of the node for each specific application. Wireless IoT nodes offer the following benefits compared to wired IoT nodes:</p>
<ul>
<li><strong class="bold">Mobility</strong>: Wireless IoT nodes are not restricted<a id="_idIndexMarker083"/> by physical connections and can be easily moved or relocated, providing more flexibility and freedom</li>
<li><strong class="bold">Ease of installation</strong>: Wireless nodes do not require cabling and can be installed much faster and more easily, reducing installation costs and time</li>
<li><strong class="bold">Scalability</strong>: Adding new nodes or devices to a wireless IoT network is easier and less expensive than adding wired nodes</li>
<li><strong class="bold">No infrastructure requirements</strong>: Wireless IoT nodes do not require a pre-existing wired infrastructure, making them ideal for remote or hard-to-reach locations</li>
<li><strong class="bold">Improved reliability</strong>: Wireless nodes are less susceptible to failure caused by physical damage to cables, making<a id="_idIndexMarker084"/> them more reliable for many IoT applications</li>
</ul>
<p>However, it’s worth mentioning that wireless IoT nodes may suffer from interference from other wireless devices, limited range, and potential security issues, so it’s important to consider these limitations when choosing between wired and wireless IoT nodes.</p>
<p>For example, the IoT nodes for the load, vibrations, and structural monitoring of a bridge over a river, which respectively provide useful information about the maintenance, traffic balance, and improvement requirements, don’t need to be wireless. Many smart agriculture applications, on the other hand, benefit from long-range wireless technologies because of the difficulties and the installation costs of a wired network covering huge areas.</p>
<p>Considering the Kids park has a lot of IoT nodes, we can roughly divide the applications in the different market verticals into four main groups:</p>
<ul>
<li><strong class="bold">Consumer devices with a very short transmission range</strong>: Wearables, safety devices, remote controls, and toys that typically use a Bluetooth or a <strong class="bold">Bluetooth Low Energy</strong> (<strong class="bold">BLE</strong>) connection to a mobile phone that shares the connectivity to the internet. This approach<a id="_idIndexMarker085"/> demonstrates the possibility of daisy-chaining multiple gateways with different technologies to reach the required connectivity.</li>
<li><strong class="bold">Consumer devices with a short transmission range</strong>: This is the case for home automation devices, such as the thermostat of your house or appliances, entertainment devices, personal instruments, and healthcare devices connected to the internet through a cabled Wi-Fi access point.</li>
<li><strong class="bold">Wireless professional devices</strong>: Automotive, smart agriculture, mining, and some logistics and outdoor industrial applications require very long-distance transmission ranges provided by the latest cellular technologies, which includes 3G/4G/5G or LPWAN.</li>
<li><strong class="bold">Wired professional devices</strong>: Some infrastructural projects, such as the monitoring of bridges and dams or indoor industrial projects, require wired nodes to increase reliability, increase the data throughput of the transmission, reduce the maintenance required for battery replacement, and increase data security.</li>
</ul>
<p>The <em class="italic">gateway-to-cloud</em> link is wired<a id="_idIndexMarker086"/> in most IoT applications<a id="_idIndexMarker087"/> and, eventually, the gateway<a id="_idIndexMarker088"/> provides a backhaul wireless connectivity to the internet. This is the case of professional Wi-Fi and LoRa gateways that implement an Ethernet interface and also a cellular modem: the gateway automatically swaps to cellular if the Ethernet connection fails.</p>
<p>Defining the nature of the <em class="italic">cloud-to-cloud</em> communication path is a little bit trickier because we need to consider<a id="_idIndexMarker089"/> that cloud apps run on cloud platforms, and these are composed of servers interconnected to each other. The physical connection among the servers is definitely wired, but we may consider the logical connection between cloud applications wireless because, when compared to applications installed on a single server on the internet, wireless and wired IoT nodes offer the same benefits.</p>
<div><div><img alt="Figure 1.5 – Wired/wireless communication technologies" src="img/B19752_01_05.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.5 – Wired/wireless communication technologies</p>
<p>In this section, we discussed<a id="_idIndexMarker090"/> the high-level architecture of an end-to-end IoT application<a id="_idIndexMarker091"/> with multiple nodes, gateways, and the cloud. In the second part of the section, we discussed communication technologies and protocols, where we divided different communication technologies into wireless and wired mediums for better understanding. In the next section, we will discuss the security of IoT solutions, as well as device provisioning services, in detail.</p>
<h1 id="_idParaDest-28"><a id="_idTextAnchor028"/>Security aspects and device provisioning</h1>
<p>In many applications, IoT devices<a id="_idIndexMarker092"/> collect and transmit sensitive data, such as personal information<a id="_idIndexMarker093"/> or financial data, which can be at risk of theft or unauthorized access if the data is not properly secured. Security must be a top priority in the design and implementation of any IoT application to ensure the safety and privacy of the data transmitted through the system.</p>
<p>The weakest link in the chain of IoT architecture in terms of security is the IoT node and the interface between the IoT device and the cloud.</p>
<p>I know that we said that there is always a gateway between the IoT node and the cloud. The fact is that the gateway implements all the communication layers for a reliable end-to-end communication channel between devices and the cloud. The node and the cloud are at the ends of this channel and, mainly at this layer, the data can be vulnerable to hacking, tampering, or unauthorized<a id="_idIndexMarker094"/> access, potentially compromising<a id="_idIndexMarker095"/> its security and privacy.</p>
<h2 id="_idParaDest-29"><a id="_idTextAnchor029"/>Hardware security</h2>
<p>Attackers can exploit<a id="_idIndexMarker096"/> security vulnerabilities due to outdated or unpatched software, and this is even more probable when nodes are based on microcomputers running common operating systems. The probability decreases significantly when the node features a microcontroller that runs on bare metal as firmware, like in the case of the Arduino ecosystem. This is because the software running on the device is reduced to the minimum strictly necessary to run the device.</p>
<p>The adoption of strong data encryption algorithms on nodes protects the data transmitted over the network, making it less vulnerable to eavesdropping or tampering. In this case, too, the Arduino ecosystem demonstrates that it is a good choice for the implementation<a id="_idIndexMarker097"/> of an IoT application: Arduino devices for IoT embed secure elements, called <strong class="bold">crypto-chips</strong>, able to generate and manage security keys at the hardware level, without the need to include a password in the source code of the node application. We’ll see what this means and how it works toward the end of this section, but it’s now necessary to talk about another security risk related to IoT nodes.</p>
<p>That is <strong class="bold">inadequate access controls</strong>: some IoT devices with inadequate access controls may <a id="_idIndexMarker098"/>allow unauthorized individuals to access or control the device, potentially compromising the security of the system as a whole.</p>
<p>The access can be remote or even direct to the device to extract the original firmware from the device and overwrite it with a different version programmed by hackers. The extraction of the firmware could also be used just for replicating the functionalities of an original device on compatible but cloned hardware, threatening the results of an IoT business.</p>
<p>Arduino has engineered <a id="_idIndexMarker099"/>a safe version of their traditional bootloader to prevent these risks. A <strong class="bold">bootloader</strong> is the first software that is executed on the device and is responsible for loading the firmware and initializing the device’s hardware.</p>
<p>The <strong class="bold">Arduino Safe Bootloader</strong> adds a secure environment to the traditional<a id="_idIndexMarker100"/> bootloader by implementing mechanisms for firmware fail-safe authentication and secure updates. These prevent unauthorized access to the device’s firmware and ensure that only authorized firmware can be executed on the device.</p>
<p>An authenticity check of the firmware is based on digital signatures and guarantees security: the bootloader checks the digital signature of the firmware before loading it into the device’s memory and doesn’t proceed in the case of unauthorized or wrongly signed firmware, preventing the device from booting. In the same way, the safe bootloader protects against tampering, data corruption, and reverse engineering: it validates a new version of the firmware before overwriting the old one and can be configured to prevent the reading of the actual firmware from the device.</p>
<p>The programmer of the IoT node generates and manages their digital signatures, maintaining full control of the device, but excluding others at the same time.</p>
<p>I recommend the adoption of the secure bootloader in any IoT project because the minimal effort required to implement it is repaid immediately in terms of the security and integrity of the device and data.</p>
<p>Microcontroller-based<a id="_idIndexMarker101"/> nodes, with strong hardware encryption capabilities and secure boot mechanisms, address most of the security concerns on the node. Regular security audits ensure that the data exchanged between IoT devices and the backend systems is protected, while the providers of cloud platforms and cloud applications are responsible for securing the backend systems on the cloud that process and store the data by implementing secure data storage practices and regular backups, as well as regularly monitoring the systems to detect and respond promptly to potential security incidents.</p>
<h2 id="_idParaDest-30"><a id="_idTextAnchor030"/>Encryption for secure communication</h2>
<p>Arduino considers the security<a id="_idIndexMarker102"/> of its IoT cloud and Arduino-based IoT nodes a top priority. The Arduino IoT Cloud requires connections with SSL/TLS encryption, and devices not implementing it cannot be provisioned to the cloud. The Arduino IoT Cloud regularly updates its security measures to address new threats and vulnerabilities and runs on the Amazon AWS platform, which has data centers and a network architecture built to meet the requirements of the most security-sensitive organizations.</p>
<p>The provisioning of IoT nodes refers to the process of configuring and setting up a device for operation and connecting it to a network or platform so that it can exchange data with it and interact with other devices. During this process, the device shall be configured with the information to establish a secure connection to the cloud and the cloud shall be configured to accept connections from the registered, well-known device and to manage the data exchanged with it.</p>
<p>Once the device is provisioned, it can connect to the cloud when required and exchange data in a secure way.</p>
<p>The SSL/TLS security protocols are the most adopted for secure communications on the Internet and use a combination of both symmetric and asymmetric encryption:</p>
<ul>
<li><strong class="bold">Asymmetric encryption</strong>: Public-key cryptography, also referred to as asymmetric encryption, employs a set of public and private keys to perform encryption<a id="_idIndexMarker103"/> and decryption processes on data. In this method, the public key is utilized for encrypting the data, whereas the private key is employed for decrypting the data.</li>
<li><strong class="bold">Symmetric encryption</strong>, on the other hand, uses a single shared secret key to encrypt <a id="_idIndexMarker104"/>and decrypt data. It is faster and more efficient than asymmetric encryption but requires a secure method of exchanging the secret key between the client and the server.</li>
</ul>
<p>In SSL/TLS, the initial handshake between the client and the server is performed using asymmetric encryption. The client and the server agree on a shared secret key, which is then used for symmetric encryption of the data transmitted between them. This approach provides both security and performance, making it a suitable encryption protocol for securing communications in IoT environments.</p>
<p>In the end, the device needs to know the public key for the SSL/TLS handshake and the cloud needs to know a unique device key or device identity to recognize the connection from a legitimate device. This data shall be configured during the provisioning phase for each IoT device that we want to deploy for our application.</p>
<p>The provisioning for a limited number of devices is usually manual or semi-automatic and is performed during the programming of each single device. In this phase, the programmer defines the unique identifier of their device and registers it on the cloud, then generates the security key on the cloud, and copies it to the device. It’s not a difficult process, but it may become<a id="_idIndexMarker105"/> complicated because different clouds have different architectures and ways to do this.</p>
<h2 id="_idParaDest-31"><a id="_idTextAnchor031"/>Bulk device provisioning</h2>
<p>IoT solutions that require<a id="_idIndexMarker106"/> a medium or mass deployment of nodes usually adopt a fully automatic process that starts from the production of the electronics. The owner of the IoT solution provides a list of unique device identifiers and a security certificate to the manufacturer of the devices. The manufacturer assigns a device identifier from the list to each device, stores the certificate, and eventually flashes the application firmware on it, making each node ready to run out of the factory.</p>
<p>The Arduino IoT Cloud mainly provides semi-automatic provisioning, as we’ll see in detail in the next chapter. The user connects the device to a USB port of the programming PC and a web wizard is responsible for the rest of the job. The wizard recognizes the Arduino board model and flashes firmware on it responsible for the generation and storage of the security key on the crypto-chip. Finally, it completes the registration of the device on the Arduino IoT Cloud.</p>
<p>Even though the wizard does everything, I still consider this process semi-automatic; in fact, if you have multiple devices, you need to connect them to the USB one at a time. Actually, you may implement more automatic provisioning of Arduino boards on the Arduino IoT Cloud by programming a good script for Arduino CLI and using a smart USB hub that flexibly switches host connectivity between ports, but the topic is beyond this book.</p>
<h2 id="_idParaDest-32"><a id="_idTextAnchor032"/>Arduino PRO for commercial use cases</h2>
<p>Arduino PRO can support businesses<a id="_idIndexMarker107"/> in their mass deployment by pre-provisioning devices during their production when several hundreds or thousands of devices are involved. You may contact the Arduino PRO team on the Arduino website and discuss your project with them.</p>
<p>We have already mentioned the crypto-chip a few<a id="_idIndexMarker108"/> times, so we’ll end this section by talking about this component. The crypto-chip, also known as a <strong class="bold">Secure Element</strong> or <strong class="bold">Trusted Platform Module</strong> (<strong class="bold">TPM</strong>), is a hardware component used to securely store and manage<a id="_idIndexMarker109"/> cryptographic keys and perform cryptographic operations. Having its own secure processor and memory, it provides a root of trust, meaning it acts as a foundation for secure operations on the device.</p>
<p>Storing the device’s unique identity, or a security certificate, in a secure element, as well as any other cryptographic keys used to encrypt and decrypt data, is much safer than writing them in the firmware or software code of the device. This is because the crypto-chip performs the cryptographic operations at the hardware level and the keys would not store on the hardware. Even reverse engineering activity wouldn’t be able to reveal sensitive information contained on the device.</p>
<p>In this section, we have talked about security aspects and device provisioning in detail. To address security<a id="_idIndexMarker110"/> issues, Arduino devices for the IoT embed secure elements, called crypto-chips. It is recommended to adopt a secure bootloader in any IoT project for better security. Use SSL/TLS for device-to-cloud communication, which will provide safe passage for your devices’ data<a id="_idIndexMarker111"/> for in/out operations. Next, we’ll discuss open source as we proceed with this chapter.</p>
<h1 id="_idParaDest-33"><a id="_idTextAnchor033"/>Open source</h1>
<p>The concept of open source software<a id="_idIndexMarker112"/> and open source licenses was first introduced in the late 1960s and early 1970s by computer scientists and programmers who believed that the sharing and collaboration of software code would lead to better, more reliable, and more innovative software.</p>
<p>Arduino is considered to be one of the first companies in the world to adopt open source licenses for hardware engineering too. The company released the first version of the Arduino board in 2005, along with schematics for the board and the source code of the core firmware under an open source license.</p>
<p>This allowed <a id="_idIndexMarker113"/>anyone to use, modify, and redistribute the design freely, which greatly contributed to the success and popularity of the Arduino platform. The open source approach also enabled a community of developers and makers to collaborate and improve the platform, creating a wide range of libraries, tutorials, and projects that are still used today.</p>
<h2 id="_idParaDest-34"><a id="_idTextAnchor034"/>Benefits and obligations of different open source licenses</h2>
<p>Open source licenses<a id="_idIndexMarker114"/> are legal agreements<a id="_idIndexMarker115"/> that define the terms and conditions under which licensed software or hardware can be used, modified, and distributed. There are several different types of open source licenses, each with its own set of terms and conditions, but the main concepts are generally the same.</p>
<p>Open source licenses generally retain the copyright of the software or hardware, but they allow users to use, modify, and distribute the code or design freely under certain conditions. Users are allowed to create derivative works (modifications) based on the original software or hardware, but these derivative works must also be made available under the same open source license, and a copy of the license must be distributed with the product.</p>
<p>Most licenses<a id="_idIndexMarker116"/> require credit to be given to the original authors when using<a id="_idIndexMarker117"/> or distributing the software or hardware and the acceptance of a disclaimer of liability that excludes any responsibility of authors and distributors for any damage or problems that may arise from using the licensed software or hardware.</p>
<p>Some of the main open source licenses that you may find in IoT projects are the following:</p>
<ul>
<li><strong class="bold">MIT License</strong>: This is one of the most<a id="_idIndexMarker118"/> permissive open source licenses and allows users to use, modify, and distribute software or hardware for any purpose, including commercial purposes, without the need for attribution.</li>
<li><strong class="bold">GNU General Public License</strong> (<strong class="bold">GPL</strong>): This was the first widely recognized open source<a id="_idIndexMarker119"/> software <a id="_idIndexMarker120"/>license, released in 1989 by the <strong class="bold">Free Software Free </strong><strong class="bold">Software Foundation</strong>.</li>
<li><strong class="bold">GNU Lesser General Public License</strong> (<strong class="bold">LGPL</strong>): The LGPL is primarily used for software libraries, although<a id="_idIndexMarker121"/> it is also used by some standalone applications. The LGPL was developed as a compromise between the strong copyleft of the GNU GPL and more permissive licenses such as the BSD licenses and the MIT License.</li>
<li><strong class="bold">Free Software Foundation</strong> (<strong class="bold">FSF</strong>): It is designed to ensure that software or hardware remains open source and free.</li>
<li><strong class="bold">Apache License</strong>: This is a permissive open source license that allows users to use, modify, and distribute<a id="_idIndexMarker122"/> the software or hardware for any purpose, including commercial purposes. However, users must provide attribution and must not use the original authors’ names or trademarks to promote their products.</li>
<li><strong class="bold">BSD Licenses, including the New BSD License and the Simplified BSD License</strong>: These are permissive open source licenses that allow users to use, modify, and distribute<a id="_idIndexMarker123"/> software or hardware for any purpose, including commercial purposes, without the need for attribution.</li>
<li><strong class="bold">Mozilla Public License</strong> (<strong class="bold">MPL</strong>): The MPL is a copyleft license that requires users to make any modifications<a id="_idIndexMarker124"/> to the software or hardware available under the same license, but allows them to add proprietary extensions to the software or hardware.</li>
</ul>
<p>There are several benefits provided by an open source licensing model.</p>
<p>Open source licenses<a id="_idIndexMarker125"/> encourage collaboration and sharing, which can lead<a id="_idIndexMarker126"/> to faster innovation and better-quality software or hardware. Open source software or hardware engineering is often free, which can result in significant cost savings for users: they can modify the engineering and the products to meet their specific needs, without having to worry about proprietary restrictions. Open source brings an improved level of transparency and security because licensed products are reviewed and audited by many people, rather than just a few proprietary developers.</p>
<p>Arduino releases software<a id="_idIndexMarker127"/> and hardware under a combination of open source licenses. The Arduino <strong class="bold">Integrated Development Environment</strong> (<strong class="bold">IDE</strong>) software is released under the GPL v2 license; the hardware designs, including schematics<a id="_idIndexMarker128"/> and board layouts, are released under the <strong class="bold">Creative Commons Attribution Share-Alike license</strong>; while the software libraries are released under GPL v2, LGPL v2.1, and the MIT License, among others.</p>
<h2 id="_idParaDest-35"><a id="_idTextAnchor035"/>The protection of your intellectual property</h2>
<p>The community of Arduino users<a id="_idIndexMarker129"/> appreciates the open source licensing model, for the benefits already mentioned earlier, while professionals still look with some reluctance at the adoption of open source for business purposes.</p>
<p>They may have concerns related to a lower or different level of support and maintenance that they can get compared to other proprietary products, but in many cases, they procure open source products because they compensate for that feeling with the cost savings of open source. A different thing is the consideration of intellectual property when releasing their own products: it is a critical barrier and, most of the time, professionals prefer to adopt proprietary licenses.</p>
<p>In my opinion, better knowledge of both the terms and conditions of the licenses and the available technologies would allow all professionals to opt in to open source, getting the benefits it provides without losing certain protection against unauthorized use or infringement of their proprietary solutions.</p>
<p>For example, not only may you protect the duplication of your open source IoT node just by adopting a secure bootloader, as we have seen, but you may also exploit open source software libraries without releasing the source code of your project and remaining compliant with the open source license.</p>
<p>In order to do this, you need to make a slight mind shift and consider your software as composed of two parts: the main software, which recalls the functionalities provided by third-party libraries, and your own proprietary library, with your know-how and proprietary technology.</p>
<p>If you structure your project by moving the intelligence of your device from the main application to the proprietary library, and the open source libraries provide their functionalities to the main application and not directly to your proprietary library, the game is done. In fact, your proprietary library can remain a binary library, without the need to publish its source code, and you need to publish the main application under open source and the binary code of your library only. Your main application doesn’t contain any strategic or valuable knowledge but is just a wrapping for calls and back-calls to your proprietary and third-party libraries.</p>
<p>Now, this approach requires<a id="_idIndexMarker130"/> some programming skills but you may get paid support from Arduino and its network of System Integrator Partners. These are industrial system integrators who joined a partnership program and are officially recognized by Arduino. This network also solves concerns about the after-sales support of Arduino-based IoT nodes and applications.</p>
<h2 id="_idParaDest-36"><a id="_idTextAnchor036"/>Respect for the Arduino trademarks in commercial applications</h2>
<p>We have seen that the Arduino<a id="_idIndexMarker131"/> ecosystem fulfills all the requirements of an IoT application in terms of technical and licensing requirements. It’s now time to understand whether you can use it even for a commercial application without infringing any trademarks, incurring legal troubles.</p>
<p>Arduino technology is open source and you can copy an Arduino open source hardware design to further develop into your own product, but you must use your own brand name and logo for it.</p>
<p>You may use the Arduino software tools, such as the IDE, for free and as they are, to program the hardware even for commercial purposes.</p>
<p>If you would like to modify and further develop them, you may then redistribute them according to the included open source software license. So, the sale of derivative tools or their inclusion in commercial software products is not prohibited, but it may require modifications in order to be open sourced under the same license.</p>
<p>The usage of Arduino trademarks to identify hardware or software products not produced and maintained by Arduino is always forbidden. You may call them <em class="italic">Arduino-compatible</em> if you like and brand them with your own logo.</p>
<p>You may find many different success stories on the internet and the Arduino website of businesses that have successfully adopted the ecosystem for commercial IoT solutions in different verticals, respecting the principles mentioned here.</p>
<p>Some companies with large-volume projects have also successfully approached Arduino for co-branding or custom production licensing.</p>
<p>In the preceding section, we discussed<a id="_idIndexMarker132"/> the open source concept and discussed the details regarding different open source licenses and responsibilities while using these tools and related code in your projects. We also talked about intellectual property, which is very much related to commercial usage and preventing your product from being a copy or clone. This is the first chapter of the book and we have discussed in depth what the IoT is, its benefits, communication protocols and technologies, and a lot of other topics, giving you a broad overview of IoT architecture before starting the remainder of the book.</p>
<h1 id="_idParaDest-37"><a id="_idTextAnchor037"/>Summary</h1>
<p>We have seen that two electronic devices can use the internet to interact with each other and exchange information, without the need for a direct physical connection between them. Nodes can be interfaced with other objects and cloud applications and this architecture allows the implementation of smart solutions in different markets and with huge benefits for users.</p>
<p>We’ve seen the architecture of an IoT solution, the different telecommunication technologies, and the security aspects involved.</p>
<p>We have talked about methods to protect your intellectual property against the duplication of your product and how to adopt open source libraries without the need to release your source code.</p>
<p>Finally, please respect the Arduino trademarks when implementing a commercial solution based on the Arduino ecosystem.</p>
<p>All this information is necessary to understand how things behind an IoT application work and for you to consider the right approach for your next IoT solution.</p>
<p>Before stepping into the next chapter, with the first example of an IoT project based on the Arduino IoT Cloud, it’s worth recapping the main steps to engineer a good IoT solution:</p>
<ol>
<li>Identify the application and define the business model.</li>
<li>Determine the requirements and goals of the IoT application.</li>
<li>Identify on the edge versus on the cloud and structured code versus AI/ML model requirements.</li>
<li>Select the most appropriate telecommunication technologies.</li>
<li>Choose the appropriate hardware for the IoT node.</li>
<li>Select the provisioning mode according to the size of the project.</li>
<li>Develop the software for the node and configure the cloud, as we’ll see in the following chapters.</li>
<li>Deploy the application and periodically monitor performance and security.</li>
</ol>
</div>
</body></html>