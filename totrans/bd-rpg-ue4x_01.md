# 第 1 章. 在 Unreal 中开始 RPG 设计

角色扮演游戏是非常复杂的事物。即使在 RPG 类型中，也有各种各样、机制和控制系统截然不同的游戏。

在写下任何一行代码之前，重要的是要弄清楚你想要制作哪种类型的 RPG，游戏是如何玩的，游戏应该是回合制还是实时，以及玩家需要关注哪些统计数据。

在本章中，我们将介绍以下主题，展示在开始制作 RPG 之前如何设计它：

+   游戏设计工具

+   设计和概念阶段

+   描述游戏的功能和机制

+   现有 RPG 中的陈词滥调

+   RPG 设计概述

# 游戏设计工具

虽然你总是可以在记事本中输入所有内容并以此方式跟踪设计决策，但在处理设计文档时，有各种各样的工具可以帮助你。

特别值得注意的是 Google 工具套件。这些工具随 Google 账户免费提供，并且有许多应用，但在这个案例中，我们将探讨将它们应用于游戏设计。

## Google Drive

Google Drive 是一个类似于 Dropbox 的基于云的文件存储系统。它随 Google 账户免费提供，并拥有高达 15 GB 的存储空间。只要其他人也有 Google 账户，Google Drive 就可以非常容易地与他人共享文件。你还可以设置权限，例如允许谁修改数据（可能你只想让某人阅读但不更改你的设计文档）。

## Google Docs

与 Google Drive 集成的是 Google Docs，这是一个功能齐全的在线文字处理应用程序。它包括许多功能，如实时协作编辑、注释和内置聊天侧边栏。

你的大部分设计文档都可以在 Google Docs 中编写，并且可以轻松地与任何潜在的合作者共享。

## Google Spreadsheets

就像 Google Docs 一样，Google Spreadsheets 也直接集成到 Google Drive 中。Google Spreadsheets 提供了一个类似于 Excel 的界面，可以用来以方便的行列格式跟踪数据。你还可以在单元格中输入方程式和公式，并计算它们的值。

例如，电子表格可以用来跟踪游戏的战斗公式，并用一系列输入值进行测试。

此外，你可以使用电子表格来跟踪事物列表。例如，你可能有一个用于游戏中武器的电子表格，包括名称、类型、伤害、元素等列。

## 铅笔和纸张

有时候，没有什么能比得上可靠的将事物写下来的方法。如果你脑海中突然闪过一个想法，快速记下来可能值得。否则，你很可能后来会忘记这个想法（即使你认为你不会——相信我，你很可能会的）。你不必考虑这个想法是否值得写下——你总是可以在之后给予它更多思考。

# 设计和概念阶段

正如作家从提纲或思维导图工作，或艺术家从草图工作一样，几乎所有游戏都是从某种粗略概念或设计文档开始的。

设计文档的目的是描述关于游戏几乎所有的内容。在RPG的情况下，它将描述玩家如何在游戏世界中移动，玩家如何与敌人和NPC互动，战斗如何进行，等等。设计文档成为构建所有游戏代码的基础。

## 概念

通常，游戏从一个非常粗略的概念开始。

例如，让我们考虑本书中我们将要制作的RPG游戏。我可能会有这样的想法，这款游戏将是一款线性的回合制RPG冒险游戏。这是一个非常粗略的概念，但没关系——虽然这可能不是一个特别原创的概念，但它足以开始具体化并创建一个设计文档。

## 设计

游戏的设计文档基于之前的粗略概念。其目的是详细阐述粗略概念并描述其工作原理。例如，虽然粗略概念是“线性的回合制RPG冒险”，但设计文档的任务是进一步阐述并描述玩家如何在世界中移动，回合制战斗如何进行，战斗统计数据，游戏结束条件，玩家如何推进剧情，以及更多内容。

你应该能够将你的设计文档交给任何一个人，这份文档应该能让他们对游戏的外观和工作方式有一个很好的了解。实际上，这是设计文档的一个大优点——它非常有用，例如，作为确保团队中每个人都处于同一页面的方式。

# 描述游戏的功能和机制

那么，假设你有一个非常粗略的游戏概念，现在处于设计阶段，你实际上是如何描述游戏的工作方式的？

实际上并没有关于如何进行战斗的具体规则，但你可以将你的理论游戏分为重要的核心部分，并思考每个部分将如何工作，规则是什么等等。信息越详细，越具体，越好。如果某事模糊不清，你将想要对其进行扩展。

例如，让我们以我们假设的回合制RPG中的*战斗*为例。

*战斗者轮流选取行动，直到一方战斗者阵亡。*

战斗者的战斗顺序是什么？有多少个队伍？

*战斗者分为两个队伍：玩家队伍和敌人队伍。战斗者由所有玩家排序，由所有敌人跟随。他们轮流选取行动，直到一方战斗者阵亡（无论是敌人队伍还是玩家队伍）。*

战斗者可以选取哪些行动？

*战斗者分为两个队伍：玩家队伍和敌人队伍。战斗者由所有玩家排序，由所有敌人跟随。战斗者轮流选取行动（攻击目标、施放技能或消耗物品），直到一方战斗者阵亡（无论是敌人队伍还是玩家队伍）。*

等等。

# 现有角色扮演游戏中的陈词滥调

尽管RPG可能千差万别，但它们仍然有很多常见的主题，它们经常共享——玩家期望从你的游戏中获得的功能。

## 统计和进步

这一点不言而喻。每个RPG——我确实是指*每个*RPG——都有这些基本概念。

统计数据，或*统计数据*，是控制游戏中所有战斗的数字。虽然实际的统计数据可能有所不同，但通常会有最大生命值、最大MP、力量、防御等统计数据。

随着玩家在游戏中的进步，这些统计数据也会提高。他们的角色在各个方面都会变得更好，在游戏（或接近游戏）的末尾达到最大潜力。处理这一点的确切方式可能有所不同，但大多数游戏都会实施在战斗中获得的经验点或XP；当获得足够的XP时，角色的*等级*会增加，随之而来的是，他们的统计数据也会增加。

## 职业

在RPG中拥有*职业*是很常见的。一个职业可以意味着很多，但通常它决定了角色的能力以及角色如何发展。

例如，*士兵*职业可能定义，例如，一个角色能够挥舞剑，并且主要专注于随着等级的提升增加攻击力和防御力。

## 特殊能力

很少有角色扮演游戏可以避免没有魔法咒语或某种特殊能力。

通常，角色会拥有某种*魔法*计量表，每次使用特殊能力时都会消耗。此外，如果角色没有足够的魔法（这个术语可能有所不同——它也可能被称为*魔力*、*耐力*或*力量*——实际上，任何适合游戏场景的东西都可以），则不能施展这些能力。

# RPG设计概述

在所有这些之外，我们将探讨本书中将要开发的RPG的设计，我们将称之为*虚幻RPG*。

## 环境

游戏设定在一个开阔的田野上。玩家会遇到敌人，他们会掉落经验值，这将增加玩家的统计数据。

## 探索

在非战斗状态下，玩家以等距视角探索世界，类似于《暗黑破坏神》等游戏。在这个视角中，玩家可以与世界中的NPC和道具互动，并且可以暂停游戏来管理他们的队伍成员、库存和装备。

## 对话

与NPC和道具互动时，可能会触发对话。游戏中的对话主要是基于文本的。对话框可以是线性的，玩家只需按按钮即可进入下一个对话页面，或者多选。在多选的情况下，玩家会看到一个选项列表。然后每个选项将进入不同的对话页面。例如，NPC可能会问玩家一个问题，并允许玩家回答“是”或“否”，对每个回答都有不同的回应。

## 购物

从对话中也可以触发商店用户界面。例如，店主可能会问玩家是否想要购买物品。如果玩家选择“是”，则显示商店用户界面。

在商店中，玩家可以从NPC那里购买物品。

## 金币

通过在战斗中击败怪物可以获得金币。这种金币被称为敌人掉落物。

## 暂停屏幕

在游戏暂停时，玩家可以执行以下操作：

+   查看队伍成员及其状态（生命值、魔法值、等级、效果等）

+   查看每个队伍成员学到的技能

+   查看当前携带的金币数量

+   浏览库存并使用物品（如药水、以太等）在他们的队伍成员上

+   管理每个队伍成员配备的物品（如武器、盔甲等）

## 队伍成员

玩家有一个**队伍成员**列表。这些都是目前玩家队伍中的角色。例如，玩家可能在塔中遇到一个角色，该角色加入他们的队伍以协助战斗。请注意，在这本书中，我们只会创建一个队伍成员，但这将为你在未来的开发中创建更多队伍成员奠定基础。

## 装备

玩家队伍中的每个角色都有以下装备槽位：

+   **盔甲**：角色的盔甲通常会增加防御力

+   **武器**：角色的武器通常会增加他们的攻击力（如本章“战斗”部分中的攻击公式所示）

## 职业

玩家角色有不同的职业。角色的职业定义以下元素：

+   升级的经验曲线

+   随着等级的提升，他们的属性如何增加

+   他们随着等级提升学会的技能

游戏将包含一个玩家角色和一个职业。然而，基于这个玩家角色，我们可以轻松地将更多角色和职业，如治疗师或黑魔导，实现到游戏中。

### 士兵

士兵类专注于增加攻击力、最大生命值和幸运。此外，特殊技能围绕对敌人造成大量伤害。

因此，随着士兵类等级的提升，他们对敌人造成的伤害更多，能承受更多打击，也能造成更多致命一击。

## 战斗

在探索游戏世界时，可能会触发随机遭遇战。此外，战斗遭遇战也可以从过场动画和故事事件中触发。

当触发遭遇战时，视图从游戏世界（战场）切换到一个专门用于战斗的区域（战斗区域），类似于一个竞技场。

战斗者分为两个队伍：敌人队伍和玩家队伍（由玩家的队伍成员组成）。

每个队伍都排成一行，从战斗区域的对面面对彼此。

战斗者轮流进行，玩家队伍先行动，然后是敌人队伍。一场战斗分为两个阶段：决策和行动。

首先，所有战斗者选择他们的行动。他们可以攻击一个敌人目标或施展一个技能。

在所有参战者决定之后，每个参战者将依次执行他们的行动。大多数行动都有特定的目标。如果参战者在执行行动时，这个目标已经不可用，那么如果可能的话，参战者将选择下一个可用的目标，否则行动将失败，参战者将不会做任何事情。

这个循环会一直持续到所有敌人或玩家死亡为止。如果所有敌人死亡，玩家的队伍成员将获得经验值，并且可以从被打败的敌人那里获得战利品（通常是随机数量的金币）。

然而，如果所有玩家都已阵亡，那么游戏就结束了。

## 战斗统计

每个参战者都有以下统计数据：

+   **生命值**：角色的**生命值**（**HP**）代表角色可以承受的伤害。当HP达到零时，角色就会死亡。

    HP可以通过物品或法术来补充，只要角色仍然存活。然而，一旦角色死亡，HP就无法补充——角色必须首先通过特殊物品或法术复活。

+   **最大生命值**：这是角色在任何给定时间可以拥有的最大HP量。治疗物品和法术只能补充到这个限制，不会超过。最大生命值可能会随着角色等级的提升而增加，也可以通过装备某些物品临时增加。

+   **魔法值**：角色的**魔法值**（**MP**）代表他们拥有的魔法力量。能力会消耗一定数量的MP，如果玩家没有足够MP来使用能力，那么该能力就无法执行。MP可以通过物品来补充。

    应该注意的是，敌人的MP实际上是无限的，因为他们的能力不会消耗任何MP。

+   **最大魔法值**：这是角色在任何给定时间可以拥有的最大MP量。补充物品只能补充到这个限制，不会超过。最大魔法值可能会随着角色等级的提升而增加，也可以通过装备某些物品临时增加。

+   **攻击力**：角色的攻击力代表他们在攻击敌人时可以造成的伤害。武器有单独的攻击力，它会被加到普通攻击上。造成伤害的确切公式如下：

    *max (player.ATK – enemy.DEF, 0) + player.weapon.ATK*

    因此，首先从玩家的攻击力中减去敌人的防御力。如果这个值小于零，则将其改为零。然后，将武器的攻击力加到结果上。

+   **防御**：角色的防御力可以减少他们从敌人攻击中受到的伤害。

    确切的公式如之前所述（从敌人的基础攻击值中减去防御力，然后加上敌人的武器攻击力）。

+   **幸运**：角色的幸运会影响角色命中暴击的概率，这将使对敌人的伤害加倍。

    幸运代表造成暴击的百分比概率。幸运的范围从0到100，代表从0%到25%的范围，因此公式如下：

    *isCriticalHit = random( 0, 100 ) <= ( player.Luck * 0.25 )*

    因此，如果玩家的幸运值是10，并且随机数落在0到100的范围内的10这个数字上，那么造成致命一击的概率是2.5%。

    致命一击倍数是在计算伤害之后应用的，如下所示：

    *2 * (max( player.ATK – enemy.DEF, 0 ) + player.weapon.ATK )*

## 战斗动作

战斗中的动作分为三个类别：攻击和技能。

### 攻击

每个角色都有一个不消耗MP的攻击技能，对于玩家角色，在回合决策阶段的动作菜单中，它显示为第一个选项。

通常，攻击针对单个敌人目标并对该敌人造成伤害。伤害公式如之前给出的攻击力统计值。

### 技能

每个角色，如前所述，都有一套他们所知道的技能。除了攻击外，技能需要消耗一些MP，并具有各种效果。技能可以有不同的目标类型，如下所示：

+   单个敌人

+   所有敌人

+   单个盟友

+   所有盟友

技能可以治疗目标，复活已死亡的目标，移除某些效果，召唤临时盟友，暂时提高角色的属性，等等。然而，技能永远不会恢复MP。

技能有一定的MP消耗。这是角色必须拥有的MP数量，以便执行该技能，以及施放技能时将消耗的MP数量。

## 战斗/胜利后

当所有敌人战斗者都已死亡时，玩家赢得战斗。在赢得战斗后，玩家将获得随机战利品，经验点数将在队伍成员之间分配。

### 获得的战利品

每个敌人定义了击败敌人后获得的战利品。这包括击败这个敌人所获得的金币数量。

### 经验

每个敌人定义了它的经验值。战斗后，每个被击败的敌人的经验值总和。然后，这个值将平均分配给所有当前存活的玩家（任何已死亡的队伍成员都不会获得任何经验值），并四舍五入到最接近的整数（例如，如果总经验值是100，且有三位队伍成员，那么 *100/3 = 33.3333*，四舍五入到34）。

## 经验和升级

随着队伍成员获得经验，他们将会升级。

从一个等级提升到下一个等级所需的经验值由以下公式给出：

*f(x) = (xa) + c*

在这里，*x* 是当前等级，*a* 是大于1的正值（影响曲线增加的陡峭程度），而 *c* 是基础偏移量，即从等级1提升到等级2所需的经验值。这定义了一个简单的指数值增加。*a* 和 *c* 的值由角色的职业定义。

要获得从当前等级升级所需的总经验值，需要计算并累加到当前等级的每个等级的前述公式。例如，如果我们想知道达到31级（从30级）所需的总经验值，我们可以按以下方式计算：

*f(1) + f(2) + f(3) + … + f(30)*

当玩家升级时，他们的统计数据会增加，他们也可能学会一项新能力。统计数据增加和学会的能力在角色类别中定义。

游戏中任何角色的最大等级为50。

### 统计数据增加

对于给定的角色类别，对于每个角色统计数据，类别定义了1级时的起始值和50级时的结束值。例如，使用标准数学库函数，任何给定等级的攻击值将是起始值和结束值之间简单的线性插值，使用角色的等级（除以最大等级）作为插值值（结果将向上取整以确保它是一个整数）。

因此，例如，如果一个士兵在1级时的最大生命值（HP）为100，而在50级时为1,000，那么在25级时士兵的最大生命值将是550。

### 学习能力

每个角色类别定义了一个能力表。表中的每一项都引用了将学习哪种能力以及该能力将在哪个等级学习。当角色升级时，表中具有给定等级的任何能力都将添加到该角色的已知能力中。

在1级时学习的能力将自动添加到角色的技能集中。

## 游戏结束

如果所有玩家都死亡，无论是在战斗中还是在战场上，那么游戏结束。

# 选择正确的公式

在前面的章节中，本示例游戏的设计描述了游戏中角色的少量统计数据。它还概述了计算伤害、升级等各种公式的多种方法。

需要记住的一点是，这些统计数据、值和公式仅仅是为了展示如何实现RPG的核心功能。这些并不是统计数据或公式的全部。实际上，设计有意使用了有限的统计数据和简单的公式来保持范围简单。

考虑到这一点，当你自己制作游戏时，你必须自己决定这些事情——你的角色使用哪些统计数据，战斗如何进行，以及游戏将使用哪些公式来计算战斗结果。那么，你是如何自己想出所有这些事情的？

不幸的是，答案是“视情况而定”。没有一劳永逸的方法来平衡你的游戏并保持其乐趣。你使用的统计数据取决于你的战斗如何进行（如果你的游戏是从第一人称视角使用枪械进行，那么拥有“命中概率”统计数据就没有意义）。

另一点需要记住的是，您实际使用的数值和公式并不重要。重要的是最终结果是有趣的、公平的、平衡的。如果最终结果仍然有趣且感觉公平，那么升级所需的经验点数是一百、一千还是一百万都无关紧要。

### 小贴士

**下载示例代码**

您可以从[http://www.packtpub.com](http://www.packtpub.com)下载您购买的所有Packt Publishing书籍的示例代码文件。如果您在其他地方购买了这本书，您可以访问[http://www.packtpub.com/support](http://www.packtpub.com/support)并注册，以便将文件直接通过电子邮件发送给您。

# 摘要

在本章中，我们探讨了您可用于设计梦想中的RPG游戏的各种工具，讨论了在设计开发之前设计游戏的重要性，以及如何构思初步的概念和设计，以及如何描述您游戏机制。我们还概述了本书中我们将要开发的游戏。

在下一章中，我们将开始深入了解Unreal，学习在Unreal Engine中编写游戏脚本元素以及与游戏数据一起工作的方法。
