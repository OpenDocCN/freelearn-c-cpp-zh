<html><head></head><body>
<div id="_idContainer184">
<h1 class="chapter-number" id="_idParaDest-229"><a id="_idTextAnchor229"/><span class="koboSpan" id="kobo.1.1">11</span></h1>
<h1 id="_idParaDest-230"><a id="_idTextAnchor230"/><span class="koboSpan" id="kobo.2.1">Implementing the Arduino IoT Cloud Scheduler and Over-the-Air Features</span></h1>
<p><span class="koboSpan" id="kobo.3.1">The world is full of different and interesting use cases that vary according to different circumstances. </span><span class="koboSpan" id="kobo.3.2">In the world of full automation, many use cases require applications to perform a specific operation</span><a id="_idIndexMarker878"/><span class="koboSpan" id="kobo.4.1"> at a certain time or frequency, defined by an end user. </span><span class="koboSpan" id="kobo.4.2">To handle this situation, the </span><strong class="bold"><span class="koboSpan" id="kobo.5.1">Arduino IoT Cloud</span></strong><span class="koboSpan" id="kobo.6.1"> has a </span><strong class="bold"><span class="koboSpan" id="kobo.7.1">Scheduler</span></strong><span class="koboSpan" id="kobo.8.1"> feature to let end users configure</span><a id="_idIndexMarker879"/><span class="koboSpan" id="kobo.9.1"> the execution time and frequency through a dashboard, without any modification to code on end devices. </span><span class="koboSpan" id="kobo.9.2">Initially, in this chapter, you will learn about the Arduino IoT Cloud Scheduler feature and </span><span class="No-Break"><span class="koboSpan" id="kobo.10.1">its implementation.</span></span></p>
<p><span class="koboSpan" id="kobo.11.1">Then, this chapter will cover the </span><strong class="bold"><span class="koboSpan" id="kobo.12.1">Over-the-Air</span></strong><span class="koboSpan" id="kobo.13.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.14.1">OTA</span></strong><span class="koboSpan" id="kobo.15.1">) feature, which is becoming increasingly popular in remote</span><a id="_idIndexMarker880"/><span class="koboSpan" id="kobo.16.1"> devices such as mobile nodes, especially remote IoT nodes. </span><span class="koboSpan" id="kobo.16.2">The OTA feature allows you to broadcast the firmware update to IoT nodes, which will update wirelessly without any physical connection. </span><span class="koboSpan" id="kobo.16.3">This procedure enables the remote maintenance of commercial Arduino-based/ESP-series IoT nodes during their life cycle, reducing the related service costs when new features and security fixes </span><span class="No-Break"><span class="koboSpan" id="kobo.17.1">become available.</span></span></p>
<p><span class="koboSpan" id="kobo.18.1">The Arduino IoT Cloud Scheduler provides the ability to schedule operations via a dashboard widget, which helps to execute the operations on devices without modifying the code, and a user can simply adjust the time for routine operations. </span><span class="koboSpan" id="kobo.18.2">OTA helps you to send the latest code and updates to devices over the air without any physical connection to a device, which will save operational costs </span><span class="No-Break"><span class="koboSpan" id="kobo.19.1">and time.</span></span></p>
<p><span class="koboSpan" id="kobo.20.1">In this chapter, we will cover the </span><span class="No-Break"><span class="koboSpan" id="kobo.21.1">following topics:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.22.1">The importance of the Scheduler </span><span class="No-Break"><span class="koboSpan" id="kobo.23.1">in IoT</span></span></li>
<li><span class="koboSpan" id="kobo.24.1">Using the Arduino IoT Cloud Scheduler – an MKR Wi-Fi </span><span class="No-Break"><span class="koboSpan" id="kobo.25.1">1010 illustration</span></span></li>
<li><span class="koboSpan" id="kobo.26.1">Initial configuration – Things, network credentials, cloud variables, </span><span class="No-Break"><span class="koboSpan" id="kobo.27.1">and code</span></span></li>
<li><span class="koboSpan" id="kobo.28.1">Dashboard creation and a deep dive into the </span><span class="No-Break"><span class="koboSpan" id="kobo.29.1">Scheduler widget</span></span></li>
<li><span class="koboSpan" id="kobo.30.1">The task at hand – </span><span class="No-Break"><span class="koboSpan" id="kobo.31.1">an assignment</span></span></li>
<li><span class="koboSpan" id="kobo.32.1">Exploring OTA updates </span><span class="No-Break"><span class="koboSpan" id="kobo.33.1">in IoT</span></span></li>
<li><span class="koboSpan" id="kobo.34.1">Leveraging the Arduino IoT Cloud for </span><span class="No-Break"><span class="koboSpan" id="kobo.35.1">OTA updates</span></span></li>
</ul>
<h1 id="_idParaDest-231"><a id="_idTextAnchor231"/><span class="koboSpan" id="kobo.36.1">Technical requirements</span></h1>
<p><span class="koboSpan" id="kobo.37.1">Before we go any further, first of all, you need to have an Arduino IoT Cloud-compatible board. </span><span class="koboSpan" id="kobo.37.2">I recommend Arduino </span><strong class="bold"><span class="koboSpan" id="kobo.38.1">MKR Wi-Fi 1010</span></strong><span class="koboSpan" id="kobo.39.1"> with a bunch of 5 mm LEDs, but here is the complete list of compatible boards: </span><a href="https://store-usa.arduino.cc/pages/cloud-compatible-boards"><span class="koboSpan" id="kobo.40.1">https://store-usa.arduino.cc/pages/cloud-compatible-boards</span></a><span class="koboSpan" id="kobo.41.1">. </span><span class="koboSpan" id="kobo.41.2">You can choose one according to </span><span class="No-Break"><span class="koboSpan" id="kobo.42.1">your requirements.</span></span></p>
<p><span class="koboSpan" id="kobo.43.1">Second, you need to have an Arduino IoT Cloud account. </span><span class="koboSpan" id="kobo.43.2">If you don’t already have one, you can sign up at </span><a href="https://cloud.arduino.cc/"><span class="koboSpan" id="kobo.44.1">https://cloud.arduino.cc/</span></a><span class="koboSpan" id="kobo.45.1"> and select a plan according to </span><span class="No-Break"><span class="koboSpan" id="kobo.46.1">your requirements.</span></span></p>
<p><span class="koboSpan" id="kobo.47.1">Third, we need to download and install the </span><strong class="bold"><span class="koboSpan" id="kobo.48.1">Arduino Create Agent</span></strong><span class="koboSpan" id="kobo.49.1">. </span><span class="koboSpan" id="kobo.49.2">Arduino has created a very beautiful web-based guide for installation at </span><a href="https://create.arduino.cc/getting-started/plugin/welcome"><span class="koboSpan" id="kobo.50.1">https://create.arduino.cc/getting-started/plugin/welcome</span></a><span class="koboSpan" id="kobo.51.1">. </span><span class="koboSpan" id="kobo.51.2">The code for this chapter is available in the book’s official GitHub repository </span><span class="No-Break"><span class="koboSpan" id="kobo.52.1">at </span></span><a href="https://github.com/PacktPublishing/Arduino-IoT-Cloud-for-Developers"><span class="No-Break"><span class="koboSpan" id="kobo.53.1">https://github.com/PacktPublishing/Arduino-IoT-Cloud-for-Developers</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.54.1">.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.55.1">Important note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.56.1">All the Arduino IoT Cloud plans were discussed in detail in </span><a href="B19752_01.xhtml#_idTextAnchor015"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.57.1">Chapter 1</span></em></span></a><span class="koboSpan" id="kobo.58.1">. </span><span class="koboSpan" id="kobo.58.2">You can also visit the following link for updated plan pricing and features: </span><a href="https://cloud.arduino.cc/plans/"><span class="koboSpan" id="kobo.59.1">https://cloud.arduino.cc/plans/</span></a><span class="koboSpan" id="kobo.60.1">. </span><span class="koboSpan" id="kobo.60.2">If you are from an educational institute, then there are plenty of good plans for students and faculties. </span><span class="koboSpan" id="kobo.60.3">Arduino also offers customized plans to business organizations according to </span><span class="No-Break"><span class="koboSpan" id="kobo.61.1">their requirements.</span></span></p>
<h1 id="_idParaDest-232"><a id="_idTextAnchor232"/><span class="koboSpan" id="kobo.62.1">The importance of the Scheduler in IoT</span></h1>
<p><span class="koboSpan" id="kobo.63.1">Within the realm of IoT and cloud computing, a scheduler</span><a id="_idIndexMarker881"/><span class="koboSpan" id="kobo.64.1"> refers to a component or system that is responsible for managing and controlling the timing and execution of tasks, processes, or events. </span><span class="koboSpan" id="kobo.64.2">Its primary function is to ensure the smooth and efficient operation of various activities within an IoT cloud setup. </span><span class="koboSpan" id="kobo.64.3">Here are some advantages</span><a id="_idIndexMarker882"/><span class="koboSpan" id="kobo.65.1"> of employing a scheduler</span><a id="_idIndexMarker883"/><span class="koboSpan" id="kobo.66.1"> in an IoT </span><span class="No-Break"><span class="koboSpan" id="kobo.67.1">cloud environment:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.68.1">Task coordination</span></strong><span class="koboSpan" id="kobo.69.1">: The scheduler facilitates the orchestration of multiple tasks and processes in an IoT cloud by allowing users to define dependencies and priorities. </span><span class="koboSpan" id="kobo.69.2">This ensures that tasks are executed in the desired sequence, which is particularly crucial in complex IoT systems involving interconnected devices </span><span class="No-Break"><span class="koboSpan" id="kobo.70.1">and services.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.71.1">Resource optimization</span></strong><span class="koboSpan" id="kobo.72.1">: With the limited computational resources typically found in an IoT cloud, a scheduler optimizes its utilization by intelligently assigning tasks based on requirements, available resources, and priorities. </span><span class="koboSpan" id="kobo.72.2">This prevents resource overloading or underutilization, leading to enhanced efficiency </span><span class="No-Break"><span class="koboSpan" id="kobo.73.1">and cost-effectiveness.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.74.1">Time synchronization</span></strong><span class="koboSpan" id="kobo.75.1">: Achieving synchronized timing for specific operations or events is critical in IoT systems. </span><span class="koboSpan" id="kobo.75.2">The scheduler aids in time synchronization by coordinating task execution according to precise timing requirements. </span><span class="koboSpan" id="kobo.75.3">This synchronization guarantees that devices, sensors, and services are triggered or activated at the intended moments, enabling accurate data collection, analysis, </span><span class="No-Break"><span class="koboSpan" id="kobo.76.1">and decision-making.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.77.1">Energy efficiency</span></strong><span class="koboSpan" id="kobo.78.1">: Many IoT devices operate on constrained battery power, making energy efficiency a vital concern. </span><span class="koboSpan" id="kobo.78.2">The scheduler optimizes task scheduling to minimize devices’ active time and maximize sleep or low-power mode, thereby conserving energy. </span><span class="koboSpan" id="kobo.78.3">This prolongs the battery life of IoT devices, reduces maintenance needs, and enhances overall </span><span class="No-Break"><span class="koboSpan" id="kobo.79.1">system reliability.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.80.1">Fault tolerance</span></strong><span class="koboSpan" id="kobo.81.1">: IoT systems are susceptible to failures and disruptions caused by network issues, device malfunctions, or service unavailability. </span><span class="koboSpan" id="kobo.81.2">By monitoring task statuses and detecting failures, the scheduler incorporates fault tolerance mechanisms. </span><span class="koboSpan" id="kobo.81.3">It automatically reschedules failed or interrupted tasks, ensuring operational continuity and reliability within the </span><span class="No-Break"><span class="koboSpan" id="kobo.82.1">IoT cloud.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.83.1">Overall, a scheduler in an IoT cloud environment brings organization, efficiency, and reliability by coordinating tasks, optimizing resources, synchronizing time, conserving energy, ensuring fault tolerance, and supporting scalability. </span><span class="koboSpan" id="kobo.83.2">Its presence is instrumental in managing the complexities of IoT systems and maximizing </span><span class="No-Break"><span class="koboSpan" id="kobo.84.1">their performance.</span></span></p>
<p><span class="koboSpan" id="kobo.85.1">In this section, we have discussed in detail what a scheduler is and how we can benefit from it in product development. </span><span class="koboSpan" id="kobo.85.2">In the following section, we will take a look at how the Arduino IoT Cloud Scheduler benefits</span><a id="_idIndexMarker884"/><span class="koboSpan" id="kobo.86.1"> us in terms of real-world</span><a id="_idIndexMarker885"/><span class="koboSpan" id="kobo.87.1"> scenarios, and we will also learn how to implement the Arduino IoT Cloud Scheduler using MKR </span><span class="No-Break"><span class="koboSpan" id="kobo.88.1">Wi-Fi 101.</span></span></p>
<h1 id="_idParaDest-233"><a id="_idTextAnchor233"/><span class="koboSpan" id="kobo.89.1">Using the Arduino IoT Cloud Scheduler – an MKR Wi-Fi 1010 illustration</span></h1>
<p><span class="koboSpan" id="kobo.90.1">In this section, we will take a look at how the Arduino IoT Cloud Scheduler provides different benefits and when and where we require scheduler functionality. </span><span class="koboSpan" id="kobo.90.2">Later, we will implement a practical example of a Scheduler using MKR </span><span class="No-Break"><span class="koboSpan" id="kobo.91.1">Wi-Fi 1010.</span></span></p>
<h2 id="_idParaDest-234"><a id="_idTextAnchor234"/><span class="koboSpan" id="kobo.92.1">The Arduino IoT Cloud Scheduler</span></h2>
<p><span class="koboSpan" id="kobo.93.1">The </span><strong class="bold"><span class="koboSpan" id="kobo.94.1">Arduino IoT Cloud Scheduler</span></strong><span class="koboSpan" id="kobo.95.1"> is a feature integrated into the Arduino IoT Cloud platform that empowers</span><a id="_idIndexMarker886"/><span class="koboSpan" id="kobo.96.1"> users to schedule and automate actions and events for their connected Arduino devices. </span><span class="koboSpan" id="kobo.96.2">It provides a convenient way to define and manage the timing of various tasks and functions within IoT projects. </span><span class="koboSpan" id="kobo.96.3">Here are some key aspects and benefits</span><a id="_idIndexMarker887"/><span class="koboSpan" id="kobo.97.1"> of the Arduino IoT </span><span class="No-Break"><span class="koboSpan" id="kobo.98.1">Cloud Scheduler:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.99.1">Task scheduling</span></strong><span class="koboSpan" id="kobo.100.1">: The Arduino IoT Cloud Scheduler allows users to schedule tasks and events on their Arduino devices. </span><span class="koboSpan" id="kobo.100.2">It enables the definition of specific timings, intervals, or triggers for actions such as data collection, device control, and </span><span class="No-Break"><span class="koboSpan" id="kobo.101.1">sensor readings.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.102.1">Remote control</span></strong><span class="koboSpan" id="kobo.103.1">: By leveraging the Scheduler, users can remotely trigger actions on their Arduino devices. </span><span class="koboSpan" id="kobo.103.2">This capability enables the control and automation of functions from any location, without the need for direct physical access to the devices. </span><span class="koboSpan" id="kobo.103.3">It enhances flexibility and enables the efficient remote management of </span><span class="No-Break"><span class="koboSpan" id="kobo.104.1">IoT projects.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.105.1">Event-based triggers</span></strong><span class="koboSpan" id="kobo.106.1">: The Scheduler supports event-based triggers, empowering users to automate actions based on specific events or conditions. </span><span class="koboSpan" id="kobo.106.2">For instance, tasks can be scheduled to execute when a particular sensor value surpasses a defined threshold or when an external event </span><span class="No-Break"><span class="koboSpan" id="kobo.107.1">is detected.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.108.1">Time zone management</span></strong><span class="koboSpan" id="kobo.109.1">: The Arduino IoT Cloud Scheduler handles time zone management, ensuring that tasks are executed according to the desired time zone. </span><span class="koboSpan" id="kobo.109.2">This functionality is particularly useful when operating across different time zones or serving users in </span><span class="No-Break"><span class="koboSpan" id="kobo.110.1">diverse regions.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.111.1">Integration with IoT cloud services</span></strong><span class="koboSpan" id="kobo.112.1">: The Scheduler seamlessly integrates with other features and services offered by the Arduino IoT Cloud platform. </span><span class="koboSpan" id="kobo.112.2">This includes data storage, visualization, and notification services. </span><span class="koboSpan" id="kobo.112.3">Users can combine scheduling with data logging, charting, and alerting to create comprehensive and cohesive </span><span class="No-Break"><span class="koboSpan" id="kobo.113.1">IoT applications.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.114.1">Flexibility and customization</span></strong><span class="koboSpan" id="kobo.115.1">: The Arduino IoT Cloud Scheduler provides a high degree of customization, enabling users to define complex schedules and conditions for their tasks. </span><span class="koboSpan" id="kobo.115.2">Users can specify the task frequency, duration, and intervals, and configure advanced</span><a id="_idIndexMarker888"/><span class="koboSpan" id="kobo.116.1"> parameters to align with their </span><span class="No-Break"><span class="koboSpan" id="kobo.117.1">specific requirements.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.118.1">By harnessing the power of the Arduino IoT Cloud Scheduler, users can automate tasks, remotely control devices, and establish time-based or event-driven workflows for their Arduino-based IoT projects. </span><span class="koboSpan" id="kobo.118.2">This feature simplifies the management and coordination of actions across devices, elevating the functionality and efficiency of </span><span class="No-Break"><span class="koboSpan" id="kobo.119.1">IoT applications.</span></span></p>
<p><span class="koboSpan" id="kobo.120.1">In this section, we discussed how the Arduino IoT Cloud Scheduler provides a benefit to schedule our tasks. </span><span class="koboSpan" id="kobo.120.2">In the next section, we will implement a Scheduler using MKR </span><span class="No-Break"><span class="koboSpan" id="kobo.121.1">Wi-Fi 1010.</span></span></p>
<h2 id="_idParaDest-235"><a id="_idTextAnchor235"/><span class="koboSpan" id="kobo.122.1">An MKR Wi-Fi 1010 example</span></h2>
<p><span class="koboSpan" id="kobo.123.1">In this chapter, I will not do a complex</span><a id="_idIndexMarker889"/><span class="koboSpan" id="kobo.124.1"> project to demonstrate</span><a id="_idIndexMarker890"/><span class="koboSpan" id="kobo.125.1"> how we can use the Scheduler. </span><span class="koboSpan" id="kobo.125.2">Instead, we will use a simple MKR Wi-Fi 1010 with three 5 mm LEDs, and we will set up the system so that it will turn LEDs on or off after a specific time interval. </span><span class="koboSpan" id="kobo.125.3">This example will simplify the hardware complexity and help you understand how the Arduino IoT Cloud Scheduler works. </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.126.1">Figure 11</span></em></span><em class="italic"><span class="koboSpan" id="kobo.127.1">.1</span></em><span class="koboSpan" id="kobo.128.1"> shows how LEDs connect with the MKR Wi-Fi 1010 for this </span><span class="No-Break"><span class="koboSpan" id="kobo.129.1">Scheduler example.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer170">
<span class="koboSpan" id="kobo.130.1"><img alt="Figure 11.1 – The MKR Wi-Fi 1010 with LEDs" src="image/B19752_11_01.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.131.1">Figure 11.1 – The MKR Wi-Fi 1010 with LEDs</span></p>
<p><span class="koboSpan" id="kobo.132.1">Here, we will just use three LEDs for three different schedulers/timers. </span><span class="koboSpan" id="kobo.132.2">We used </span><em class="italic"><span class="koboSpan" id="kobo.133.1">Pins 8</span></em><span class="koboSpan" id="kobo.134.1">, </span><em class="italic"><span class="koboSpan" id="kobo.135.1">7</span></em><span class="koboSpan" id="kobo.136.1">, and </span><em class="italic"><span class="koboSpan" id="kobo.137.1">6</span></em><span class="koboSpan" id="kobo.138.1"> to attach the LEDs with the MKR Wi-Fi 1010, using a 220-Ohm resistance, which will control the power from these pins, and one common</span><strong class="bold"><span class="koboSpan" id="kobo.139.1"> ground</span></strong><span class="koboSpan" id="kobo.140.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.141.1">GND</span></strong><span class="koboSpan" id="kobo.142.1">) goes to all the LEDs via </span><span class="No-Break"><span class="koboSpan" id="kobo.143.1">the breadboard.</span></span></p>
<p><span class="koboSpan" id="kobo.144.1">In this section, we discussed the schematic diagram of our project, where we explained which pins are used to connect the LEDs with the MKR Wi-Fi 1010. </span><span class="koboSpan" id="kobo.144.2">In the upcoming section, we will set up a Thing and device association with the Thing, and cloud variable creation and network configuration will be discussed step by step, along </span><span class="No-Break"><span class="koboSpan" id="kobo.145.1">with code.</span></span></p>
<h1 id="_idParaDest-236"><a id="_idTextAnchor236"/><span class="koboSpan" id="kobo.146.1">Initial configuration – Things, network credentials, cloud variables, and code</span></h1>
<p><span class="koboSpan" id="kobo.147.1">After setting up</span><a id="_idIndexMarker891"/><span class="koboSpan" id="kobo.148.1"> the hardware, it’s time to set up a Thing in the Arduino IoT Cloud. </span><span class="koboSpan" id="kobo.148.2">For this project, we need three cloud variables for the Scheduler, which will be linked with dashboard widgets and receive the values from users. </span><span class="koboSpan" id="kobo.148.3">Later, the device will perform an operation (in our example, it will turn the LEDs on and off according to a scheduler time) when the Scheduler is active. </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.149.1">Figure 11</span></em></span><em class="italic"><span class="koboSpan" id="kobo.150.1">.2</span></em><span class="koboSpan" id="kobo.151.1"> gives a complete</span><a id="_idIndexMarker892"/><span class="koboSpan" id="kobo.152.1"> overview of the </span><strong class="bold"><span class="koboSpan" id="kobo.153.1">Cloud </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.154.1">Scheduler</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.155.1"> Thing.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer171">
<span class="koboSpan" id="kobo.156.1"><img alt="Figure 11.2 – The Cloud Scheduler Thing setup" src="image/B19752_11_02.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.157.1">Figure 11.2 – The Cloud Scheduler Thing setup</span></p>
<p><span class="koboSpan" id="kobo.158.1">Set up a new Thing with the name </span><strong class="source-inline"><span class="koboSpan" id="kobo.159.1">CloudScheduler</span></strong><span class="koboSpan" id="kobo.160.1">. </span><span class="koboSpan" id="kobo.160.2">Take the following steps to create cloud variables, associate a device, set up network configuration, and finally, write the code. </span><span class="koboSpan" id="kobo.160.3">In </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.161.1">Figure 11</span></em></span><em class="italic"><span class="koboSpan" id="kobo.162.1">.2</span></em><span class="koboSpan" id="kobo.163.1">, all the steps are marked with a number above red boxes, which relate to the </span><span class="No-Break"><span class="koboSpan" id="kobo.164.1">following steps:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.165.1">Firstly, we need to set up three cloud variables for </span><strong class="source-inline"><span class="koboSpan" id="kobo.166.1">CloudScheduler</span></strong><span class="koboSpan" id="kobo.167.1">. </span><span class="koboSpan" id="kobo.167.2">The complete details regarding cloud variables are available in the </span><span class="No-Break"><span class="koboSpan" id="kobo.168.1">next section.</span></span></li>
<li><span class="koboSpan" id="kobo.169.1">After that, we need to associate the device with the Thing. </span><span class="koboSpan" id="kobo.169.2">In the current project, we are using Arduino’s MKR Wi-Fi 1010, so the wizard will be the same for Arduino boards. </span><span class="koboSpan" id="kobo.169.3">The complete details are available in the </span><em class="italic"><span class="koboSpan" id="kobo.170.1">Associating a </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.171.1">device</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.172.1"> section.</span></span></li>
<li><span class="koboSpan" id="kobo.173.1">Finally, we need to set up the network configuration for the device. </span><span class="koboSpan" id="kobo.173.2">Arduino-compatible boards are configured by the Arduino IoT Cloud automatically during the device setup wizard, so you just</span><a id="_idIndexMarker893"/><span class="koboSpan" id="kobo.174.1"> need to provide the Wi-Fi </span><strong class="bold"><span class="koboSpan" id="kobo.175.1">service set identifier</span></strong><span class="koboSpan" id="kobo.176.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.177.1">SSID</span></strong><span class="koboSpan" id="kobo.178.1">) </span><span class="No-Break"><span class="koboSpan" id="kobo.179.1">and password.</span></span></li>
</ol>
<h2 id="_idParaDest-237"><a id="_idTextAnchor237"/><span class="koboSpan" id="kobo.180.1">Cloud variables</span></h2>
<p><span class="koboSpan" id="kobo.181.1">The following table explains</span><a id="_idIndexMarker894"/><span class="koboSpan" id="kobo.182.1"> all the properties of the variables that we need to use during cloud variable creation. </span><span class="koboSpan" id="kobo.182.2">For the Scheduler, we will use a custom data type, </span><strong class="source-inline"><span class="koboSpan" id="kobo.183.1">Schedule</span></strong><span class="koboSpan" id="kobo.184.1">, which we have thanks to Arduino IoT Cloud’s extended group of variables. </span><span class="koboSpan" id="kobo.184.2">Then, make sure you have the same </span><strong class="source-inline"><span class="koboSpan" id="kobo.185.1">declaration</span></strong><span class="koboSpan" id="kobo.186.1"> variable as per the table; otherwise, you will need to modify the example code according to </span><span class="No-Break"><span class="koboSpan" id="kobo.187.1">your naming.</span></span></p>
<table class="No-Table-Style _idGenTablePara-1" id="table001-7">
<colgroup>
<col/>
<col/>
<col/>
<col/>
<col/>
<col/>
</colgroup>
<tbody>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.188.1">S#</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.189.1">Variable Name</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.190.1">Variable Type</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.191.1">Declaration</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.192.1">Permission</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><strong class="bold"><span class="koboSpan" id="kobo.193.1">Update </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.194.1">Policy</span></strong></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.195.1">1</span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.196.1">CloudScheduler1</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.197.1">Schedule</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.198.1">cloudScheduler1</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.199.1">Read </span><span class="No-Break"><span class="koboSpan" id="kobo.200.1">and write</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.201.1">On change</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.202.1">2</span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.203.1">CloudScheduler2</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.204.1">Schedule</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.205.1">cloudScheduler2</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.206.1">Read </span><span class="No-Break"><span class="koboSpan" id="kobo.207.1">and write</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.208.1">On change</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.209.1">3</span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.210.1">CloudScheduler3</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.211.1">Schedule</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.212.1">cloudScheduler3</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.213.1">Read </span><span class="No-Break"><span class="koboSpan" id="kobo.214.1">and write</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.215.1">On change</span></span></p>
</td>
</tr>
</tbody>
</table>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.216.1">Table 11.1 – The cloud variables declaration list</span></p>
<p><span class="koboSpan" id="kobo.217.1">Here, I set the permission as </span><em class="italic"><span class="koboSpan" id="kobo.218.1">read</span></em><span class="koboSpan" id="kobo.219.1"> and </span><em class="italic"><span class="koboSpan" id="kobo.220.1">write</span></em><span class="koboSpan" id="kobo.221.1"> because we will input the date, time, and interval from the Arduino dashboard, which will be controlled by the end user, and the device will only perform the LED on/off operation when the Scheduler is in a state of </span><strong class="source-inline"><span class="koboSpan" id="kobo.222.1">true</span></strong><span class="koboSpan" id="kobo.223.1">. </span><strong class="bold"><span class="koboSpan" id="kobo.224.1">Update Policy</span></strong><span class="koboSpan" id="kobo.225.1"> is set to </span><strong class="bold"><span class="koboSpan" id="kobo.226.1">On change</span></strong><span class="koboSpan" id="kobo.227.1">, as the dashboard will send data to the device when there is any change</span><a id="_idIndexMarker895"/><span class="koboSpan" id="kobo.228.1"> in Scheduler values by </span><span class="No-Break"><span class="koboSpan" id="kobo.229.1">the user.</span></span></p>
<h2 id="_idParaDest-238"><a id="_idTextAnchor238"/><span class="koboSpan" id="kobo.230.1">Associating a device</span></h2>
<p><span class="koboSpan" id="kobo.231.1">After creating the variable, it’s time to add a device</span><a id="_idIndexMarker896"/><span class="koboSpan" id="kobo.232.1"> and associate it with </span><span class="No-Break"><span class="koboSpan" id="kobo.233.1">the Thing:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.234.1">Before adding the device, connect the development board to the computer and open the </span><strong class="bold"><span class="koboSpan" id="kobo.235.1">Arduino Create </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.236.1">Agent</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.237.1"> application.</span></span></li>
<li><span class="koboSpan" id="kobo.238.1">After assigning a name to the Thing, we need to attach the device to it. </span><span class="koboSpan" id="kobo.238.2">When you click on the </span><strong class="bold"><span class="koboSpan" id="kobo.239.1">Select Device</span></strong><span class="koboSpan" id="kobo.240.1"> button, you will see a popup that shows you the available devices and an option to add a new device. </span><span class="koboSpan" id="kobo.240.2">In our case, we don’t have a device in the portal, so we can just click on </span><strong class="bold"><span class="koboSpan" id="kobo.241.1">SET UP NEW DEVICE</span></strong><span class="koboSpan" id="kobo.242.1"> to configure a new device in </span><span class="No-Break"><span class="koboSpan" id="kobo.243.1">the account.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer172">
<span class="koboSpan" id="kobo.244.1"><img alt="Figure 11.3 – The associated device" src="image/B19752_11_03.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.245.1">Figure 11.3 – The associated device</span></p>
<ol>
<li value="3"><span class="koboSpan" id="kobo.246.1">Then, you will see two options</span><a id="_idIndexMarker897"/><span class="koboSpan" id="kobo.247.1"> in the popup. </span><span class="koboSpan" id="kobo.247.2">The first option is </span><strong class="bold"><span class="koboSpan" id="kobo.248.1">Set up an Arduino device</span></strong><span class="koboSpan" id="kobo.249.1">, and the second option is </span><strong class="bold"><span class="koboSpan" id="kobo.250.1">Set up a 3rd Party device</span></strong><span class="koboSpan" id="kobo.251.1">. </span><span class="koboSpan" id="kobo.251.2">Here, you will see a note under both options that says </span><strong class="bold"><span class="koboSpan" id="kobo.252.1">Compatible devices</span></strong><span class="koboSpan" id="kobo.253.1">. </span><span class="koboSpan" id="kobo.253.2">This means you cannot use all types of Arduino devices and third-party devices with the Arduino </span><span class="No-Break"><span class="koboSpan" id="kobo.254.1">IoT Cloud.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer173">
<span class="koboSpan" id="kobo.255.1"><img alt="Figure 11.4 – Choosing the device" src="image/B19752_11_04.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.256.1">Figure 11.4 – Choosing the device</span></p>
<p class="list-inset"><span class="koboSpan" id="kobo.257.1">Select one option from the popup</span><a id="_idIndexMarker898"/><span class="koboSpan" id="kobo.258.1"> according to the available device. </span><span class="koboSpan" id="kobo.258.2">For this example, we will click on </span><strong class="bold"><span class="koboSpan" id="kobo.259.1">Set up an Arduino device</span></strong><span class="koboSpan" id="kobo.260.1">, as in this chapter, we are using an MKR</span><a id="_idIndexMarker899"/><span class="koboSpan" id="kobo.261.1"> Wi-Fi 1010 board. </span><span class="koboSpan" id="kobo.261.2">Before adding the device, make sure the </span><strong class="bold"><span class="koboSpan" id="kobo.262.1">Arduino Create Agent</span></strong><span class="koboSpan" id="kobo.263.1"> is running on </span><span class="No-Break"><span class="koboSpan" id="kobo.264.1">your machine.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.265.1">Important note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.266.1">Here is the link where you can find the Arduino IoT Cloud-compatible boards: </span><a href="https://store-usa.arduino.cc/pages/cloud-compatible-boards"><span class="koboSpan" id="kobo.267.1">https://store-usa.arduino.cc/pages/cloud-compatible-boards</span></a><span class="koboSpan" id="kobo.268.1">. </span><span class="koboSpan" id="kobo.268.2">For third-party devices, we have three options, which are ESP8266, ESP32, and </span><strong class="bold"><span class="koboSpan" id="kobo.269.1">LoRaWAN</span></strong><span class="koboSpan" id="kobo.270.1"> devices. </span><span class="koboSpan" id="kobo.270.2">For other devices, we have API access, which was discussed in the second part of </span><a href="B19752_02.xhtml#_idTextAnchor038"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.271.1">Chapter 2</span></em></span></a><span class="No-Break"><span class="koboSpan" id="kobo.272.1">.</span></span></p>
<ol>
<li value="4"><span class="koboSpan" id="kobo.273.1">Now, you will see the </span><strong class="bold"><span class="koboSpan" id="kobo.274.1">Setup Device</span></strong><span class="koboSpan" id="kobo.275.1"> popup, which will start searching for your device. </span><span class="koboSpan" id="kobo.275.2">Make sure the device is properly connected to </span><span class="No-Break"><span class="koboSpan" id="kobo.276.1">the machine.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer174">
<span class="koboSpan" id="kobo.277.1"><img alt="Figure 11.5 – Setup Device" src="image/B19752_11_05.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.278.1">Figure 11.5 – Setup Device</span></p>
<p class="list-inset"><span class="koboSpan" id="kobo.279.1">The wizard will find and list</span><a id="_idIndexMarker900"/><span class="koboSpan" id="kobo.280.1"> all the connected boards with their name and port details. </span><span class="koboSpan" id="kobo.280.2">Click on the </span><strong class="bold"><span class="koboSpan" id="kobo.281.1">CONFIGURE</span></strong><span class="koboSpan" id="kobo.282.1"> button to move forward. </span><span class="koboSpan" id="kobo.282.2">If the wizard didn’t show the device after searching, try to plug it into a different port, and click on the </span><strong class="bold"><span class="koboSpan" id="kobo.283.1">refresh</span></strong><span class="koboSpan" id="kobo.284.1"> link located at </span><span class="No-Break"><span class="koboSpan" id="kobo.285.1">the bottom.</span></span></p>
<ol>
<li value="5"><span class="koboSpan" id="kobo.286.1">In the next configuration wizard, provide the device name. </span><span class="koboSpan" id="kobo.286.2">Spaces and special characters are not allowed in the device name. </span><span class="koboSpan" id="kobo.286.3">Then, click on the </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.287.1">NEXT</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.288.1"> button.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer175">
<span class="koboSpan" id="kobo.289.1"><img alt="Figure 11.6 – The device configuration name" src="image/B19752_11_06.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.290.1">Figure 11.6 – The device configuration name</span></p>
<p class="list-inset"><span class="koboSpan" id="kobo.291.1">After that, the wizard will start the device configuration process. </span><span class="koboSpan" id="kobo.291.2">This will take up to five minutes, but in most cases, it only takes one minute to configure </span><span class="No-Break"><span class="koboSpan" id="kobo.292.1">the device.</span></span></p>
<ol>
<li value="6"><span class="koboSpan" id="kobo.293.1">You will then see the </span><strong class="bold"><span class="koboSpan" id="kobo.294.1">Congratulations! </span><span class="koboSpan" id="kobo.294.2">You are all set</span></strong><span class="koboSpan" id="kobo.295.1"> message in the next popup. </span><span class="koboSpan" id="kobo.295.2">Click on the </span><strong class="bold"><span class="koboSpan" id="kobo.296.1">Done</span></strong><span class="koboSpan" id="kobo.297.1"> button, and the device will be attached to </span><span class="No-Break"><span class="koboSpan" id="kobo.298.1">your Thing.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.299.1">In this section, we associated</span><a id="_idIndexMarker901"/><span class="koboSpan" id="kobo.300.1"> the MKR Wi-Fi 1010 development board with our Thing. </span><span class="koboSpan" id="kobo.300.2">In the next section, we will configure the Wi-Fi network configuration for the MKR </span><span class="No-Break"><span class="koboSpan" id="kobo.301.1">Wi-Fi 1010.</span></span></p>
<h2 id="_idParaDest-239"><a id="_idTextAnchor239"/><span class="koboSpan" id="kobo.302.1">Network configuration</span></h2>
<p><span class="koboSpan" id="kobo.303.1">After the attachment</span><a id="_idIndexMarker902"/><span class="koboSpan" id="kobo.304.1"> of the device with the Thing, we can see that the device is offline. </span><span class="koboSpan" id="kobo.304.2">To get it online, we need to provide the </span><span class="No-Break"><span class="koboSpan" id="kobo.305.1">Wi-Fi details.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer176">
<span class="koboSpan" id="kobo.306.1"><img alt="Figure 11.7 – Network configuration" src="image/B19752_11_07.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.307.1">Figure 11.7 – Network configuration</span></p>
<p><span class="koboSpan" id="kobo.308.1">On the Thing page under the </span><strong class="bold"><span class="koboSpan" id="kobo.309.1">Network</span></strong><span class="koboSpan" id="kobo.310.1"> tab, click on the </span><strong class="bold"><span class="koboSpan" id="kobo.311.1">CONFIGURE</span></strong><span class="koboSpan" id="kobo.312.1"> button. </span><span class="koboSpan" id="kobo.312.2">You will see the </span><strong class="bold"><span class="koboSpan" id="kobo.313.1">Configure network</span></strong><span class="koboSpan" id="kobo.314.1"> pop-up box with two fields – </span><strong class="bold"><span class="koboSpan" id="kobo.315.1">Wi-Fi Name</span></strong><span class="koboSpan" id="kobo.316.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.317.1">Password</span></strong><span class="koboSpan" id="kobo.318.1">. </span><span class="koboSpan" id="kobo.318.2">Type in the Wi-Fi SSID and password, and click on the </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.319.1">SAVE</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.320.1"> button.</span></span></p>
<p><span class="koboSpan" id="kobo.321.1">We are done with the device</span><a id="_idIndexMarker903"/><span class="koboSpan" id="kobo.322.1"> and network configuration; only the coding part is left. </span><span class="koboSpan" id="kobo.322.2">In the next section, we will look at the code for </span><span class="No-Break"><span class="koboSpan" id="kobo.323.1">the device.</span></span></p>
<h2 id="_idParaDest-240"><a id="_idTextAnchor240"/><span class="koboSpan" id="kobo.324.1">Coding</span></h2>
<p><span class="koboSpan" id="kobo.325.1">The code for this chapter</span><a id="_idIndexMarker904"/><span class="koboSpan" id="kobo.326.1"> is available in the book’s official GitHub repository. </span><span class="koboSpan" id="kobo.326.2">Download the </span><strong class="source-inline"><span class="koboSpan" id="kobo.327.1">Cloud_Scheduler_may22a</span></strong><span class="koboSpan" id="kobo.328.1"> code from</span><a id="_idIndexMarker905"/><span class="koboSpan" id="kobo.329.1"> the repository, and import it to your </span><strong class="bold"><span class="koboSpan" id="kobo.330.1">Arduino </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.331.1">Web Editor</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.332.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.333.1">You can download the code and put it into your Thing by navigating to the </span><strong class="bold"><span class="koboSpan" id="kobo.334.1">Sketch</span></strong><span class="koboSpan" id="kobo.335.1"> tab. </span><span class="koboSpan" id="kobo.335.2">The whole project code is very small and simple; that’s why I will go through all the code here and discuss it in detail. </span><span class="koboSpan" id="kobo.335.3">Remember, never try to use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.336.1">delay()</span></strong><span class="koboSpan" id="kobo.337.1"> method, as it will block the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.338.1">ArduinoCloud.update()</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.339.1"> method:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.340.1">
#define LED1 8
#define LED2 7
#define LED3 6</span></pre> <p><span class="koboSpan" id="kobo.341.1">Here, we have very simple</span><a id="_idIndexMarker906"/><span class="koboSpan" id="kobo.342.1"> code. </span><span class="koboSpan" id="kobo.342.2">Firstly, we will define the pins’ </span><strong class="source-inline"><span class="koboSpan" id="kobo.343.1">LED1</span></strong><span class="koboSpan" id="kobo.344.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.345.1">LED2</span></strong><span class="koboSpan" id="kobo.346.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.347.1">LED3</span></strong><span class="koboSpan" id="kobo.348.1"> constants, which will be initialized in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.349.1">setup()</span></strong><span class="koboSpan" id="kobo.350.1"> method as output, using the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.351.1">pinMode()</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.352.1"> method:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.353.1">
void setup() {
  pinMode(LED1,OUTPUT);
  pinMode(LED2,OUTPUT);
  pinMode(LED3,OUTPUT);
  // Initialize serial and wait for port to open:
  Serial.begin(9600);
  // This delay gives the chance to wait for a Serial Monitor without blocking if none is found
  delay(1500);
  // Defined in thingProperties.h
  initProperties();
  // Connect to Arduino IoT Cloud
  ArduinoCloud.begin(ArduinoIoTPreferredConnection);
  setDebugMessageLevel(2);
  ArduinoCloud.printDebugInfo();
}</span></pre> <p><span class="koboSpan" id="kobo.354.1">Then, we have all the code regarding Schedulers</span><a id="_idIndexMarker907"/><span class="koboSpan" id="kobo.355.1"> in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.356.1">loop()</span></strong><span class="koboSpan" id="kobo.357.1"> method, which will perform an operation when a scheduler/timer is in an active state. </span><span class="koboSpan" id="kobo.357.2">In the following code, we have a separate </span><strong class="source-inline"><span class="koboSpan" id="kobo.358.1">if-else</span></strong><span class="koboSpan" id="kobo.359.1"> statement for each </span><strong class="source-inline"><span class="koboSpan" id="kobo.360.1">cloudScheduler</span></strong><span class="koboSpan" id="kobo.361.1"> cloud variable; here, we check whether </span><strong class="source-inline"><span class="koboSpan" id="kobo.362.1">cloudScheduler</span></strong><span class="koboSpan" id="kobo.363.1"> is active and then turn on the LED; otherwise, we turn off the LED. </span><span class="koboSpan" id="kobo.363.2">We have </span><strong class="source-inline"><span class="koboSpan" id="kobo.364.1">cloudScheduler1</span></strong><span class="koboSpan" id="kobo.365.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.366.1">cloudScheduler2</span></strong><span class="koboSpan" id="kobo.367.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.368.1">cloudScheduler3</span></strong><span class="koboSpan" id="kobo.369.1">, plus three </span><strong class="source-inline"><span class="koboSpan" id="kobo.370.1">if-else</span></strong><span class="koboSpan" id="kobo.371.1"> statements to check </span><span class="No-Break"><span class="koboSpan" id="kobo.372.1">their values:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.373.1">
void loop() {
  ArduinoCloud.update();
  // Your code here
  //Cloud Scheduler 1 Code
  if(cloudScheduler1.isActive()){
    digitalWrite(LED1,HIGH);
  }else{
    digitalWrite(LED1,LOW);
  }
    //Cloud Scheduler 2 Code
  if(cloudScheduler2.isActive()){
    digitalWrite(LED2,HIGH);
  }else{
    digitalWrite(LED2,LOW);
  }
    //Cloud Scheduler 3 Code
  if(cloudScheduler3.isActive()){
    digitalWrite(LED3,HIGH);
  }else{
    digitalWrite(LED3,LOW);
  }
}</span></pre> <p><span class="koboSpan" id="kobo.374.1">The Scheduler</span><a id="_idIndexMarker908"/><span class="koboSpan" id="kobo.375.1"> widget is very complex in configuration with lots of options, but its code is very simple and straightforward. </span><span class="koboSpan" id="kobo.375.2">You just need to verify whether the Scheduler state is </span><strong class="source-inline"><span class="koboSpan" id="kobo.376.1">true</span></strong><span class="koboSpan" id="kobo.377.1"> or </span><strong class="source-inline"><span class="koboSpan" id="kobo.378.1">false</span></strong><span class="koboSpan" id="kobo.379.1">, and if it’s </span><strong class="source-inline"><span class="koboSpan" id="kobo.380.1">true</span></strong><span class="koboSpan" id="kobo.381.1">, then proceed with the task; otherwise, stop the task. </span><span class="koboSpan" id="kobo.381.2">So, in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.382.1">loop()</span></strong><span class="koboSpan" id="kobo.383.1"> method, we have three </span><strong class="source-inline"><span class="koboSpan" id="kobo.384.1">if-else</span></strong><span class="koboSpan" id="kobo.385.1"> statements, which check different cloud Schedulers’/timers’ states. </span><span class="koboSpan" id="kobo.385.2">If a specific Scheduler is active, then a specific LED will be turned on; otherwise, it will be </span><span class="No-Break"><span class="koboSpan" id="kobo.386.1">turned off.</span></span></p>
<p><span class="koboSpan" id="kobo.387.1">I attached the LED in </span><em class="italic"><span class="koboSpan" id="kobo.388.1">Pin #8</span></em><span class="koboSpan" id="kobo.389.1"> to </span><strong class="source-inline"><span class="koboSpan" id="kobo.390.1">cloudScheduler1</span></strong><span class="koboSpan" id="kobo.391.1">, the LED in </span><em class="italic"><span class="koboSpan" id="kobo.392.1">Pin #7</span></em><span class="koboSpan" id="kobo.393.1"> to </span><strong class="source-inline"><span class="koboSpan" id="kobo.394.1">cloudScheduler2</span></strong><span class="koboSpan" id="kobo.395.1">, and the LED in </span><em class="italic"><span class="koboSpan" id="kobo.396.1">Pin #6</span></em><span class="koboSpan" id="kobo.397.1"> to </span><strong class="source-inline"><span class="koboSpan" id="kobo.398.1">cloudScheduler3</span></strong><span class="koboSpan" id="kobo.399.1">. </span><span class="koboSpan" id="kobo.399.2">Now, set the first widget’s time to 5 seconds for every minute, the second widget to 10 seconds for every minute, and 15 seconds for every minute for the third widget. </span><span class="koboSpan" id="kobo.399.3">All the LEDs will turn on at the same time, but the first LED will be on for 5 seconds, the second LED will be on for 10 seconds, and the third will turn off after 15 seconds. </span><span class="koboSpan" id="kobo.399.4">In this example project, we have used three different Schedulers to demonstrate how we can use multiple Schedulers/timers to automate our tasks on a single </span><span class="No-Break"><span class="koboSpan" id="kobo.400.1">development board.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.401.1">Important note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.402.1">If you used different </span><em class="italic"><span class="koboSpan" id="kobo.403.1">naming</span></em><span class="koboSpan" id="kobo.404.1"> in the variable declaration, then update the code according to your naming scheme. </span><span class="koboSpan" id="kobo.404.2">However, it’s better at first if you follow all the steps according to the book and later change the cloud variable names and modify your </span><span class="No-Break"><span class="koboSpan" id="kobo.405.1">code, respectively.</span></span></p>
<p class="callout"><span class="koboSpan" id="kobo.406.1">Also, don’t put the code at the end of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.407.1">loop()</span></strong><span class="koboSpan" id="kobo.408.1"> method, as it will create a delay with pulse </span><span class="No-Break"><span class="koboSpan" id="kobo.409.1">sensor readings.</span></span></p>
<p><span class="koboSpan" id="kobo.410.1">In this section, we discussed</span><a id="_idIndexMarker909"/><span class="koboSpan" id="kobo.411.1"> code and how it works with the Arduino IoT Cloud Scheduler to turn the LEDs on and off. </span><span class="koboSpan" id="kobo.411.2">In the following section, we will set up a dashboard, where we will place the Scheduler widget and attach it to our </span><span class="No-Break"><span class="koboSpan" id="kobo.412.1">cloud variables.</span></span></p>
<h1 id="_idParaDest-241"><a id="_idTextAnchor241"/><span class="koboSpan" id="kobo.413.1">Dashboard creation and a deep dive into the Scheduler widget</span></h1>
<p><span class="koboSpan" id="kobo.414.1">After uploading the code</span><a id="_idIndexMarker910"/><span class="koboSpan" id="kobo.415.1"> to the device, it’s time to set up a dashboard for web and mobile to insert the multiple Scheduler widgets that will be linked to the Scheduler variables, for further controls and operations. </span><span class="koboSpan" id="kobo.415.2">The following figure shows the visualization Scheduler with different </span><span class="No-Break"><span class="koboSpan" id="kobo.416.1">timer options:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer177">
<span class="koboSpan" id="kobo.417.1"><img alt="Figure 11.8 – The Thing dashboard" src="image/B19752_11_08.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.418.1">Figure 11.8 – The Thing dashboard</span></p>
<p><span class="koboSpan" id="kobo.419.1">We have three Scheduler variables. </span><span class="koboSpan" id="kobo.419.2">To visualize all of them, three Scheduler widgets will be linked</span><a id="_idIndexMarker911"/><span class="koboSpan" id="kobo.420.1"> to each cloud variable, respectively. </span><span class="koboSpan" id="kobo.420.2">The purpose of the three widgets and variables is to demonstrate how we can set different types of timers. </span><span class="koboSpan" id="kobo.420.3">The first widget demonstrates how to use a timer that will be executed every minute for 30 seconds, the second widget demonstrates how to use a timer that will be activated every hour for five minutes, and the third widget demonstrates that we can set the timer for a long period, such as specific days at a specific time. </span><span class="koboSpan" id="kobo.420.4">Here, I have set it to be activated on Monday, Wednesday, and Friday for </span><span class="No-Break"><span class="koboSpan" id="kobo.421.1">five minutes.</span></span></p>
<p><span class="koboSpan" id="kobo.422.1">We just set the different widgets</span><a id="_idIndexMarker912"/><span class="koboSpan" id="kobo.423.1"> with different timer settings. </span><span class="koboSpan" id="kobo.423.2">One of the example settings of the Scheduler widget is shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.424.1">Figure 11</span></em></span><em class="italic"><span class="koboSpan" id="kobo.425.1">.9</span></em><span class="koboSpan" id="kobo.426.1">, and we will explore in depth how to set these settings. </span><span class="koboSpan" id="kobo.426.2">This control widget has multiple options for configuration, so I think it’s necessary to discuss it in detail for </span><span class="No-Break"><span class="koboSpan" id="kobo.427.1">proper guidance.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer178">
<span class="koboSpan" id="kobo.428.1"><img alt="Figure 11.9 – The Scheduler widget options" src="image/B19752_11_09.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.429.1">Figure 11.9 – The Scheduler widget options</span></p>
<p><span class="koboSpan" id="kobo.430.1">When you click on the Scheduler</span><a id="_idIndexMarker913"/><span class="koboSpan" id="kobo.431.1"> widget, a popup will appear with options, just like in the preceding figure. </span><span class="koboSpan" id="kobo.431.2">Here, I have divided the screenshot into four different numbered sections. </span><span class="koboSpan" id="kobo.431.3">From this popup, you can adjust your time settings from seconds to years and set the start and end date, or choose to execute without any date limitation. </span><span class="koboSpan" id="kobo.431.4">Let’s look at </span><span class="No-Break"><span class="koboSpan" id="kobo.432.1">each section:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.433.1">Here, we have two input controls – one is for the starting date and the other is for the starting time, as indicated by the </span><span class="No-Break"><span class="koboSpan" id="kobo.434.1">control headings.</span></span></li>
<li><span class="koboSpan" id="kobo.435.1">Next, we have the </span><strong class="bold"><span class="koboSpan" id="kobo.436.1">Duration</span></strong><span class="koboSpan" id="kobo.437.1"> setting, in which we have three drop-down boxes – </span><strong class="bold"><span class="koboSpan" id="kobo.438.1">HOURS</span></strong><span class="koboSpan" id="kobo.439.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.440.1">MINUTES</span></strong><span class="koboSpan" id="kobo.441.1">, and </span><strong class="bold"><span class="koboSpan" id="kobo.442.1">SECONDS</span></strong><span class="koboSpan" id="kobo.443.1">. </span><span class="koboSpan" id="kobo.443.2">This will define how long the timer will be executed on the machine. </span><span class="koboSpan" id="kobo.443.3">For example, if you want to perform an operation for 30 seconds, then just select </span><strong class="bold"><span class="koboSpan" id="kobo.444.1">30</span></strong><span class="koboSpan" id="kobo.445.1"> seconds and leave the other fields, or if you want to perform an operation for 5 minutes, then select </span><strong class="bold"><span class="koboSpan" id="kobo.446.1">5</span></strong><span class="koboSpan" id="kobo.447.1"> minutes and leave the other fields, and </span><span class="No-Break"><span class="koboSpan" id="kobo.448.1">so on.</span></span></li>
<li><span class="koboSpan" id="kobo.449.1">Then, we have the </span><strong class="bold"><span class="koboSpan" id="kobo.450.1">Repeat every</span></strong><span class="koboSpan" id="kobo.451.1"> setting, which is only applicable for </span><strong class="bold"><span class="koboSpan" id="kobo.452.1">Week</span></strong><span class="koboSpan" id="kobo.453.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.454.1">Month</span></strong><span class="koboSpan" id="kobo.455.1">, and </span><strong class="bold"><span class="koboSpan" id="kobo.456.1">Year</span></strong><span class="koboSpan" id="kobo.457.1">; there is no predefined setting for minutes and hours. </span><span class="koboSpan" id="kobo.457.2">I have selected </span><strong class="bold"><span class="koboSpan" id="kobo.458.1">Week</span></strong><span class="koboSpan" id="kobo.459.1">. </span><span class="koboSpan" id="kobo.459.2">Under that, the days are shown (by their first letter), and there, you can select on which day/days you can perform an operation. </span><span class="koboSpan" id="kobo.459.3">There are different options for </span><strong class="bold"><span class="koboSpan" id="kobo.460.1">Month</span></strong><span class="koboSpan" id="kobo.461.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.462.1">Year</span></strong><span class="koboSpan" id="kobo.463.1">, which will be discussed in </span><span class="No-Break"><span class="koboSpan" id="kobo.464.1">a moment.</span></span></li>
<li><span class="koboSpan" id="kobo.465.1">Finally, we have the </span><strong class="bold"><span class="koboSpan" id="kobo.466.1">End recurrence</span></strong><span class="koboSpan" id="kobo.467.1"> setting. </span><span class="koboSpan" id="kobo.467.2">Here, we have two options – </span><strong class="bold"><span class="koboSpan" id="kobo.468.1">Never</span></strong><span class="koboSpan" id="kobo.469.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.470.1">On</span></strong><span class="koboSpan" id="kobo.471.1">. </span><span class="koboSpan" id="kobo.471.2">When you click on </span><strong class="bold"><span class="koboSpan" id="kobo.472.1">On</span></strong><span class="koboSpan" id="kobo.473.1">, you will need to enter the date and time when your operation will be stopped. </span><span class="koboSpan" id="kobo.473.2">If you want to execute it indefinitely, then just select the </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.474.1">Never</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.475.1"> option.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.476.1">For </span><strong class="bold"><span class="koboSpan" id="kobo.477.1">Year</span></strong><span class="koboSpan" id="kobo.478.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.479.1">Month</span></strong><span class="koboSpan" id="kobo.480.1"> in the </span><strong class="bold"><span class="koboSpan" id="kobo.481.1">Repeat every</span></strong><span class="koboSpan" id="kobo.482.1"> section, we have different</span><a id="_idIndexMarker914"/><span class="koboSpan" id="kobo.483.1"> options in the Scheduler. </span><span class="koboSpan" id="kobo.483.2">The following figures show all the details regarding both options. </span><span class="koboSpan" id="kobo.483.3">First, let’s look </span><span class="No-Break"><span class="koboSpan" id="kobo.484.1">at </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.485.1">Month</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.486.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer179">
<span class="koboSpan" id="kobo.487.1"><img alt="Figure 11.10 – The Month option in the Scheduler" src="image/B19752_11_10.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.488.1">Figure 11.10 – The Month option in the Scheduler</span></p>
<p><span class="koboSpan" id="kobo.489.1">Here is the </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.490.1">Year</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.491.1"> option:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer180">
<span class="koboSpan" id="kobo.492.1"><img alt="Figure 11.11 – The Year option in the Scheduler" src="image/B19752_11_11.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.493.1">Figure 11.11 – The Year option in the Scheduler</span></p>
<p><span class="koboSpan" id="kobo.494.1">For </span><strong class="bold"><span class="koboSpan" id="kobo.495.1">Month</span></strong><span class="koboSpan" id="kobo.496.1">, we have a dropdown</span><a id="_idIndexMarker915"/><span class="koboSpan" id="kobo.497.1"> that allows us to select the day (such as </span><strong class="bold"><span class="koboSpan" id="kobo.498.1">1st</span></strong><span class="koboSpan" id="kobo.499.1">), while in the case of </span><strong class="bold"><span class="koboSpan" id="kobo.500.1">Year</span></strong><span class="koboSpan" id="kobo.501.1">, we have two dropdowns – one for the day and one for the month (such as </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.502.1">1st</span></strong></span><span class="No-Break"> </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.503.1">January</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.504.1">).</span></span></p>
<p><span class="koboSpan" id="kobo.505.1">In this section, we set up the dashboard with three different Scheduler widgets and assigned them Boolean-type cloud variables, which will be used in our code to check the Scheduler state and whether the Scheduler is active or not. </span><span class="koboSpan" id="kobo.505.2">In the following section, you have an assignment to use the Scheduler according to the specified requirements, giving you a proper idea of how you can use the scheduler functionality in your projects to enhance your </span><span class="No-Break"><span class="koboSpan" id="kobo.506.1">product development.</span></span></p>
<h1 id="_idParaDest-242"><a id="_idTextAnchor242"/><span class="koboSpan" id="kobo.507.1">The task at hand – an assignment</span></h1>
<p><span class="koboSpan" id="kobo.508.1">Continuing from the previous project where you connected three LEDs to the MKR Wi-Fi 1010 and set</span><a id="_idIndexMarker916"/><span class="koboSpan" id="kobo.509.1"> up the Arduino IoT Cloud Scheduler, complete the following </span><span class="No-Break"><span class="koboSpan" id="kobo.510.1">assignment tasks:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.511.1">Attach three relays to control any electrical/electronic appliance, such as a fan, light, or heater, using </span><span class="No-Break"><span class="koboSpan" id="kobo.512.1">the Scheduler.</span></span></li>
<li><span class="koboSpan" id="kobo.513.1">Implement the Scheduler to turn your home’s outside/indoor </span><span class="No-Break"><span class="koboSpan" id="kobo.514.1">lights on/off.</span></span></li>
<li><span class="koboSpan" id="kobo.515.1">Attach a buzzer instead of LEDs, and create an alarm device for </span><span class="No-Break"><span class="koboSpan" id="kobo.516.1">your room/classroom.</span></span></li>
<li><span class="koboSpan" id="kobo.517.1">Turn on surprise lighting with the Scheduler for a birthday or anniversary. </span><span class="koboSpan" id="kobo.517.2">Use the same light strip with multiple Schedulers to turn the light strips on/off for </span><span class="No-Break"><span class="koboSpan" id="kobo.518.1">different occasions.</span></span></li>
<li><span class="koboSpan" id="kobo.519.1">Control the water solenoid valve for your garden/tunnel farm using the Scheduler (this is optional, and if you have a smart </span><span class="No-Break"><span class="koboSpan" id="kobo.520.1">agriculture facility).</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.521.1">In this section, we outlined</span><a id="_idIndexMarker917"/><span class="koboSpan" id="kobo.522.1"> an assignment that will test your skills with different scenarios and help you explore the usage of the Scheduler feature in different environments. </span><span class="koboSpan" id="kobo.522.2">In the following section, we will start to explore the benefits of OTA, the Arduino IoT Cloud's OTA features, supported development boards for OTA, and how to use OTA features in the Arduino IoT Cloud. </span><span class="koboSpan" id="kobo.522.3">And, of, course you will also learn about the pros and cons of the Arduino IoT </span><span class="No-Break"><span class="koboSpan" id="kobo.523.1">Cloud OTA.</span></span></p>
<h1 id="_idParaDest-243"><a id="_idTextAnchor243"/><span class="koboSpan" id="kobo.524.1">Exploring OTA updates in IoT</span></h1>
<p><span class="koboSpan" id="kobo.525.1">OTA is a term</span><a id="_idIndexMarker918"/><span class="koboSpan" id="kobo.526.1"> that refers to the wireless distribution of software or firmware</span><a id="_idIndexMarker919"/><span class="koboSpan" id="kobo.527.1"> updates, or other updates to devices. </span><span class="koboSpan" id="kobo.527.2">This technology allows updates to be delivered and installed on devices without the need for physical connections or manual intervention. </span><span class="koboSpan" id="kobo.527.3">OTA is widely utilized across various industries, including telecommunications, automotive, consumer electronics, and IoT. </span><span class="koboSpan" id="kobo.527.4">Here are a few examples</span><a id="_idIndexMarker920"/><span class="koboSpan" id="kobo.528.1"> of </span><span class="No-Break"><span class="koboSpan" id="kobo.529.1">OTA usage:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.530.1">Mobile devices</span></strong><span class="koboSpan" id="kobo.531.1">: OTA updates are commonly employed to distribute operating system updates, security patches, and feature enhancements to smartphones and tablets. </span><span class="koboSpan" id="kobo.531.2">Users receive notifications, prompting them to download and install the </span><span class="No-Break"><span class="koboSpan" id="kobo.532.1">updates wirelessly.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.533.1">Automotive industry</span></strong><span class="koboSpan" id="kobo.534.1">: Many modern vehicles are equipped with OTA capabilities, enabling manufacturers to remotely update the vehicle software, infotainment systems, navigation maps, and other features. </span><span class="koboSpan" id="kobo.534.2">OTA updates can improve vehicle performance, introduce new functionalities, and address </span><span class="No-Break"><span class="koboSpan" id="kobo.535.1">security vulnerabilities.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.536.1">IoT devices</span></strong><span class="koboSpan" id="kobo.537.1">: IoT devices, such as smart home devices, wearables, and industrial sensors, often rely on OTA updates to deliver firmware updates, bug fixes, and new features. </span><span class="koboSpan" id="kobo.537.2">This enables manufacturers to enhance device performance, address vulnerabilities, and introduce new functionalities without the need for physical access to </span><span class="No-Break"><span class="koboSpan" id="kobo.538.1">the devices.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.539.1">Set-top boxes and smart TVs</span></strong><span class="koboSpan" id="kobo.540.1">: OTA updates are utilized to deliver firmware updates and software patches to set-top boxes and smart TVs. </span><span class="koboSpan" id="kobo.540.2">This ensures that these devices remain up to date with the latest features, security enhancements, and </span><span class="No-Break"><span class="koboSpan" id="kobo.541.1">bug</span></span><span class="No-Break"><a id="_idIndexMarker921"/></span><span class="No-Break"><span class="koboSpan" id="kobo.542.1"> fixes.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.543.1">OTA updates offer numerous</span><a id="_idIndexMarker922"/><span class="koboSpan" id="kobo.544.1"> benefits, including convenience, cost-effectiveness, and the ability to quickly address security vulnerabilities or software</span><a id="_idIndexMarker923"/><span class="koboSpan" id="kobo.545.1"> issues. </span><span class="koboSpan" id="kobo.545.2">However, ensuring the integrity and security of OTA updates is crucial to prevent unauthorized access or malicious activities that could compromise the devices </span><span class="No-Break"><span class="koboSpan" id="kobo.546.1">or data.</span></span></p>
<p><span class="koboSpan" id="kobo.547.1">In this section, we explored what OTA is and how it offers benefits in today’s world. </span><span class="koboSpan" id="kobo.547.2">In the following section, we will discuss in detail the Arduino IoT Cloud OTA feature, which includes compatible devices that are supported by the Arduino IoT Cloud for OTA, and how to use the OTA feature in the Arduino IoT Cloud to send firmware updates </span><span class="No-Break"><span class="koboSpan" id="kobo.548.1">to devices.</span></span></p>
<h1 id="_idParaDest-244"><a id="_idTextAnchor244"/><span class="koboSpan" id="kobo.549.1">Leveraging the Arduino IoT Cloud for OTA updates</span></h1>
<p><strong class="bold"><span class="koboSpan" id="kobo.550.1">Arduino IoT Cloud OTA</span></strong><span class="koboSpan" id="kobo.551.1"> is a feature available in the Arduino IoT Cloud</span><a id="_idIndexMarker924"/><span class="koboSpan" id="kobo.552.1"> platform, designed to facilitate the remote monitoring and control of Arduino-based IoT devices. </span><span class="koboSpan" id="kobo.552.2">This functionality allows users to wirelessly update the firmware of their deployed Arduino </span><span class="No-Break"><span class="koboSpan" id="kobo.553.1">IoT devices.</span></span></p>
<h2 id="_idParaDest-245"><a id="_idTextAnchor245"/><span class="koboSpan" id="kobo.554.1">The Arduino IoT Cloud pros</span></h2>
<p><span class="koboSpan" id="kobo.555.1">The Arduino IoT Cloud OTA feature</span><a id="_idIndexMarker925"/><span class="koboSpan" id="kobo.556.1"> offers the </span><span class="No-Break"><span class="koboSpan" id="kobo.557.1">following capabilities:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.558.1">Firmware updates</span></strong><span class="koboSpan" id="kobo.559.1">: Users can remotely update the firmware of their Arduino IoT devices as well as ESP-series devices using Arduino IoT Cloud OTA. </span><span class="koboSpan" id="kobo.559.2">This enables the deployment of bug fixes, security patches, feature enhancements, and new versions of code without the need for physical access to </span><span class="No-Break"><span class="koboSpan" id="kobo.560.1">the devices.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.561.1">Code synchronization</span></strong><span class="koboSpan" id="kobo.562.1">: The OTA feature ensures that the code running on Arduino/ESP-series IoT devices remains synchronized with the latest version stored on the cloud. </span><span class="koboSpan" id="kobo.562.2">It eliminates the necessity of manually updating each device individually, thereby maintaining consistency across the entire fleet of </span><span class="No-Break"><span class="koboSpan" id="kobo.563.1">IoT devices.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.564.1">OTA configuration</span></strong><span class="koboSpan" id="kobo.565.1">: In addition to firmware updates and code synchronization, Arduino IoT Cloud OTA enables users to remotely configure the parameters or settings of their Arduino/ESP-series IoT devices. </span><span class="koboSpan" id="kobo.565.2">This means device behavior can be modified, thresholds can be adjusted, and variables can be changed without the need for </span><span class="No-Break"><span class="koboSpan" id="kobo.566.1">physical intervention.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.567.1">Security and integrity</span></strong><span class="koboSpan" id="kobo.568.1">: Arduino IoT Cloud OTA ensures the security and integrity of firmware updates through authentication and encryption mechanisms. </span><span class="koboSpan" id="kobo.568.2">This safeguards against unauthorized access or tampering during the transmission process, enhancing the security of IoT devices and preventing </span><span class="No-Break"><span class="koboSpan" id="kobo.569.1">potential</span></span><span class="No-Break"><a id="_idIndexMarker926"/></span><span class="No-Break"><span class="koboSpan" id="kobo.570.1"> vulnerabilities.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.571.1">By providing a convenient and secure method to remotely update firmware and configure devices, the Arduino IoT Cloud OTA simplifies the management and maintenance of Arduino-based IoT deployments. </span><span class="koboSpan" id="kobo.571.2">It enhances efficiency, reduces costs, and enables users to keep their IoT devices up to date with the latest features, bug fixes, and security enhancements. </span><span class="koboSpan" id="kobo.571.3">In the following subsection, we will discuss the cons of the Arduino IoT Cloud </span><span class="No-Break"><span class="koboSpan" id="kobo.572.1">OTA feature.</span></span></p>
<h2 id="_idParaDest-246"><a id="_idTextAnchor246"/><span class="koboSpan" id="kobo.573.1">Arduino IoT Cloud OTA cons</span></h2>
<p><span class="koboSpan" id="kobo.574.1">The Arduino IoT Cloud OTA feature</span><a id="_idIndexMarker927"/><span class="koboSpan" id="kobo.575.1"> is a convenient tool to remotely update the firmware of your Arduino devices connected to the Arduino IoT Cloud platform. </span><span class="koboSpan" id="kobo.575.2">However, as with any technology, it has its drawbacks and limitations. </span><span class="koboSpan" id="kobo.575.3">Here are some cons of the Arduino IoT Cloud </span><span class="No-Break"><span class="koboSpan" id="kobo.576.1">OTA feature:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.577.1">Limited bandwidth</span></strong><span class="koboSpan" id="kobo.578.1">: OTA updates require data transfer over the internet, which can be costly or problematic in areas with limited or expensive data bandwidth. </span><span class="koboSpan" id="kobo.578.2">Large firmware updates may consume a significant amount </span><span class="No-Break"><span class="koboSpan" id="kobo.579.1">of data.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.580.1">Network stability</span></strong><span class="koboSpan" id="kobo.581.1">: Reliable internet connectivity is essential for OTA updates. </span><span class="koboSpan" id="kobo.581.2">If a device loses connection during an update, it can result in failed or corrupt firmware, potentially rendering the </span><span class="No-Break"><span class="koboSpan" id="kobo.582.1">device unusable.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.583.1">Version control</span></strong><span class="koboSpan" id="kobo.584.1">: Managing different versions of firmware across multiple devices can become challenging. </span><span class="koboSpan" id="kobo.584.2">Keeping track of which devices are running which firmware versions and ensuring compatibility can </span><span class="No-Break"><span class="koboSpan" id="kobo.585.1">be time-consuming.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.586.1">Compatibility issues</span></strong><span class="koboSpan" id="kobo.587.1">: OTA updates may not work seamlessly with all types of devices and configurations. </span><span class="koboSpan" id="kobo.587.2">Ensuring that your hardware supports OTA updates and that you have the necessary libraries and code in place can be a </span><span class="No-Break"><span class="koboSpan" id="kobo.588.1">complex task.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.589.1">Latency</span></strong><span class="koboSpan" id="kobo.590.1">: Depending on the size of the firmware update and the speed of the internet connection, OTA updates can introduce latency, causing devices to be temporarily unavailable during the </span><span class="No-Break"><span class="koboSpan" id="kobo.591.1">update process.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.592.1">Dependency on the Arduino IoT Cloud</span></strong><span class="koboSpan" id="kobo.593.1">: To use the Arduino IoT Cloud OTA feature, you must rely on the Arduino IoT Cloud platform. </span><span class="koboSpan" id="kobo.593.2">If the platform experiences downtime or changes in its services, it can impact your ability to perform </span><span class="No-Break"><span class="koboSpan" id="kobo.594.1">OTA updates.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.595.1">Limited rollback options</span></strong><span class="koboSpan" id="kobo.596.1">: In some cases, if an OTA update fails or causes issues, rolling back to a previous firmware version can be challenging, especially if you didn’t plan for rollback</span><a id="_idIndexMarker928"/><span class="koboSpan" id="kobo.597.1"> mechanisms </span><span class="No-Break"><span class="koboSpan" id="kobo.598.1">in advance.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.599.1">Despite these cons, OTA updates remain a valuable feature for many IoT projects. </span><span class="koboSpan" id="kobo.599.2">However, it’s essential to carefully assess your project’s specific requirements and constraints before implementing OTA updates and to address these challenges through proper planning and </span><span class="No-Break"><span class="koboSpan" id="kobo.600.1">security measures.</span></span></p>
<p><span class="koboSpan" id="kobo.601.1">In this section, we discussed the different benefits of the Arduino IoT Cloud OTA feature as well as its cons. </span><span class="koboSpan" id="kobo.601.2">In the following section, we will take a deeper look into which hardware development boards are compatible with the Arduino IoT Cloud OTA feature, as it is currently not supported by all hardware development boards. </span><span class="koboSpan" id="kobo.601.3">Therefore, it’s necessary for you to keep this point in mind during the product development stage if you need an OTA feature for </span><span class="No-Break"><span class="koboSpan" id="kobo.602.1">your product.</span></span></p>
<h2 id="_idParaDest-247"><a id="_idTextAnchor247"/><span class="koboSpan" id="kobo.603.1">A list of compatible development hardware for Arduino OTA</span></h2>
<p><span class="koboSpan" id="kobo.604.1">Not all of the official Arduino (or other) development boards</span><a id="_idIndexMarker929"/><span class="koboSpan" id="kobo.605.1"> are ready for the OTA feature, but here are the ones that are compatible and ready. </span><span class="koboSpan" id="kobo.605.2">Go to this link to check out all the information</span><a id="_idIndexMarker930"/><span class="koboSpan" id="kobo.606.1"> regarding OTA-compatible development </span><span class="No-Break"><span class="koboSpan" id="kobo.607.1">boards: </span></span><span class="No-Break"><span class="koboSpan" id="kobo.608.1">https://docs.arduino.cc/arduino-cloud/features/ota-getting-started</span></span><span class="No-Break"><span class="koboSpan" id="kobo.609.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.610.1">These are the official Arduino development boards that are ready </span><span class="No-Break"><span class="koboSpan" id="kobo.611.1">for OTA:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.612.1">Arduino MKR </span><span class="No-Break"><span class="koboSpan" id="kobo.613.1">Wi-Fi 1010</span></span></li>
<li><span class="koboSpan" id="kobo.614.1">Arduino Nano </span><span class="No-Break"><span class="koboSpan" id="kobo.615.1">33 IoT</span></span></li>
<li><span class="koboSpan" id="kobo.616.1">Arduino Nano </span><span class="No-Break"><span class="koboSpan" id="kobo.617.1">RP2040 Connect</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.618.1">Portenta H7</span></span></li>
<li><span class="koboSpan" id="kobo.619.1">Portenta </span><span class="No-Break"><span class="koboSpan" id="kobo.620.1">Machine Control</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.621.1">Nicla Vision</span></span></li>
<li><span class="koboSpan" id="kobo.622.1">Arduino </span><span class="No-Break"><span class="koboSpan" id="kobo.623.1">Opta (PLC)</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.624.1">These are the ESP32-series development boards that are ready </span><span class="No-Break"><span class="koboSpan" id="kobo.625.1">for OTA:</span></span></p>
<ul>
<li><span class="No-Break"><span class="koboSpan" id="kobo.626.1">ESP32-S2-DevKitC</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.627.1">NodeMCU-32-S2</span></span></li>
<li><span class="koboSpan" id="kobo.628.1">WeMos </span><span class="No-Break"><span class="koboSpan" id="kobo.629.1">LOLIN D32</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.630.1">ESP32-S3-DevKitC</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.631.1">ESP32-CAM</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.632.1">NodeMCU-32S</span></span></li>
<li><span class="koboSpan" id="kobo.633.1">Freenove </span><span class="No-Break"><span class="koboSpan" id="kobo.634.1">ESP32 WROVER</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.635.1">ESP32-DevKitC-32E</span></span></li>
<li><span class="koboSpan" id="kobo.636.1">DOIT ESP32 </span><span class="No-Break"><span class="koboSpan" id="kobo.637.1">DevKit v1</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.638.1">The good thing is that Arduino provides the latest features to ESP32-series development boards. </span><span class="koboSpan" id="kobo.638.2">These boards</span><a id="_idIndexMarker931"/><span class="koboSpan" id="kobo.639.1"> are very popular among students/researchers and professional developers, due to their cost and availability all around the world. </span><span class="koboSpan" id="kobo.639.2">I used the </span><strong class="bold"><span class="koboSpan" id="kobo.640.1">XIAO ESP32-C3 series</span></strong><span class="koboSpan" id="kobo.641.1"> development board for various projects and tested the OTA service for that board. </span><span class="koboSpan" id="kobo.641.2">From my personal experience, the OTA service works faster on official Arduino development boards as compared to the ESP32 series, but I hope in the future that the Arduino Cloud team will optimize the OTA feature for the ESP32 series board for a faster and </span><span class="No-Break"><span class="koboSpan" id="kobo.642.1">better experience.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.643.1">Important note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.644.1">The Arduino IoT Cloud offers the OTA feature to Wi-Fi-enabled devices. </span><span class="koboSpan" id="kobo.644.2">This means that LoRaWAN is currently not compatible with the </span><span class="No-Break"><span class="koboSpan" id="kobo.645.1">OTA feature.</span></span></p>
<p><span class="koboSpan" id="kobo.646.1">In this section, we discussed the broad</span><a id="_idIndexMarker932"/><span class="koboSpan" id="kobo.647.1"> range of compatible boards that support the Arduino IoT Cloud OTA feature. </span><span class="koboSpan" id="kobo.647.2">In the following section, we will take a look at how we can use the OTA feature in the Arduino IoT Cloud to send firmware updates via the internet, without any device connection to the </span><span class="No-Break"><span class="koboSpan" id="kobo.648.1">host computer.</span></span></p>
<h2 id="_idParaDest-248"><a id="_idTextAnchor248"/><span class="koboSpan" id="kobo.649.1">Implementing the OTA update on the MKR Wi-Fi 1010</span></h2>
<p><span class="koboSpan" id="kobo.650.1">Firstly, we will explore</span><a id="_idIndexMarker933"/><span class="koboSpan" id="kobo.651.1"> how we can use OTA, and then we will dive deep into how OTA</span><a id="_idIndexMarker934"/><span class="koboSpan" id="kobo.652.1"> works behind the scenes. </span><span class="koboSpan" id="kobo.652.2">We need to navigate to a Thing that uses an OTA-supported development board; we will choose a Thing that is already attached to the MKR Wi-Fi 1010 device. </span><span class="koboSpan" id="kobo.652.3">Navigate to the </span><strong class="bold"><span class="koboSpan" id="kobo.653.1">Sketch</span></strong><span class="koboSpan" id="kobo.654.1"> tab in the Thing. </span><span class="koboSpan" id="kobo.654.2">The following figure shows the OTA feature </span><span class="No-Break"><span class="koboSpan" id="kobo.655.1">and port:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer181">
<span class="koboSpan" id="kobo.656.1"><img alt="Figure 11.12 – The physical port connection with the OTA update feature" src="image/B19752_11_12.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.657.1">Figure 11.12 – The physical port connection with the OTA update feature</span></p>
<p><span class="koboSpan" id="kobo.658.1">My device is connected to my MacBook as well as to the Arduino IoT Cloud via Wi-Fi. </span><span class="koboSpan" id="kobo.658.2">That’s why you can see two options in the preceding figure for sketch uploading. </span><span class="koboSpan" id="kobo.658.3">The first one is the </span><strong class="bold"><span class="koboSpan" id="kobo.659.1">Port</span></strong><span class="koboSpan" id="kobo.660.1"> option, which is only available when your development board is directly connected to your laptop/computer, while the second option is </span><strong class="bold"><span class="koboSpan" id="kobo.661.1">Over-the-Air</span></strong><span class="koboSpan" id="kobo.662.1">, which is available when your code is configured on your development board with network settings and successfully connected to the Arduino IoT Cloud over </span><span class="No-Break"><span class="koboSpan" id="kobo.663.1">the internet.</span></span></p>
<p><span class="koboSpan" id="kobo.664.1">Select the </span><strong class="bold"><span class="koboSpan" id="kobo.665.1">Over-the-Air</span></strong><span class="koboSpan" id="kobo.666.1"> option, and click</span><a id="_idIndexMarker935"/><span class="koboSpan" id="kobo.667.1"> on the </span><strong class="bold"><span class="koboSpan" id="kobo.668.1">Sketch Uploading</span></strong><span class="koboSpan" id="kobo.669.1"> (the green arrow icon) button; this will start uploading</span><a id="_idIndexMarker936"/><span class="koboSpan" id="kobo.670.1"> your updated code to the board via the internet without the intervention of a physical connection. </span><span class="koboSpan" id="kobo.670.2">However, how can you confirm that this works via the internet? </span><span class="koboSpan" id="kobo.670.3">Just unplug the development board from your computer and power it with any adapter, but make sure your device has access to a </span><span class="No-Break"><span class="koboSpan" id="kobo.671.1">Wi-Fi router.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer182">
<span class="koboSpan" id="kobo.672.1"><img alt="Figure 11.13 – The standalone Over-the-Air update option" src="image/B19752_11_13.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.673.1">Figure 11.13 – The standalone Over-the-Air update option</span></p>
<p><span class="koboSpan" id="kobo.674.1">After disconnecting from the computer and turning on the device via the power adapter, you will see only the </span><strong class="bold"><span class="koboSpan" id="kobo.675.1">Over-the-Air</span></strong><span class="koboSpan" id="kobo.676.1"> update option in your </span><strong class="bold"><span class="koboSpan" id="kobo.677.1">Sketch</span></strong><span class="koboSpan" id="kobo.678.1"> tab. </span><span class="koboSpan" id="kobo.678.2">Just modify your code or add some extra login details, and click on </span><strong class="bold"><span class="koboSpan" id="kobo.679.1">Sketch Uploading</span></strong><span class="koboSpan" id="kobo.680.1"> (the green arrow icon), and within a short time, your code will be on the development board without </span><span class="No-Break"><span class="koboSpan" id="kobo.681.1">any hassle.</span></span></p>
<p><span class="koboSpan" id="kobo.682.1">Based on my experience, I've often thought we should have an option by which we can modify/update the code of remote devices, such as devices for smart agriculture, warehouse monitoring, and industrial monitoring, because it’s very difficult to travel to remote places to update/modify the code. </span><span class="koboSpan" id="kobo.682.2">However, the Arduino IoT Cloud OTA feature makes our lives easier overall. </span><span class="koboSpan" id="kobo.682.3">With the OTA</span><a id="_idIndexMarker937"/><span class="koboSpan" id="kobo.683.1"> feature, we can save time and cost</span><a id="_idIndexMarker938"/><span class="koboSpan" id="kobo.684.1"> and provide the correct updates on time to our devices without </span><span class="No-Break"><span class="koboSpan" id="kobo.685.1">any delay.</span></span></p>
<h2 id="_idParaDest-249"><a id="_idTextAnchor249"/><span class="koboSpan" id="kobo.686.1">How OTA works</span></h2>
<p><span class="koboSpan" id="kobo.687.1">Let’s talk about how OTA</span><a id="_idIndexMarker939"/><span class="koboSpan" id="kobo.688.1"> works behind the scenes. </span><span class="koboSpan" id="kobo.688.2">The Arduino IoT Cloud first compiles the code in a cloud</span><a id="_idIndexMarker940"/><span class="koboSpan" id="kobo.689.1"> environment, according to the selected device, and then stores these compiled files in </span><strong class="bold"><span class="koboSpan" id="kobo.690.1">AWS S3</span></strong><span class="koboSpan" id="kobo.691.1"> storage. </span><span class="koboSpan" id="kobo.691.2">There, we will get the URL of the compiled files’ location, which is transmitted from the Arduino IoT Cloud to the device directly for further operations. </span><span class="koboSpan" id="kobo.691.3">When the device receives the OTA file URL and the </span><strong class="source-inline"><span class="koboSpan" id="kobo.692.1">OTA_REQ</span></strong><span class="koboSpan" id="kobo.693.1"> flag is </span><strong class="source-inline"><span class="koboSpan" id="kobo.694.1">true</span></strong><span class="koboSpan" id="kobo.695.1">, it will start downloading the compiled files from the specified URL. </span><span class="koboSpan" id="kobo.695.2">After download completion, the development board verifies the downloaded files with a length/CRC check. </span><span class="koboSpan" id="kobo.695.3">After download verification, the board will start flashing with the latest firmware. </span><span class="koboSpan" id="kobo.695.4">The following figure illustrates the whole procedure that happens behind </span><span class="No-Break"><span class="koboSpan" id="kobo.696.1">the scenes:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer183">
<span class="koboSpan" id="kobo.697.1"><img alt="Figure 11.14 – The Arduino IoT Cloud OTA behind the scenes" src="image/B19752_11_14.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.698.1">Figure 11.14 – The Arduino IoT Cloud OTA behind the scenes</span></p>
<p><span class="koboSpan" id="kobo.699.1">The Arduino IoT Cloud team has simplified the complexity of this process and provides only a single-click option for developers for OTA. </span><span class="koboSpan" id="kobo.699.2">The purpose of this diagram is to give you an overview of how things work, which will hopefully provide you with new ideas for your </span><span class="No-Break"><span class="koboSpan" id="kobo.700.1">future developments.</span></span></p>
<p><span class="koboSpan" id="kobo.701.1">In this section, we learned </span><a id="_idIndexMarker941"/><span class="koboSpan" id="kobo.702.1">how to implement the Arduino IoT Cloud OTA feature to send firmware OTA. </span><span class="koboSpan" id="kobo.702.2">We also discussed how the Arduino IoT Cloud sends firmware updates to devices using the Amazon </span><span class="No-Break"><span class="koboSpan" id="kobo.703.1">S3 service.</span></span></p>
<h1 id="_idParaDest-250"><a id="_idTextAnchor250"/><span class="koboSpan" id="kobo.704.1">Summary</span></h1>
<p><span class="koboSpan" id="kobo.705.1">In this chapter, we explored the Scheduler and how we can use the Arduino IoT Cloud to automate tasks that have different patterns or random patterns of operation. </span><span class="koboSpan" id="kobo.705.2">We used simple LEDs with the MKR Wi-Fi 1010 to demonstrate multiple Scheduler/timer operations, which helped you to understand how to use this function in real-world projects, such as in smart agriculture and </span><span class="No-Break"><span class="koboSpan" id="kobo.706.1">smart industry.</span></span></p>
<p><span class="koboSpan" id="kobo.707.1">In the second part of the chapter, we explored OTA. </span><span class="koboSpan" id="kobo.707.2">Firstly, we discussed the pros and cons of OTA and how we can save time and costs with it. </span><span class="koboSpan" id="kobo.707.3">Then, we used OTA-enabled development boards to demonstrate the use of the OTA feature, and finally, we explored how OTA works behind </span><span class="No-Break"><span class="koboSpan" id="kobo.708.1">the scenes.</span></span></p>
<p><span class="koboSpan" id="kobo.709.1">In the following chapter, we will implement a healthcare project. </span><span class="koboSpan" id="kobo.709.2">You will learn how to use a heartbeat sensor as well as the Arduino IoT Cloud webhooks feature, which will send data to a third-party service (</span><strong class="bold"><span class="koboSpan" id="kobo.710.1">Zapier</span></strong><span class="koboSpan" id="kobo.711.1">). </span><span class="koboSpan" id="kobo.711.2">We will use Zapier to set up a </span><em class="italic"><span class="koboSpan" id="kobo.712.1">Zap</span></em><span class="koboSpan" id="kobo.713.1">, which will receive the heartbeat readings and send an email notification to a designated person if the reading is over or under </span><span class="No-Break"><span class="koboSpan" id="kobo.714.1">the threshold.</span></span></p>
</div>
</body></html>