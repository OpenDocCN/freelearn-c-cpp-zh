<html><head></head><body>
<div id="_idContainer028">
<h1 class="chapter-number" id="_idParaDest-40"><a id="_idTextAnchor041"/><span class="koboSpan" id="kobo.1.1">2</span></h1>
<h1 id="_idParaDest-41"><a id="_idTextAnchor042"/><span class="koboSpan" id="kobo.2.1">Understanding Networking Basics</span></h1>
<p><span class="koboSpan" id="kobo.3.1">Having a strong knowledge of networking is the foundation of any successful multiplayer game development, as it provides a basic understanding of how the different components that make up a network work. </span><span class="koboSpan" id="kobo.3.2">Networking can be divided into three main areas: logical architecture, protocols and standards, and </span><span class="No-Break"><span class="koboSpan" id="kobo.4.1">physical infrastructure.</span></span></p>
<p><span class="koboSpan" id="kobo.5.1">As it’s important for anyone interested in networked games to have at least some basic understanding of these concepts, the primary goal of this chapter is to introduce you to these components and the main issues that may pop up during multiplayer application development. </span><span class="koboSpan" id="kobo.5.2">By the end of the chapter, you will also get a grip on how the Unreal Engine multiplayer framework is organized in order to be prepared for the next step: creating your first multiplayer </span><span class="No-Break"><span class="koboSpan" id="kobo.6.1">game prototype.</span></span></p>
<p><span class="koboSpan" id="kobo.7.1">So, in this chapter, we will cover the </span><span class="No-Break"><span class="koboSpan" id="kobo.8.1">following topics:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.9.1">What is </span><span class="No-Break"><span class="koboSpan" id="kobo.10.1">computer networking?</span></span></li>
<li><span class="koboSpan" id="kobo.11.1">Introducing </span><span class="No-Break"><span class="koboSpan" id="kobo.12.1">network protocols</span></span></li>
<li><span class="koboSpan" id="kobo.13.1">Understanding </span><span class="No-Break"><span class="koboSpan" id="kobo.14.1">network issues</span></span></li>
<li><span class="koboSpan" id="kobo.15.1">Introducing the Unreal Engine </span><span class="No-Break"><span class="koboSpan" id="kobo.16.1">multiplayer system</span></span></li>
</ul>
<h1 id="_idParaDest-42"><a id="_idTextAnchor043"/><span class="koboSpan" id="kobo.17.1">Technical requirements</span></h1>
<p><span class="koboSpan" id="kobo.18.1">There are no technical requirements to follow in </span><span class="No-Break"><span class="koboSpan" id="kobo.19.1">this chapter.</span></span></p>
<h1 id="_idParaDest-43"><a id="_idTextAnchor044"/><span class="koboSpan" id="kobo.20.1">What is computer networking?</span></h1>
<p><span class="koboSpan" id="kobo.21.1">We live in a world where we are constantly</span><a id="_idIndexMarker056"/><span class="koboSpan" id="kobo.22.1"> communicating with each other through computers, smartphones, smart homes, and a plethora of different devices. </span><span class="koboSpan" id="kobo.22.2">Computer networks are the backbone of </span><span class="No-Break"><span class="koboSpan" id="kobo.23.1">modern technology.</span></span></p>
<p><span class="koboSpan" id="kobo.24.1">Most people probably don’t even care about device communication and how it works; the most important thing is that... </span><span class="koboSpan" id="kobo.24.2">well, it works. </span><span class="koboSpan" id="kobo.24.3">But what exactly does </span><em class="italic"><span class="koboSpan" id="kobo.25.1">network</span></em><span class="koboSpan" id="kobo.26.1"> mean? </span><span class="koboSpan" id="kobo.26.2">And most importantly, as multiplayer game developers, what do we need to know about </span><span class="No-Break"><span class="koboSpan" id="kobo.27.1">network systems?</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.28.1">Computer networking</span></strong><span class="koboSpan" id="kobo.29.1"> involves two or more (most of the time, a lot more!) devices that are connected together with the common goal of sharing data and resources as fast and as reliably </span><span class="No-Break"><span class="koboSpan" id="kobo.30.1">as possible.</span></span></p>
<p><span class="koboSpan" id="kobo.31.1">A network can use cables (wired) or radio waves (wireless) and can cover a self-enclosed area or be available at a greater scale. </span><span class="koboSpan" id="kobo.31.2">Even if all these technologies share the same purpose, their structure and capabilities will </span><span class="No-Break"><span class="koboSpan" id="kobo.32.1">vary significantly.</span></span></p>
<p><span class="koboSpan" id="kobo.33.1">Once devices are physically connected, they must establish a “contract” in order to communicate securely; without such a contract, data could be sent to the wrong person and put important information </span><span class="No-Break"><span class="koboSpan" id="kobo.34.1">at risk.</span></span></p>
<p><span class="koboSpan" id="kobo.35.1">After the contract is established, each device can send data to another one using a “digital envelope” that identifies the sender and the receiver. </span><span class="koboSpan" id="kobo.35.2">This ensures that the data is only received by the </span><span class="No-Break"><span class="koboSpan" id="kobo.36.1">intended recipient.</span></span></p>
<p><span class="koboSpan" id="kobo.37.1">Dispatching data over the network can be very complex, especially when dealing with large files (think about an email with a 150 MB 3D model as an attachment and you’ll probably get the idea!). </span><span class="koboSpan" id="kobo.37.2">As a consequence, data must be “fragmented” into small pieces by the sender and, once it arrives at its destination, it will be re-packaged by the receiver, ready to </span><span class="No-Break"><span class="koboSpan" id="kobo.38.1">be used.</span></span></p>
<p><span class="koboSpan" id="kobo.39.1">This brings us to the last stage: losing information. </span><span class="koboSpan" id="kobo.39.2">Despite the advancements in technology, data loss is still a possibility in our imperfect world. </span><span class="koboSpan" id="kobo.39.3">Data can be corrupted or lost during transfer; therefore, it is important to take measures to ensure the safety of data and prevent </span><span class="No-Break"><span class="koboSpan" id="kobo.40.1">such losses.</span></span></p>
<p><span class="koboSpan" id="kobo.41.1">If things sound difficult, that's because they are! </span><span class="koboSpan" id="kobo.41.2">But don’t be afraid, that’s exactly how I felt when I started learning about this type of technology; as you make your way through this book, you will find that many of the topics have been handled by the UE multiplayer system, leaving</span><a id="_idIndexMarker057"/><span class="koboSpan" id="kobo.42.1"> you free to explore higher </span><span class="No-Break"><span class="koboSpan" id="kobo.43.1">level topics.</span></span></p>
<p><span class="koboSpan" id="kobo.44.1">In the next section, you will learn how a network, or a group of networks, is organized from a structural and </span><span class="No-Break"><span class="koboSpan" id="kobo.45.1">operational perspective.</span></span></p>
<h1 id="_idParaDest-44"><a id="_idTextAnchor045"/><span class="koboSpan" id="kobo.46.1">Types of computer networks</span></h1>
<p><span class="koboSpan" id="kobo.47.1">As you already know, a computer network</span><a id="_idIndexMarker058"/><span class="koboSpan" id="kobo.48.1"> provides a way for multiple devices to communicate by sharing information with each other. </span><span class="koboSpan" id="kobo.48.2">Some well-known examples are </span><span class="No-Break"><span class="koboSpan" id="kobo.49.1">as follows:</span></span></p>
<ul>
<li><span class="No-Break"><span class="koboSpan" id="kobo.50.1">Sending emails</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.51.1">Streaming videos</span></span></li>
<li><span class="koboSpan" id="kobo.52.1">...and guess what? </span><span class="koboSpan" id="kobo.52.2">Playing </span><span class="No-Break"><span class="koboSpan" id="kobo.53.1">online games!</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.54.1">But how are these devices connected? </span><span class="koboSpan" id="kobo.54.2">There are several different types of computer networks available that have different capabilities and purposes; depending on your needs (and your budget!), you’ll have to find a solution that will grant you reliability </span><span class="No-Break"><span class="koboSpan" id="kobo.55.1">and trustworthiness.</span></span></p>
<h2 id="_idParaDest-45"><a id="_idTextAnchor046"/><span class="koboSpan" id="kobo.56.1">Local Area Networks</span></h2>
<p><strong class="bold"><span class="koboSpan" id="kobo.57.1">Local Area Networks</span></strong><span class="koboSpan" id="kobo.58.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.59.1">LANs</span></strong><span class="koboSpan" id="kobo.60.1">) are probably the most common type</span><a id="_idIndexMarker059"/><span class="koboSpan" id="kobo.61.1"> of computer network. </span><span class="koboSpan" id="kobo.61.2">A LAN </span><a id="_idIndexMarker060"/><span class="koboSpan" id="kobo.62.1">usually consists of a telecommunication network that connects devices that are situated at a close distance (usually no more than 1 kilometer). </span><span class="koboSpan" id="kobo.62.2">This type of network usually takes advantage of the fast connection over short distances granted by </span><span class="No-Break"><span class="koboSpan" id="kobo.63.1">Ethernet cables.</span></span></p>
<p><span class="koboSpan" id="kobo.64.1">A LAN</span><a id="_idIndexMarker061"/><span class="koboSpan" id="kobo.65.1"> can be of </span><span class="No-Break"><span class="koboSpan" id="kobo.66.1">two types:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.67.1">A client/server LAN, where several devices (i.e., the clients) are connected to a centralized computer (i.e., </span><span class="No-Break"><span class="koboSpan" id="kobo.68.1">the server)</span></span></li>
<li><span class="koboSpan" id="kobo.69.1">A peer-to-peer LAN, where each device shares the network </span><span class="No-Break"><span class="koboSpan" id="kobo.70.1">functionalities equally</span></span></li>
</ul>
<p><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.71.1">Figure 2</span></em></span><em class="italic"><span class="koboSpan" id="kobo.72.1">.1</span></em><span class="koboSpan" id="kobo.73.1"> illustrates a typical small-sized LAN where devices are connected through Wi-Fi or </span><span class="No-Break"><span class="koboSpan" id="kobo.74.1">Ethernet cables.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer022">
<span class="koboSpan" id="kobo.75.1"><img alt="Figure 2.1 – A LAN setup" src="image/Figure_02_01_B18203.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.76.1">Figure 2.1 – A LAN setup</span></p>
<p><span class="koboSpan" id="kobo.77.1">One of the main advantages of a LAN over a </span><strong class="bold"><span class="koboSpan" id="kobo.78.1">Wide Area Network</span></strong><span class="koboSpan" id="kobo.79.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.80.1">WAN</span></strong><span class="koboSpan" id="kobo.81.1">) is the lower level of maintenance</span><a id="_idIndexMarker062"/><span class="koboSpan" id="kobo.82.1"> and reduced implementation costs. </span><span class="koboSpan" id="kobo.82.2">Also, since a LAN is limited to a relatively small distance and to a limited number of connected devices, it ensures a higher level </span><span class="No-Break"><span class="koboSpan" id="kobo.83.1">of security.</span></span></p>
<p><span class="koboSpan" id="kobo.84.1">Some good examples where LANs</span><a id="_idIndexMarker063"/><span class="koboSpan" id="kobo.85.1"> are used are academic campuses (sometimes called </span><strong class="bold"><span class="koboSpan" id="kobo.86.1">Campus Area Networks</span></strong><span class="koboSpan" id="kobo.87.1">), hospitals, or offices with </span><span class="No-Break"><span class="koboSpan" id="kobo.88.1">multiple departments.</span></span></p>
<p><span class="koboSpan" id="kobo.89.1">A LAN can become a </span><strong class="bold"><span class="koboSpan" id="kobo.90.1">Wireless Local Area Network</span></strong><span class="koboSpan" id="kobo.91.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.92.1">WLAN</span></strong><span class="koboSpan" id="kobo.93.1">) when connections between devices</span><a id="_idIndexMarker064"/><span class="koboSpan" id="kobo.94.1"> are only made wirelessly, and it is typically used in homes</span><a id="_idIndexMarker065"/><span class="koboSpan" id="kobo.95.1"> or public spaces (for example, libraries, airports, and cafes) where devices</span><a id="_idIndexMarker066"/><span class="koboSpan" id="kobo.96.1"> must connect without the need for </span><span class="No-Break"><span class="koboSpan" id="kobo.97.1">physical cables.</span></span></p>
<h2 id="_idParaDest-46"><a id="_idTextAnchor047"/><span class="koboSpan" id="kobo.98.1">Wide Area Networks</span></h2>
<p><span class="koboSpan" id="kobo.99.1">The primary difference between a LAN and a WAN is that a WAN</span><a id="_idIndexMarker067"/><span class="koboSpan" id="kobo.100.1"> covers a much larger</span><a id="_idIndexMarker068"/><span class="koboSpan" id="kobo.101.1"> area and is essentially a collection of LANs </span><span class="No-Break"><span class="koboSpan" id="kobo.102.1">connected together.</span></span></p>
<p><span class="koboSpan" id="kobo.103.1">Similarly for the LAN, a WAN can be </span><span class="No-Break"><span class="koboSpan" id="kobo.104.1">as follows:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.105.1">A client/server WAN, where multiple devices are connected to a </span><span class="No-Break"><span class="koboSpan" id="kobo.106.1">central computer</span></span></li>
<li><span class="koboSpan" id="kobo.107.1">A peer-to-peer WAN, where each device shares an equal responsibility in the </span><span class="No-Break"><span class="koboSpan" id="kobo.108.1">network functionalities</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.109.1">As there is usually a loss in speed over long distances, a WAN is typically slower than a LAN. </span><span class="koboSpan" id="kobo.109.2">However, the main advantage of a WAN is the capability to be publicly owned: a good example is the internet, where no entity has </span><span class="No-Break"><span class="koboSpan" id="kobo.110.1">full ownership.</span></span></p>
<p><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.111.1">Figure 2</span></em></span><em class="italic"><span class="koboSpan" id="kobo.112.1">.2</span></em><span class="koboSpan" id="kobo.113.1"> shows several LANs connected together through </span><span class="No-Break"><span class="koboSpan" id="kobo.114.1">a WAN:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer023">
<span class="koboSpan" id="kobo.115.1"><img alt="Figure 2.2 – A WAN setup" src="image/Figure_02_02_B18203.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.116.1">Figure 2.2 – A WAN setup</span></p>
<p><span class="koboSpan" id="kobo.117.1">A </span><strong class="bold"><span class="koboSpan" id="kobo.118.1">Metropolitan Area Network</span></strong><span class="koboSpan" id="kobo.119.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.120.1">MAN</span></strong><span class="koboSpan" id="kobo.121.1">) is a smaller WAN usually managed</span><a id="_idIndexMarker069"/><span class="koboSpan" id="kobo.122.1"> by cities, regions, or governments; it typically includes a high-speed backbone network, which connects multiple LANs. </span><span class="koboSpan" id="kobo.122.2">As an example, it may connect multiple campuses belonging to the same academic</span><a id="_idIndexMarker070"/><span class="koboSpan" id="kobo.123.1"> institution (and that’s how it works where I am teaching </span><span class="No-Break"><span class="koboSpan" id="kobo.124.1">right now!).</span></span></p>
<h2 id="_idParaDest-47"><a id="_idTextAnchor048"/><span class="koboSpan" id="kobo.125.1">Virtual Private Networks</span></h2>
<p><span class="koboSpan" id="kobo.126.1">A </span><strong class="bold"><span class="koboSpan" id="kobo.127.1">Virtual Private Network</span></strong><span class="koboSpan" id="kobo.128.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.129.1">VPN</span></strong><span class="koboSpan" id="kobo.130.1">) is a secure connection over the internet </span><a id="_idIndexMarker071"/><span class="koboSpan" id="kobo.131.1">from a device to a network. </span><span class="koboSpan" id="kobo.131.2">By using secure</span><a id="_idIndexMarker072"/><span class="koboSpan" id="kobo.132.1"> encryption, data sent over a VPN is protected, preventing unauthorized tracking, protecting privacy, and </span><span class="No-Break"><span class="koboSpan" id="kobo.133.1">bypassing geo-restrictions.</span></span></p>
<p><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.134.1">Figure 2</span></em></span><em class="italic"><span class="koboSpan" id="kobo.135.1">.3</span></em><span class="koboSpan" id="kobo.136.1"> shows an example where a device connected to a LAN is communicating over the internet with another device through </span><span class="No-Break"><span class="koboSpan" id="kobo.137.1">a VPN.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer024">
<span class="koboSpan" id="kobo.138.1"><img alt="Figure 2.3 – A VPN example" src="image/Figure_02_03_B18203.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.139.1">Figure 2.3 – A VPN example</span></p>
<p><span class="koboSpan" id="kobo.140.1">In this section, you have been introduced to the fundamental principles of computer networking. </span><span class="koboSpan" id="kobo.140.2">You have explored how computer networks are structured and organized. </span><span class="koboSpan" id="kobo.140.3">In the following section, you will delve deeper into these topics to understand how devices communicate using rules and protocols, and how these rules guarantee the reliability and accuracy of the data that </span><span class="No-Break"><span class="koboSpan" id="kobo.141.1">is exchanged.</span></span></p>
<h1 id="_idParaDest-48"><a id="_idTextAnchor049"/><span class="koboSpan" id="kobo.142.1">Introducing network protocols</span></h1>
<p><span class="koboSpan" id="kobo.143.1">To manage communication</span><a id="_idIndexMarker073"/><span class="koboSpan" id="kobo.144.1"> between two or more computers, we need some rules that will dictate how data is sent and received, as well as security measures</span><a id="_idIndexMarker074"/><span class="koboSpan" id="kobo.145.1"> that need to be taken to ensure reliability. </span><span class="koboSpan" id="kobo.145.2">These rules are </span><span class="No-Break"><span class="koboSpan" id="kobo.146.1">called </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.147.1">protocols</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.148.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.149.1">Putting it simply, a protocol is like an international language: everyone needs to know the same words to communicate with one another. </span><span class="koboSpan" id="kobo.149.2">More specifically, a </span><strong class="bold"><span class="koboSpan" id="kobo.150.1">network protocol</span></strong><span class="koboSpan" id="kobo.151.1"> is a set of directives that rules how to </span><em class="italic"><span class="koboSpan" id="kobo.152.1">format</span></em><span class="koboSpan" id="kobo.153.1">, </span><em class="italic"><span class="koboSpan" id="kobo.154.1">transmit</span></em><span class="koboSpan" id="kobo.155.1">, and </span><em class="italic"><span class="koboSpan" id="kobo.156.1">receive</span></em><span class="koboSpan" id="kobo.157.1"> data so that devices in the same network </span><span class="No-Break"><span class="koboSpan" id="kobo.158.1">can interact.</span></span></p>
<p><span class="koboSpan" id="kobo.159.1">But before transmitting data over the network, it should be carefully packaged and structured so that the receiver can recognize and </span><span class="No-Break"><span class="koboSpan" id="kobo.160.1">reassemble it.</span></span></p>
<h2 id="_idParaDest-49"><a id="_idTextAnchor050"/><span class="koboSpan" id="kobo.161.1">Packet switching</span></h2>
<p><strong class="bold"><span class="koboSpan" id="kobo.162.1">Packet switching</span></strong><span class="koboSpan" id="kobo.163.1"> refers to the method of sending data to a network</span><a id="_idIndexMarker075"/><span class="koboSpan" id="kobo.164.1"> in the form of small</span><a id="_idIndexMarker076"/><span class="koboSpan" id="kobo.165.1"> portions (or </span><strong class="bold"><span class="koboSpan" id="kobo.166.1">packets</span></strong><span class="koboSpan" id="kobo.167.1">). </span><span class="koboSpan" id="kobo.167.2">This process involves dividing data into small segments and adding an extra portion of information about the packet’s content, origin, and destination. </span><span class="koboSpan" id="kobo.167.3">This extra information is called a </span><strong class="bold"><span class="koboSpan" id="kobo.168.1">header</span></strong><span class="koboSpan" id="kobo.169.1"> and is typically placed at the front</span><a id="_idIndexMarker077"/><span class="koboSpan" id="kobo.170.1"> of each packet. </span><span class="koboSpan" id="kobo.170.2">In some cases, the packet may also include</span><a id="_idIndexMarker078"/><span class="koboSpan" id="kobo.171.1"> additional information at its end, referred to as </span><span class="No-Break"><span class="koboSpan" id="kobo.172.1">a </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.173.1">footer</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.174.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.175.1">These packets are then sent over the network and reassembled at their destination. </span><span class="koboSpan" id="kobo.175.2">Along the way, they are processed by intermediate nodes, which can store incoming data and forward it to the next node closer to the </span><span class="No-Break"><span class="koboSpan" id="kobo.176.1">final receiver.</span></span></p>
<p><span class="koboSpan" id="kobo.177.1">Some of the advantages of using packet switching include efficiency in terms of bandwidth and reliability as the receiver can detect missing packages. </span><span class="koboSpan" id="kobo.177.2">Another advantage is cost-effectiveness due to relatively </span><span class="No-Break"><span class="koboSpan" id="kobo.178.1">cheap implementation.</span></span></p>
<p><span class="koboSpan" id="kobo.179.1">As an example, </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.180.1">Figure 2</span></em></span><em class="italic"><span class="koboSpan" id="kobo.181.1">.4</span></em><span class="koboSpan" id="kobo.182.1"> shows a </span><strong class="bold"><span class="koboSpan" id="kobo.183.1">Transmission Control Protocol</span></strong><span class="koboSpan" id="kobo.184.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.185.1">TCP</span></strong><span class="koboSpan" id="kobo.186.1">) packet composed of its header</span><a id="_idIndexMarker079"/><span class="koboSpan" id="kobo.187.1"> and </span><span class="No-Break"><span class="koboSpan" id="kobo.188.1">data sections:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.189.1">The header is made of blocks of bits, each one with its own meaning (as an example, the </span><em class="italic"><span class="koboSpan" id="kobo.190.1">header length</span></em><span class="koboSpan" id="kobo.191.1"> tells the header data offset in order to specify where actual data will start in </span><span class="No-Break"><span class="koboSpan" id="kobo.192.1">the </span></span><span class="No-Break"><span class="koboSpan" id="kobo.193.1">sequence)</span></span></li>
<li><span class="koboSpan" id="kobo.194.1">The data can be of varying lengths and holds the actual content included in </span><span class="No-Break"><span class="koboSpan" id="kobo.195.1">the packet</span></span></li>
</ul>
<div>
<div class="IMG---Figure" id="_idContainer025">
<span class="koboSpan" id="kobo.196.1"><img alt="Figure 2.4 – A TCP packet" src="image/Figure_02_04_B18203.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.197.1">Figure 2.4 – A TCP packet</span></p>
<p><span class="koboSpan" id="kobo.198.1">The collection of protocols</span><a id="_idIndexMarker080"/><span class="koboSpan" id="kobo.199.1"> that rule how data should</span><a id="_idIndexMarker081"/><span class="koboSpan" id="kobo.200.1"> be packaged and forwarded through the network is now known as the </span><strong class="bold"><span class="koboSpan" id="kobo.201.1">Internet Protocol Suite</span></strong><span class="koboSpan" id="kobo.202.1"> or the </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.203.1">TCP/IP suite</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.204.1">.</span></span></p>
<h2 id="_idParaDest-50"><a id="_idTextAnchor051"/><span class="koboSpan" id="kobo.205.1">TCP/IP suite</span></h2>
<p><span class="koboSpan" id="kobo.206.1">The TCP/IP suite</span><a id="_idIndexMarker082"/><span class="koboSpan" id="kobo.207.1"> is made of different logical levels, or </span><strong class="bold"><span class="koboSpan" id="kobo.208.1">layers</span></strong><span class="koboSpan" id="kobo.209.1">, that are stacked one above</span><a id="_idIndexMarker083"/><span class="koboSpan" id="kobo.210.1"> the other. </span><span class="koboSpan" id="kobo.210.2">These include </span><span class="No-Break"><span class="koboSpan" id="kobo.211.1">the following:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.212.1">The </span><span class="No-Break"><span class="koboSpan" id="kobo.213.1">application layer</span></span></li>
<li><span class="koboSpan" id="kobo.214.1">The </span><span class="No-Break"><span class="koboSpan" id="kobo.215.1">transport layer</span></span></li>
<li><span class="koboSpan" id="kobo.216.1">The </span><span class="No-Break"><span class="koboSpan" id="kobo.217.1">internet layer</span></span></li>
<li><span class="koboSpan" id="kobo.218.1">The data </span><span class="No-Break"><span class="koboSpan" id="kobo.219.1">link layer</span></span></li>
</ul>
<p><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.220.1">Figure 2</span></em></span><em class="italic"><span class="koboSpan" id="kobo.221.1">.5</span></em><span class="koboSpan" id="kobo.222.1"> shows the layers of the TCP/IP suite with some of the most commonly used protocols, along with the physical layer, which we will discuss later in </span><span class="No-Break"><span class="koboSpan" id="kobo.223.1">this section:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer026">
<span class="koboSpan" id="kobo.224.1"><img alt="Figure 2.5 – TCP/IP layers" src="image/Figure_02_05_B18203.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.225.1">Figure 2.5 – TCP/IP layers</span></p>
<p><span class="koboSpan" id="kobo.226.1">Each layer has an important role to play in supporting the needs of the one above it. </span><span class="koboSpan" id="kobo.226.2">As an example, this may involve accepting</span><a id="_idIndexMarker084"/><span class="koboSpan" id="kobo.227.1"> a block of data from the layer above, processing it according to the current </span><a id="_idIndexMarker085"/><span class="koboSpan" id="kobo.228.1">layer’s protocols, and then sending it to the </span><span class="No-Break"><span class="koboSpan" id="kobo.229.1">layer below.</span></span></p>
<p><span class="koboSpan" id="kobo.230.1">Let’s take a look at each of these </span><span class="No-Break"><span class="koboSpan" id="kobo.231.1">layers now.</span></span></p>
<h3><span class="koboSpan" id="kobo.232.1">The application layer</span></h3>
<p><span class="koboSpan" id="kobo.233.1">The </span><strong class="bold"><span class="koboSpan" id="kobo.234.1">application layer</span></strong><span class="koboSpan" id="kobo.235.1"> provides the interface for communication</span><a id="_idIndexMarker086"/><span class="koboSpan" id="kobo.236.1"> between applications</span><a id="_idIndexMarker087"/><span class="koboSpan" id="kobo.237.1"> running on different machines on the network. </span><span class="koboSpan" id="kobo.237.2">It stands at the very top of the TCP/IP suite </span><a id="_idIndexMarker088"/><span class="koboSpan" id="kobo.238.1">and allows the sharing of data through the use of protocols, such as the </span><strong class="bold"><span class="koboSpan" id="kobo.239.1">File Transfer Protocol</span></strong><span class="koboSpan" id="kobo.240.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.241.1">FTP</span></strong><span class="koboSpan" id="kobo.242.1">) and the </span><strong class="bold"><span class="koboSpan" id="kobo.243.1">HyperText Transfer Protocol</span></strong><span class="koboSpan" id="kobo.244.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.245.1">HTTP</span></strong><span class="koboSpan" id="kobo.246.1">), which are used to upload files to the internet</span><a id="_idIndexMarker089"/><span class="koboSpan" id="kobo.247.1"> and download web pages on your </span><span class="No-Break"><span class="koboSpan" id="kobo.248.1">favorite browser.</span></span></p>
<h3><span class="koboSpan" id="kobo.249.1">The transport layer</span></h3>
<p><span class="koboSpan" id="kobo.250.1">The </span><strong class="bold"><span class="koboSpan" id="kobo.251.1">transport layer</span></strong><span class="koboSpan" id="kobo.252.1"> is responsible for providing reliable data delivery </span><a id="_idIndexMarker090"/><span class="koboSpan" id="kobo.253.1">and flow control and provides</span><a id="_idIndexMarker091"/><span class="koboSpan" id="kobo.254.1"> services that allow applications to communicate securely over </span><span class="No-Break"><span class="koboSpan" id="kobo.255.1">the network.</span></span></p>
<p><span class="koboSpan" id="kobo.256.1">While TCP is commonly used for its reliability, there are situations where other protocols</span><a id="_idIndexMarker092"/><span class="koboSpan" id="kobo.257.1"> are preferred for their speed, such as the </span><strong class="bold"><span class="koboSpan" id="kobo.258.1">User Data Protocol</span></strong><span class="koboSpan" id="kobo.259.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.260.1">UDP</span></strong><span class="koboSpan" id="kobo.261.1">), which won’t ensure packet delivery but will be faster as it doesn’t require the overheads associated with establishing and maintaining </span><span class="No-Break"><span class="koboSpan" id="kobo.262.1">a connection.</span></span></p>
<p><span class="koboSpan" id="kobo.263.1">This layer is typically responsible for detecting issues and verifying</span><a id="_idIndexMarker093"/><span class="koboSpan" id="kobo.264.1"> data integrity; one way is through </span><strong class="bold"><span class="koboSpan" id="kobo.265.1">checksums</span></strong><span class="koboSpan" id="kobo.266.1">, or sequences of numbers and letters</span><a id="_idIndexMarker094"/><span class="koboSpan" id="kobo.267.1"> used to check</span><a id="_idIndexMarker095"/><span class="koboSpan" id="kobo.268.1"> data </span><span class="No-Break"><span class="koboSpan" id="kobo.269.1">for errors.</span></span></p>
<h3><span class="koboSpan" id="kobo.270.1">The internet layer</span></h3>
<p><span class="koboSpan" id="kobo.271.1">The </span><strong class="bold"><span class="koboSpan" id="kobo.272.1">internet layer</span></strong><span class="koboSpan" id="kobo.273.1"> (or, more generically, the </span><strong class="bold"><span class="koboSpan" id="kobo.274.1">network layer</span></strong><span class="koboSpan" id="kobo.275.1"> in the TCP/IP suite) is responsible</span><a id="_idIndexMarker096"/><span class="koboSpan" id="kobo.276.1"> for providing the means</span><a id="_idIndexMarker097"/><span class="koboSpan" id="kobo.277.1"> to route data between</span><a id="_idIndexMarker098"/><span class="koboSpan" id="kobo.278.1"> different networks and ensure that packets are delivered correctly. </span><span class="koboSpan" id="kobo.278.2">This layer also provides various services such as addressing, routing, congestion control, and </span><span class="No-Break"><span class="koboSpan" id="kobo.279.1">flow control.</span></span></p>
<p><span class="koboSpan" id="kobo.280.1">The internet layer is responsible for providing a logical addressing system that allows hosts to be easily replaced, groups of hosts to be organized into subnets, and distant subnets to be able to communicate with </span><span class="No-Break"><span class="koboSpan" id="kobo.281.1">one another.</span></span></p>
<p><span class="koboSpan" id="kobo.282.1">The most common</span><a id="_idIndexMarker099"/><span class="koboSpan" id="kobo.283.1"> protocol used to implement these features is </span><strong class="bold"><span class="koboSpan" id="kobo.284.1">Internet Protocol Version 4</span></strong><span class="koboSpan" id="kobo.285.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.286.1">IPv4</span></strong><span class="koboSpan" id="kobo.287.1">), which is a 32-bit address that identifies a device on a network. </span><span class="koboSpan" id="kobo.287.2">The most recent release, </span><strong class="bold"><span class="koboSpan" id="kobo.288.1">Internet Protocol Version 6 </span></strong><span class="koboSpan" id="kobo.289.1">(</span><strong class="bold"><span class="koboSpan" id="kobo.290.1">IPv6</span></strong><span class="koboSpan" id="kobo.291.1">), is based on a 128-bit address and is designed to replace IPv4, as that </span><a id="_idIndexMarker100"/><span class="koboSpan" id="kobo.292.1">one is running out of </span><span class="No-Break"><span class="koboSpan" id="kobo.293.1">available addresses.</span></span></p>
<h3><span class="koboSpan" id="kobo.294.1">The data link layer</span></h3>
<p><span class="koboSpan" id="kobo.295.1">The </span><strong class="bold"><span class="koboSpan" id="kobo.296.1">data link layer</span></strong><span class="koboSpan" id="kobo.297.1"> is responsible for providing a method</span><a id="_idIndexMarker101"/><span class="koboSpan" id="kobo.298.1"> for communication between physically</span><a id="_idIndexMarker102"/><span class="koboSpan" id="kobo.299.1"> connected hosts. </span><span class="koboSpan" id="kobo.299.2">This means this layer must provide a method through which a source host can package up information and transmit it through the </span><span class="No-Break"><span class="koboSpan" id="kobo.300.1">physical layer.</span></span></p>
<p><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.301.1">Figure 2</span></em></span><em class="italic"><span class="koboSpan" id="kobo.302.1">.6</span></em><span class="koboSpan" id="kobo.303.1"> depicts a typical communication flow between two devices, a client and a server, and the data passing through the </span><span class="No-Break"><span class="koboSpan" id="kobo.304.1">different layers:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer027">
<span class="koboSpan" id="kobo.305.1"><img alt="Figure 2.6 – The communication between a client and a server" src="image/Figure_02_06_B18203.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.306.1">Figure 2.6 – The communication between a client and a server</span></p>
<h3><span class="koboSpan" id="kobo.307.1">The physical layer</span></h3>
<p><span class="koboSpan" id="kobo.308.1">Underneath</span><a id="_idIndexMarker103"/><span class="koboSpan" id="kobo.309.1"> all of the previous layers is the </span><strong class="bold"><span class="koboSpan" id="kobo.310.1">physical layer</span></strong><span class="koboSpan" id="kobo.311.1">, which is responsible for actually</span><a id="_idIndexMarker104"/><span class="koboSpan" id="kobo.312.1"> sending raw data (bits) over a physical medium, such as a cable, an optical fiber, a Wi-Fi connection, or even a </span><span class="No-Break"><span class="koboSpan" id="kobo.313.1">Bluetooth communication.</span></span></p>
<p><span class="koboSpan" id="kobo.314.1">This layer defines how signals are sent and received, as well as how these signals are modulated and demodulated into usable </span><span class="No-Break"><span class="koboSpan" id="kobo.315.1">digital information.</span></span></p>
<p><span class="koboSpan" id="kobo.316.1">Though we have discussed the physical layer here, it is not actually included in the TCP/IP suite, which is why it is slightly separated from the other layers shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.317.1">Figure 2</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.318.1">.5</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.319.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.320.1">Now that you know how data is packaged and how the TCP/IP suite is organized, you will learn about the main problems and pitfalls that can happen over the network in the </span><span class="No-Break"><span class="koboSpan" id="kobo.321.1">next section.</span></span></p>
<h1 id="_idParaDest-51"><a id="_idTextAnchor052"/><span class="koboSpan" id="kobo.322.1">Understanding network issues</span></h1>
<p><span class="koboSpan" id="kobo.323.1">With so much data involved</span><a id="_idIndexMarker105"/><span class="koboSpan" id="kobo.324.1"> and moving around physical media, there is a significant risk of running into serious issues. </span><span class="koboSpan" id="kobo.324.2">As such, it is important to be aware of these potential problems and how to best avoid them or limit </span><span class="No-Break"><span class="koboSpan" id="kobo.325.1">their impact.</span></span></p>
<h2 id="_idParaDest-52"><a id="_idTextAnchor053"/><span class="koboSpan" id="kobo.326.1">Security</span></h2>
<p><span class="koboSpan" id="kobo.327.1">The first issue </span><a id="_idIndexMarker106"/><span class="koboSpan" id="kobo.328.1">to consider when dealing with computer networking is </span><strong class="bold"><span class="koboSpan" id="kobo.329.1">security</span></strong><span class="koboSpan" id="kobo.330.1">. </span><span class="koboSpan" id="kobo.330.2">Without proper security protocols</span><a id="_idIndexMarker107"/><span class="koboSpan" id="kobo.331.1"> in place, it’s possible for malicious people to gain access to </span><span class="No-Break"><span class="koboSpan" id="kobo.332.1">sensitive information.</span></span></p>
<p><span class="koboSpan" id="kobo.333.1">Getting your credit card information stolen while in-app purchasing the latest skin for your character or your login credentials stolen from your Steam account is something you definitely don’t want </span><span class="No-Break"><span class="koboSpan" id="kobo.334.1">to experience!</span></span></p>
<h2 id="_idParaDest-53"><a id="_idTextAnchor054"/><span class="koboSpan" id="kobo.335.1">Packet loss</span></h2>
<p><strong class="bold"><span class="koboSpan" id="kobo.336.1">Packet loss</span></strong><span class="koboSpan" id="kobo.337.1"> occurs when data packets sent from one device</span><a id="_idIndexMarker108"/><span class="koboSpan" id="kobo.338.1"> to another are lost or corrupted </span><a id="_idIndexMarker109"/><span class="koboSpan" id="kobo.339.1">and is a major issue that can cause significant disruption to any network. </span><span class="koboSpan" id="kobo.339.2">This type of disruption can lead to a slow or even complete breakdown in communication, resulting in a negative gaming experience </span><span class="No-Break"><span class="koboSpan" id="kobo.340.1">for players.</span></span></p>
<p><span class="koboSpan" id="kobo.341.1">Consider, for instance, if your perfect shoot at a berserker opponent who is trying to leap at you is lost over the network: you would be in a great deal of trouble at </span><span class="No-Break"><span class="koboSpan" id="kobo.342.1">that moment!</span></span></p>
<h2 id="_idParaDest-54"><a id="_idTextAnchor055"/><span class="koboSpan" id="kobo.343.1">Latency</span></h2>
<p><strong class="bold"><span class="koboSpan" id="kobo.344.1">Latency</span></strong><span class="koboSpan" id="kobo.345.1"> in computer networking is represented </span><a id="_idIndexMarker110"/><span class="koboSpan" id="kobo.346.1">by the time it takes for a data packet</span><a id="_idIndexMarker111"/><span class="koboSpan" id="kobo.347.1"> to travel from one designated point to its destination and is usually measured in milliseconds. </span><span class="koboSpan" id="kobo.347.2">This can be caused by a variety of factors, such as slow internet connections, outdated hardware, or </span><span class="No-Break"><span class="koboSpan" id="kobo.348.1">congested networks.</span></span></p>
<p><span class="koboSpan" id="kobo.349.1">In a multiplayer game, latency should be kept as low as possible as it can have a significant impact on the performance of the game you are playing. </span><span class="koboSpan" id="kobo.349.2">As an example, in a first-person shooter game where fast reflexes are essential, having your character killed due to a slow connection can ruin all </span><span class="No-Break"><span class="koboSpan" id="kobo.350.1">the fun!</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.351.1">Note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.352.1">While dealing with security and data loss are not topics discussed in this book, you’ll learn about latency and how to handle it in </span><em class="italic"><span class="koboSpan" id="kobo.353.1">Part 4</span></em><span class="koboSpan" id="kobo.354.1"> of this book. </span><span class="koboSpan" id="kobo.354.2">However, if you are interested in delving deeper</span><a id="_idIndexMarker112"/><span class="koboSpan" id="kobo.355.1"> into the topics of network security and data loss, Packt offers an extensive collection</span><a id="_idIndexMarker113"/><span class="koboSpan" id="kobo.356.1"> of books on </span><span class="No-Break"><span class="koboSpan" id="kobo.357.1">the subject.</span></span></p>
<p><span class="koboSpan" id="kobo.358.1">Now that you have a basic grip on the main issues when managing data over the network, it’s time to move into Unreal Engine and get an introduction to how this software </span><span class="No-Break"><span class="koboSpan" id="kobo.359.1">handles networking.</span></span></p>
<h1 id="_idParaDest-55"><a id="_idTextAnchor056"/><span class="koboSpan" id="kobo.360.1">Introducing the Unreal Engine multiplayer system</span></h1>
<p><span class="koboSpan" id="kobo.361.1">As we already saw in the previous sections, in a networked system, it is essential to consider what data is sent and how it is sent, as this can drastically influence the performance and overall experience of </span><span class="No-Break"><span class="koboSpan" id="kobo.362.1">the game.</span></span></p>
<p><span class="koboSpan" id="kobo.363.1">Unreal Engine features a powerful networking framework, which is used in some of the most popular online games in the world. </span><span class="koboSpan" id="kobo.363.2">This section provides an overview of the concepts that power the Unreal Engine multiplayer framework, as well as their usage in </span><span class="No-Break"><span class="koboSpan" id="kobo.364.1">multiplayer gameplay.</span></span></p>
<h2 id="_idParaDest-56"><a id="_idTextAnchor057"/><span class="koboSpan" id="kobo.365.1">Network modes and server types</span></h2>
<p><span class="koboSpan" id="kobo.366.1">In Unreal Engine, a computer’s relationship</span><a id="_idIndexMarker114"/><span class="koboSpan" id="kobo.367.1"> to a multiplayer session is referred to as a </span><strong class="bold"><span class="koboSpan" id="kobo.368.1">network mode</span></strong><span class="koboSpan" id="kobo.369.1">. </span><span class="koboSpan" id="kobo.369.2">An Unreal game </span><a id="_idIndexMarker115"/><span class="koboSpan" id="kobo.370.1">can be set as one</span><a id="_idIndexMarker116"/><span class="koboSpan" id="kobo.371.1"> of the following </span><span class="No-Break"><span class="koboSpan" id="kobo.372.1">network modes:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.373.1">Client</span></strong><span class="koboSpan" id="kobo.374.1">: In this mode, the computer will act as a client, connecting to a server in a network </span><span class="No-Break"><span class="koboSpan" id="kobo.375.1">multiplayer session.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.376.1">Standalone</span></strong><span class="koboSpan" id="kobo.377.1">: This mode is strictly used for non-networked games (single players or local multiplayer) and will not accept any connections from </span><span class="No-Break"><span class="koboSpan" id="kobo.378.1">remote clients.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.379.1">Dedicated Server</span></strong><span class="koboSpan" id="kobo.380.1">: In this mode, the computer will run as a server hosting a network multiplayer session and will accept connections from remote clients. </span><span class="koboSpan" id="kobo.380.2">As a dedicated server, everything will be optimized for persistent and secure management, so will ignore any player-oriented features, such as graphics, audio, </span><span class="No-Break"><span class="koboSpan" id="kobo.381.1">or input.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.382.1">Listen Server</span></strong><span class="koboSpan" id="kobo.383.1">: In this mode, the computer will run as a server accepting remote clients, but also local players. </span><span class="koboSpan" id="kobo.383.2">This means it will sacrifice some performance, but will allow a computer to act both as a server and as a client. </span><span class="koboSpan" id="kobo.383.3">This mode</span><a id="_idIndexMarker117"/><span class="koboSpan" id="kobo.384.1"> can be thought of as a combination of the client and dedicated server modes, allowing you to participate in a game</span><a id="_idIndexMarker118"/><span class="koboSpan" id="kobo.385.1"> as a client while simultaneously</span><a id="_idIndexMarker119"/><span class="koboSpan" id="kobo.386.1"> hosting </span><span class="No-Break"><span class="koboSpan" id="kobo.387.1">the network.</span></span></li>
</ul>
<p class="callout-heading"><span class="koboSpan" id="kobo.388.1">Note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.389.1">Listen servers have gained popularity due to their ease of setup and ability to provide both casual and competitive multiplayer gaming in a LAN. </span><span class="koboSpan" id="kobo.389.2">As players hosting the session will be playing directly on the server, they will usually have an advantage over the other players. </span><span class="koboSpan" id="kobo.389.3">However, as servers are also run as clients, they are not suitable for highly competitive games or games with a large amount of data involved. </span><span class="koboSpan" id="kobo.389.4">Additionally, listen servers, which allow a client to host a game and have other clients join to play, create potential vulnerabilities for all clients on the network. </span><span class="koboSpan" id="kobo.389.5">This is because the client hosting the network may engage in malicious actions, such as cheating or granting themselves an unfair advantage over </span><span class="No-Break"><span class="koboSpan" id="kobo.390.1">other players.</span></span></p>
<h2 id="_idParaDest-57"><a id="_idTextAnchor058"/><span class="koboSpan" id="kobo.391.1">The replication system</span></h2>
<p><span class="koboSpan" id="kobo.392.1">In UE, the process</span><a id="_idIndexMarker120"/><span class="koboSpan" id="kobo.393.1"> of reproducing game state</span><a id="_idIndexMarker121"/><span class="koboSpan" id="kobo.394.1"> information between the server and clients is called </span><strong class="bold"><span class="koboSpan" id="kobo.395.1">replication</span></strong><span class="koboSpan" id="kobo.396.1">. </span><span class="koboSpan" id="kobo.396.2">The replication system allows for high-level abstraction and low-level customization, making it simpler to manage any scenarios that may arise when creating an Unreal Engine project intended for multiple users </span><span class="No-Break"><span class="koboSpan" id="kobo.397.1">at once.</span></span></p>
<p><span class="koboSpan" id="kobo.398.1">If replication is enabled on an Actor, all instances of the game running on different machines will be synchronized. </span><span class="koboSpan" id="kobo.398.2">On the other hand, if replication is disabled, the Actor will only update its functions on the machine where it </span><span class="No-Break"><span class="koboSpan" id="kobo.399.1">was spawned.</span></span></p>
<p><span class="koboSpan" id="kobo.400.1">Some of the most common elements that you will probably replicate during a multiplayer game development may be creation/destruction, movement, variables, </span><span class="No-Break"><span class="koboSpan" id="kobo.401.1">and components.</span></span></p>
<p><span class="koboSpan" id="kobo.402.1">There are, however, other elements</span><a id="_idIndexMarker122"/><span class="koboSpan" id="kobo.403.1"> that should not be replicated at all as they will be running separately on the client, such as skeletal and static meshes, materials, particle systems, and sound</span><a id="_idIndexMarker123"/><span class="koboSpan" id="kobo.404.1"> emitters. </span><span class="koboSpan" id="kobo.404.2">Usually, the server does not need to know about these kinds of things, considering the nature of these elements (i.e., </span><span class="No-Break"><span class="koboSpan" id="kobo.405.1">purely aesthetical).</span></span></p>
<h2 id="_idParaDest-58"><a id="_idTextAnchor059"/><span class="koboSpan" id="kobo.406.1">Network role</span></h2>
<p><span class="koboSpan" id="kobo.407.1">When playing</span><a id="_idIndexMarker124"/><span class="koboSpan" id="kobo.408.1"> a game online with multiple players, it is important to understand which device is in control of each Actor. </span><span class="koboSpan" id="kobo.408.2">This is determined by the network role of the </span><span class="No-Break"><span class="koboSpan" id="kobo.409.1">Actor itself.</span></span></p>
<p><span class="koboSpan" id="kobo.410.1">The device with an </span><strong class="bold"><span class="koboSpan" id="kobo.411.1">authoritative</span></strong><span class="koboSpan" id="kobo.412.1"> Actor role is the one that has</span><a id="_idIndexMarker125"/><span class="koboSpan" id="kobo.413.1"> control of the Actor’s state, and it is responsible for replicating information about the Actor to other players in </span><span class="No-Break"><span class="koboSpan" id="kobo.414.1">real time.</span></span></p>
<p><span class="koboSpan" id="kobo.415.1">A copy of the same Actor</span><a id="_idIndexMarker126"/><span class="koboSpan" id="kobo.416.1"> located on a remote machine that is not authoritative is defined as a </span><strong class="bold"><span class="koboSpan" id="kobo.417.1">remote proxy</span></strong><span class="koboSpan" id="kobo.418.1"> and will receive all replicated information from the </span><span class="No-Break"><span class="koboSpan" id="kobo.419.1">authoritative one.</span></span></p>
<p><span class="koboSpan" id="kobo.420.1">In UE, the authority is typically held</span><a id="_idIndexMarker127"/><span class="koboSpan" id="kobo.421.1"> by the server, meaning that information is usually </span><em class="italic"><span class="koboSpan" id="kobo.422.1">from</span></em><span class="koboSpan" id="kobo.423.1"> the server </span><em class="italic"><span class="koboSpan" id="kobo.424.1">to</span></em><span class="koboSpan" id="kobo.425.1"> the clients. </span><span class="koboSpan" id="kobo.425.2">This model is known </span><span class="No-Break"><span class="koboSpan" id="kobo.426.1">as </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.427.1">server-authoritative</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.428.1">.</span></span></p>
<h2 id="_idParaDest-59"><a id="_idTextAnchor060"/><span class="koboSpan" id="kobo.429.1">Pawns and PlayerControllers</span></h2>
<p><span class="koboSpan" id="kobo.430.1">As you may already</span><a id="_idIndexMarker128"/><span class="koboSpan" id="kobo.431.1"> know, in UE, a Pawn (or, more often, a Character) can be owned</span><a id="_idIndexMarker129"/><span class="koboSpan" id="kobo.432.1"> by a PlayerController. </span><span class="koboSpan" id="kobo.432.2">This is also true for multiplayer games, where a PlayerController is created for each </span><span class="No-Break"><span class="koboSpan" id="kobo.433.1">connected player.</span></span></p>
<p><span class="koboSpan" id="kobo.434.1">During gameplay, any Actor that has been assigned to a particular Pawn is automatically associated with that Pawn’s owning client. </span><span class="koboSpan" id="kobo.434.2">As an example, a Pawn may possess an item such as a rifle or a sword Actor, and this item will be held owned by the same connection</span><a id="_idIndexMarker130"/><span class="koboSpan" id="kobo.435.1"> that owns</span><a id="_idIndexMarker131"/> <span class="No-Break"><span class="koboSpan" id="kobo.436.1">the Pawn.</span></span></p>
<h2 id="_idParaDest-60"><a id="_idTextAnchor061"/><span class="koboSpan" id="kobo.437.1">Relevance and priority</span></h2>
<p><span class="koboSpan" id="kobo.438.1">To determine </span><a id="_idIndexMarker132"/><span class="koboSpan" id="kobo.439.1">whether it is beneficial to replicate an Actor during a multiplayer game, </span><strong class="bold"><span class="koboSpan" id="kobo.440.1">relevance</span></strong><span class="koboSpan" id="kobo.441.1"> is taken into account. </span><span class="koboSpan" id="kobo.441.2">Actors that are deemed not relevant will be excluded during replication. </span><span class="koboSpan" id="kobo.441.3">This method is used to reduce the amount of data that is sent over the network, thereby increasing the efficiency of </span><span class="No-Break"><span class="koboSpan" id="kobo.442.1">data replication.</span></span></p>
<p><span class="koboSpan" id="kobo.443.1">When bandwidth is limited, the most</span><a id="_idIndexMarker133"/><span class="koboSpan" id="kobo.444.1"> important Actors are selected first when replicating data. </span><span class="koboSpan" id="kobo.444.2">Each Actor has an assigned </span><strong class="bold"><span class="koboSpan" id="kobo.445.1">priority</span></strong><span class="koboSpan" id="kobo.446.1"> value, which is used to determine the order </span><span class="No-Break"><span class="koboSpan" id="kobo.447.1">of replication.</span></span></p>
<h2 id="_idParaDest-61"><a id="_idTextAnchor062"/><span class="koboSpan" id="kobo.448.1">Remote Procedure Calls</span></h2>
<p><span class="koboSpan" id="kobo.449.1">During a multiplayer</span><a id="_idIndexMarker134"/><span class="koboSpan" id="kobo.450.1"> session, a function can be replicated through a </span><strong class="bold"><span class="koboSpan" id="kobo.451.1">Remote Procedure Call</span></strong><span class="koboSpan" id="kobo.452.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.453.1">RPC</span></strong><span class="koboSpan" id="kobo.454.1">). </span><span class="koboSpan" id="kobo.454.2">RPCs can be invoked from any machine</span><a id="_idIndexMarker135"/><span class="koboSpan" id="kobo.455.1"> connected to the network, but their implementation will take place on a particular machine that is part of the </span><span class="No-Break"><span class="koboSpan" id="kobo.456.1">network session.</span></span></p>
<p><span class="koboSpan" id="kobo.457.1">An RPC can be sent from the server, the client, or to multiple clients (</span><strong class="bold"><span class="koboSpan" id="kobo.458.1">multicast</span></strong><span class="koboSpan" id="kobo.459.1">). </span><span class="koboSpan" id="kobo.459.2">An RPC can either be guaranteed to reach its destination (</span><strong class="bold"><span class="koboSpan" id="kobo.460.1">reliable</span></strong><span class="koboSpan" id="kobo.461.1">) or </span><span class="No-Break"><span class="koboSpan" id="kobo.462.1">not (</span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.463.1">unreliable</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.464.1">).</span></span></p>
<p><span class="koboSpan" id="kobo.465.1">In this section, I provided some of the key definitions regarding the UE multiplayer system. </span><span class="koboSpan" id="kobo.465.2">The information here may seem quite dense and things may seem a bit overwhelming. </span><span class="koboSpan" id="kobo.465.3">But don’t be afraid – you just finished the second chapter and the entire book is available to help you learn </span><span class="No-Break"><span class="koboSpan" id="kobo.466.1">it all!</span></span></p>
<h1 id="_idParaDest-62"><a id="_idTextAnchor063"/><span class="koboSpan" id="kobo.467.1">Summary</span></h1>
<p><span class="koboSpan" id="kobo.468.1">In this chapter, you learned about the fundamental concepts of computer networking and the key players involved in successful network communication. </span><span class="koboSpan" id="kobo.468.2">Additionally, you were introduced to the Internet Protocol and the layers that make up the TCP/IP suite with the main issues that may arise during a network connection. </span><span class="koboSpan" id="kobo.468.3">Finally, you were presented with the Unreal multiplayer system and the key features offered by </span><span class="No-Break"><span class="koboSpan" id="kobo.469.1">the framework.</span></span></p>
<p><span class="koboSpan" id="kobo.470.1">In the next chapter, you will start to gain practical experience with UE by building a prototype of a multiplayer game and testing its features on </span><span class="No-Break"><span class="koboSpan" id="kobo.471.1">your computer.</span></span></p>
<h1 id="_idParaDest-63"><a id="_idTextAnchor064"/><span class="koboSpan" id="kobo.472.1">Credits</span></h1>
<p><span class="koboSpan" id="kobo.473.1">The diagrams in this chapter were created with the help of </span><em class="italic"><span class="koboSpan" id="kobo.474.1">Made Lineal</span></em><span class="koboSpan" id="kobo.475.1"> icons from </span><span class="No-Break"><span class="koboSpan" id="kobo.476.1">Flaticon (</span></span><a href="https://www.flaticon.com/"><span class="No-Break"><span class="koboSpan" id="kobo.477.1">https://www.flaticon.com/</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.478.1">).</span></span></p>
</div>
</body></html>