<html><head></head><body>
<div id="_idContainer126">
<h1 class="chapter-number" id="_idParaDest-141"><a id="_idTextAnchor141"/><span class="koboSpan" id="kobo.1.1">7</span></h1>
<h1 id="_idParaDest-142"><a id="_idTextAnchor142"/><span class="koboSpan" id="kobo.2.1">Enabling Communication between Different Devices</span></h1>
<p><span class="koboSpan" id="kobo.3.1">This</span><a id="_idIndexMarker553"/><span class="koboSpan" id="kobo.4.1"> chapter is dedicated to </span><strong class="bold"><span class="koboSpan" id="kobo.5.1">thing-to-thing communication</span></strong><span class="koboSpan" id="kobo.6.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.7.1">TTC</span></strong><span class="koboSpan" id="kobo.8.1">), which is a very important concept and requirement in the field of</span><a id="_idIndexMarker554"/><span class="koboSpan" id="kobo.9.1"> the </span><strong class="bold"><span class="koboSpan" id="kobo.10.1">Internet of Things</span></strong><span class="koboSpan" id="kobo.11.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.12.1">IoT</span></strong><span class="koboSpan" id="kobo.13.1">). </span><span class="koboSpan" id="kobo.13.2">You can also call it </span><strong class="bold"><span class="koboSpan" id="kobo.14.1">Device-to-Device</span></strong><span class="koboSpan" id="kobo.15.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.16.1">D2D</span></strong><span class="koboSpan" id="kobo.17.1">) communication. </span><span class="koboSpan" id="kobo.17.2">D2D </span><a id="_idIndexMarker555"/><span class="koboSpan" id="kobo.18.1">communication plays a vital role in complex systems where one device’s operations are totally dependent on another device. </span><span class="koboSpan" id="kobo.18.2">For example, say you want to control your room’s AC according to outdoor weather conditions; here, D2D communication plays a vital role by sending the outdoor temperature to the room’s AC controller device so it knows whether it needs to cool or heat the room according to the </span><span class="No-Break"><span class="koboSpan" id="kobo.19.1">weather outside.</span></span></p>
<p><span class="koboSpan" id="kobo.20.1">Arduino IoT Cloud</span><a id="_idIndexMarker556"/><span class="koboSpan" id="kobo.21.1"> provides a cloud variable synchronization feature across multiple things, as well as for dashboards, which helps us to build complex systems easily. </span><span class="koboSpan" id="kobo.21.2">This chapter explains the usage of the synchronization feature for the implementation of</span><a id="_idIndexMarker557"/><span class="koboSpan" id="kobo.22.1"> cloud </span><strong class="bold"><span class="koboSpan" id="kobo.23.1">graphical user interfaces</span></strong><span class="koboSpan" id="kobo.24.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.25.1">GUIs</span></strong><span class="koboSpan" id="kobo.26.1">) and D2D </span><span class="No-Break"><span class="koboSpan" id="kobo.27.1">communication purposes.</span></span></p>
<p><span class="koboSpan" id="kobo.28.1">In this chapter, you will learn how to sync a cloud variable across things using the GUI without writing any complex code. </span><span class="koboSpan" id="kobo.28.2">This chapter will help you set up communication between things with just a couple of clicks without writing any lengthy code. </span><span class="koboSpan" id="kobo.28.3">It will also help you to develop solutions that are totally dependent upon other device’s sensor data. </span><span class="koboSpan" id="kobo.28.4">You will also learn how to create a single dashboard for multiple things so you can display their readings in one place, which helps the user monitor everything from one display without navigating to </span><span class="No-Break"><span class="koboSpan" id="kobo.29.1">other dashboards.</span></span></p>
<p><span class="koboSpan" id="kobo.30.1">In this chapter, we’re going to cover the following </span><span class="No-Break"><span class="koboSpan" id="kobo.31.1">main topics:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.32.1">What is D2D communication in the </span><span class="No-Break"><span class="koboSpan" id="kobo.33.1">IoT cloud?</span></span></li>
<li><span class="koboSpan" id="kobo.34.1">The benefits of Arduino IoT Cloud </span><span class="No-Break"><span class="koboSpan" id="kobo.35.1">thing-to-thing communication</span></span></li>
<li><span class="koboSpan" id="kobo.36.1">Hardware components – sensors and </span><span class="No-Break"><span class="koboSpan" id="kobo.37.1">development boards</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.38.1">Project architecture</span></span></li>
<li><span class="koboSpan" id="kobo.39.1">Setting up </span><span class="No-Break"><span class="koboSpan" id="kobo.40.1">a Thing</span></span></li>
<li><span class="koboSpan" id="kobo.41.1">Implementation of GUIs using synchronized </span><span class="No-Break"><span class="koboSpan" id="kobo.42.1">cloud variables</span></span></li>
<li><span class="koboSpan" id="kobo.43.1">Limitations of cloud </span><span class="No-Break"><span class="koboSpan" id="kobo.44.1">variable/property synchronization</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.45.1">What next?</span></span></li>
</ul>
<h1 id="_idParaDest-143"><a id="_idTextAnchor143"/><span class="koboSpan" id="kobo.46.1">Technical requirements</span></h1>
<p><span class="koboSpan" id="kobo.47.1">The following are required to complete this </span><span class="No-Break"><span class="koboSpan" id="kobo.48.1">chapter’s exercise:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.49.1">Complete </span><a href="B19752_04.xhtml#_idTextAnchor085"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.50.1">Chapter 4</span></em></span></a><span class="koboSpan" id="kobo.51.1"> of </span><span class="No-Break"><span class="koboSpan" id="kobo.52.1">this book</span></span></li>
<li><span class="koboSpan" id="kobo.53.1">MKR </span><span class="No-Break"><span class="koboSpan" id="kobo.54.1">Wi-Fi 1010</span></span></li>
<li><span class="koboSpan" id="kobo.55.1">1x 5 mm red LED and 1x 5 mm </span><span class="No-Break"><span class="koboSpan" id="kobo.56.1">green LED</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.57.1">A breadboard</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.58.1">Jumper cables</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.59.1">We will use the </span><strong class="bold"><span class="koboSpan" id="kobo.60.1">Arduino Web Editor</span></strong><span class="koboSpan" id="kobo.61.1"> for</span><a id="_idIndexMarker558"/><span class="koboSpan" id="kobo.62.1"> coding, which includes a large collection of development boards and sensor libraries, and </span><strong class="bold"><span class="koboSpan" id="kobo.63.1">Arduino IoT Cloud</span></strong><span class="koboSpan" id="kobo.64.1"> for</span><a id="_idIndexMarker559"/><span class="koboSpan" id="kobo.65.1"> thing and dashboard setup. </span><span class="koboSpan" id="kobo.65.2">The chapter code is available in the official book GitHub repository by following this </span><span class="No-Break"><span class="koboSpan" id="kobo.66.1">link: </span></span><a href="https://github.com/PacktPublishing/Arduino-IoT-Cloud-for-Developers"><span class="No-Break"><span class="koboSpan" id="kobo.67.1">https://github.com/PacktPublishing/Arduino-IoT-Cloud-for-Developers</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.68.1">.</span></span></p>
<h1 id="_idParaDest-144"><a id="_idTextAnchor144"/><span class="koboSpan" id="kobo.69.1">What is D2D communication in the IoT cloud?</span></h1>
<p><span class="koboSpan" id="kobo.70.1">D2D communication </span><a id="_idIndexMarker560"/><span class="koboSpan" id="kobo.71.1">in the context of IoT and the IoT cloud refers to the ability of IoT devices to directly exchange data or information with each other without relying on a central server or cloud-based service as an intermediary. </span><span class="koboSpan" id="kobo.71.2">This form of communication is also known as </span><strong class="bold"><span class="koboSpan" id="kobo.72.1">Peer-to-Peer</span></strong><span class="koboSpan" id="kobo.73.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.74.1">P2P</span></strong><span class="koboSpan" id="kobo.75.1">) communication</span><a id="_idIndexMarker561"/><span class="koboSpan" id="kobo.76.1"> among </span><span class="No-Break"><span class="koboSpan" id="kobo.77.1">IoT devices.</span></span></p>
<p><span class="koboSpan" id="kobo.78.1">Here are some key points to understand about D2D communication in the </span><span class="No-Break"><span class="koboSpan" id="kobo.79.1">IoT cloud:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.80.1">Direct communication</span></strong><span class="koboSpan" id="kobo.81.1">: In </span><a id="_idIndexMarker562"/><span class="koboSpan" id="kobo.82.1">traditional IoT architectures, devices send data to a cloud platform, where it is processed and potentially shared with other devices. </span><span class="koboSpan" id="kobo.82.2">D2D communication allows devices to talk to each other directly, bypassing the cloud </span><span class="No-Break"><span class="koboSpan" id="kobo.83.1">when necessary.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.84.1">Low latency</span></strong><span class="koboSpan" id="kobo.85.1">: D2D </span><a id="_idIndexMarker563"/><span class="koboSpan" id="kobo.86.1">communication can reduce latency because data doesn’t have to travel to a remote server and back. </span><span class="koboSpan" id="kobo.86.2">This is crucial in applications where real-time or near-real-time responses are required, such as in industrial automation or </span><span class="No-Break"><span class="koboSpan" id="kobo.87.1">connected vehicles.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.88.1">Efficiency</span></strong><span class="koboSpan" id="kobo.89.1">: By</span><a id="_idIndexMarker564"/><span class="koboSpan" id="kobo.90.1"> enabling devices to communicate directly, it can reduce the load on cloud servers and bandwidth usage, making the IoT system more efficient </span><span class="No-Break"><span class="koboSpan" id="kobo.91.1">and cost-effective.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.92.1">Offline operation</span></strong><span class="koboSpan" id="kobo.93.1">: D2D</span><a id="_idIndexMarker565"/><span class="koboSpan" id="kobo.94.1"> communication can work even when devices are not connected to the internet or the cloud. </span><span class="koboSpan" id="kobo.94.2">This can be especially useful in scenarios where intermittent connectivity is common, such as in remote areas or </span><span class="No-Break"><span class="koboSpan" id="kobo.95.1">emergency situations.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.96.1">Security</span></strong><span class="koboSpan" id="kobo.97.1">: Implementing</span><a id="_idIndexMarker566"/><span class="koboSpan" id="kobo.98.1"> direct communication between devices requires robust security measures to protect data and ensure the authenticity of messages. </span><span class="koboSpan" id="kobo.98.2">Encryption and authentication mechanisms are essential to prevent </span><span class="No-Break"><span class="koboSpan" id="kobo.99.1">unauthorized access.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.100.1">Use cases</span></strong><span class="koboSpan" id="kobo.101.1">: D2D communication</span><a id="_idIndexMarker567"/><span class="koboSpan" id="kobo.102.1"> can be used in various IoT applications. </span><span class="koboSpan" id="kobo.102.2">For example, in a smart home, IoT devices such as thermostats and lights can communicate directly to coordinate actions without needing to send data to a central server. </span><span class="koboSpan" id="kobo.102.3">In agriculture, sensors on farm equipment can communicate directly to </span><span class="No-Break"><span class="koboSpan" id="kobo.103.1">optimize tasks.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.104.1">Protocols</span></strong><span class="koboSpan" id="kobo.105.1">: Various </span><a id="_idIndexMarker568"/><span class="koboSpan" id="kobo.106.1">communication protocols can</span><a id="_idIndexMarker569"/><span class="koboSpan" id="kobo.107.1"> facilitate D2D communication in IoT, including </span><strong class="bold"><span class="koboSpan" id="kobo.108.1">Message Queuing Telemetry Transport</span></strong><span class="koboSpan" id="kobo.109.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.110.1">MQTT</span></strong><span class="koboSpan" id="kobo.111.1">), </span><strong class="bold"><span class="koboSpan" id="kobo.112.1">Constrained Application Protocol</span></strong><span class="koboSpan" id="kobo.113.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.114.1">CoAP</span></strong><span class="koboSpan" id="kobo.115.1">), Bluetooth, and </span><strong class="bold"><span class="koboSpan" id="kobo.116.1">Zigbee</span></strong><span class="koboSpan" id="kobo.117.1">. </span><span class="koboSpan" id="kobo.117.2">The choice of protocol depends on </span><a id="_idIndexMarker570"/><span class="koboSpan" id="kobo.118.1">factors</span><a id="_idIndexMarker571"/><span class="koboSpan" id="kobo.119.1"> such as range, data volume, and </span><span class="No-Break"><span class="koboSpan" id="kobo.120.1">power consumption.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.121.1">Challenges</span></strong><span class="koboSpan" id="kobo.122.1">: While </span><a id="_idIndexMarker572"/><span class="koboSpan" id="kobo.123.1">D2D communication provides many benefits, it also presents challenges, such as ensuring interoperability between devices from different manufacturers and managing the complexities of </span><span class="No-Break"><span class="koboSpan" id="kobo.124.1">decentralized communication.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.125.1">In summary, D2D communication in IoT cloud environments allows IoT devices to communicate directly with each other, which provides benefits such as reduced latency, improved efficiency, and offline operation. </span><span class="koboSpan" id="kobo.125.2">However, it also requires careful planning and security measures to ensure the reliability and integrity of the </span><span class="No-Break"><span class="koboSpan" id="kobo.126.1">communication network.</span></span></p>
<p><span class="koboSpan" id="kobo.127.1">In this section, we explored the benefits and challenges of D2D communication, which is very important in IoT infrastructure and solution development. </span><span class="koboSpan" id="kobo.127.2">In the next section, we will explore what type of option Arduino IoT Cloud is providing </span><span class="No-Break"><span class="koboSpan" id="kobo.128.1">for TTC.</span></span></p>
<h1 id="_idParaDest-145"><a id="_idTextAnchor145"/><span class="koboSpan" id="kobo.129.1">The benefits of Arduino IoT Cloud thing-to-thing communication</span></h1>
<p><span class="koboSpan" id="kobo.130.1">Arduino IoT Cloud</span><a id="_idIndexMarker573"/><span class="koboSpan" id="kobo.131.1"> is a platform that’s designed to simplify the development and management of IoT projects using Arduino boards and other compatible hardware. </span><span class="koboSpan" id="kobo.131.2">When it comes to TTC in the context of Arduino IoT Cloud, there are </span><span class="No-Break"><span class="koboSpan" id="kobo.132.1">several benefits:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.133.1">Ease of integration</span></strong><span class="koboSpan" id="kobo.134.1">: Arduino</span><a id="_idIndexMarker574"/><span class="koboSpan" id="kobo.135.1"> IoT Cloud provides a user-friendly interface for connecting and configuring IoT devices, making it easier to establish communication between devices. </span><span class="koboSpan" id="kobo.135.2">Users can quickly set up and manage the connections between their Arduino boards and other </span><span class="No-Break"><span class="koboSpan" id="kobo.136.1">IoT devices.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.137.1">Remote control</span></strong><span class="koboSpan" id="kobo.138.1">: You can use TTC to control one Arduino device from another. </span><span class="koboSpan" id="kobo.138.2">For example, you could use one Arduino device to control a light bulb in </span><span class="No-Break"><span class="koboSpan" id="kobo.139.1">another room.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.140.1">Scalability</span></strong><span class="koboSpan" id="kobo.141.1">: Arduino IoT Cloud allows you to scale your IoT projects easily. </span><span class="koboSpan" id="kobo.141.2">You can add new devices to your network and configure their communication parameters without extensive programming, making it suitable for both small-scale and large-scale </span><span class="No-Break"><span class="koboSpan" id="kobo.142.1">IoT deployments.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.143.1">Reduced latency</span></strong><span class="koboSpan" id="kobo.144.1">: Direct communication between IoT devices within the same network can significantly reduce latency compared to sending data to an external cloud server and back. </span><span class="koboSpan" id="kobo.144.2">This is crucial for real-time applications, where low latency </span><span class="No-Break"><span class="koboSpan" id="kobo.145.1">is essential.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.146.1">Energy efficiency</span></strong><span class="koboSpan" id="kobo.147.1">: Arduino IoT Cloud allows you to optimize the power consumption of your devices by controlling when and how they communicate with each other. </span><span class="koboSpan" id="kobo.147.2">This can extend the battery life of battery-powered </span><span class="No-Break"><span class="koboSpan" id="kobo.148.1">IoT devices.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.149.1">Customizable logic</span></strong><span class="koboSpan" id="kobo.150.1">: You can program custom logic for TTC to suit your specific project requirements. </span><span class="koboSpan" id="kobo.150.2">This flexibility enables you to implement complex behaviors and automation in your </span><span class="No-Break"><span class="koboSpan" id="kobo.151.1">IoT system.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.152.1">Security</span></strong><span class="koboSpan" id="kobo.153.1">: Arduino IoT Cloud provides security features to help protect the communication between your devices, including encryption and authentication mechanisms. </span><span class="koboSpan" id="kobo.153.2">This ensures that data exchanged between devices </span><span class="No-Break"><span class="koboSpan" id="kobo.154.1">remains secure.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.155.1">Cost efficiency</span></strong><span class="koboSpan" id="kobo.156.1">: By reducing the reliance on external cloud services and minimizing data transfer costs, Arduino </span><a id="_idIndexMarker575"/><span class="koboSpan" id="kobo.157.1">IoT Cloud can be a cost-effective solution for IoT projects, especially when dealing with a large number </span><span class="No-Break"><span class="koboSpan" id="kobo.158.1">of devices.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.159.1">Compatibility</span></strong><span class="koboSpan" id="kobo.160.1">: Arduino IoT Cloud supports a wide range of Arduino boards and compatible hardware, making it accessible to a broad user base. </span><span class="koboSpan" id="kobo.160.2">This compatibility simplifies the </span><a id="_idIndexMarker576"/><span class="koboSpan" id="kobo.161.1">process of implementing TTC for Arduino-based </span><span class="No-Break"><span class="koboSpan" id="kobo.162.1">IoT projects.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.163.1">In summary, Arduino IoT Cloud simplifies TTC in IoT projects, providing features such as ease of integration, scalability, reduced latency, energy efficiency, offline operation, customization, security, cost efficiency, and broad hardware compatibility. </span><span class="koboSpan" id="kobo.163.2">These features make it a valuable platform for developing and managing IoT systems that rely on direct communication </span><span class="No-Break"><span class="koboSpan" id="kobo.164.1">between devices.</span></span></p>
<p><span class="koboSpan" id="kobo.165.1">In this section, we have discussed the benefits of Arduino IoT Cloud TTC. </span><span class="koboSpan" id="kobo.165.2">In the next section, we will explore what hardware components we require to do this </span><span class="No-Break"><span class="koboSpan" id="kobo.166.1">chapter’s exercise.</span></span></p>
<h1 id="_idParaDest-146"><a id="_idTextAnchor146"/><span class="koboSpan" id="kobo.167.1">Hardware components – sensors and development boards</span></h1>
<p><span class="koboSpan" id="kobo.168.1">In this chapter, we are going to explore how to sync cloud variables across multiple Arduino IoT Cloud things. </span><span class="koboSpan" id="kobo.168.2">So, here we will use the same thing, including a development board and sensors, that was used in </span><a href="B19752_04.xhtml#_idTextAnchor085"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.169.1">Chapter 4</span></em></span></a><span class="koboSpan" id="kobo.170.1">. </span><span class="koboSpan" id="kobo.170.2">For this chapter’s demonstration, we are going to use Arduino MKR Wi-Fi 1010 along with two 5 mm LEDs, a red one and a green one. </span><span class="koboSpan" id="kobo.170.3">The complete project is summarized in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.171.1">Figure 7</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.172.1">.1.</span></em></span></p>
<div>
<div class="IMG---Figure" id="_idContainer114">
<span class="koboSpan" id="kobo.173.1"><img alt="Figure 7.1 – Project architecture" src="image/B19752_07_01.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.174.1">Figure 7.1 – Project architecture</span></p>
<p><span class="koboSpan" id="kobo.175.1">As shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.176.1">Figure 7</span></em></span><em class="italic"><span class="koboSpan" id="kobo.177.1">.1</span></em><span class="koboSpan" id="kobo.178.1">, we use one WeMos D1 mini development board, which is based on ESP8266, and the whole project is demonstrated in </span><a href="B19752_04.xhtml#_idTextAnchor085"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.179.1">Chapter 4</span></em></span></a><span class="koboSpan" id="kobo.180.1">. </span><span class="koboSpan" id="kobo.180.2">The purpose of using different types of boards in this chapter is to demonstrate how easy it is to sync the cloud variables across different types of development boards. </span><span class="koboSpan" id="kobo.180.3">In the next section, we will talk in detail about </span><span class="No-Break"><span class="koboSpan" id="kobo.181.1">project architecture.</span></span></p>
<h1 id="_idParaDest-147"><a id="_idTextAnchor147"/><span class="koboSpan" id="kobo.182.1">Project architecture</span></h1>
<p><span class="koboSpan" id="kobo.183.1">In this section, we will discuss how cloud variable synchronization</span><a id="_idIndexMarker577"/><span class="koboSpan" id="kobo.184.1"> works. </span><span class="koboSpan" id="kobo.184.2">As shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.185.1">Figure 7</span></em></span><em class="italic"><span class="koboSpan" id="kobo.186.1">.1</span></em><span class="koboSpan" id="kobo.187.1">, we have taken the project from </span><a href="B19752_04.xhtml#_idTextAnchor085"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.188.1">Chapter 4</span></em></span></a><span class="koboSpan" id="kobo.189.1">. </span><span class="koboSpan" id="kobo.189.2">In that project, we set up a device that monitors outdoor temperature, humidity, and air quality. </span><span class="koboSpan" id="kobo.189.3">Now, we want to share the outdoor temperature with our indoor device, which is the MKR Wi-Fi 1010. </span><span class="koboSpan" id="kobo.189.4">To make things easier, we just used LEDs with MKR Wi-Fi 1010, which is shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.190.1">Figure 7</span></em></span><em class="italic"><span class="koboSpan" id="kobo.191.1">.2</span></em><span class="koboSpan" id="kobo.192.1">. </span><span class="koboSpan" id="kobo.192.2">Our indoor device will turn on the red LED if the temperature exceeds the specified threshold and turn on the green LED if it comes down below a specified threshold. </span><span class="koboSpan" id="kobo.192.3">You can also use relays instead of LEDs to control the heating and cooling system of </span><span class="No-Break"><span class="koboSpan" id="kobo.193.1">your room.</span></span></p>
<p><span class="koboSpan" id="kobo.194.1">We already have one complete thing in Arduino IoT Cloud that is working, but now we need to create another thing for MKR Wi-Fi 1010 </span><a id="_idIndexMarker578"/><span class="koboSpan" id="kobo.195.1">named </span><strong class="bold"><span class="koboSpan" id="kobo.196.1">Indoor MKR Wi-Fi 1010</span></strong><span class="koboSpan" id="kobo.197.1"> with a bunch of cloud variables. </span><span class="koboSpan" id="kobo.197.2">We will then sync the temperature cloud variable of the Indoor MKR Wi-Fi 1010 thing with the Sense the Environment thing, which was created in </span><a href="B19752_04.xhtml#_idTextAnchor085"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.198.1">Chapter 4</span></em></span></a><span class="No-Break"><span class="koboSpan" id="kobo.199.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.200.1">In the preceding sections, we discussed the module and development board in detail. </span><span class="koboSpan" id="kobo.200.2">Now, it’s time to begin the exercise. </span><span class="koboSpan" id="kobo.200.3">In hardware development, before we start working with sensors and development boards, we need to develop design concepts to get a better understanding of how things will connect. </span><span class="koboSpan" id="kobo.200.4">There is a lot of software available for designing and</span><a id="_idIndexMarker579"/><span class="koboSpan" id="kobo.201.1"> developing design concepts for an electronics project, but in this case, we will </span><span class="No-Break"><span class="koboSpan" id="kobo.202.1">use </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.203.1">Fritzing</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.204.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.205.1">In the following subsection, we will talk about the schematics of a project while explaining how to connect pins with a </span><span class="No-Break"><span class="koboSpan" id="kobo.206.1">development board.</span></span></p>
<h2 id="_idParaDest-148"><a id="_idTextAnchor148"/><span class="koboSpan" id="kobo.207.1">Schematics design and assembly</span></h2>
<p><span class="koboSpan" id="kobo.208.1">The purpose of schematic design is to get a clear understanding of how sensors/LEDs will connect with a development board. </span><span class="koboSpan" id="kobo.208.2">This helps engineers to develop a prototype on a breadboard</span><a id="_idIndexMarker580"/><span class="koboSpan" id="kobo.209.1"> or a </span><strong class="bold"><span class="koboSpan" id="kobo.210.1">Veroboard</span></strong><span class="koboSpan" id="kobo.211.1">. </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.212.1">Figure 7</span></em></span><em class="italic"><span class="koboSpan" id="kobo.213.1">.2</span></em><span class="koboSpan" id="kobo.214.1"> shows a schematic diagram of how LEDs are connected to the MKR Wi-Fi 1010 </span><span class="No-Break"><span class="koboSpan" id="kobo.215.1">development board.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer115">
<span class="koboSpan" id="kobo.216.1"><img alt="Figure 7.2 – MKR Wi-Fi 1010 and LEDs schematic diagram" src="image/B19752_07_02.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.217.1">Figure 7.2 – MKR Wi-Fi 1010 and LEDs schematic diagram</span></p>
<p><span class="koboSpan" id="kobo.218.1">In </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.219.1">Figure 7</span></em></span><em class="italic"><span class="koboSpan" id="kobo.220.1">.2</span></em><span class="koboSpan" id="kobo.221.1">, we have one common ground from MKR Wi-Fi 1010, which is shared with both LEDs using a yellow line. </span><span class="koboSpan" id="kobo.221.2">The red LED is connected to MKR Wi-Fi 1010 by using </span><em class="italic"><span class="koboSpan" id="kobo.222.1">Pin #6</span></em><span class="koboSpan" id="kobo.223.1"> and the green LED is using </span><em class="italic"><span class="koboSpan" id="kobo.224.1">Pin #7</span></em><span class="koboSpan" id="kobo.225.1"> of the MKR Wi-Fi 1010 </span><span class="No-Break"><span class="koboSpan" id="kobo.226.1">development board.</span></span></p>
<p><span class="koboSpan" id="kobo.227.1">In this section, we have discussed how cloud sync works and how we connect the LEDs with MKR Wi-Fi 1010. </span><span class="koboSpan" id="kobo.227.2">In the next section, we will set up the Thing for MKR Wi-Fi 1010 as well as device association and network configuration; and, most importantly, we will create the cloud variables and sync them with </span><span class="No-Break"><span class="koboSpan" id="kobo.228.1">other things.</span></span></p>
<h1 id="_idParaDest-149"><a id="_idTextAnchor149"/><span class="koboSpan" id="kobo.229.1">Setting up a Thing</span></h1>
<p><span class="koboSpan" id="kobo.230.1">After setting up the hardware, it’s time</span><a id="_idIndexMarker581"/><span class="koboSpan" id="kobo.231.1"> to set up a thing in Arduino IoT Cloud. </span><span class="koboSpan" id="kobo.231.2">For this project, we need three cloud variables. </span><span class="koboSpan" id="kobo.231.3">Later on, we will associate MKR Wi-Fi 1010 with our thing. </span><span class="koboSpan" id="kobo.231.4">Next, we will perform the Wi-Fi network configuration. </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.232.1">Figure 7</span></em></span><em class="italic"><span class="koboSpan" id="kobo.233.1">.3</span></em><span class="koboSpan" id="kobo.234.1"> shows a complete overview of </span><span class="No-Break"><span class="koboSpan" id="kobo.235.1">the Thing:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer116">
<span class="koboSpan" id="kobo.236.1"><img alt="Figure 7.3 – Indoor device MKR Wi-Fi 1010 thing setup" src="image/B19752_07_03.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.237.1">Figure 7.3 – Indoor device MKR Wi-Fi 1010 thing setup</span></p>
<p><span class="koboSpan" id="kobo.238.1">Set up a new thing </span><a id="_idIndexMarker582"/><span class="koboSpan" id="kobo.239.1">called </span><strong class="source-inline"><span class="koboSpan" id="kobo.240.1">Indoor Device MKR Wi-Fi 1010</span></strong><span class="koboSpan" id="kobo.241.1">. </span><span class="koboSpan" id="kobo.241.2">In </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.242.1">Figure 7</span></em></span><em class="italic"><span class="koboSpan" id="kobo.243.1">.3</span></em><span class="koboSpan" id="kobo.244.1">, the following steps are marked with red boxes. </span><span class="koboSpan" id="kobo.244.2">Follow these steps to create variables, associate a device, configure the network, and, finally, write </span><span class="No-Break"><span class="koboSpan" id="kobo.245.1">the code:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.246.1">Firstly, we need to set up three cloud variables for the green LED, the red LED, and temperature (which will be synced with another thing cloud variable). </span><span class="koboSpan" id="kobo.246.2">A more detailed discussion of cloud variables is in the </span><span class="No-Break"><span class="koboSpan" id="kobo.247.1">upcoming section.</span></span></li>
<li><span class="koboSpan" id="kobo.248.1">After that, we need to associate the device with the Thing. </span><span class="koboSpan" id="kobo.248.2">In the current project, we are using MKR Wi-Fi 1010. </span><span class="koboSpan" id="kobo.248.3">More details are available in the </span><em class="italic"><span class="koboSpan" id="kobo.249.1">Associating a device</span></em><span class="koboSpan" id="kobo.250.1"> subsection of </span><span class="No-Break"><span class="koboSpan" id="kobo.251.1">this chapter.</span></span></li>
<li><span class="koboSpan" id="kobo.252.1">After attaching the device, we need to make the device network-ready by providing an SSID and a password for the Wi-Fi network. </span><span class="koboSpan" id="kobo.252.2">Just click on the </span><strong class="bold"><span class="koboSpan" id="kobo.253.1">Configure</span></strong><span class="koboSpan" id="kobo.254.1"> button (if the network is empty, then you will see the </span><strong class="bold"><span class="koboSpan" id="kobo.255.1">Configure</span></strong><span class="koboSpan" id="kobo.256.1"> button. </span><span class="koboSpan" id="kobo.256.2">Otherwise, you will see the </span><strong class="bold"><span class="koboSpan" id="kobo.257.1">Change</span></strong><span class="koboSpan" id="kobo.258.1"> button) and you will see the popup for </span><span class="No-Break"><span class="koboSpan" id="kobo.259.1">network</span></span><span class="No-Break"><a id="_idIndexMarker583"/></span><span class="No-Break"><span class="koboSpan" id="kobo.260.1"> settings.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.261.1">We have discussed the process of setting up a thing, and all these steps will be explained in detail in the proceeding subsections. </span><span class="koboSpan" id="kobo.261.2">We will start with the </span><em class="italic"><span class="koboSpan" id="kobo.262.1">Cloud variables</span></em><span class="koboSpan" id="kobo.263.1"> subsection, where we will create cloud variables for our thing as well as </span><span class="No-Break"><span class="koboSpan" id="kobo.264.1">synchronize them.</span></span></p>
<h2 id="_idParaDest-150"><a id="_idTextAnchor150"/><span class="koboSpan" id="kobo.265.1">Cloud variables</span></h2>
<p><span class="koboSpan" id="kobo.266.1">The following table describes all the</span><a id="_idIndexMarker584"/><span class="koboSpan" id="kobo.267.1"> properties of the cloud variables that we need to configure. </span><span class="koboSpan" id="kobo.267.2">For this project, we need three cloud variables, as listed in </span><em class="italic"><span class="koboSpan" id="kobo.268.1">Table 7.1</span></em><span class="koboSpan" id="kobo.269.1">. </span><span class="koboSpan" id="kobo.269.2">Next, make sure each variable matches the </span><strong class="bold"><span class="koboSpan" id="kobo.270.1">Declaration</span></strong><span class="koboSpan" id="kobo.271.1"> in the table; otherwise, you need to modify the example code according to </span><span class="No-Break"><span class="koboSpan" id="kobo.272.1">your naming.</span></span></p>
<p><span class="koboSpan" id="kobo.273.1">When we created the cloud variables, we made the permission read-only for all variables except </span><strong class="source-inline"><span class="koboSpan" id="kobo.274.1">Temperature</span></strong><span class="koboSpan" id="kobo.275.1"> because we need this cloud variable to sync with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.276.1">Temperature</span></strong><span class="koboSpan" id="kobo.277.1"> cloud variable of the Sense the Environment thing in </span><a href="B19752_04.xhtml#_idTextAnchor085"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.278.1">Chapter 4</span></em></span></a><span class="koboSpan" id="kobo.279.1">. </span><span class="koboSpan" id="kobo.279.2">That’s why this variable’s permissions are set to </span><strong class="bold"><span class="koboSpan" id="kobo.280.1">Read &amp; Write</span></strong><span class="koboSpan" id="kobo.281.1">. </span><strong class="bold"><span class="koboSpan" id="kobo.282.1">Update Policy</span></strong><span class="koboSpan" id="kobo.283.1"> is set to </span><strong class="bold"><span class="koboSpan" id="kobo.284.1">On change</span></strong><span class="koboSpan" id="kobo.285.1"> for </span><span class="No-Break"><span class="koboSpan" id="kobo.286.1">all variables.</span></span></p>
<table class="No-Table-Style _idGenTablePara-1" id="table001-4">
<colgroup>
<col/>
<col/>
<col/>
<col/>
<col/>
<col/>
</colgroup>
<tbody>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.287.1">S#</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.288.1">Variable Name</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.289.1">Variable Type</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.290.1">Declaration</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.291.1">Permission</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><strong class="bold"><span class="koboSpan" id="kobo.292.1">Update </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.293.1">Policy</span></strong></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.294.1">1</span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.295.1">GreenLed</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.296.1">Boolean</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.297.1">greenLed</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.298.1">Read Only</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.299.1">On change</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.300.1">2</span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.301.1">RedLed</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.302.1">Boolean</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.303.1">redLed</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.304.1">Read Only</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.305.1">On change</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.306.1">3</span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.307.1">Temperature</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.308.1">Temperature sensor</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.309.1">Temperature</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.310.1">Read &amp; </span><span class="No-Break"><span class="koboSpan" id="kobo.311.1">Write</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.312.1">On change</span></span></p>
</td>
</tr>
</tbody>
</table>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.313.1">Table 7.1 – Cloud variables list for things</span></p>
<p><span class="koboSpan" id="kobo.314.1">Use </span><em class="italic"><span class="koboSpan" id="kobo.315.1">Table 7.1</span></em><span class="koboSpan" id="kobo.316.1"> to create the </span><strong class="source-inline"><span class="koboSpan" id="kobo.317.1">GreenLed</span></strong><span class="koboSpan" id="kobo.318.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.319.1">RedLed</span></strong><span class="koboSpan" id="kobo.320.1"> cloud variables. </span><span class="koboSpan" id="kobo.320.2">The creation of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.321.1">Temperature</span></strong><span class="koboSpan" id="kobo.322.1"> cloud variable will be discussed step by step; we are going to sync this cloud variable with the Thing cloud variable from </span><a href="B19752_04.xhtml#_idTextAnchor085"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.323.1">Chapter 4</span></em></span></a><span class="koboSpan" id="kobo.324.1">. </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.325.1">Figure 7</span></em></span><em class="italic"><span class="koboSpan" id="kobo.326.1">.4</span></em><span class="koboSpan" id="kobo.327.1"> shows the first step of creating</span><a id="_idIndexMarker585"/><span class="koboSpan" id="kobo.328.1"> the </span><strong class="source-inline"><span class="koboSpan" id="kobo.329.1">Temperature</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.330.1">cloud variable.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer117">
<span class="koboSpan" id="kobo.331.1"><img alt="Figure 7.4 – Temperature cloud variable step 1" src="image/B19752_07_04.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.332.1">Figure 7.4 – Temperature cloud variable step 1</span></p>
<p><span class="koboSpan" id="kobo.333.1">In this step, we will</span><a id="_idIndexMarker586"/><span class="koboSpan" id="kobo.334.1"> assign a name to the cloud variable, which is shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.335.1">Figure 7</span></em></span><em class="italic"><span class="koboSpan" id="kobo.336.1">.4</span></em><span class="koboSpan" id="kobo.337.1">. </span><span class="koboSpan" id="kobo.337.2">Next, we will click on </span><strong class="bold"><span class="koboSpan" id="kobo.338.1">Sync with other Things</span></strong><span class="koboSpan" id="kobo.339.1">. </span><span class="koboSpan" id="kobo.339.2">This will open a new popup, which is shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.340.1">Figure 7</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.341.1">.5</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.342.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer118">
<span class="koboSpan" id="kobo.343.1"><img alt="Figure 7.5 – Temperature cloud variable step 2" src="image/B19752_07_05.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.344.1">Figure 7.5 – Temperature cloud variable step 2</span></p>
<p><span class="koboSpan" id="kobo.345.1">In this popup, you will find </span><a id="_idIndexMarker587"/><span class="koboSpan" id="kobo.346.1">a complete list of cloud variables across all the things that are available in your Arduino IoT Cloud. </span><span class="koboSpan" id="kobo.346.2">To prevent complexity and errors, select a specific thing. </span><span class="koboSpan" id="kobo.346.3">We selected the </span><strong class="bold"><span class="koboSpan" id="kobo.347.1">Sense the Environment</span></strong><span class="koboSpan" id="kobo.348.1"> thing from the dropdown, which is marked by a red box in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.349.1">Figure 7</span></em></span><em class="italic"><span class="koboSpan" id="kobo.350.1">.5</span></em><span class="koboSpan" id="kobo.351.1">. </span><span class="koboSpan" id="kobo.351.2">After selecting the Thing from drop down, you will only see the associated cloud variable of that thing in popup. </span><span class="koboSpan" id="kobo.351.3">Click on the </span><strong class="bold"><span class="koboSpan" id="kobo.352.1">Temperature</span></strong><span class="koboSpan" id="kobo.353.1"> cloud variable checkbox and then click on the </span><strong class="bold"><span class="koboSpan" id="kobo.354.1">SYNCHRONIZE VARIABLES</span></strong><span class="koboSpan" id="kobo.355.1"> button. </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.356.1">Figure 7</span></em></span><em class="italic"><span class="koboSpan" id="kobo.357.1">.6</span></em><span class="koboSpan" id="kobo.358.1"> shows the final popup, where you will find the final status of the cloud variable </span><span class="No-Break"><span class="koboSpan" id="kobo.359.1">sync status.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer119">
<span class="koboSpan" id="kobo.360.1"><img alt="Figure 7.6 – Temperature cloud variable step 3" src="image/B19752_07_06.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.361.1">Figure 7.6 – Temperature cloud variable step 3</span></p>
<p><span class="koboSpan" id="kobo.362.1">In </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.363.1">Figure 7</span></em></span><em class="italic"><span class="koboSpan" id="kobo.364.1">.6</span></em><span class="koboSpan" id="kobo.365.1">, you will see</span><a id="_idIndexMarker588"/><span class="koboSpan" id="kobo.366.1"> the status of the cloud variable sync status, which is marked by a red box. </span><span class="koboSpan" id="kobo.366.2">Remember that for sync variables, you must choose </span><strong class="bold"><span class="koboSpan" id="kobo.367.1">Read &amp; Write</span></strong><span class="koboSpan" id="kobo.368.1"> permission or it will not work properly. </span><span class="koboSpan" id="kobo.368.2">Then save the cloud variable, and we are good to go. </span><span class="koboSpan" id="kobo.368.3">After going through these steps, you should have an idea of how easy it is to sync cloud variables across multiple things within seconds by just using a </span><span class="No-Break"><span class="koboSpan" id="kobo.369.1">simple interface.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.370.1">Important note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.371.1">Remember that for sync variables, you must choose the </span><strong class="bold"><span class="koboSpan" id="kobo.372.1">Read &amp; Write</span></strong><span class="koboSpan" id="kobo.373.1"> permission or it will not </span><span class="No-Break"><span class="koboSpan" id="kobo.374.1">work properly.</span></span></p>
<p><span class="koboSpan" id="kobo.375.1">In this section, we discussed the types of cloud variables that are required for this project. </span><span class="koboSpan" id="kobo.375.2">We listed three cloud variables of different types and also discussed in detail how to sync the cloud variable from one thing to another thing. </span><span class="koboSpan" id="kobo.375.3">Next, we are going to associate the MKR Wi-Fi 1010 with </span><span class="No-Break"><span class="koboSpan" id="kobo.376.1">the Thing.</span></span></p>
<h2 id="_idParaDest-151"><a id="_idTextAnchor151"/><span class="koboSpan" id="kobo.377.1">Associating a device</span></h2>
<p><span class="koboSpan" id="kobo.378.1">After creating the variables, it’s </span><a id="_idIndexMarker589"/><span class="koboSpan" id="kobo.379.1">time to add the device and associate it with </span><span class="No-Break"><span class="koboSpan" id="kobo.380.1">the Thing:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.381.1">Before adding the</span><a id="_idIndexMarker590"/><span class="koboSpan" id="kobo.382.1"> device, connect the development board to the computer and open the </span><strong class="bold"><span class="koboSpan" id="kobo.383.1">Arduino Create Agent</span></strong><span class="koboSpan" id="kobo.384.1"> application. </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.385.1">Figure 7</span></em></span><em class="italic"><span class="koboSpan" id="kobo.386.1">.7</span></em><span class="koboSpan" id="kobo.387.1"> shows a popup where we have two options: either select the existing device for association or set up the new device if it is not available in </span><span class="No-Break"><span class="koboSpan" id="kobo.388.1">the list:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer120">
<span class="koboSpan" id="kobo.389.1"><img alt="Figure 7.7 – Associate device – select device" src="image/B19752_07_07.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.390.1">Figure 7.7 – Associate device – select device</span></p>
<p class="list-inset"><span class="koboSpan" id="kobo.391.1">In our case, we already</span><a id="_idIndexMarker591"/><span class="koboSpan" id="kobo.392.1"> have different devices in the portal, but we want to add a new MKR Wi-Fi 1010. </span><span class="koboSpan" id="kobo.392.2">Just click on </span><strong class="bold"><span class="koboSpan" id="kobo.393.1">SET UP NEW DEVICE</span></strong><span class="koboSpan" id="kobo.394.1"> to configure a new device in </span><span class="No-Break"><span class="koboSpan" id="kobo.395.1">the account.</span></span></p>
<ol>
<li value="2"><span class="koboSpan" id="kobo.396.1">Next, you will see the three options in the popup. </span><span class="koboSpan" id="kobo.396.2">The first option is </span><strong class="bold"><span class="koboSpan" id="kobo.397.1">Arduino board</span></strong><span class="koboSpan" id="kobo.398.1"> and the second option is </span><strong class="bold"><span class="koboSpan" id="kobo.399.1">Third party device</span></strong><span class="koboSpan" id="kobo.400.1">. </span><span class="koboSpan" id="kobo.400.2">The third option is </span><strong class="bold"><span class="koboSpan" id="kobo.401.1">Any Device</span></strong><span class="koboSpan" id="kobo.402.1">, which is for non-compatible devices. </span><span class="koboSpan" id="kobo.402.2">It means you can use any type of Arduino device, as well </span><a id="_idIndexMarker592"/><span class="koboSpan" id="kobo.403.1">as third-party devices with Arduino IoT Cloud, which supports Python, MicroPython, </span><span class="No-Break"><span class="koboSpan" id="kobo.404.1">and JavaScript.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer121">
<span class="koboSpan" id="kobo.405.1"><img alt="Figure 7.8 – Choosing a development device" src="image/B19752_07_08.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.406.1">Figure 7.8 – Choosing a development device</span></p>
<ol>
<li value="3"><span class="koboSpan" id="kobo.407.1">Select the right option from the popup for your project. </span><span class="koboSpan" id="kobo.407.2">For this example, click on </span><strong class="bold"><span class="koboSpan" id="kobo.408.1">Arduino board</span></strong><span class="koboSpan" id="kobo.409.1"> because in this chapter, we are using an MKR Wi-Fi 1010 board. </span><span class="koboSpan" id="kobo.409.2">Before</span><a id="_idIndexMarker593"/><span class="koboSpan" id="kobo.410.1"> adding the device, make sure </span><strong class="bold"><span class="koboSpan" id="kobo.411.1">Arduino Create Agent</span></strong><span class="koboSpan" id="kobo.412.1"> is running on your machine. </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.413.1">Figure 7</span></em></span><em class="italic"><span class="koboSpan" id="kobo.414.1">.9</span></em><span class="koboSpan" id="kobo.415.1"> shows that Arduino IoT Cloud detected the MKR Wi-Fi </span><span class="No-Break"><span class="koboSpan" id="kobo.416.1">1010 device.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer122">
<span class="koboSpan" id="kobo.417.1"><img alt="Figure 7.9 – Device found" src="image/B19752_07_09.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.418.1">Figure 7.9 – Device found</span></p>
<p class="list-inset"><span class="koboSpan" id="kobo.419.1">When the popup displays that it has found the device, just click on the </span><strong class="bold"><span class="koboSpan" id="kobo.420.1">CONFIGURE</span></strong><span class="koboSpan" id="kobo.421.1"> button, which will take you to the next configuration step, where you will provide the name of the device, and later, another popup will perform some configuration on your development board and associate the development board with Arduino IoT Cloud. </span><span class="koboSpan" id="kobo.421.2">Once this is done, a successful device association message will </span><span class="No-Break"><span class="koboSpan" id="kobo.422.1">be displayed.</span></span></p>
<ol>
<li value="4"><span class="koboSpan" id="kobo.423.1">When the</span><a id="_idIndexMarker594"/><span class="koboSpan" id="kobo.424.1"> device is configured successfully, you will see a popup saying congratulations. </span><span class="koboSpan" id="kobo.424.2">Just click on the </span><strong class="bold"><span class="koboSpan" id="kobo.425.1">DONE</span></strong><span class="koboSpan" id="kobo.426.1"> button and your device will be associated with </span><span class="No-Break"><span class="koboSpan" id="kobo.427.1">your thing.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.428.1">In this section, we associated the MKR Wi-Fi 1010 device with our thing, and in the upcoming sections, we will talk about the network </span><span class="No-Break"><span class="koboSpan" id="kobo.429.1">and code.</span></span></p>
<h2 id="_idParaDest-152"><a id="_idTextAnchor152"/><span class="koboSpan" id="kobo.430.1">Network</span></h2>
<p><span class="koboSpan" id="kobo.431.1">After attaching the device to </span><a id="_idIndexMarker595"/><span class="koboSpan" id="kobo.432.1">the Thing, we can see that the device is offline. </span><span class="koboSpan" id="kobo.432.2">To bring it online, we need to provide Wi-Fi details. </span><span class="koboSpan" id="kobo.432.3">The following screenshot shows the network configuration popup, which only consists of </span><span class="No-Break"><span class="koboSpan" id="kobo.433.1">two fields:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer123">
<span class="koboSpan" id="kobo.434.1"><img alt="Figure 7.10 – Network configuration" src="image/B19752_07_10.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.435.1">Figure 7.10 – Network configuration</span></p>
<p><span class="koboSpan" id="kobo.436.1">On the Thing page, shown</span><a id="_idIndexMarker596"/><span class="koboSpan" id="kobo.437.1"> in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.438.1">Figure 7</span></em></span><em class="italic"><span class="koboSpan" id="kobo.439.1">.10</span></em><span class="koboSpan" id="kobo.440.1">, on the </span><strong class="bold"><span class="koboSpan" id="kobo.441.1">Network</span></strong><span class="koboSpan" id="kobo.442.1"> tab, click on the </span><strong class="bold"><span class="koboSpan" id="kobo.443.1">CONFIGURE</span></strong><span class="koboSpan" id="kobo.444.1"> button, which will take you to the </span><strong class="bold"><span class="koboSpan" id="kobo.445.1">Configure network</span></strong><span class="koboSpan" id="kobo.446.1"> popup with two fields, </span><strong class="bold"><span class="koboSpan" id="kobo.447.1">Wi-Fi Name</span></strong><span class="koboSpan" id="kobo.448.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.449.1">Password</span></strong><span class="koboSpan" id="kobo.450.1">. </span><span class="koboSpan" id="kobo.450.2">Type the Wi-Fi SSID and password, and then click on the </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.451.1">SAVE</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.452.1"> button.</span></span></p>
<p><span class="koboSpan" id="kobo.453.1">In this section, we have configured the network for our device, which is MKR Wi-Fi 1010. </span><span class="koboSpan" id="kobo.453.2">In the next subsection, we will create the </span><span class="No-Break"><span class="koboSpan" id="kobo.454.1">cloud variable.</span></span></p>
<h2 id="_idParaDest-153"><a id="_idTextAnchor153"/><span class="koboSpan" id="kobo.455.1">Coding</span></h2>
<p><span class="koboSpan" id="kobo.456.1">This chapter’s code is available in the official GitHub repository for the book. </span><span class="koboSpan" id="kobo.456.2">Download </span><strong class="source-inline"><span class="koboSpan" id="kobo.457.1">Indoor_Device_MKR_Wi-Fi_1010_sep07a.zip</span></strong><span class="koboSpan" id="kobo.458.1"> and import it into your Arduino </span><span class="No-Break"><span class="koboSpan" id="kobo.459.1">Web Editor.</span></span></p>
<p><span class="koboSpan" id="kobo.460.1">You can download the code and put it into your thing by navigating to the </span><strong class="bold"><span class="koboSpan" id="kobo.461.1">Sketch</span></strong><span class="koboSpan" id="kobo.462.1"> tab. </span><span class="koboSpan" id="kobo.462.2">Here, I will explain the main workflow. </span><span class="koboSpan" id="kobo.462.3">First, we have defined two constants for the red and green LED pins called </span><strong class="source-inline"><span class="koboSpan" id="kobo.463.1">RLED</span></strong><span class="koboSpan" id="kobo.464.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.465.1">GLED</span></strong><span class="koboSpan" id="kobo.466.1"> in the following snippet and assigned them pin numbers </span><strong class="source-inline"><span class="koboSpan" id="kobo.467.1">6</span></strong><span class="koboSpan" id="kobo.468.1"> and </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.469.1">7</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.470.1">, respectively:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.471.1">
#define RLED 6
#define GLED 7</span></pre> <p><span class="koboSpan" id="kobo.472.1">Then, we initialize all the</span><a id="_idIndexMarker597"/><span class="koboSpan" id="kobo.473.1"> required pins and methods in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.474.1">setup()</span></strong><span class="koboSpan" id="kobo.475.1"> method. </span><span class="koboSpan" id="kobo.475.2">Specifically, we are changing the modes of the pins to output by using the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.476.1">pinMode()</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.477.1"> method:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.478.1">
void setup() {
  pinMode(RLED, OUTPUT);
  pinMode(GLED, OUTPUT);
  // Initialize serial and wait for port to open:
  Serial.begin(9600);
  // This delay gives the chance to wait for a Serial Monitor without blocking if none is found
  delay(1500);
  // Defined in thingProperties.h
  initProperties();
  // Connect to Arduino IoT Cloud
  ArduinoCloud.begin(ArduinoIoTPreferredConnection);
  setDebugMessageLevel(2);
  ArduinoCloud.printDebugInfo();
}</span></pre> <p><span class="koboSpan" id="kobo.479.1">The next important method is </span><strong class="source-inline"><span class="koboSpan" id="kobo.480.1">onTemperatureChange()</span></strong><span class="koboSpan" id="kobo.481.1">. </span><span class="koboSpan" id="kobo.481.2">Whenever the value of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.482.1">Temperature</span></strong><span class="koboSpan" id="kobo.483.1"> cloud variable changes on the Sense the Environment thing, it will be automatically synced with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.484.1">Temperature</span></strong><span class="koboSpan" id="kobo.485.1"> cloud variable of the Indoor Device MKR Wi-Fi 1010 thing. </span><span class="koboSpan" id="kobo.485.2">Then, when</span><a id="_idIndexMarker598"/><span class="koboSpan" id="kobo.486.1"> the value changes, this method will </span><span class="No-Break"><span class="koboSpan" id="kobo.487.1">be called:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.488.1">
void onTemperatureChange()  {
  // Add your code here to act upon Temperature change
  if(temperature&gt;30)
    {
      //if Temperature is more then 30 then turn on the Red LED and turn off Green LED
      redLed=true;
      greenLed=false;
    }else{
      //If Temperature is 30 or less then turn on Green LED and turn off Red LED
      redLed=false;
      greenLed=true;
    }
    digitalWrite(RLED,redLed);
    digitalWrite(GLED,greenLed);
}</span></pre> <p><span class="koboSpan" id="kobo.489.1">In the preceding code snippet, we have defined the manual threshold for </span><strong class="source-inline"><span class="koboSpan" id="kobo.490.1">temperature</span></strong><span class="koboSpan" id="kobo.491.1">. </span><span class="koboSpan" id="kobo.491.2">If the </span><strong class="source-inline"><span class="koboSpan" id="kobo.492.1">temperature</span></strong><span class="koboSpan" id="kobo.493.1"> value is greater than 30 degrees Celsius, then assign </span><strong class="source-inline"><span class="koboSpan" id="kobo.494.1">redLed</span></strong><span class="koboSpan" id="kobo.495.1"> the </span><strong class="source-inline"><span class="koboSpan" id="kobo.496.1">true</span></strong><span class="koboSpan" id="kobo.497.1"> value and </span><strong class="source-inline"><span class="koboSpan" id="kobo.498.1">greenLed</span></strong><span class="koboSpan" id="kobo.499.1"> the </span><strong class="source-inline"><span class="koboSpan" id="kobo.500.1">false</span></strong><span class="koboSpan" id="kobo.501.1"> value; otherwise, assign </span><strong class="source-inline"><span class="koboSpan" id="kobo.502.1">redLed</span></strong><span class="koboSpan" id="kobo.503.1"> with </span><strong class="source-inline"><span class="koboSpan" id="kobo.504.1">false</span></strong><span class="koboSpan" id="kobo.505.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.506.1">greenLed</span></strong><span class="koboSpan" id="kobo.507.1"> with </span><strong class="source-inline"><span class="koboSpan" id="kobo.508.1">true</span></strong><span class="koboSpan" id="kobo.509.1">. </span><span class="koboSpan" id="kobo.509.2">At the end of the method, we are controlling the LEDs according to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.510.1">redLed</span></strong><span class="koboSpan" id="kobo.511.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.512.1">greenLed</span></strong><span class="koboSpan" id="kobo.513.1"> values. </span><span class="koboSpan" id="kobo.513.2">Here, you can use relays instead of LEDs to control the heating and cooling system of your </span><span class="No-Break"><span class="koboSpan" id="kobo.514.1">indoor environment.</span></span></p>
<p><span class="koboSpan" id="kobo.515.1">Upload the code to the</span><a id="_idIndexMarker599"/><span class="koboSpan" id="kobo.516.1"> device and you will see that either the red or green LED will be turned on, depending on the temperature. </span><span class="koboSpan" id="kobo.516.2">After successfully uploading data to the cloud, it’s time to set up a beautiful dashboard for web and mobile for the users. </span><span class="koboSpan" id="kobo.516.3">This time, we will create a dashboard that will show the values of two things’ </span><span class="No-Break"><span class="koboSpan" id="kobo.517.1">cloud variables.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.518.1">Important note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.519.1">If you used different </span><em class="italic"><span class="koboSpan" id="kobo.520.1">naming</span></em><span class="koboSpan" id="kobo.521.1"> in the variable declaration, then update the code according to your naming scheme. </span><span class="koboSpan" id="kobo.521.2">But it’s better if you first follow all the steps according to the book and later change the cloud variable names and modify </span><span class="No-Break"><span class="koboSpan" id="kobo.522.1">your code.</span></span></p>
<p><span class="koboSpan" id="kobo.523.1">Never try to use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.524.1">delay()</span></strong><span class="koboSpan" id="kobo.525.1"> method, which will create a block for the </span><strong class="source-inline"><span class="koboSpan" id="kobo.526.1">ArduinoCloud.update()</span></strong><span class="koboSpan" id="kobo.527.1"> method. </span><span class="koboSpan" id="kobo.527.2">Also, don’t put the code in an end-of-loop method as it will create a delay in the pulse </span><span class="No-Break"><span class="koboSpan" id="kobo.528.1">sensor readings.</span></span></p>
<p><span class="koboSpan" id="kobo.529.1">In this section, we have explored the code, and we are using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.530.1">Temperature</span></strong><span class="koboSpan" id="kobo.531.1"> cloud variable, which is synced with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.532.1">Temperature</span></strong><span class="koboSpan" id="kobo.533.1"> cloud variable in </span><a href="B19752_04.xhtml#_idTextAnchor085"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.534.1">Chapter 4</span></em></span></a><span class="koboSpan" id="kobo.535.1">, and we are turning on and off the LEDs according to temperature value. </span><span class="koboSpan" id="kobo.535.2">In the next section, we will explore how to display the cloud variables of multiple things on a </span><span class="No-Break"><span class="koboSpan" id="kobo.536.1">single dashboard.</span></span></p>
<h1 id="_idParaDest-154"><a id="_idTextAnchor154"/><span class="koboSpan" id="kobo.537.1">Implementation of GUI using synchronized cloud variables</span></h1>
<p><span class="koboSpan" id="kobo.538.1">After uploading the</span><a id="_idIndexMarker600"/><span class="koboSpan" id="kobo.539.1"> code to the device, it’s time to set up a dashboard for web and mobile to visualize the data with different widgets. </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.540.1">Figure 7</span></em></span><em class="italic"><span class="koboSpan" id="kobo.541.1">.11</span></em><span class="koboSpan" id="kobo.542.1"> demonstrates the visualization of readings with </span><span class="No-Break"><span class="koboSpan" id="kobo.543.1">different widgets.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer124">
<span class="koboSpan" id="kobo.544.1"><img alt="Figure 7.11 – Thing dashboard" src="image/B19752_07_11.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.545.1">Figure 7.11 – Thing dashboard</span></p>
<p><span class="koboSpan" id="kobo.546.1">We have three </span><a id="_idIndexMarker601"/><span class="koboSpan" id="kobo.547.1">different readings, </span><strong class="bold"><span class="koboSpan" id="kobo.548.1">Temperature</span></strong><span class="koboSpan" id="kobo.549.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.550.1">Humidity</span></strong><span class="koboSpan" id="kobo.551.1">, and </span><strong class="bold"><span class="koboSpan" id="kobo.552.1">Air Quality</span></strong><span class="koboSpan" id="kobo.553.1">, from the Sense the Environment thing and two readings, </span><strong class="bold"><span class="koboSpan" id="kobo.554.1">RedLED</span></strong><span class="koboSpan" id="kobo.555.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.556.1">GreenLED</span></strong><span class="koboSpan" id="kobo.557.1">, from the Indoor Device MKR Wi-Fi 1010 thing. </span><span class="koboSpan" id="kobo.557.2">As the temperature from the Indoor Device MKR Wi-Fi 1010 thing is synced with the Sense the Environment thing, we are only displaying one temperature value here. </span><span class="koboSpan" id="kobo.557.3">For every reading, we use different widget controls to demonstrate how they all work. </span><span class="koboSpan" id="kobo.557.4">But for the LED status, we used an LED </span><span class="No-Break"><span class="koboSpan" id="kobo.558.1">widget control.</span></span></p>
<p><span class="koboSpan" id="kobo.559.1">The main thing to note about this dashboard is that we are using values from two different things but the same dashboard to visualize the values. </span><span class="koboSpan" id="kobo.559.2">This example demonstrates that we can display the values from multiple things on a single dashboard. </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.560.1">Figure 7</span></em></span><em class="italic"><span class="koboSpan" id="kobo.561.1">.12</span></em><span class="koboSpan" id="kobo.562.1"> shows how easy it is to link any cloud variable to a </span><span class="No-Break"><span class="koboSpan" id="kobo.563.1">widget control.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer125">
<span class="koboSpan" id="kobo.564.1"><img alt="Figure 7.12 – Linking a cloud variable to a widget control" src="image/B19752_07_12.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.565.1">Figure 7.12 – Linking a cloud variable to a widget control</span></p>
<p><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.566.1">Figure 7</span></em></span><em class="italic"><span class="koboSpan" id="kobo.567.1">.12</span></em><span class="koboSpan" id="kobo.568.1"> shows how </span><a id="_idIndexMarker602"/><span class="koboSpan" id="kobo.569.1">to link the </span><strong class="bold"><span class="koboSpan" id="kobo.570.1">RedLed</span></strong><span class="koboSpan" id="kobo.571.1"> cloud variable from </span><strong class="bold"><span class="koboSpan" id="kobo.572.1">Indoor Device MKR Wi-Fi 1010</span></strong><span class="koboSpan" id="kobo.573.1"> to a widget. </span><span class="koboSpan" id="kobo.573.2">But, as you can see, you can select any cloud variable from any thing and link it with the widget control. </span><span class="koboSpan" id="kobo.573.3">So, we can see how the Arduino IoT Cloud dashboard allows us to create a single dashboard for multiple </span><span class="No-Break"><span class="koboSpan" id="kobo.574.1">things easily.</span></span></p>
<p><span class="koboSpan" id="kobo.575.1">In this section, we discussed how to set up a dashboard that contains widgets attached to multiple things. </span><span class="koboSpan" id="kobo.575.2">In the next section, we will discuss limits and cloud variable synchronization </span><span class="No-Break"><span class="koboSpan" id="kobo.576.1">in detail.</span></span></p>
<h1 id="_idParaDest-155"><a id="_idTextAnchor155"/><span class="koboSpan" id="kobo.577.1">Limitations of cloud variable/property synchronization</span></h1>
<p><span class="koboSpan" id="kobo.578.1">Arduino IoT Cloud offers a platform for IoT device management and communication, including TTC between devices. </span><span class="koboSpan" id="kobo.578.2">While it provides valuable features for connecting and managing IoT devices, there are </span><a id="_idIndexMarker603"/><span class="koboSpan" id="kobo.579.1">some drawbacks </span><span class="No-Break"><span class="koboSpan" id="kobo.580.1">to consider:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.581.1">Latency</span></strong><span class="koboSpan" id="kobo.582.1">: TTC can introduce latency, which is the delay between when a change is made to a variable on one device and when it is reflected on the other device. </span><span class="koboSpan" id="kobo.582.2">This can be a problem for applications that require very low latency, such as controlling a robot in </span><span class="No-Break"><span class="koboSpan" id="kobo.583.1">real time.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.584.1">Offline device challenges</span></strong><span class="koboSpan" id="kobo.585.1">: Devices that are temporarily offline may miss important messages or updates from other devices. </span><span class="koboSpan" id="kobo.585.2">Ensuring that devices can catch up on missed communications when they reconnect to the network can be complex </span><span class="No-Break"><span class="koboSpan" id="kobo.586.1">to implement.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.587.1">Dependency on internet connectivity</span></strong><span class="koboSpan" id="kobo.588.1">: Arduino IoT Cloud relies on an internet connection for communication between devices. </span><span class="koboSpan" id="kobo.588.2">If the internet connection goes down, the devices may lose their ability to communicate with </span><span class="No-Break"><span class="koboSpan" id="kobo.589.1">each other.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.590.1">Limited functionality</span></strong><span class="koboSpan" id="kobo.591.1">: TTC is not as flexible as some other IoT communication protocols. </span><span class="koboSpan" id="kobo.591.2">For example, you cannot use TTC to send arbitrary data </span><span class="No-Break"><span class="koboSpan" id="kobo.592.1">between devices.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.593.1">Dependency on the cloud</span></strong><span class="koboSpan" id="kobo.594.1">: TTC relies on Arduino IoT Cloud to function. </span><span class="koboSpan" id="kobo.594.2">This means that if the cloud is </span><a id="_idIndexMarker604"/><span class="koboSpan" id="kobo.595.1">unavailable, your TTC connections will </span><span class="No-Break"><span class="koboSpan" id="kobo.596.1">not work.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.597.1">When considering Arduino IoT Cloud for TTC in your IoT project, it’s essential to weigh these drawbacks against the platform’s benefits and assess whether it aligns with your specific project requirements and constraints. </span><span class="koboSpan" id="kobo.597.2">Additionally, exploring alternative IoT platforms and communication solutions may be necessary to ensure the best fit for </span><span class="No-Break"><span class="koboSpan" id="kobo.598.1">your needs.</span></span></p>
<p><span class="koboSpan" id="kobo.599.1">In this section, we have discussed in detail the limitations of Arduino IoT Cloud TTC. </span><span class="koboSpan" id="kobo.599.2">In the next section, we will explore how you can use TTC for different types of </span><span class="No-Break"><span class="koboSpan" id="kobo.600.1">cloud variables.</span></span></p>
<h1 id="_idParaDest-156"><a id="_idTextAnchor156"/><span class="koboSpan" id="kobo.601.1">What next?</span></h1>
<p><span class="koboSpan" id="kobo.602.1">We still have a lot of options available to explore, but now it’s your turn to use different sensors and development boards to do some more experiments and learn from them. </span><span class="koboSpan" id="kobo.602.2">In this chapter, we have only used one </span><strong class="source-inline"><span class="koboSpan" id="kobo.603.1">Temperature</span></strong><span class="koboSpan" id="kobo.604.1"> cloud variable synced between two things, but you can try using this feature to sync multiple cloud variables with multiple things. </span><span class="koboSpan" id="kobo.604.2">Next, create a dashboard for multiple things to visualize all the values in one place. </span><span class="koboSpan" id="kobo.604.3">We configured simple LEDs to turn on and off according to the temperature, but you can also use relays to control the heating/cooling system of your indoor home/office and warehouse environment, or you can create an alarm in case of a temperature increase using this </span><span class="No-Break"><span class="koboSpan" id="kobo.605.1">TTC feature.</span></span></p>
<h1 id="_idParaDest-157"><a id="_idTextAnchor157"/><span class="koboSpan" id="kobo.606.1">Summary</span></h1>
<p><span class="koboSpan" id="kobo.607.1">In this chapter, we explored D2D communication and the benefits of Arduino IoT Cloud for thing-to-thing communication. </span><span class="koboSpan" id="kobo.607.2">We discussed how to develop a solution for thing-to-thing communication. </span><span class="koboSpan" id="kobo.607.3">We also explored how easy it is to sync the cloud variable with other things just using a GUI. </span><span class="koboSpan" id="kobo.607.4">We set up a dashboard, where we linked the widget controls with multiple thing cloud variables. </span><span class="koboSpan" id="kobo.607.5">Finally, we discussed the limits of Arduino IoT Cloud thing-to-thing communication </span><span class="No-Break"><span class="koboSpan" id="kobo.608.1">in detail.</span></span></p>
<p><span class="koboSpan" id="kobo.609.1">In the next chapter, we are going to explore how to use the Arduino IoT Cloud SDK. </span><span class="koboSpan" id="kobo.609.2">This chapter is for developers who are eager to learn how to use Arduino IoT Cloud programmatically and develop custom solutions using Arduino IoT Cloud or integrate Arduino IoT Cloud with </span><span class="No-Break"><span class="koboSpan" id="kobo.610.1">third-party platforms.</span></span></p>
</div>
</body></html>