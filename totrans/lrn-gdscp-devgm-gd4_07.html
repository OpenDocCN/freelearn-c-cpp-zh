<html><head></head><body>
		<div id="_idContainer137">
			<h1 class="chapter-number" id="_idParaDest-183"><a id="_idTextAnchor523"/>7</h1>
			<h1 id="_idParaDest-184"><a id="_idTextAnchor524"/>Making the Character Move</h1>
			<p>If I say <strong class="bold">physics engine</strong>, you might have images flashing in front of your eyes of scientists doing <a id="_idIndexMarker390"/>all kinds of simulations of real-world phenomena trying to predict what would happen in the real world – maybe to study car crashes, the weather, or wind <span class="No-Break">park optimization.</span></p>
			<p>Games use a physics engine, too. However, in games, this engine has other priorities. Unlike the ones scientists use, physics in games doesn’t have to be 100% accurate. It just has to give the feeling of realism or, contrarily, the <span class="No-Break">lack thereof.</span></p>
			<p>In this chapter, we will learn how to use the physics engine of Godot, so we don’t have to deal with complex interactions such as moving characters or collisions between multiple physics objects within <span class="No-Break">the world.</span></p>
			<p>First, we will have to make a detour and refresh our basics in two-dimensional vector math. I promise a little bit of math <span class="No-Break">won’t hurt!</span></p>
			<p>In this chapter, we will cover the following <span class="No-Break">main topics:</span></p>
			<ul>
				<li>2D <span class="No-Break">vector math</span></li>
				<li>The <span class="No-Break">physics engine</span></li>
				<li>Keyboard and <span class="No-Break">controller input</span></li>
				<li>Debugging a <span class="No-Break">live game</span><a id="_idTextAnchor525"/></li>
			</ul>
			<h1 id="_idParaDest-185"><a id="_idTextAnchor526"/>Technical requirements</h1>
			<p>As for every chapter, you can find the final code on the GitHub repository in the subfolder for <span class="No-Break">this chapter:</span></p>
			<p><a href="https://github.com/PacktPublishing/Learning-GDScript-by-Developing-a-Game-with-Godot-4/tree/main/chapter07"><span class="No-Break">https://github.com/PacktPublishing/Learning-GDScript-by-Developing-a-Game-with-Godot-4/tree/main/chapter07</span></a><span class="No-Break">.</span></p>
			<h1 id="_idParaDest-186"><a id="_idTextAnchor527"/>Vector math refresher</h1>
			<p>I know math isn’t the first thing people think about when talking about game development, but the <a id="_idIndexMarker391"/>truth is that it’s an important part when dealing with positions, movement, and physics. It is a great tool that will serve us well along our complete game <span class="No-Break">development journey.</span></p>
			<p>In this section, we’ll refresh our minds on vectors and how to <span class="No-Break">manipulate them<a id="_idTextAnchor528"/>.</span></p>
			<h2 id="_idParaDest-187"><a id="_idTextAnchor529"/>The 2D coordinate system</h2>
			<p>Let’s first <a id="_idIndexMarker392"/>look at how we define positions <a id="_idIndexMarker393"/>in 2D space. Two-dimensional space is defined by two axes: a horizontal axis named <em class="italic">x</em> and a vertical axis named <em class="italic">y</em>. Each point within the space can be expressed as values over <span class="No-Break">these axes:</span></p>
			<div>
				<div class="IMG---Figure" id="_idContainer109">
					<img alt="Figure 7.1 – A point in 2D space is defined by an x and a y value" src="image/B19358_07_01.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.1 – A point in 2D space is defined by an x and a y value</p>
			<p>Mathematically, and in <a id="_idIndexMarker394"/>this book, we write these positions as <strong class="source-inline">(x, y)</strong>. The first <a id="_idIndexMarker395"/>value in the brackets is the <em class="italic">x</em> value and the second is the <span class="No-Break"><em class="italic">y</em></span><span class="No-Break"> value.</span></p>
			<p>In school, you probably learned that the x-axis is positive to the right side and negative to the left, while the y-axis is positive when going upward and negative downward. However, this is not how they work in computer graphics! In Godot, just like in almost every other game engine and computer graphics application, the y-axis is positive when <span class="No-Break">going </span><span class="No-Break"><em class="italic">downward</em></span><span class="No-Break">:</span></p>
			<div>
				<div class="IMG---Figure" id="_idContainer110">
					<img alt="Figure 7.2 – The point (2, -2) in the Godot engine" src="image/B19358_07_02.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.2 – The point (2, -2) in the Godot engine</p>
			<p>This might <a id="_idIndexMarker396"/>be counterintuitive at first, but it <a id="_idIndexMarker397"/>will grow on you after <span class="No-Break">some time.</span></p>
			<p class="callout-heading">Important note</p>
			<p class="callout">The reason the y-axis points down is that computer graphics were calculated this way, with the pixel on the screen that corresponded to an x of <strong class="source-inline">0</strong> and a y of <strong class="source-inline">0</strong> being in the top left of the screen. The two prevalent <span class="No-Break">explanations are:</span></p>
			<p class="callout">Early computers often displayed Latin-based text, which goes from left to right, top to bottom, so they used to have the (<strong class="source-inline">0, 0</strong>) character in the <span class="No-Break">top left.</span></p>
			<p class="callout">Early monitors were CRT screens, which often scanned the screen with an electron beam from the top left and worked their way, line by <span class="No-Break">line, down<a id="_idTextAnchor530"/>ward.</span></p>
			<h2 id="_idParaDest-188"><a id="_idTextAnchor531"/>What is a vector?</h2>
			<p>What if we <a id="_idIndexMarker398"/>think of a position as an offset from the (<strong class="source-inline">0, 0</strong>) point, i.e. the origin? Well, that is what we call a <strong class="bold">vector</strong>! You can think of them as an arrow going from the origin to the position <span class="No-Break">we defined.</span></p>
			<div>
				<div class="IMG---Figure" id="_idContainer111">
					<img alt="Figure 7.3 – A vector that is defined from (0, 0) to (2, 3)" src="image/B19358_07_03.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.3 – A vector that is defined from (0, 0) to (2, 3)</p>
			<p>Mathematically, vectors <a id="_idIndexMarker399"/>are defined by a <strong class="bold">magnitude</strong> (length) and a <strong class="bold">direction</strong> (angle). We are <a id="_idIndexMarker400"/>going to use the <em class="italic">offset from the origin</em> way of thinking because it is more intuitive in terms of <span class="No-Break">game development.</span></p>
			<p>The math we’ll learn will apply to all kinds of vectors, positions, and forces, even when dealing with vectors in more than two dimensions. Let’s constrain ourselves to <span class="No-Break">two dimensions.</span></p>
			<p>In Godot, a 2D vector is represented by the <strong class="source-inline">Vector2</strong> and <strong class="source-inline">Vector2i</strong> classes. To create a vector, you simply give an x and a y value to <span class="No-Break">the constructor:</span></p>
			<pre class="source-code">
var vector: <a id="_idTextAnchor532"/>Vector2 = <strong class="bold">Vector2(2, 3)</strong></pre>			<p>Now, we can just access the x and y variables of this vector <span class="No-Break">as usual:</span></p>
			<pre class="source-code">
<strong class="bold">vector.x</strong> = 2
if <strong class="bold">vector.y</strong> &gt; 0:
   # Rest of the code</pre>			<p>The <strong class="source-inline">Vector2</strong> class basically just holds an x and a y component for our vector and can thus represent a vector <a id="_idIndexMarker401"/>as well as a position, like we saw in the previous <em class="italic">The 2D coordinate </em><span class="No-Break"><em class="italic">system</em></span><span class="No-Break"> section.</span></p>
			<p><strong class="source-inline">Vector2i</strong> is very similar to <strong class="source-inline">Vector2</strong>, the only difference is that the x and y coordinates need to be integer values, while <strong class="source-inline">Vector2</strong> uses floating point numbers. We’ll stick with the <strong class="source-inline">Vector2</strong> class for the rest of the chapter <span class="No-Break">a<a id="_idTextAnchor533"/>nd book.</span></p>
			<h2 id="_idParaDest-189"><a id="_idTextAnchor534"/>Scaling vectors</h2>
			<p>To scale a vector, making it <a id="_idIndexMarker402"/>longer or shorter, we just have to multiply or divide the x and y values by the same number. The number by which we multiply the vector <a id="_idIndexMarker403"/>is called the <strong class="bold">scalar</strong>. For example, if we want to make a vector double in length, we just multiply its x and y values <span class="No-Break">by </span><span class="No-Break"><strong class="source-inline">2</strong></span><span class="No-Break">:</span></p>
			<p><strong class="source-inline">(x, y) * 2 = (x * 2, y * </strong><span class="No-Break"><strong class="source-inline">2)</strong></span></p>
			<p><span class="No-Break"><em class="italic">Figure 7</em></span><em class="italic">.4</em> shows the <span class="No-Break">scaled vector:</span></p>
			<div>
				<div class="IMG---Figure" id="_idContainer112">
					<img alt="Figure 7.4 – Vector (1, 2) scaled by 2 results in vector (2, 4)" src="image/B19358_07_04.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.4 – Vector (1, 2) scaled by 2 results in vector (2, 4)</p>
			<p>In Godot, we can <a id="_idIndexMarker404"/>directly multiply or divide vectors using normal mathematical operations and don’t have to manually set the x or <span class="No-Break">y value:</span></p>
			<pre class="source-code">
vector <strong class="bold">*</strong> 2
<a id="_idTextAnchor535"/>vector <strong class="bold">/</strong> 2</pre>			<p>The interpreter will run the multiplication or division on both the x and y components for us and spit out a new vector with <span class="No-Break">t<a id="_idTextAnchor536"/>he result.</span></p>
			<h2 id="_idParaDest-190"><a id="_idTextAnchor537"/>Adding and subtracting vectors</h2>
			<p>Next, we can <a id="_idIndexMarker405"/>also add two vectors together. We do this by adding the <em class="italic">x</em> values together <a id="_idIndexMarker406"/>and taking the result as the x value for the new vector, and doing likewise for the <span class="No-Break"><em class="italic">y</em></span><span class="No-Break"> values:</span></p>
			<p><strong class="source-inline">(x1, y1) + (x2, y2) = (x1 + x2, y1 + </strong><span class="No-Break"><strong class="source-inline">y2)</strong></span></p>
			<p><span class="No-Break"><em class="italic">Figure 7</em></span><em class="italic">.5</em> shows the result of <span class="No-Break">vector addition:</span></p>
			<div>
				<div class="IMG---Figure" id="_idContainer113">
					<img alt="Figure 7.5 – Adding (1, 3) to (4, 2) results in vector (5, 5)" src="image/B19358_07_05.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.5 – Adding (1, 3) to (4, 2) results in vector (5, 5)</p>
			<p>You can think <a id="_idIndexMarker407"/>of this operation as first moving to the first vector’s position <a id="_idIndexMarker408"/>and then, from there, moving along the second vector. It’s as if you glue the second vector to the end of the <span class="No-Break">first one.</span></p>
			<p>It doesn’t matter in what order you add the two vectors together, the operation will always result in the <span class="No-Break">same vector.</span></p>
			<p><span class="No-Break"><em class="italic">Figure 7</em></span><em class="italic">.6</em> shows the operation in the <span class="No-Break">other order:</span></p>
			<div>
				<div class="IMG---Figure" id="_idContainer114">
					<img alt="Figure 7.6 – (1, 3) + (4, 2) results in the same vector as (4, 2) + (1, 3)" src="image/B19358_07_06.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.6 – (1, 3) + (4, 2) results in the same vector as (4, 2) + (1, 3)</p>
			<p>Subtracting <a id="_idIndexMarker409"/>vectors works in the same way as adding them together. Just <a id="_idIndexMarker410"/>subtract the individual components. <strong class="source-inline">(x1, y1) - (x2, y2)</strong> is the same as <strong class="source-inline">(x1, y1) + (-</strong><span class="No-Break"><strong class="source-inline">x2, -y2)</strong></span><span class="No-Break">.</span></p>
			<p>In Godot, you can easily add or subtract vectors by using the regular plus and <span class="No-Break">minus operators:</span></p>
			<pre class="source-code">
var vector_a: Vector2 = Vector2(2, 3)
var vector_b: Vector2 = Vector2(4, 1)
var vector_c: Vector2 = vector_a <strong class="bold">+</strong> vector_b
var vector_d: Vector2 = vector_a <strong class="bold">-</strong> vector_b</pre>			<p>You’ll see that <strong class="source-inline">vector_c</strong> will contain the sum of vectors a and b, while <strong class="source-inline">vector_d</strong> contains <span class="No-Break">their<a id="_idTextAnchor538"/> subtraction.</span></p>
			<h2 id="_idParaDest-191"><a id="_idTextAnchor539"/>More vector operations</h2>
			<p>Now, as any mathematician will tell you, there are a lot more formulas and operations that can be <a id="_idIndexMarker411"/>done with vectors. A lot of these are very interesting for us as game developers. However, these are a bit more intricate to explain, and the truth is that most of these are already implemented in Godot. We will not have to worry about how they work but knowing that they exist is <span class="No-Break">very important.</span></p>
			<p class="callout-heading">More information</p>
			<p class="callout">There are <a id="_idIndexMarker412"/>more great functions than we will cover here; you can go and have a look at the documentation for <strong class="source-inline">Vector2</strong> <span class="No-Break">yourself: </span><a href="https://docs.godotengine.org/en/stable/classes/class_vector2.html"><span class="No-Break">https://docs.godotengine.org/en/stable/classes/clas<span id="_idTextAnchor540"/>s_vector2.html</span></a><span class="No-Break">.</span></p>
			<h3>Length of a vector</h3>
			<p>The length of <a id="_idIndexMarker413"/>a vector is the distance from the origin, <strong class="source-inline">(0, 0)</strong>,  to the x, y position <a id="_idIndexMarker414"/>the vector represents. We also call this length the magnitude of the vector. To get this length, we simply use the <span class="No-Break"><strong class="source-inline">length()</strong></span><span class="No-Break"> function:</span></p>
			<pre class="source-code">
var vector_length: float = vector.<strong class="bold">length()</strong></pre>			<p><span class="No-Break"><em class="italic">Figure 7</em></span><em class="italic">.7</em> demonstrates <span class="No-Break">this function:</span></p>
			<div>
				<div class="IMG---Figure" id="_idContainer115">
					<img alt="Figure 7.7 – Getting the length of a vector" src="image/B19358_07_07.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.7 – Getting the length of a vector</p>
			<p>In the background, this <strong class="source-inline">length()</strong> function uses the Pythagorean theorem, which, if we were <a id="_idIndexMarker415"/>to write it out manually, would look <span class="No-Break">like this:</span></p>
			<p><strong class="source-inline">sqrt(x * x + y * </strong><span class="No-Break"><strong class="source-inline">y)</strong></span></p>
			<p>The <strong class="source-inline">length()</strong> function will <a id="_idIndexMarker416"/>perform all the necessary calculations for us and will even be faster than if we tried to write this math ourselve<a id="_idTextAnchor541"/>s <span class="No-Break">within GDScript.</span></p>
			<h3>Clamping a vector</h3>
			<p>Sometimes, you want <a id="_idIndexMarker417"/>the length of a vector to stay between <a id="_idIndexMarker418"/>a lower and upper bound. To do this, we use the <span class="No-Break"><strong class="source-inline">clamp()</strong></span><span class="No-Break"> function:</span></p>
			<pre class="source-code">
var clamped_vector: Vector2 = vector.<strong class="bold">clamp(0, 5)</strong></pre>			<p><span class="No-Break"><em class="italic">Figure 7</em></span><em class="italic">.8</em> demonstrates <span class="No-Break">this function:</span></p>
			<div>
				<div class="IMG---Figure" id="_idContainer116">
					<img alt="Figure 7.8 – Clamping a vector between a length of 0 and 5" src="image/B19358_07_08.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.8 – Clamping a vector between a length of 0 and 5</p>
			<p>Whatever the <a id="_idIndexMarker419"/>length of the vector was before, after running this statement <a id="_idIndexMarker420"/>with a <strong class="source-inline">clamp()</strong>, its length wil<a id="_idTextAnchor542"/>l be between <strong class="source-inline">0</strong> <span class="No-Break">and </span><span class="No-Break"><strong class="source-inline">5</strong></span><span class="No-Break">.</span></p>
			<h3>Distance between two points</h3>
			<p>Often, we will need to know the distance between two points in space. For example, when we <a id="_idIndexMarker421"/>want to know the distance between an <a id="_idIndexMarker422"/>enemy and the player to see if the enemy is within shooting range and can shoot at the player. To do this, we use the <span class="No-Break"><strong class="source-inline">distance_to()</strong></span><span class="No-Break"> function:</span></p>
			<pre class="source-code">
var distance: float = vector_a<strong class="bold">.distance_to(vector_b)</strong></pre>			<p><span class="No-Break"><em class="italic">Figure 7</em></span><em class="italic">.9</em> demonstrates <span class="No-Break">this function:</span></p>
			<div>
				<div class="IMG---Figure" id="_idContainer117">
					<img alt="Figure 7.9 – The distance between two vectors" src="image/B19358_07_09.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.9 – The distance between two vectors</p>
			<p>This <strong class="source-inline">distance_to()</strong> function will <a id="_idIndexMarker423"/>return a floating point number, telling <a id="_idIndexMarker424"/>us the exact distance between <a id="_idTextAnchor543"/>the two points <span class="No-Break">in space.</span></p>
			<h3>Rotating a vector</h3>
			<p>Rotating a <a id="_idIndexMarker425"/>vector or position is useful when steering <a id="_idIndexMarker426"/>a vehicle, rotating the player, or adjusting a <span class="No-Break">vector’s direction:</span></p>
			<pre class="source-code">
var vector_b: Vector2 = vector_a.<strong class="bold">rotated(PI)</strong></pre>			<p><span class="No-Break"><em class="italic">Figure 7</em></span><em class="italic">.10</em> demonstrates the <span class="No-Break"><strong class="source-inline">rotated()</strong></span><span class="No-Break"> function:</span></p>
			<div>
				<div class="IMG---Figure" id="_idContainer118">
					<img alt="Figure 7.10 – Rotating a vector with the rotated() function" src="image/B19358_07_10.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.10 – Rotating a vector with the rotated() function</p>
			<p>Note that, by default, angles should be in radians for Godot to be able to work with them. If calculating <a id="_idIndexMarker427"/>in radians is not your strong suit, there <a id="_idIndexMarker428"/>is also the <strong class="source-inline">deg_to_rad()</strong> function that takes a value in degrees and converts it <span class="No-Break">into radians:</span></p>
			<pre class="source-code">
var vector_b: Vector2 = vector_a.rotated(<strong class="bold">deg_to_rad(180)</strong>)</pre>			<p>This <strong class="source-inline">deg_to_rad()</strong> function is very useful <span class="No-Break">and fast.</span></p>
			<p class="callout-heading">Important note</p>
			<p class="callout">Remember that a full circle is 360 degrees or Pi * 2, also known as Tau, radians, which means that 1 radian roughly equals <span class="No-Break">57.3 degrees.</span></p>
			<h3>Normalizing a vector</h3>
			<p>Normalizing a vector means that we change its length to be exactly 1. A vector that is longer than 1 will <a id="_idIndexMarker429"/>get shortened, while a vector that is shorter than 1 will get longer. We call the <a id="_idIndexMarker430"/>resulting vector a <span class="No-Break"><strong class="bold">unit vector</strong></span><span class="No-Break">:</span></p>
			<pre class="source-code">
var unit_vector: Vector2 = vector.<strong class="bold">normalized()</strong></pre>			<p><span class="No-Break"><em class="italic">Figure 7</em></span><em class="italic">.11</em> demonstrates <a id="_idIndexMarker431"/><span class="No-Break">this function:</span></p>
			<div>
				<div class="IMG---Figure" id="_idContainer119">
					<img alt="Figure 7.11 – Normalizing a vector sets its length to 1" src="image/B19358_07_11.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.11 – Normalizing a vector sets its length to 1</p>
			<p>A normalized vector is useful to work with because what we are left with is the direction of the original vector without its magnitude. In this form, we can easily use the unit vector for other math operations, such as when we want to keep the velocity of a <span class="No-Break">car constant:</span></p>
			<pre class="source-code">
velocity = velocity.normalized() * 500.0</pre>			<p>This way we keep <strong class="source-inline">velocity</strong> always at a length of 500.0. Going deeper and really learning the math behind all these functions will be beneficial for sure! However, with the understanding gained from this section and the functions described here, we can already make lots of games. I encourage you to open a math textbook or look up some instructional videos online but don’t feel bad if you’re not up for <span class="No-Break">it yet.</span></p>
			<p class="callout-heading">Learning resources</p>
			<p class="callout">Here are three great resources to learn more mathematics for <span class="No-Break">game development:</span></p>
			<p class="callout">The official Godot documentation has a great article on vector math within the <span class="No-Break">engine: </span><a href="https://docs.godotengine.org/en/stable/tutorials/math/vector_math.html"><span class="No-Break">https://docs.godotengine.org/en/stable/tutorials/math/vector_math.html</span></a><span class="No-Break">.</span></p>
			<p class="callout">James M. Van Verth and Lars M. Bishop’s book <em class="italic">Essential Mathematics for Games and Interactive </em><span class="No-Break"><em class="italic">Applications</em></span><span class="No-Break">: </span><a href="https://www.sciencedirect.com/book/9780123742971/essential-mathematics-for-games-and-interactive-applications"><span class="No-Break">https://www.sciencedirect.com/book/9780123742971/essential-mathematics-for-games-and-interactive-applications</span></a><span class="No-Break">.</span></p>
			<p class="callout">Freya Holmér’s <em class="italic">Math for Game Devs</em> video <span class="No-Break">series: </span><a href="https://youtube.com/playlist?list=PLImQaTpSAdsArRFFj8bIfqMk2X7Vlf3XF&amp;si=JZNObwqQNg3ZbGLy."><span class="No-Break">https://youtube.com/playlist?list=PLImQaTpSAdsArRFFj8bIfqMk2X7</span>
<span class="No-Break">Vlf3XF&amp;si=JZNObwqQNg3ZbGLy.</span></a></p>
			<p>Alright, with the <a id="_idIndexMarker432"/>theory of vector math brushed up <a id="_idIndexMarker433"/>and fresh in our minds, let’s dive into ma<a id="_idTextAnchor544"/>king the player <span class="No-Break">character move.</span></p>
			<h1 id="_idParaDest-192"><a id="_idTextAnchor545"/>Moving the player character</h1>
			<p>Cool, after that <a id="_idIndexMarker434"/>detour to vector math, let’s continue working on our game. The first thing we’ll st<a id="_idTextAnchor546"/>art out with is <span class="No-Break">player movement.</span></p>
			<h2 id="_idParaDest-193"><a id="_idTextAnchor547"/>Changing the current player node</h2>
			<p>Godot has a <a id="_idIndexMarker435"/>physics engine baked into it. To utilize it, we will have to use the physics nodes provided by Godot itself. The player is currently a <strong class="bold">Node2D</strong>, but we actually want it to be <span class="No-Break">a </span><span class="No-Break"><strong class="bold">CharacterBody2D</strong></span><span class="No-Break">.</span></p>
			<p>Luckily, it is <a id="_idIndexMarker436"/>very easy to change the type of a node. To do so, follow <span class="No-Break">these steps:</span></p>
			<ol>
				<li>Right-click on the <span class="No-Break"><strong class="source-inline">Player</strong></span><span class="No-Break"> node.</span></li>
				<li>Select <strong class="bold">Change Type</strong> as shown in the <span class="No-Break">following figure:</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer120">
					<img alt="Figure 7.12 – Node type can be changed through the menu that pops up when right-clicking that node" src="image/B19358_07_12.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.12 – Node type can be changed through the menu that pops up when right-clicking that node</p>
			<ol>
				<li value="3">Search for <strong class="bold">CharacterBody2D</strong> <span class="No-Break">as follows:</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer121">
					<img alt="Figure 7.13 – Search for the CharacterBody2D node type" src="image/B19358_07_13.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.13 – Search for the CharacterBody2D node type</p>
			<ol>
				<li value="4">Select <a id="_idIndexMarker437"/>the <strong class="bold">CharacterBody2D</strong> node and you will see the icon for the <strong class="source-inline">Player</strong> node change to reflect <span class="No-Break">our selection:</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer122">
					<img alt="Figure 7.14 – The player node changes from Node2D to CharacterBody2D" src="image/B19358_07_14.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.14 – The player node changes from Node2D to CharacterBody2D</p>
			<ol>
				<li value="5">You will notice that a yellow warning sign appeared. If you hover over it, you’ll see it tells us that the player needs <strong class="source-inline">CollisionShape2D</strong> <span class="No-Break">or </span><span class="No-Break"><strong class="source-inline">CollisionPolygon2D</strong></span><span class="No-Break">.</span></li>
			</ol>
			<p>These shapes help us to do correct collision handling. Let’s ignore that for now. We will deal with collision detection in <a href="B19358_09.xhtml#_idTextAnchor590"><span class="No-Break"><em class="italic">Chapter 9</em></span></a><span class="No-Break">.</span></p>
			<p>The script <a id="_idIndexMarker438"/>of our player will still work as before because the <strong class="bold">CharacterBody2D</strong> node is a child class of the <strong class="source-inline">Node2D</strong> class and, as we saw in <a href="B19358_04.xhtml#_idTextAnchor164"><span class="No-Break"><em class="italic">Chapter 4</em></span></a>, treating <strong class="bold">CharacterBody2D</strong> as <strong class="bold">Node2D</strong> works because of the principles <span class="No-Break">of polymorphism.</span></p>
			<p>We want to use certain functionalities of the <strong class="bold">CharacterBody2D</strong> node in our script, so we will have to change the class our player script extends from <span class="No-Break">to </span><span class="No-Break"><strong class="bold">CharacterBody2D</strong></span><span class="No-Break">:</span></p>
			<pre class="source-code">
extends <strong class="bold">CharacterBody2D</strong>
# Rest of the player script…</pre>			<p>The <strong class="source-inline">Player</strong> node is correctly converted to a physics entity. Let’s learn ho<a id="_idTextAnchor548"/>w to move it in the <span class="No-Break">next section.</span></p>
			<h2 id="_idParaDest-194"><a id="_idTextAnchor549"/>Applying forces to the player</h2>
			<p>Now that the player character is a physics body, we will be able to apply physical forces to it and make <span class="No-Break">it move!</span></p>
			<p>Before we <a id="_idIndexMarker439"/>implement the complete movement schema, let’s first make it so the character moves toward the right. Just add this little snippet of code to the <span class="No-Break">player script:</span></p>
			<pre class="source-code">
func _physics_process(delta: float):
   velocity = Vector2(500, 0)
   move_and_slide()</pre>			<p>Moving a <strong class="bold">CharacterBody2D</strong> node has to be done in <span class="No-Break">two steps:</span></p>
			<ol>
				<li>Calculate and set the <strong class="source-inline">velocity</strong> variable for the body. This velocity is a member variable of <strong class="bold">CharacterBody2D</strong> and represents the speed and direction the body is moving in. In this example, I set it to a vector of <strong class="source-inline">(500, 0)</strong>, which means a force to <span class="No-Break">the right.</span></li>
				<li>Call the <strong class="source-inline">move_and_slide()</strong> function. This function will apply the velocity we just set and handle all the collision detection for us. If a collision is detected, this function will also slide along the surface of that collision shape. This results in natural-looking <a id="_idIndexMarker440"/>movement that does not snag on things too much. <span class="No-Break"><em class="italic">Figure 7</em></span><em class="italic">.15</em> demonstrates <span class="No-Break">this function:</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer123">
					<img alt="Figure 7.15 – move_and_slide() encountering a collision and sliding along the surface" src="image/B19358_07_15.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.15 – move_and_slide() encountering a collision and sliding along the surface</p>
			<p class="list-inset">The velocity sets the force we want to apply to the character. Calling <strong class="source-inline">move_and_slide()</strong> then truly applies that force and calculates all the repercussions and interactions between other physics bodies. For now, there are no other bodies to interact with; we’ll implement those in <a href="B19358_09.xhtml#_idTextAnchor590"><span class="No-Break"><em class="italic">Chapter 9</em></span></a><span class="No-Break">.</span></p>
			<ol>
				<li value="3">Run the game and you’ll see the player character slowly scroll off the screen toward <span class="No-Break">the right.</span></li>
			</ol>
			<p>As an experiment, try making the character <span class="No-Break">move upward.</span></p>
			<p>In the preceding code snippet, you can see that we use the <strong class="source-inline">_physics_process()</strong> function to do our movement calculations. Let’s have a look at why we use this function<a id="_idTextAnchor550"/> specifically in the <span class="No-Break">next section.</span></p>
			<h2 id="_idParaDest-195"><a id="_idTextAnchor551"/>Process and physics process functions</h2>
			<p>We already saw the <strong class="source-inline">_process()</strong> function briefly in <a href="B19358_01.xhtml#_idTextAnchor014"><span class="No-Break"><em class="italic">Chapter 1</em></span></a> but didn’t use it back then. This function gets executed for every frame the game runs on each node, which means that <a id="_idIndexMarker441"/>if the game runs at 1<a id="_idTextAnchor552"/><a id="_idTextAnchor553"/>20 <a id="_idTextAnchor554"/>frames per second, this function gets executed 120 times per second. In reality, the framerate of a game <a id="_idIndexMarker442"/>varies a lot, so the <strong class="source-inline">_process()</strong> function can be run more or fewer times <span class="No-Break">per second.</span></p>
			<p>For physics simulations, varying the frame rate is a problem. Physics calculations can quickly become very inaccurate, miss collisions, and introduce jitter if the framerate at which they get done isn’t stable. This is why physics engines introduce the concept of physics frames. They get executed at a stable interval and try very hard not to fluctuate. So, the <strong class="source-inline">_process()</strong> function gets executed as many times per second as possible, while the <strong class="source-inline">_physics_process()</strong> function gets executed at a rate that is as stable <span class="No-Break">as possible.</span></p>
			<p>This is why we use <strong class="source-inline">_physics_process()</strong> in the previous example. This function gets called every physics frame, every time the physics calculations happen. By default, in Godot, this rate is 60 times <span class="No-Break">per second.</span></p>
			<p>The <strong class="source-inline">delta</strong> parameter provides us with the elapsed time since the last time the <strong class="source-inline">_physics_process()</strong> function was called, just like the <strong class="source-inline">delta</strong> parameter in the regular <strong class="source-inline">_process()</strong> function. When we have 60 physics frames per second, this time should be stable at 1.0 / 60.0 frames per second  =  <span class="No-Break">0.01667 seconds.</span></p>
			<p>Both <strong class="source-inline">_process()</strong> and <strong class="source-inline">_physics_process()</strong> work very similarly in that they get called periodically during the execution of the game. But for physics calculations<a id="_idTextAnchor555"/>, we want to <span class="No-Break">use </span><span class="No-Break"><strong class="source-inline">_physics_process()</strong></span><span class="No-Break">.</span></p>
			<h2 id="_idParaDest-196"><a id="_idTextAnchor556"/>Mapping input</h2>
			<p>To move the <a id="_idIndexMarker443"/>player’s character in the direction the player intended to, we first need input from the player. This input is typically given through a keyboard, mouse, <span class="No-Break">or controller.</span></p>
			<p>The common input methods for moving a video game character are summarized in <span class="No-Break"><em class="italic">Table 7.1</em></span><span class="No-Break">:</span></p>
			<table class="No-Table-Style _idGenTablePara-1" id="table001-3">
				<colgroup>
					<col/>
					<col/>
					<col/>
					<col/>
					<col/>
				</colgroup>
				<thead>
					<tr class="No-Table-Style">
						<td class="No-Table-Style"/>
						<td class="No-Table-Style">
							<p><span class="No-Break"><strong class="bold">Arrows</strong></span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break"><strong class="bold">Keys</strong></span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break"><strong class="bold">Analog stick</strong></span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break"><strong class="bold">D-pad</strong></span></p>
						</td>
					</tr>
				</thead>
				<tbody>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span class="No-Break"><strong class="bold">Move left</strong></span></p>
						</td>
						<td class="No-Table-Style">
							<p><span lang="en-US" xml:lang="en-US">←</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span lang="en-US" xml:lang="en-US">A</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span lang="en-US" xml:lang="en-US">Left </span><span class="No-Break" lang="en-US" xml:lang="en-US">on x-axis</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span lang="en-US" xml:lang="en-US">←</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span class="No-Break"><strong class="bold">Move right</strong></span></p>
						</td>
						<td class="No-Table-Style">
							<p><span lang="en-US" xml:lang="en-US">→</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span lang="en-US" xml:lang="en-US">D</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span lang="en-US" xml:lang="en-US">Right </span><span class="No-Break" lang="en-US" xml:lang="en-US">on x-axis</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span lang="en-US" xml:lang="en-US">→</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span class="No-Break"><strong class="bold">Move up</strong></span></p>
						</td>
						<td class="No-Table-Style">
							<p><span lang="en-US" xml:lang="en-US">↑</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span lang="en-US" xml:lang="en-US">W</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span lang="en-US" xml:lang="en-US">Up </span><span class="No-Break" lang="en-US" xml:lang="en-US">on y-axis</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span lang="en-US" xml:lang="en-US">↑</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span class="No-Break"><strong class="bold">Move down</strong></span></p>
						</td>
						<td class="No-Table-Style">
							<p><span lang="en-US" xml:lang="en-US">↓</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span lang="en-US" xml:lang="en-US">S</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span lang="en-US" xml:lang="en-US">Down </span><span class="No-Break" lang="en-US" xml:lang="en-US">on y-axis</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span lang="en-US" xml:lang="en-US">↓</span></p>
						</td>
					</tr>
				</tbody>
			</table>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Table 7.1 – Input methods for moving a video game character</p>
			<p>To coordinate <a id="_idIndexMarker444"/>all these different inputs and devices into one coherent system, Godot has a built-in <strong class="bold">input map</strong> tool. This will manage the complexity for us, so we can just focus on using the inputs within <span class="No-Break">the game.</span></p>
			<p>The input <a id="_idIndexMarker445"/>map basically groups <strong class="bold">input events</strong> (such as the <a id="_idIndexMarker446"/>left arrow, the <em class="italic">A</em> key, the left joystick movement, and the left button on the D-pad) into one <strong class="bold">action</strong> (moving left). All we have to do is define each action and link all the input operations we want <span class="No-Break">to support.</span></p>
			<p>Let’s set up our <span class="No-Break">input map:</span></p>
			<ol>
				<li>Open up the <strong class="bold">Project Settings</strong>. You’ll find these in the <strong class="bold">Project</strong> menu item at the top of <span class="No-Break">the editor.</span></li>
				<li>Then navigate to the <strong class="bold">Input </strong><span class="No-Break"><strong class="bold">Map</strong></span><span class="No-Break"> tab:</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer124">
					<img alt="Figure 7.16 – The Input Map tab within Project Settings" src="image/B19358_07_16.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.16 – The Input Map tab within Project Settings</p>
			<ol>
				<li value="3">Type <strong class="source-inline">move_left</strong> in the input field that says <strong class="bold">Add New Action</strong> and press <strong class="bold">Add</strong>. You’ll see <a id="_idIndexMarker447"/>a new action appear in the main section of the <span class="No-Break">window now:</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer125">
					<img alt="Figure 7.17 – Adding a new action called move_left" src="image/B19358_07_17.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.17 – Adding a new action called <strong class="source-inline">move_left</strong></p>
			<ol>
				<li value="4">Press the <strong class="bold">+</strong> sign next to the action name to add an event to <span class="No-Break">our action.</span></li>
				<li>Now, with the top input field selected, press the left-arrow key on <span class="No-Break">your keyboard.</span></li>
				<li>Make sure <strong class="bold">Physical Keycode</strong> is selected in the bottom dropdown menu and press <strong class="bold">OK</strong> to add the event to <span class="No-Break">the action:</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer126">
					<img alt="Figure 7.18 – Configuring the event to be the left arrow key" src="image/B19358_07_18.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.18 – Configuring the event to be the left arrow key</p>
			<p class="list-inset">Notice that <a id="_idIndexMarker448"/>the physical keycode is selected at <span class="No-Break">the bottom.</span></p>
			<ol>
				<li value="7">Repeat <em class="italic">steps 3 to 5</em> for the <em class="italic">A</em> key if you are on a QWERTY keyboard or use the equivalent key for your <span class="No-Break">keyboard’s layout.</span></li>
				<li>Repeat <em class="italic">steps 3 to 5</em> for the analog stick movement and D-pad button of a controller if you have one lying around. If you don’t have one to connect to your computer, you can just search for the next events in <span class="No-Break">the menu:</span><ul><li><strong class="bold">Joypad Axis 0</strong> (left stick, joystick <span class="No-Break">0 left)</span></li><li><strong class="bold">Joypad Button 13</strong> (<span class="No-Break">D-pad left)</span></li></ul></li>
				<li>Now create the <strong class="source-inline">move_right</strong>, <strong class="source-inline">move_up</strong>, and <strong class="source-inline">move_down</strong> actions and repeat the previous steps to add all the appropriate input events <span class="No-Break">to each.</span></li>
			</ol>
			<p>Your input map should look a bit like this when you <span class="No-Break">are finished:</span></p>
			<div>
				<div class="IMG---Figure" id="_idContainer127">
					<img alt="Figure 7.19 – The complete input mapping to make the player character move" src="image/B19358_07_19.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.19 – The complete input mapping to make the player character move</p>
			<p class="callout-heading">Physical keycode</p>
			<p class="callout">Each key on a <a id="_idIndexMarker449"/>keyboard has a unique scancode. This is a simple number that identifies that unique key. This scancode gets interpreted by the operating system into a keycode, that is, a letter, character, or any of the other operations on the keyboard. This interpretation takes the keyboard layout into account (QWERTY, AZERT, etc.). The problem is that keys get put in different places depending on the keyboard layout and operating system you <span class="No-Break">are using.</span></p>
			<p class="callout">To simplify this, Godot has physical keycodes that directly use the scancode of a key instead of its underlying character or operation. This way, we make sure that the movement keys (which on a QWERTY keyboard are WASD, but on an AZERTY keyboard are ZQSD) are always in the same spot no matter the <span class="No-Break">keyboard layout<a id="_idTextAnchor557"/>.</span></p>
			<h2 id="_idParaDest-197"><a id="_idTextAnchor558"/>Using the input</h2>
			<p>Using the <a id="_idIndexMarker450"/>input actions we set up for the directional movement of the player character is quite easy in Godot because it has a built-in function that can take four actions and spit out a vector that represents the direction the player wants to <span class="No-Break">move in.</span></p>
			<p>This function is defined on the global <strong class="source-inline">Input</strong> object and is called <strong class="source-inline">get_vector()</strong>. It takes four arguments, which are the names of the action for the negative x direction, positive x direction, negative y direction, and positive <span class="No-Break">y direction.</span></p>
			<p class="callout-heading">Singletons</p>
			<p class="callout">Global objects <a id="_idIndexMarker451"/>are objects that are accessible from any part of the code base and are automatically instantiated. They are also called singletons or <span class="No-Break">auto loads.</span></p>
			<p>To make <a id="_idIndexMarker452"/>our character move, all we need to do is <span class="No-Break">the following:</span></p>
			<pre class="source-code">
func _physics_process(delta: float):
   var input_direction: Vector2 = <strong class="bold">Input.get_vector("move_left", "move_right", "move_up", "move_down")</strong>
   velocity = input_direction * 500.0
   move_and_slide()</pre>			<p>You can see that we store the input direction in a variable called <strong class="source-inline">input_direction</strong> and then multiply this directional vector by 500. This is because the vector that comes back from <strong class="source-inline">get_vector()</strong> has a length of 1, which is very short and would make our character’s movement almost indistinguishable from <span class="No-Break">standing still.</span></p>
			<p>When running the game, we can finally move our character using all the different input methods we set <span class="No-Break">up. Success!</span></p>
			<p>As an experiment, try not multiplying the input direction <span class="No-Break">by 1<a id="_idTextAnchor559"/>000.</span></p>
			<h2 id="_idParaDest-198"><a id="_idTextAnchor560"/>Smoothing out the movement</h2>
			<p>Now, the player <a id="_idIndexMarker453"/>movement already works fairly well, but it feels very stiff. From the moment our character starts moving, it moves at the maximum speed and when we let go of all buttons, the character instantly stops. This is not how things move in the real world. There always is a period of acceleration and deceleration before and <span class="No-Break">after moving.</span></p>
			<p>Let’s first start off by defining some export variables so we can play around with all the different parts of the movement. This will make tweaking and polishing <span class="No-Break">way easier.</span></p>
			<p>At the top of <a id="_idIndexMarker454"/>the player script, add an export variable for the maximum speed, acceleration, <span class="No-Break">and deceleration:</span></p>
			<pre class="source-code">
@export var max_speed: float = 500.0
@export var acceleration: float = 2500.0
@export var deceleration: float = 1500.0</pre>			<p>Then, rewrite the <strong class="source-inline">_physics_process()</strong> function once more, <span class="No-Break">as follows:</span></p>
			<pre class="source-code">
func _physics_process(delta: float):
   var input_direction: Vector2 = Input.get_vector("move_left", "move_right", "move_up", "move_down")
   if input_direction != Vector2.ZERO:
      velocity = velocity.move_toward(input_direction * max_speed, acceleration * delta)
   else:
      velocity = velocity.move_toward(Vector2.ZERO, deceleration * delta)
   move_and_slide()</pre>			<p><strong class="source-inline">Vector2.ZERO</strong> is just a nice replacement for <strong class="source-inline">Vector2(0, 0)</strong>. It’s not shorter, but it is easier <span class="No-Break">to read.</span></p>
			<p>You can see that we put the input vector in a new variable. Then we checked whether it was equal to the zero vector <strong class="source-inline">(0, 0)</strong>. In this case, the player is giving input, so we have to accelerate in the direction of the <strong class="source-inline">input_direction</strong>. We do this using the <strong class="source-inline">move_toward()</strong> function. This function will move the vector we call it on, which in this case is the <strong class="source-inline">velocity</strong> variable, to match up with another vector, which in this case is the <strong class="source-inline">input_direction</strong> scaled by <strong class="source-inline">max_speed</strong>; the scaled <strong class="source-inline">input_direction</strong> is the first parameter for the distance over which we move, which is the second parameter. The great thing about <strong class="source-inline">move_toward()</strong> is that it doesn’t overshoot the target vector, so we <a id="_idIndexMarker455"/>don’t have to do any additional calculations. <span class="No-Break"><em class="italic">Figure 7</em></span><em class="italic">.20</em> <span class="No-Break">demonstrates this:</span></p>
			<div>
				<div class="IMG---Figure" id="_idContainer128">
					<img alt="Figure 7.20 – move_towards demonstrates that moving from (1, 3) to (6, 3) over 2 units results in (3, 3)" src="image/B19358_07_20.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.20 – move_towards demonstrates that moving from (1, 3) to (6, 3) over 2 units results in (3, 3)</p>
			<p>The vector we want to move toward is <strong class="source-inline">input_direction</strong> multiplied by <strong class="source-inline">max_speed</strong>, which is basically the vector we had in the last section, <em class="italic">Using </em><span class="No-Break"><em class="italic">the input</em></span><span class="No-Break">.</span></p>
			<p>The amount with which we try to move towards the new vector is <strong class="source-inline">acceleration</strong> times <strong class="source-inline">delta</strong> that comes into the <strong class="source-inline">_physics_process()</strong> function. This makes sure that the acceleration and deceleration always get applied at the same rate and are independent of framerate. We don’t need to multiply <strong class="source-inline">velocity</strong> itself by <strong class="source-inline">delta</strong> because <strong class="source-inline">move_and_slide()</strong> already incorporates <strong class="source-inline">delta</strong> between physics frames <span class="No-Break">by default.</span></p>
			<p>In the case where the <strong class="source-inline">input_direction</strong> is equal to the zero vector, we want to decelerate. We do this in exactly the same way as accelerating, moving the velocity toward the zero vector using <strong class="source-inline">deceleration</strong> as the amount of <span class="No-Break">this movement.</span></p>
			<p>When you <a id="_idIndexMarker456"/>run the game now, you’ll see that the movement feels way better. You can play around with the exported variables a bit to finetune everything to <span class="No-Break">your liking.</span></p>
			<p class="callout-heading">Important note</p>
			<p class="callout">Remember that you change these variables while the game is running because we exported <span class="No-Break">the variables!</span></p>
			<p>In this section, we have learned how to set up a physics object to move around and how to process directional input and we have done a deeper dive into smooth movement. Next, let’s learn how to debug a game while it <span class="No-Break">is r<a id="_idTextAnchor561"/>unning.</span></p>
			<h1 id="_idParaDest-199"><a id="_idTextAnchor562"/>Debugging a running game</h1>
			<p>Until now, we have been able to debug our game by printing values to the output console. This is a very <a id="_idIndexMarker457"/>quick and effective way of debugging, but there are actually more options available that can shed way more clarity on what is happening during our <span class="No-Break">game’s execution.</span></p>
			<p>Let’s look at these ways <span class="No-Break">in<a id="_idTextAnchor563"/> detail.</span></p>
			<h2 id="_idParaDest-200"><a id="_idTextAnchor564"/>Breakpoints</h2>
			<p>The first, and most <a id="_idIndexMarker458"/>classic way of debugging is by using <strong class="bold">breakpoints</strong>. A breakpoint <a id="_idIndexMarker459"/>literally breaks, or halts, the program at the line of code in which the breakpoint was put. To place a breakpoint, click next to the line number of a line of code within the <span class="No-Break">code editor.</span></p>
			<div>
				<div class="IMG---Figure" id="_idContainer129">
					<img alt="Figure 7.21 – Adding a breakpoint in the code" src="image/B19358_07_21.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.21 – Adding a breakpoint in the code</p>
			<p>When the interpreter comes over this line, and thus this breakpoint, it will stop everything <a id="_idIndexMarker460"/>and show you where the execution of the <span class="No-Break">code is.</span></p>
			<p>Try it out by <a id="_idIndexMarker461"/>placing a breakpoint in the <strong class="source-inline">_physics_process()</strong> function of the player. Once the program halts, the <strong class="bold">Debug</strong> panel will unfold from the bottom. In this panel, you can examine a bunch of <span class="No-Break">different things:</span></p>
			<div>
				<div class="IMG---Figure" id="_idContainer130">
					<img alt="Figure 7.22 – The Debug panel shows context about the breakpoint" src="image/B19358_07_22.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.22 – The Debug panel shows context about the breakpoint</p>
			<p>On the right, you can see all the variables that are currently in scope along with their values. This is incredibly useful as we can see the state of all variables at one quick glance. With printing, you could only see the values we put into the print statement, but now we see all current values <span class="No-Break">in scope:</span></p>
			<div>
				<div class="IMG---Figure" id="_idContainer131">
					<img alt="Figure 7.23 – All the values of the variables currently in scope shown in the Debug panel" src="image/B19358_07_23.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.23 – All the values of the variables currently in scope shown in the Debug panel</p>
			<p>On the left side <a id="_idIndexMarker462"/>of the panel, you can see the current stack, which means the <a id="_idIndexMarker463"/>different functions the program went through to end up here. For now, this is just the <strong class="source-inline">_physics_process()</strong> function because it is the only function being executed. Later on, this panel will show us the succession of functions that were called to get to this point in <span class="No-Break">the code:</span></p>
			<div>
				<div class="IMG---Figure" id="_idContainer132">
					<img alt="Figure 7.24 – The stack frame shows all the functions executed to get to the breakpoint" src="image/B19358_07_24.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.24 – The stack frame shows all the functions executed to get to the breakpoint</p>
			<p>In the top right of the panel, we have some <span class="No-Break">debug controls:</span></p>
			<div>
				<div class="IMG---Figure" id="_idContainer133">
					<img alt="Figure 7.25 – All the debug controls" src="image/B19358_07_25.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.25 – All the debug controls</p>
			<p>These controls allow us to decide what happens next now that we are at <span class="No-Break">the breakpoint:</span></p>
			<ul>
				<li><strong class="bold">Skip breakpoints</strong>: This toggles whether the interpreter should halt at breakpoints <span class="No-Break">or not.</span></li>
				<li><strong class="bold">Copy error</strong>: This copies the text of the current error to the clipboard ready to paste it in a Google search. This is not very applicable now but very handy when running into <span class="No-Break">an error.</span></li>
				<li><strong class="bold">Step into</strong>: This will make the interpreter take one step in the code and will step into any user-defined functions it <span class="No-Break">comes by.</span></li>
				<li><strong class="bold">Step over</strong>: This is the same as <strong class="source-inline">Step Into</strong>, but this will not go <span class="No-Break">into functions.</span></li>
				<li><strong class="bold">Break</strong>: This button will halt the game no matter where the execution is at <span class="No-Break">that moment.</span></li>
				<li><strong class="bold">Continue</strong>: This will continue the regular execution of <span class="No-Break">the game.</span></li>
			</ul>
			<p>These buttons <a id="_idIndexMarker464"/>will help us navigate through the code while at <a id="_idIndexMarker465"/><span class="No-Break">a breakpoint.</span></p>
			<p class="callout-heading">Important note</p>
			<p class="callout">Breakpoints exist in mostly all programming languages, such as JavaScript and Python, and code editors, such as Jetbrains’ Rider, in one way or another. It is good to get acquainted<a id="_idTextAnchor565"/> <span class="No-Break">with them.</span></p>
			<h2 id="_idParaDest-201"><a id="_idTextAnchor566"/>Remote tree</h2>
			<p>The second way of debugging is very Godot-specific. As each scene is built out of a scene tree and this <a id="_idIndexMarker466"/>tree is constructed and directly altered during the game’s execution, you would <a id="_idIndexMarker467"/>expect that we could take a look at what the tree and its nodes look like at each point in the game. And you are right, that is exactly what the <strong class="bold">remote </strong><span class="No-Break"><strong class="bold">tree</strong></span><span class="No-Break"> is!</span></p>
			<p>First, start the game. In the editor, two new buttons will appear right above the scene tree: <strong class="bold">Remote</strong> and <strong class="bold">Local</strong>. Currently, we are in the <strong class="bold">Local</strong> scene tree, which is the scene tree of the scene we <span class="No-Break">are editing:</span></p>
			<div>
				<div class="IMG---Figure" id="_idContainer134">
					<img alt="Figure 7.26 – The Local scene tree while executing our game" src="image/B19358_07_26.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.26 – The Local scene tree while executing our game</p>
			<p>If we <a id="_idIndexMarker468"/>switch to <strong class="bold">Remote</strong>, we switch to the tree as it is in the <a id="_idIndexMarker469"/><span class="No-Break">running game:</span></p>
			<div>
				<div class="IMG---Figure" id="_idContainer135">
					<img alt="Figure 7.27 – Switching over to the Remote tree using the Remote button" src="image/B19358_07_27.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.27 – Switching over to the Remote tree using the Remote button</p>
			<p>You can search through the remote tree for the <strong class="source-inline">Player</strong> node. If you click it, the inspector will show you the values of this node as they are in the game. If you scroll down to the node’s position and move the player in the game a bit, you will see that the values in the inspector change according to the position of the <span class="No-Break">player character:</span></p>
			<div>
				<div class="IMG---Figure" id="_idContainer136">
					<img alt="Figure 7.28 – Changing the position of a node in the Remote tree" src="image/B19358_07_28.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.28 – Changing the position of a node in the Remote tree</p>
			<p>If you ever <a id="_idIndexMarker470"/>don’t know what is happening, remember printing, breakpoints, and the <a id="_idIndexMarker471"/>remote tree and you will surely figure the <span class="No-Break">bug out!</span></p>
			<h1 id="_idParaDest-202"><a id="_idTextAnchor567"/>Additional exercises – Sharpening the axe</h1>
			<p>Here are some other exercises you can do <span class="No-Break">in Godot:</span></p>
			<ol>
				<li>Tweak the movement variables of the player character so it feels like you are <span class="No-Break">ice skating.</span></li>
				<li>Rewrite the <strong class="source-inline">_physics_process()</strong> function of the player by replacing the <strong class="source-inline">move_toward()</strong> function with raw vector operations. You’ll need to add a vector to the <strong class="source-inline">velocity</strong> variable in the direction of the <strong class="source-inline">input_direction</strong> that has the length of the <strong class="source-inline">acceleration</strong> variable. You’ll then have to make sure that the <strong class="source-inline">velocity</strong> variable doesn’t exceed the <span class="No-Break"><strong class="source-inline">max_s<a id="_idTextAnchor568"/>peed</strong></span><span class="No-Break"> variable.</span></li>
			</ol>
			<h1 id="_idParaDest-203"><a id="_idTextAnchor569"/>Summary</h1>
			<p>This chapter was all about physics and moving the player. We even refreshed our vector math a bit. Now the player character can move off the screen! Furthermore, they can run <span class="No-Break">through walls.</span></p>
			<p>In <a href="B19358_09.xhtml#_idTextAnchor590"><span class="No-Break"><em class="italic">Chapter 9</em></span></a>, we’ll fix these problems in collision detection, even creating collectibles, such <span class="No-Break">as money.</span></p>
			<p>First, we’ll need to learn how to separate parts of our scene tree into their own scene files and use those. Come along for a little detour in the<a id="_idTextAnchor570"/> <span class="No-Break">next chapter.</span></p>
			<h1 id="_idParaDest-204"><a id="_idTextAnchor571"/>Quiz time</h1>
			<ul>
				<li>With what class are vectors represented <span class="No-Break">in GDScript?</span></li>
				<li>Solve the following vector <span class="No-Break">math equations:</span><ul><li>(2, 4) + (-<span class="No-Break">4, 3)</span></li><li>(-1, 2) - (<span class="No-Break">6, 6)</span></li><li>(3, 1) * 2</li></ul></li>
				<li>If we want to move the player using the physics engine, do we do that in the <strong class="source-inline">_process()</strong> or <span class="No-Break"><strong class="source-inline">_physics_process()</strong></span><span class="No-Break"> Function?</span><ul><li>How many times per second gets the <strong class="source-inline">_process()</strong> <span class="No-Break">function called?</span></li><li>How many times per second gets the <strong class="source-inline">_physics_process()</strong> <span class="No-Break">fu<a id="_idTextAnchor572"/>nction called?</span></li></ul></li>
				<li>Why did we use the Physical Keycode to register keyboard buttons in our project’s <span class="No-Break">input map?</span></li>
			</ul>
		</div>
	</body></html>