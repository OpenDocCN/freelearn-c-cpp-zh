# 前言

想象 C++是一种神话般的古老语言，源自那些在低级魔法的烈火中锻造的语言，经过高级咒语的精确锻造。它诞生于控制机器和提供抽象的需求，是那些寻求弥合原始机器和高级结构之间鸿沟的人使用的工具，同时仍然享有现代工具的奢侈。

想象一下这本书与您所遇到的其他任何书籍都不同。作者们踏上了一场大胆的征程，穿梭在 C++错综复杂的深处，以揭示其真正的本质。他们带着勇气和精确，旨在剥去长期以来围绕这种传奇语言的神化和神秘的面纱，同时应对其胜利和被感知的缺陷。

以开放的心态阅读这本书，因为它承诺了一段与众不同的旅程，一段不适合胆小的人的旅程。作者们一头扎进了 C++复杂的声誉中，面对其臭名昭著的指针和复杂的内存管理，甚至深入到低级 C++的深处，在那里汇编语言统治，指针仅仅是数字。我们审视了存在的不同 C++版本，C++的生态系统，以及如何今天学习它，以及你最好忘记的事情。通过每一章，我们剥去层层面纱，揭示这些强大构造背后的逻辑和优雅。通过 C++传奇故事和一点幽默（尽管有时有些可疑），我们旨在保持你的参与度，同时引导你穿越至高无上和荒谬。预期会遇到一些你见过的最糟糕的代码，故意展示给你，教你不要做什么，同时照亮 C++的真正潜力。这是一本不仅旨在教学，而且通过其优点和缺点揭示 C++灵魂的书。

# 本书面向的对象

这本书以破除神话、半幽默的方式，非常适合那些已经具备 C++基本知识但希望深入了解其细微之处和奥秘的程序员。它也可能吸引那些对 C++语言既强大又复杂的声誉感到好奇的学习者和计算机科学学生。

这个受众包括那些欣赏编程的艺术和哲学方面的人——那些不仅想使用 C++，还想理解为什么它如此运作，以及其最著名（和臭名昭著）的功能背后的传说的开发者。这是为那些将编程不仅仅视为一项技能，而视为一种工艺的人准备的，这种工艺由历史、怪癖甚至一点传奇所塑造。

# 本书涵盖的内容

*第一章* ，*C++ 非常难学*，探讨了为什么会出现这种情况：是语言本身还是教学方法的问题？我们应该先从指针和内存管理等低级特性开始，还是或许从工作示例或面向对象（OOP）特性开始会更好？此外，每个 C++ 程序员都需要了解相同的 C++ 吗？本章讨论了学习语言的不同方法，重点关注 C++，并决定 C++ 是否在今天仍然难以学习……使用正确的方法。**[亚历克斯]**

*第二章* ，*每个 C++ 程序都符合标准*，探讨了标题所暗示的问题。在一个理想的世界里，也许它们会是！在现实中，每个 C++ 程序都应该符合标准。然而，正如我们在本章中发现的那样，当它们稍微偏离左右，使用晦涩的编译器扩展、涉足未定义行为或依赖于特定平台的怪癖时，你可能会发现自己陷入只有古代神秘主义者才能解读的错误之中。所以，当然，每个 C++ 程序都是“符合”标准的……直到它不再符合！**[费伦茨]**

*第三章* ，*只有一个 C++，它是面向对象的*，考察了组织代码的不同范例，包括函数式编程、元编程和不太为人所知的极端多态。**[亚历克斯]**

*第四章* ，*`main()` 函数是应用程序的入口点*，涵盖了标题中提到的主题。在实践中，正如我们将在本章中展示的，`main()` 函数就像应用程序的前门：它是一切开始的地方，但如果你窥视其后，你通常会发现一个错综复杂的依赖关系网、库和与操作系统相关的系统调用，这使得到达它感觉更像是在迷宫中导航而不是沿着一条直路行走。**[费伦茨]**

*第五章* ，*在 C++ 类中，必须有秩序*，探讨了确实，在 C++ 类中必须有秩序，因为没有秩序会出现问题！方法、数据成员、构造函数，每个都必须找到自己的位置！是的，灵活性很重要，但忽视结构是不行的。不尊重有序成员的顺序请求，类就会崩溃！自由过度，行为未定义，随之而来的是错误、bug 和崩溃！混乱，C++ 不能容忍。尊重顺序，和谐才会统治！本章提出的最重要的规则是，C++ 概念的指定顺序很重要。或者它可能根本未指定，但仍然很重要。[ **费伦茨** ]

*第六章* ，*C++ 并非内存安全*，探讨了在 C++ 中内存管理的挑战，现代语言构造的承诺及其失败，以及随着公众对软件可靠性的认识提高。**[亚历克斯]**

*第七章* ，*在 C++中做并行和并发没有简单的方法*，探讨了并行和并行的需求，现代 C++如何处理它们，以及 actor 模型如何帮助设计产品中的并行性。**[Alex]** 

*第八章* ，*最快的 C++代码是内联汇编*，涵盖了一个我们三十年前就学到的事实。虽然汇编确实提供了低级控制，但现代编译器高度优化，通常生成的代码比手写的汇编更高效，正如我们将在本章中展示的。确实，内联汇编在某些情况下可以提高性能，但它牺牲了可读性和可移植性，因此应谨慎使用，并且只有在绝对必要时才使用。**[Ferenc]**

*第九章* ，*C++之美*，断言 C++确实很美，因为你在哪里还能找到一个如此优雅地交织着尖括号、分号、花括号和句点的语言？这是一个关键词、模板、古老宏和重载运算符的诗意舞蹈，它们被巧妙地排列，甚至让经验丰富的程序员都会质疑自己的生活选择。确实，正如本章将展示的，如果美意味着一个谜题包裹在谜团之中，那么在预处理后再处理那些无法处理的代码后，只会留下一点困惑。**[Ferenc]** 

*第十章* ，*C++中没有现代编程的库*，评估了 C++库的需求和可用性，包管理的挑战，寻找目标版本和架构的库的困难，以及供应链攻击日益严重的问题。**[Alex]** 

*第十一章* ，*C++与 C 向后兼容...甚至与 C*，探讨了向后兼容性，因为正如我们将在本章中展示的，C++继承了家族的传家宝：一堆混乱的全局变量、尖锐的指针和未定义的行为。C++尽职尽责地让这些遗物保持活力，使得两种语言能够在尴尬但 somehow 功能性的拥抱中共存。兼容性，的确，因为谁不想体验将几十年前的 C 代码与现代 C++混合的刺激？或者与不那么现代的 C++混合？我们的意思是，嘿，传统很重要，我们必须为了生计而奋斗！**[Ferenc]** 

*第十二章* ，*Rust 将取代 C++*，探讨了为什么我们有这么多编程语言，Rust 如何融入生态系统，它做得好的地方，C++的回应，以及 Rust 可能取代 C++的条件。**[Alex]** 

# 要充分发挥这本书的效用

这本书的理想读者是中级到高级的 C++开发者和已经对编程基础有扎实理解并渴望深入了解 C++复杂性的学术学习者。

在实际应用中使用 C++ 的专业人士，对通过汇编语言或高级编译技术优化性能感兴趣的人，以及欣赏语言怪癖和复杂性的爱好者可能会觉得这本书很有趣。

寻求对 C++ 有更深入介绍的大学生，追求展示最新现代 C++ 技术的学者，或正在学习该语言的程序员，请考虑本书不涵盖 C++ 的基础知识，也不包括如何学习它的主题。有其他书籍肯定更适合这项任务，例如 Bjarne Stroustrup（该语言的创造者）所著的 *《C++ 编程：原理与实践》（第 3 版）*（或者，好吧，任何对你有用的书籍）。

经验丰富的 C++ 开发者想要了解最新的 C++ 标准概述，语言律师，或者那些没有幽默感的人，或者如果你阅读这本书是为了得到一个迫切问题的答案……好吧，你可能根本不会觉得这本书有趣，因为它可能无法回答你的任何问题。可能根本就没有答案。相反，你可能发现阅读后，你比之前有更多的问题。对你来说，我建议阅读 C++ 标准，你所有的疑问都有答案在那里。你已经得到了警告。

| **本书涵盖的软件/硬件** | **操作系统要求** |
| --- | --- |
| 2025 年相关的各种 C++ 编译器 | Windows、macOS、Linux 或没有任何操作系统 |

**如果您使用的是本书的数字版，我们建议您亲自输入代码或从本书的 GitHub 仓库（下一节中有一个链接）获取代码。这样做将帮助您避免与代码的复制和粘贴相关的任何潜在错误。**

# 下载示例代码文件

您可以从 GitHub 下载本书的示例代码文件，网址为 [`github.com/PacktPublishing/Debunking-CPP-Myths`](https://github.com/PacktPublishing/Debunking-CPP-Myths)。如果代码有更新，它将在 GitHub 仓库中更新。

我们还有其他来自我们丰富的书籍和视频目录的代码包，可在 [`github.com/PacktPublishing/`](https://github.com/PacktPublishing/) 获取。查看它们！

# 使用的约定

本书使用了多种文本约定。

**文本中的代码**：表示文本中的代码单词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 用户名。以下是一个示例：“在经过几次迭代后，**execve()** 系统调用将离开用户空间，最终进入 Linux 内核并创建一个 **linux_binprm** 结构。”

代码块设置为以下格式：

```cpp
#include <iostream>
typedef struct S {
    int a;
} S, const *CSP;
int main() {
    S s1;
    s1.a = 1;
    CSP ps1 = &s1;
    std::cout << ps1->a;
}
```

任何命令行输入或输出都按以下方式编写：

```cpp
$ g++ main.cpp a.cpp b.cpp -o test
$ g++ main.cpp b.cpp a.cpp -o test
```

提示或重要注意事项

看起来像这样。

# 联系我们

我们始终欢迎读者的反馈。

**一般反馈**：如果您对本书的任何方面有疑问，请通过 customercare@packtpub.com 发送电子邮件，并在邮件主题中提及书名。

**勘误**：尽管我们已经尽一切努力确保内容的准确性，但错误仍然可能发生。如果您在此书中发现错误，我们将不胜感激，如果您能向我们报告，我们将不胜感激。请访问 [www.packtpub.com/support/errata](http://www.packtpub.com/support/errata) 并填写表格。

**盗版**：如果您在互联网上以任何形式发现我们作品的非法副本，我们将不胜感激，如果您能提供位置地址或网站名称，我们将不胜感激。请通过 copyright@packt.com 与我们联系，并提供材料的链接。

**如果您有兴趣成为作者**：如果您在某个领域有专业知识，并且您有兴趣撰写或为书籍做出贡献，请访问 [authors.packtpub.com](http://authors.packtpub.com)。

# 分享您的想法

一旦您阅读了 *Debunking C++ Myths*，我们很乐意听听您的想法！请 [点击此处直接转到此书的亚马逊评论页面](https://packt.link/r/1835884792) 并分享您的反馈。

您的评论对我们和科技社区都很重要，并将帮助我们确保我们提供高质量的内容。

# 下载此书的免费 PDF 副本

感谢您购买此书！

您喜欢在移动中阅读，但无法携带您的印刷书籍到任何地方吗？

您选择的设备是否与您的电子书购买不兼容？

不要担心，现在，随着每本 Packt 书籍，您都可以免费获得该书的 DRM 免费 PDF 版本。

在任何地方、任何设备上阅读。直接从您最喜欢的技术书籍中搜索、复制和粘贴代码到您的应用程序中。

优惠远不止于此，您还可以获得独家折扣、时事通讯和每日免费内容的每日访问权限。

按照以下简单步骤获取好处：

1.  扫描二维码或访问以下链接

![img](https://packt.link/free-ebook/9781835884782)

[`packt.link/free-ebook/9781835884782`](https://packt.link/free-ebook/9781835884782)

1.  提交您的购买证明

1.  就这样！我们将直接将您的免费 PDF 和其他好处发送到您的电子邮件。
