<html><head></head><body>
		<div><h1 id="_idParaDest-5" lang="en-GB"><a id="_idTextAnchor004"/>Preface</h1>
			<p lang="en-GB">Many years ago, I started avoiding cookbook-style books when I wanted to learn a new technology or develop a new skill. A book should guide us to understand fundamental ideas so we can adapt our learning to fit our needs. We should not get lost just because a recipe doesn’t match exactly what we want to accomplish.</p>
			<p lang="en-GB">I also tend to avoid books that are full of theory. You probably know what I mean. Instead of explaining how to use a technology, these books mention ideas with no exploration of putting the ideas into practice. Focusing on either one of these two tangents can leave the learning experience incomplete.</p>
			<p lang="en-GB">This book is different. Instead of giving you a few simple examples like a cookbook or droning on with rules and definitions, I’ll show you how to use tests to write software that does the following:</p>
			<ul>
				<li lang="en-GB">What users expect and with ease</li>
				<li lang="en-GB">Let’s you add new features without breaking what you’ve already done</li>
				<li lang="en-GB">Clearly communicates what the code does</li>
			</ul>
			<p lang="en-GB">We’re going to start from the beginning and build multiple projects. You’ll learn what a test is and how it can help by building an easy and natural way to write tests in C++. This is called <strong class="bold" lang="">Test-Driven Development</strong> (<strong class="bold" lang="">TDD</strong>) and you’ll be using TDD to develop the tools needed for your projects.</p>
			<p lang="en-GB">In order to get the most benefit from TDD, you’ll need a way to write and run tests. Some programming languages already support TDD while C++ needs extra tools and libraries to support tests. I could have simply explained how to use various TDD tools that already exist. That would be a cookbook approach because each existing solution is slightly different. By starting from the beginning and building what you’ll need, you’ll learn TDD and at the same time you’ll learn how all the other solutions work. The concepts are the same.</p>
			<p lang="en-GB">For example, most people who learn how to drive a car will be able to drive a pickup truck or a van. Some minor differences are expected but the concepts are the same. Riding a motorcycle is more of a challenge but many of the same concepts are still valid. Driving a bus might need some extra training but is also similar.</p>
			<p lang="en-GB">If you decide to use other tools or even other languages, you’ll gain a deep understanding of how those other tools work by following the steps in this book. The other tools will be like driving a pickup truck.</p>
			<p lang="en-GB">This book is divided into three parts. You’ll build a testing library in the first part that will let you write and run tests. You’ll learn how to proceed one step at a time and let the tests guide you.</p>
			<p lang="en-GB">The second part will use the testing library to start a new project to help you log messages as your software runs. This is a logging library and this project will show you how to build software that meets the needs of your intended customer. You’ll be adding many features to the logging library and you’ll learn how to keep everything working while developing more features.</p>
			<p lang="en-GB">The intended customer for the logging library is a C++ micro-services developer and this customer focus extends into the third part where you’ll extend the testing library and build a simple service. The service will be used to explain one of the most difficult aspects of software development how to test multiple threads.</p>
			<p lang="en-GB">All three parts will combine to show you how to use TDD to effectively design and write software that meets the customers needs, gives you the confidence to make changes, and lets other team members understand the design.</p>
			<h1 id="_idParaDest-6" lang="en-GB"><a id="_idTextAnchor005"/>Who this book is for</h1>
			<p lang="en-GB">This book is for C++ developers already familiar with and using C++ for daily tasks. You don’t need to be an expert, but you should already know some modern C++ and how to use templates to get the most out of this book.</p>
			<p lang="en-GB">If you’ve ever struggled to add a new feature to a large project without breaking the software in other places, then this book can help. You’ll become a better software developer and avoid the stress and worry of fixing bugs or making design changes. TDD is a process that will guide you to create intuitive designs that your users will understand and enjoy.</p>
			<p lang="en-GB">If you’ve ever hesitated over making an improvement and decided to keep an outdated and confusing design that nobody wants to touch because it might break, then this book can help. Maybe you have a good idea but you know your manager will never agree because the risk is too high. If your project is following TDD practices that this book explains, then you can feel more confident about making improvements. You can let the tests prove your idea is solid.</p>
			<p lang="en-GB">Do you have new team members who need to quickly understand how your software works? The process that this book explores will help you write tests in TDD that will document the software design and requirements. You might even find that the tests help your own understanding especially when returning to a project that you haven’t worked on in a long time.</p>
			<p lang="en-GB">C++ is a language with a lot of power and details to consider. This book helps to simplify the software development process through TDD. Even if you already know how to use one or more TDD tools, this book will improve your skills and give you the confidence to apply TDD in more advanced or larger projects.</p>
			<h1 id="_idParaDest-7" lang="en-GB"><a id="_idTextAnchor006"/>What this book covers</h1>
			<p lang="en-GB"><a href="B18567_01.xhtml#_idTextAnchor014"><em class="italic" lang="">Chapter 1</em></a>, <em class="italic" lang="">Desired Test Declaration</em>, uses C++ to write your first test starting from an empty project.</p>
			<p lang="en-GB"><a href="B18567_02.xhtml#_idTextAnchor023"><em class="italic" lang="">Chapter 2</em></a>, <em class="italic" lang="">Test Results</em>, reports and uses test results so that you can quickly know what parts of a project are working and what parts are failing.</p>
			<p lang="en-GB"><a href="B18567_03.xhtml#_idTextAnchor031"><em class="italic" lang="">Chapter 3</em></a>, <em class="italic" lang="">The TDD Process</em>, uses TDD on purpose by identifying the steps you’ve already been doing.</p>
			<p lang="en-GB"><a href="B18567_04.xhtml#_idTextAnchor038"><em class="italic" lang="">Chapter 4</em></a>, <em class="italic" lang="">Adding Tests to a Project</em>, enhances tests to pass or fail based on whether your expectations are being met.</p>
			<p lang="en-GB"><a href="B18567_05.xhtml#_idTextAnchor045"><em class="italic" lang="">Chapter 5</em></a>, <em class="italic" lang="">Adding More Confirm Types</em>, makes tests more capable by giving you the power to check any value types to see if they meet expectations.</p>
			<p lang="en-GB"><a href="B18567_06.xhtml#_idTextAnchor059"><em class="italic" lang="">Chapter 6</em></a>, <em class="italic" lang="">Explore Improvements Early</em>, looks for other improvements and shows you how to step back and explore ideas you might not have thought of up to this point.</p>
			<p lang="en-GB"><a href="B18567_07.xhtml#_idTextAnchor065"><em class="italic" lang="">Chapter 7</em></a>, <em class="italic" lang="">Test Setup and Teardown</em>, prepares tests to run and the cleanup afterward so that you can focus tests on what they need to do which helps make the tests easier to understand.</p>
			<p lang="en-GB"><a href="B18567_08.xhtml#_idTextAnchor074"><em class="italic" lang="">Chapter 8</em></a>, <em class="italic" lang="">What Makes a Good Test?</em>, provides advice and learning from other chapters to reinforce what you’ve learned so far and encourages you to continue with hints of topics in later chapters.</p>
			<p lang="en-GB"><a href="B18567_09.xhtml#_idTextAnchor085"><em class="italic" lang="">Chapter 9</em></a>, <em class="italic" lang="">Using Tests</em>, builds a logging library that puts everything you’ve learned so far into practical use.</p>
			<p lang="en-GB"><a href="B18567_10.xhtml#_idTextAnchor096"><em class="italic" lang="">Chapter 10</em></a>, <em class="italic" lang="">The TDD Process in Depth</em>, practices using TDD to add features to a growing project including how to handle design changes.</p>
			<p lang="en-GB"><a href="B18567_11.xhtml#_idTextAnchor114"><em class="italic" lang="">Chapter 11</em></a>, <em class="italic" lang="">Managing Dependencies</em>, adds features that can be exchanged, showing you how to test unreliable software components and how to make progress even when you don’t have all the components that you need.</p>
			<p lang="en-GB"><a href="B18567_12.xhtml#_idTextAnchor123"><em class="italic" lang="">Chapter 12</em></a>, <em class="italic" lang="">Creating Better Test Confirmations</em>, uses Hamcrest matchers to improve tests by letting you verify expectations more naturally.</p>
			<p lang="en-GB"><a href="B18567_13.xhtml#_idTextAnchor131"><em class="italic" lang="">Chapter 13</em></a>, <em class="italic" lang="">How To Test Floating Point and Custom Values</em>, shows how to reliably use floats and how to extend Hamcrest matchers to meet custom needs.</p>
			<p lang="en-GB"><a href="B18567_14.xhtml#_idTextAnchor139"><em class="italic" lang="">Chapter 14</em></a>, <em class="italic" lang="">How To Test Services</em>, covers how services are different and how to test services.</p>
			<p lang="en-GB"><a href="B18567_15.xhtml#_idTextAnchor149"><em class="italic" lang="">Chapter 15</em></a>, <em class="italic" lang="">How To Test With Multiple Threads</em>, simplifies and coordinates tests with multiple threads so that you can avoid race conditions while testing every possible thread interaction reliably and predictably.</p>
			<h1 id="_idParaDest-8" lang="en-GB"><a id="_idTextAnchor007"/>To get the most out of this book</h1>
			<p lang="en-GB">You will need a modern C++ compiler capable of building C++20 or later code. Everything in this book uses standard C++ and will run on any computer. All output is text.</p>
			<p lang="en-GB">This book lets you build the code with whatever build system you are most comfortable using. The projects all have few files with simple folder structures. You can easily create a project in your code editor and follow along. </p>
			<p lang="en-GB">This book does not describe finished projects. Each project is a journey. The first chapter starts with an empty project and each subsequent chapter adds to the code already created in previous chapters. You’re encouraged to follow along.</p>
			<p lang="en-GB">Remember to study the process. This is more important than the actual code that each chapter explains. The TDD process is mentioned many times in this book. The first few chapters introduce you to TDD until there are enough features available in the testing library so that the testing library can be used to build another project. The second logging library project explores the TDD process in more depth and detail. Once the logging library is usable, then both the testing and logging libraries are used to build a simple service project. There is a pattern to the TDD process that repeats. Learning the TDD process through each of the projects will give you the most benefit.</p>
			<p lang="en-GB">Because the projects are built step by step, you can also benefit from the mistakes explained along the way. Sometimes, the designs will change, and you can benefit from the reasons for the changes as well as learn how to manage the changes.</p>
			<p lang="en-GB">When I say that you need a C++20 compiler, that’s a simplification. There are many different features of C++ that compiler vendors support in different versions of their compilers. A good rule to follow is to make sure that your compiler supports <em class="italic" lang="">concepts</em> in C++20. We use concepts in the final chapters of this book and if your compiler supports concepts, then you should have everything you need. A good link to read more is:</p>
			<p lang="en-GB"><a href="https://en.cppreference.com/w/cpp/compiler_support">https://en.cppreference.com/w/cpp/compiler_support</a></p>
			<p lang="en-GB">When you visit the link, scroll down to the C++20 section and look for the row that identifies the concepts feature. At the time of writing, the following compilers should work:</p>
			<ul>
				<li lang="en-GB">GCC version 10</li>
				<li lang="en-GB">Clang version 10</li>
				<li lang="en-GB">MSVC version 19.30</li>
				<li lang="en-GB">Apple Clang version 12 (however, this compiler only has a partial implementation)</li>
			</ul>
			<p lang="en-GB">You’ll likely be able to use whatever version of the C++ Standard Library that comes with your compiler. However, another good rule that should work is to make sure that your Standard Library also supports concepts. At the time of writing, the following Standard Libraries should work:</p>
			<ul>
				<li lang="en-GB">GCClibstdc++ version 10</li>
				<li lang="en-GB">Clang libc++ version 13</li>
				<li lang="en-GB">MSVC STL version 19.23</li>
				<li lang="en-GB">Apple Clang version 13.1.6</li>
			</ul>
			<p lang="en-GB"><strong class="bold" lang="">If you are using the digital version of this book, we advise you to type the code yourself or access the code from the book’s GitHub repository (a link is available in the next section). Doing so will help you avoid any potential errors related to the copying and pasting </strong><strong class="bold" lang="">of code.</strong></p>
			<h1 id="_idParaDest-9" lang="en-GB"><a id="_idTextAnchor008"/>Download the example code files</h1>
			<p lang="en-GB">You can download the example code files for this book from GitHub at <a href="https://github.com/PacktPublishing/Test-Driven-Development-with-CPP">https://github.com/PacktPublishing/Test-Driven-Development-with-CPP</a>. If there’s an update to the code, it will be updated in the GitHub repository.</p>
			<p lang="en-GB">We also have other code bundles from our rich catalog of books and videos available at <a href="https://github.com/PacktPublishing/">https://github.com/PacktPublishing/</a>. Check them out!</p>
			<h1 id="_idParaDest-10" lang="en-GB"><a id="_idTextAnchor009"/>Conventions used</h1>
			<p lang="en-GB">There are a number of text conventions used throughout this book.</p>
			<p lang="en-GB"><code>Code in text</code>: Indicates code words in text, database table names, folder names, filenames, file extensions, pathnames, dummy URLs, user input, and Twitter handles. Here is an example: “That’s why the confirm macros we have now are called <code>CONFIRM_TRUE</code> and <code>CONFIRM_FALSE</code>.”</p>
			<p lang="en-GB">A block of code is set as follows:</p>
			<pre class="source-code" lang="en-GB">
TEST("Test bool confirms")
{
    bool result = isNegative(0);
    CONFIRM_FALSE(result);
    result = isNegative(-1);
    CONFIRM_TRUE(result);
}</pre>
			<p lang="en-GB">Any command-line input or output is written as follows:</p>
			<pre>Running 3 tests
---------------
Test can be created
Passed
---------------
Test with throw can be created
Passed
---------------
Test that never throws can be created
Failed
Expected exception type int was not thrown.
---------------
Tests passed: 2
Tests failed: 1
Program ended with exit code: 1</pre>
			<p lang="en-GB"><strong class="bold" lang="">Bold</strong>: Indicates a new term, an important word, or words that you see onscreen. For instance, words in menus or dialog boxes appear in <strong class="bold" lang="">bold</strong>. Here is an example: “We’ll just change the status from <strong class="bold" lang="">Failed </strong>to <strong class="bold" lang="">Expected failure</strong>.”</p>
			<p class="callout-heading" lang="en-GB">Tips or important notes</p>
			<p class="callout" lang="en-GB">Appear like this.</p>
			<h1 id="_idParaDest-11" lang="en-GB"><a id="_idTextAnchor010"/>Get in touch</h1>
			<p lang="en-GB">Feedback from our readers is always welcome.</p>
			<p lang="en-GB"><strong class="bold" lang="">General feedback</strong>: If you have questions about any aspect of this book, email us at <a href="mailto:customercare@packtpub.com">customercare@packtpub.com</a> and mention the book title in the subject of your message.</p>
			<p lang="en-GB"><strong class="bold" lang="">Errata</strong>: Although we have taken every care to ensure the accuracy of our content, mistakes do happen. If you have found a mistake in this book, we would be grateful if you would report this to us. Please visit <a href="http://www.packtpub.com/support/errata">www.packtpub.com/support/errata</a> and fill in the form.</p>
			<p lang="en-GB"><strong class="bold" lang="">Piracy</strong>: If you come across any illegal copies of our works in any form on the internet, we would be grateful if you would provide us with the location address or website name. Please contact us at <a href="mailto:copyright@packt.com">copyright@packt.com</a> with a link to the material.</p>
			<p lang="en-GB"><strong class="bold" lang="">If you are interested in becoming an author</strong>: If there is a topic that you have expertise in and you are interested in either writing or contributing to a book, please visit <a href="http://authors.packtpub.com">authors.packtpub.com</a>.</p>
			<h1 id="_idParaDest-12" lang="en-GB"><a id="_idTextAnchor011"/>Share Your Thoughts</h1>
			<p lang="en-GB">Once you’ve read <em class="italic" lang="">Test Driven Development with C++</em>, we’d love to hear your thoughts! Please <a href="https://packt.link/r/1803242000">click here to go straight to the Amazon review page</a> for this book and share your feedback.</p>
			<p lang="en-GB">Your review is important to us and the tech community and will help us make sure we’re delivering excellent quality content</p>
			<h1 id="_idParaDest-13" lang="en-GB"><a id="_idTextAnchor012"/>Download a free PDF copy of this book</h1>
			<p lang="en-GB">Thanks for purchasing this book!</p>
			<p lang="en-GB">Do you like to read on the go but are unable to carry your print books everywhere? Is your eBook purchase not compatible with the device of your choice?</p>
			<p lang="en-GB">Don’t worry, now with every Packt book you get a DRM-free PDF version of that book at no cost.</p>
			<p lang="en-GB">Read anywhere, any place, on any device. Search, copy, and paste code from your favorite technical books directly into your application. </p>
			<p lang="en-GB">The perks don’t stop there, you can get exclusive access to discounts, newsletters, and great free content in your inbox daily</p>
			<p lang="en-GB">Follow these simple steps to get the benefits:</p>
			<ol>
				<li lang="en-GB">Scan the QR code or visit the link below</li>
			</ol>
<div><a href="https://packt.link/free-ebook/9781803242002">
					
						<img src="img/B18567_QR_Free_PDF.jpg" alt=""/>

				</a>
</div>
			<p style="text-align: center;"><a href="https://packt.link/free-ebook/9781803242002">https://packt.link/free-ebook/9781803242002</a></p>

			<ol>
				<li lang="en-GB" value="2">Submit your proof of purchase</li>
				<li lang="en-GB">That’s it! We’ll send your free PDF and other benefits to your email directly</li>
			</ol>
		</div>
	

		<div><h1 id="_idParaDest-14" lang="en-GB"><a id="_idTextAnchor013"/>Part 1: Testing MVP</h1>
			<p lang="en-GB">This book is divided into three parts. In this first part, you’ll learn why Test-Driven Development is important and how to use it to help you design and write software. We’ll be starting with an empty project and using Test-Driven Development practices to design and build a unit test library. You’ll learn everything you need by following along as we explore ideas and build a working project one step at a time.</p>
			<p lang="en-GB">The following chapter will be covered in this part:</p>
			<ul>
				<li lang="en-GB"><a href="B18567_01.xhtml#_idTextAnchor014"><em class="italic" lang="">Chapter 1</em></a>, <em class="italic" lang="">Desired Test Declaration</em></li>
				<li lang="en-GB"><a href="B18567_02.xhtml#_idTextAnchor023"><em class="italic" lang="">Chapter 2</em></a>, <em class="italic" lang="">Test Results</em></li>
				<li lang="en-GB"><a href="B18567_03.xhtml#_idTextAnchor031"><em class="italic" lang="">Chapter 3</em></a>, <em class="italic" lang="">The TDD process</em></li>
				<li lang="en-GB"><a href="B18567_04.xhtml#_idTextAnchor038"><em class="italic" lang="">Chapter 4</em></a>, <em class="italic" lang="">Adding Tests to a Project</em></li>
				<li lang="en-GB"><a href="B18567_05.xhtml#_idTextAnchor045"><em class="italic" lang="">Chapter 5</em></a>, <em class="italic" lang="">Adding More Confirm Types</em></li>
				<li lang="en-GB"><a href="B18567_06.xhtml#_idTextAnchor059"><em class="italic" lang="">Chapter 6</em></a>, <em class="italic" lang="">Explore Improvements Early</em></li>
				<li lang="en-GB"><a href="B18567_07.xhtml#_idTextAnchor065"><em class="italic" lang="">Chapter 7</em></a>, <em class="italic" lang="">Test Setup and Teardown</em></li>
				<li lang="en-GB"><a href="B18567_08.xhtml#_idTextAnchor074"><em class="italic" lang="">Chapter 8</em></a>, <em class="italic" lang="">What Makes a Good Test?</em></li>
			</ul>
		</div>
		<div><div></div>
		</div>
		<div><div></div>
		</div>
	</body></html>