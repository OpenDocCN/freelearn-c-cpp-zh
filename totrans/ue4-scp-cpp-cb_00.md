# 前言

**虚幻引擎 4**（**UE4**）是由游戏开发者为游戏开发者制作的一套完整的游戏开发工具。本书包含超过 100 个实用配方，是一份指南，展示了在开发 UE 4.21 游戏时如何解锁 C++ 脚本的力量。本书首先展示了如何在 Unreal 编辑器内部添加和编辑 C++ 类。它将深入探讨 Unreal 的主要优势之一：设计师能够自定义程序员开发的演员和组件的能力。它将帮助您了解在使用包含在此强大游戏引擎中的许多工具的同时使用 C++ 的好处。本书结合了以任务为导向的配方，将提供关于为 UE4 游戏编写代码以及使用 C++ 操作游戏和开发环境的实用信息。在本书的结尾，您将能够成为使用 C++ 作为脚本语言的高级开发者，利用虚幻引擎 4 的力量！

# 本书面向的对象

本书旨在为那些了解游戏设计基础和 C++，并希望将原生代码集成到他们用 Unreal 制作的游戏中的游戏开发者编写。

读者可能是想要扩展引擎或实现系统以及演员的程序员，这些系统可以为设计师在构建关卡时提供控制和灵活性。

# 本书涵盖的内容

第一章，*UE4 开发工具*，概述了基本配方，帮助您开始使用 UE4 游戏开发以及创建使您的游戏运行代码的基本工具。

第二章，*创建类*，专注于如何创建与 UE4 蓝图编辑器良好集成的 C++ 类和结构体。这些类将是常规 C++ 类的毕业版本，称为 UCLASSES。

第三章，*内存管理、智能指针和调试*，引导读者了解使用所有三种指针类型的方法，并提及一些关于自动垃圾回收的常见陷阱。本章还展示了读者如何使用 Visual Studio 或 Xcode 来解释崩溃或确认功能是否正确实现。

第四章，*演员和组件*，讨论了创建自定义演员和组件，每个组件的作用以及它们如何协同工作。

第五章，*处理事件和委托*，描述了委托、事件和事件处理器，并指导您创建自己的实现。

第六章，*输入和碰撞*，展示了如何将用户输入连接到 C++ 函数，以及如何在 UE4 中处理 C++ 碰撞。它还将提供对游戏事件（如用户输入和碰撞）的默认处理，允许设计师在必要时使用蓝图进行覆盖。

第七章，*类和接口之间的通信：第一部分*，展示了如何编写自己的 UInterfaces，并演示了如何在 C++中利用它们来最小化类耦合并帮助保持代码整洁。

第八章，*类和接口之间的通信：第二部分*，继续第七章的内容，更详细地讨论了如何使 UInterfaces 与蓝图协同工作。

第九章，*集成 C++和虚幻引擎编辑器：第一部分*，展示了如何从头开始创建自定义蓝图和动画节点来自定义编辑器。

第十章，*集成 C++和虚幻引擎编辑器：第二部分*，展示了如何实现自定义编辑器窗口和自定义详细面板来检查用户创建的类型。

第十一章，*用户界面 – UI 和 UMG*，演示了向玩家显示反馈是游戏设计中最重要的元素之一，这通常涉及某种形式的 HUD，或者至少是游戏中的菜单。

第十二章，*AI 控制 NPC*，介绍了使用一点**人工智能**（**AI**）来控制你的 NPC 角色的方法。

第十三章，*使用 UE4 API*，解释了 API 是程序员（你）指导引擎（以及因此的 PC）做什么的方式。每个模块都有一个 API。要使用 API，有一个非常重要的链接步骤，你必须在你项目的`ProjectName.Build.cs`文件中列出你将在构建中使用的所有 API。

第十四章，*UE4 中的多人网络*，讨论了如何在网络上复制属性和函数，同时作为客户端和服务器同时测试你的游戏。

# 要充分利用本书

+   本书假设读者熟悉 C++编程语言，理解不同编程运算符的含义，以及面向对象编程的基本概念。

+   对使用虚幻引擎编辑器有基本的熟悉度是有益的，但不是必需的。

# 下载示例代码文件

你可以从[www.packt.com](http://www.packt.com)的账户下载本书的示例代码文件。如果你在其他地方购买了这本书，你可以访问[www.packt.com/support](http://www.packt.com/support)并注册，以便将文件直接通过电子邮件发送给你。

你可以通过以下步骤下载代码文件：

1.  在[www.packt.com](http://www.packt.com)登录或注册。

1.  选择支持选项卡。

1.  点击代码下载与勘误表。

1.  在搜索框中输入书名，并遵循屏幕上的说明。

下载文件后，请确保使用最新版本的以下软件解压缩或提取文件夹：

+   Windows 版的 WinRAR/7-Zip

+   Mac 版的 Zipeg/iZip/UnRarX

+   Linux 版的 7-Zip/PeaZip

本书代码包也托管在 GitHub 上，网址为[`github.com/PacktPublishing/Unreal-Engine-4.x-Scripting-with-C-Cookbook---Second-edition`](https://github.com/PacktPublishing/Unreal-Engine-4.x-Scripting-with-C-Cookbook---Second-edition)。如果代码有更新，它将在现有的 GitHub 仓库中更新。

我们还有来自我们丰富的图书和视频目录的其他代码包，可在[`github.com/PacktPublishing/`](https://github.com/PacktPublishing/)找到。查看它们吧！

# 下载彩色图像

我们还提供了一份包含本书中使用的截图/图表的彩色图像的 PDF 文件。您可以从这里下载：[`www.packtpub.com/sites/default/files/downloads/9781789809503_ColorImages.pdf`](https://www.packtpub.com/sites/default/files/downloads/9781789809503_ColorImages.pdf)。

# 使用的约定

本书使用了多种文本约定。

`CodeInText`：表示文本中的代码单词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 昵称。以下是一个示例：“在右侧的搜索框中开始输入`Theme Editor`。”

代码块设置如下：

```cpp
FString name = "Tim"; 
int32 mana = 450; 
FString string = FString::Printf( TEXT( "Name = %s Mana = 
 %d" ), *name, mana );
```

当我们希望您注意代码块中的特定部分时，相关的行或项目将以粗体显示：

```cpp
// Fill out your copyright notice in the Description page of Project Settings.

#include "Chapter_01GameModeBase.h"

void AChapter_01GameModeBase::BeginPlay()
{
 Super::BeginPlay();
}
```

**粗体**：表示新术语、重要单词或您在屏幕上看到的单词。例如，菜单或对话框中的单词在文本中显示如下。以下是一个示例：“在文本编辑器/纯文本的字体和字体大小上玩玩。”

警告或重要注意事项看起来是这样的。

小贴士和技巧看起来是这样的。

# 部分

在本书中，您将找到一些频繁出现的标题（*准备工作*、*如何做…*、*它是如何工作的…*、*还有更多…*和*也见*）。

为了清楚地说明如何完成食谱，请按照以下方式使用这些部分：

# 准备工作

本节告诉您在食谱中可以期待什么，并描述了如何设置任何必需的软件或任何为食谱所需的初步设置。

# 如何做…

本节包含遵循食谱所需的步骤。

# 它是如何工作的…

这一节通常包含对上一节发生事件的详细解释。

# 还有更多…

本节包含有关食谱的附加信息，以便您对食谱有更深入的了解。

# 也见

本节提供了对食谱有用的链接，指向其他有用的信息。

# 联系我们

我们欢迎读者的反馈。

**一般反馈**：如果您对本书的任何方面有疑问，请在邮件主题中提及书名，并通过`customercare@packtpub.com`给我们发邮件。

**勘误**: 尽管我们已经尽最大努力确保内容的准确性，但错误仍然可能发生。如果您在这本书中发现了错误，如果您能向我们报告这一点，我们将不胜感激。请访问 [www.packt.com/submit-errata](http://www.packt.com/submit-errata)，选择您的书籍，点击勘误提交表单链接，并输入详细信息。

**盗版**: 如果您在互联网上以任何形式发现了我们作品的非法副本，如果您能向我们提供位置地址或网站名称，我们将不胜感激。请通过发送链接至 `copyright@packt.com` 与我们联系。

**如果您有兴趣成为作者**: 如果您在某个领域有专业知识，并且您有兴趣撰写或为书籍做出贡献，请访问 [authors.packtpub.com](http://authors.packtpub.com/)。[.](http://authors.packtpub.com/)

# 评论

请留下评论。一旦您阅读并使用了这本书，为何不在您购买它的网站上留下评论呢？潜在读者可以查看并使用您的客观意见来做出购买决定，Packt 公司可以了解您对我们产品的看法，我们的作者也可以看到他们对书籍的反馈。谢谢！

想了解更多关于 Packt 的信息，请访问 [packt.com](http://www.packt.com/)。
