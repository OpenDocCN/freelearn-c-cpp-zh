<html><head></head><body>
<div id="_idContainer182">
<h1 class="chapter-number" id="_idParaDest-214"><a id="_idTextAnchor215"/><span class="koboSpan" id="kobo.1.1">11</span></h1>
<h1 id="_idParaDest-215"><a id="_idTextAnchor216"/><span class="koboSpan" id="kobo.2.1">Debugging a Multiplayer Game</span></h1>
<p><span class="koboSpan" id="kobo.3.1">Debugging an application is a crucial aspect of programming in general, and this holds particularly true when dealing with multiplayer game programming. </span><span class="koboSpan" id="kobo.3.2">The debugging process helps developers identify and resolve any issues that may arise when running a networked application or game. </span><span class="koboSpan" id="kobo.3.3">By understanding the basics of network debugging, programmers can ensure their games run smoothly and efficiently on </span><span class="No-Break"><span class="koboSpan" id="kobo.4.1">all platforms.</span></span></p>
<p><span class="koboSpan" id="kobo.5.1">When it comes to debugging networks with Unreal Engine, there are several tools available to help make the process easier for programmers. </span><span class="koboSpan" id="kobo.5.2">The first step in this process is setting up logging within your project settings so that you can track errors as they occur during the development or testing phases of your game’s </span><span class="No-Break"><span class="koboSpan" id="kobo.6.1">life cycle.</span></span></p>
<p><span class="koboSpan" id="kobo.7.1">Additionally, developing an emulated multiplayer environment can be a highly effective method of replicating real-life scenarios, while simultaneously assessing the operational efficacy of </span><span class="No-Break"><span class="koboSpan" id="kobo.8.1">your systems.</span></span></p>
<p><span class="koboSpan" id="kobo.9.1">What’s more, tools such as the Network Profiler will provide detailed insights into critical metrics such as connection speeds and latencies, enabling the identification of potential issues and areas that </span><span class="No-Break"><span class="koboSpan" id="kobo.10.1">require improvement.</span></span></p>
<p><span class="koboSpan" id="kobo.11.1">As you progress through this chapter, you will acquire a comprehensive understanding of the optimization techniques, enabling you to fine-tune the performance of your project and ensure a seamless multiplayer game experience. </span><span class="koboSpan" id="kobo.11.2">Furthermore, you will learn how to effectively isolate and troubleshoot any existing issues that may disrupt the overall </span><span class="No-Break"><span class="koboSpan" id="kobo.12.1">gameplay experience.</span></span></p>
<p><span class="koboSpan" id="kobo.13.1">So, in this chapter, I will guide you through the </span><span class="No-Break"><span class="koboSpan" id="kobo.14.1">following sections:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.15.1">Introducing </span><span class="No-Break"><span class="koboSpan" id="kobo.16.1">network debugging</span></span></li>
<li><span class="koboSpan" id="kobo.17.1">Emulating a </span><span class="No-Break"><span class="koboSpan" id="kobo.18.1">networked environment</span></span></li>
<li><span class="koboSpan" id="kobo.19.1">Using the </span><span class="No-Break"><span class="koboSpan" id="kobo.20.1">Network Profiler</span></span></li>
<li><span class="koboSpan" id="kobo.21.1">Improving performance and </span><span class="No-Break"><span class="koboSpan" id="kobo.22.1">bandwidth utilization</span></span></li>
</ul>
<h1 id="_idParaDest-216"><a id="_idTextAnchor217"/><span class="koboSpan" id="kobo.23.1">Technical requirements</span></h1>
<p><span class="koboSpan" id="kobo.24.1">To follow the topics presented in this chapter, you should have completed the previous ones and understood </span><span class="No-Break"><span class="koboSpan" id="kobo.25.1">their content.</span></span></p>
<p><span class="koboSpan" id="kobo.26.1">Additionally, if you would prefer to begin with code from the companion repository for this book, you can download the </span><strong class="source-inline"><span class="koboSpan" id="kobo.27.1">.zip</span></strong><span class="koboSpan" id="kobo.28.1"> project files provided in this book’s companion project </span><span class="No-Break"><span class="koboSpan" id="kobo.29.1">repository: </span></span><a href="https://github.com/PacktPublishing/Multiplayer-Game-Development-with-Unreal-Engine-5"><span class="No-Break"><span class="koboSpan" id="kobo.30.1">https://github.com/PacktPublishing/Multiplayer-Game-Development-with-Unreal-Engine-5</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.31.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.32.1">You can download the files that are up to date with the end of the previous chapter by clicking the </span><strong class="source-inline"><span class="koboSpan" id="kobo.33.1">Unreal Shadows – </span></strong><a href="B18203_10.xhtml#_idTextAnchor196"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.34.1">Chapter 10</span></em></span></a><strong class="source-inline"> </strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.35.1">End</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.36.1"> link.</span></span></p>
<h1 id="_idParaDest-217"><a id="_idTextAnchor218"/><span class="koboSpan" id="kobo.37.1">Introducing network debugging</span></h1>
<p><span class="koboSpan" id="kobo.38.1">Network testing and debugging</span><a id="_idIndexMarker612"/><span class="koboSpan" id="kobo.39.1"> is an essential skill for any professional working on multiplayer games. </span><span class="koboSpan" id="kobo.39.2">It requires a deep understanding of networking protocols and technologies, as well as an ability to identify and diagnose problems quickly. </span><span class="koboSpan" id="kobo.39.3">Additionally, it involves troubleshooting both client-side issues on the user’s device and server-side issues on the game’s servers. </span><span class="koboSpan" id="kobo.39.4">By mastering this skill, you can ensure that games are running smoothly with minimal latency for all </span><span class="No-Break"><span class="koboSpan" id="kobo.40.1">players involved.</span></span></p>
<p><span class="koboSpan" id="kobo.41.1">As you embark on the development of a networked game, it is imperative to consider the following obstacles that come with creating a seamless and engaging multiplayer experience for your audience, as opposed to a </span><span class="No-Break"><span class="koboSpan" id="kobo.42.1">single-player game:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.43.1">You will need to debug multiple running instances of </span><span class="No-Break"><span class="koboSpan" id="kobo.44.1">the project</span></span></li>
<li><span class="koboSpan" id="kobo.45.1">Network communication, by its nature, may be unreliable and unstable, and different clients may have </span><span class="No-Break"><span class="koboSpan" id="kobo.46.1">different issues</span></span></li>
<li><span class="koboSpan" id="kobo.47.1">A client will work differently as opposed to </span><span class="No-Break"><span class="koboSpan" id="kobo.48.1">a server</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.49.1">Unreal Engine comes equipped with a range of dedicated tools and workflows specifically designed for debugging networked applications. </span><span class="koboSpan" id="kobo.49.2">By following the guides provided in this chapter, you will gain valuable insights into how to effectively utilize these tools, as well as learn expert tips and best practices for troubleshooting any common networking problems that you </span><span class="No-Break"><span class="koboSpan" id="kobo.50.1">may encounter.</span></span></p>
<p><span class="koboSpan" id="kobo.51.1">Before I delve into how Unreal Engine’s debugging tools operate, it’s essential to have a basic understanding of </span><span class="No-Break"><span class="koboSpan" id="kobo.52.1">game debugging.</span></span></p>
<h2 id="_idParaDest-218"><a id="_idTextAnchor219"/><span class="koboSpan" id="kobo.53.1">Explaining game debugging</span></h2>
<p><span class="koboSpan" id="kobo.54.1">The process of </span><strong class="bold"><span class="koboSpan" id="kobo.55.1">debugging</span></strong><span class="koboSpan" id="kobo.56.1"> involves testing every part</span><a id="_idIndexMarker613"/><span class="koboSpan" id="kobo.57.1"> of the project to make sure everything works as expected and identifying any areas where improvements can be made – this will ensure optimal performance and stability for players when they’re playing your games. </span><span class="koboSpan" id="kobo.57.2">Debugging also includes checking the code functionality across different platforms and devices (for example, mobile platforms, desktop, or VR devices), running automated tests on builds before deployment, and </span><span class="No-Break"><span class="koboSpan" id="kobo.58.1">so on.</span></span></p>
<p><span class="koboSpan" id="kobo.59.1">In the end, good debugging practices will allow you to find small details that might otherwise go unnoticed and cause serious problems in development if they’re not addressed </span><span class="No-Break"><span class="koboSpan" id="kobo.60.1">early on!</span></span></p>
<p><span class="koboSpan" id="kobo.61.1">In the previous chapters, you utilized many debug tools provided by Unreal Engine – probably the most used one has been the </span><strong class="source-inline"><span class="koboSpan" id="kobo.62.1">GEngine-&gt;AddOnScreenDebugMessage()</span></strong><span class="koboSpan" id="kobo.63.1"> command, which adds the capability of showing messages on </span><span class="No-Break"><span class="koboSpan" id="kobo.64.1">the screen.</span></span></p>
<p><span class="koboSpan" id="kobo.65.1">Some other tools for debugging are purely visuals – such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.66.1">DrawDebugSphere()</span></strong><span class="koboSpan" id="kobo.67.1">, which you used in </span><a href="B18203_07.xhtml#_idTextAnchor147"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.68.1">Chapter 7</span></em></span></a><span class="koboSpan" id="kobo.69.1">, </span><em class="italic"><span class="koboSpan" id="kobo.70.1">Using Remote Procedure Calls (RPC)</span></em><span class="koboSpan" id="kobo.71.1">, to show the position of the Actors your player character can </span><span class="No-Break"><span class="koboSpan" id="kobo.72.1">interact with.</span></span></p>
<p><span class="koboSpan" id="kobo.73.1">If you are familiar with tools such as Microsoft Visual Studio, JetBrains Rider, or any other programming IDE, you will most probably</span><a id="_idIndexMarker614"/><span class="koboSpan" id="kobo.74.1"> know how important it is to use </span><strong class="bold"><span class="koboSpan" id="kobo.75.1">breakpoints</span></strong><span class="koboSpan" id="kobo.76.1"> – points in the code where the execution of the code can be temporarily stopped so that you can inspect a program’s data </span><span class="No-Break"><span class="koboSpan" id="kobo.77.1">and state.</span></span></p>
<p><span class="koboSpan" id="kobo.78.1">Debugging a multiplayer game – due to its very specialized nature – needs some more tools to inspect what is happening behind the scenes. </span><span class="koboSpan" id="kobo.78.2">In the following subsections, I will introduce you to some of these tools to help you improve your multiplayer </span><span class="No-Break"><span class="koboSpan" id="kobo.79.1">programming expertise.</span></span></p>
<h2 id="_idParaDest-219"><a id="_idTextAnchor220"/><span class="koboSpan" id="kobo.80.1">Introducing multiplayer options</span></h2>
<p><span class="koboSpan" id="kobo.81.1">Since </span><a href="B18203_03.xhtml#_idTextAnchor065"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.82.1">Chapter 3</span></em></span></a><span class="koboSpan" id="kobo.83.1">, </span><em class="italic"><span class="koboSpan" id="kobo.84.1">Testing the Multiplayer System with a Project Prototype</span></em><span class="koboSpan" id="kobo.85.1">, you have</span><a id="_idIndexMarker615"/><span class="koboSpan" id="kobo.86.1"> used the most common tool for testing a multiplayer environment by selecting </span><strong class="bold"><span class="koboSpan" id="kobo.87.1">Listen Server Net Mode</span></strong><span class="koboSpan" id="kobo.88.1"> and choosing the number of players to emulate. </span><span class="koboSpan" id="kobo.88.2">These settings are just part of the </span><strong class="bold"><span class="koboSpan" id="kobo.89.1">Multiplayer Options</span></strong><span class="koboSpan" id="kobo.90.1"> category that can be tweaked </span><a id="_idIndexMarker616"/><span class="koboSpan" id="kobo.91.1">in the project settings. </span><span class="koboSpan" id="kobo.91.2">To see the full range of options, from the main menu, do </span><span class="No-Break"><span class="koboSpan" id="kobo.92.1">the following:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.93.1">Select the </span><strong class="bold"><span class="koboSpan" id="kobo.94.1">Window</span></strong><span class="koboSpan" id="kobo.95.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.96.1">Editor Preferences</span></strong><span class="koboSpan" id="kobo.97.1"> option and locate the </span><strong class="bold"><span class="koboSpan" id="kobo.98.1">Level Editor</span></strong><span class="koboSpan" id="kobo.99.1"> | </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.100.1">Play</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.101.1"> setting.</span></span></li>
<li><span class="koboSpan" id="kobo.102.1">Look for the </span><strong class="bold"><span class="koboSpan" id="kobo.103.1">Multiplayer Options</span></strong><span class="koboSpan" id="kobo.104.1"> category, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.105.1">Figure 11</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.106.1">.1</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.107.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer160">
<span class="koboSpan" id="kobo.108.1"><img alt="Figure 11.1 – The Multiplayer Options category" src="image/Figure_11_01_B18203.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.109.1">Figure 11.1 – The Multiplayer Options category</span></p>
<p><span class="koboSpan" id="kobo.110.1">This category offers a plethora of options for customizing and debugging your game – you have already used </span><strong class="bold"><span class="koboSpan" id="kobo.111.1">Play Net Mode</span></strong><span class="koboSpan" id="kobo.112.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.113.1">Play Number of Clients</span></strong><span class="koboSpan" id="kobo.114.1"> (located in the </span><strong class="bold"><span class="koboSpan" id="kobo.115.1">Client</span></strong><span class="koboSpan" id="kobo.116.1"> subsection), even if you set these values from another part of the Unreal Editor (that is, the main toolbar). </span><span class="koboSpan" id="kobo.116.2">But there’s much more </span><span class="No-Break"><span class="koboSpan" id="kobo.117.1">than this!</span></span></p>
<p><span class="koboSpan" id="kobo.118.1">As an example, you can locate the </span><strong class="bold"><span class="koboSpan" id="kobo.119.1">Multiplayer Viewport Size (in pixels)</span></strong><span class="koboSpan" id="kobo.120.1"> option and, from the </span><strong class="bold"><span class="koboSpan" id="kobo.121.1">Common Resolutions</span></strong><span class="koboSpan" id="kobo.122.1"> dropdown, select the client display resolution. </span><span class="koboSpan" id="kobo.122.2">This will let you test the look and feel of your game once it’s played on your target devices. </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.123.1">Figure 11</span></em></span><em class="italic"><span class="koboSpan" id="kobo.124.1">.2</span></em><span class="koboSpan" id="kobo.125.1"> shows the look of the game once played on a </span><strong class="bold"><span class="koboSpan" id="kobo.126.1">720x1280 Razer </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.127.1">Phone</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.128.1"> device:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer161">
<span class="koboSpan" id="kobo.129.1"><img alt="Figure 11.2 – The smartphone display emulation" src="image/Figure_11_02_B18203.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.130.1">Figure 11.2 – The smartphone display emulation</span></p>
<p><span class="koboSpan" id="kobo.131.1">Hey, I know our project wasn’t originally designed to be played on a smartphone, but you get the idea </span><span class="No-Break"><span class="koboSpan" id="kobo.132.1">anyway, right?</span></span></p>
<p><span class="koboSpan" id="kobo.133.1">Later in this chapter, I will demonstrate</span><a id="_idIndexMarker617"/><span class="koboSpan" id="kobo.134.1"> some additional features within the </span><strong class="bold"><span class="koboSpan" id="kobo.135.1">Multiplayer Options</span></strong><span class="koboSpan" id="kobo.136.1"> section – for instance, the traffic emulation settings – that will enhance your proficiency during the debugging phase of </span><span class="No-Break"><span class="koboSpan" id="kobo.137.1">your project.</span></span></p>
<h2 id="_idParaDest-220"><a id="_idTextAnchor221"/><span class="koboSpan" id="kobo.138.1">Logging in a networked environment</span></h2>
<p><span class="koboSpan" id="kobo.139.1">As you may already</span><a id="_idIndexMarker618"/><span class="koboSpan" id="kobo.140.1"> know, in Unreal Engine – or any programming environment – </span><strong class="bold"><span class="koboSpan" id="kobo.141.1">logging</span></strong><span class="koboSpan" id="kobo.142.1"> can be used to debug and track the flow of code at runtime. </span><span class="koboSpan" id="kobo.142.2">Logging is a widely used practice in software development, and multiplayer development is no exception. </span><span class="koboSpan" id="kobo.142.3">Unreal Engine offers a wide variety of log categories and some of them are dedicated </span><span class="No-Break"><span class="koboSpan" id="kobo.143.1">to networking.</span></span></p>
<p><span class="koboSpan" id="kobo.144.1">The </span><strong class="bold"><span class="koboSpan" id="kobo.145.1">Output Log</span></strong><span class="koboSpan" id="kobo.146.1"> window keeps track of all the messages and can be opened by clicking on the dedicated button at the bottom of Unreal Engine, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.147.1">Figure 11</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.148.1">.3</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.149.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer162">
<span class="koboSpan" id="kobo.150.1"><img alt="Figure 11.3 – The Output Log activation button" src="image/Figure_11_03_B18203.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.151.1">Figure 11.3 – The Output Log activation button</span></p>
<p><span class="koboSpan" id="kobo.152.1">Additionally, all log messages are saved in a </span><strong class="source-inline"><span class="koboSpan" id="kobo.153.1">.log</span></strong><span class="koboSpan" id="kobo.154.1"> file located in your project folder (that is, </span><strong class="source-inline"><span class="koboSpan" id="kobo.155.1">[Your </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.156.1">Project Folder]/Saved/Logs/</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.157.1">).</span></span></p>
<p><span class="koboSpan" id="kobo.158.1">Each log message is categorized and can be filtered – as an example, </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.159.1">Figure 11</span></em></span><em class="italic"><span class="koboSpan" id="kobo.160.1">.4</span></em><span class="koboSpan" id="kobo.161.1"> shows the log window after I resized the game viewport from </span><span class="No-Break"><span class="koboSpan" id="kobo.162.1">the editor:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer163">
<span class="koboSpan" id="kobo.163.1"><img alt="Figure 11.4 – The log window open" src="image/Figure_11_04_B18203.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.164.1">Figure 11.4 – The log window open</span></p>
<p><span class="koboSpan" id="kobo.165.1">The most common category</span><a id="_idIndexMarker619"/><span class="koboSpan" id="kobo.166.1"> you will be using while network debugging is </span><strong class="bold"><span class="koboSpan" id="kobo.167.1">LogNet</span></strong><span class="koboSpan" id="kobo.168.1">, which includes the majority of </span><span class="No-Break"><span class="koboSpan" id="kobo.169.1">network logs.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.170.1">Note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.171.1">For an exhaustive list</span><a id="_idIndexMarker620"/><span class="koboSpan" id="kobo.172.1"> of all the log categories available in a networked environment, check out the official </span><span class="No-Break"><span class="koboSpan" id="kobo.173.1">documentation: </span></span><a href="https://docs.unrealengine.com/5.1/en-US/logging-for-networked-games-in-unreal-engine/"><span class="No-Break"><span class="koboSpan" id="kobo.174.1">https://docs.unrealengine.com/5.1/en-US/logging-for-networked-games-in-unreal-engine/</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.175.1">.</span></span></p>
<h2 id="_idParaDest-221"><a id="_idTextAnchor222"/><span class="koboSpan" id="kobo.176.1">Filtering the LogNet category</span></h2>
<p><span class="koboSpan" id="kobo.177.1">Now that you have some</span><a id="_idIndexMarker621"/><span class="koboSpan" id="kobo.178.1"> basic knowledge of the network log system, you can try playing the game and checking the </span><strong class="bold"><span class="koboSpan" id="kobo.179.1">Output Log</span></strong><span class="koboSpan" id="kobo.180.1"> window to see what’s happening under the hood. </span><span class="koboSpan" id="kobo.180.2">To do this, follow </span><span class="No-Break"><span class="koboSpan" id="kobo.181.1">these steps:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.182.1">Open your project in Unreal Engine and click on the </span><strong class="bold"><span class="koboSpan" id="kobo.183.1">Output Log</span></strong><span class="koboSpan" id="kobo.184.1"> button at the bottom of the editor. </span><span class="koboSpan" id="kobo.184.2">Optionally, you can click the </span><strong class="bold"><span class="koboSpan" id="kobo.185.1">Dock in Layout</span></strong><span class="koboSpan" id="kobo.186.1"> button to dock the window inside the editor and make </span><span class="No-Break"><span class="koboSpan" id="kobo.187.1">it non-collapsible.</span></span></li>
<li><span class="koboSpan" id="kobo.188.1">Once the log window is open, locate the </span><strong class="bold"><span class="koboSpan" id="kobo.189.1">Filters</span></strong><span class="koboSpan" id="kobo.190.1"> button and click on it to open all the filters. </span><span class="koboSpan" id="kobo.190.2">You will notice that the LogNet category is not shown. </span><span class="koboSpan" id="kobo.190.3">To enable it, you need to start a game session – once in Play Mode, you will notice that the category </span><span class="No-Break"><span class="koboSpan" id="kobo.191.1">is visible.</span></span></li>
<li><span class="koboSpan" id="kobo.192.1">From the </span><strong class="bold"><span class="koboSpan" id="kobo.193.1">Filters</span></strong><span class="koboSpan" id="kobo.194.1"> list, click on the </span><strong class="bold"><span class="koboSpan" id="kobo.195.1">Categories</span></strong><span class="koboSpan" id="kobo.196.1"> section and untick the </span><strong class="bold"><span class="koboSpan" id="kobo.197.1">Show All</span></strong><span class="koboSpan" id="kobo.198.1"> option to deselect all the categories, and then locate the </span><strong class="bold"><span class="koboSpan" id="kobo.199.1">LogNet</span></strong><span class="koboSpan" id="kobo.200.1"> category to enable it, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.201.1">Figure 11</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.202.1">.5</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.203.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer164">
<span class="koboSpan" id="kobo.204.1"><img alt="Figure 11.5 – The log categories filter" src="image/Figure_11_05_B18203.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.205.1">Figure 11.5 – The log categories filter</span></p>
<p><span class="koboSpan" id="kobo.206.1">Once you have enabled only the </span><strong class="bold"><span class="koboSpan" id="kobo.207.1">LogNet</span></strong><span class="koboSpan" id="kobo.208.1"> category, you</span><a id="_idIndexMarker622"/><span class="koboSpan" id="kobo.209.1"> will get a filtered log list, as depicted in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.210.1">Figure 11</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.211.1">.6</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.212.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer165">
<span class="koboSpan" id="kobo.213.1"><img alt="Figure 11.6 – The LogNet output" src="image/Figure_11_06_B18203.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.214.1">Figure 11.6 – The LogNet output</span></p>
<p><span class="koboSpan" id="kobo.215.1">As you can see, there’s a lot of stuff going on here, and it depends on your </span><span class="No-Break"><span class="koboSpan" id="kobo.216.1">game session.</span></span></p>
<p><span class="koboSpan" id="kobo.217.1">As an extra exercise, take some time and read the log messages. </span><span class="koboSpan" id="kobo.217.2">You probably won’t understand much at first sight but, as time goes by, this kind of communication with Unreal Engine</span><a id="_idIndexMarker623"/><span class="koboSpan" id="kobo.218.1"> will become familiar </span><span class="No-Break"><span class="koboSpan" id="kobo.219.1">to you.</span></span></p>
<p><span class="koboSpan" id="kobo.220.1">In the next subsection, you will learn how to create a log category so that you can easily track what’s happening inside </span><span class="No-Break"><span class="koboSpan" id="kobo.221.1">your application.</span></span></p>
<h2 id="_idParaDest-222"><a id="_idTextAnchor223"/><span class="koboSpan" id="kobo.222.1">Creating a custom log category</span></h2>
<p><span class="koboSpan" id="kobo.223.1">Usually, when you are caught</span><a id="_idIndexMarker624"/><span class="koboSpan" id="kobo.224.1"> up in the whirlwind of a project, the temptation is to use log messages without worrying too much about categorizing them. </span><span class="koboSpan" id="kobo.224.2">This is a mistake that, of course, will be paid for in the long run. </span><span class="koboSpan" id="kobo.224.3">Creating customized categories for your logs is simple, and there are no good reasons not to </span><span class="No-Break"><span class="koboSpan" id="kobo.225.1">do it.</span></span></p>
<p><span class="koboSpan" id="kobo.226.1">To define a custom category, you need to use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.227.1">DECLARE_LOG_CATEGORY_EXTERN</span></strong><span class="koboSpan" id="kobo.228.1"> macro inside a header and, in the corresponding source file, introduce the </span><strong class="source-inline"><span class="koboSpan" id="kobo.229.1">DEFINE_LOG_CATEGORY</span></strong><span class="koboSpan" id="kobo.230.1"> macro. </span><span class="koboSpan" id="kobo.230.2">Additionally, the category name must be named with a </span><strong class="source-inline"><span class="koboSpan" id="kobo.231.1">Log</span></strong><span class="koboSpan" id="kobo.232.1"> prefix – for instance, </span><strong class="source-inline"><span class="koboSpan" id="kobo.233.1">LogMyApp</span></strong><span class="koboSpan" id="kobo.234.1">. </span><span class="koboSpan" id="kobo.234.2">As an example, in the next few steps, you will be creating a custom log category for your game, named </span><strong class="source-inline"><span class="koboSpan" id="kobo.235.1">LogUnrealShadows</span></strong><span class="koboSpan" id="kobo.236.1">, which you can then use anywhere in </span><span class="No-Break"><span class="koboSpan" id="kobo.237.1">your project.</span></span></p>
<p><span class="koboSpan" id="kobo.238.1">So, open your programming IDE and create a new empty class named </span><strong class="source-inline"><span class="koboSpan" id="kobo.239.1">US_CustomLogs</span></strong><span class="koboSpan" id="kobo.240.1"> – you won’t need an Unreal class, just a regular </span><span class="No-Break"><span class="koboSpan" id="kobo.241.1">C++ one.</span></span></p>
<p><span class="koboSpan" id="kobo.242.1">Then, open the </span><strong class="source-inline"><span class="koboSpan" id="kobo.243.1">US_CustomLogs.h</span></strong><span class="koboSpan" id="kobo.244.1"> file and remove the class declaration as you won’t be using it. </span><span class="koboSpan" id="kobo.244.2">After that, add the following line </span><span class="No-Break"><span class="koboSpan" id="kobo.245.1">of code:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.246.1">
DECLARE_LOG_CATEGORY_EXTERN(LogUnrealShadows, Display, All);</span></pre>
<p><span class="koboSpan" id="kobo.247.1">This macro declares </span><strong class="source-inline"><span class="koboSpan" id="kobo.248.1">LogUnrealShadows</span></strong><span class="koboSpan" id="kobo.249.1"> as a new log category</span><a id="_idIndexMarker625"/><span class="koboSpan" id="kobo.250.1"> to be used in your project. </span><span class="koboSpan" id="kobo.250.2">The verbosity for this category is set to </span><strong class="source-inline"><span class="koboSpan" id="kobo.251.1">Display</span></strong><span class="koboSpan" id="kobo.252.1">; this means that the message will be printed to the console and the log file – if you need to print the message just in the log file and not in the console, you can use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.253.1">Log</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.254.1">value instead.</span></span></p>
<p><span class="koboSpan" id="kobo.255.1">Now, open the </span><strong class="source-inline"><span class="koboSpan" id="kobo.256.1">US_CustomLogs.cpp</span></strong><span class="koboSpan" id="kobo.257.1"> file and define the log category by adding the following line </span><span class="No-Break"><span class="koboSpan" id="kobo.258.1">of code:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.259.1">
DEFINE_LOG_CATEGORY(LogUnrealShadows);</span></pre>
<p><span class="koboSpan" id="kobo.260.1">This macro will let you use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.261.1">LogUnrealShadows</span></strong><span class="koboSpan" id="kobo.262.1"> category anywhere in your project. </span><span class="koboSpan" id="kobo.262.2">Once in Play Mode, you will be able to select the </span><strong class="source-inline"><span class="koboSpan" id="kobo.263.1">LogUnrealShadows</span></strong><span class="koboSpan" id="kobo.264.1"> category from the </span><strong class="bold"><span class="koboSpan" id="kobo.265.1">Output Log</span></strong><span class="koboSpan" id="kobo.266.1"> filter, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.267.1">Figure 11</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.268.1">.7</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.269.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer166">
<span class="koboSpan" id="kobo.270.1"><img alt="Figure 11.7 – The LogUnrealShadows category" src="image/Figure_11_07_B18203.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.271.1">Figure 11.7 – The LogUnrealShadows category</span></p>
<p><span class="koboSpan" id="kobo.272.1">Now that the category</span><a id="_idIndexMarker626"/><span class="koboSpan" id="kobo.273.1"> has been defined, you can use it to add your logs in the game – to do this, you can use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.274.1">UE_LOG()</span></strong><span class="koboSpan" id="kobo.275.1"> macro. </span><span class="koboSpan" id="kobo.275.2">As an example, open the </span><strong class="source-inline"><span class="koboSpan" id="kobo.276.1">US_GameMode.cpp</span></strong><span class="koboSpan" id="kobo.277.1"> file and add the needed </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.278.1">include</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.279.1"> declaration:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.280.1">
#include "US_CustomLogs.h"</span></pre>
<p><span class="koboSpan" id="kobo.281.1">Then, to log an alert message inside the </span><strong class="source-inline"><span class="koboSpan" id="kobo.282.1">AlertMinions()</span></strong><span class="koboSpan" id="kobo.283.1"> function class, you must add the following line </span><span class="No-Break"><span class="koboSpan" id="kobo.284.1">of code:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.285.1">
UE_LOG(LogUnrealShadows, Display, TEXT("Alerting Minions"));</span></pre>
<p><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.286.1">Figure 11</span></em></span><em class="italic"><span class="koboSpan" id="kobo.287.1">.8</span></em><span class="koboSpan" id="kobo.288.1"> shows the aforementioned message in the </span><strong class="bold"><span class="koboSpan" id="kobo.289.1">Output Log</span></strong><span class="koboSpan" id="kobo.290.1"> panel once a character has </span><span class="No-Break"><span class="koboSpan" id="kobo.291.1">been detected:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer167">
<span class="koboSpan" id="kobo.292.1"><img alt="Figure 11.8 – The custom message in the Output Log panel" src="image/Figure_11_08_B18203.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.293.1">Figure 11.8 – The custom message in the Output Log panel</span></p>
<p><span class="koboSpan" id="kobo.294.1">This section introduced</span><a id="_idIndexMarker627"/><span class="koboSpan" id="kobo.295.1"> you to some of the key debugging tools that are available in Unreal Engine and explained how to effectively utilize them. </span><span class="koboSpan" id="kobo.295.2">In the upcoming section, you’ll be presented with how to simulate a networked environment on your personal computer, providing you with the ability to test your project under conditions where major issues may arise </span><span class="No-Break"><span class="koboSpan" id="kobo.296.1">during execution.</span></span></p>
<h1 id="_idParaDest-223"><a id="_idTextAnchor224"/><span class="koboSpan" id="kobo.297.1">Emulating a networked environment</span></h1>
<p><span class="koboSpan" id="kobo.298.1">Creating a replica of a multiplayer network</span><a id="_idIndexMarker628"/><span class="koboSpan" id="kobo.299.1"> environment can be an effective way to simulate real-world scenarios and test the performance of your systems. </span><span class="koboSpan" id="kobo.299.2">By leveraging Unreal’s capabilities, you’ll be able to test multiple connections on a single machine and provide a realistic experience that will give you an accurate idea of your game behavior once it has been </span><span class="No-Break"><span class="koboSpan" id="kobo.300.1">deployed online.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.301.1">Network emulation</span></strong><span class="koboSpan" id="kobo.302.1"> is an important feature that helps you simulate</span><a id="_idIndexMarker629"/><span class="koboSpan" id="kobo.303.1"> lag and packet loss for both servers and clients. </span><span class="koboSpan" id="kobo.303.2">This is especially important in identifying and troubleshooting networking issues. </span><span class="koboSpan" id="kobo.303.3">Unreal Editor, the command line console, and configuration files all offer configurable settings for network emulation to ensure that it can be tailored precisely to </span><span class="No-Break"><span class="koboSpan" id="kobo.304.1">your needs.</span></span></p>
<h2 id="_idParaDest-224"><a id="_idTextAnchor225"/><span class="koboSpan" id="kobo.305.1">Enabling network emulation</span></h2>
<p><span class="koboSpan" id="kobo.306.1">Network emulation</span><a id="_idIndexMarker630"/><span class="koboSpan" id="kobo.307.1"> can be enabled from the </span><strong class="bold"><span class="koboSpan" id="kobo.308.1">Editor Preferences</span></strong><span class="koboSpan" id="kobo.309.1"> window, in the </span><strong class="bold"><span class="koboSpan" id="kobo.310.1">Level Editor</span></strong><span class="koboSpan" id="kobo.311.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.312.1">Play</span></strong><span class="koboSpan" id="kobo.313.1"> section. </span><span class="koboSpan" id="kobo.313.2">To enable this tool, locate the </span><strong class="bold"><span class="koboSpan" id="kobo.314.1">Multiplayer Options</span></strong><span class="koboSpan" id="kobo.315.1"> category and tick the </span><strong class="bold"><span class="koboSpan" id="kobo.316.1">Enable Network Emulation</span></strong><span class="koboSpan" id="kobo.317.1"> option, as depicted in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.318.1">Figure 11</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.319.1">.9</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.320.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer168">
<span class="koboSpan" id="kobo.321.1"><img alt="Figure 11.9 – Enable Network Emulation" src="image/Figure_11_09_B18203.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.322.1">Figure 11.9 – Enable Network Emulation</span></p>
<p><span class="koboSpan" id="kobo.323.1">Selecting this option will enable</span><a id="_idIndexMarker631"/><span class="koboSpan" id="kobo.324.1"> a set of options you can use to test different situations during a multiplayer session. </span><span class="koboSpan" id="kobo.324.2">Firstly, you can select which target to emulate through the </span><strong class="bold"><span class="koboSpan" id="kobo.325.1">Emulation Target</span></strong><span class="koboSpan" id="kobo.326.1"> property – there are three options </span><span class="No-Break"><span class="koboSpan" id="kobo.327.1">for this:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.328.1">Server Only</span></strong><span class="koboSpan" id="kobo.329.1">: This option will emulate just the server’s behavior over </span><span class="No-Break"><span class="koboSpan" id="kobo.330.1">the network</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.331.1">Clients Only</span></strong><span class="koboSpan" id="kobo.332.1">: This option will emulate just the client’s behavior over </span><span class="No-Break"><span class="koboSpan" id="kobo.333.1">the network</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.334.1">Everyone</span></strong><span class="koboSpan" id="kobo.335.1">: This option will emulate both the client’s and the server’s behavior over </span><span class="No-Break"><span class="koboSpan" id="kobo.336.1">the network</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.337.1">Secondly, you have access to </span><strong class="bold"><span class="koboSpan" id="kobo.338.1">Network Emulation Profile</span></strong><span class="koboSpan" id="kobo.339.1">, which will let you select different scenarios for a networked game – there are three options </span><span class="No-Break"><span class="koboSpan" id="kobo.340.1">for this:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.341.1">Average</span></strong><span class="koboSpan" id="kobo.342.1">: This option will emulate a regular </span><span class="No-Break"><span class="koboSpan" id="kobo.343.1">multiplayer game</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.344.1">Bad</span></strong><span class="koboSpan" id="kobo.345.1">: This option will create a worst-case scenario, with a high time lag and a lot of data packets lost during the </span><span class="No-Break"><span class="koboSpan" id="kobo.346.1">networked game</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.347.1">Custom</span></strong><span class="koboSpan" id="kobo.348.1">: This option will let you customize the emulation experience with your </span><span class="No-Break"><span class="koboSpan" id="kobo.349.1">own values</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.350.1">The aforementioned profiles will initialize</span><a id="_idIndexMarker632"/><span class="koboSpan" id="kobo.351.1"> a set of values for the </span><strong class="bold"><span class="koboSpan" id="kobo.352.1">Incoming Traffic</span></strong><span class="koboSpan" id="kobo.353.1"> and the </span><strong class="bold"><span class="koboSpan" id="kobo.354.1">Outgoing Traffic</span></strong><span class="koboSpan" id="kobo.355.1"> values of the client or the server (or both), depending on the </span><strong class="bold"><span class="koboSpan" id="kobo.356.1">Emulation Target</span></strong><span class="koboSpan" id="kobo.357.1"> selection. </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.358.1">Figure 11</span></em></span><em class="italic"><span class="koboSpan" id="kobo.359.1">.10</span></em><span class="koboSpan" id="kobo.360.1"> shows the expanded profile options with the custom </span><span class="No-Break"><span class="koboSpan" id="kobo.361.1">option selected:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer169">
<span class="koboSpan" id="kobo.362.1"><img alt="Figure 11.10 - The emulation profiles expanded" src="image/Figure_11_10_B18203.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.363.1">Figure 11.10 - The emulation profiles expanded</span></p>
<p><span class="koboSpan" id="kobo.364.1">In the next subsection, I will present you the meaning of most of the settings for this section of the </span><strong class="bold"><span class="koboSpan" id="kobo.365.1">Multiplayer </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.366.1">Options</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.367.1"> category.</span></span></p>
<h3><span class="koboSpan" id="kobo.368.1">Explaining the Incoming Traffic option</span></h3>
<p><span class="koboSpan" id="kobo.369.1">Activating the </span><strong class="bold"><span class="koboSpan" id="kobo.370.1">Incoming Traffic</span></strong><span class="koboSpan" id="kobo.371.1"> option will introduce</span><a id="_idIndexMarker633"/><span class="koboSpan" id="kobo.372.1"> delays or loss in the reception of packets during playtime. </span><span class="koboSpan" id="kobo.372.2">You can modify the </span><span class="No-Break"><span class="koboSpan" id="kobo.373.1">following properties:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.374.1">Minimum Latency</span></strong><span class="koboSpan" id="kobo.375.1">: This indicates the minimum amount of time lag </span><span class="No-Break"><span class="koboSpan" id="kobo.376.1">in milliseconds</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.377.1">Maximum Latency</span></strong><span class="koboSpan" id="kobo.378.1">: This indicates the maximum amount of time lag </span><span class="No-Break"><span class="koboSpan" id="kobo.379.1">in milliseconds</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.380.1">Packet Loss Percentage</span></strong><span class="koboSpan" id="kobo.381.1">: This indicates the chance that a packet will be lost before </span><span class="No-Break"><span class="koboSpan" id="kobo.382.1">being received</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.383.1">As an example, a typical bad situation of incoming traffic will have a latency of about 100 to 200 milliseconds and a probability of losing incoming data of about 5%. </span><span class="koboSpan" id="kobo.383.2">To create a similar scenario, your settings may have the </span><span class="No-Break"><span class="koboSpan" id="kobo.384.1">following values:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.385.1">Minimum Latency</span></strong><span class="koboSpan" id="kobo.386.1"> may be set to a value of </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.387.1">100</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.388.1"> milliseconds</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.389.1">Maximum Latency</span></strong><span class="koboSpan" id="kobo.390.1"> may be set to a value of </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.391.1">200</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.392.1"> milliseconds</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.393.1">Packet Loss Percentage</span></strong><span class="koboSpan" id="kobo.394.1"> may be set to a value </span><span class="No-Break"><span class="koboSpan" id="kobo.395.1">of </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.396.1">5</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.397.1">%</span></span></li>
</ul>
<h3><span class="koboSpan" id="kobo.398.1">Explaining the Outgoing Traffic option</span></h3>
<p><span class="koboSpan" id="kobo.399.1">Similarly, activating the </span><strong class="bold"><span class="koboSpan" id="kobo.400.1">Outgoing Traffic</span></strong><span class="koboSpan" id="kobo.401.1"> option will introduce</span><a id="_idIndexMarker634"/><span class="koboSpan" id="kobo.402.1"> delays or losses when you’re sending packets during playtime. </span><span class="koboSpan" id="kobo.402.2">You can modify the </span><span class="No-Break"><span class="koboSpan" id="kobo.403.1">following properties:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.404.1">Minimum Latency</span></strong><span class="koboSpan" id="kobo.405.1">: This indicates the minimum amount of time lag </span><span class="No-Break"><span class="koboSpan" id="kobo.406.1">in milliseconds</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.407.1">Maximum Latency</span></strong><span class="koboSpan" id="kobo.408.1">: This indicates the maximum amount of time lag </span><span class="No-Break"><span class="koboSpan" id="kobo.409.1">in milliseconds</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.410.1">Packet Loss Percentage</span></strong><span class="koboSpan" id="kobo.411.1">: This indicates the chance that a packet will be lost before </span><span class="No-Break"><span class="koboSpan" id="kobo.412.1">being received</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.413.1">As an example, you may simulate an average situation (that is, one that is not optimal but still acceptable) by having a latency of about 30 to 60 milliseconds and a probability of losing data of about 1%. </span><span class="koboSpan" id="kobo.413.2">Your settings may have the </span><span class="No-Break"><span class="koboSpan" id="kobo.414.1">following values:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.415.1">Minimum Latency</span></strong><span class="koboSpan" id="kobo.416.1"> may be set to a value of </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.417.1">30</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.418.1"> milliseconds</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.419.1">Maximum Latency</span></strong><span class="koboSpan" id="kobo.420.1"> may be set to a value of </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.421.1">60</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.422.1"> milliseconds</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.423.1">Packet Loss Percentage</span></strong><span class="koboSpan" id="kobo.424.1"> may be set to a value </span><span class="No-Break"><span class="koboSpan" id="kobo.425.1">of </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.426.1">1</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.427.1">%</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.428.1">You’ve now learned about all the ways</span><a id="_idIndexMarker635"/><span class="koboSpan" id="kobo.429.1"> you can simulate a real networked game environment. </span><span class="koboSpan" id="kobo.429.2">It’s now time to put that knowledge to the test and try it out with your multiplayer game! </span><span class="koboSpan" id="kobo.429.3">The Lichlord is getting a bit restless and is eagerly waiting for you. </span><span class="koboSpan" id="kobo.429.4">It’s best not to keep him waiting too long, so let’s not waste </span><span class="No-Break"><span class="koboSpan" id="kobo.430.1">any time!</span></span></p>
<h2 id="_idParaDest-225"><a id="_idTextAnchor226"/><span class="koboSpan" id="kobo.431.1">Testing the game with network emulation</span></h2>
<p><span class="koboSpan" id="kobo.432.1">Testing a game in a networked emulation</span><a id="_idIndexMarker636"/><span class="koboSpan" id="kobo.433.1"> is quite straightforward</span><a id="_idIndexMarker637"/><span class="koboSpan" id="kobo.434.1"> once you have understood the aforementioned elements – select your preferred settings and run the game. </span><span class="koboSpan" id="kobo.434.2">We will be emulating the game under different network scenarios, so open the project you have been working on in the previous chapters and get ready to do </span><span class="No-Break"><span class="koboSpan" id="kobo.435.1">some testing.</span></span></p>
<h3><span class="koboSpan" id="kobo.436.1">Testing the game under average conditions</span></h3>
<p><span class="koboSpan" id="kobo.437.1">In this scenario, you will be testing</span><a id="_idIndexMarker638"/><span class="koboSpan" id="kobo.438.1"> one of the default profiles available in the </span><strong class="bold"><span class="koboSpan" id="kobo.439.1">Editor Preferences</span></strong><span class="koboSpan" id="kobo.440.1"> area and checking the game’s behavior. </span><span class="koboSpan" id="kobo.440.2">To do so, follow </span><span class="No-Break"><span class="koboSpan" id="kobo.441.1">these steps:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.442.1">Open </span><strong class="bold"><span class="koboSpan" id="kobo.443.1">Editor Preferences</span></strong><span class="koboSpan" id="kobo.444.1"> and locate the </span><strong class="bold"><span class="koboSpan" id="kobo.445.1">Play</span></strong><span class="koboSpan" id="kobo.446.1"> | </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.447.1">Multiplayer</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.448.1"> category.</span></span></li>
<li><span class="koboSpan" id="kobo.449.1">Tick the </span><strong class="bold"><span class="koboSpan" id="kobo.450.1">Enable Network Emulation</span></strong><span class="koboSpan" id="kobo.451.1"> checkbox and set </span><strong class="bold"><span class="koboSpan" id="kobo.452.1">Emulation Target to Everyone</span></strong><span class="koboSpan" id="kobo.453.1">; with this option, we will be testing both the client and the server </span><span class="No-Break"><span class="koboSpan" id="kobo.454.1">network traffic.</span></span></li>
<li><span class="koboSpan" id="kobo.455.1">In the </span><strong class="bold"><span class="koboSpan" id="kobo.456.1">Network Emulation Profile</span></strong><span class="koboSpan" id="kobo.457.1"> drop-down menu, select </span><strong class="bold"><span class="koboSpan" id="kobo.458.1">Average</span></strong><span class="koboSpan" id="kobo.459.1">. </span><span class="koboSpan" id="kobo.459.2">The settings are shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.460.1">Figure 11</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.461.1">.11</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.462.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer170">
<span class="koboSpan" id="kobo.463.1"><img alt="Figure 11.11 – Network emulation with the Average profile" src="image/Figure_11_11_B18203.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.464.1">Figure 11.11 – Network emulation with the Average profile</span></p>
<p><span class="koboSpan" id="kobo.465.1">With this profile set up, start a </span><strong class="bold"><span class="koboSpan" id="kobo.466.1">Play as a Listen Server</span></strong><span class="koboSpan" id="kobo.467.1"> game session and analyze your game. </span><span class="koboSpan" id="kobo.467.2">You should see the game work almost smoothly, with no lag or synchronization issues. </span><span class="koboSpan" id="kobo.467.3">This is because we opted for a very low percentage of packet loss (that is, 1%) and a lag latency for both the server and the clients that will be in the range of 30 to </span><span class="No-Break"><span class="koboSpan" id="kobo.468.1">60 milliseconds.</span></span></p>
<p><span class="koboSpan" id="kobo.469.1">What we have here is an acceptable</span><a id="_idIndexMarker639"/><span class="koboSpan" id="kobo.470.1"> game scenario and the player experience will be nice and smooth. </span><span class="koboSpan" id="kobo.470.2">Now, let’s try using some harsh conditions to see how the </span><span class="No-Break"><span class="koboSpan" id="kobo.471.1">game behaves.</span></span></p>
<h3><span class="koboSpan" id="kobo.472.1">Testing the game under the worst conditions</span></h3>
<p><span class="koboSpan" id="kobo.473.1">In this second test, you’ll be testing</span><a id="_idIndexMarker640"/><span class="koboSpan" id="kobo.474.1"> a worst-case scenario, where the network will have a high percentage of packet loss and the traffic latency will emulate a bad network bandwidth. </span><span class="koboSpan" id="kobo.474.2">To do so, follow </span><span class="No-Break"><span class="koboSpan" id="kobo.475.1">these steps:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.476.1">Open </span><strong class="bold"><span class="koboSpan" id="kobo.477.1">Editor Preferences</span></strong><span class="koboSpan" id="kobo.478.1"> and locate the </span><strong class="bold"><span class="koboSpan" id="kobo.479.1">Play</span></strong><span class="koboSpan" id="kobo.480.1"> | </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.481.1">Multiplayer</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.482.1"> category.</span></span></li>
<li><span class="koboSpan" id="kobo.483.1">Tick the </span><strong class="bold"><span class="koboSpan" id="kobo.484.1">Enable Network Emulation</span></strong><span class="koboSpan" id="kobo.485.1"> checkbox and set </span><strong class="bold"><span class="koboSpan" id="kobo.486.1">Emulation Target to Everyone</span></strong><span class="koboSpan" id="kobo.487.1">; with this option, we will be testing both the client and the server </span><span class="No-Break"><span class="koboSpan" id="kobo.488.1">network traffic.</span></span></li>
<li><span class="koboSpan" id="kobo.489.1">From the </span><strong class="bold"><span class="koboSpan" id="kobo.490.1">Network Emulation Profile</span></strong><span class="koboSpan" id="kobo.491.1"> drop-down menu, </span><span class="No-Break"><span class="koboSpan" id="kobo.492.1">select </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.493.1">Custom</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.494.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.495.1">For both the </span><strong class="bold"><span class="koboSpan" id="kobo.496.1">Incoming Traffic</span></strong><span class="koboSpan" id="kobo.497.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.498.1">Outgoing Traffic</span></strong><span class="koboSpan" id="kobo.499.1"> categories, do </span><span class="No-Break"><span class="koboSpan" id="kobo.500.1">the following:</span></span><ul><li><span class="koboSpan" id="kobo.501.1">Set the </span><strong class="bold"><span class="koboSpan" id="kobo.502.1">Minimum Latency</span></strong><span class="koboSpan" id="kobo.503.1"> value </span><span class="No-Break"><span class="koboSpan" id="kobo.504.1">to </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.505.1">450</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.506.1">.</span></span></li><li><span class="koboSpan" id="kobo.507.1">Set the </span><strong class="bold"><span class="koboSpan" id="kobo.508.1">Maximum Latency</span></strong><span class="koboSpan" id="kobo.509.1"> value </span><span class="No-Break"><span class="koboSpan" id="kobo.510.1">to </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.511.1">550</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.512.1">.</span></span></li><li><span class="koboSpan" id="kobo.513.1">Set the </span><strong class="bold"><span class="koboSpan" id="kobo.514.1">Packet Loss Percentage</span></strong><span class="koboSpan" id="kobo.515.1"> value to </span><strong class="source-inline"><span class="koboSpan" id="kobo.516.1">10</span></strong><span class="koboSpan" id="kobo.517.1">. </span><span class="koboSpan" id="kobo.517.2">The settings are shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.518.1">Figure 11.12</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.519.1">:</span></span></li></ul></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer171">
<span class="koboSpan" id="kobo.520.1"><img alt="Figure 11.12 – Network emulation in a worst-case scenario" src="image/Figure_11_12_B18203.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.521.1">Figure 11.12 – Network emulation in a worst-case scenario</span></p>
<p><span class="koboSpan" id="kobo.522.1">With this profile set up, start a </span><strong class="bold"><span class="koboSpan" id="kobo.523.1">Play as a Listen Server</span></strong><span class="koboSpan" id="kobo.524.1"> game session and analyze your game. </span><span class="koboSpan" id="kobo.524.2">You will experience</span><a id="_idIndexMarker641"/><span class="koboSpan" id="kobo.525.1"> an almost broken experience! </span><span class="koboSpan" id="kobo.525.2">The same character will seem to move completely out of sync in the different windows and the same thing will stay true for your </span><span class="No-Break"><span class="koboSpan" id="kobo.526.1">character attack.</span></span></p>
<p><span class="koboSpan" id="kobo.527.1">But notice that I said “almost” – as the server is authoritative and we are using reliable RPCs for the most important operations, such as throwing daggers, the game will go on flawlessly from an execution point of view. </span><span class="koboSpan" id="kobo.527.2">This means that the same character position will – sooner or later – be synchronized on all clients and the daggers will always be thrown, no matter the packet </span><span class="No-Break"><span class="koboSpan" id="kobo.528.1">loss percentage.</span></span></p>
<p><span class="koboSpan" id="kobo.529.1">If you want to test a totally broken game, try setting </span><strong class="bold"><span class="koboSpan" id="kobo.530.1">Packet Loss Percentage</span></strong><span class="koboSpan" id="kobo.531.1"> to a value of </span><strong class="source-inline"><span class="koboSpan" id="kobo.532.1">100</span></strong><span class="koboSpan" id="kobo.533.1">, meaning that no packet will be received by the server or the clients. </span><span class="koboSpan" id="kobo.533.2">When entering Play Mode, the client won’t even start and all you will get will be a black screen. </span><span class="koboSpan" id="kobo.533.3">But this means the Lichlord has laid down a wickedly powerful enchantment on the network, stranding your fearless gang of thieves in a mystical quagmire. </span><span class="koboSpan" id="kobo.533.4">Unless some tech-savvy wizard at the King’s court can conjure a nifty counter-magic to unweave the spell, </span><span class="No-Break"><span class="koboSpan" id="kobo.534.1">that is!</span></span></p>
<p><span class="koboSpan" id="kobo.535.1">In this section, you learned how to test your game in a networked emulation environment directly from your trusty computer. </span><span class="koboSpan" id="kobo.535.2">One of the most powerful features available is the ability to simulate data loss and network lags – this means checking the player experience under any scenario, including a worst-case one, where the player will have an almost totally broken</span><a id="_idIndexMarker642"/><span class="koboSpan" id="kobo.536.1"> experience due to bad </span><span class="No-Break"><span class="koboSpan" id="kobo.537.1">networking technology.</span></span></p>
<p><span class="koboSpan" id="kobo.538.1">In the next section, you will be presented with another important topic in improving your game – how to profile a </span><span class="No-Break"><span class="koboSpan" id="kobo.539.1">networked application.</span></span></p>
<h1 id="_idParaDest-226"><a id="_idTextAnchor227"/><span class="koboSpan" id="kobo.540.1">Using the Network Profiler</span></h1>
<p><span class="koboSpan" id="kobo.541.1">Unreal Engine’s </span><strong class="bold"><span class="koboSpan" id="kobo.542.1">Network Profiler</span></strong><span class="koboSpan" id="kobo.543.1"> is a powerful standalone tool</span><a id="_idIndexMarker643"/><span class="koboSpan" id="kobo.544.1"> capable of analyzing and optimizing the performance of multiplayer game networks. </span><span class="koboSpan" id="kobo.544.2">A Profiler session will give you detailed insights into connection speeds, latency times, and other important metrics that can be used to identify potential issues or areas of improvement. </span><span class="koboSpan" id="kobo.544.3">By leveraging this information, you will be able to get optimal network performance and achieve a nicer user experience. </span><span class="koboSpan" id="kobo.544.4">In this section, I will guide you through the main features of </span><span class="No-Break"><span class="koboSpan" id="kobo.545.1">this tool.</span></span></p>
<p><span class="koboSpan" id="kobo.546.1">As stated previously, the Network Profiler is a standalone application that can be found in your Unreal Engine executable folder. </span><span class="koboSpan" id="kobo.546.2">Depending on your engine installation, the location path may vary, but it is usually located at </span><strong class="source-inline"><span class="koboSpan" id="kobo.547.1">[Your PC]/Programs </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.548.1">Files/Epic Games/UE_5.1/Engine/Binaries/DotNET/NetworkProfiler.exe</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.549.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.550.1">The Network Profiler application is shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.551.1">Figure 11</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.552.1">.13</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.553.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer172">
<span class="koboSpan" id="kobo.554.1"><img alt="Figure 11.13 – The Network Profiler application" src="image/Figure_11_13_B18203.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.555.1">Figure 11.13 – The Network Profiler application</span></p>
<p><span class="koboSpan" id="kobo.556.1">In the following section, I will show</span><a id="_idIndexMarker644"/><span class="koboSpan" id="kobo.557.1"> you how to record a network session and peek into its data through the </span><span class="No-Break"><span class="koboSpan" id="kobo.558.1">Network Profiler.</span></span></p>
<h2 id="_idParaDest-227"><a id="_idTextAnchor228"/><span class="koboSpan" id="kobo.559.1">Recording a profiling session</span></h2>
<p><span class="koboSpan" id="kobo.560.1">To use the Network Profiler, you need</span><a id="_idIndexMarker645"/><span class="koboSpan" id="kobo.561.1"> to collect some data for it to analyze. </span><span class="koboSpan" id="kobo.561.2">To accomplish this, you’ll need to work with an engine version that has stat tracking enabled, such as a debugger or editor built for non-debug configurations – in our case, we will be recording the data directly from the Unreal Engine Editor with the default </span><strong class="bold"><span class="koboSpan" id="kobo.562.1">Average</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.563.1">emulation profile.</span></span></p>
<p><span class="koboSpan" id="kobo.564.1">To record a profiling session, follow </span><span class="No-Break"><span class="koboSpan" id="kobo.565.1">these steps:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.566.1">Open the </span><strong class="bold"><span class="koboSpan" id="kobo.567.1">Play</span></strong><span class="koboSpan" id="kobo.568.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.569.1">Multiplayer Options</span></strong><span class="koboSpan" id="kobo.570.1"> category in the </span><strong class="bold"><span class="koboSpan" id="kobo.571.1">Editor Preferences</span></strong><span class="koboSpan" id="kobo.572.1"> window, as explained in the </span><span class="No-Break"><span class="koboSpan" id="kobo.573.1">previous section.</span></span></li>
<li><span class="koboSpan" id="kobo.574.1">Tick </span><strong class="bold"><span class="koboSpan" id="kobo.575.1">Enable Network Emulation</span></strong><span class="koboSpan" id="kobo.576.1"> and set </span><strong class="bold"><span class="koboSpan" id="kobo.577.1">Emulation Target</span></strong><span class="koboSpan" id="kobo.578.1"> to </span><strong class="bold"><span class="koboSpan" id="kobo.579.1">Everyone</span></strong><span class="koboSpan" id="kobo.580.1">. </span><span class="koboSpan" id="kobo.580.2">Then, set </span><strong class="bold"><span class="koboSpan" id="kobo.581.1">Network Emulation Profile</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.582.1">to </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.583.1">Average</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.584.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.585.1">Start your game and locate the </span><strong class="bold"><span class="koboSpan" id="kobo.586.1">Console Command</span></strong><span class="koboSpan" id="kobo.587.1"> prompt located at the bottom of the editor (or at the bottom of any </span><strong class="bold"><span class="koboSpan" id="kobo.588.1">Output Log</span></strong><span class="koboSpan" id="kobo.589.1"> window that’s open), as depicted in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.590.1">Figure 11</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.591.1">.14</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.592.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer173">
<span class="koboSpan" id="kobo.593.1"><img alt="Figure 11.14 – The Console Command prompt" src="image/Figure_11_14_B18203.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.594.1">Figure 11.14 – The Console Command prompt</span></p>
<ol>
<li value="4"><span class="koboSpan" id="kobo.595.1">Inside the prompt, enter </span><span class="No-Break"><span class="koboSpan" id="kobo.596.1">this command:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.597.1">
netprofile enable</span></pre></li>
</ol>
<p><span class="koboSpan" id="kobo.598.1">This will start a profile recording session and the </span><strong class="bold"><span class="koboSpan" id="kobo.599.1">Output Log</span></strong><span class="koboSpan" id="kobo.600.1"> window should display the </span><span class="No-Break"><span class="koboSpan" id="kobo.601.1">following message:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.602.1">
LogNet: Network Profiler: ENABLED</span></pre>
<ol>
<li value="5"><span class="koboSpan" id="kobo.603.1">Play your game for a couple of minutes and then enter the following command. </span><span class="koboSpan" id="kobo.603.2">This will close the </span><span class="No-Break"><span class="koboSpan" id="kobo.604.1">profiling session:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.605.1">
netprofile disable</span></pre></li>
<li><span class="koboSpan" id="kobo.606.1">This command will close the profiling session and save a </span><strong class="source-inline"><span class="koboSpan" id="kobo.607.1">.nprof</span></strong><span class="koboSpan" id="kobo.608.1"> file with all the recorded data in your project folder at the </span><span class="No-Break"><span class="koboSpan" id="kobo.609.1">following location:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.610.1">
[Your Project folder]/Saved/Profiling</span></pre></li>
</ol>
<p><span class="koboSpan" id="kobo.611.1">As an alternative, you can just use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.612.1">netprofile</span></strong><span class="koboSpan" id="kobo.613.1"> command, which will toggle the Profiler every time it </span><span class="No-Break"><span class="koboSpan" id="kobo.614.1">is used.</span></span></p>
<p><span class="koboSpan" id="kobo.615.1">Once you have saved</span><a id="_idIndexMarker646"/><span class="koboSpan" id="kobo.616.1"> your profiling session, you can open it with the </span><span class="No-Break"><span class="koboSpan" id="kobo.617.1">profiling tool.</span></span></p>
<h2 id="_idParaDest-228"><a id="_idTextAnchor229"/><span class="koboSpan" id="kobo.618.1">Analyzing a profiling session</span></h2>
<p><span class="koboSpan" id="kobo.619.1">After launching the Profiler</span><a id="_idIndexMarker647"/><span class="koboSpan" id="kobo.620.1"> application, you can click the </span><strong class="bold"><span class="koboSpan" id="kobo.621.1">Open</span></strong><span class="koboSpan" id="kobo.622.1"> button and navigate to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.623.1">Profiling</span></strong><span class="koboSpan" id="kobo.624.1"> folder to open the session you have recorded. </span><span class="koboSpan" id="kobo.624.2">An example session is depicted in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.625.1">Figure 11</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.626.1">.15</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.627.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer174">
<span class="koboSpan" id="kobo.628.1"><img alt="Figure 11.15 – A profiling session example" src="image/Figure_11_15_B18203.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.629.1">Figure 11.15 – A profiling session example</span></p>
<p><span class="koboSpan" id="kobo.630.1">You will see a lot of information</span><a id="_idIndexMarker648"/><span class="koboSpan" id="kobo.631.1"> here, including a graph containing all the networking information. </span><span class="koboSpan" id="kobo.631.2">Let’s focus on the bottom-right section, where you will see a list of IP addresses, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.632.1">Figure 11</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.633.1">.16</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.634.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer175">
<span class="koboSpan" id="kobo.635.1"><img alt="Figure 11.16 – The list of server and client IP addresses" src="image/Figure_11_16_B18203.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.636.1">Figure 11.16 – The list of server and client IP addresses</span></p>
<p><span class="koboSpan" id="kobo.637.1">This list represents the clients and the server that were profiled during the session – as you can see, in my example, I have a server (using port </span><strong class="bold"><span class="koboSpan" id="kobo.638.1">17777</span></strong><span class="koboSpan" id="kobo.639.1">) and two clients (using ports </span><strong class="bold"><span class="koboSpan" id="kobo.640.1">54897</span></strong><span class="koboSpan" id="kobo.641.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.642.1">54898</span></strong><span class="koboSpan" id="kobo.643.1">). </span><span class="koboSpan" id="kobo.643.2">You can select the client or the server you need to analyze and click the </span><strong class="bold"><span class="koboSpan" id="kobo.644.1">Apply Filters</span></strong><span class="koboSpan" id="kobo.645.1"> button to show just its profiled data. </span><span class="koboSpan" id="kobo.645.2">Additionally, you can enable some of the drop-down menus that will let you filter additional data, such as a single Actor type in the game. </span><span class="koboSpan" id="kobo.645.3">An example of this is the </span><strong class="bold"><span class="koboSpan" id="kobo.646.1">BP_Character</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.647.1">Blueprint Class.</span></span></p>
<p><span class="koboSpan" id="kobo.648.1">Once you have selected </span><a id="_idIndexMarker649"/><span class="koboSpan" id="kobo.649.1">the client or the server you need to analyze, you can select a portion of the graph that represents a group of frames during gameplay just by clicking and dragging on the chart data, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.650.1">Figure 11</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.651.1">.17</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.652.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer176">
<span class="koboSpan" id="kobo.653.1"><img alt="Figure 11.17 – A selected portion of the chart data" src="image/Figure_11_17_B18203.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.654.1">Figure 11.17 – A selected portion of the chart data</span></p>
<p><span class="koboSpan" id="kobo.655.1">If needed, you can even select</span><a id="_idIndexMarker650"/><span class="koboSpan" id="kobo.656.1"> a single frame by just clicking on the graph. </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.657.1">Figure 11</span></em></span><em class="italic"><span class="koboSpan" id="kobo.658.1">.18</span></em><span class="koboSpan" id="kobo.659.1"> shows the frame selection in the </span><span class="No-Break"><span class="koboSpan" id="kobo.660.1">graph chart:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer177">
<span class="koboSpan" id="kobo.661.1"><img alt="Figure 11.18 – A single frame in the chart data" src="image/Figure_11_18_B18203.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.662.1">Figure 11.18 – A single frame in the chart data</span></p>
<p><span class="koboSpan" id="kobo.663.1">Now, select the </span><strong class="bold"><span class="koboSpan" id="kobo.664.1">Actors</span></strong><span class="koboSpan" id="kobo.665.1"> tab, located at the bottom</span><a id="_idIndexMarker651"/><span class="koboSpan" id="kobo.666.1"> left of the application; you will be presented with all the Actors that were replicated during the selected frame range. </span><span class="koboSpan" id="kobo.666.2">My profiled record is shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.667.1">Figure 11</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.668.1">.19</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.669.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer178">
<span class="koboSpan" id="kobo.670.1"><img alt="Figure 11.19 – The Actors tab" src="image/Figure_11_19_B18203.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.671.1">Figure 11.19 – The Actors tab</span></p>
<p><span class="koboSpan" id="kobo.672.1">One of the most interesting columns here is </span><strong class="bold"><span class="koboSpan" id="kobo.673.1">MS</span></strong><span class="koboSpan" id="kobo.674.1">, which shows how many milliseconds were needed to replicate an Actor. </span><span class="koboSpan" id="kobo.674.2">Using this value, you can determine whether the Actor is taking an excessive amount of time to replicate and then proceed to investigate the underlying causes of </span><span class="No-Break"><span class="koboSpan" id="kobo.675.1">this issue.</span></span></p>
<p><span class="koboSpan" id="kobo.676.1">Another really important column to consider is </span><strong class="bold"><span class="koboSpan" id="kobo.677.1">Waste</span></strong><span class="koboSpan" id="kobo.678.1">. </span><span class="koboSpan" id="kobo.678.2">Its values represent the percentage – in terms of performance – lost by not updating replicated values. </span><span class="koboSpan" id="kobo.678.3">A high percentage means that the system kept on replicating values that were not updated often. </span><span class="koboSpan" id="kobo.678.4">If this column reaches values above 80%, you should probably consider changing the </span><strong class="source-inline"><span class="koboSpan" id="kobo.679.1">NetUpdateFrequency</span></strong><span class="koboSpan" id="kobo.680.1"> value (that is, the time interval that will pass when updating data over the network) of your Actor to a higher value to update its values </span><span class="No-Break"><span class="koboSpan" id="kobo.681.1">less often.</span></span></p>
<p><span class="koboSpan" id="kobo.682.1">If you select one of the Actors, you will get detailed information on the replicated properties during the analyzed time range. </span><span class="koboSpan" id="kobo.682.2">As an example, </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.683.1">Figure 11</span></em></span><em class="italic"><span class="koboSpan" id="kobo.684.1">.20</span></em><span class="koboSpan" id="kobo.685.1"> shows the </span><strong class="source-inline"><span class="koboSpan" id="kobo.686.1">BP_WoodenDoor</span></strong><span class="koboSpan" id="kobo.687.1"> data in a time range of about </span><span class="No-Break"><span class="koboSpan" id="kobo.688.1">1 minute:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer179">
<span class="koboSpan" id="kobo.689.1"><img alt="Figure 11.20 – The profiled data for the BP_WoodenDoor Blueprint" src="image/Figure_11_20_B18203.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.690.1">Figure 11.20 – The profiled data for the BP_WoodenDoor Blueprint</span></p>
<p><span class="koboSpan" id="kobo.691.1">During gameplay, one of the characters</span><a id="_idIndexMarker652"/><span class="koboSpan" id="kobo.692.1"> interacted with the door, so you can see the </span><strong class="bold"><span class="koboSpan" id="kobo.693.1">DoorOpen</span></strong><span class="koboSpan" id="kobo.694.1"> property replicated twice – one for the starting value and one for when the character was opened – and </span><strong class="bold"><span class="koboSpan" id="kobo.695.1">60</span></strong><span class="koboSpan" id="kobo.696.1"> replications for the </span><strong class="bold"><span class="koboSpan" id="kobo.697.1">RelativeRotation</span></strong><span class="koboSpan" id="kobo.698.1"> property – when the opening animation </span><span class="No-Break"><span class="koboSpan" id="kobo.699.1">was activated.</span></span></p>
<p><span class="koboSpan" id="kobo.700.1">What’s wrong here is the </span><strong class="bold"><span class="koboSpan" id="kobo.701.1">98.19%</span></strong><span class="koboSpan" id="kobo.702.1"> value for </span><strong class="bold"><span class="koboSpan" id="kobo.703.1">Waste</span></strong><span class="koboSpan" id="kobo.704.1">. </span><span class="koboSpan" id="kobo.704.2">Imagine adding dozens of doors to a big dungeon level! </span><span class="koboSpan" id="kobo.704.3">Such a waste of networked traffic. </span><span class="koboSpan" id="kobo.704.4">I should probably consider getting back to the door and changing </span><strong class="source-inline"><span class="koboSpan" id="kobo.705.1">NetUpdateFrequency</span></strong><span class="koboSpan" id="kobo.706.1"> to a </span><span class="No-Break"><span class="koboSpan" id="kobo.707.1">higher value.</span></span></p>
<p><span class="koboSpan" id="kobo.708.1">On the positive side, take a look at the </span><strong class="bold"><span class="koboSpan" id="kobo.709.1">Waste</span></strong><span class="koboSpan" id="kobo.710.1"> value for the </span><strong class="bold"><span class="koboSpan" id="kobo.711.1">BP_MinionMiniboss</span></strong><span class="koboSpan" id="kobo.712.1"> Actor, as depicted in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.713.1">Figure 11</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.714.1">.21</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.715.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer180">
<span class="koboSpan" id="kobo.716.1"><img alt="Figure 11.21 – The profiled data for the BP_Miniboss Blueprint" src="image/Figure_11_21_B18203.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.717.1">Figure 11.21 – The profiled data for the BP_Miniboss Blueprint</span></p>
<p><span class="koboSpan" id="kobo.718.1">I have achieved a nice </span><strong class="bold"><span class="koboSpan" id="kobo.719.1">27.32%</span></strong><span class="koboSpan" id="kobo.720.1"> for 1 minute of gameplay! </span><span class="koboSpan" id="kobo.720.2">But pay</span><a id="_idIndexMarker653"/><span class="koboSpan" id="kobo.721.1"> attention... </span><span class="koboSpan" id="kobo.721.2">this does not mean that I have spent fewer resources on this Actor replication. </span><span class="koboSpan" id="kobo.721.3">This indicates that I’m utilizing the available resources </span><span class="No-Break"><span class="koboSpan" id="kobo.722.1">more efficiently.</span></span></p>
<p><span class="koboSpan" id="kobo.723.1">Now, open the </span><strong class="bold"><span class="koboSpan" id="kobo.724.1">All RPCs</span></strong><span class="koboSpan" id="kobo.725.1"> tab located at the top of the application; you will get a list of the remote procedure calls that were used during the selected frame range. </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.726.1">Figure 11</span></em></span><em class="italic"><span class="koboSpan" id="kobo.727.1">.22</span></em><span class="koboSpan" id="kobo.728.1"> shows my situation for the example I have used </span><span class="No-Break"><span class="koboSpan" id="kobo.729.1">so far:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer181">
<span class="koboSpan" id="kobo.730.1"><img alt="Figure 11.22 – The RPC profiling window" src="image/Figure_11_22_B18203.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.731.1">Figure 11.22 – The RPC profiling window</span></p>
<p><span class="koboSpan" id="kobo.732.1">As you can see, you can analyze how many times a remote call was made and the cost of calling it – this additional information can help you optimize your code and streamline your </span><span class="No-Break"><span class="koboSpan" id="kobo.733.1">program’s performance.</span></span></p>
<p><span class="koboSpan" id="kobo.734.1">In this section, I presented you with one of the most important tools when working on a multiplayer game – the Network Profiler. </span><span class="koboSpan" id="kobo.734.2">With a strong knowledge of how to use it, you will be able to analyze various aspects of your game’s network performance, such as the frequency and cost of remote calls, as well as potential bottlenecks. </span><span class="koboSpan" id="kobo.734.3">This information can help you identify areas where you can optimize your game’s performance while providing a smoother and more enjoyable</span><a id="_idIndexMarker654"/><span class="koboSpan" id="kobo.735.1"> experience </span><span class="No-Break"><span class="koboSpan" id="kobo.736.1">for players.</span></span></p>
<p><span class="koboSpan" id="kobo.737.1">In the next section, I’ll share some tips with you that I hope will be useful in improving your multiplayer project and help you avoid common issues that can arise once your game is </span><span class="No-Break"><span class="koboSpan" id="kobo.738.1">played online.</span></span></p>
<h1 id="_idParaDest-229"><a id="_idTextAnchor230"/><span class="koboSpan" id="kobo.739.1">Improving performance and bandwidth utilization</span></h1>
<p><span class="koboSpan" id="kobo.740.1">Although Unreal Engine strives</span><a id="_idIndexMarker655"/><span class="koboSpan" id="kobo.741.1"> to maximize the efficiency of replicating Actors, it is typically</span><a id="_idIndexMarker656"/><span class="koboSpan" id="kobo.742.1"> a time-consuming process that can negatively impact performance. </span><span class="koboSpan" id="kobo.742.2">To facilitate this task, there are a few steps that you can take to optimize replication and make it more efficient. </span><span class="koboSpan" id="kobo.742.3">In this section, I will give you some advice on how to improve performance and avoid bottlenecks that may stop your game from </span><span class="No-Break"><span class="koboSpan" id="kobo.743.1">working efficiently.</span></span></p>
<h2 id="_idParaDest-230"><a id="_idTextAnchor231"/><span class="koboSpan" id="kobo.744.1">Turning on replication only when necessary</span></h2>
<p><span class="koboSpan" id="kobo.745.1">When replicating Actors, the server performs various checks, such as relevance, frequency of updates, and dormancy, among others. </span><span class="koboSpan" id="kobo.745.2">Avoid </span><a id="_idIndexMarker657"/><span class="koboSpan" id="kobo.746.1">turning on replication on Actors that won’t need this feature to put them off </span><span class="No-Break"><span class="koboSpan" id="kobo.747.1">these checks.</span></span></p>
<p><span class="koboSpan" id="kobo.748.1">If you really need Actor replication, consider fine-tuning </span><strong class="source-inline"><span class="koboSpan" id="kobo.749.1">NetUpdateFrequency</span></strong><span class="koboSpan" id="kobo.750.1"> for less important (or less frequently changing) Actors. </span><span class="koboSpan" id="kobo.750.2">This property will set the maximum update frequency over the network for the Actor. </span><span class="koboSpan" id="kobo.750.3">As an example, a background Actor such as an NPC may update at a very slow rate – say every 0.5 seconds – while a fast-moving enemy may need an update every </span><span class="No-Break"><span class="koboSpan" id="kobo.751.1">0.2 seconds.</span></span></p>
<p><span class="koboSpan" id="kobo.752.1">In some cases, you may want to implement custom net relevancy rules (or override available variables), which can help in reducing network load </span><span class="No-Break"><span class="koboSpan" id="kobo.753.1">at runtime.</span></span></p>
<h2 id="_idParaDest-231"><a id="_idTextAnchor232"/><span class="koboSpan" id="kobo.754.1">Avoiding invoking RPCs that are not required or essential</span></h2>
<p><span class="koboSpan" id="kobo.755.1">An RPC that could have been avoided</span><a id="_idIndexMarker658"/><span class="koboSpan" id="kobo.756.1"> is considered an unnecessary RPC and should </span><span class="No-Break"><span class="koboSpan" id="kobo.757.1">be avoided.</span></span></p>
<p><span class="koboSpan" id="kobo.758.1">As an example, server-specific logic does not have to be included in a server RPC if you can ensure that a non-replicated function will run only on </span><span class="No-Break"><span class="koboSpan" id="kobo.759.1">the server.</span></span></p>
<p><span class="koboSpan" id="kobo.760.1">Another example is a method call on a client – if you can guarantee that the client is locally controlled (that is, by using </span><strong class="source-inline"><span class="koboSpan" id="kobo.761.1">APawn::IsLocallyControlled()</span></strong><span class="koboSpan" id="kobo.762.1">), you can avoid using </span><span class="No-Break"><span class="koboSpan" id="kobo.763.1">an RPC.</span></span></p>
<h2 id="_idParaDest-232"><a id="_idTextAnchor233"/><span class="koboSpan" id="kobo.764.1">Distinguishing between reliable and unreliable RPCs</span></h2>
<p><span class="koboSpan" id="kobo.765.1">As you already know from </span><a href="B18203_07.xhtml#_idTextAnchor147"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.766.1">Chapter 7</span></em></span></a><span class="koboSpan" id="kobo.767.1">, </span><em class="italic"><span class="koboSpan" id="kobo.768.1">Using Remote Procedure Calls (RPCs)</span></em><span class="koboSpan" id="kobo.769.1">, any replicated method can either be reliable or unreliable and, by default, RPCs </span><span class="No-Break"><span class="koboSpan" id="kobo.770.1">are unreliable.</span></span></p>
<p><span class="koboSpan" id="kobo.771.1">Making the right choice</span><a id="_idIndexMarker659"/><span class="koboSpan" id="kobo.772.1"> between the two options may change the way</span><a id="_idIndexMarker660"/><span class="koboSpan" id="kobo.773.1"> your game will behave radically. </span><span class="koboSpan" id="kobo.773.2">To help you with this, here’s a list of the pros and cons of reliable and </span><span class="No-Break"><span class="koboSpan" id="kobo.774.1">unreliable RPCs:</span></span></p>
<ul>
<li><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.775.1">Reliable RPCs</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.776.1">:</span></span><ul><li><strong class="bold"><span class="koboSpan" id="kobo.777.1">Pro</span></strong><span class="koboSpan" id="kobo.778.1">: Functions will arrive at their destination in the same order as they </span><span class="No-Break"><span class="koboSpan" id="kobo.779.1">were sent</span></span></li><li><strong class="bold"><span class="koboSpan" id="kobo.780.1">Con</span></strong><span class="koboSpan" id="kobo.781.1">: Functions will consume more bandwidth and may lead to </span><span class="No-Break"><span class="koboSpan" id="kobo.782.1">longer latency</span></span></li></ul></li>
<li><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.783.1">Unreliable RPCs</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.784.1">:</span></span><ul><li><strong class="bold"><span class="koboSpan" id="kobo.785.1">Pro</span></strong><span class="koboSpan" id="kobo.786.1">: Functions will result in lower bandwidth usage compared to reliable calls; this makes them good candidates for functions that need to be </span><span class="No-Break"><span class="koboSpan" id="kobo.787.1">called frequently.</span></span></li><li><strong class="bold"><span class="koboSpan" id="kobo.788.1">Con</span></strong><span class="koboSpan" id="kobo.789.1">: Functions may not successfully reach their destination or may arrive with gaps in the RPC calls, even though they will be processed in the </span><span class="No-Break"><span class="koboSpan" id="kobo.790.1">correct order.</span></span></li></ul></li>
</ul>
<p><span class="koboSpan" id="kobo.791.1">As an example, you should refrain from sending reliable events too frequently, such as on the </span><strong class="source-inline"><span class="koboSpan" id="kobo.792.1">Tick()</span></strong><span class="koboSpan" id="kobo.793.1"> event, since the engine’s buffer of reliable events may become overloaded and disconnect the associated player. </span><span class="koboSpan" id="kobo.793.2">This kind of call is safer to use with an unreliable function – for instance, on non-critical cosmetic events, such as spawning sound and </span><span class="No-Break"><span class="koboSpan" id="kobo.794.1">visual effects.</span></span></p>
<h2 id="_idParaDest-233"><a id="_idTextAnchor234"/><span class="koboSpan" id="kobo.795.1">Validating data</span></h2>
<p><span class="koboSpan" id="kobo.796.1">If you are using C++, RPCs</span><a id="_idIndexMarker661"/><span class="koboSpan" id="kobo.797.1"> are the only way to pass data from the client to the server and vice versa, so it is a good habit to validate it whenever needed. </span><span class="koboSpan" id="kobo.797.2">The concept behind having a validation function for an RPC is that if it discovers any invalid parameters, it can signal the system to disconnect the client or server that initiated the RPC call. </span><span class="koboSpan" id="kobo.797.3">To ensure responsiveness, it’s preferable to retrieve data directly from the client and validate</span><a id="_idIndexMarker662"/><span class="koboSpan" id="kobo.798.1"> it on the </span><span class="No-Break"><span class="koboSpan" id="kobo.799.1">server side.</span></span></p>
<h2 id="_idParaDest-234"><a id="_idTextAnchor235"/><span class="koboSpan" id="kobo.800.1">Remembering that the GameMode exists only on the server</span></h2>
<p><span class="koboSpan" id="kobo.801.1">This may seem like a pretty</span><a id="_idIndexMarker663"/><span class="koboSpan" id="kobo.802.1"> basic topic, but you should always keep in mind that the GameMode is a non-replicated Actor and that it runs only on the server. </span><span class="koboSpan" id="kobo.802.2">This means that, whenever you will try to get it from a client, you will get a </span><strong class="source-inline"><span class="koboSpan" id="kobo.803.1">null</span></strong><span class="koboSpan" id="kobo.804.1"> value. </span><span class="koboSpan" id="kobo.804.2">Consequently, calling an RPC on it is simply nonsense as it will run locally only on </span><span class="No-Break"><span class="koboSpan" id="kobo.805.1">the server.</span></span></p>
<h2 id="_idParaDest-235"><a id="_idTextAnchor236"/><span class="koboSpan" id="kobo.806.1">Using a naming convention for RPCs</span></h2>
<p><span class="koboSpan" id="kobo.807.1">As your project grows</span><a id="_idIndexMarker664"/><span class="koboSpan" id="kobo.808.1"> in size, keeping track of which functions are RPCs</span><a id="_idIndexMarker665"/><span class="koboSpan" id="kobo.809.1"> and which are not can become challenging; this means that using a good naming convention may be a time-saver. </span><span class="koboSpan" id="kobo.809.2">You can use a </span><strong class="source-inline"><span class="koboSpan" id="kobo.810.1">_Server</span></strong><span class="koboSpan" id="kobo.811.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.812.1">_Client</span></strong><span class="koboSpan" id="kobo.813.1"> suffix, as I showed you during the previous chapters, or you can opt for a </span><strong class="source-inline"><span class="koboSpan" id="kobo.814.1">Server_</span></strong><span class="koboSpan" id="kobo.815.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.816.1">Client_</span></strong><span class="koboSpan" id="kobo.817.1"> prefix. </span><span class="koboSpan" id="kobo.817.2">You can even differentiate between </span><strong class="source-inline"><span class="koboSpan" id="kobo.818.1">_Client</span></strong><span class="koboSpan" id="kobo.819.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.820.1">_Multicast</span></strong><span class="koboSpan" id="kobo.821.1"> RPCs if </span><span class="No-Break"><span class="koboSpan" id="kobo.822.1">you wish.</span></span></p>
<p><span class="koboSpan" id="kobo.823.1">If you’re working with a team, this is typically a requirement. </span><span class="koboSpan" id="kobo.823.2">However, even if you’re working solo, you’ll find this convention to be useful in the </span><span class="No-Break"><span class="koboSpan" id="kobo.824.1">long run.</span></span></p>
<p><span class="koboSpan" id="kobo.825.1">As you may have noticed, improving your game is a constant journey that never truly ends. </span><span class="koboSpan" id="kobo.825.2">You’ll always be tweaking things, analyzing data, and identifying any obstacles. </span><span class="koboSpan" id="kobo.825.3">With the tips I’ve mentioned, I hope to make this process a little less stressful </span><span class="No-Break"><span class="koboSpan" id="kobo.826.1">for you!</span></span></p>
<h1 id="_idParaDest-236"><a id="_idTextAnchor237"/><span class="koboSpan" id="kobo.827.1">Summary</span></h1>
<p><span class="koboSpan" id="kobo.828.1">In this chapter, I talked about a really important topic in game programming – making sure that your game works properly and fixing any issues that come up. </span><span class="koboSpan" id="kobo.828.2">In earlier chapters, we covered some tools for finding and fixing problems in Unreal Engine, but now, I’ve given you some even stronger and more helpful tools that you can use to make your game development even better. </span><span class="koboSpan" id="kobo.828.3">First of all, you learned how to configure </span><strong class="bold"><span class="koboSpan" id="kobo.829.1">Multiplayer Options</span></strong><span class="koboSpan" id="kobo.830.1"> from </span><strong class="bold"><span class="koboSpan" id="kobo.831.1">Editor Preferences</span></strong><span class="koboSpan" id="kobo.832.1">, after which you created a log category to properly set custom messages when debugging. </span><span class="koboSpan" id="kobo.832.2">You were then presented with how to emulate a real multiplayer environment on a single PC by testing network issues such as packet loss or </span><span class="No-Break"><span class="koboSpan" id="kobo.833.1">low bandwidth.</span></span></p>
<p><span class="koboSpan" id="kobo.834.1">Next, I presented the Network Profiler, a standalone piece of software that will let you read and analyze a multiplayer session to help you find possible issues and bottlenecks in </span><span class="No-Break"><span class="koboSpan" id="kobo.835.1">your code.</span></span></p>
<p><span class="koboSpan" id="kobo.836.1">Lastly, I gave you some advice on how to improve your project </span><span class="No-Break"><span class="koboSpan" id="kobo.837.1">even more.</span></span></p>
<p><span class="koboSpan" id="kobo.838.1">Testing and debugging a game before release can help ensure that it runs smoothly and offers a positive experience to players. </span><span class="koboSpan" id="kobo.838.2">Additionally, being equipped with the right tools and knowledge for debugging can make the process faster and easier, saving valuable time and resources during development. </span><span class="koboSpan" id="kobo.838.3">Understanding how to debug a multiplayer game is crucial because the involvement of multiple players can create technical challenges that are more intricate, such as synchronization and </span><span class="No-Break"><span class="koboSpan" id="kobo.839.1">latency issues.</span></span></p>
<p><span class="koboSpan" id="kobo.840.1">In the upcoming chapter, we’ll get back to our project (and the wicked machinations of the Lichlord!). </span><span class="koboSpan" id="kobo.840.2">Our goal this time around? </span><span class="koboSpan" id="kobo.840.3">Mastering the art of managing a gameplay session to ensure an unforgettable experience for our future, enthusiastic players. </span><span class="koboSpan" id="kobo.840.4">Let’s make sure they keep coming back for more, </span><span class="No-Break"><span class="koboSpan" id="kobo.841.1">shall we?</span></span></p>
</div>


<div class="Content" id="_idContainer183">
<h1 id="_idParaDest-237" lang="en-US" xml:lang="en-US"><a id="_idTextAnchor238"/><span class="koboSpan" id="kobo.1.1">Part 4:Deploying Your Game Online</span></h1>
<p><span class="koboSpan" id="kobo.2.1">In the last part of the book, you will become acquainted with the more intricate elements of the Unreal Engine multiplayer system. </span><span class="koboSpan" id="kobo.2.2">You will begin by delving into game session management and progress to constructing a deployable build of your game. </span><span class="koboSpan" id="kobo.2.3">Finally, you will gain insight into cloud services, which can enhance the appeal of your game </span><span class="No-Break"><span class="koboSpan" id="kobo.3.1">to players.</span></span></p>
<p><span class="koboSpan" id="kobo.4.1">This part includes the </span><span class="No-Break"><span class="koboSpan" id="kobo.5.1">following chapters:</span></span></p>
<ul>
<li><a href="B18203_12.xhtml#_idTextAnchor239"><em class="italic"><span class="koboSpan" id="kobo.6.1">Chapter 12</span></em></a><span class="koboSpan" id="kobo.7.1">, </span><em class="italic"><span class="koboSpan" id="kobo.8.1">Managing Multiplayer Sessions</span></em></li>
<li><a href="B18203_13.xhtml#_idTextAnchor255"><em class="italic"><span class="koboSpan" id="kobo.9.1">Chapter 13</span></em></a><span class="koboSpan" id="kobo.10.1">, </span><em class="italic"><span class="koboSpan" id="kobo.11.1">Handling Data During a Session</span></em></li>
<li><a href="B18203_14.xhtml#_idTextAnchor275"><em class="italic"><span class="koboSpan" id="kobo.12.1">Chapter 14</span></em></a><span class="koboSpan" id="kobo.13.1">, </span><em class="italic"><span class="koboSpan" id="kobo.14.1">Deploying Multiplayer Games</span></em></li>
<li><a href="B18203_15.xhtml#_idTextAnchor288"><em class="italic"><span class="koboSpan" id="kobo.15.1">Chapter 15</span></em></a><span class="koboSpan" id="kobo.16.1">, </span><em class="italic"><span class="koboSpan" id="kobo.17.1">Adding Epic Online Services (EOS)</span></em></li>
</ul>
</div>
<div>
<div id="_idContainer184">
</div>
</div>
<div>
<div id="_idContainer185">
</div>
</div>
<div>
<div id="_idContainer186">
</div>
</div>
<div>
<div id="_idContainer187">
</div>
</div>
<div>
<div id="_idContainer188">
</div>
</div>
<div>
<div class="Basic-Graphics-Frame" id="_idContainer189">
</div>
</div>
<div>
<div class="Basic-Graphics-Frame" id="_idContainer190">
</div>
</div>
<div>
<div id="_idContainer191">
</div>
</div>
<div>
<div id="_idContainer192">
</div>
</div>
<div>
<div class="Basic-Graphics-Frame" id="_idContainer193">
</div>
</div>
</body></html>