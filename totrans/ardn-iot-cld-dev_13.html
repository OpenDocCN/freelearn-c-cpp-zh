<html><head></head><body>
<div id="_idContainer224">
<h1 class="chapter-number" id="_idParaDest-268"><a id="_idTextAnchor268"/><span class="koboSpan" id="kobo.1.1">13</span></h1>
<h1 id="_idParaDest-269"><a id="_idTextAnchor269"/><span class="koboSpan" id="kobo.2.1">Scripting the Arduino IoT Cloud with Cloud CLI</span></h1>
<p><span class="koboSpan" id="kobo.3.1">The Arduino Cloud </span><strong class="bold"><span class="koboSpan" id="kobo.4.1">Command-Line Interface</span></strong><span class="koboSpan" id="kobo.5.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.6.1">CLI</span></strong><span class="koboSpan" id="kobo.7.1">) is an automation tool that is useful for scripting</span><a id="_idIndexMarker1004"/><span class="koboSpan" id="kobo.8.1"> and creating devices, Things, and dashboards. </span><span class="koboSpan" id="kobo.8.2">It also provides the option to perform mass uploads (</span><strong class="bold"><span class="koboSpan" id="kobo.9.1">OTA</span></strong><span class="koboSpan" id="kobo.10.1">), enabling the fleet management of deployed IoT</span><a id="_idIndexMarker1005"/><span class="koboSpan" id="kobo.11.1"> nodes. </span><span class="koboSpan" id="kobo.11.2">This chapter will explore the advanced functionalities of the tool and propose some scenarios for </span><span class="No-Break"><span class="koboSpan" id="kobo.12.1">its usage.</span></span></p>
<p><span class="koboSpan" id="kobo.13.1">The Arduino Cloud CLI is a cross-platform tool that lets you perform bulk management and operations via the command line, which helps you to increase your productivity, and provides the option to automate Things via command-line scripts. </span><span class="koboSpan" id="kobo.13.2">In this chapter, we will explore all the commands and observe </span><span class="No-Break"><span class="koboSpan" id="kobo.14.1">their context.</span></span></p>
<p><span class="koboSpan" id="kobo.15.1">By the end of this chapter, you will understand how to interact with the Arduino IoT Cloud platform via a CLI to create, delete, or extract templates from devices, Things, and dashboards and send OTA updates to devices via the command line. </span><span class="koboSpan" id="kobo.15.2">This chapter will show you how to perform all the operations via the command line to boost your productivity. </span><span class="koboSpan" id="kobo.15.3">The commands you will learn will help you write custom scripts for use in mass deployments and bulk </span><span class="No-Break"><span class="koboSpan" id="kobo.16.1">management operations.</span></span></p>
<p><span class="koboSpan" id="kobo.17.1">In this chapter, we will cover the following </span><span class="No-Break"><span class="koboSpan" id="kobo.18.1">main topics:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.19.1">What is the Arduino </span><span class="No-Break"><span class="koboSpan" id="kobo.20.1">Cloud CLI?</span></span></li>
<li><span class="koboSpan" id="kobo.21.1">Securing access – unveiling API keys </span><span class="No-Break"><span class="koboSpan" id="kobo.22.1">and authentication</span></span></li>
<li><span class="koboSpan" id="kobo.23.1">Installing the Arduino </span><span class="No-Break"><span class="koboSpan" id="kobo.24.1">Cloud CLI</span></span></li>
<li><span class="koboSpan" id="kobo.25.1">Interacting </span><span class="No-Break"><span class="koboSpan" id="kobo.26.1">with devices</span></span></li>
<li><span class="koboSpan" id="kobo.27.1">Engaging </span><span class="No-Break"><span class="koboSpan" id="kobo.28.1">with Things</span></span></li>
<li><span class="koboSpan" id="kobo.29.1">Crafting dashboards – unleashing potential via the </span><span class="No-Break"><span class="koboSpan" id="kobo.30.1">command line</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.31.1">OTA management</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.32.1">What’s next?</span></span></li>
</ul>
<h1 id="_idParaDest-270"><a id="_idTextAnchor270"/><span class="koboSpan" id="kobo.33.1">Technical requirements</span></h1>
<p><span class="koboSpan" id="kobo.34.1">There are no specific hardware requirements for this chapter as we will focus on the Arduino Cloud CLI and work through different command exercises to perform operations on the Arduino IoT Cloud platform using a CLI. </span><span class="koboSpan" id="kobo.34.2">However, before we proceed, we will need the following software to complete the different exercises in </span><span class="No-Break"><span class="koboSpan" id="kobo.35.1">this chapter:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.36.1">The Arduino </span><span class="No-Break"><span class="koboSpan" id="kobo.37.1">Cloud CLI</span></span></li>
<li><span class="koboSpan" id="kobo.38.1">The </span><span class="No-Break"><span class="koboSpan" id="kobo.39.1">Arduino IDE</span></span></li>
<li><span class="koboSpan" id="kobo.40.1">An Arduino IoT </span><span class="No-Break"><span class="koboSpan" id="kobo.41.1">Cloud account</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.42.1">For the commands, we need the Arduino Cloud CLI and an active Arduino IoT Cloud account. </span><span class="koboSpan" id="kobo.42.2">This chapter only contains commands, so there is no folder for it </span><span class="No-Break"><span class="koboSpan" id="kobo.43.1">on GitHub.</span></span></p>
<h1 id="_idParaDest-271"><a id="_idTextAnchor271"/><span class="koboSpan" id="kobo.44.1">What is the Arduino Cloud CLI?</span></h1>
<p><span class="koboSpan" id="kobo.45.1">The Arduino Cloud CLI</span><a id="_idIndexMarker1006"/><span class="koboSpan" id="kobo.46.1"> is a powerful tool to manage and interact with your Arduino projects on the cloud. </span><span class="koboSpan" id="kobo.46.2">It allows you to perform various operations, such as deploying and managing devices and generating a dashboard and Things template for bulk creations, all from the comfort of your </span><span class="No-Break"><span class="koboSpan" id="kobo.47.1">command line.</span></span></p>
<p><span class="koboSpan" id="kobo.48.1">The benefits of using the Arduino Cloud CLI are numerous. </span><span class="koboSpan" id="kobo.48.2">Firstly, it provides a convenient and efficient way to manage your projects without the need for a graphical user interface. </span><span class="koboSpan" id="kobo.48.3">This can be particularly useful if you prefer working with command-line tools, or if you integrate Arduino into an </span><span class="No-Break"><span class="koboSpan" id="kobo.49.1">automated workflow.</span></span></p>
<p><span class="koboSpan" id="kobo.50.1">The Arduino Cloud CLI serves as a command-line utility, enabling you to interact with the key functionalities of the Arduino IoT Cloud through a terminal. </span><span class="koboSpan" id="kobo.50.2">It provides the capability to accomplish the </span><span class="No-Break"><span class="koboSpan" id="kobo.51.1">following tasks:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.52.1">Duplicate existing Things and dashboards by extracting </span><span class="No-Break"><span class="koboSpan" id="kobo.53.1">their templates</span></span></li>
<li><span class="koboSpan" id="kobo.54.1">Execute mass </span><span class="No-Break"><span class="koboSpan" id="kobo.55.1">OTA uploads</span></span></li>
<li><span class="koboSpan" id="kobo.56.1">Generate devices, Things, and dashboards directly through </span><span class="No-Break"><span class="koboSpan" id="kobo.57.1">the CLI</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.58.1">Here are some of the benefits of using</span><a id="_idIndexMarker1007"/><span class="koboSpan" id="kobo.59.1"> the Arduino </span><span class="No-Break"><span class="koboSpan" id="kobo.60.1">Cloud CLI:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.61.1">Automation</span></strong><span class="koboSpan" id="kobo.62.1">: The Arduino Cloud CLI can be used to automate tasks that you would otherwise have to do manually. </span><span class="koboSpan" id="kobo.62.2">For example, you could use it to create a script that clones a Thing and then performs a mass OTA upload to all of the devices that are associated with </span><span class="No-Break"><span class="koboSpan" id="kobo.63.1">that Thing.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.64.1">Efficient device management</span></strong><span class="koboSpan" id="kobo.65.1">: The Arduino Cloud CLI can help you manage a large number of devices more efficiently. </span><span class="koboSpan" id="kobo.65.2">For example, you could use it to list all of the devices that are associated with a particular tag or to get the status of a </span><span class="No-Break"><span class="koboSpan" id="kobo.66.1">particular device.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.67.1">Access to advanced features</span></strong><span class="koboSpan" id="kobo.68.1">: The Arduino Cloud CLI can be used to access features of the Arduino IoT Cloud that are not available in a web interface. </span><span class="koboSpan" id="kobo.68.2">For example, you could use it to create a script that checks the status of a device every minute and then sends an email alert if the </span><span class="No-Break"><span class="koboSpan" id="kobo.69.1">status changes.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.70.1">Customization</span></strong><span class="koboSpan" id="kobo.71.1">: Being open source, users have the flexibility to customize the Arduino Cloud CLI to suit their specific needs and integrate it into </span><span class="No-Break"><span class="koboSpan" id="kobo.72.1">their workflows.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.73.1">Active development and community support</span></strong><span class="koboSpan" id="kobo.74.1">: The tool is actively developed, meaning it continually receives updates, new features, and bug fixes. </span><span class="koboSpan" id="kobo.74.2">Additionally, the presence of a large community can provide assistance and support </span><span class="No-Break"><span class="koboSpan" id="kobo.75.1">for users.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.76.1">Time and effort savings</span></strong><span class="koboSpan" id="kobo.77.1">: The Arduino Cloud CLI can save time and effort in managing IoT projects, making it a valuable resource for developers working with </span><span class="No-Break"><span class="koboSpan" id="kobo.78.1">Arduino devices.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.79.1">Overall, the Arduino Cloud CLI is a powerful tool that can be used to automate tasks, manage a large number of devices, and access features of the Arduino IoT Cloud that are not available</span><a id="_idIndexMarker1008"/><span class="koboSpan" id="kobo.80.1"> in a </span><span class="No-Break"><span class="koboSpan" id="kobo.81.1">web interface.</span></span></p>
<p><span class="koboSpan" id="kobo.82.1">In this section, we have discussed what the Arduino Cloud CLI is and what the benefits of the Arduino Cloud CLI are. </span><span class="koboSpan" id="kobo.82.2">In the next section, we will explore how to set up API keys and how to use API keys to authenticate the Arduino Cloud CLI with the Arduino </span><span class="No-Break"><span class="koboSpan" id="kobo.83.1">IoT Cloud.</span></span></p>
<h1 id="_idParaDest-272"><a id="_idTextAnchor272"/><span class="koboSpan" id="kobo.84.1">Securing access – unveiling API keys and authentication</span></h1>
<p><span class="koboSpan" id="kobo.85.1">Before getting</span><a id="_idIndexMarker1009"/><span class="koboSpan" id="kobo.86.1"> into the meat of the chapter, we first need to talk about the authentication </span><a id="_idIndexMarker1010"/><span class="koboSpan" id="kobo.87.1">mechanism of the platform. </span><span class="koboSpan" id="kobo.87.2">The Arduino IoT Cloud uses a </span><strong class="bold"><span class="koboSpan" id="kobo.88.1">token authentication mechanism</span></strong><span class="koboSpan" id="kobo.89.1"> to validate Arduino Cloud </span><span class="No-Break"><span class="koboSpan" id="kobo.90.1">CLI requests.</span></span></p>
<p><span class="koboSpan" id="kobo.91.1">Before we start to install and test the Arduino Cloud CLI, we need to set up</span><a id="_idIndexMarker1011"/><span class="koboSpan" id="kobo.92.1"> the API keys in Arduino Cloud that will provide us with the client ID and secret. </span><span class="koboSpan" id="kobo.92.2">In older versions</span><a id="_idIndexMarker1012"/><span class="koboSpan" id="kobo.93.1"> of the interface, the API options were under the </span><strong class="bold"><span class="koboSpan" id="kobo.94.1">Integrations</span></strong><span class="koboSpan" id="kobo.95.1"> tab, but they have now moved to Arduino Cloud, which is available </span><span class="No-Break"><span class="koboSpan" id="kobo.96.1">at </span></span><a href="https://cloud.arduino.cc/home/"><span class="No-Break"><span class="koboSpan" id="kobo.97.1">https://cloud.arduino.cc/home/</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.98.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.99.1">After visiting the </span><strong class="bold"><span class="koboSpan" id="kobo.100.1">Integration</span></strong><span class="koboSpan" id="kobo.101.1"> page, click on </span><strong class="bold"><span class="koboSpan" id="kobo.102.1">API Keys</span></strong><span class="koboSpan" id="kobo.103.1">, and then you will be taken to the API page. </span><span class="koboSpan" id="kobo.103.2">Click on </span><strong class="bold"><span class="koboSpan" id="kobo.104.1">CREATE API KEY</span></strong><span class="koboSpan" id="kobo.105.1">. </span><span class="koboSpan" id="kobo.105.2">A popup will appear; provide a name for the API, and click on the </span><strong class="bold"><span class="koboSpan" id="kobo.106.1">CONTINUE</span></strong><span class="koboSpan" id="kobo.107.1"> button. </span><span class="koboSpan" id="kobo.107.2">The wizard that appears will take a few seconds to generate the keys, and then a new popup will appear displaying the keys, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.108.1">Figure 13</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.109.1">.1</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.110.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer200">
<span class="koboSpan" id="kobo.111.1"><img alt="Figure 13.1 – The API keys" src="image/B19752_13_01.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.112.1">Figure 13.1 – The API keys</span></p>
<p><span class="koboSpan" id="kobo.113.1">Copy the </span><strong class="bold"><span class="koboSpan" id="kobo.114.1">Client ID</span></strong><span class="koboSpan" id="kobo.115.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.116.1">Client Secret</span></strong><span class="koboSpan" id="kobo.117.1"> values by clicking</span><a id="_idIndexMarker1013"/><span class="koboSpan" id="kobo.118.1"> on the copy icons – never try to copy by manual</span><a id="_idIndexMarker1014"/><span class="koboSpan" id="kobo.119.1"> selection, as the client secret is very long, so clicking on the copy</span><a id="_idIndexMarker1015"/><span class="koboSpan" id="kobo.120.1"> icon is the best option. </span><span class="koboSpan" id="kobo.120.2">Save both the </span><strong class="bold"><span class="koboSpan" id="kobo.121.1">Client ID</span></strong><span class="koboSpan" id="kobo.122.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.123.1">Client Secret</span></strong><span class="koboSpan" id="kobo.124.1"> values in a secure location, and then click the checkbox, confirming that you have saved your keys. </span><span class="koboSpan" id="kobo.124.2">Lastly, click on </span><strong class="bold"><span class="koboSpan" id="kobo.125.1">DONE</span></strong><span class="koboSpan" id="kobo.126.1">, and you will see your API key in the panel – it’s now ready </span><span class="No-Break"><span class="koboSpan" id="kobo.127.1">for use.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.128.1">Important note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.129.1">A single API key is used to give access to all the Things and their variables. </span><span class="koboSpan" id="kobo.129.2">Having access to all the infrastructure with just one API key is handy, instead of having to create separate API keys for each Thing, but you must take care of your key! </span><span class="koboSpan" id="kobo.129.3">This is a big security risk as, if you were to lose the key, a hacker could gain access to your </span><span class="No-Break"><span class="koboSpan" id="kobo.130.1">whole account.</span></span></p>
<p><span class="koboSpan" id="kobo.131.1">In this section, we created</span><a id="_idIndexMarker1016"/><span class="koboSpan" id="kobo.132.1"> API authentication keys, which consist of a client ID and a client secret. </span><span class="koboSpan" id="kobo.132.2">This section is most important, as without these keys, we can’t execute any command</span><a id="_idIndexMarker1017"/><span class="koboSpan" id="kobo.133.1"> via the Arduino Cloud CLI. </span><span class="koboSpan" id="kobo.133.2">In the following section, we will install the Arduino </span><span class="No-Break"><span class="koboSpan" id="kobo.134.1">Cloud CLI.</span></span></p>
<h1 id="_idParaDest-273"><a id="_idTextAnchor273"/><span class="koboSpan" id="kobo.135.1">Installing the Arduino Cloud CLI</span></h1>
<p><span class="koboSpan" id="kobo.136.1">In this section, we will install</span><a id="_idIndexMarker1018"/><span class="koboSpan" id="kobo.137.1"> the Arduino Cloud CLI tool. </span><span class="koboSpan" id="kobo.137.2">The Arduino team developed the CLI tool for all three major operating systems: macOS, Windows, and Linux. </span><span class="koboSpan" id="kobo.137.3">You can download the Arduino Cloud CLI tool for your operating system from </span><a href="https://github.com/arduino/arduino-cloud-cli/releases"><span class="koboSpan" id="kobo.138.1">https://github.com/arduino/arduino-cloud-cli/releases</span></a><span class="koboSpan" id="kobo.139.1">. </span><span class="koboSpan" id="kobo.139.2">The official Arduino Cloud CLI page can be found at </span><a href="https://docs.arduino.cc/arduino-cloud/getting-started/arduino-cloud-cli"><span class="koboSpan" id="kobo.140.1">https://docs.arduino.cc/arduino-cloud/getting-started/arduino-cloud-cli</span></a><span class="koboSpan" id="kobo.141.1">; here, you can get updated information regarding commands and </span><span class="No-Break"><span class="koboSpan" id="kobo.142.1">their usage.</span></span></p>
<p><span class="koboSpan" id="kobo.143.1">Always try to download the latest and most stable release of the Arduino Cloud CLI. </span><span class="koboSpan" id="kobo.143.2">After downloading the ZIP file according to your operating system, extract the files from it. </span><span class="koboSpan" id="kobo.143.3">You will find one executable file named </span><strong class="source-inline"><span class="koboSpan" id="kobo.144.1">arduino-cloud-cli</span></strong><span class="koboSpan" id="kobo.145.1"> and another called </span><strong class="source-inline"><span class="koboSpan" id="kobo.146.1">LICENSE.txt</span></strong><span class="koboSpan" id="kobo.147.1">, and can set up Environmental variables for an </span><strong class="source-inline"><span class="koboSpan" id="kobo.148.1">arduino-cloud-cli</span></strong><span class="koboSpan" id="kobo.149.1"> executable file in your operating system, which will help you to execute </span><strong class="source-inline"><span class="koboSpan" id="kobo.150.1">arduino-cloud-cli</span></strong><span class="koboSpan" id="kobo.151.1"> in the terminal without specifying the location of the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.152.1">arduino-cloud-cli</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.153.1"> folder.</span></span></p>
<p><span class="koboSpan" id="kobo.154.1">Just open up the terminal and enter the </span><span class="No-Break"><span class="koboSpan" id="kobo.155.1">following command:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.156.1">
arduino-cloud-cli</span></pre> <p><span class="koboSpan" id="kobo.157.1">Then, you will see the following output on your terminal (</span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.158.1">Figure 13</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.159.1">.2</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.160.1">).</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer201">
<span class="koboSpan" id="kobo.161.1"><img alt="Figure 13.2 – The Arduino Cloud CLI terminal" src="image/B19752_13_02.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.162.1">Figure 13.2 – The Arduino Cloud CLI terminal</span></p>
<p><span class="koboSpan" id="kobo.163.1">This simply shows you how to use the Arduino Cloud CLI</span><a id="_idIndexMarker1019"/><span class="koboSpan" id="kobo.164.1"> with different parameters, as we didn’t specify any parameters during the </span><span class="No-Break"><span class="koboSpan" id="kobo.165.1">command execution.</span></span></p>
<p><span class="koboSpan" id="kobo.166.1">Now, it’s time to initiate the Arduino Cloud CLI authentication with Arduino Cloud, using the API keys that we generated in the previous section. </span><span class="koboSpan" id="kobo.166.2">Type the following command into </span><span class="No-Break"><span class="koboSpan" id="kobo.167.1">the terminal:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.168.1">
arduino-cloud-cli credentials init</span></pre> <p><span class="koboSpan" id="kobo.169.1">After executing the preceding command, you will be asked for your client ID and client secret, respectively. </span><span class="koboSpan" id="kobo.169.2">Finally, you will be asked for your organization ID, which is not mandatory, and you can leave this empty, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.170.1">Figure 13</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.171.1">.3</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.172.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer202">
<span class="koboSpan" id="kobo.173.1"><img alt="Figure 13.3 – The Arduino Cloud CLI authentication process with Arduino Cloud" src="image/B19752_13_03.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.174.1">Figure 13.3 – The Arduino Cloud CLI authentication process with Arduino Cloud</span></p>
<p><span class="koboSpan" id="kobo.175.1">After successful authentication, you will see a success message on the terminal, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.176.1">Figure 13</span></em></span><em class="italic"><span class="koboSpan" id="kobo.177.1">.3</span></em><span class="koboSpan" id="kobo.178.1">. </span><span class="koboSpan" id="kobo.178.2">Congratulations! </span><span class="koboSpan" id="kobo.178.3">You are now ready to execute the commands on the terminal and able to perform operations on the Arduino IoT Cloud </span><span class="No-Break"><span class="koboSpan" id="kobo.179.1">via commands.</span></span></p>
<p><span class="koboSpan" id="kobo.180.1">In this section, we downloaded the </span><strong class="source-inline"><span class="koboSpan" id="kobo.181.1">arduino-cloud-cli</span></strong><span class="koboSpan" id="kobo.182.1"> file and installed it on our operating system, and we also initialized the authentication</span><a id="_idIndexMarker1020"/><span class="koboSpan" id="kobo.183.1"> process for the </span><strong class="source-inline"><span class="koboSpan" id="kobo.184.1">arduino-cloud-cli</span></strong><span class="koboSpan" id="kobo.185.1"> tool with the Arduino IoT Cloud. </span><span class="koboSpan" id="kobo.185.2">In the next section, we will start playing with devices using the </span><span class="No-Break"><span class="koboSpan" id="kobo.186.1">command line.</span></span></p>
<h1 id="_idParaDest-274"><a id="_idTextAnchor274"/><span class="koboSpan" id="kobo.187.1">Interacting with devices</span></h1>
<p><span class="koboSpan" id="kobo.188.1">In this section, we will get hands-on</span><a id="_idIndexMarker1021"/><span class="koboSpan" id="kobo.189.1"> and practical with devices. </span><span class="koboSpan" id="kobo.189.2">We will perform create, list, delete, tag, and untag operations on a device, as well as list all the devices and show all the parameters of specific devices. </span><span class="koboSpan" id="kobo.189.3">Open up the command terminal, and then we’ll execute the commands in the </span><span class="No-Break"><span class="koboSpan" id="kobo.190.1">following sections.</span></span></p>
<h2 id="_idParaDest-275"><a id="_idTextAnchor275"/><span class="koboSpan" id="kobo.191.1">Creating a device</span></h2>
<p><span class="koboSpan" id="kobo.192.1">Firstly, we will start</span><a id="_idIndexMarker1022"/><span class="koboSpan" id="kobo.193.1"> by creating a device. </span><span class="koboSpan" id="kobo.193.2">The documentation on device creation can be found at </span><a href="https://docs.arduino.cc/arduino-cloud/getting-started/arduino-cloud-cli#device"><span class="koboSpan" id="kobo.194.1">https://docs.arduino.cc/arduino-cloud/getting-started/arduino-cloud-cli#device</span></a><span class="koboSpan" id="kobo.195.1">. </span><span class="koboSpan" id="kobo.195.2">Before you execute the command, connect your development board to your computer and find out the port number and FQBN for your device from the documentation page. </span><span class="koboSpan" id="kobo.195.3">The following is the syntax of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.196.1">device </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.197.1">create</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.198.1"> command:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.199.1">
arduino-cloud-cli device create --name &lt;deviceName&gt; --port &lt;port&gt; --fqbn &lt;deviceFqbn&gt;</span></pre> <p><span class="koboSpan" id="kobo.200.1">I attached the MKR Wi-Fi 1010 to my computer, which is available on port </span><strong class="source-inline"><span class="koboSpan" id="kobo.201.1">/dev/cu.usbmodem101</span></strong><span class="koboSpan" id="kobo.202.1">, and its FQBN is </span><strong class="source-inline"><span class="koboSpan" id="kobo.203.1">arduino:samd:mkrwifi1010</span></strong><span class="koboSpan" id="kobo.204.1">. </span><span class="koboSpan" id="kobo.204.2">Therefore, the following will be </span><span class="No-Break"><span class="koboSpan" id="kobo.205.1">my command:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.206.1">
arduino-cloud-cli device create -n ArduinoDevBoardByCLI  -p /dev/cu.usbmodem101 -b arduino:samd:mkrwifi1010</span></pre> <p><span class="koboSpan" id="kobo.207.1">After executing the preceding command, you will get the following output, which shows the device has been successfully created (</span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.208.1">Figure 13</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.209.1">.4</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.210.1">).</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer203">
<span class="koboSpan" id="kobo.211.1"><img alt="Figure 13.4 – Device creation using arduino-cloud-cli" src="image/B19752_13_04.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.212.1">Figure 13.4 – Device creation using arduino-cloud-cli</span></p>
<p><span class="koboSpan" id="kobo.213.1">After creating the device, the terminal will show the device name, ID, board, serial number, and FQBN. </span><span class="koboSpan" id="kobo.213.2">Just imagine how easy it would be to attach dozens of development boards to the Arduino IoT Cloud using </span><a id="_idIndexMarker1023"/><span class="koboSpan" id="kobo.214.1">the command line, compared to a graphical user interface. </span><span class="koboSpan" id="kobo.214.2">The Arduino Cloud CLI is also able to create </span><strong class="bold"><span class="koboSpan" id="kobo.215.1">LoRaWAN</span></strong><span class="koboSpan" id="kobo.216.1"> devices as well as ESP32/ESP8266 devices via </span><span class="No-Break"><span class="koboSpan" id="kobo.217.1">the CLI.</span></span></p>
<p><span class="koboSpan" id="kobo.218.1">In this subsection, we created a device in the Arduino IoT Cloud using the command line. </span><span class="koboSpan" id="kobo.218.2">In the following subsection, we will explore how to list </span><span class="No-Break"><span class="koboSpan" id="kobo.219.1">the device.</span></span></p>
<h2 id="_idParaDest-276"><a id="_idTextAnchor276"/><span class="koboSpan" id="kobo.220.1">Listing devices</span></h2>
<p><span class="koboSpan" id="kobo.221.1">In this section, we will</span><a id="_idIndexMarker1024"/><span class="koboSpan" id="kobo.222.1"> list all the devices. </span><em class="italic"><span class="koboSpan" id="kobo.223.1">Listing</span></em><span class="koboSpan" id="kobo.224.1"> devices means displaying all the devices with their properties. </span><span class="koboSpan" id="kobo.224.2">The documentation on listing devices is available at </span><a href="https://docs.arduino.cc/arduino-cloud/getting-started/arduino-cloud-cli#list-devices"><span class="koboSpan" id="kobo.225.1">https://docs.arduino.cc/arduino-cloud/getting-started/arduino-cloud-cli#list-devices</span></a><span class="koboSpan" id="kobo.226.1">. </span><span class="koboSpan" id="kobo.226.2">The following is a very simple command to list all </span><span class="No-Break"><span class="koboSpan" id="kobo.227.1">the devices:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.228.1">
arduino-cloud-cli device list</span></pre> <p><span class="koboSpan" id="kobo.229.1">After executing the preceding command, we will see a complete list of devices, as shown in the </span><span class="No-Break"><span class="koboSpan" id="kobo.230.1">following figure.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer204">
<span class="koboSpan" id="kobo.231.1"><img alt="Figure 13.5 – The device list command" src="image/B19752_13_05.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.232.1">Figure 13.5 – The device list command</span></p>
<p><span class="koboSpan" id="kobo.233.1">In the output, we can see the device name, ID, board, FQBN, serial number, and tags. </span><span class="koboSpan" id="kobo.233.2">Here, the ID is very important, as it will be used in the following commands for device deletion, as well as for tag creation and deletion. </span><span class="koboSpan" id="kobo.233.3">In this subsection, we have seen how to list the devices, and in the next subsection, we will explore how to delete a device using </span><span class="No-Break"><span class="koboSpan" id="kobo.234.1">its ID.</span></span></p>
<h2 id="_idParaDest-277"><a id="_idTextAnchor277"/><span class="koboSpan" id="kobo.235.1">Deleting a device</span></h2>
<p><span class="koboSpan" id="kobo.236.1">In this section, we will explore</span><a id="_idIndexMarker1025"/><span class="koboSpan" id="kobo.237.1"> how we can delete a device using the device ID. </span><span class="koboSpan" id="kobo.237.2">The documentation for deleting devices is available at </span><a href="https://docs.arduino.cc/arduino-cloud/getting-started/arduino-cloud-cli#delete-a-device"><span class="koboSpan" id="kobo.238.1">https://docs.arduino.cc/arduino-cloud/getting-started/arduino-cloud-cli#delete-a-device</span></a><span class="koboSpan" id="kobo.239.1">. </span><span class="koboSpan" id="kobo.239.2">The following is the command syntax for </span><span class="No-Break"><span class="koboSpan" id="kobo.240.1">device deletion:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.241.1">
arduino-cloud-cli device delete --id &lt;deviceID&gt;</span></pre> <p><span class="koboSpan" id="kobo.242.1">According to the preceding command syntax, we need a device ID for deletion. </span><span class="koboSpan" id="kobo.242.2">You can retrieve the device ID by using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.243.1">device </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.244.1">list</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.245.1"> command:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.246.1">
arduino-cloud-cli device delete -i ca711f68-6de9-497a-ac45-780219ad2bb8</span></pre> <p><span class="koboSpan" id="kobo.247.1">After successfully deleting the device, you will not see any error message; otherwise, you will see a </span><strong class="source-inline"><span class="koboSpan" id="kobo.248.1">401 error</span></strong><span class="koboSpan" id="kobo.249.1"> on </span><span class="No-Break"><span class="koboSpan" id="kobo.250.1">the screen.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer205">
<span class="koboSpan" id="kobo.251.1"><img alt="Figure 13.6 – The device delete command" src="image/B19752_13_06.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.252.1">Figure 13.6 – The device delete command</span></p>
<p><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.253.1">Figure 13</span></em></span><em class="italic"><span class="koboSpan" id="kobo.254.1">.6</span></em><span class="koboSpan" id="kobo.255.1"> shows the completed command for device deletion, and there is no error on the screen, which means the device has been deleted </span><a id="_idIndexMarker1026"/><span class="koboSpan" id="kobo.256.1">successfully. </span><span class="koboSpan" id="kobo.256.2">In this subsection, we discussed the </span><strong class="source-inline"><span class="koboSpan" id="kobo.257.1">delete</span></strong><span class="koboSpan" id="kobo.258.1"> command. </span><span class="koboSpan" id="kobo.258.2">In the upcoming subsection, we will tag and untag </span><span class="No-Break"><span class="koboSpan" id="kobo.259.1">a device.</span></span></p>
<h2 id="_idParaDest-278"><a id="_idTextAnchor278"/><span class="koboSpan" id="kobo.260.1">Tagging and untagging a device</span></h2>
<p><span class="koboSpan" id="kobo.261.1">In this section, we will explore</span><a id="_idIndexMarker1027"/><span class="koboSpan" id="kobo.262.1"> how we can tag and untag a device</span><a id="_idIndexMarker1028"/><span class="koboSpan" id="kobo.263.1"> using the device ID. </span><span class="koboSpan" id="kobo.263.2">The documentation for tagging a device is available at </span><a href="https://docs.arduino.cc/arduino-cloud/getting-started/arduino-cloud-cli#tag-device"><span class="koboSpan" id="kobo.264.1">https://docs.arduino.cc/arduino-cloud/getting-started/arduino-cloud-cli#tag-device</span></a><span class="koboSpan" id="kobo.265.1">, and the documentation for untagging a device is available at </span><a href="https://docs.arduino.cc/arduino-cloud/getting-started/arduino-cloud-cli#untag-device"><span class="koboSpan" id="kobo.266.1">https://docs.arduino.cc/arduino-cloud/getting-started/arduino-cloud-cli#untag-device</span></a><span class="koboSpan" id="kobo.267.1">. </span><span class="koboSpan" id="kobo.267.2">The following is the command syntax to tag </span><span class="No-Break"><span class="koboSpan" id="kobo.268.1">a device:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.269.1">
arduino-cloud-cli device create-tags --id &lt;deviceID&gt; --tags &lt;key0&gt;=&lt;value0&gt;,&lt;key1&gt;=&lt;value1&gt;</span></pre> <p><span class="koboSpan" id="kobo.270.1">The following is the command syntax to untag </span><span class="No-Break"><span class="koboSpan" id="kobo.271.1">a device:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.272.1">
arduino-cloud-cli device delete-tags --id &lt;deviceID&gt; --keys &lt;key0&gt;,&lt;key1&gt;</span></pre> <p><span class="koboSpan" id="kobo.273.1">You might ask the question, why do we need a tag for a device? </span><span class="koboSpan" id="kobo.273.2">Let’s say you have a generic product for warehouse monitoring, and you have deployed this product in different organizations and different rooms. </span><span class="koboSpan" id="kobo.273.3">Now, the issue is that it’s very difficult to assign the organization name and location in the </span><strong class="bold"><span class="koboSpan" id="kobo.274.1">Device Name</span></strong><span class="koboSpan" id="kobo.275.1"> field. </span><span class="koboSpan" id="kobo.275.2">So, an optimal solution is tagging. </span><span class="koboSpan" id="kobo.275.3">You can use tags as many times as you want. </span><span class="koboSpan" id="kobo.275.4">A tag has two options – one is a key and the other is </span><span class="No-Break"><span class="koboSpan" id="kobo.276.1">a value.</span></span></p>
<p><span class="koboSpan" id="kobo.277.1">In the following example, we will attach two tags – one for the organization name and another for the location. </span><span class="koboSpan" id="kobo.277.2">Pick a device ID by using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.278.1">device list</span></strong><span class="koboSpan" id="kobo.279.1"> command to attach the tags. </span><span class="koboSpan" id="kobo.279.2">The following is the command to attach tags to </span><span class="No-Break"><span class="koboSpan" id="kobo.280.1">a device:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.281.1">
arduino-cloud-cli device create-tags -i cda148e4-b011-459a-95fd-a7510c9601c2  --tags Org=ASNAGroup,Location=Warehouse1</span></pre> <p><span class="koboSpan" id="kobo.282.1">According to the following command syntax, we need a device ID to remove the tag from the device. </span><span class="koboSpan" id="kobo.282.2">You can fetch the device ID by using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.283.1">device list</span></strong><span class="koboSpan" id="kobo.284.1"> command. </span><span class="koboSpan" id="kobo.284.2">The following command is used to remove the tag from </span><span class="No-Break"><span class="koboSpan" id="kobo.285.1">the device:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.286.1">
arduino-cloud-cli device delete-tags -i cda148e4-b011-459a-95fd-a7510c9601c2 -k Location</span></pre> <p><span class="koboSpan" id="kobo.287.1">Here, the command is a little different, as we have used </span><strong class="source-inline"><span class="koboSpan" id="kobo.288.1">delete-tags</span></strong><span class="koboSpan" id="kobo.289.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.290.1">-k</span></strong><span class="koboSpan" id="kobo.291.1"> to specify the tag key. </span><span class="koboSpan" id="kobo.291.2">If you want to remove multiple tags, then use a comma to separate </span><span class="No-Break"><span class="koboSpan" id="kobo.292.1">the keys.</span></span></p>
<p><span class="koboSpan" id="kobo.293.1">In this and the preceding subsections, we performed</span><a id="_idIndexMarker1029"/><span class="koboSpan" id="kobo.294.1"> various operations on devices</span><a id="_idIndexMarker1030"/><span class="koboSpan" id="kobo.295.1"> using commands, including ones for device creation, listing devices, device deletion, tagging, and untagging. </span><span class="koboSpan" id="kobo.295.2">In the next section, we will explore how to practically perform operations </span><span class="No-Break"><span class="koboSpan" id="kobo.296.1">on Things.</span></span></p>
<p><span class="koboSpan" id="kobo.297.1">Engaging </span><span class="No-Break"><span class="koboSpan" id="kobo.298.1">with Things</span></span></p>
<p><span class="koboSpan" id="kobo.299.1">A Thing is one of the most important</span><a id="_idIndexMarker1031"/><span class="koboSpan" id="kobo.300.1"> elements in the Arduino IoT Cloud, which acts as a separate container holding all of its ingredients, such as cloud variables, the device, a sketch for the device, and the device’s network configuration. </span><span class="koboSpan" id="kobo.300.2">In this section, we will try a range of different operations via commands, such as extracting a template from a Thing, creating a Thing from a template, making a clone of a Thing, and deleting </span><span class="No-Break"><span class="koboSpan" id="kobo.301.1">a Thing.</span></span></p>
<h2 id="_idParaDest-279"><a id="_idTextAnchor279"/><span class="koboSpan" id="kobo.302.1">Extracting a template from a Thing</span></h2>
<p><span class="koboSpan" id="kobo.303.1">In the Arduino Cloud CLI, we deal</span><a id="_idIndexMarker1032"/><span class="koboSpan" id="kobo.304.1"> with commands and </span><a id="_idIndexMarker1033"/><span class="koboSpan" id="kobo.305.1">provide different parameters to perform different types of operations. </span><span class="koboSpan" id="kobo.305.2">Therefore, it is difficult to create a new Thing via the command line, as it will make it more complex to pass different parameters, such as cloud variables and </span><span class="No-Break"><span class="koboSpan" id="kobo.306.1">network configurations.</span></span></p>
<p><span class="koboSpan" id="kobo.307.1">To solve this issue, the Arduino team introduced the concept of template extraction from a Thing. </span><span class="koboSpan" id="kobo.307.2">For example, say you want to deploy hundreds of environmental monitoring nodes. </span><span class="koboSpan" id="kobo.307.3">It’s difficult to create hundreds of Things via the Arduino graphical user interface and to create a long command for Thing creation that includes all the information regarding the Thing. </span><span class="koboSpan" id="kobo.307.4">Therefore, Arduino introduced the template extraction technique. </span><span class="koboSpan" id="kobo.307.5">Firstly, we will create a Thing via the Arduino graphical user interface, and then we will extract its template via the command line. </span><span class="koboSpan" id="kobo.307.6">Then, using the template, we will create the Thing in the Arduino IoT Cloud via the command line, as the Arduino Cloud CLI does not allow you to create a Thing from scratch. </span><span class="koboSpan" id="kobo.307.7">You can find out more about Thing template extraction in the official documentation </span><span class="No-Break"><span class="koboSpan" id="kobo.308.1">at </span></span><a href="https://docs.arduino.cc/arduino-cloud/getting-started/arduino-cloud-cli#extract-thing-template"><span class="No-Break"><span class="koboSpan" id="kobo.309.1">https://docs.arduino.cc/arduino-cloud/getting-started/arduino-cloud-cli#extract-thing-template</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.310.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.311.1">The following is the command</span><a id="_idIndexMarker1034"/><span class="koboSpan" id="kobo.312.1"> syntax for template </span><a id="_idIndexMarker1035"/><span class="koboSpan" id="kobo.313.1">extraction. </span><span class="koboSpan" id="kobo.313.2">With this command, we need to provide a Thing ID, with which the command will fetch the template of the Thing. </span><span class="koboSpan" id="kobo.313.3">Then, we need to provide the format for the template file – either JSON </span><span class="No-Break"><span class="koboSpan" id="kobo.314.1">or YAML:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.315.1">
arduino-cloud-cli thing extract --id &lt;thingID&gt; --format &lt;json|yaml&gt;</span></pre> <p><span class="koboSpan" id="kobo.316.1">For the Thing ID, either visit the Arduino IoT Cloud to find it or refer to the upcoming subsections, in which we will show you how to list Things, which provides the Thing name, ID, and so on, so you can also retrieve the Thing ID from the output. </span><span class="koboSpan" id="kobo.316.2">Now, we will assign the format; we want the template output in JSON format, so I used </span><span class="No-Break"><span class="koboSpan" id="kobo.317.1">JSON here:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.318.1">
arduino-cloud-cli thing  extract -i 91c90962-56b6-4094-abe0-1b5ad4828721 --format json</span></pre> <p><span class="koboSpan" id="kobo.319.1">After executing the command, we will get the template output on the screen in JSON format, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.320.1">Figure 13</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.321.1">.7</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.322.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer206">
<span class="koboSpan" id="kobo.323.1"><img alt="Figure 13.7 – Extracting the Thing template" src="image/B19752_13_07.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.324.1">Figure 13.7 – Extracting the Thing template</span></p>
<p><span class="koboSpan" id="kobo.325.1">Our Thing template shows </span><a id="_idIndexMarker1036"/><span class="koboSpan" id="kobo.326.1">all the information regarding</span><a id="_idIndexMarker1037"/><span class="koboSpan" id="kobo.327.1"> cloud variables. </span><span class="koboSpan" id="kobo.327.2">Copy the text and save it in a file, which will be used in the following section for </span><span class="No-Break"><span class="koboSpan" id="kobo.328.1">Thing creation.</span></span></p>
<h2 id="_idParaDest-280"><a id="_idTextAnchor280"/><span class="koboSpan" id="kobo.329.1">Creating a Thing</span></h2>
<p><span class="koboSpan" id="kobo.330.1">After extracting the Thing</span><a id="_idIndexMarker1038"/><span class="koboSpan" id="kobo.331.1"> template, we will now start to create the Thing. </span><span class="koboSpan" id="kobo.331.2">The documentation on Thing creation can be found at </span><a href="https://docs.arduino.cc/arduino-cloud/getting-started/arduino-cloud-cli#create-things"><span class="koboSpan" id="kobo.332.1">https://docs.arduino.cc/arduino-cloud/getting-started/arduino-cloud-cli#create-things</span></a><span class="koboSpan" id="kobo.333.1">. </span><span class="koboSpan" id="kobo.333.2">The following is the syntax of the Thing creation command, which takes two parameters. </span><span class="koboSpan" id="kobo.333.3">Firstly, it will take the name, and secondly, it will take the template filename for the Thing creation, which contains the Thing template in JSON format that we saved in the </span><span class="No-Break"><span class="koboSpan" id="kobo.334.1">previous section:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.335.1">
arduino-cloud-cli thing create --name &lt;thingName&gt; --template &lt;template.(json|yaml)&gt;</span></pre> <p><span class="koboSpan" id="kobo.336.1">Here, I have provided a Thing name, </span><strong class="source-inline"><span class="koboSpan" id="kobo.337.1">EnvSense101</span></strong><span class="koboSpan" id="kobo.338.1">, and in the previous section, I saved the JSON template in the file named </span><strong class="source-inline"><span class="koboSpan" id="kobo.339.1">EnvSenseTemplate.json</span></strong><span class="koboSpan" id="kobo.340.1">. </span><span class="koboSpan" id="kobo.340.2">Then, we provide the name with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.341.1">-n</span></strong><span class="koboSpan" id="kobo.342.1"> parameter and the template file with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.343.1">-</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.344.1">t</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.345.1"> parameter:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.346.1">
arduino-cloud-cli thing create -n EnvSense101 -t EnvSenseTemplate.json</span></pre> <p><span class="koboSpan" id="kobo.347.1">After executing the preceding command, you will get the following output for successful Thing creation (</span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.348.1">Figure 13</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.349.1">.8</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.350.1">).</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer207">
<span class="koboSpan" id="kobo.351.1"><img alt="Figure 13.8 – Thing creation using arduino-cloud-cli" src="image/B19752_13_08.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.352.1">Figure 13.8 – Thing creation using arduino-cloud-cli</span></p>
<p><span class="koboSpan" id="kobo.353.1">After creating the Thing, the terminal will show the Thing name, ID, device ID (which is empty right now, but in the upcoming sections, we will associate the device with this Thing), and </span><span class="No-Break"><span class="koboSpan" id="kobo.354.1">variable name.</span></span></p>
<p><span class="koboSpan" id="kobo.355.1">In this subsection, we created</span><a id="_idIndexMarker1039"/><span class="koboSpan" id="kobo.356.1"> a Thing in the Arduino IoT Cloud using the command line. </span><span class="koboSpan" id="kobo.356.2">In the following section, we will explore how to clone the Thing for </span><span class="No-Break"><span class="koboSpan" id="kobo.357.1">bulk creations.</span></span></p>
<h2 id="_idParaDest-281"><a id="_idTextAnchor281"/><span class="koboSpan" id="kobo.358.1">Cloning a Thing</span></h2>
<p><span class="koboSpan" id="kobo.359.1">After creating a Thing </span><a id="_idIndexMarker1040"/><span class="koboSpan" id="kobo.360.1">from a template, we will now explore how we can use the clone operation for large-scale deployments. </span><span class="koboSpan" id="kobo.360.2">The documentation on the Thing clone can be found at </span><a href="https://docs.arduino.cc/arduino-cloud/getting-started/arduino-cloud-cli#clone-things"><span class="koboSpan" id="kobo.361.1">https://docs.arduino.cc/arduino-cloud/getting-started/arduino-cloud-cli#clone-things</span></a><span class="koboSpan" id="kobo.362.1">. </span><span class="koboSpan" id="kobo.362.2">The following is the syntax of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.363.1">thing clone</span></strong><span class="koboSpan" id="kobo.364.1"> command, which will take two parameters. </span><span class="koboSpan" id="kobo.364.2">Firstly, it will take a name, and secondly, it will take a </span><span class="No-Break"><span class="koboSpan" id="kobo.365.1">Thing ID:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.366.1">
arduino-cloud-cli thing clone --name &lt;thingName&gt; --clone-id &lt;thingToCloneID&gt;</span></pre> <p><span class="koboSpan" id="kobo.367.1">Here, I have provided a Thing name, </span><strong class="source-inline"><span class="koboSpan" id="kobo.368.1">EnvSense102</span></strong><span class="koboSpan" id="kobo.369.1">, and in the previous section, we created the Thing, so I can get its ID from the terminal, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.370.1">Figure 13</span></em></span><em class="italic"><span class="koboSpan" id="kobo.371.1">.8</span></em><span class="koboSpan" id="kobo.372.1"> (use your own Thing ID in the command line). </span><span class="koboSpan" id="kobo.372.2">Then, provide the name with an </span><strong class="source-inline"><span class="koboSpan" id="kobo.373.1">-n</span></strong><span class="koboSpan" id="kobo.374.1"> parameter and the Thing ID with a </span><strong class="source-inline"><span class="koboSpan" id="kobo.375.1">-</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.376.1">c</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.377.1"> parameter:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.378.1">
arduino-cloud-cli thing clone -n EnvSense102 -c 131f2498-2067-468c-bd68-2f52a0233de5</span></pre> <p><span class="koboSpan" id="kobo.379.1">After executing the preceding command, you will get the following output for a successful Thing clone (</span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.380.1">Figure 13</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.381.1">.9</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.382.1">).</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer208">
<span class="koboSpan" id="kobo.383.1"><img alt="Figure 13.9 – A Thing clone using arduino-cloud-cli" src="image/B19752_13_09.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.384.1">Figure 13.9 – A Thing clone using arduino-cloud-cli</span></p>
<p><span class="koboSpan" id="kobo.385.1">This is the output of a successful Thing clone by the Arduino Cloud CLI. </span><span class="koboSpan" id="kobo.385.2">After cloning the Thing, the terminal will show the Thing name, ID, device ID (which is empty right now, but in the upcoming section, we will associate the device with this Thing), and variable name. </span><span class="koboSpan" id="kobo.385.3">You can see how easy it is to create hundreds of Things with just the </span><strong class="source-inline"><span class="koboSpan" id="kobo.386.1">clone</span></strong><span class="koboSpan" id="kobo.387.1"> command. </span><span class="koboSpan" id="kobo.387.2">Here, you can just create a batch script, which will only change the name of the Thing by using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.388.1">for</span></strong><span class="koboSpan" id="kobo.389.1"> loop and create hundreds of Things in just a </span><span class="No-Break"><span class="koboSpan" id="kobo.390.1">few minutes.</span></span></p>
<p><span class="koboSpan" id="kobo.391.1">In this subsection, we learned</span><a id="_idIndexMarker1041"/><span class="koboSpan" id="kobo.392.1"> how to clone a Thing in the Arduino IoT Cloud using the command line. </span><span class="koboSpan" id="kobo.392.2">In the following section, we will explore how to </span><span class="No-Break"><span class="koboSpan" id="kobo.393.1">list Things.</span></span></p>
<h2 id="_idParaDest-282"><a id="_idTextAnchor282"/><span class="koboSpan" id="kobo.394.1">Listing Things</span></h2>
<p><span class="koboSpan" id="kobo.395.1">In this section, we will list</span><a id="_idIndexMarker1042"/><span class="koboSpan" id="kobo.396.1"> all the Things. </span><span class="koboSpan" id="kobo.396.2">The documentation on listing Things is available at </span><a href="https://docs.arduino.cc/arduino-cloud/getting-started/arduino-cloud-cli#list-things"><span class="koboSpan" id="kobo.397.1">https://docs.arduino.cc/arduino-cloud/getting-started/arduino-cloud-cli#list-things</span></a><span class="koboSpan" id="kobo.398.1">. </span><span class="koboSpan" id="kobo.398.2">The following is a very simple command to list all </span><span class="No-Break"><span class="koboSpan" id="kobo.399.1">the Things:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.400.1">
arduino-cloud-cli thing list</span></pre> <p><span class="koboSpan" id="kobo.401.1">After executing the preceding command, we will see a complete list of Things, as shown in the </span><span class="No-Break"><span class="koboSpan" id="kobo.402.1">following figure.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer209">
<span class="koboSpan" id="kobo.403.1"><img alt="Figure 13.10 – The thing list command" src="image/B19752_13_10.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.404.1">Figure 13.10 – The thing list command</span></p>
<p><span class="koboSpan" id="kobo.405.1">In the output, we can see the Thing name, ID, device, and tags. </span><span class="koboSpan" id="kobo.405.2">Again, the ID is very important, as it will be used in the following commands for Thing deletion, as well as for tag creation and deletion. </span><span class="koboSpan" id="kobo.405.3">In the preceding sections, we also used the ID for Thing template extraction and creation, as well as </span><span class="No-Break"><span class="koboSpan" id="kobo.406.1">Thing cloning.</span></span></p>
<p><span class="koboSpan" id="kobo.407.1">The Arduino Cloud CLI also provides different</span><a id="_idIndexMarker1043"/><span class="koboSpan" id="kobo.408.1"> parameters to get more detailed output on the terminal, such as a variable list along with a list of Things. </span><span class="koboSpan" id="kobo.408.2">We can attach the </span><strong class="source-inline"><span class="koboSpan" id="kobo.409.1">-s</span></strong><span class="koboSpan" id="kobo.410.1"> parameter to the Thing, and we can also list a Thing by providing a device ID as well as list a series of Things by providing a Thing ID. </span><span class="koboSpan" id="kobo.410.2">Here, I want to explore how we can get a variable list along with Things. </span><span class="koboSpan" id="kobo.410.3">The following is a simple command to list </span><span class="No-Break"><span class="koboSpan" id="kobo.411.1">cloud variables:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.412.1">
arduino-cloud-cli thing list -s</span></pre> <p><span class="koboSpan" id="kobo.413.1">After executing the preceding command, you will see the output shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.414.1">Figure 13</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.415.1">.11</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.416.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer210">
<span class="koboSpan" id="kobo.417.1"><img alt="Figure 13.11 – The thing list command with variables" src="image/B19752_13_11.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.418.1">Figure 13.11 – The thing list command with variables</span></p>
<p><span class="koboSpan" id="kobo.419.1">Here, you can see all the cloud variables</span><a id="_idIndexMarker1044"/><span class="koboSpan" id="kobo.420.1"> along with the Thing names, but it looks a little bit complicated. </span><span class="koboSpan" id="kobo.420.2">Now, we will try to list a single Thing with cloud variables. </span><span class="koboSpan" id="kobo.420.3">The following is the command syntax to list a Thing with cloud variables. </span><span class="koboSpan" id="kobo.420.4">It will take two parameters as input – one Thing ID and an </span><strong class="source-inline"><span class="koboSpan" id="kobo.421.1">-</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.422.1">s</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.423.1"> parameter:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.424.1">
arduino-cloud-cli thing list -i eee6e2ff-7e88-4240-9671-1b79736618ea -s</span></pre> <p><span class="koboSpan" id="kobo.425.1">Execute the preceding command, and you will see the complete and readable output shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.426.1">Figure 13</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.427.1">.12</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.428.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer211">
<span class="koboSpan" id="kobo.429.1"><img alt="Figure 13.12 – Displaying a single Thing with cloud variables" src="image/B19752_13_12.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.430.1">Figure 13.12 – Displaying a single Thing with cloud variables</span></p>
<p><span class="koboSpan" id="kobo.431.1">Now, it’s time to explore how we can find a Thing by using a device ID. </span><span class="koboSpan" id="kobo.431.2">The following is a simple command to retrieve a Thing based on a </span><span class="No-Break"><span class="koboSpan" id="kobo.432.1">device ID:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.433.1">
arduino-cloud-cli thing list -d ef63111f-72bb-4826-84bb-02093d4d85f1 -s</span></pre> <p><span class="koboSpan" id="kobo.434.1">After executing the preceding command, we will get specific Thing data using the device ID, as well as its cloud variables, as we used the </span><strong class="source-inline"><span class="koboSpan" id="kobo.435.1">-s</span></strong><span class="koboSpan" id="kobo.436.1"> parameter in the command (as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.437.1">Figure 13</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.438.1">.13</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.439.1">).</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer212">
<span class="koboSpan" id="kobo.440.1"><img alt="Figure 13.13 – Displaying a single Thing based on a device ID, with cloud variables" src="image/B19752_13_13.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.441.1">Figure 13.13 – Displaying a single Thing based on a device ID, with cloud variables</span></p>
<p><span class="koboSpan" id="kobo.442.1">In this subsection, we explored</span><a id="_idIndexMarker1045"/><span class="koboSpan" id="kobo.443.1"> how to list Things by using different parameters. </span><span class="koboSpan" id="kobo.443.2">In the next subsection, we will explore how to delete </span><span class="No-Break"><span class="koboSpan" id="kobo.444.1">a Thing.</span></span></p>
<h2 id="_idParaDest-283"><a id="_idTextAnchor283"/><span class="koboSpan" id="kobo.445.1">Deleting a Thing</span></h2>
<p><span class="koboSpan" id="kobo.446.1">In this section, we will explore</span><a id="_idIndexMarker1046"/><span class="koboSpan" id="kobo.447.1"> how to delete a Thing using a Thing ID. </span><span class="koboSpan" id="kobo.447.2">The documentation for deleting a Thing is available at </span><a href="https://docs.arduino.cc/arduino-cloud/getting-started/arduino-cloud-cli#delete-things"><span class="koboSpan" id="kobo.448.1">https://docs.arduino.cc/arduino-cloud/getting-started/arduino-cloud-cli#delete-things</span></a><span class="koboSpan" id="kobo.449.1">. </span><span class="koboSpan" id="kobo.449.2">The following is the command syntax for </span><span class="No-Break"><span class="koboSpan" id="kobo.450.1">Thing deletion:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.451.1">
arduino-cloud-cli device delete --id &lt;deviceID&gt;</span></pre> <p><span class="koboSpan" id="kobo.452.1">According to the command syntax, we need a Thing ID for deletion. </span><span class="koboSpan" id="kobo.452.2">You can fetch the Thing ID by using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.453.1">thing </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.454.1">list</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.455.1"> command:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.456.1">
arduino-cloud-cli thing delete -i eee6e2ff-7e88-4240-9671-1b79736618ea</span></pre> <p><span class="koboSpan" id="kobo.457.1">After the successful deletion of the device, you will not see an error message; otherwise, you will get a </span><strong class="source-inline"><span class="koboSpan" id="kobo.458.1">401 error</span></strong><span class="koboSpan" id="kobo.459.1"> message on </span><span class="No-Break"><span class="koboSpan" id="kobo.460.1">the screen.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer213">
<span class="koboSpan" id="kobo.461.1"><img alt="Figure 13.14 – The Thing delet﻿e command" src="image/B19752_13_14.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.462.1">Figure 13.14 – The Thing delete command</span></p>
<p><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.463.1">Figure 13</span></em></span><em class="italic"><span class="koboSpan" id="kobo.464.1">.14</span></em><span class="koboSpan" id="kobo.465.1"> shows the complete command for Thing deletion, and there is no error on the screen, which means the Thing has been deleted successfully. </span><span class="koboSpan" id="kobo.465.2">In this subsection, we discussed the </span><strong class="source-inline"><span class="koboSpan" id="kobo.466.1">delete</span></strong><span class="koboSpan" id="kobo.467.1"> command, and in the upcoming</span><a id="_idIndexMarker1047"/><span class="koboSpan" id="kobo.468.1"> subsection, we will explore how to associate the device with </span><span class="No-Break"><span class="koboSpan" id="kobo.469.1">a Thing.</span></span></p>
<h2 id="_idParaDest-284"><a id="_idTextAnchor284"/><span class="koboSpan" id="kobo.470.1">Associating a device with a Thing</span></h2>
<p><span class="koboSpan" id="kobo.471.1">In the previous Thing subsections, we extracted</span><a id="_idIndexMarker1048"/><span class="koboSpan" id="kobo.472.1"> the Thing template, created the Thing from that template, and also performed Thing cloning operations. </span><span class="koboSpan" id="kobo.472.2">However, throughout all the processes, we didn’t associate a device with a Thing, and without a device, a Thing is just an empty JAR that is not capable of performing </span><span class="No-Break"><span class="koboSpan" id="kobo.473.1">any operation.</span></span></p>
<p><span class="koboSpan" id="kobo.474.1">In this subsection, we will explore how to attach the device with a Thing by using a device ID and a Thing ID. </span><span class="koboSpan" id="kobo.474.2">The documentation for associating a device with a Thing is available at </span><a href="https://docs.arduino.cc/arduino-cloud/getting-started/arduino-cloud-cli#bind-thing-to-device"><span class="koboSpan" id="kobo.475.1">https://docs.arduino.cc/arduino-cloud/getting-started/arduino-cloud-cli#bind-thing-to-device</span></a><span class="koboSpan" id="kobo.476.1">. </span><span class="koboSpan" id="kobo.476.2">The following is the simple command syntax to bind a device with a Thing in the Arduino </span><span class="No-Break"><span class="koboSpan" id="kobo.477.1">IoT Cloud:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.478.1">
arduino-cloud-cli thing bind --id &lt;thingID&gt; --device-id &lt;deviceID&gt;</span></pre> <p><span class="koboSpan" id="kobo.479.1">Here, you can get a specific device ID by using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.480.1">arduino-cloud-cli device list</span></strong><span class="koboSpan" id="kobo.481.1"> command and a Thing ID with </span><strong class="source-inline"><span class="koboSpan" id="kobo.482.1">arduino-cloud-cli </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.483.1">thing list</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.484.1">:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.485.1">
arduino-cloud-cli thing bind -i 131f2498-2067-468c-bd68-2f52a0233de5 -d cda148e4-b011-459a-95fd-a7510c9601c2</span></pre> <p><span class="koboSpan" id="kobo.486.1">In the preceding command, we have assigned a Thing ID by using </span><strong class="source-inline"><span class="koboSpan" id="kobo.487.1">-i</span></strong><span class="koboSpan" id="kobo.488.1"> and a device ID with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.489.1">-d</span></strong><span class="koboSpan" id="kobo.490.1"> parameter. </span><span class="koboSpan" id="kobo.490.2">Execute the preceding command, and you will see the output shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.491.1">Figure 13</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.492.1">.15</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.493.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer214">
<span class="koboSpan" id="kobo.494.1"><img alt="Figure 13.15 – Device binding with Thing" src="image/B19752_13_15.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.495.1">Figure 13.15 – Device binding with Thing</span></p>
<p><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.496.1">Figure 13</span></em></span><em class="italic"><span class="koboSpan" id="kobo.497.1">.15</span></em><span class="koboSpan" id="kobo.498.1"> shows a device successfully binding with a Thing. </span><span class="koboSpan" id="kobo.498.2">To confirm, we used the </span><strong class="source-inline"><span class="koboSpan" id="kobo.499.1">thing list</span></strong><span class="koboSpan" id="kobo.500.1"> command with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.501.1">-i</span></strong><span class="koboSpan" id="kobo.502.1"> parameter to verify the device ID. </span><span class="koboSpan" id="kobo.502.2">In both the command as well as in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.503.1">thing list</span></strong><span class="koboSpan" id="kobo.504.1"> output, the device ID is </span><span class="No-Break"><span class="koboSpan" id="kobo.505.1">the same.</span></span></p>
<p><span class="koboSpan" id="kobo.506.1">In this subsection, we explored</span><a id="_idIndexMarker1049"/><span class="koboSpan" id="kobo.507.1"> how to bind/associate a device with a Thing. </span><span class="koboSpan" id="kobo.507.2">In the next subsection, we will discuss how to assign and remove tags from </span><span class="No-Break"><span class="koboSpan" id="kobo.508.1">a Thing.</span></span></p>
<h2 id="_idParaDest-285"><a id="_idTextAnchor285"/><span class="koboSpan" id="kobo.509.1">Tagging and untagging a Thing</span></h2>
<p><span class="koboSpan" id="kobo.510.1">In this section, we will explore</span><a id="_idIndexMarker1050"/><span class="koboSpan" id="kobo.511.1"> how we can tag and untag a Thing using</span><a id="_idIndexMarker1051"/><span class="koboSpan" id="kobo.512.1"> the Thing ID. </span><span class="koboSpan" id="kobo.512.2">The documentation for tagging a Thing is available at </span><a href="https://docs.arduino.cc/arduino-cloud/getting-started/arduino-cloud-cli#tag-a-thing"><span class="koboSpan" id="kobo.513.1">https://docs.arduino.cc/arduino-cloud/getting-started/arduino-cloud-cli#tag-a-thing</span></a><span class="koboSpan" id="kobo.514.1">, and for untagging a Thing, documentation is available at </span><a href="https://docs.arduino.cc/arduino-cloud/getting-started/arduino-cloud-cli#untag-a-thing"><span class="koboSpan" id="kobo.515.1">https://docs.arduino.cc/arduino-cloud/getting-started/arduino-cloud-cli#untag-a-thing</span></a><span class="koboSpan" id="kobo.516.1">. </span><span class="koboSpan" id="kobo.516.2">The following is the command syntax to tag </span><span class="No-Break"><span class="koboSpan" id="kobo.517.1">a Thing:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.518.1">
arduino-cloud-cli thing create-tags --id &lt;thingID&gt; --tags &lt;key0&gt;=&lt;value0&gt;,&lt;key1&gt;=&lt;value1&gt;</span></pre> <p><span class="koboSpan" id="kobo.519.1">The following is the command syntax to untag </span><span class="No-Break"><span class="koboSpan" id="kobo.520.1">a Thing:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.521.1">
arduino-cloud-cli thing delete-tags --id &lt;thingID&gt; --keys &lt;key0&gt;,&lt;key1&gt;</span></pre> <p><span class="koboSpan" id="kobo.522.1">You might question the necessity of assigning a tag to a Thing. </span><span class="koboSpan" id="kobo.522.2">Consider this scenario. </span><span class="koboSpan" id="kobo.522.3">You have a versatile product designed for monitoring warehouses, and you’ve deployed this product in various organizations and different rooms within those organizations. </span><span class="koboSpan" id="kobo.522.4">The challenge arises when attempting to incorporate the organization’s name and location directly into the </span><strong class="bold"><span class="koboSpan" id="kobo.523.1">Device Name</span></strong><span class="koboSpan" id="kobo.524.1"> field, which can be quite cumbersome. </span><span class="koboSpan" id="kobo.524.2">In this context, a more efficient solution presents itself through the use of tags. </span><span class="koboSpan" id="kobo.524.3">Tags can be applied without limitations, much like when we previously established tags for devices. </span><span class="koboSpan" id="kobo.524.4">Each tag consists of two components: a key and a </span><span class="No-Break"><span class="koboSpan" id="kobo.525.1">corresponding value.</span></span></p>
<p><span class="koboSpan" id="kobo.526.1">So, in the following example, we will attach two tags – one for the organization name and another for the location. </span><span class="koboSpan" id="kobo.526.2">Pick the Thing ID by using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.527.1">thing list</span></strong><span class="koboSpan" id="kobo.528.1"> command to attach tags. </span><span class="koboSpan" id="kobo.528.2">The following is the command to attach tags to </span><span class="No-Break"><span class="koboSpan" id="kobo.529.1">a Thing:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.530.1">
arduino-cloud-cli thing create-tags -i 131f2498-2067-468c-bd68-2f52a0233de5 --tags Org=ASNAGroup,Location=MainUnit</span></pre> <p><span class="koboSpan" id="kobo.531.1">After executing the preceding command, you can verify the tags by using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.532.1">thing list</span></strong><span class="koboSpan" id="kobo.533.1"> command, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.534.1">Figure 13</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.535.1">.16</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.536.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer215">
<span class="koboSpan" id="kobo.537.1"><img alt="Figure 13.16 – Assigning tags to a Thing" src="image/B19752_13_16.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.538.1">Figure 13.16 – Assigning tags to a Thing</span></p>
<p><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.539.1">Figure 13</span></em></span><em class="italic"><span class="koboSpan" id="kobo.540.1">.16</span></em><span class="koboSpan" id="kobo.541.1"> shows the full command that is used to assign tags to a Thing, and it also clearly shows the </span><strong class="source-inline"><span class="koboSpan" id="kobo.542.1">thing list</span></strong><span class="koboSpan" id="kobo.543.1"> command we used to verify </span><span class="No-Break"><span class="koboSpan" id="kobo.544.1">the tags.</span></span></p>
<p><span class="koboSpan" id="kobo.545.1">Now, it’s time to explore</span><a id="_idIndexMarker1052"/><span class="koboSpan" id="kobo.546.1"> how we can remove a tag from a Thing. </span><span class="koboSpan" id="kobo.546.2">Previously, we saw</span><a id="_idIndexMarker1053"/><span class="koboSpan" id="kobo.547.1"> the syntax to untag a tag from a Thing. </span><span class="koboSpan" id="kobo.547.2">The following is the complete command that will remove the location tag from a </span><span class="No-Break"><span class="koboSpan" id="kobo.548.1">specific Thing:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.549.1">
arduino-cloud-cli thing delete-tags -i 131f2498-2067-468c-bd68-2f52a0233de5 -k Location</span></pre> <p><span class="koboSpan" id="kobo.550.1">After executing the preceding command, you can verify the tags by using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.551.1">thing list</span></strong><span class="koboSpan" id="kobo.552.1"> command, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.553.1">Figure 13</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.554.1">.17</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.555.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer216">
<span class="koboSpan" id="kobo.556.1"><img alt="Figure 13.17 – Deleting a tag from a Thing" src="image/B19752_13_17.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.557.1">Figure 13.17 – Deleting a tag from a Thing</span></p>
<p><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.558.1">Figure 13</span></em></span><em class="italic"><span class="koboSpan" id="kobo.559.1">.17</span></em><span class="koboSpan" id="kobo.560.1"> shows the full command that is used to delete a tag from a Thing, and it also clearly shows the </span><strong class="source-inline"><span class="koboSpan" id="kobo.561.1">thing list</span></strong><span class="koboSpan" id="kobo.562.1"> command we used to verify </span><span class="No-Break"><span class="koboSpan" id="kobo.563.1">the tags.</span></span></p>
<p><span class="koboSpan" id="kobo.564.1">Here, the command is a little different, as we have used </span><strong class="source-inline"><span class="koboSpan" id="kobo.565.1">delete-tags</span></strong><span class="koboSpan" id="kobo.566.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.567.1">-k</span></strong><span class="koboSpan" id="kobo.568.1"> to specify the tag key. </span><span class="koboSpan" id="kobo.568.2">If you want</span><a id="_idIndexMarker1054"/><span class="koboSpan" id="kobo.569.1"> to remove multiple tags, then use a comma</span><a id="_idIndexMarker1055"/><span class="koboSpan" id="kobo.570.1"> to separate the keys. </span><span class="koboSpan" id="kobo.570.2">In the following section, we will explore how to work with dashboards using the Arduino </span><span class="No-Break"><span class="koboSpan" id="kobo.571.1">Cloud CLI.</span></span></p>
<h1 id="_idParaDest-286"><a id="_idTextAnchor286"/><span class="koboSpan" id="kobo.572.1">Crafting dashboards – unleashing potential via the command line</span></h1>
<p><span class="koboSpan" id="kobo.573.1">Dashboards are the most important</span><a id="_idIndexMarker1056"/><span class="koboSpan" id="kobo.574.1"> ingredient in the Arduino IoT Cloud pertaining to </span><strong class="bold"><span class="koboSpan" id="kobo.575.1">data visualization</span></strong><span class="koboSpan" id="kobo.576.1">. </span><span class="koboSpan" id="kobo.576.2">In the Arduino Cloud CLI, we have dashboard-specific commands</span><a id="_idIndexMarker1057"/><span class="koboSpan" id="kobo.577.1"> to perform operations on dashboards, such as extracting a template from an existing dashboard, viewing a list of dashboards, deleting the dashboard, and creating a dashboard from an extracted template. </span><span class="koboSpan" id="kobo.577.2">Firstly, we will start with dashboard </span><span class="No-Break"><span class="koboSpan" id="kobo.578.1">template extraction.</span></span></p>
<h2 id="_idParaDest-287"><a id="_idTextAnchor287"/><span class="koboSpan" id="kobo.579.1">Extracting a template from a dashboard</span></h2>
<p><span class="koboSpan" id="kobo.580.1">In the Arduino Cloud CLI, we deal with commands</span><a id="_idIndexMarker1058"/><span class="koboSpan" id="kobo.581.1"> and provide different</span><a id="_idIndexMarker1059"/><span class="koboSpan" id="kobo.582.1"> parameters to perform various operations. </span><span class="koboSpan" id="kobo.582.2">Therefore, it is difficult to create a new dashboard via the command line, as it will make it more complex to guide the Arduino IoT Cloud about widgets and attach these widgets with cloud variables </span><span class="No-Break"><span class="koboSpan" id="kobo.583.1">via commands.</span></span></p>
<p><span class="koboSpan" id="kobo.584.1">To solve this issue, the Arduino team introduced the concept of template extraction from a dashboard. </span><span class="koboSpan" id="kobo.584.2">For example, if you want to deploy hundreds of environmental monitoring nodes, it’s difficult to create hundreds of dashboards via the Arduino graphical user interface. </span><span class="koboSpan" id="kobo.584.3">It’s also difficult to create long commands for dashboard creation, which includes all the information regarding the dashboard. </span><span class="koboSpan" id="kobo.584.4">So, Arduino introduced the template extraction technique. </span><span class="koboSpan" id="kobo.584.5">Firstly, we will create the dashboard via the Arduino graphical user interface, and then we will extract its template via the command line. </span><span class="koboSpan" id="kobo.584.6">Then, using a template, we will create dashboards in the Arduino IoT Cloud via the command line, as the Arduino Cloud CLI does not allow you to create a dashboard from scratch. </span><span class="koboSpan" id="kobo.584.7">The official documentation for dashboard template extraction is available </span><span class="No-Break"><span class="koboSpan" id="kobo.585.1">at </span></span><a href="https://docs.arduino.cc/arduino-cloud/getting-started/arduino-cloud-cli#extract-dashboard-template"><span class="No-Break"><span class="koboSpan" id="kobo.586.1">https://docs.arduino.cc/arduino-cloud/getting-started/arduino-cloud-cli#extract-dashboard-template</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.587.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.588.1">The following shows the command syntax for template extraction. </span><span class="koboSpan" id="kobo.588.2">With this command, we need to provide a dashboard ID with which the command will fetch the template of the dashboard. </span><span class="koboSpan" id="kobo.588.3">Then, we need to provide the format for the template file – either JSON </span><span class="No-Break"><span class="koboSpan" id="kobo.589.1">or YAML:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.590.1">
arduino-cloud-cli dashboard extract --id &lt;dashboardID&gt; --format &lt;json|yaml&gt;</span></pre> <p><span class="koboSpan" id="kobo.591.1">For the dashboard ID, either visit the Arduino IoT</span><a id="_idIndexMarker1060"/><span class="koboSpan" id="kobo.592.1"> Cloud to find it or refer to the upcoming subsections, in which we will</span><a id="_idIndexMarker1061"/><span class="koboSpan" id="kobo.593.1"> show you how to list dashboards, which will provide their name, ID, and so on. </span><span class="koboSpan" id="kobo.593.2">Now, we will assign the format; we want the template output in JSON format, so I used </span><span class="No-Break"><span class="koboSpan" id="kobo.594.1">JSON here:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.595.1">
arduino-cloud-cli dashboard  extract -i f00aaaab-7faa-4ba6-bdd7-814377f296ba --format json</span></pre> <p><span class="koboSpan" id="kobo.596.1">After executing the command, we will get the template output on the screen in JSON format, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.597.1">Figure 13</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.598.1">.18</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.599.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer217">
<span class="koboSpan" id="kobo.600.1"><img alt="Figure 13.18 – Extracting a dashboard template" src="image/B19752_13_18.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.601.1">Figure 13.18 – Extracting a dashboard template</span></p>
<p><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.602.1">Figure 13</span></em></span><em class="italic"><span class="koboSpan" id="kobo.603.1">.18</span></em><span class="koboSpan" id="kobo.604.1"> shows partial output on the screen. </span><span class="koboSpan" id="kobo.604.2">We have our dashboard template in JSON format, which shows all the information regarding widgets and their configuration, including </span><strong class="source-inline"><span class="koboSpan" id="kobo.605.1">thing_id</span></strong><span class="koboSpan" id="kobo.606.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.607.1">variable_id</span></strong><span class="koboSpan" id="kobo.608.1">. </span><span class="koboSpan" id="kobo.608.2">Copy the JSON format output and save it in a file, which will be used in the following section for </span><span class="No-Break"><span class="koboSpan" id="kobo.609.1">dashboard creation.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.610.1">Important note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.611.1">There is a bug in the Arduino Cloud CLI for dashboard extraction, as it shows the Thing name instead of the Thing ID in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.612.1">thing_id</span></strong><span class="koboSpan" id="kobo.613.1"> value. </span><span class="koboSpan" id="kobo.613.2">Therefore, you need to replace the text with the Thing ID; otherwise, an error will occur during the execution of the dashboard </span><span class="No-Break"><span class="koboSpan" id="kobo.614.1">creation command.</span></span></p>
<p><span class="koboSpan" id="kobo.615.1">In this subsection, we explored</span><a id="_idIndexMarker1062"/><span class="koboSpan" id="kobo.616.1"> how to extract a template</span><a id="_idIndexMarker1063"/><span class="koboSpan" id="kobo.617.1"> from an existing dashboard. </span><span class="koboSpan" id="kobo.617.2">In the following subsection, we will explore how to </span><span class="No-Break"><span class="koboSpan" id="kobo.618.1">list dashboards.</span></span></p>
<h2 id="_idParaDest-288"><a id="_idTextAnchor288"/><span class="koboSpan" id="kobo.619.1">Listing dashboards</span></h2>
<p><span class="koboSpan" id="kobo.620.1">In this section, we will list</span><a id="_idIndexMarker1064"/><span class="koboSpan" id="kobo.621.1"> all the dashboards. </span><span class="koboSpan" id="kobo.621.2">The documentation on listing dashboards is available at </span><a href="https://docs.arduino.cc/arduino-cloud/getting-started/arduino-cloud-cli#list-dashboards"><span class="koboSpan" id="kobo.622.1">https://docs.arduino.cc/arduino-cloud/getting-started/arduino-cloud-cli#list-dashboards</span></a><span class="koboSpan" id="kobo.623.1">. </span><span class="koboSpan" id="kobo.623.2">The following is a very simple command to list all </span><span class="No-Break"><span class="koboSpan" id="kobo.624.1">the dashboards:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.625.1">
arduino-cloud-cli dashboard list</span></pre> <p><span class="koboSpan" id="kobo.626.1">After executing the preceding command, we will see a complete list of dashboards, as shown in the </span><span class="No-Break"><span class="koboSpan" id="kobo.627.1">following figure.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer218">
<span class="koboSpan" id="kobo.628.1"><img alt="Figure 13.19 – The dashboard list command" src="image/B19752_13_19.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.629.1">Figure 13.19 – The dashboard list command</span></p>
<p><span class="koboSpan" id="kobo.630.1">In the output shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.631.1">Figure 13</span></em></span><em class="italic"><span class="koboSpan" id="kobo.632.1">.19</span></em><span class="koboSpan" id="kobo.633.1">, we can see the dashboard </span><strong class="bold"><span class="koboSpan" id="kobo.634.1">Name</span></strong><span class="koboSpan" id="kobo.635.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.636.1">ID</span></strong><span class="koboSpan" id="kobo.637.1">, and </span><strong class="bold"><span class="koboSpan" id="kobo.638.1">UpdatedAt</span></strong><span class="koboSpan" id="kobo.639.1"> details. </span><span class="koboSpan" id="kobo.639.2">Here, </span><strong class="bold"><span class="koboSpan" id="kobo.640.1">ID</span></strong><span class="koboSpan" id="kobo.641.1"> is very important, as it will be used in the following commands for dashboard deletion. </span><span class="koboSpan" id="kobo.641.2">It also helps you in dashboard template extraction, as we used the dashboard ID in the preceding subsection to extract </span><span class="No-Break"><span class="koboSpan" id="kobo.642.1">the template.</span></span></p>
<p><span class="koboSpan" id="kobo.643.1">In this subsection, we explored how</span><a id="_idIndexMarker1065"/><span class="koboSpan" id="kobo.644.1"> to list dashboards by using a very simple command. </span><span class="koboSpan" id="kobo.644.2">In the next subsection, we will explore how to delete a dashboard using the </span><span class="No-Break"><span class="koboSpan" id="kobo.645.1">dashboard ID.</span></span></p>
<h2 id="_idParaDest-289"><a id="_idTextAnchor289"/><span class="koboSpan" id="kobo.646.1">Deleting a dashboard</span></h2>
<p><span class="koboSpan" id="kobo.647.1">In this subsection, we will explore</span><a id="_idIndexMarker1066"/><span class="koboSpan" id="kobo.648.1"> how to delete a dashboard using the dashboard ID. </span><span class="koboSpan" id="kobo.648.2">The documentation for deleting dashboards is available at </span><a href="https://docs.arduino.cc/arduino-cloud/getting-started/arduino-cloud-cli#delete-dashboards"><span class="koboSpan" id="kobo.649.1">https://docs.arduino.cc/arduino-cloud/getting-started/arduino-cloud-cli#delete-dashboards</span></a><span class="koboSpan" id="kobo.650.1">. </span><span class="koboSpan" id="kobo.650.2">The following is the command syntax for </span><span class="No-Break"><span class="koboSpan" id="kobo.651.1">dashboard deletion:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.652.1">
arduino-cloud-cli dashboard delete --id &lt;dashboardID&gt;</span></pre> <p><span class="koboSpan" id="kobo.653.1">According to the preceding command syntax, we need to provide a dashboard ID for deletion. </span><span class="koboSpan" id="kobo.653.2">You can fetch the dashboard ID by using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.654.1">dashboard </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.655.1">list</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.656.1"> command:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.657.1">
arduino-cloud-cli dashboard delete -i 5e658ff8-2519-4d00-b556-41bad8b15571</span></pre> <p><span class="koboSpan" id="kobo.658.1">After the successful deletion of the device, you will not see an error message; otherwise, you will get a </span><strong class="source-inline"><span class="koboSpan" id="kobo.659.1">401 error</span></strong><span class="koboSpan" id="kobo.660.1"> message on </span><span class="No-Break"><span class="koboSpan" id="kobo.661.1">the screen.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer219">
<span class="koboSpan" id="kobo.662.1"><img alt="Figure 13.20 – The dashboard delete command" src="image/B19752_13_20.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.663.1">Figure 13.20 – The dashboard delete command</span></p>
<p><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.664.1">Figure 13</span></em></span><em class="italic"><span class="koboSpan" id="kobo.665.1">.20</span></em><span class="koboSpan" id="kobo.666.1"> shows the complete command for dashboard deletion, and there is no error on the screen, which means the dashboard has been deleted successfully. </span><span class="koboSpan" id="kobo.666.2">In this subsection, we discussed the </span><strong class="source-inline"><span class="koboSpan" id="kobo.667.1">delete</span></strong><span class="koboSpan" id="kobo.668.1"> command. </span><span class="koboSpan" id="kobo.668.2">In the upcoming subsection, we will explore how to create a dashboard</span><a id="_idIndexMarker1067"/><span class="koboSpan" id="kobo.669.1"> using a template, which we extracted in the first subsection of </span><span class="No-Break"><span class="koboSpan" id="kobo.670.1">this section.</span></span></p>
<h2 id="_idParaDest-290"><a id="_idTextAnchor290"/><span class="koboSpan" id="kobo.671.1">Creating a dashboard</span></h2>
<p><span class="koboSpan" id="kobo.672.1">After extracting</span><a id="_idIndexMarker1068"/><span class="koboSpan" id="kobo.673.1"> a dashboard template, we can start to create a dashboard. </span><span class="koboSpan" id="kobo.673.2">The documentation on dashboard creation can be found at </span><a href="https://docs.arduino.cc/arduino-cloud/getting-started/arduino-cloud-cli#create-dashboard"><span class="koboSpan" id="kobo.674.1">https://docs.arduino.cc/arduino-cloud/getting-started/arduino-cloud-cli#create-dashboard</span></a><span class="koboSpan" id="kobo.675.1">. </span><span class="koboSpan" id="kobo.675.2">The following is the syntax of the dashboard creation command, which takes two parameters. </span><span class="koboSpan" id="kobo.675.3">Firstly, it takes the name of the dashboard, and secondly, it takes the template filename for dashboard creation, which contains the dashboard template in JSON format that we saved in the </span><span class="No-Break"><span class="koboSpan" id="kobo.676.1">previous section:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.677.1">
arduino-cloud-cli dashboard create --name &lt;dashboardName&gt; --template &lt;template.(json|yaml)&gt; --override &lt;thing-0&gt;=&lt;actualThingID&gt;,&lt;thing-1&gt;=&lt;otherActualThingID&gt;</span></pre> <p><span class="koboSpan" id="kobo.678.1">Here, I have provided the Thing name, </span><strong class="source-inline"><span class="koboSpan" id="kobo.679.1">EnvSense101</span></strong><span class="koboSpan" id="kobo.680.1">, and in the previous section, I saved the JSON template in a file named </span><strong class="source-inline"><span class="koboSpan" id="kobo.681.1">EnvSenseTemplate.json</span></strong><span class="koboSpan" id="kobo.682.1">. </span><span class="koboSpan" id="kobo.682.2">Then, we provide the name with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.683.1">-n</span></strong><span class="koboSpan" id="kobo.684.1"> parameter and the template file with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.685.1">-</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.686.1">t</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.687.1"> parameter:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.688.1">
arduino-cloud-cli dashboard create -n EnvSensedashboard101 -t EnvSensedashboard.json</span></pre> <p><span class="koboSpan" id="kobo.689.1">After executing the preceding command, you will get the following output for successful dashboard creation (</span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.690.1">Figure 13</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.691.1">.21</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.692.1">):</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer220">
<span class="koboSpan" id="kobo.693.1"><img alt="Figure 13.21 – Dashboard creation using arduino-cloud-cli" src="image/B19752_13_21.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.694.1">Figure 13.21 – Dashboard creation using arduino-cloud-cli</span></p>
<p><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.695.1">Figure 13</span></em></span><em class="italic"><span class="koboSpan" id="kobo.696.1">.21</span></em><span class="koboSpan" id="kobo.697.1"> shows the command and the output of successful dashboard creation by the Arduino Cloud CLI. </span><span class="koboSpan" id="kobo.697.2">After creating the dashboard, the terminal shows the dashboard </span><strong class="bold"><span class="koboSpan" id="kobo.698.1">name</span></strong><span class="koboSpan" id="kobo.699.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.700.1">id</span></strong><span class="koboSpan" id="kobo.701.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.702.1">updated_at</span></strong><span class="koboSpan" id="kobo.703.1">, and </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.704.1">widgets</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.705.1"> details.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.706.1">Important note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.707.1">There is a bug in the Arduino Cloud CLI for dashboard extraction, as it shows the Thing name instead of the Thing ID in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.708.1">thing_id</span></strong><span class="koboSpan" id="kobo.709.1"> value. </span><span class="koboSpan" id="kobo.709.2">Therefore, you need to replace the text with the Thing ID; otherwise, an error will occur during the execution of the dashboard </span><span class="No-Break"><span class="koboSpan" id="kobo.710.1">creation command.</span></span></p>
<p><span class="koboSpan" id="kobo.711.1">In this subsection, we created</span><a id="_idIndexMarker1069"/><span class="koboSpan" id="kobo.712.1"> a dashboard in the Arduino IoT Cloud using the command line. </span><span class="koboSpan" id="kobo.712.2">In the following section, we will explore how OTA updates work via </span><span class="No-Break"><span class="koboSpan" id="kobo.713.1">a CLI.</span></span></p>
<h1 id="_idParaDest-291"><a id="_idTextAnchor291"/><span class="koboSpan" id="kobo.714.1">OTA management</span></h1>
<p><span class="koboSpan" id="kobo.715.1">In </span><a href="B19752_11.xhtml#_idTextAnchor229"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.716.1">Chapter 11</span></em></span></a><span class="koboSpan" id="kobo.717.1">, we explored what OTA</span><a id="_idIndexMarker1070"/><span class="koboSpan" id="kobo.718.1"> is and how we can easily use this feature to send updates to remote devices. </span><span class="koboSpan" id="kobo.718.2">In that chapter, we used a graphical user interface, which is a good option for a single device. </span><span class="koboSpan" id="kobo.718.3">However, when we have bulk Things to send OTA, then the situation becomes complex, as we need to go through different things one at a time to send OTA updates, which is very time consuming and a difficult operation at the </span><span class="No-Break"><span class="koboSpan" id="kobo.719.1">enterprise level.</span></span></p>
<p><span class="koboSpan" id="kobo.720.1">That’s why the Arduino team created commands for the Arduino Cloud CLI to send OTA updates to single or multiple devices automatically, to minimize the complexity and operation time. </span><span class="koboSpan" id="kobo.720.2">So, firstly, we will explore how to export the compiled binary by using the Arduino IDE, and then</span><a id="_idIndexMarker1071"/><span class="koboSpan" id="kobo.721.1"> we will send an OTA update to a device using its ID. </span><span class="koboSpan" id="kobo.721.2">For official documentation and updates, </span><span class="No-Break"><span class="koboSpan" id="kobo.722.1">visit </span></span><a href="https://docs.arduino.cc/arduino-cloud/getting-started/arduino-cloud-cli#ota-over-the-air"><span class="No-Break"><span class="koboSpan" id="kobo.723.1">https://docs.arduino.cc/arduino-cloud/getting-started/arduino-cloud-cli#ota-over-the-air</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.724.1">.</span></span></p>
<h2 id="_idParaDest-292"><a id="_idTextAnchor292"/><span class="koboSpan" id="kobo.725.1">Exporting a binary using the Arduino IDE</span></h2>
<p><span class="koboSpan" id="kobo.726.1">In this section, we will use</span><a id="_idIndexMarker1072"/><span class="koboSpan" id="kobo.727.1"> the Arduino IDE to generate the complied binaries</span><a id="_idIndexMarker1073"/><span class="koboSpan" id="kobo.728.1"> of our program for a device OTA. </span><span class="koboSpan" id="kobo.728.2">Firstly, download your Thing code from the Arduino IoT Cloud. </span><span class="koboSpan" id="kobo.728.3">Then, extract your downloaded code and open it up in the Arduino IDE. </span><span class="koboSpan" id="kobo.728.4">Select the development board in the Arduino IDE, and then click on </span><strong class="bold"><span class="koboSpan" id="kobo.729.1">Sketch</span></strong><span class="koboSpan" id="kobo.730.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.731.1">Export Compiled Binary</span></strong><span class="koboSpan" id="kobo.732.1">, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.733.1">Figure 13</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.734.1">.22</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.735.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer221">
<span class="koboSpan" id="kobo.736.1"><img alt="Figure 13.22 – Export Compiled Binary in the Arduino IDE" src="image/B19752_13_22.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.737.1">Figure 13.22 – Export Compiled Binary in the Arduino IDE</span></p>
<p><span class="koboSpan" id="kobo.738.1">Clicking on </span><strong class="bold"><span class="koboSpan" id="kobo.739.1">Export Compiled Binary</span></strong><span class="koboSpan" id="kobo.740.1"> will generate the </span><strong class="source-inline"><span class="koboSpan" id="kobo.741.1">build</span></strong><span class="koboSpan" id="kobo.742.1"> directory under your </span><strong class="source-inline"><span class="koboSpan" id="kobo.743.1">sketch</span></strong><span class="koboSpan" id="kobo.744.1"> directory, where you will find lots of files generated by the Arduino compiler. </span><span class="koboSpan" id="kobo.744.2">You need to select the file that ends with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.745.1">ino.bin</span></strong><span class="koboSpan" id="kobo.746.1"> extension, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.747.1">Figure 13</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.748.1">.23</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.749.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer222">
<span class="koboSpan" id="kobo.750.1"><img alt="Figure 13.23 – The sketch build files" src="image/B19752_13_23.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.751.1">Figure 13.23 – The sketch build files</span></p>
<p><span class="koboSpan" id="kobo.752.1">In this section, we</span><a id="_idIndexMarker1074"/><span class="koboSpan" id="kobo.753.1"> explored how</span><a id="_idIndexMarker1075"/><span class="koboSpan" id="kobo.754.1"> to generate the build files of a sketch using the Arduino IDE. </span><span class="koboSpan" id="kobo.754.2">In the next subsection, we will send this build file to a device OTA via the </span><span class="No-Break"><span class="koboSpan" id="kobo.755.1">command line.</span></span></p>
<h2 id="_idParaDest-293"><a id="_idTextAnchor293"/><span class="koboSpan" id="kobo.756.1">Uploading a sketch to a device</span></h2>
<p><span class="koboSpan" id="kobo.757.1">The Arduino Cloud CLI provides</span><a id="_idIndexMarker1076"/><span class="koboSpan" id="kobo.758.1"> a single upload option as well as a mass deployment option. </span><span class="koboSpan" id="kobo.758.2">This is the official documentation link: </span><a href="https://docs.arduino.cc/arduino-cloud/getting-started/arduino-cloud-cli#upload"><span class="koboSpan" id="kobo.759.1">https://docs.arduino.cc/arduino-cloud/getting-started/arduino-cloud-cli#upload</span></a><span class="koboSpan" id="kobo.760.1">. </span><span class="koboSpan" id="kobo.760.2">You can visit the page for the latest updates and news. </span><span class="koboSpan" id="kobo.760.3">Firstly, we will explore how to send an update to a single device. </span><span class="koboSpan" id="kobo.760.4">The following is a simple command syntax for a single-device </span><span class="No-Break"><span class="koboSpan" id="kobo.761.1">OTA operation:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.762.1">
arduino-cloud-cli ota upload --device-id &lt;deviceID&gt; --file &lt;sketch-file.ino.bin&gt;</span></pre> <p><span class="koboSpan" id="kobo.763.1">Here, we need to specify the device ID and the filename, including its path, which is done with the </span><span class="No-Break"><span class="koboSpan" id="kobo.764.1">following command:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.765.1">
arduino-cloud-cli ota upload -d cda148e4-b011-459a-95fd-a7510c9601c2  --file EnvSense101_sep15a.ino.bin</span></pre> <p><span class="koboSpan" id="kobo.766.1">After the successful execution of the command, you will see an empty terminal without any errors, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.767.1">Figure 13</span></em></span><em class="italic"><span class="koboSpan" id="kobo.768.1">.24</span></em><span class="koboSpan" id="kobo.769.1">. </span><span class="koboSpan" id="kobo.769.2">However, if the device is unavailable or any other issue arises, then the details will be printed on </span><span class="No-Break"><span class="koboSpan" id="kobo.770.1">the terminal.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer223">
<span class="koboSpan" id="kobo.771.1"><img alt="Figure 13.24 – A successful command execution of the OTA upload" src="image/B19752_13_24.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.772.1">Figure 13.24 – A successful command execution of the OTA upload</span></p>
<p><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.773.1">Figure 13</span></em></span><em class="italic"><span class="koboSpan" id="kobo.774.1">.24</span></em><span class="koboSpan" id="kobo.775.1"> shows that our upload</span><a id="_idIndexMarker1077"/><span class="koboSpan" id="kobo.776.1"> has been completed successfully without any errors. </span><span class="koboSpan" id="kobo.776.2">It will take some time on the terminal to upload the file, depending on your internet speed as well as your sketch size, but you need to wait till the final output. </span><span class="koboSpan" id="kobo.776.3">Never interrupt the </span><span class="No-Break"><span class="koboSpan" id="kobo.777.1">upload procedure.</span></span></p>
<p><span class="koboSpan" id="kobo.778.1">Then, we have the mass deployment option in OTA, where you can upload firmware to multiple devices by using FQBN, as well as tags. </span><span class="koboSpan" id="kobo.778.2">The following is a simple command for mass deployment that uses FQBN, and you can also assign specific </span><span class="No-Break"><span class="koboSpan" id="kobo.779.1">device IDs:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.780.1">
arduino-cloud-cli ota mass-upload --fqbn &lt;deviceFQBN&gt; --device-ids &lt;deviceIDs&gt; --file &lt;sketch-file.ino.bin&gt;</span></pre> <p><span class="koboSpan" id="kobo.781.1">However, with this specific command, I will only use </span><strong class="source-inline"><span class="koboSpan" id="kobo.782.1">fqbn</span></strong><span class="koboSpan" id="kobo.783.1"> to send the update to all the same </span><span class="No-Break"><span class="koboSpan" id="kobo.784.1">device types:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.785.1">
arduino-cloud-cli ota mass-upload -b arduino:samd:mkrwifi1010 --file EnvSense101_sep15a.ino.bin</span></pre> <p><span class="koboSpan" id="kobo.786.1">You can also explore the OTA mass upload by adding tags, to send an update to specific groups of devices. </span><span class="koboSpan" id="kobo.786.2">In this section, we explored how to build binaries of a sketch using the Arduino IDE</span><a id="_idIndexMarker1078"/><span class="koboSpan" id="kobo.787.1"> and how to upload an update using the </span><span class="No-Break"><span class="koboSpan" id="kobo.788.1">OTA command.</span></span></p>
<h1 id="_idParaDest-294"><a id="_idTextAnchor294"/><span class="koboSpan" id="kobo.789.1">What next?</span></h1>
<p><span class="koboSpan" id="kobo.790.1">After playing around with some commands, it’s now time to do some more experiments so that you can apply your learning to new scenarios and learn new stuff. </span><span class="koboSpan" id="kobo.790.2">We explored the complete list of commands available on the Arduino Cloud CLI. </span><span class="koboSpan" id="kobo.790.3">However, you can check out Arduino’s official page for the latest updates and news to keep yourself up to date with the latest features. </span><span class="koboSpan" id="kobo.790.4">Now, it’s your turn to create batch scripts using the Arduino Cloud CLI to automate your operations, such as bulk device addition in the Arduino IoT Cloud, bulk Thing creation using templates, binding devices with Things, and creating a dashboard for every Thing from </span><span class="No-Break"><span class="koboSpan" id="kobo.791.1">dashboard templates.</span></span></p>
<h1 id="_idParaDest-295"><a id="_idTextAnchor295"/><span class="koboSpan" id="kobo.792.1">Summary</span></h1>
<p><span class="koboSpan" id="kobo.793.1">In this chapter, we covered all the types of commands that are officially available to us on the Arduino Cloud CLI. </span><span class="koboSpan" id="kobo.793.2">Firstly, we explored device-related commands, which include device creation, listing devices, deletion, tagging, and untagging. </span><span class="koboSpan" id="kobo.793.3">Then, we explored how to work with Things; in that section, we started with template extraction and then created a Thing using a template. </span><span class="koboSpan" id="kobo.793.4">We also explored how to clone a Thing, how to bind a device with a Thing, and so on. </span><span class="koboSpan" id="kobo.793.5">In the penultimate section, we played around with dashboard commands, and in the last section, we explored how OTA commands can benefit us by sending updates to devices via the command line in </span><span class="No-Break"><span class="koboSpan" id="kobo.794.1">different ways.</span></span></p>
<p><span class="koboSpan" id="kobo.795.1">This chapter was specially designed for backend developers and administrators who want to use the Arduino Cloud CLI to optimize their daily tasks, by using terminal commands instead of a graphical user interface. </span><span class="koboSpan" id="kobo.795.2">This chapter will have helped them interact with the Arduino IoT Cloud using a CLI. </span><span class="koboSpan" id="kobo.795.3">It will also have helped them to create custom scripts, automating their </span><span class="No-Break"><span class="koboSpan" id="kobo.796.1">daily tasks.</span></span></p>
<p><span class="koboSpan" id="kobo.797.1">The following chapter is the last chapter of this book, and in this chapter, we will explore different Arduino IoT Cloud plans for educational and enterprise organizations. </span><span class="koboSpan" id="kobo.797.2">We will also explore industrial IoT hardware devices and different types of Arduino IoT Cloud services that are especially available to enterprise organizations. </span><span class="koboSpan" id="kobo.797.3">This chapter will give you a complete overview of how to scale your product from a smaller scale to an </span><span class="No-Break"><span class="koboSpan" id="kobo.798.1">enterprise level.</span></span></p>
</div>
</body></html>