# 前言

我们的未来世界充满了智能和互联的设备。DIY 社区一直着迷于这样一个事实：每个人都可以设计和构建自己的智能系统，无论是专门的还是非专门的，用于特定任务。从小型控制器在检测到有人时打开灯光，到智能沙发在我们坐下时发送电子邮件，廉价的电子产品项目变得越来越容易创建，为此，我们都要感谢那些在 2005 年左右在意大利伊夫雷亚发起 Arduino 项目的团队。

Arduino 平台是世界上使用最广泛的开源硬件之一。它在一个小型印刷电路板上提供了一个功能强大的微控制器，具有非常小的外形尺寸。Arduino 用户可以下载 Arduino **集成开发环境**（**IDE**），并使用 C/C++语言和 Arduino 核心库编写自己的程序，该库提供了许多有用的功能和特性。

通过*Arduino C 编程*，用户将学习足够的 C/C++知识，能够基于 Arduino 设计自己的硬件。这是一本包含所有必需理论并辅以具体实例的全能书籍。读者还将了解一些主要交互设计和实时多媒体框架，如 Processing 和 Max 6 图形编程框架。

*Arduino C 编程*将教授您著名的“通过制作学习”的工作方式，这是我在所有课程中（从 Max 6 到 Processing 和 Ableton Live）努力遵循的方式。

最后，通过探讨输入/输出概念、通信和网络、声音合成以及反应式系统设计，*Arduino C 编程*将开启新的知识领域。读者将学习到必要的技能，通过以不同的方式看待现代世界，不仅作为用户，也作为真正的创造者，继续他们的旅程。

如需更多详细信息，您可以访问我的网站[`cprogrammingforarduino.com/`](http://cprogrammingforarduino.com/)。

# 本书涵盖的内容

第一章, *让我们连接事物*，是您与 Arduino 和微控制器编程的第一次接触。我们将学习如何在我们的计算机上安装 Arduino 集成开发环境，以及如何布线和测试开发工具链，为后续学习做准备。

第二章, *C 语言初探*，涵盖了软件与硬件之间的关系。我们将介绍 C 语言，了解如何编译它，然后学习如何将我们的程序上传到 Arduino 板。我们还将学习将一个纯粹的想法转化为 Arduino 固件所需的所有步骤。

第三章, *C 基础——让你变得更强大*，直接进入 C 语言的学习。通过学习基础知识，我们学习如何阅读和编写 C 程序，发现数据类型、基本结构和编程块。

第四章，*使用函数、数学和定时改进编程*，提供了改进我们的 C 代码的第一把钥匙，特别是通过使用函数。我们学习如何产生可重用和高效的编程结构。

第五章，*使用数字输入进行感应*，介绍了 Arduino 的数字输入。我们将学习如何使用它们，并理解它们的输入和输出。我们还将看到 Arduino 如何使用电和脉冲与一切进行通信。

第六章，*通过模拟输入感知世界——用模拟输入感受*，通过不同的具体例子描述了 Arduino 的模拟输入，并将它们与数字引脚进行比较。本章介绍了 Max 6 框架，作为 Arduino 的理想伴侣之一。

第七章，*通过串行通信进行交流*，介绍了通信概念，特别是通过教授关于串行通信的内容。我们将学习如何使用串行通信控制台作为一个强大的调试工具。

第八章，*设计视觉输出反馈*，讨论了 Arduino 的输出，以及我们如何使用它们通过使用 LED 及其系统来设计视觉反馈系统。它介绍了强大的 PWM 概念，并也讨论了 LCD 显示屏。

第九章，*使事物移动和创造声音*，展示了我们如何使用 Arduino 的输出进行与运动相关的项目。我们讨论了电机和运动，以及空气振动和声音设计。我们描述了一些关于数字声音、MIDI 和 OSC 协议的基础知识，并使用一个功能强大的 PCM 库，提供从 Arduino 本身读取数字编码声音文件的功能。

第十章，*一些高级技术*，介绍了许多高级概念，从 EEPROM 单元上的数据存储，到多个 Arduino 板之间的通信，以及 GPS 模块的使用。我们还将学习如何使用 Arduino 板与电池一起使用，玩转 LCD 显示屏，以及使用 VGA 屏蔽卡将微控制器连接到典型的计算机屏幕。

第十一章，*网络*，介绍了我们需要理解的网络概念，以便在以太网、有线或无线网络上使用我们的 Arduino。我们还将使用一个强大的库，它为我们提供了一种通过在 Arduino 上按按钮直接发送推文的方法，而不需要使用任何计算机。

第十二章, *玩转 Max 6 框架*，介绍了一些我们可以用于 Max 6 图形编程框架的技巧和技术。我们将完全描述 Serial 对象的使用以及如何解析和选择从 Arduino 传到计算机的数据。我们将设计一个小型声音电平计，使用真实的 LED 和 Max 6，并以设计由我们自己的手和距离传感器控制的声音音调转换效果结束。

第十三章, *提高 C 编程技能和创建库*，是本书最先进的章节。它描述了一些高级的 C 概念，通过一些精彩且有趣的现实世界示例，我们可以使用这些概念使我们的代码可重用、更高效和优化。

*附录*为我们提供了 C 编程语言中数据类型的详细信息，C 和 C++中的运算符优先级，重要的数学函数，用于计算优化的泰勒级数，ASCII 表，安装库的说明，以及组件分销商的列表。

*附录*可以从[`www.packtpub.com/sites/default/files/downloads/7584OS_Appendix.pdf`](http://www.packtpub.com/sites/default/files/downloads/7584OS_Appendix.pdf)下载。

# 阅读本书所需的条件

如果你想利用本书中的每个示例，以下软件是必需的：

+   Arduino 环境（免费，[`arduino.cc/en/main/software`](http://arduino.cc/en/main/software)）。这是所有与 Arduino 编程相关的操作所必需的。

+   Fritzing（免费，[`fritzing.org/download`](http://fritzing.org/download)）。这是一个开源环境，帮助我们设计电路。

+   Processing（免费，[`processing.org/download`](http://processing.org/download)）。这是一个使用 Java 进行快速原型设计的开源框架。一些示例将其用作 Arduino 板的通信伙伴。

+   Max 6 框架（30 天试用期，[`cycling74.com/downloads`](http://cycling74.com/downloads)）。这个框架是一个巨大的环境，本书中也使用了它。

本书还使用了其他一些库。每次需要它们时，示例描述都会解释从哪里下载它们以及如何在我们的计算机上安装它们。

# 本书面向的对象

本书面向那些想要掌握使用 Arduino 板进行 DIY 电子硬件制作的人。它教授了我们使用 C 编程语言编程固件以及如何将 Arduino 连接到物理世界所需的一切，深入浅出。从互动设计艺术学校的学生到纯粹爱好者，从互动装置设计师到想要通过加入一个庞大且不断增长的物理计算程序员社区来学习电子的人，本书将帮助所有对学习新方法设计智能对象、会说话的对象、高效设备以及自主或连接的反应装置感兴趣的人。

本书开启了通过实践学习的全新视野，这将改变读者的生活。

# 惯例

在本书中，您将找到多种文本样式，用于区分不同类型的信息。以下是一些这些样式的示例及其含义的解释。

文本中的代码词将以如下方式显示：“我们可以通过使用`include`指令来包含其他上下文。”

代码块将以如下方式设置：

```cpp
[default]
exten => s,1,Dial(Zap/1|30)
exten => s,2,Voicemail(u100)
exten => s,102,Voicemail(b100)
exten => i,1,Voicemail(s0)
```

当我们希望将您的注意力引到代码块的一个特定部分时，相关的行或项目将以粗体显示：

```cpp
[default]
exten => s,1,Dial(Zap/1|30)
exten => s,2,Voicemail(u100)
exten => s,102,Voicemail(b100)
exten => i,1,Voicemail(s0)
```

任何命令行输入或输出将以如下方式编写：

```cpp
# cp /usr/src/asterisk-addons/configs/cdr_mysql.conf.sample
 /etc/asterisk/cdr_mysql.conf

```

**新术语**和**重要词汇**将以粗体显示。你在屏幕上看到的，例如在菜单或对话框中的文字，将以如下方式显示：“点击**下一个**按钮将您带到下一屏幕。”

### 注意

警告或重要注意事项将以如下框中显示。

### 小贴士

技巧和窍门将以如下方式显示。

# 读者反馈

我们欢迎读者的反馈。请告诉我们您对这本书的看法——您喜欢什么或可能不喜欢什么。读者反馈对我们开发您真正能从中获得最大价值的标题非常重要。

要发送给我们一般性的反馈，只需发送一封电子邮件到`<feedback@packtpub.com>`，并在您的邮件主题中提及书籍标题。如果您在某个主题上有专业知识，并且您对撰写或为书籍做出贡献感兴趣，请参阅我们的作者指南[www.packtpub.com/authors](http://www.packtpub.com/authors)。

# 客户支持

现在，您是 Packt 书籍的骄傲拥有者，我们有一些事情可以帮助您从您的购买中获得最大收益。

## 下载示例代码

您可以从您在[`www.packtpub.com`](http://www.packtpub.com)的账户下载所有已购买的 Packt 书籍的示例代码文件。如果您在其他地方购买了这本书，您可以访问[`www.packtpub.com/support`](http://www.packtpub.com/support)并注册，以便将文件直接通过电子邮件发送给您。

## 错误清单

尽管我们已经尽一切努力确保我们内容的准确性，但错误仍然可能发生。如果您在我们的书中发现错误——可能是文本或代码中的错误——如果您能向我们报告这一点，我们将不胜感激。通过这样做，您可以节省其他读者的挫败感，并帮助我们改进本书的后续版本。如果您发现任何错误清单，请通过访问[`www.packtpub.com/submit-errata`](http://www.packtpub.com/submit-errata)来报告它们，选择您的书籍，点击**错误清单提交表单**链接，并输入您的错误清单详情。一旦您的错误清单得到验证，您的提交将被接受，错误清单将被上传到我们的网站，或添加到该标题的错误清单部分。任何现有的错误清单都可以通过从[`www.packtpub.com/support`](http://www.packtpub.com/support)中选择您的标题来查看。

## 侵权

在互联网上，版权材料的盗版是一个跨所有媒体的持续问题。在 Packt，我们非常重视我们版权和许可证的保护。如果你在互联网上发现我们作品的任何非法副本，无论形式如何，请立即提供位置地址或网站名称，以便我们可以寻求补救措施。

请通过 `<copyright@packtpub.com>` 联系我们，并提供涉嫌盗版材料的链接。

我们感谢你在保护我们作者和提供有价值内容的能力方面的帮助。

## 问题

如果你在本书的任何方面遇到问题，可以通过 `<questions@packtpub.com>` 联系我们，我们将尽力解决。
