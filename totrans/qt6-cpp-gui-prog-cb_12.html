<html><head></head><body>
<div id="_idContainer217">
<h1 class="chapter-number" id="_idParaDest-243"><a id="_idTextAnchor243"/><span class="koboSpan" id="kobo.1.1">12</span></h1>
<h1 id="_idParaDest-244"><a id="_idTextAnchor244"/><span class="koboSpan" id="kobo.2.1">Accessing Databases with SQL Driver and Qt</span></h1>
<p><strong class="bold"><span class="koboSpan" id="kobo.3.1">Structured Query Language</span></strong><span class="koboSpan" id="kobo.4.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.5.1">SQL</span></strong><span class="koboSpan" id="kobo.6.1">) is a special programming language used to manage data held in a relational database management system. </span><span class="koboSpan" id="kobo.6.2">A SQL server is a database system designed to use one of the many types of SQL programming languages to manage </span><span class="No-Break"><span class="koboSpan" id="kobo.7.1">its data.</span></span></p>
<p><span class="koboSpan" id="kobo.8.1">In this chapter, we will cover the </span><span class="No-Break"><span class="koboSpan" id="kobo.9.1">following recipes:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.10.1">Setting up </span><span class="No-Break"><span class="koboSpan" id="kobo.11.1">a database</span></span></li>
<li><span class="koboSpan" id="kobo.12.1">Connecting to </span><span class="No-Break"><span class="koboSpan" id="kobo.13.1">a database</span></span></li>
<li><span class="koboSpan" id="kobo.14.1">Writing basic </span><span class="No-Break"><span class="koboSpan" id="kobo.15.1">SQL queries</span></span></li>
<li><span class="koboSpan" id="kobo.16.1">Creating a login screen </span><span class="No-Break"><span class="koboSpan" id="kobo.17.1">with Qt</span></span></li>
<li><span class="koboSpan" id="kobo.18.1">Displaying information from a database in </span><span class="No-Break"><span class="koboSpan" id="kobo.19.1">model view</span></span></li>
<li><span class="koboSpan" id="kobo.20.1">Advanced </span><span class="No-Break"><span class="koboSpan" id="kobo.21.1">SQL queries</span></span></li>
</ul>
<h1 id="_idParaDest-245"><a id="_idTextAnchor245"/><span class="koboSpan" id="kobo.22.1">Technical requirements</span></h1>
<p><span class="koboSpan" id="kobo.23.1">The technical requirements for this chapter include Qt 6.6.1 MinGW 64-bit and Qt Creator 12.0.2. </span><span class="koboSpan" id="kobo.23.2">All the code used in this chapter can be downloaded from the following GitHub </span><span class="No-Break"><span class="koboSpan" id="kobo.24.1">repository: </span></span><a href="https://github.com/PacktPublishing/QT6-C-GUI-Programming-Cookbook---Third-Edition-/tree/main/Chapter12"><span class="No-Break"><span class="koboSpan" id="kobo.25.1">https://github.com/PacktPublishing/QT6-C-GUI-Programming-Cookbook---Third-Edition-/tree/main/Chapter12</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.26.1">.</span></span></p>
<h1 id="_idParaDest-246"><a id="_idTextAnchor246"/><span class="koboSpan" id="kobo.27.1">Setting up a database</span></h1>
<p><span class="koboSpan" id="kobo.28.1">Qt supports several different types of SQL drivers </span><a id="_idIndexMarker763"/><span class="koboSpan" id="kobo.29.1">in the form of plugins/add-ons, such as </span><strong class="bold"><span class="koboSpan" id="kobo.30.1">SQLite</span></strong><span class="koboSpan" id="kobo.31.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.32.1">ODBC</span></strong><span class="koboSpan" id="kobo.33.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.34.1">PostgreSQL</span></strong><span class="koboSpan" id="kobo.35.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.36.1">MySQL</span></strong><span class="koboSpan" id="kobo.37.1">, and so on. </span><span class="koboSpan" id="kobo.37.2">However, it’s very easy to integrate these drivers into your Qt project. </span><span class="koboSpan" id="kobo.37.3">We will learn how to do this in the </span><span class="No-Break"><span class="koboSpan" id="kobo.38.1">following example.</span></span></p>
<h2 id="_idParaDest-247"><a id="_idTextAnchor247"/><span class="koboSpan" id="kobo.39.1">How to do it…</span></h2>
<p><span class="koboSpan" id="kobo.40.1">In this example, we will learn</span><a id="_idIndexMarker764"/><span class="koboSpan" id="kobo.41.1"> how to use Qt with </span><strong class="bold"><span class="koboSpan" id="kobo.42.1">SQLite</span></strong><span class="koboSpan" id="kobo.43.1">. </span><span class="koboSpan" id="kobo.43.2">Let’s set up our SQLite editor before we dive </span><span class="No-Break"><span class="koboSpan" id="kobo.44.1">into Qt:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.45.1">Download </span><strong class="bold"><span class="koboSpan" id="kobo.46.1">SQLiteStudio</span></strong><span class="koboSpan" id="kobo.47.1"> from </span><a href="https://sqlitestudio.pl"><span class="koboSpan" id="kobo.48.1">https://sqlitestudio.pl</span></a><span class="koboSpan" id="kobo.49.1"> and install it to administrate your </span><span class="No-Break"><span class="koboSpan" id="kobo.50.1">SQLite databases:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer185">
<span class="koboSpan" id="kobo.51.1"><img alt="Figure 12.1 – Install SQLiteStudio onto your computer" src="image/B20976_12_001.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.52.1">Figure 12.1 – Install SQLiteStudio onto your computer</span></p>
<ol>
<li value="2"><span class="koboSpan" id="kobo.53.1">Open </span><strong class="bold"><span class="koboSpan" id="kobo.54.1">SQLiteStudio</span></strong><span class="koboSpan" id="kobo.55.1"> and you should see something </span><span class="No-Break"><span class="koboSpan" id="kobo.56.1">like this:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer186">
<span class="koboSpan" id="kobo.57.1"><img alt="Figure 12.2 – SQLiteStudio is a handy program for managing SQLite databases" src="image/B20976_12_002.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.58.1">Figure 12.2 – SQLiteStudio is a handy program for managing SQLite databases</span></p>
<ol>
<li value="3"><span class="koboSpan" id="kobo.59.1">We need to create a new</span><a id="_idIndexMarker765"/><span class="koboSpan" id="kobo.60.1"> database before we start; go to </span><strong class="bold"><span class="koboSpan" id="kobo.61.1">Database</span></strong><span class="koboSpan" id="kobo.62.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.63.1">Add a database</span></strong><span class="koboSpan" id="kobo.64.1">. </span><span class="koboSpan" id="kobo.64.2">Select the </span><strong class="bold"><span class="koboSpan" id="kobo.65.1">SQLite 3</span></strong><span class="koboSpan" id="kobo.66.1"> option for your database type, followed by selecting your file name and </span><a id="_idIndexMarker766"/><span class="koboSpan" id="kobo.67.1">setting your database name. </span><span class="koboSpan" id="kobo.67.2">Then, click the </span><strong class="bold"><span class="koboSpan" id="kobo.68.1">Test connection</span></strong><span class="koboSpan" id="kobo.69.1"> button. </span><span class="koboSpan" id="kobo.69.2">You should see a green tick appearing beside the button. </span><span class="koboSpan" id="kobo.69.3">After that, click on the </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.70.1">OK</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.71.1"> button:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer187">
<span class="koboSpan" id="kobo.72.1"><img alt="Figure 12.3 – Creating a new SQLite 3 database" src="image/B20976_12_003.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.73.1">Figure 12.3 – Creating a new SQLite 3 database</span></p>
<ol>
<li value="4"><span class="koboSpan" id="kobo.74.1">Once the database has</span><a id="_idIndexMarker767"/><span class="koboSpan" id="kobo.75.1"> been created, you should see the database appear in the </span><strong class="bold"><span class="koboSpan" id="kobo.76.1">Databases</span></strong><span class="koboSpan" id="kobo.77.1"> window. </span><span class="koboSpan" id="kobo.77.2">Then, right-click on </span><strong class="bold"><span class="koboSpan" id="kobo.78.1">Tables</span></strong><span class="koboSpan" id="kobo.79.1"> and select </span><strong class="bold"><span class="koboSpan" id="kobo.80.1">Create a table</span></strong><span class="koboSpan" id="kobo.81.1"> option from the menu that </span><span class="No-Break"><span class="koboSpan" id="kobo.82.1">pops up:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer188">
<span class="koboSpan" id="kobo.83.1"><img alt="Figure 12.4 – Select the Create a table option from the menu" src="image/B20976_12_004.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.84.1">Figure 12.4 – Select the Create a table option from the menu</span></p>
<ol>
<li value="5"><span class="koboSpan" id="kobo.85.1">Set the table name as </span><strong class="source-inline"><span class="koboSpan" id="kobo.86.1">employee</span></strong><span class="koboSpan" id="kobo.87.1">. </span><span class="koboSpan" id="kobo.87.2">Then, click on the </span><strong class="bold"><span class="koboSpan" id="kobo.88.1">Add column (lns)</span></strong><span class="koboSpan" id="kobo.89.1"> button located above the </span><a id="_idIndexMarker768"/><span class="koboSpan" id="kobo.90.1">table name input field. </span><span class="koboSpan" id="kobo.90.2">The </span><strong class="bold"><span class="koboSpan" id="kobo.91.1">Column</span></strong><span class="koboSpan" id="kobo.92.1"> window will now </span><span class="No-Break"><span class="koboSpan" id="kobo.93.1">pop up:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer189">
<span class="koboSpan" id="kobo.94.1"><img alt="Figure 12.5 – Create a new column called emp_id" src="image/B20976_12_005.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.95.1">Figure 12.5 – Create a new column called emp_id</span></p>
<ol>
<li value="6"><span class="koboSpan" id="kobo.96.1">Set the column name as </span><strong class="source-inline"><span class="koboSpan" id="kobo.97.1">emp_id</span></strong><span class="koboSpan" id="kobo.98.1">, set the data type as </span><strong class="bold"><span class="koboSpan" id="kobo.99.1">INTEGER</span></strong><span class="koboSpan" id="kobo.100.1">, and check the </span><strong class="bold"><span class="koboSpan" id="kobo.101.1">Primary key</span></strong><span class="koboSpan" id="kobo.102.1"> checkbox. </span><span class="koboSpan" id="kobo.102.2">Then, click </span><a id="_idIndexMarker769"/><span class="koboSpan" id="kobo.103.1">on the </span><strong class="bold"><span class="koboSpan" id="kobo.104.1">Configure</span></strong><span class="koboSpan" id="kobo.105.1"> button</span><a id="_idIndexMarker770"/><span class="koboSpan" id="kobo.106.1"> at the right of the </span><strong class="bold"><span class="koboSpan" id="kobo.107.1">Primary key</span></strong><span class="koboSpan" id="kobo.108.1"> checkbox. </span><span class="koboSpan" id="kobo.108.2">The </span><strong class="bold"><span class="koboSpan" id="kobo.109.1">Edit constraint</span></strong><span class="koboSpan" id="kobo.110.1"> window will now pop up. </span><span class="koboSpan" id="kobo.110.2">Check on the </span><strong class="bold"><span class="koboSpan" id="kobo.111.1">Autoincrement</span></strong><span class="koboSpan" id="kobo.112.1"> checkbox and </span><span class="No-Break"><span class="koboSpan" id="kobo.113.1">click </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.114.1">Apply</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.115.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer190">
<span class="koboSpan" id="kobo.116.1"><img alt="Figure 12.6 – Enable the Autoincrement checkbox" src="image/B20976_12_006.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.117.1">Figure 12.6 – Enable the Autoincrement checkbox</span></p>
<ol>
<li value="7"><span class="koboSpan" id="kobo.118.1">After that, press the </span><strong class="bold"><span class="koboSpan" id="kobo.119.1">OK</span></strong><span class="koboSpan" id="kobo.120.1"> button under the </span><strong class="bold"><span class="koboSpan" id="kobo.121.1">Column</span></strong><span class="koboSpan" id="kobo.122.1"> window. </span><span class="koboSpan" id="kobo.122.2">We have now successfully created a new column called </span><strong class="source-inline"><span class="koboSpan" id="kobo.123.1">emp_id</span></strong><span class="koboSpan" id="kobo.124.1">. </span><span class="koboSpan" id="kobo.124.2">Let’s repeat the steps above (without enabling the</span><a id="_idIndexMarker771"/><span class="koboSpan" id="kobo.125.1"> primary key) to create other columns. </span><span class="koboSpan" id="kobo.125.2">You may follow the same settings as </span><span class="No-Break"><span class="koboSpan" id="kobo.126.1">seen here:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer191">
<span class="koboSpan" id="kobo.127.1"><img alt="Figure 12.7 – Create all five columns" src="image/B20976_12_007.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.128.1">Figure 12.7 – Create all five columns</span></p>
<ol>
<li value="8"><span class="koboSpan" id="kobo.129.1">The columns are not actually created at this point. </span><span class="koboSpan" id="kobo.129.2">Click on the button with a green tick icon located</span><a id="_idIndexMarker772"/><span class="koboSpan" id="kobo.130.1"> above the table name. </span><span class="koboSpan" id="kobo.130.2">A window will pop up to confirm the creation of the columns. </span><span class="koboSpan" id="kobo.130.3">Press </span><strong class="bold"><span class="koboSpan" id="kobo.131.1">OK</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.132.1">to proceed:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer192">
<span class="koboSpan" id="kobo.133.1"><img alt="Figure 12.8 – Click the OK button to confirm" src="image/B20976_12_008.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.134.1">Figure 12.8 – Click the OK button to confirm</span></p>
<ol>
<li value="9"><span class="koboSpan" id="kobo.135.1">Now, we have created the </span><strong class="source-inline"><span class="koboSpan" id="kobo.136.1">employee</span></strong><span class="koboSpan" id="kobo.137.1"> table. </span><span class="koboSpan" id="kobo.137.2">Let’s move on from the </span><strong class="bold"><span class="koboSpan" id="kobo.138.1">Structure</span></strong><span class="koboSpan" id="kobo.139.1"> tab to the </span><strong class="bold"><span class="koboSpan" id="kobo.140.1">Data</span></strong><span class="koboSpan" id="kobo.141.1"> tab. </span><span class="koboSpan" id="kobo.141.2">We can use the </span><strong class="bold"><span class="koboSpan" id="kobo.142.1">Data</span></strong><span class="koboSpan" id="kobo.143.1"> tab to view all the data belonging to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.144.1">employee</span></strong><span class="koboSpan" id="kobo.145.1"> table, which is currently empty. </span><span class="koboSpan" id="kobo.145.2">Let’s insert dummy data into the </span><strong class="source-inline"><span class="koboSpan" id="kobo.146.1">employee</span></strong><span class="koboSpan" id="kobo.147.1"> table by</span><a id="_idIndexMarker773"/><span class="koboSpan" id="kobo.148.1"> clicking on the </span><strong class="bold"><span class="koboSpan" id="kobo.149.1">Insert row (Ins)</span></strong><span class="koboSpan" id="kobo.150.1"> button, which is the one with a green plus icon. </span><span class="koboSpan" id="kobo.150.2">Then, simply insert some dummy data </span><span class="No-Break"><span class="koboSpan" id="kobo.151.1">like so:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer193">
<span class="koboSpan" id="kobo.152.1"><img alt="Figure 12.9 – Insert dummy data into the employee table" src="image/B20976_12_009.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.153.1">Figure 12.9 – Insert dummy data into the employee table</span></p>
<ol>
<li value="10"><span class="koboSpan" id="kobo.154.1">Let’s set up the SQL driver for our Qt project. </span><span class="koboSpan" id="kobo.154.2">Just go to your Qt installation folder and look for the </span><strong class="source-inline"><span class="koboSpan" id="kobo.155.1">sqldrivers</span></strong><span class="koboSpan" id="kobo.156.1"> folder. </span><span class="koboSpan" id="kobo.156.2">For example, mine is located </span><span class="No-Break"><span class="koboSpan" id="kobo.157.1">at </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.158.1">C:\Qt\6.4.2\mingw_64\plugins\sqldrivers</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.159.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.160.1">Copy the entire </span><strong class="source-inline"><span class="koboSpan" id="kobo.161.1">sqldrivers</span></strong><span class="koboSpan" id="kobo.162.1"> folder to your project’s build directory. </span><span class="koboSpan" id="kobo.162.2">You can remove the DLL files that are not relevant to the SQL server you’re running. </span><span class="koboSpan" id="kobo.162.3">In our case, since we’re using </span><strong class="bold"><span class="koboSpan" id="kobo.163.1">SQLite</span></strong><span class="koboSpan" id="kobo.164.1">, we can delete everything </span><span class="No-Break"><span class="koboSpan" id="kobo.165.1">except </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.166.1">qsqlite.dll</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.167.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.168.1">The DLL files mentioned in the previous step are the drivers that enable Qt to communicate with different</span><a id="_idIndexMarker774"/><span class="koboSpan" id="kobo.169.1"> types of SQL architecture. </span><span class="koboSpan" id="kobo.169.2">You may also need the DLL file of the SQL client library in order for the driver to work. </span><span class="koboSpan" id="kobo.169.3">In our case, we need </span><strong class="source-inline"><span class="koboSpan" id="kobo.170.1">sqlite3.dll</span></strong><span class="koboSpan" id="kobo.171.1"> to be located in the same directory as our program’s executable. </span><span class="koboSpan" id="kobo.171.2">You can either get it from the installation directory of </span><strong class="bold"><span class="koboSpan" id="kobo.172.1">SQLiteStudio</span></strong><span class="koboSpan" id="kobo.173.1"> or from the official website of </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.174.1">SQLite</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.175.1">: </span></span><a href="https://www.sqlite.org/download.html"><span class="No-Break"><span class="koboSpan" id="kobo.176.1">https://www.sqlite.org/download.html</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.177.1">.</span></span></li>
</ol>
<h2 id="_idParaDest-248"><a id="_idTextAnchor248"/><span class="koboSpan" id="kobo.178.1">How it works…</span></h2>
<p><span class="koboSpan" id="kobo.179.1">Qt provides us with SQL </span><a id="_idIndexMarker775"/><span class="koboSpan" id="kobo.180.1">drivers so that we can easily connect to different types of SQL servers without implementing </span><span class="No-Break"><span class="koboSpan" id="kobo.181.1">them ourselves.</span></span></p>
<p><span class="koboSpan" id="kobo.182.1">Currently, Qt officially supports SQLite, ODBC, and PostgreSQL. </span><span class="koboSpan" id="kobo.182.2">If you need to connect directly to MySQL, you need to recompile Qt drivers by yourself, which is out of the scope of this book. </span><span class="koboSpan" id="kobo.182.3">For security reasons, it’s not recommended that you connect to MySQL directly from your application. </span><span class="koboSpan" id="kobo.182.4">Instead, your application should interact with your MySQL database (or any other SQL servers that are not officially supported by Qt) indirectly by sending an HTTP request using </span><strong class="source-inline"><span class="koboSpan" id="kobo.183.1">QNetworkAccessManager</span></strong><span class="koboSpan" id="kobo.184.1"> to your backend script (such as PHP, ASP, and JSP), which can then communicate with </span><span class="No-Break"><span class="koboSpan" id="kobo.185.1">the database.</span></span></p>
<p><span class="koboSpan" id="kobo.186.1">If you only need a simple file-based database and don’t plan to use a server-based database, </span><strong class="bold"><span class="koboSpan" id="kobo.187.1">SQLite</span></strong><span class="koboSpan" id="kobo.188.1"> is a good choice for you, which is what we have chosen for </span><span class="No-Break"><span class="koboSpan" id="kobo.189.1">this chapter.</span></span></p>
<p><span class="koboSpan" id="kobo.190.1">In the </span><em class="italic"><span class="koboSpan" id="kobo.191.1">Connecting to a database</span></em><span class="koboSpan" id="kobo.192.1"> recipe, we will learn how to connect to our SQL database using Qt’s </span><span class="No-Break"><span class="koboSpan" id="kobo.193.1">SQL module.</span></span></p>
<h1 id="_idParaDest-249"><a id="_idTextAnchor249"/><span class="koboSpan" id="kobo.194.1">Connecting to a database</span></h1>
<p><span class="koboSpan" id="kobo.195.1">In this recipe, we will learn how to </span><a id="_idIndexMarker776"/><span class="koboSpan" id="kobo.196.1">connect our Qt 6 application to the </span><span class="No-Break"><span class="koboSpan" id="kobo.197.1">SQL server.</span></span></p>
<h2 id="_idParaDest-250"><a id="_idTextAnchor250"/><span class="koboSpan" id="kobo.198.1">How to do it…</span></h2>
<p><span class="koboSpan" id="kobo.199.1">Connecting to SQL Server in Qt is </span><span class="No-Break"><span class="koboSpan" id="kobo.200.1">really simple:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.201.1">Open Qt Creator and create a new </span><strong class="bold"><span class="koboSpan" id="kobo.202.1">Qt Widgets </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.203.1">Application</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.204.1"> project.</span></span></li>
<li><span class="koboSpan" id="kobo.205.1">Open your project file (</span><strong class="source-inline"><span class="koboSpan" id="kobo.206.1">.pro</span></strong><span class="koboSpan" id="kobo.207.1">), add the </span><strong class="source-inline"><span class="koboSpan" id="kobo.208.1">sql</span></strong><span class="koboSpan" id="kobo.209.1"> module to your project, and run </span><strong class="source-inline"><span class="koboSpan" id="kobo.210.1">qmake</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.211.1">like this:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.212.1">
QT += core gui </span><strong class="bold"><span class="koboSpan" id="kobo.213.1">sql</span></strong></pre></li> <li><span class="koboSpan" id="kobo.214.1">Open </span><strong class="source-inline"><span class="koboSpan" id="kobo.215.1">mainwindow.ui</span></strong><span class="koboSpan" id="kobo.216.1"> and drag seven label widgets, a combo box, and a checkbox to the canvas. </span><span class="koboSpan" id="kobo.216.2">Set the </span><strong class="source-inline"><span class="koboSpan" id="kobo.217.1">text</span></strong><span class="koboSpan" id="kobo.218.1"> properties of four of the labels to </span><strong class="source-inline"><span class="koboSpan" id="kobo.219.1">Name:</span></strong><span class="koboSpan" id="kobo.220.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.221.1">Age:</span></strong><span class="koboSpan" id="kobo.222.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.223.1">Gender:</span></strong><span class="koboSpan" id="kobo.224.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.225.1">Married:</span></strong><span class="koboSpan" id="kobo.226.1">. </span><span class="koboSpan" id="kobo.226.2">Then, set the </span><strong class="source-inline"><span class="koboSpan" id="kobo.227.1">objectName</span></strong><span class="koboSpan" id="kobo.228.1"> properties of the rest to name, age, gender, and married. </span><span class="koboSpan" id="kobo.228.2">There is no need to set the object name for the previous four labels because they’re for display </span><span class="No-Break"><span class="koboSpan" id="kobo.229.1">purposes only:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer194">
<span class="koboSpan" id="kobo.230.1"><img alt="Figure 12.10 –  Setting the text properties" src="image/B20976_12_010.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.231.1">Figure 12.10 –  Setting the text properties</span></p>
<ol>
<li value="4"><span class="koboSpan" id="kobo.232.1">Open </span><strong class="source-inline"><span class="koboSpan" id="kobo.233.1">mainwindow.h</span></strong><span class="koboSpan" id="kobo.234.1"> and add </span><a id="_idIndexMarker777"/><span class="koboSpan" id="kobo.235.1">the following headers below the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.236.1">QMainWindow</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.237.1"> header:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.238.1">
#include &lt;QMainWindow&gt;
</span><strong class="bold"><span class="koboSpan" id="kobo.239.1">#include &lt;QtSql&gt;</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.240.1">#include &lt;QSqlDatabase&gt;</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.241.1">#include &lt;QSqlQuery&gt;</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.242.1">#include &lt;QDebug&gt;</span></strong></pre></li> <li><span class="koboSpan" id="kobo.243.1">Open </span><strong class="source-inline"><span class="koboSpan" id="kobo.244.1">mainwindow.cpp</span></strong><span class="koboSpan" id="kobo.245.1"> and insert the following code into the </span><span class="No-Break"><span class="koboSpan" id="kobo.246.1">class constructor:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.247.1">
MainWindow::MainWindow(QWidget *parent) :
     QMainWindow(parent), ui(new Ui::MainWindow) {
     ui-&gt;setupUi(this);
     </span><strong class="bold"><span class="koboSpan" id="kobo.248.1">QSqlDatabase db = QSqlDatabase::addDatabase("QSQLITE");</span></strong><span class="koboSpan" id="kobo.249.1">
     </span><strong class="bold"><span class="koboSpan" id="kobo.250.1">db.setDatabaseName("database.db3");</span></strong></pre></li> <li><span class="koboSpan" id="kobo.251.1">Start the SQL query once the database connection has </span><span class="No-Break"><span class="koboSpan" id="kobo.252.1">been opened:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.253.1">
     if (db.open()) {
           QSqlQuery query;
           if (query.exec("SELECT emp_name, emp_age, emp_gender, emp_married FROM employee")) {
                 while (query.next()) {
                       qDebug() &lt;&lt; query.value(0) &lt;&lt; query.value(1) &lt;&lt;
query.value(2) &lt;&lt; query.value(3);
                       ui-&gt;name-&gt;setText(query.value(0).toString());
                       ui-&gt;age-&gt;setText(query.value(1).toString());
                       ui-&gt;gender-&gt;setCurrentIndex(query.value(2).toInt());
                       ui-&gt;married-&gt;setChecked(query.value(3).toBool());
                 }
           }</span></pre></li> <li><span class="koboSpan" id="kobo.254.1">Print out any </span><span class="No-Break"><span class="koboSpan" id="kobo.255.1">error </span></span><span class="No-Break"><a id="_idIndexMarker778"/></span><span class="No-Break"><span class="koboSpan" id="kobo.256.1">texts:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.257.1">
           else {
                 qDebug() &lt;&lt; query.lastError().text();
           }
           db.close();
     }
     else {
           qDebug() &lt;&lt; "Failed to connect to database.";
     }
}</span></pre></li> <li><span class="koboSpan" id="kobo.258.1">If you compile and run your</span><a id="_idIndexMarker779"/><span class="koboSpan" id="kobo.259.1"> project now, you should get something </span><span class="No-Break"><span class="koboSpan" id="kobo.260.1">like this:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer195">
<span class="koboSpan" id="kobo.261.1"><img alt="Figure 12.11 – The data from our database is now showing on the Qt program" src="image/B20976_12_011.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.262.1">Figure 12.11 – The data from our database is now showing on the Qt program</span></p>
<h2 id="_idParaDest-251"><a id="_idTextAnchor251"/><span class="koboSpan" id="kobo.263.1">How it works…</span></h2>
<p><span class="koboSpan" id="kobo.264.1">The previous example shows you how to connect to your SQL database using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.265.1">QSqlDatabase</span></strong><span class="koboSpan" id="kobo.266.1"> class derived from the SQL module. </span><span class="koboSpan" id="kobo.266.2">You won’t be able to access any of the classes related to SQL without adding the module to your </span><span class="No-Break"><span class="koboSpan" id="kobo.267.1">Qt project.</span></span></p>
<p><span class="koboSpan" id="kobo.268.1">We must tell Qt which SQL architecture we are running by mentioning it when calling the </span><strong class="source-inline"><span class="koboSpan" id="kobo.269.1">addDatabase()</span></strong><span class="koboSpan" id="kobo.270.1"> function. </span><span class="koboSpan" id="kobo.270.2">The options supported by Qt are </span><strong class="bold"><span class="koboSpan" id="kobo.271.1">QSQLITE</span></strong><span class="koboSpan" id="kobo.272.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.273.1">QODBC</span></strong><span class="koboSpan" id="kobo.274.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.275.1">QODBC3</span></strong><span class="koboSpan" id="kobo.276.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.277.1">QPSQL</span></strong><span class="koboSpan" id="kobo.278.1">, and </span><strong class="bold"><span class="koboSpan" id="kobo.279.1">QPSQL7</span></strong><span class="koboSpan" id="kobo.280.1">. </span><span class="koboSpan" id="kobo.280.2">If you encounter an error message that says </span><strong class="source-inline"><span class="koboSpan" id="kobo.281.1">QSqlDatabase: QMYSQL driver not loaded</span></strong><span class="koboSpan" id="kobo.282.1">, you should check whether the DLL files are placed in the </span><span class="No-Break"><span class="koboSpan" id="kobo.283.1">correct directory.</span></span></p>
<p><span class="koboSpan" id="kobo.284.1">We can send our SQL statements to the database through the </span><strong class="source-inline"><span class="koboSpan" id="kobo.285.1">QSqlQuery</span></strong><span class="koboSpan" id="kobo.286.1"> class and wait for it to return the results, which are usually either the data you requested or error messages due to invalid statements. </span><span class="koboSpan" id="kobo.286.2">If there are any data coming from the database server, they will all be stored in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.287.1">QSqlQuery</span></strong><span class="koboSpan" id="kobo.288.1"> class. </span><span class="koboSpan" id="kobo.288.2">All you need to retrieve these data is to perform a “while” loop on the </span><strong class="source-inline"><span class="koboSpan" id="kobo.289.1">QSqlQuery</span></strong><span class="koboSpan" id="kobo.290.1"> class to check for all existing records and retrieve them by calling the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.291.1">value()</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.292.1"> function.</span></span></p>
<p><span class="koboSpan" id="kobo.293.1">Since we used SQLite in the preceding example, we don’t need to set the server host, username, and password when connecting to the database. </span><span class="koboSpan" id="kobo.293.2">SQLite is a file-based SQL database; therefore, we only need to set the file name when </span><span class="No-Break"><span class="koboSpan" id="kobo.294.1">calling </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.295.1">QSqlDatabase::setDatabaseName()</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.296.1">.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.297.1">Important note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.298.1">Qt 6 no longer officially </span><a id="_idIndexMarker780"/><span class="koboSpan" id="kobo.299.1">supports QMYSQL or QMYSQL3. </span><span class="koboSpan" id="kobo.299.2">You can add MySQL support by re-compiling Qt from the source yourself. </span><span class="koboSpan" id="kobo.299.3">However, this method is not recommended for beginners. </span><span class="koboSpan" id="kobo.299.4">For more information, check </span><span class="No-Break"><span class="koboSpan" id="kobo.300.1">out </span></span><a href="https://doc.qt.io/qt-6/sql-driver.html#compile-qt-with-a-specific-driver"><span class="No-Break"><span class="koboSpan" id="kobo.301.1">https://doc.qt.io/qt-6/sql-driver.html#compile-qt-with-a-specific-driver</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.302.1">.</span></span></p>
<h1 id="_idParaDest-252"><a id="_idTextAnchor252"/><span class="koboSpan" id="kobo.303.1">Writing basic SQL queries</span></h1>
<p><span class="koboSpan" id="kobo.304.1">In the previous example, we </span><a id="_idIndexMarker781"/><span class="koboSpan" id="kobo.305.1">wrote our very first SQL query, which involves the </span><strong class="source-inline"><span class="koboSpan" id="kobo.306.1">SELECT</span></strong><span class="koboSpan" id="kobo.307.1"> statement. </span><span class="koboSpan" id="kobo.307.2">This time, we will learn how to use some other SQL statements, such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.308.1">INSERT</span></strong><span class="koboSpan" id="kobo.309.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.310.1">UPDATE</span></strong><span class="koboSpan" id="kobo.311.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.312.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.313.1">DELETE</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.314.1">.</span></span></p>
<h2 id="_idParaDest-253"><a id="_idTextAnchor253"/><span class="koboSpan" id="kobo.315.1">How to do it…</span></h2>
<p><span class="koboSpan" id="kobo.316.1">Let’s create a simple program that demonstrates basic SQL query commands by following </span><span class="No-Break"><span class="koboSpan" id="kobo.317.1">these steps:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.318.1">We can use our previous project files, but there are a couple of things we need to change. </span><span class="koboSpan" id="kobo.318.2">Open </span><strong class="source-inline"><span class="koboSpan" id="kobo.319.1">mainwindow.ui</span></strong><span class="koboSpan" id="kobo.320.1"> and replace the labels for </span><strong class="bold"><span class="koboSpan" id="kobo.321.1">Name</span></strong><span class="koboSpan" id="kobo.322.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.323.1">Age</span></strong><span class="koboSpan" id="kobo.324.1"> with line-edit widgets. </span><span class="koboSpan" id="kobo.324.2">Then, add three buttons to the canvas and call them </span><strong class="source-inline"><span class="koboSpan" id="kobo.325.1">UPDATE</span></strong><span class="koboSpan" id="kobo.326.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.327.1">INSERT</span></strong><span class="koboSpan" id="kobo.328.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.329.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.330.1">DELETE</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.331.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer196">
<span class="koboSpan" id="kobo.332.1"><img alt="Figure 12.12 – Modify the UI to this" src="image/B20976_12_012.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.333.1">Figure 12.12 – Modify the UI to this</span></p>
<ol>
<li value="2"><span class="koboSpan" id="kobo.334.1">Open </span><strong class="source-inline"><span class="koboSpan" id="kobo.335.1">mainwindow.h</span></strong><span class="koboSpan" id="kobo.336.1"> and add the following variables under the </span><span class="No-Break"><span class="koboSpan" id="kobo.337.1">private inheritance:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.338.1">
private:
     Ui::MainWindow *ui;
     </span><strong class="bold"><span class="koboSpan" id="kobo.339.1">QSqlDatabase db;</span></strong><span class="koboSpan" id="kobo.340.1">
     </span><strong class="bold"><span class="koboSpan" id="kobo.341.1">bool connected;</span></strong><span class="koboSpan" id="kobo.342.1">
     </span><strong class="bold"><span class="koboSpan" id="kobo.343.1">int currentID;</span></strong></pre></li> <li><span class="koboSpan" id="kobo.344.1">Open </span><strong class="source-inline"><span class="koboSpan" id="kobo.345.1">mainwindow.cpp</span></strong><span class="koboSpan" id="kobo.346.1"> and go to the class constructor. </span><span class="koboSpan" id="kobo.346.2">It is still pretty much the same as the previous example, except we store the database connection status in a Boolean </span><a id="_idIndexMarker782"/><span class="koboSpan" id="kobo.347.1">variable called </span><strong class="source-inline"><span class="koboSpan" id="kobo.348.1">connected</span></strong><span class="koboSpan" id="kobo.349.1">, and we also obtain the ID of the data from the database and store it in an integer variable </span><span class="No-Break"><span class="koboSpan" id="kobo.350.1">called </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.351.1">currentID</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.352.1">:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.353.1">
MainWindow::MainWindow(QWidget *parent) :
     QMainWindow(parent), ui(new Ui::MainWindow) {
     ui-&gt;setupUi(this);
     </span><strong class="bold"><span class="koboSpan" id="kobo.354.1">db = QSqlDatabase::addDatabase("QSQLITE");</span></strong><span class="koboSpan" id="kobo.355.1">
     </span><strong class="bold"><span class="koboSpan" id="kobo.356.1">db.setDatabaseName("database.db3");</span></strong><span class="koboSpan" id="kobo.357.1">
     </span><strong class="bold"><span class="koboSpan" id="kobo.358.1">connected = db.open();</span></strong></pre></li> <li><span class="koboSpan" id="kobo.359.1">Let’s make a query after we have connected to </span><span class="No-Break"><span class="koboSpan" id="kobo.360.1">the database:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.361.1">
     if (connected) {
           QSqlQuery query;
           if (query.exec("SELECT emp_id, emp_name, emp_age, emp_gender, emp_married FROM employee")) {
                 while (query.next()) {
                       currentID = query.value(0).toInt();
                       ui-&gt;name-&gt;setText(query.value(1).toString());
                       ui-&gt;age-&gt;setText(query.value(2).toString());
                       ui-&gt;gender-&gt;setCurrentIndex(query.value(3).toInt());
                       ui-&gt;married-&gt;setChecked(query.value(4).toBool());
                 }
           }</span></pre></li> <li><span class="koboSpan" id="kobo.362.1">Print out any </span><span class="No-Break"><span class="koboSpan" id="kobo.363.1">error </span></span><span class="No-Break"><a id="_idIndexMarker783"/></span><span class="No-Break"><span class="koboSpan" id="kobo.364.1">messages:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.365.1">
           else {
                 qDebug() &lt;&lt; query.lastError().text();
           }
     }
     else {
           qDebug() &lt;&lt; "Failed to connect to database.";
     }
}</span></pre></li> <li><span class="koboSpan" id="kobo.366.1">Go to </span><strong class="source-inline"><span class="koboSpan" id="kobo.367.1">mainwindow.ui</span></strong><span class="koboSpan" id="kobo.368.1"> and right-click on one of the buttons we added to the canvas in step 1. </span><span class="koboSpan" id="kobo.368.2">Select </span><strong class="bold"><span class="koboSpan" id="kobo.369.1">Go to slot…</span></strong><span class="koboSpan" id="kobo.370.1"> and click </span><strong class="bold"><span class="koboSpan" id="kobo.371.1">OK</span></strong><span class="koboSpan" id="kobo.372.1">. </span><span class="koboSpan" id="kobo.372.2">Repeat these steps on the other button, and now you should see three slot functions being added to both your </span><strong class="source-inline"><span class="koboSpan" id="kobo.373.1">mainwindow.h</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.374.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.375.1">mainwindow.cpp</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.376.1">:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.377.1">
private slots:
     void on_updateButton_clicked();
     void on_insertButton_clicked();
     void on_deleteButton_clicked();</span></pre></li> <li><span class="koboSpan" id="kobo.378.1">Open </span><strong class="source-inline"><span class="koboSpan" id="kobo.379.1">mainwindow.cpp</span></strong><span class="koboSpan" id="kobo.380.1"> and we will declare what the program will do when we click on the </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.381.1">Update</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.382.1"> button:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.383.1">
void MainWindow::on_updateButton_clicked() {
     if (connected) {
           if (currentID == 0) {
                 qDebug() &lt;&lt; "Nothing to update.";
           }
           else {
                 QString id = QString::number(currentID);
                 QString name = ui-&gt;name-&gt;text();
                 QString age = ui-&gt;age-&gt;text();
                 QString gender =
QString::number(ui-&gt;gender-&gt;currentIndex());
                 QString married =
QString::number(ui-&gt;married-&gt;isChecked());</span></pre></li> <li><span class="koboSpan" id="kobo.384.1">Make an </span><strong class="source-inline"><span class="koboSpan" id="kobo.385.1">UPDATE</span></strong><span class="koboSpan" id="kobo.386.1"> query</span><a id="_idIndexMarker784"/> <span class="No-Break"><span class="koboSpan" id="kobo.387.1">like so:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.388.1">
                 qDebug() &lt;&lt; "UPDATE employee SET emp_name = '" + name + "', emp_age = '" + age + "', emp_gender = " + gender + ", emp_married = " + married + " WHERE emp_id = " + id;
                 QSqlQuery query;
                 if (query.exec("UPDATE employee SET emp_name = '" + name + "', emp_age = '" + age + "', emp_gender = " + gender + ", emp_married = " + married + " WHERE emp_id = " + id)) {
                       qDebug() &lt;&lt; "Update success.";
                 }</span></pre></li> <li><span class="koboSpan" id="kobo.389.1">Print out the last error message, </span><span class="No-Break"><span class="koboSpan" id="kobo.390.1">if any:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.391.1">
                 else {
                       qDebug() &lt;&lt; query.lastError().text();
                 }
           }
     }
     else {
           qDebug() &lt;&lt; "Failed to connect to database.";
     }
}</span></pre></li> <li><span class="koboSpan" id="kobo.392.1">Declare what will </span><a id="_idIndexMarker785"/><span class="koboSpan" id="kobo.393.1">happen when the </span><strong class="bold"><span class="koboSpan" id="kobo.394.1">INSERT</span></strong><span class="koboSpan" id="kobo.395.1"> button </span><span class="No-Break"><span class="koboSpan" id="kobo.396.1">is clicked:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.397.1">
void MainWindow::on_insertButton_clicked() {
     if (connected) {
           QString name = ui-&gt;name-&gt;text();
           QString age = ui-&gt;age-&gt;text();
           QString gender =
QString::number(ui-&gt;gender-&gt;currentIndex());
           QString married =
QString::number(ui-&gt;married-&gt;isChecked());
           qDebug() &lt;&lt; "INSERT INTO employee (emp_name, emp_age, emp_gender, emp_married) VALUES ('" + name + "','" + age + "', " + gender + "," + married + ")";</span></pre></li> <li><span class="koboSpan" id="kobo.398.1">Make an </span><strong class="source-inline"><span class="koboSpan" id="kobo.399.1">INSERT</span></strong><span class="koboSpan" id="kobo.400.1"> query </span><span class="No-Break"><span class="koboSpan" id="kobo.401.1">like so:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.402.1">
           QSqlQuery query;
           if (query.exec("INSERT INTO employee (emp_name, emp_age, emp_gender, emp_married) VALUES ('" + name + "','" + age + "', " + gender + "," + married + ")")) {
                 currentID = query.lastInsertId().toInt();
                 qDebug() &lt;&lt; "Insert success.";
           } else {
                 qDebug() &lt;&lt; query.lastError().text();
           }
     }
     else {
           qDebug() &lt;&lt; "Failed to connect to database.";
     }
}</span></pre></li> <li><span class="koboSpan" id="kobo.403.1">Declare what will</span><a id="_idIndexMarker786"/><span class="koboSpan" id="kobo.404.1"> happen when the </span><strong class="bold"><span class="koboSpan" id="kobo.405.1">Delete</span></strong><span class="koboSpan" id="kobo.406.1"> button </span><span class="No-Break"><span class="koboSpan" id="kobo.407.1">is clicked:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.408.1">
void MainWindow::on_deleteButton_clicked() {
     if (connected) {
           if (currentID == 0) {
                 qDebug() &lt;&lt; "Nothing to delete.";
           } else {
                 QString id = QString::number(currentID);
                 qDebug() &lt;&lt; "DELETE FROM employee WHERE emp_id = " + id;
                 QSqlQuery query;
                 if (query.exec("DELETE FROM employee WHERE emp_id = " + id)) {
                       currentID = 0;
                       qDebug() &lt;&lt; "Delete success.";
                 } else {
                       qDebug() &lt;&lt; query.lastError().text();
                 }
           }
     }
     else {
           qDebug() &lt;&lt; "Failed to connect to database.";
     }
}</span></pre></li> <li><span class="koboSpan" id="kobo.409.1">Call </span><strong class="source-inline"><span class="koboSpan" id="kobo.410.1">QSqlDatabase::close()</span></strong><span class="koboSpan" id="kobo.411.1"> at the class destructor to properly terminate the SQL connection </span><a id="_idIndexMarker787"/><span class="koboSpan" id="kobo.412.1">before exiting </span><span class="No-Break"><span class="koboSpan" id="kobo.413.1">the program:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.414.1">
MainWindow::~MainWindow() {
     db.close();
     delete ui;
}</span></pre></li> <li><span class="koboSpan" id="kobo.415.1">If you compile and run the program now, you should be able to select the default data from the database. </span><span class="koboSpan" id="kobo.415.2">Then, you can choose to update it or delete it from the database. </span><span class="koboSpan" id="kobo.415.3">You can also insert new data into the database by clicking the Insert button. </span><span class="koboSpan" id="kobo.415.4">You can use </span><strong class="bold"><span class="koboSpan" id="kobo.416.1">SQLiteStudio</span></strong><span class="koboSpan" id="kobo.417.1"> to check whether the data are being </span><span class="No-Break"><span class="koboSpan" id="kobo.418.1">altered correctly:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer197">
<span class="koboSpan" id="kobo.419.1"><img alt="Figure 12.13 – Data successfully modified in SQLite" src="image/B20976_12_013.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.420.1">Figure 12.13 – Data successfully modified in SQLite</span></p>
<h2 id="_idParaDest-254"><a id="_idTextAnchor254"/><span class="koboSpan" id="kobo.421.1">How it works…</span></h2>
<p><span class="koboSpan" id="kobo.422.1">It’s very important to check whether the database is connected before we proceed to send an SQL query to the database. </span><span class="koboSpan" id="kobo.422.2">Therefore, we keep that status in a variable and use it to check before sending out any queries. </span><span class="koboSpan" id="kobo.422.3">This, however, is not recommended for complex programs that are kept </span><a id="_idIndexMarker788"/><span class="koboSpan" id="kobo.423.1">open for long periods of time, as the database might get disconnected during those periods, and a fixed variable may not be accurate. </span><span class="koboSpan" id="kobo.423.2">In that case, it’s better to check the actual status by </span><span class="No-Break"><span class="koboSpan" id="kobo.424.1">calling </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.425.1">QSqlDatabase::isOpen()</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.426.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.427.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.428.1">currentID</span></strong><span class="koboSpan" id="kobo.429.1"> variable is used to save the ID of the current data you obtained from the database. </span><span class="koboSpan" id="kobo.429.2">When you want to update the data or delete them from the database, this variable is crucial for letting the database know what data you’re trying to update or delete. </span><span class="koboSpan" id="kobo.429.3">If you set your database table correctly, SQLite will treat each item of data as a unique entry, so you can be sure that no repeated ID will be produced in the database when new data are </span><span class="No-Break"><span class="koboSpan" id="kobo.430.1">being saved.</span></span></p>
<p><span class="koboSpan" id="kobo.431.1">After inserting new data into the database, we call </span><strong class="source-inline"><span class="koboSpan" id="kobo.432.1">QSqlQuery::lastInsertId()</span></strong><span class="koboSpan" id="kobo.433.1"> to obtain the ID of the new data and save it as a </span><strong class="source-inline"><span class="koboSpan" id="kobo.434.1">currentID</span></strong><span class="koboSpan" id="kobo.435.1"> variable so that it becomes the current data that we can update or delete from the database. </span><span class="koboSpan" id="kobo.435.2">It is a good habit to test your SQL queries on </span><strong class="source-inline"><span class="koboSpan" id="kobo.436.1">SQLiteStudio</span></strong><span class="koboSpan" id="kobo.437.1"> before using them in Qt. </span><span class="koboSpan" id="kobo.437.2">You can instantly find out whether your SQL statements are correct or incorrect instead of waiting for your project to be built, trying it out, and then rebuilding it. </span><span class="koboSpan" id="kobo.437.3">As programmers, we must work in the most </span><span class="No-Break"><span class="koboSpan" id="kobo.438.1">efficient way.</span></span></p>
<p><span class="koboSpan" id="kobo.439.1">Work hard and </span><span class="No-Break"><span class="koboSpan" id="kobo.440.1">work smart.</span></span></p>
<h1 id="_idParaDest-255"><a id="_idTextAnchor255"/><span class="koboSpan" id="kobo.441.1">Creating a login screen with Qt</span></h1>
<p><span class="koboSpan" id="kobo.442.1">In this recipe, we will learn </span><a id="_idIndexMarker789"/><span class="koboSpan" id="kobo.443.1">how put our knowledge to use and create a</span><a id="_idIndexMarker790"/><span class="koboSpan" id="kobo.444.1"> functional login screen using Qt </span><span class="No-Break"><span class="koboSpan" id="kobo.445.1">and SQLite.</span></span></p>
<h2 id="_idParaDest-256"><a id="_idTextAnchor256"/><span class="koboSpan" id="kobo.446.1">How to do it…</span></h2>
<p><span class="koboSpan" id="kobo.447.1">Create your first functional login screen by following </span><span class="No-Break"><span class="koboSpan" id="kobo.448.1">these steps:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.449.1">Open a web browser and go to </span><strong class="bold"><span class="koboSpan" id="kobo.450.1">SQLiteStudio</span></strong><span class="koboSpan" id="kobo.451.1">. </span><span class="koboSpan" id="kobo.451.2">We will create a new data table called </span><strong class="source-inline"><span class="koboSpan" id="kobo.452.1">user</span></strong><span class="koboSpan" id="kobo.453.1">, which looks </span><span class="No-Break"><span class="koboSpan" id="kobo.454.1">like this:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer198">
<span class="koboSpan" id="kobo.455.1"><img alt="Figure 12.14 – Create a new user table" src="image/B20976_12_014.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.456.1">Figure 12.14 – Create a new user table</span></p>
<ol>
<li value="2"><span class="koboSpan" id="kobo.457.1">Let’s insert our first item of data into the newly created table and set </span><strong class="source-inline"><span class="koboSpan" id="kobo.458.1">user_employeeID</span></strong><span class="koboSpan" id="kobo.459.1"> to the ID of an existing employee. </span><span class="koboSpan" id="kobo.459.2">In this way, the user account we create will be linked to the data of one of </span><span class="No-Break"><span class="koboSpan" id="kobo.460.1">the employees:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer199">
<span class="koboSpan" id="kobo.461.1"><img alt="Figure 12.15 – The user_employeeID column is linked to the employee’s emp_id column" src="image/B20976_12_015.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.462.1">Figure 12.15 – The user_employeeID column is linked to the employee’s emp_id column</span></p>
<ol>
<li value="3"><span class="koboSpan" id="kobo.463.1">Open </span><strong class="bold"><span class="koboSpan" id="kobo.464.1">Qt Creator</span></strong><span class="koboSpan" id="kobo.465.1"> and create a new </span><strong class="bold"><span class="koboSpan" id="kobo.466.1">Qt Widgets Application</span></strong><span class="koboSpan" id="kobo.467.1"> project. </span><span class="koboSpan" id="kobo.467.2">We will start off with </span><strong class="source-inline"><span class="koboSpan" id="kobo.468.1">mainwindow.ui</span></strong><span class="koboSpan" id="kobo.469.1">. </span><span class="koboSpan" id="kobo.469.2">Place a</span><a id="_idIndexMarker791"/><span class="koboSpan" id="kobo.470.1"> stacked widget on the canvas and make sure it contains </span><a id="_idIndexMarker792"/><span class="koboSpan" id="kobo.471.1">two pages. </span><span class="koboSpan" id="kobo.471.2">Then, set up the two pages in the stacked widget </span><span class="No-Break"><span class="koboSpan" id="kobo.472.1">as follows:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer200">
<span class="koboSpan" id="kobo.473.1"><img alt="Figure 12.16 – Create a two-page UI inside a stacked widget" src="image/B20976_12_016.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.474.1">Figure 12.16 – Create a two-page UI inside a stacked widget</span></p>
<ol>
<li value="4"><span class="koboSpan" id="kobo.475.1">On the first page of the stacked widget, click the </span><strong class="bold"><span class="koboSpan" id="kobo.476.1">Edit Tab Order</span></strong><span class="koboSpan" id="kobo.477.1"> icon on top of the widget so that you can adjust the order of the widgets in </span><span class="No-Break"><span class="koboSpan" id="kobo.478.1">your program:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer201">
<span class="koboSpan" id="kobo.479.1"><img alt="Figure 12.17 – Change the order of the widgets by pressing this button" src="image/B20976_12_017.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.480.1">Figure 12.17 – Change the order of the widgets by pressing this button</span></p>
<ol>
<li value="5"><span class="koboSpan" id="kobo.481.1">Once you click the </span><strong class="bold"><span class="koboSpan" id="kobo.482.1">Edit Tab Order</span></strong><span class="koboSpan" id="kobo.483.1"> icon, you will see some numbers appear on top of each widget in the canvas. </span><span class="koboSpan" id="kobo.483.2">Make sure the numbers look the same as they do in the screenshot that follows. </span><span class="koboSpan" id="kobo.483.3">Otherwise, click </span><a id="_idIndexMarker793"/><span class="koboSpan" id="kobo.484.1">on the numbers to change their order. </span><span class="koboSpan" id="kobo.484.2">We only do this for </span><a id="_idIndexMarker794"/><span class="koboSpan" id="kobo.485.1">the first page of the stacked widget; it’s okay to keep the second page as </span><span class="No-Break"><span class="koboSpan" id="kobo.486.1">it is:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer202">
<span class="koboSpan" id="kobo.487.1"><img alt="Figure 12.18 – The order of each widget is shown" src="image/B20976_12_018.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.488.1">Figure 12.18 – The order of each widget is shown</span></p>
<ol>
<li value="6"><span class="koboSpan" id="kobo.489.1">Right-click on the </span><strong class="bold"><span class="koboSpan" id="kobo.490.1">Login</span></strong><span class="koboSpan" id="kobo.491.1"> button and select </span><strong class="bold"><span class="koboSpan" id="kobo.492.1">Go to slot…</span></strong><span class="koboSpan" id="kobo.493.1">. </span><span class="koboSpan" id="kobo.493.2">Then, make sure the </span><strong class="source-inline"><span class="koboSpan" id="kobo.494.1">clicked()</span></strong><span class="koboSpan" id="kobo.495.1"> option is selected and press </span><strong class="bold"><span class="koboSpan" id="kobo.496.1">OK</span></strong><span class="koboSpan" id="kobo.497.1">. </span><span class="koboSpan" id="kobo.497.2">Qt will then create a slot function for you in your project source files. </span><span class="koboSpan" id="kobo.497.3">Repeat this step for the </span><strong class="bold"><span class="koboSpan" id="kobo.498.1">Log Out</span></strong><span class="koboSpan" id="kobo.499.1"> button </span><span class="No-Break"><span class="koboSpan" id="kobo.500.1">as well.</span></span></li>
<li><span class="koboSpan" id="kobo.501.1">Open </span><strong class="source-inline"><span class="koboSpan" id="kobo.502.1">mainwindow.h</span></strong><span class="koboSpan" id="kobo.503.1"> and add the following headers after the </span><strong class="source-inline"><span class="koboSpan" id="kobo.504.1">#include &lt;</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.505.1">QMainWindow&gt;</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.506.1"> line:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.507.1">
#include &lt;QMainWindow&gt;
</span><strong class="bold"><span class="koboSpan" id="kobo.508.1">#include &lt;QtSql&gt;</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.509.1">#include &lt;QSqlDatabase&gt;</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.510.1">#include &lt;QSqlQuery&gt;</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.511.1">#include &lt;QMessageBox&gt;</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.512.1">#include &lt;QDebug&gt;</span></strong></pre></li> <li><span class="koboSpan" id="kobo.513.1">Add the following variable </span><span class="No-Break"><span class="koboSpan" id="kobo.514.1">to </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.515.1">mainwindow.h</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.516.1">:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.517.1">
private:
     Ui::MainWindow *ui;
     QSqlDatabase db;</span></pre></li> <li><span class="koboSpan" id="kobo.518.1">Open </span><strong class="source-inline"><span class="koboSpan" id="kobo.519.1">mainwindow.cpp</span></strong><span class="koboSpan" id="kobo.520.1"> and </span><a id="_idIndexMarker795"/><span class="koboSpan" id="kobo.521.1">put this code in the </span><span class="No-Break"><span class="koboSpan" id="kobo.522.1">class constructor:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.523.1">
MainWindow::MainWindow(QWidget *parent) :
     QMainWindow(parent),
     ui(new Ui::MainWindow) {
     ui-&gt;setupUi(this);
     </span><strong class="bold"><span class="koboSpan" id="kobo.524.1">ui-&gt;stackedWidget-&gt;setCurrentIndex(0);</span></strong><span class="koboSpan" id="kobo.525.1">
     </span><strong class="bold"><span class="koboSpan" id="kobo.526.1">db = QSqlDatabase::addDatabase("QSQLITE");</span></strong><span class="koboSpan" id="kobo.527.1">
     </span><strong class="bold"><span class="koboSpan" id="kobo.528.1">db.setDatabaseName("database.db3");</span></strong><span class="koboSpan" id="kobo.529.1">
     </span><strong class="bold"><span class="koboSpan" id="kobo.530.1">if (!db.open()) {</span></strong><span class="koboSpan" id="kobo.531.1">
           </span><strong class="bold"><span class="koboSpan" id="kobo.532.1">qDebug() &lt;&lt; "Failed to connect to database.";</span></strong><span class="koboSpan" id="kobo.533.1">
     </span><strong class="bold"><span class="koboSpan" id="kobo.534.1">}</span></strong><span class="koboSpan" id="kobo.535.1">
}</span></pre></li> <li><span class="koboSpan" id="kobo.536.1">Define what will</span><a id="_idIndexMarker796"/><span class="koboSpan" id="kobo.537.1"> happen if the </span><strong class="source-inline"><span class="koboSpan" id="kobo.538.1">Login</span></strong><span class="koboSpan" id="kobo.539.1"> button </span><span class="No-Break"><span class="koboSpan" id="kobo.540.1">is clicked:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.541.1">
void MainWindow::on_loginButton_clicked() {
     QString username = ui-&gt;username-&gt;text();
     QString password = ui-&gt;password-&gt;text();
     QSqlQuery query;
     if (query.exec("SELECT user_employeeID from user WHERE user_username = '" + username + "' AND user_password = '" + password + "'")) {
           int resultSize = 0;
           while (query.next()) {
                 QString employeeID = query.value(0).toString();
                 QSqlQuery query2;</span></pre></li> <li><span class="koboSpan" id="kobo.542.1">Make a </span><span class="No-Break"><span class="koboSpan" id="kobo.543.1">SQL </span></span><span class="No-Break"><a id="_idIndexMarker797"/></span><span class="No-Break"><span class="koboSpan" id="kobo.544.1">query:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.545.1">
                 if (query2.exec("SELECT emp_name, emp_age, emp_gender, emp_married FROM employee WHERE emp_id = " + employeeID)) {
                       while (query2.next()) {
                             QString name = query2.value(0).toString();
                             QString age = query2.value(1).toString();
                             int gender = query2.value(2).toInt();
                             bool married = query2.value(3).toBool();
                             ui-&gt;name-&gt;setText(name);
                             ui-&gt;age-&gt;setText(age);</span></pre></li> <li><span class="koboSpan" id="kobo.546.1">We continue with</span><a id="_idIndexMarker798"/><span class="koboSpan" id="kobo.547.1"> the preceding code, and we set the gender and married texts before switching the stacked widget to its </span><span class="No-Break"><span class="koboSpan" id="kobo.548.1">second page:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.549.1">
                             if (gender == 0)
                                   ui-&gt;gender-&gt;setText("Male");
                             else
                                   ui-&gt;gender-&gt;setText("Female");
                             if (married)
                                   ui-&gt;married-&gt;setText("Yes");
                             else
                                   ui-&gt;married-&gt;setText("No");
                             ui-&gt;stackedWidget-&gt;setCurrentIndex(1);
                       }
                 }
                 resultSize++;
           }</span></pre></li> <li><span class="koboSpan" id="kobo.550.1">Print an error </span><a id="_idIndexMarker799"/><span class="koboSpan" id="kobo.551.1">message if the</span><a id="_idIndexMarker800"/> <span class="No-Break"><span class="koboSpan" id="kobo.552.1">login fails:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.553.1">
           if (resultSize == 0)
           {
                 QMessageBox::warning(this, "Login failed", "Invalid username or password.");
           }
     }
     else
     {
           qDebug() &lt;&lt; query.lastError().text();
     }
}</span></pre></li> <li><span class="koboSpan" id="kobo.554.1">Define what will happen</span><a id="_idIndexMarker801"/><span class="koboSpan" id="kobo.555.1"> if the </span><strong class="bold"><span class="koboSpan" id="kobo.556.1">Log Out</span></strong><span class="koboSpan" id="kobo.557.1"> button </span><span class="No-Break"><span class="koboSpan" id="kobo.558.1">is clicked:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.559.1">
void MainWindow::on_logoutButton_clicked() {
     ui-&gt;stackedWidget-&gt;setCurrentIndex(0);
}</span></pre></li> <li><span class="koboSpan" id="kobo.560.1">Close the database</span><a id="_idIndexMarker802"/><span class="koboSpan" id="kobo.561.1"> when the main window </span><span class="No-Break"><span class="koboSpan" id="kobo.562.1">is closed:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.563.1">
MainWindow::~MainWindow() {
     db.close();
     delete ui;
}</span></pre></li> <li><span class="koboSpan" id="kobo.564.1">Compile and run the program, and you should be able to log in with the dummy account. </span><span class="koboSpan" id="kobo.564.2">After you have logged in, you should be able to see the dummy employee information linked to the user account. </span><span class="koboSpan" id="kobo.564.3">You can also log out by clicking on the </span><strong class="bold"><span class="koboSpan" id="kobo.565.1">Log </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.566.1">Out</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.567.1"> button:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer203">
<span class="koboSpan" id="kobo.568.1"><img alt="Figure 12.19 – A simple, working login screen" src="image/B20976_12_019.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.569.1">Figure 12.19 – A simple, working login screen</span></p>
<h2 id="_idParaDest-257"><a id="_idTextAnchor257"/><span class="koboSpan" id="kobo.570.1">How it works…</span></h2>
<p><span class="koboSpan" id="kobo.571.1">In this example, we select data from the user table that matches the username and password that we inserted into the text fields. </span><span class="koboSpan" id="kobo.571.2">If nothing is found, it means we have provided an invalid username </span><a id="_idIndexMarker803"/><span class="koboSpan" id="kobo.572.1">or password. </span><span class="koboSpan" id="kobo.572.2">Otherwise, obtain the </span><strong class="source-inline"><span class="koboSpan" id="kobo.573.1">user_employeeID</span></strong><span class="koboSpan" id="kobo.574.1"> data from the user account </span><a id="_idIndexMarker804"/><span class="koboSpan" id="kobo.575.1">and do another SQL query to look for information from the </span><strong class="source-inline"><span class="koboSpan" id="kobo.576.1">employee</span></strong><span class="koboSpan" id="kobo.577.1"> table that matches the </span><strong class="source-inline"><span class="koboSpan" id="kobo.578.1">user_employeeID</span></strong><span class="koboSpan" id="kobo.579.1"> variable. </span><span class="koboSpan" id="kobo.579.2">Then, display the data according to the UI of </span><span class="No-Break"><span class="koboSpan" id="kobo.580.1">your program.</span></span></p>
<p><span class="koboSpan" id="kobo.581.1">We must set the widget order in the </span><strong class="bold"><span class="koboSpan" id="kobo.582.1">Edit Tab Order</span></strong><span class="koboSpan" id="kobo.583.1"> mode so that when the program has started, the first widget that gets focused on is the username line-edit widget. </span><span class="koboSpan" id="kobo.583.2">If the user presses the </span><em class="italic"><span class="koboSpan" id="kobo.584.1">Tab</span></em><span class="koboSpan" id="kobo.585.1"> key on the keyboard, the focus should switch to the second widget, which is the password line edit. </span><span class="koboSpan" id="kobo.585.2">An incorrect widget order will ruin the user experience and drive away any potential users. </span><span class="koboSpan" id="kobo.585.3">Make sure that the </span><strong class="bold"><span class="koboSpan" id="kobo.586.1">echoMode</span></strong><span class="koboSpan" id="kobo.587.1"> option of the password line edit is set to </span><strong class="bold"><span class="koboSpan" id="kobo.588.1">Password</span></strong><span class="koboSpan" id="kobo.589.1">. </span><span class="koboSpan" id="kobo.589.2">That setting will hide the actual password inserted into the line edit and replace it with dot symbols for </span><span class="No-Break"><span class="koboSpan" id="kobo.590.1">security purposes.</span></span></p>
<p><span class="koboSpan" id="kobo.591.1">Since SQLite does not support returning the query size, we cannot use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.592.1">QSqlQuery::size()</span></strong><span class="koboSpan" id="kobo.593.1"> function to determine how many results are being returned; the result will always be -</span><strong class="source-inline"><span class="koboSpan" id="kobo.594.1">1</span></strong><span class="koboSpan" id="kobo.595.1">. </span><span class="koboSpan" id="kobo.595.2">Therefore, we declared a </span><strong class="source-inline"><span class="koboSpan" id="kobo.596.1">resultSize</span></strong><span class="koboSpan" id="kobo.597.1"> variable to count the result within the while </span><span class="No-Break"><span class="koboSpan" id="kobo.598.1">loop operation.</span></span></p>
<h1 id="_idParaDest-258"><a id="_idTextAnchor258"/><span class="koboSpan" id="kobo.599.1">Displaying information from a database in model view</span></h1>
<p><span class="koboSpan" id="kobo.600.1">Follow these steps to display </span><a id="_idIndexMarker805"/><span class="koboSpan" id="kobo.601.1">information from a database on a model </span><span class="No-Break"><span class="koboSpan" id="kobo.602.1">view widget:</span></span></p>
<h2 id="_idParaDest-259"><a id="_idTextAnchor259"/><span class="koboSpan" id="kobo.603.1">How to do it…</span></h2>
<p><span class="koboSpan" id="kobo.604.1">In this recipe, we will learn how to display multiple sets of data obtained from our SQL database in a model view in </span><span class="No-Break"><span class="koboSpan" id="kobo.605.1">our program:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.606.1">We will be using the database table called </span><strong class="source-inline"><span class="koboSpan" id="kobo.607.1">employee</span></strong><span class="koboSpan" id="kobo.608.1">, which we used in the previous example in </span><em class="italic"><span class="koboSpan" id="kobo.609.1">Creating a login screen with Qt</span></em><span class="koboSpan" id="kobo.610.1">. </span><span class="koboSpan" id="kobo.610.2">This time, we need a lot more data in the employee table. </span><span class="koboSpan" id="kobo.610.3">Open up your </span><strong class="bold"><span class="koboSpan" id="kobo.611.1">SQLiteStudio</span></strong><span class="koboSpan" id="kobo.612.1"> control panel. </span><span class="koboSpan" id="kobo.612.2">Add data for a few more employees so that we can display it later in </span><span class="No-Break"><span class="koboSpan" id="kobo.613.1">our program:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer204">
<span class="koboSpan" id="kobo.614.1"><img alt="Figure 12.20 – Add more dummy data to the employee table" src="image/B20976_12_020.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.615.1">Figure 12.20 – Add more dummy data to the employee table</span></p>
<ol>
<li value="2"><span class="koboSpan" id="kobo.616.1">Open Qt Creator, create a new </span><strong class="bold"><span class="koboSpan" id="kobo.617.1">Qt Widgets Application</span></strong><span class="koboSpan" id="kobo.618.1"> project, and then add the </span><strong class="bold"><span class="koboSpan" id="kobo.619.1">SQL</span></strong><span class="koboSpan" id="kobo.620.1"> module to </span><span class="No-Break"><span class="koboSpan" id="kobo.621.1">your project.</span></span></li>
<li><span class="koboSpan" id="kobo.622.1">Open </span><strong class="source-inline"><span class="koboSpan" id="kobo.623.1">mainwindow.ui</span></strong><span class="koboSpan" id="kobo.624.1"> and add a table widget (not a table view) from </span><strong class="bold"><span class="koboSpan" id="kobo.625.1">Item Widget</span></strong><span class="koboSpan" id="kobo.626.1"> (item-based) under the </span><strong class="bold"><span class="koboSpan" id="kobo.627.1">Widget</span></strong><span class="koboSpan" id="kobo.628.1"> box pane. </span><span class="koboSpan" id="kobo.628.2">Select the main window on the canvas and click on </span><a id="_idIndexMarker806"/><span class="koboSpan" id="kobo.629.1">either the </span><strong class="bold"><span class="koboSpan" id="kobo.630.1">Lay Out Vertically</span></strong><span class="koboSpan" id="kobo.631.1"> or </span><strong class="bold"><span class="koboSpan" id="kobo.632.1">Lay Out Horizontally</span></strong><span class="koboSpan" id="kobo.633.1"> button to make the table widget stick to the size of the main window even when </span><span class="No-Break"><span class="koboSpan" id="kobo.634.1">it’s resized:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer205">
<span class="koboSpan" id="kobo.635.1"><img alt="Figure 12.21 – Click on the Lay Out Vertically button" src="image/B20976_12_021.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.636.1">Figure 12.21 – Click on the Lay Out Vertically button</span></p>
<ol>
<li value="4"><span class="koboSpan" id="kobo.637.1">Double-click on the table widget and a window will appear. </span><span class="koboSpan" id="kobo.637.2">Under the </span><strong class="bold"><span class="koboSpan" id="kobo.638.1">Columns</span></strong><span class="koboSpan" id="kobo.639.1"> tab, add five items by clicking on the </span><strong class="bold"><span class="koboSpan" id="kobo.640.1">+</span></strong><span class="koboSpan" id="kobo.641.1"> button in the top-left corner. </span><span class="koboSpan" id="kobo.641.2">Name the items </span><strong class="bold"><span class="koboSpan" id="kobo.642.1">ID</span></strong><span class="koboSpan" id="kobo.643.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.644.1">Name</span></strong><span class="koboSpan" id="kobo.645.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.646.1">Age</span></strong><span class="koboSpan" id="kobo.647.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.648.1">Gender</span></strong><span class="koboSpan" id="kobo.649.1">, and </span><strong class="bold"><span class="koboSpan" id="kobo.650.1">Married</span></strong><span class="koboSpan" id="kobo.651.1">. </span><span class="koboSpan" id="kobo.651.2">Click </span><strong class="bold"><span class="koboSpan" id="kobo.652.1">OK</span></strong><span class="koboSpan" id="kobo.653.1"> when </span><span class="No-Break"><span class="koboSpan" id="kobo.654.1">you’re done:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer206">
<span class="koboSpan" id="kobo.655.1"><img alt="Figure 12.22 – We also set the text alignment to center" src="image/B20976_12_022.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.656.1">Figure 12.22 – We also set the text alignment to center</span></p>
<ol>
<li value="5"><span class="koboSpan" id="kobo.657.1">Right-click on the table widget and select </span><strong class="bold"><span class="koboSpan" id="kobo.658.1">Go to slot…</span></strong><span class="koboSpan" id="kobo.659.1"> in the pop-up menu. </span><span class="koboSpan" id="kobo.659.2">Scroll all the way down, select the </span><strong class="source-inline"><span class="koboSpan" id="kobo.660.1">itemChanged(QTableWidgetItem*)</span></strong><span class="koboSpan" id="kobo.661.1"> option in the pop-up </span><a id="_idIndexMarker807"/><span class="koboSpan" id="kobo.662.1">window, and press </span><strong class="bold"><span class="koboSpan" id="kobo.663.1">OK</span></strong><span class="koboSpan" id="kobo.664.1">. </span><span class="koboSpan" id="kobo.664.2">A slot function will be created in both of your </span><span class="No-Break"><span class="koboSpan" id="kobo.665.1">source files.</span></span></li>
<li><span class="koboSpan" id="kobo.666.1">Open </span><strong class="source-inline"><span class="koboSpan" id="kobo.667.1">mainwindow.h</span></strong><span class="koboSpan" id="kobo.668.1"> and add these private variables to the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.669.1">MainWindow</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.670.1"> class:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.671.1">
private:
     Ui::MainWindow *ui;
     </span><strong class="bold"><span class="koboSpan" id="kobo.672.1">bool hasInit;</span></strong><span class="koboSpan" id="kobo.673.1">
     </span><strong class="bold"><span class="koboSpan" id="kobo.674.1">QSqlDatabase db;</span></strong></pre></li> <li><span class="koboSpan" id="kobo.675.1">Add the following class headers </span><span class="No-Break"><span class="koboSpan" id="kobo.676.1">to </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.677.1">mainwindow.h</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.678.1">:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.679.1">
#include &lt;QtSql&gt;
#include &lt;QSqlDatabase&gt;
#include &lt;QSqlQuery&gt;
#include &lt;QMessageBox&gt;
#include &lt;QDebug&gt;
#include &lt;QTableWidgetItem&gt;</span></pre></li> <li><span class="koboSpan" id="kobo.680.1">Open </span><strong class="source-inline"><span class="koboSpan" id="kobo.681.1">mainwindow.cpp</span></strong><span class="koboSpan" id="kobo.682.1">; we’re going to write tons of code there. </span><span class="koboSpan" id="kobo.682.2">We need to declare what will happen when the program is started. </span><span class="koboSpan" id="kobo.682.3">Add the following code to the constructor </span><a id="_idIndexMarker808"/><span class="koboSpan" id="kobo.683.1">of the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.684.1">MainWindow</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.685.1"> class:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.686.1">
MainWindow::MainWindow(QWidget *parent) :
     QMainWindow(parent),
     ui(new Ui::MainWindow)
{
     </span><strong class="bold"><span class="koboSpan" id="kobo.687.1">hasInit = false;</span></strong><span class="koboSpan" id="kobo.688.1">
     ui-&gt;setupUi(this);
     </span><strong class="bold"><span class="koboSpan" id="kobo.689.1">db = QSqlDatabase::addDatabase("QSQLITE");</span></strong><span class="koboSpan" id="kobo.690.1">
     </span><strong class="bold"><span class="koboSpan" id="kobo.691.1">db.setDatabaseName("database.db3");</span></strong><span class="koboSpan" id="kobo.692.1">
     </span><strong class="bold"><span class="koboSpan" id="kobo.693.1">ui-&gt;tableWidget-&gt;setColumnHidden(0, true);</span></strong></pre></li> <li><span class="koboSpan" id="kobo.694.1">The SQL query code looks </span><span class="No-Break"><span class="koboSpan" id="kobo.695.1">like this:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.696.1">
     if (db.open()) {
           QSqlQuery query;
           if (query.exec("SELECT emp_id, emp_name, emp_age, emp_gender, emp_married FROM employee")) {
                 while (query.next()) {
                       qDebug() &lt;&lt; query.value(0) &lt;&lt; query.value(1) &lt;&lt; query.value(2) &lt;&lt; query.value(3) &lt;&lt; query.value(4);
                       QString id = query.value(0).toString();
                       QString name = query.value(1).toString();
                       QString age = query.value(2).toString();
                       int gender = query.value(3).toInt();
                       bool married = query.value(4).toBool();</span></pre></li> <li><span class="koboSpan" id="kobo.697.1">Create </span><a id="_idIndexMarker809"/><span class="koboSpan" id="kobo.698.1">several </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.699.1">QTableWidgetItem</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.700.1"> objects:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.701.1">
                       ui-&gt;tableWidget-&gt;setRowCount(ui-&gt;tableWidget-&gt;rowCount() + 1);
                       QTableWidgetItem* idItem = new QTableWidgetItem(id);
                       QTableWidgetItem* nameItem = new QTableWidgetItem(name);
                       QTableWidgetItem* ageItem = new QTableWidgetItem(age);
                       QTableWidgetItem* genderItem = new QTableWidgetItem();
                       if (gender == 0)
                             genderItem-&gt;setData(0, "Male");
                       else
                             genderItem-&gt;setData(0, "Female");
                       QTableWidgetItem* marriedItem = new QTableWidgetItem();
                       if (married)
                             marriedItem-&gt;setData(0, "Yes");
                       else
                             marriedItem-&gt;setData(0, "No");</span></pre></li> <li><span class="koboSpan" id="kobo.702.1">Move those </span><a id="_idIndexMarker810"/><span class="koboSpan" id="kobo.703.1">objects to the </span><span class="No-Break"><span class="koboSpan" id="kobo.704.1">table widget:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.705.1">
                       ui-&gt;tableWidget-&gt;setItem(ui-&gt;tableWidget-&gt;rowCount() - 1, 0, idItem);
                       ui-&gt;tableWidget-&gt;setItem(ui-&gt;tableWidget-&gt;rowCount() - 1, 1, nameItem);
                       ui-&gt;tableWidget-&gt;setItem(ui-&gt;tableWidget-&gt;rowCount() - 1, 2, ageItem);
                       ui-&gt;tableWidget-&gt;setItem(ui-&gt;tableWidget-&gt;rowCount() - 1, 3, genderItem);
                       ui-&gt;tableWidget-&gt;setItem(ui-&gt;tableWidget-&gt;rowCount() - 1, 4, marriedItem);
                 }
                 hasInit = true;
           }
           else {
                 qDebug() &lt;&lt; query.lastError().text();
           }
     }
     else {
           qDebug() &lt;&lt; "Failed to connect to database.";
     }
}</span></pre></li> <li><span class="koboSpan" id="kobo.706.1">Declare what will happen when an item of the table widget has been edited. </span><span class="koboSpan" id="kobo.706.2">Add the</span><a id="_idIndexMarker811"/><span class="koboSpan" id="kobo.707.1"> following code to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.708.1">on_tableWidget_itemChanged()</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.709.1">slot function:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.710.1">
void MainWindow::on_tableWidget_itemChanged(QTableWidgetItem *item) {
     if (hasInit) {
           QString id = ui-&gt;tableWidget-&gt;item(item-&gt;row(), 0)-&gt;data(0).toString();
           QString name = ui-&gt;tableWidget-&gt;item(item-&gt;row(), 1)-&gt;data(0).toString();
           QString age = QString::number(ui-&gt;tableWidget-&gt;item(item-&gt;row(), 2)-&gt;data(0).toInt());
           ui-&gt;tableWidget-&gt;item(item-&gt;row(), 2)-&gt;setData(0, age);
           QString gender;
           if (ui-&gt;tableWidget-&gt;item(item-&gt;row(), 3)-&gt;data(0).toString() == "Male") {
                 gender = "0";
           } else {
                 ui-&gt;tableWidget-&gt;item(item-&gt;row(), 3)-&gt;setData(0,"Female");
                 gender = "1";
           }
           QString married;
           if (ui-&gt;tableWidget-&gt;item(item-&gt;row(), 4)-&gt;data(0).toString() == "No") {
                 married = "0";
           } else {
                 ui-&gt;tableWidget-&gt;item(item-&gt;row(), 4)-&gt;setData(0, "Yes");
                 married = "1";
           }
           qDebug() &lt;&lt; id &lt;&lt; name &lt;&lt; age &lt;&lt; gender &lt;&lt; married;
           QSqlQuery query;
           if (query.exec("UPDATE employee SET emp_name = '" + name + "', emp_age = '" + age + "', emp_gender = '" + gender + "', emp_married = '" + married + "' WHERE emp_id = " + id)) {
                 QMessageBox::information(this, "Update Success", "Data updated to database.");
           } else {
                 qDebug() &lt;&lt; query.lastError().text();
           }
     }
}</span></pre></li> <li><span class="koboSpan" id="kobo.711.1">Close the </span><a id="_idIndexMarker812"/><span class="koboSpan" id="kobo.712.1">database at the </span><span class="No-Break"><span class="koboSpan" id="kobo.713.1">class destructor:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.714.1">
MainWindow::~MainWindow() {
     db.close();
     delete ui;
}</span></pre></li> <li><span class="koboSpan" id="kobo.715.1">If you compile and run the example now, you should get something </span><span class="No-Break"><span class="koboSpan" id="kobo.716.1">like this:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer207">
<span class="koboSpan" id="kobo.717.1"><img alt="Figure 12.23 – We have created our own SQL editor" src="image/B20976_12_023.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.718.1">Figure 12.23 – We have created our own SQL editor</span></p>
<h2 id="_idParaDest-260"><a id="_idTextAnchor260"/><span class="koboSpan" id="kobo.719.1">How it works…</span></h2>
<p><span class="koboSpan" id="kobo.720.1">The table widget is similar to </span><a id="_idIndexMarker813"/><span class="koboSpan" id="kobo.721.1">the one you see in spreadsheet </span><a id="_idIndexMarker814"/><span class="koboSpan" id="kobo.722.1">applications such as </span><strong class="bold"><span class="koboSpan" id="kobo.723.1">Microsoft Excel</span></strong><span class="koboSpan" id="kobo.724.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.725.1">OpenOffice Calc</span></strong><span class="koboSpan" id="kobo.726.1">. </span><span class="koboSpan" id="kobo.726.2">In contrast to other types of</span><a id="_idIndexMarker815"/><span class="koboSpan" id="kobo.727.1"> model viewers, such as list view or tree view, table view (or table widget) is a two-dimensional model viewer, which displays data in the form of rows </span><span class="No-Break"><span class="koboSpan" id="kobo.728.1">and columns.</span></span></p>
<p><span class="koboSpan" id="kobo.729.1">The main difference between a table view and a table widget in Qt is that a table widget is built on top of a table view class, which means a table widget is easier to use and more suitable for beginners. </span><span class="koboSpan" id="kobo.729.2">However, a table widget is less flexible and tends to be less scalable than a table view, which is not the best choice if you want to customize your table. </span><span class="koboSpan" id="kobo.729.3">After retrieving data from SQLite, we created a </span><strong class="source-inline"><span class="koboSpan" id="kobo.730.1">QTableWidgetItem</span></strong><span class="koboSpan" id="kobo.731.1"> item for each of the data items and set which column and row should be added to the table widget. </span><span class="koboSpan" id="kobo.731.2">Before adding an item to the table widget, we must increase the row count of the table by calling </span><strong class="source-inline"><span class="koboSpan" id="kobo.732.1">QTableWidget::setRowCount()</span></strong><span class="koboSpan" id="kobo.733.1">. </span><span class="koboSpan" id="kobo.733.2">We can also get the current row count of the table widget by simply </span><span class="No-Break"><span class="koboSpan" id="kobo.734.1">calling </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.735.1">QTableWidget::rowCount()</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.736.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.737.1">The first column from the left is hidden from view because we only use it to save the ID of the data so that we can use it to update the database when one of the data items in its row has changed. </span><span class="koboSpan" id="kobo.737.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.738.1">on_tableWidget_itemChanged()</span></strong><span class="koboSpan" id="kobo.739.1"> slot function will be called when the data in one of the cells has changed. </span><span class="koboSpan" id="kobo.739.2">It will not only get called when you edit the data in the cell but also when the data are first added to the table after being retrieved from the database. </span><span class="koboSpan" id="kobo.739.3">To ensure that this function is only triggered when we edit the data, we use a Boolean </span><a id="_idIndexMarker816"/><span class="koboSpan" id="kobo.740.1">variable called </span><strong class="source-inline"><span class="koboSpan" id="kobo.741.1">hasInit</span></strong><span class="koboSpan" id="kobo.742.1"> to check whether we have done the initialization process (adding the first batch of data to the table). </span><span class="koboSpan" id="kobo.742.2">If </span><strong class="source-inline"><span class="koboSpan" id="kobo.743.1">hasInit</span></strong><span class="koboSpan" id="kobo.744.1"> is false, ignore the </span><span class="No-Break"><span class="koboSpan" id="kobo.745.1">function call.</span></span></p>
<p><span class="koboSpan" id="kobo.746.1">To prevent users from entering a totally irrelevant type of data, such as inserting letters into a numerical-only data cell, we manually check whether the data are anything close to what we’d expected when they were being edited. </span><span class="koboSpan" id="kobo.746.2">Revert it to a default value if it doesn’t come close to anything considered valid. </span><span class="koboSpan" id="kobo.746.3">This is, of course, a simple hack, which does the job but is not the most professional method. </span><span class="koboSpan" id="kobo.746.4">Alternatively, you can try to create a new class that inherits the </span><strong class="source-inline"><span class="koboSpan" id="kobo.747.1">QItemDelegate</span></strong><span class="koboSpan" id="kobo.748.1"> class and defines how your model view should behave. </span><span class="koboSpan" id="kobo.748.2">Then, call </span><strong class="source-inline"><span class="koboSpan" id="kobo.749.1">QTableWidget::setItemDelegate()</span></strong><span class="koboSpan" id="kobo.750.1"> to apply the class to your </span><span class="No-Break"><span class="koboSpan" id="kobo.751.1">table widget.</span></span></p>
<h1 id="_idParaDest-261"><a id="_idTextAnchor261"/><span class="koboSpan" id="kobo.752.1">Advanced SQL queries</span></h1>
<p><span class="koboSpan" id="kobo.753.1">By following this</span><a id="_idIndexMarker817"/><span class="koboSpan" id="kobo.754.1"> recipe, you will learn how to use advanced SQL statements such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.755.1">INNER</span></strong> <strong class="source-inline"><span class="koboSpan" id="kobo.756.1">JOIN</span></strong><span class="koboSpan" id="kobo.757.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.758.1">COUNT</span></strong><span class="koboSpan" id="kobo.759.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.760.1">LIKE</span></strong><span class="koboSpan" id="kobo.761.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.762.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.763.1">DISTINCT</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.764.1">.</span></span></p>
<h2 id="_idParaDest-262"><a id="_idTextAnchor262"/><span class="koboSpan" id="kobo.765.1">How to do it…</span></h2>
<p><span class="koboSpan" id="kobo.766.1">You can do a lot more than just perform simple queries on the SQL database. </span><span class="koboSpan" id="kobo.766.2">Let’s follow these steps to </span><span class="No-Break"><span class="koboSpan" id="kobo.767.1">learn how:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.768.1">We need to add a few tables to our database before we can dive into the programming part. </span><span class="koboSpan" id="kobo.768.2">Open your </span><strong class="bold"><span class="koboSpan" id="kobo.769.1">SQLiteStudio</span></strong><span class="koboSpan" id="kobo.770.1">. </span><span class="koboSpan" id="kobo.770.2">We need several tables for this example </span><span class="No-Break"><span class="koboSpan" id="kobo.771.1">to work:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer208">
<span class="koboSpan" id="kobo.772.1"><img alt="Figure 12.24 – Additional tables that we need to create for this example" src="image/B20976_12_024.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.773.1">Figure 12.24 – Additional tables that we need to create for this example</span></p>
<ol>
<li value="2"><span class="koboSpan" id="kobo.774.1">I will show you the structure of each of the tables required for this project and the dummy data</span><a id="_idIndexMarker818"/><span class="koboSpan" id="kobo.775.1"> inserted into the tables for testing. </span><span class="koboSpan" id="kobo.775.2">The first table is called </span><strong class="source-inline"><span class="koboSpan" id="kobo.776.1">branch</span></strong><span class="koboSpan" id="kobo.777.1">, which is used to store the IDs and names of different branches of the </span><span class="No-Break"><span class="koboSpan" id="kobo.778.1">dummy company:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer209">
<span class="koboSpan" id="kobo.779.1"><img alt="Figure 12.25 – The branch table" src="image/B20976_12_025.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.780.1">Figure 12.25 – The branch table</span></p>
<ol>
<li value="3"><span class="koboSpan" id="kobo.781.1">Secondly, we have the </span><strong class="source-inline"><span class="koboSpan" id="kobo.782.1">department</span></strong><span class="koboSpan" id="kobo.783.1"> table, which stores the IDs and names of different departments of the dummy company, which is also linked to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.784.1">branch</span></strong><span class="koboSpan" id="kobo.785.1"> data by the </span><span class="No-Break"><span class="koboSpan" id="kobo.786.1">branch IDs:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer210">
<span class="koboSpan" id="kobo.787.1"><img alt="Figure 12.26 – The department table, which links to the branch table" src="image/B20976_12_026.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.788.1">Figure 12.26 – The department table, which links to the branch table</span></p>
<ol>
<li value="4"><span class="koboSpan" id="kobo.789.1">We also have an </span><strong class="source-inline"><span class="koboSpan" id="kobo.790.1">employee</span></strong><span class="koboSpan" id="kobo.791.1"> table, which stores information on all the employees in the dummy </span><a id="_idIndexMarker819"/><span class="koboSpan" id="kobo.792.1">company. </span><span class="koboSpan" id="kobo.792.2">This table is similar to the one we used in the previous examples, except it has two extra columns, </span><strong class="source-inline"><span class="koboSpan" id="kobo.793.1">emp_birthday</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.794.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.795.1">emp_departmentID</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.796.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer211">
<span class="koboSpan" id="kobo.797.1"><img alt="Figure 12.27 – The employee table, which links to the department table" src="image/B20976_12_027.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.798.1">Figure 12.27 – The employee table, which links to the department table</span></p>
<ol>
<li value="5"><span class="koboSpan" id="kobo.799.1">We also have a table called </span><strong class="source-inline"><span class="koboSpan" id="kobo.800.1">log</span></strong><span class="koboSpan" id="kobo.801.1">, which contains dummy records of the login time for each employee. </span><strong class="source-inline"><span class="koboSpan" id="kobo.802.1">log_loginTime</span></strong><span class="koboSpan" id="kobo.803.1"> will be set as a date-time </span><span class="No-Break"><span class="koboSpan" id="kobo.804.1">variable type:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer212">
<span class="koboSpan" id="kobo.805.1"><img alt="Figure 12.28 – The log table, which links to the user table" src="image/B20976_12_028.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.806.1">Figure 12.28 – The log table, which links to the user table</span></p>
<ol>
<li value="6"><span class="koboSpan" id="kobo.807.1">We have the </span><strong class="source-inline"><span class="koboSpan" id="kobo.808.1">user</span></strong><span class="koboSpan" id="kobo.809.1"> table that</span><a id="_idIndexMarker820"/><span class="koboSpan" id="kobo.810.1"> we also used in the </span><span class="No-Break"><span class="koboSpan" id="kobo.811.1">previous examples:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer213">
<span class="koboSpan" id="kobo.812.1"><img alt="Figure 12.29 – The user table" src="image/B20976_12_029.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.813.1">Figure 12.29 – The user table</span></p>
<ol>
<li value="7"><span class="koboSpan" id="kobo.814.1">Open Qt Creator. </span><span class="koboSpan" id="kobo.814.2">This time, instead of choosing </span><strong class="bold"><span class="koboSpan" id="kobo.815.1">Qt Widgets Application</span></strong><span class="koboSpan" id="kobo.816.1">, we select </span><strong class="bold"><span class="koboSpan" id="kobo.817.1">Qt </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.818.1">Console Application</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.819.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer214">
<span class="koboSpan" id="kobo.820.1"><img alt="Figure 12.30 – Create a Qt Console Application project" src="image/B20976_12_030.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.821.1">Figure 12.30 – Create a Qt Console Application project</span></p>
<ol>
<li value="8"><span class="koboSpan" id="kobo.822.1">Open your project file (.pro) and add the </span><strong class="source-inline"><span class="koboSpan" id="kobo.823.1">sql</span></strong><span class="koboSpan" id="kobo.824.1"> module to </span><span class="No-Break"><span class="koboSpan" id="kobo.825.1">your project:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.826.1">
QT += core </span><strong class="bold"><span class="koboSpan" id="kobo.827.1">sql</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.828.1">QT -= gui</span></strong></pre></li> <li><span class="koboSpan" id="kobo.829.1">Open </span><strong class="source-inline"><span class="koboSpan" id="kobo.830.1">main.cpp</span></strong><span class="koboSpan" id="kobo.831.1"> and add</span><a id="_idIndexMarker821"/><span class="koboSpan" id="kobo.832.1"> the following header files to the top of the </span><span class="No-Break"><span class="koboSpan" id="kobo.833.1">source file:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.834.1">
#include &lt;QSqlDatabase&gt;
#include &lt;QSqlQuery&gt;
#include &lt;QSqlError&gt;
#include &lt;QDate&gt;
#include &lt;QDebug&gt;</span></pre></li> <li><span class="koboSpan" id="kobo.835.1">Add the following function to display employees who are more than 30 </span><span class="No-Break"><span class="koboSpan" id="kobo.836.1">years old:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.837.1">
void filterAge() {
     qDebug() &lt;&lt; "== Employees above 40 year old =============";
     QSqlQuery query;
     if (query.exec("SELECT emp_name, emp_age FROM employee WHERE emp_age &gt; 40")) {
           while (query.next()) {
                 qDebug() &lt;&lt; query.value(0).toString() &lt;&lt; query.value(1).toString();
           }
     }
     else {
     qDebug() &lt;&lt; query.lastError().text();
     }
}</span></pre></li> <li><span class="koboSpan" id="kobo.838.1">Add the following</span><a id="_idIndexMarker822"/><span class="koboSpan" id="kobo.839.1"> function to display the </span><strong class="source-inline"><span class="koboSpan" id="kobo.840.1">department</span></strong><span class="koboSpan" id="kobo.841.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.842.1">branch</span></strong><span class="koboSpan" id="kobo.843.1"> information of </span><span class="No-Break"><span class="koboSpan" id="kobo.844.1">each employee:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.845.1">
void getDepartmentAndBranch() {
     qDebug() &lt;&lt; "== Get employees' department and branch =============";
     QSqlQuery query;
     if (query.exec("SELECT emp_name, dep_name, brh_name FROM (SELECT emp_name, emp_departmentID FROM employee) AS myEmployee INNER JOIN department ON department.dep_id = myEmployee.emp_departmentID INNER JOIN branch ON branch.brh_id = department.dep_branchID")) {
           while (query.next()) {
                 qDebug() &lt;&lt; query.value(0).toString() &lt;&lt; query.value(1).toString() &lt;&lt; query.value(2).toString();
           }
     }
     else {
           qDebug() &lt;&lt; query.lastError().text();
     }
}</span></pre></li> <li><span class="koboSpan" id="kobo.846.1">Add the following function, which displays employees who are working in the New York branch and are </span><a id="_idIndexMarker823"/><span class="koboSpan" id="kobo.847.1">under 40 </span><span class="No-Break"><span class="koboSpan" id="kobo.848.1">years old:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.849.1">
void filterBranchAndAge() {
     qDebug() &lt;&lt; "== Employees from New York and age below 40 =============";
     QSqlQuery query;
     if (query.exec("SELECT emp_name, emp_age, dep_name, brh_name FROM (SELECT emp_name, emp_age, emp_departmentID FROM employee) AS myEmployee INNER JOIN department ON department.dep_id = myEmployee.emp_departmentID INNER JOIN branch ON branch.brh_id = department.dep_branchID WHERE branch.brh_name = 'New York' AND myEmployee.emp_age &lt; 40")) {
           while (query.next()) {
                 qDebug() &lt;&lt; query.value(0).toString() &lt;&lt; query.value(1).toString() &lt;&lt; query.value(2).toString() &lt;&lt; query.value(3).toString();
           }
     }
     else {
     qDebug() &lt;&lt; query.lastError().text();
     }
}</span></pre></li> <li><span class="koboSpan" id="kobo.850.1">Add the following function, which </span><a id="_idIndexMarker824"/><span class="koboSpan" id="kobo.851.1">counts the total number of female employees in the </span><span class="No-Break"><span class="koboSpan" id="kobo.852.1">dummy company:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.853.1">
void countFemale() {
     qDebug() &lt;&lt; "== Count female employees =============";
     QSqlQuery query;
     if (query.exec("SELECT COUNT(emp_gender) FROM employee WHERE emp_gender = 1")) {
           while (query.next()) {
                 qDebug() &lt;&lt; query.value(0).toString();
           }
     }
     else {
           qDebug() &lt;&lt; query.lastError().text();
     }
}</span></pre></li> <li><span class="koboSpan" id="kobo.854.1">Add the following </span><a id="_idIndexMarker825"/><span class="koboSpan" id="kobo.855.1">function, which filters the employee list and only displays those names that start </span><span class="No-Break"><span class="koboSpan" id="kobo.856.1">with </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.857.1">Ja</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.858.1">:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.859.1">
void filterName() {
     qDebug() &lt;&lt; "== Employees name start with 'Ja' =============";
     QSqlQuery query;
     if (query.exec("SELECT emp_name FROM employee WHERE emp_name LIKE '%Ja%'")) {
           while (query.next()) {
                 qDebug() &lt;&lt; query.value(0).toString();
           }
     }
     else {
           qDebug() &lt;&lt; query.lastError().text();
     }
}</span></pre></li> <li><span class="koboSpan" id="kobo.860.1">Add the following function, which</span><a id="_idIndexMarker826"/><span class="koboSpan" id="kobo.861.1"> displays employees who have birthdays </span><span class="No-Break"><span class="koboSpan" id="kobo.862.1">in August:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.863.1">
void filterBirthday() {
     qDebug() &lt;&lt; "== Employees birthday in August =============";
     QSqlQuery query;
     if (query.exec("SELECT emp_name, emp_birthday FROM employee WHERE strftime('%m', emp_birthday) = '08'")) {
           while (query.next()) {
                 qDebug() &lt;&lt; query.value(0).toString() &lt;&lt; query.value(1).toDate().toString("d-MMMM-yyyy");
           }
     }
     else {
           qDebug() &lt;&lt; query.lastError().text();
     }
}</span></pre></li> <li><span class="koboSpan" id="kobo.864.1">Add the following function, which checks who logged into the dummy system on 27 April 2024 and displays</span><a id="_idIndexMarker827"/><span class="koboSpan" id="kobo.865.1"> their names on </span><span class="No-Break"><span class="koboSpan" id="kobo.866.1">the terminal:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.867.1">
void checkLog() {
     qDebug() &lt;&lt; "== Employees who logged in on 27 April 2024 =============";
     QSqlQuery query;
     if (query.exec("SELECT DISTINCT emp_name FROM (SELECT emp_id, emp_name FROM employee) AS myEmployee INNER JOIN user ON user.user_employeeID = myEmployee.emp_id INNER JOIN log ON log.log_userID = user.user_id WHERE DATE(log.log_loginTime) = '2024-04-27'")) {
           while (query.next()) {
                 qDebug() &lt;&lt; query.value(0).toString();
           }
     }
     else {
           qDebug() &lt;&lt; query.lastError().text();
     }
}</span></pre></li> <li><span class="koboSpan" id="kobo.868.1">In the </span><strong class="source-inline"><span class="koboSpan" id="kobo.869.1">main()</span></strong><span class="koboSpan" id="kobo.870.1"> function, connect the program to the SQLite database and call all the functions that we defined in the previous steps. </span><span class="koboSpan" id="kobo.870.2">Close the database connection, and </span><span class="No-Break"><span class="koboSpan" id="kobo.871.1">we’re done:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.872.1">
int main(int argc, char *argv[]) {
     QCoreApplication a(argc, argv);
     QSqlDatabase db = QSqlDatabase::addDatabase("QSQLITE");
     db.setDatabaseName("database.db3");
     if (db.open()) {
           filterAge();
           getDepartmentAndBranch();
           filterBranchAndAge();
           countFemale();
           filterName();
           filterBirthday();
           checkLog();
           db.close();
     }
     else {
           qDebug() &lt;&lt; "Failed to connect to database.";
     }
     return a.exec();
}</span></pre></li> <li><span class="koboSpan" id="kobo.873.1">If you compile and run the project now, you </span><a id="_idIndexMarker828"/><span class="koboSpan" id="kobo.874.1">should see a terminal window that displays the </span><span class="No-Break"><span class="koboSpan" id="kobo.875.1">filtered results:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer215">
<span class="koboSpan" id="kobo.876.1"><img alt="Figure 12.31 – Printing the results on the Application Output window" src="image/B20976_12_031.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.877.1">Figure 12.31 – Printing the results on the Application Output window</span></p>
<h2 id="_idParaDest-263"><a id="_idTextAnchor263"/><span class="koboSpan" id="kobo.878.1">How it works…</span></h2>
<p><span class="koboSpan" id="kobo.879.1">A console application does </span><a id="_idIndexMarker829"/><span class="koboSpan" id="kobo.880.1">not have a GUI and only shows you a text display in a terminal window. </span><span class="koboSpan" id="kobo.880.2">This is usually used in a backend system, as it uses fewer resources compared to a widget application. </span><span class="koboSpan" id="kobo.880.3">We used it in this example because it’s faster to display the result without the need to place any widgets in the program, which we don’t need in </span><span class="No-Break"><span class="koboSpan" id="kobo.881.1">this case.</span></span></p>
<p><span class="koboSpan" id="kobo.882.1">We separated the SQL queries into different functions so that it’s easier to maintain the code and it doesn’t become too messy. </span><span class="koboSpan" id="kobo.882.2">Do note that in C++, the functions have to be located before the </span><strong class="source-inline"><span class="koboSpan" id="kobo.883.1">main()</span></strong><span class="koboSpan" id="kobo.884.1"> function; otherwise, they will not be able to be called </span><span class="No-Break"><span class="koboSpan" id="kobo.885.1">by </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.886.1">main()</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.887.1">.</span></span></p>
<h2 id="_idParaDest-264"><a id="_idTextAnchor264"/><span class="koboSpan" id="kobo.888.1">There’s more…</span></h2>
<p><span class="koboSpan" id="kobo.889.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.890.1">INNER JOIN</span></strong><span class="koboSpan" id="kobo.891.1"> statement used in the preceding example joins two tables together and selects all rows from both tables, as long as there is a match between the columns in both tables. </span><span class="koboSpan" id="kobo.891.2">There are many other types of </span><strong class="source-inline"><span class="koboSpan" id="kobo.892.1">JOIN</span></strong><span class="koboSpan" id="kobo.893.1"> statements that you can use in SQLite (and some other types of SQL architecture), such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.894.1">LEFT JOIN</span></strong><span class="koboSpan" id="kobo.895.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.896.1">RIGHT JOIN</span></strong><span class="koboSpan" id="kobo.897.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.898.1">FULL </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.899.1">OUTER JOIN</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.900.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.901.1">The following diagram shows the different types of </span><strong class="source-inline"><span class="koboSpan" id="kobo.902.1">JOIN</span></strong><span class="koboSpan" id="kobo.903.1"> statements and </span><span class="No-Break"><span class="koboSpan" id="kobo.904.1">their effects:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer216">
<span class="koboSpan" id="kobo.905.1"><img alt="Figure 12.32 – Different types of JOIN statements" src="image/B20976_12_032.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.906.1">Figure 12.32 – Different types of JOIN statements</span></p>
<p><span class="koboSpan" id="kobo.907.1">The following bullet points explain the </span><strong class="source-inline"><span class="koboSpan" id="kobo.908.1">LIKE</span></strong><span class="koboSpan" id="kobo.909.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.910.1">DISTINCT</span></strong><span class="koboSpan" id="kobo.911.1"> statements, which we used in our example code in</span><a id="_idIndexMarker830"/> <span class="No-Break"><span class="koboSpan" id="kobo.912.1">this recipe:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.913.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.914.1">LIKE</span></strong><span class="koboSpan" id="kobo.915.1"> statement is normally used to search for a string variable in the database without the full word. </span><span class="koboSpan" id="kobo.915.2">Notice that there are two % symbols located before and after the </span><span class="No-Break"><span class="koboSpan" id="kobo.916.1">search keyword.</span></span></li>
<li><span class="koboSpan" id="kobo.917.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.918.1">DISTINCT</span></strong><span class="koboSpan" id="kobo.919.1"> statement used in the previous example filters out results that have the exact same variable. </span><span class="koboSpan" id="kobo.919.2">For example, without the </span><strong class="source-inline"><span class="koboSpan" id="kobo.920.1">DISTINCT</span></strong><span class="koboSpan" id="kobo.921.1"> statement, you will see two versions of Larry King appear in the terminal because there are two records of him logging into the system on the same day. </span><span class="koboSpan" id="kobo.921.2">By adding the </span><strong class="source-inline"><span class="koboSpan" id="kobo.922.1">DISTINCT</span></strong><span class="koboSpan" id="kobo.923.1"> statement, SQLite will eliminate one of the results and ensure every result </span><span class="No-Break"><span class="koboSpan" id="kobo.924.1">is unique.</span></span></li>
<li><span class="koboSpan" id="kobo.925.1">You may be wondering what </span><strong class="source-inline"><span class="koboSpan" id="kobo.926.1">d-MMMM-yyyy</span></strong><span class="koboSpan" id="kobo.927.1"> stands for and why we used it in the preceding example. </span><span class="koboSpan" id="kobo.927.2">That is actually an expression supplied to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.928.1">QDateTime</span></strong><span class="koboSpan" id="kobo.929.1"> class in Qt to display the date-time result using a given format. </span><span class="koboSpan" id="kobo.929.2">In this case, it will change the date-time data that we get from SQLite, 2024-08-06, to the format that we specified, resulting </span><span class="No-Break"><span class="koboSpan" id="kobo.930.1">in 6-August-2024.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.931.1">For more information, check out Qt’s documentation at </span><a href="http://doc.qt.io/qt-6/qdatetime.html#toString"><span class="koboSpan" id="kobo.932.1">http://doc.qt.io/qt-6/qdatetime.html#toString</span></a><span class="koboSpan" id="kobo.933.1">, which has the full list of expressions that can be used to determine the format of the date and </span><span class="No-Break"><span class="koboSpan" id="kobo.934.1">time string.</span></span></p>
<p><span class="koboSpan" id="kobo.935.1">SQL provides an easy and efficient way to save </span><a id="_idIndexMarker831"/><span class="koboSpan" id="kobo.936.1">and load user data without reinventing the wheel. </span><span class="koboSpan" id="kobo.936.2">Qt provides you with an out-of-the-box solution for connecting your application with a SQL database; in this chapter, we have learned how to do this by using a step-by-step approach, and we were able to load and save our user’s data into the </span><span class="No-Break"><span class="koboSpan" id="kobo.937.1">SQL database.</span></span></p>
</div>
</body></html>