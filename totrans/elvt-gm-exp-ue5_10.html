<html><head></head><body>
<div id="sbo-rt-content"><div id="_idContainer298">
<h1 class="chapter-number" id="_idParaDest-172"><a id="_idTextAnchor199"/>10</h1>
<h1 id="_idParaDest-173"><a id="_idTextAnchor200"/>Creating the SuperSideScroller Game</h1>
<p>So far, we have learned a lot about Unreal Engine, C++ programming, and general game development techniques. In the previous chapters, we covered collisions, tracing, how to use C++ with UE5, and even the Blueprint Visual Scripting system. On top of that, we gained crucial knowledge of skeletons, animations, and Animation Blueprints, all of which we will utilize in the upcoming project.<a id="_idTextAnchor201"/></p>
<p>In this chapter, we will set up the project for a new SuperSideScroller game. You will be introduced to the different aspects of a side-scroller game, including power-ups, collectibles, and enemy AI, all of which we will be using in our project. You will also learn about the character animation pipeline in game development and learn how to manipulate the movement of our game’s character.</p>
<p>For our newest project, SuperSideScroller, we will use many of the same concepts and tools that we have used in previous chapters to develop our game features and systems. Concepts such as collision, input, and the HUD will be at the forefront of our project; however, we will also be diving into new concepts involving animation to recreate the mechanics of popular side-scrolling games. The final project will be a culmination of everything we have learned thus far in this book.</p>
<p>In this chapter, we’re going to cover the following main topics:</p>
<ul>
<li>Project breakdown</li>
<li>The player character</li>
<li>Exploring the features of our side-scroller game</li>
<li>Understanding animations in Unreal Engine 5</li>
</ul>
<p>By the end of this chapter, we’ll have a better idea of what we want to accomplish with our <strong class="source-inline">SuperSideScroller</strong> game, and we will have the project foundation to begin development.</p>
<h1 id="_idParaDest-174"><a id="_idTextAnchor202"/>Technical requirements</h1>
<p>For this chapter, you will need to have Unreal Engine 5 installed.</p>
<p>This chapter does not feature any C++ code, and all the exercises are performed within the UE5 editor. Let’s begin this chapter with a brief breakdown of the <strong class="source-inline">SuperSideScroller</strong> project.</p>
<p>The project for this chapter can be found in the Chapter10 folder of the code bundle for this book, which can be downloaded here: <a href="https://github.com/PacktPublishing/Elevating-Game-Experiences-with-Unreal-Engine-5-Second-Edition">https://github.com/PacktPublishing/Elevating-Game-Experiences-with-Unreal-Engine-5-Second-Edition</a>.</p>
<h1 id="_idParaDest-175"><a id="_idTextAnchor203"/>Project breakdown</h1>
<p>Let’s consider<a id="_idIndexMarker760"/> the example of the classic game <em class="italic">Super Mario Bros</em>, released on the <strong class="bold">Nintendo Entertainment System</strong> (<strong class="bold">NES</strong>) console in 1985. For those unfamiliar with the<a id="_idIndexMarker761"/> franchise, the general idea is this: the player takes control of Mario, who must traverse the many hazardous obstacles and creatures of the Mushroom Kingdom in the hope of rescuing Princess Peach from the sinister King Koopa, Bowser. </p>
<p class="callout-heading">Note</p>
<p class="callout">To have an even better understanding of how the game works, check out this video of its gameplay: <a href="https://www.youtube.com/watch?v=rLl9XBg7wSs">https://www.youtube.com/watch?v=rLl9XBg7wSs</a>.</p>
<p>The following are the core features and mechanics of games in this genre:</p>
<ul>
<li><strong class="bold">Two-Dimensional Movement</strong>: The player can only move in the X and Y directions, using a 2D <a id="_idIndexMarker762"/>coordinate system. Refer to <em class="italic">Figure 10.1</em> to see a comparison of 2D and 3D coordinate systems if you are unfamiliar with them. Although our <strong class="source-inline">SuperSideScroller</strong> game will be in 3D and not pure 2D, the movement of our character will work identically to that of Mario, only supporting vertical and horizontal movement:</li>
</ul>
<div>
<div class="IMG---Figure" id="_idContainer260">
<img alt="Figure 10.1 – A comparison of 2D and 3D coordinate vectors " height="325" src="image/Figure_10.01_B18531.jpg" width="358"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 10.1 – A comparison of 2D and 3D coordinate vectors</p>
<ul>
<li><strong class="bold">Jumping</strong>: Jumping is a crucial aspect <a id="_idIndexMarker763"/>of any platformer game, and our <strong class="source-inline">SuperSideScroller</strong> game will be no different. There are many different games, such as <em class="italic">Celeste</em>, <em class="italic">Hollow</em> <em class="italic">Knight</em>, and <em class="italic">Super Meat Boy</em>, as mentioned previously, that use the jumping feature – all of which are in 2D.</li>
<li><strong class="bold">Character Power-Ups</strong>: Without character power-ups, many side-scrolling games lose their sense of chaos <a id="_idIndexMarker764"/>and replayability. For instance, in the game <em class="italic">Ori and the Blind Forest</em>, the developers introduce different character abilities that change how the game is played. Abilities such as the triple-jump or the air dash open a variety of possibilities to navigate the level and allow level designers to create interesting layouts based on the movement abilities of the player. </li>
<li><strong class="bold">Enemy AI</strong>: Enemies with<a id="_idIndexMarker765"/> various abilities and behaviors are introduced to add a layer of challenge for the player, on top of the challenge of navigating the level solely through the use of the available movement mechanics.</li>
</ul>
<p class="callout-heading">Note</p>
<p class="callout">What are some ways that AI in games can interact with the player? For example, in <em class="italic">The Elder Scrolls V: Skyrim</em>, there are AI characters in various towns and villages that can have conversations with the player to exposit world-building elements such as history, sell items to the player, and even give quests to the player. </p>
<ul>
<li><strong class="bold">Collectibles</strong>: Many games <a id="_idIndexMarker766"/>support collectible items in one form or another; <em class="italic">Sonic the Hedgehog</em> has rings, while <em class="italic">Ratchet &amp; Clank</em> has bolts to collect. Our <strong class="source-inline">SuperSideScroller</strong> game will allow players to collect coins. </li>
</ul>
<p>Now that we have evaluated the game mechanics that we want to support, we can break down the functionality of each mechanic as it relates to our <strong class="source-inline">SuperSideScroller</strong> game and what we need to do to implement these features.</p>
<h1 id="_idParaDest-176"><a id="_idTextAnchor204"/>The player character</h1>
<p>At the core of any game is the<a id="_idIndexMarker767"/> player character; that is, the entity in which our player will interact and play our game. For our <strong class="source-inline">SuperSideScroller</strong> project, we will be creating a simple character with custom meshes, animations, and logic behind it to give it the proper feel for a side-scroller game.</p>
<p>Almost all of the functionality that we want for our character is given to us by default when using the <strong class="source-inline">Side Scroller</strong> game project template in UE5. </p>
<p class="callout-heading">Note</p>
<p class="callout">At the time of writing, we are using Unreal Engine version 5.0.0; using another version of the engine could result in some differences in the editor, the tools, and how your logic will work later, so please keep this in mind. </p>
<p>In the next exercise, we will create our game project and set up our player character, while also exploring how we can manipulate the parameters of the character to improve upon its movement.</p>
<h1 id="_idParaDest-177"><a id="_idTextAnchor205"/>Converting the Third Person template into a side-scroller</h1>
<p>Back in Unreal Engine 4, the<a id="_idIndexMarker768"/> engine came with a <strong class="source-inline">Side-Scroller</strong> template that could be used as the base template for the <strong class="source-inline">SuperSideScroller</strong> project; however, in UE5, no such template exists. As a result, we <a id="_idIndexMarker769"/>will be using the <strong class="source-inline">Third Person</strong> template project provided by UE5 and updating some parameters to make it look and feel like a side-scroller game.</p>
<p>Let’s begin by creating our project.</p>
<h2 id="_idParaDest-178"><a id="_idTextAnchor206"/>Exercise 10.01 – Creating the side-scroller project and using the Character Movement component</h2>
<p>In this exercise, you <a id="_idIndexMarker770"/>will be setting up UE5 with the <strong class="source-inline">Third Person</strong> template. This <a id="_idIndexMarker771"/>exercise will help you get started with our game.</p>
<p>Follow these steps to complete the exercise:</p>
<ol>
<li>First, open the Epic Games Launcher, navigate to the <strong class="bold">Unreal Engine</strong> tab at the bottom of the options on the left-hand side, and select the <strong class="bold">Library</strong> option at the top.</li>
<li>Next, you will be prompted with a window asking you to either open an existing project or create a new project of a certain category. Among these options is the <strong class="bold">Games</strong> category; select this option for our project. With your project category selected, you will be prompted to select the template for your project.</li>
<li>Next, click on the <strong class="bold">Third Person</strong> option; because the <strong class="bold">Side Scroller</strong> template no longer exists, the <strong class="bold">Third Person</strong> template is the closest option we have.</li>
</ol>
<p>Lastly, we need to set up the default project settings before Unreal Engine will create our project for us.</p>
<ol>
<li value="4">Choose to base the project on <strong class="source-inline">C++</strong>, not <strong class="source-inline">Blueprints</strong>, include <strong class="source-inline">Starter Content</strong>, and use <strong class="source-inline">Desktop/Console</strong> as our platform. The remaining project settings can be left as their defaults. Select the desired location, name the project <strong class="source-inline">SuperSideScroller</strong>, and save the project in an appropriate directory of your choice.</li>
<li>After these settings are <a id="_idIndexMarker772"/>applied, select <strong class="bold">Create Project</strong>. When it’s <a id="_idIndexMarker773"/>done compiling the engine, both Unreal Editor and Visual Studio will open, and we can move on to the next steps of this exercise:</li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer261">
<img alt="Figure 10.2 – The Unreal Engine editor should now be open " height="596" src="image/Figure_10.02_B18531.jpg" width="1100"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 10.2 – The Unreal Engine editor should now be open</p>
<p>Now that our project has been created, we need to perform a handful of steps to change the <strong class="source-inline">Third Person</strong> template to a <strong class="source-inline">Side Scroller</strong>, starting with updating the input <strong class="bold">Axis Mappings</strong>. Follow these steps:</p>
<ol>
<li value="1">We can access <strong class="bold">Axis Mappings</strong> via <strong class="bold">Project Settings</strong> by selecting the <strong class="bold">Edit</strong> drop-down menu at the top-left of the editor and selecting the <strong class="bold">Project Settings</strong> option.</li>
<li>In <strong class="bold">Project Settings</strong>, we can find the <strong class="bold">Input</strong> option under the <strong class="bold">Engine</strong> category. Select the <strong class="bold">Input</strong> option to find the <strong class="bold">Bindings</strong> section, which contains both <strong class="bold">Action</strong> and <strong class="bold">Axis Mappings</strong> for the project:</li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer262">
<img alt="Figure 10.3 – The default Axis and Action Mappings " height="519" src="image/Figure_10.03_B18531.jpg" width="947"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 10.3 – The default Axis and Action Mappings</p>
<ol>
<li value="3">For the needs <a id="_idIndexMarker774"/>of the <strong class="source-inline">SuperSideScroller</strong> project, we simply have to remove <strong class="bold">Axis Mappings</strong> for <strong class="source-inline">MoveForward</strong>, <strong class="source-inline">TurnRate</strong>, <strong class="source-inline">Turn</strong>, <strong class="source-inline">LookUpRate</strong>, and <strong class="source-inline">LookUp</strong>. You can remove a mapping by left-clicking the garbage can icon next to it.</li>
</ol>
<p>These mappings are unnecessary for our project due to the behavior of the character controls for a side-scroller game. Now that the mappings have been updated, we can update the parameters within the <strong class="bold">ThirdPersonCharacter</strong> Blueprint. Follow these steps:</p>
<ol>
<li value="1">Find the <strong class="bold">ThirdPersonCharacter</strong> Blueprint by opening the <strong class="bold">Content Drawer</strong> area and navigating to the <strong class="source-inline">Content/ThirdPersonCPP/Blueprints</strong> directory. Then, open the asset.</li>
<li>With the <strong class="bold">ThirdPersonCharacter</strong> Blueprint open, navigate to the <strong class="bold">Components</strong> tab and select the <strong class="bold">Mesh</strong> component. Find the <strong class="bold">Rotation</strong> parameter under the <strong class="bold">Transform</strong> category and set the <strong class="bold">Yaw</strong> value to <strong class="source-inline">-90.0f</strong>. The final rotation should be <strong class="source-inline">(Pitch=0.0,Yaw=-90.0,Roll=0.0)</strong>. This will ensure that the<a id="_idIndexMarker775"/> character mesh will be facing the axis in which our side-scroller will move:</li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer263">
<img alt="Figure 10.4 – The updated Rotation values of the Mesh component " height="121" src="image/Figure_10.04_B18531.jpg" width="671"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 10.4 – The updated Rotation values of the Mesh component</p>
<ol>
<li value="3">Next, we need to update the parameters within the <strong class="bold">Camera Boom</strong> component so that we are facing the same axis as the character mesh. Select the component and find the <strong class="bold">Rotation</strong> parameter under the <strong class="bold">Transform</strong> category, similar to what we did in the previous step with the <strong class="bold">Mesh</strong> component. Set the <strong class="bold">Yaw</strong> value to <strong class="source-inline">180.0f</strong>, with the final rotation as <strong class="source-inline">(Pitch=0.0,Yaw=180.0,Roll=0.0)</strong>:</li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer264">
<img alt="Figure 10.5 0 – The updated Rotation values of the Camera Boom component " height="136" src="image/Figure_10.05_B18531.jpg" width="682"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 10.5 0 – The updated Rotation values of the Camera Boom component</p>
<ol>
<li value="4">Now, we need to update the <strong class="bold">Target Arm Length</strong> and <strong class="bold">Socket Offset</strong> parameters to adjust the positioning of the child <strong class="bold">Follow Camera</strong> component. Under the <strong class="bold">Camera</strong> category of the <strong class="bold">Camera Boom </strong>component, set <strong class="bold">Target Arm Length</strong> to <strong class="source-inline">500.0f</strong> and set the <strong class="source-inline">Z</strong> value of <strong class="bold">Socket Offset</strong> to <strong class="source-inline">75.0f</strong>. This will give us a good relative positioning of the <strong class="bold">Follow Camera</strong> component to the character mesh:</li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer265">
<img alt="Figure 10.6 – The updated Target Arm Length and Target Offset parameters " height="138" src="image/Figure_10.06_B18531.jpg" width="672"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 10.6 – The updated Target Arm Length and Target Offset parameters</p>
<ol>
<li value="5">The final parameter we need to update in the <strong class="bold">Camera Boom</strong> component is the <strong class="bold">Do Collision Test</strong> parameter, which determines whether the positioning of <strong class="bold">Camera Boom</strong> needs to be adjusted based on collisions it may have with the environment. For our project, we can set that parameter to <strong class="source-inline">False</strong>.</li>
</ol>
<p>The next set of parameters can be within <strong class="bold">Character Movement Component</strong>, which we will talk about more later in this chapter. For now, all you need to know is that this component controls all <a id="_idIndexMarker776"/>aspects of the character's movement and allows us to customize it in a way to give us the game feel we desire. Follow these steps:</p>
<ol>
<li value="1">Select <strong class="bold">Character Movement Component</strong> at the bottom of the <strong class="bold">Components</strong> tab. Under the <strong class="bold">General Settings</strong> category of its <strong class="bold">Details</strong> panel, find <strong class="bold">Gravity Scale</strong> and set it to <strong class="source-inline">2.0f</strong>. This will increase the gravity for our character:</li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer266">
<img alt="Figure 10.7 – The updated Gravity Scale parameter " height="62" src="image/Figure_10.07_B18531.jpg" width="675"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 10.7 – The updated Gravity Scale parameter</p>
<ol>
<li value="2">Next, we need to decrease the value of the <strong class="bold">Ground Friction</strong> parameter under the <strong class="bold">Character Movement: Walking</strong> section so that our character will turn a little slower. Set this parameter to <strong class="source-inline">3.0f</strong>. The higher the value of <strong class="bold">Ground Friction</strong>, the more difficult it will be for the character to turn and move:</li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer267">
<img alt="Figure 10.8 – The updated Ground Friction parameter " height="152" src="image/Figure_10.08_B18531.jpg" width="670"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 10.8 – The updated Ground Friction parameter</p>
<p>Let’s adjust the parameters that<a id="_idIndexMarker777"/> control the jump velocity and the air control the player has while the character is in the air. We can find both parameters under <strong class="bold">Character Movement: Jumping / Falling</strong>. Let’s increase <strong class="bold">Jump Z Velocity</strong> to <strong class="source-inline">1000.0f</strong>, and <strong class="bold">Air Control</strong> to <strong class="source-inline">0.8f</strong>. Updating these values gives our character an interesting jump height and movement while in the air:</p>
<div>
<div class="IMG---Figure" id="_idContainer268">
<img alt="Figure 10.9 – The updated Jump Z Velocity and Air Control parameters " height="144" src="image/Figure_10.09_B18531.jpg" width="668"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 10.9 – The updated Jump Z Velocity and Air Control parameters</p>
<p>The next set of parameters need to be set to help us later on in <a href="B18531_13.xhtml#_idTextAnchor268"><em class="italic">Chapter 13</em></a><em class="italic">, Creating and Adding the Enemy Artificial Intelligence</em>, when we work with <strong class="bold">Nav Meshes</strong>. Under the <strong class="bold">Nav Movement</strong> section of <strong class="bold">Character Movement Component</strong>, we need to update both <strong class="bold">Nav Agent Radius</strong> and <strong class="bold">Nav Agent Height</strong> to fit the bounds of <strong class="bold">Capsule Component</strong> on our player character. Follow these steps:</p>
<ol>
<li value="1">Set <strong class="bold">Nav Agent Radius</strong> to <strong class="source-inline">42.0f</strong> and <strong class="bold">Nav Agent Height</strong> to <strong class="source-inline">192.0f</strong>:</li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer269">
<img alt="Figure 10.10 – The updated values of the Nav Agent Radius and Nav Agent Height parameters " height="127" src="image/Figure_10.10_B18531.jpg" width="689"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 10.10 – The updated values of the Nav Agent Radius and Nav Agent Height parameters</p>
<ol>
<li value="2">Lastly, we need to adjust the <strong class="bold">Planar Movement</strong> section parameters to ensure that the player can only move in the axis that we want. Set <strong class="bold">Constrain to Plane</strong> to <strong class="bold">True</strong>, and then set the <strong class="bold">X</strong> value of <strong class="bold">Plane Constraint Normal</strong> to <strong class="source-inline">1.0f</strong>; the final value will be <strong class="source-inline">(X=1.0f,Y=0.0,Z=0.0)</strong>:</li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer270">
<img alt="Figure 10.11 – The updated values of the Constrain to Plane and Plane Constraint Normal parameters " height="190" src="image/Figure_10.11_B18531.jpg" width="675"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 10.11 – The updated values of the Constrain to Plane and Plane Constraint Normal parameters</p>
<p>The final step is to add some simple Blueprint logic to the <strong class="source-inline">Event Graph</strong> area of <strong class="source-inline">ThirdPersonCharacter</strong> to allo<a id="_idIndexMarker778"/>w our character to move from left to right. Follow these steps:</p>
<ol>
<li value="1">In the <strong class="bold">Event Graph</strong> area, right-click in an empty space of the graph to open the context-sensitive menu, where we will look for the <strong class="bold">InputAxis MoveRight</strong> event. Select the <strong class="bold">InputAxis MoveRight</strong> event to add it to the graph:</li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer271">
<img alt="Figure 10.12 – This is the Axis Mapping we kept at the beginning of this exercise " height="413" src="image/Figure_10.12_B18531.jpg" width="745"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 10.12 – This is the Axis Mapping we kept at the beginning of this exercise</p>
<ol>
<li value="2">The output parameter of the <strong class="bold">InputAxis MoveRight</strong> event is a float value called <strong class="bold">Axis Value</strong>. This<a id="_idIndexMarker779"/> returns a float value between 0 and 1, indicating the strength of the input in that direction. We will need to feed this value into a function called <strong class="bold">Add Movement Input</strong>. Right-click in another empty space and find this function to add it to the graph:</li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer272">
<img alt="Figure 10.13 – The Add Movement Input function " height="255" src="image/Figure_10.13_B18531.jpg" width="571"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 10.13 – The Add Movement Input function</p>
<ol>
<li value="3">Connect the <strong class="bold">Axis Value</strong> output parameter of the <strong class="bold">InputAxis MoveRight</strong> event to the <strong class="bold">Scale Value</strong> input parameter of the <strong class="bold">Add Movement Input</strong> function, then connect<a id="_idIndexMarker780"/> the white execution pins, as shown in the following screenshot. This allows us to add character movement in a specified direction, as well as strength:</li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer273">
<img alt="Figure 10.14 – The final Blueprint logic of our character " height="277" src="image/Figure_10.14_B18531.jpg" width="593"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 10.14 – The final Blueprint logic of our character</p>
<ol>
<li value="4">Lastly, we need to ensure that we pass in the right <strong class="bold">World Direction</strong> value; in our case, we need to set the <em class="italic">Y</em>-axis to <strong class="source-inline">1.0f</strong> and leave the other axes at their default values of <strong class="source-inline">0.0f</strong>.</li>
</ol>
<p>Now that you have completed the exercise, you have experienced first-hand the control you have over how the character moves and how small tweaks to <strong class="bold">Character Movement Component</strong> can drastically change how the character feels! Try changing the values such as <strong class="bold">Max Walk Speed</strong> and observe in-game how such changes affect the character.</p>
<h2 id="_idParaDest-179"><a id="_idTextAnchor207"/>Activity 10.01 – Making our character jump higher</h2>
<p>In this activity, we will be manipulating a new parameter (<strong class="source-inline">jump</strong>) that exists within the <strong class="source-inline">CharacterMovement</strong> component of the default <strong class="source-inline">Side Scroller</strong> Character Blueprint to observe how these <a id="_idIndexMarker781"/>properties affect how our character moves. </p>
<p>We will be implementing what we learned in the previous exercise and applying that to how to create our character power-ups and the general movement feel of our character.</p>
<p>Follow these steps to complete this activity:</p>
<ol>
<li value="1">Head to the <strong class="source-inline">SideScrollerCharacter</strong> Blueprint and find the <strong class="bold">Jump Z Velocity</strong> parameter in the <strong class="source-inline">CharacterMovement</strong> component.</li>
<li>Change this parameter from the default value of <strong class="source-inline">1000.0f</strong> to <strong class="source-inline">2000.0f</strong>.</li>
<li>Compile and save the <strong class="source-inline">SideScrollerCharacter</strong> Blueprint and play it in the editor. Observe how high our character can jump using the <em class="italic">space bar</em> on your keyboard.</li>
<li>Stop playing in the editor, return to the <strong class="source-inline">SideScrollerCharacter</strong> Blueprint, and update <strong class="bold">Jump Z Velocity</strong> from a value of <strong class="source-inline">2000.0f</strong> to <strong class="source-inline">200.0f</strong>.</li>
<li>Compile and save the Blueprint again, play it in the editor, and watch the character jump.</li>
</ol>
<p><strong class="bold">Expected output</strong>:</p>
<div>
<div class="IMG---Figure" id="_idContainer274">
<img alt="Figure 10.15 – The expected output with the jumping character " height="894" src="image/Figure_10.15_B18531.jpg" width="1517"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 10.15 – The expected output with the jumping character</p>
<p class="callout-heading">Note</p>
<p class="callout">The solution to this activity can be found on GitHub here: <a href="https://github.com/PacktPublishing/Elevating-Game-Experiences-with-Unreal-Engine-5-Second-Edition/tree/main/Activity%20solutions">https://github.com/PacktPublishing/Elevating-Game-Experiences-with-Unreal-Engine-5-Second-Edition/tree/main/Activity%20solutions</a>. </p>
<p>Now that we have completed<a id="_idIndexMarker782"/> this activity, we have a better understanding of how making a few changes to the <strong class="source-inline">CharacterMovement</strong> component parameters can affect our player character. We can use this later on when we need to give our character basic movement behaviors such as <strong class="bold">Walking Speed</strong> and <strong class="bold">Jump Z Velocity</strong> to achieve the character feel we want. Before moving on, return the <strong class="bold">Jump Z Velocity</strong> parameter to its default value <strong class="source-inline">1000.0f</strong>.</p>
<p>We will also keep these parameters in mind when we develop our player character power-ups later in our project.</p>
<p>Now that we have established our game project and player character, let’s explore the other features of our <strong class="source-inline">SuperSideScroller</strong> game.</p>
<h1 id="_idParaDest-180"><a id="_idTextAnchor208"/>Exploring the features of our side-scroller game</h1>
<p>Now, we’ll take some time<a id="_idIndexMarker783"/> to lay out the specifics of the game we’ll be designing. Many of these features will be implemented in later chapters, but now is a good time to lay out the vision for the project. In the following sections, we will be discussing how we want to handle the different aspects of our game, such as the enemies the player will face, the power-ups available to the player, the collectibles for the <a id="_idIndexMarker784"/>player to collect, and how the <strong class="bold">user interface</strong> (<strong class="bold">UI</strong>) will work. Let’s begin by discussing the enemy character.</p>
<h2 id="_idParaDest-181"><a id="_idTextAnchor209"/>Enemy character</h2>
<p>One thing you <a id="_idIndexMarker785"/>should have noticed while playing the <strong class="source-inline">SuperSideScroller</strong> project is that there is no enemy AI by default. Let’s discuss the type of enemy we will want to support and how they will work. </p>
<p>The enemy will have a basic back-and-forth movement pattern and will not support any attacks; only by colliding with the player character will they be able to inflict any damage. However, we need to set the two locations to move between for the enemy AI, as well as decide whether the AI should change locations. Should they constantly move between locations, or should there be a pause before selecting a new location to move to? In <a href="B18531_13.xhtml#_idTextAnchor268"><em class="italic">Chapter 13</em></a>, <em class="italic">Creating and Adding the Enemy Artificial Intelligence</em>, we will use the tools available in UE5 to develop this AI logic.</p>
<h2 id="_idParaDest-182"><a id="_idTextAnchor210"/>Power-ups</h2>
<p>The <strong class="source-inline">SuperSideScroller</strong> game project will support one type of power-up, in the form of a potion that the player can pick up<a id="_idIndexMarker786"/> from the environment. This potion power-up will increase the movement speed of the player and the maximum height to which the player can jump. These effects will only last a short duration before they are removed.</p>
<p>Keeping in mind what you implemented in <em class="italic">Exercise 10.01 – Creating the side-scroller project and using the Character Movement component</em>, and <em class="italic">Activity 10.01 – Making our character jump higher</em>, for the <strong class="source-inline">CharacterMovement</strong> component, you could develop a power-up that changes the effect of gravity on the character, which would provide interesting new ways to navigate the level and combat enemies.</p>
<h2 id="_idParaDest-183"><a id="_idTextAnchor211"/>Collectibles</h2>
<p>Collectibles in video games serve different purposes. In some<a id="_idIndexMarker787"/> cases, collectibles are used as a form of currency to <a id="_idIndexMarker788"/>purchase upgrades, items, and other goods. In others, collectibles serve to improve your score or reward you when enough collectibles have been collected. For the <strong class="source-inline">SuperSideScroller</strong> game project, the coins will serve a single purpose: to give the player the goal of collecting as many coins as they can without being destroyed by the enemy.</p>
<p> Let’s break down the main aspects of our collectible:</p>
<ul>
<li>The collectible needs to interact with our player; this means that we need to use collision detection for the player to collect it and for us to add information to our UI.</li>
<li>The collectible needs a visual static mesh representation so that the player can identify it in the level.</li>
</ul>
<p>The final element of our <strong class="source-inline">SuperSideScroller</strong> project is the brick block. The brick block will serve the following purposes for the <strong class="source-inline">SuperSideScroller</strong> game:</p>
<ul>
<li>Bricks are used as an element of the level’s design. Bricks can be used to access otherwise unreachable areas; enemies can be placed on different elevated sections of bricks to provide variation in gameplay.</li>
<li>Bricks can contain collectible coins. This gives the player an incentive to try and see which blocks contain collectibles and which do not.</li>
</ul>
<h2 id="_idParaDest-184"><a id="_idTextAnchor212"/>Heads-Up Display (HUD)</h2>
<p>The HUD UI can be used to <a id="_idIndexMarker789"/>display important and<a id="_idIndexMarker790"/> relevant information to the player, based on the type of game and the mechanics that you support. For the <strong class="source-inline">SuperSideScroller</strong> project, there will be one HUD element, which will show the player how many coins they have collected. This UI will be updated each time the player collects a coin, and it will reset back to <strong class="source-inline">0</strong> when the player is destroyed.</p>
<p>Now that we have laid out some of the specifics that we will be working toward as part of this project, let’s learn more about the default skeletal mesh provided by the project template in UE5.</p>
<h2 id="_idParaDest-185"><a id="_idTextAnchor213"/>Exercise 10.02 – Exploring the Persona Editor and manipulating the default mannequin skeleton weights</h2>
<p>Now that we have a better <a id="_idIndexMarker791"/>understanding of the different aspects of the <strong class="source-inline">SuperSideScroller</strong> project, let’s go ahead and take a deeper look into the<a id="_idIndexMarker792"/> default mannequin skeletal mesh that is given to us in the <strong class="bold">Side Scroller</strong> template project. </p>
<p>Our goal here is to learn more about the default skeletal mesh and the tools that are given to us in the Persona Editor so that we have a better understanding of how bones, bone weighting, and skeletons work inside UE5.</p>
<p>Follow these steps to complete the exercise:</p>
<ol>
<li value="1">Open Unreal Editor and navigate to <strong class="bold">Content Drawer</strong>.</li>
<li>Navigate to the <strong class="source-inline">/Characters/Mannequins/Meshes/</strong> folder and open the <strong class="source-inline">SK_Mannequin</strong> asset:</li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer275">
<img alt="Figure 10.16 – The SK_Mannequin asset is highlighted and visible here " height="458" src="image/Figure_10.16_B18531.jpg" width="856"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 10.16 – The SK_Mannequin asset is highlighted and visible here</p>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"> Upon opening the <strong class="bold">Skeleton</strong> asset, the <strong class="bold">Persona Editor</strong> area will appear:</p>
<div>
<div class="IMG---Figure" id="_idContainer276">
<img alt="Figure 10.17 – The Persona Editor " height="805" src="image/Figure_10.17_B18531.jpg" width="1430"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 10.17 – The Persona Editor</p>
<p>Let’s briefly break down the Skeleton Editor of the Persona Editor:</p>
<ul>
<li>On the left-hand side (<em class="italic">marked with a 1</em>), we can see the hierarchy of bones that exist in the <a id="_idIndexMarker793"/>skeleton. This is the skeleton that was <a id="_idIndexMarker794"/>made during the rigging process of this character. The <strong class="source-inline">root</strong> bone, as its name suggests, is the root of the skeletal hierarchy. This means that transformative changes to this bone will affect all of the bones in the hierarchy. From here, we can select a bone or a section of bones and see where they are on the character mesh. </li>
<li>Next, we see the <strong class="bold">Skeletal Mesh</strong> preview window (<em class="italic">marked with a 2</em>). It shows us our character mesh, and there are several additional options that we can toggle on/off that will give us a preview of our skeleton and weight painting.</li>
<li>On the right-hand side (<em class="italic">marked with a 3</em>), we have basic transformation options where we can modify individual bones or groups of bones. If the <strong class="bold">Details</strong> panel is not available, navigate to the <strong class="bold">Window</strong> tab at the top of the Persona Editor; you will find it in the list of options there. There are additional settings available that we will take advantage of in the next exercise. Now that we know more about what it is and what we are looking at, let’s see what the actual skeleton looks like on our mannequin.</li>
</ul>
<ol>
<li value="3">Navigate to <strong class="bold">Character</strong>, as shown in <em class="italic">Figure 10.10</em>:</li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer277">
<img alt="Figure 10.18 – The Character options menu  " height="259" src="image/Figure_10.18_B18531.jpg" width="1125"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 10.18 – The Character options menu </p>
<p>This menu allows you to <a id="_idIndexMarker795"/>display the skeleton of the mannequin over the mesh itself.</p>
<ol>
<li value="4">From the drop-down menu, select<a id="_idIndexMarker796"/> the <strong class="bold">Bones</strong> option. Then, make sure the option for <strong class="bold">All Hierarchy</strong> is selected. With this option selected, you will see the outlined skeleton rendering above the mannequin mesh:</li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer278">
<img alt="Figure 10.19 – The skeleton overlayed on top of the mannequin Skeletal Mesh " height="755" src="image/Figure_10.19_B18531.jpg" width="908"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 10.19 – The skeleton overlayed on top of the mannequin Skeletal Mesh</p>
<ol>
<li value="5">Now, hide the mesh <a id="_idIndexMarker797"/>and simply preview the skeletal<a id="_idIndexMarker798"/> hierarchy, for which we can disable the <strong class="bold">Mesh</strong> property: <ul><li>Navigate to <strong class="bold">Character</strong> and, from the drop-down menu, select the <strong class="bold">Mesh</strong> option. </li><li>Deselect the option for <strong class="bold">Mesh</strong>. The result should be as follows:</li></ul></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer279">
<img alt="Figure 10.20 – The skeletal hierarchy of the default character " height="748" src="image/Figure_10.20_B18531.jpg" width="911"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 10.20 – The skeletal hierarchy of the default character</p>
<p>For this exercise, let’s toggle the <strong class="bold">Mesh</strong> visibility back on so that we can see both the mesh and the<a id="_idIndexMarker799"/> skeleton hierarchy.</p>
<p>Finally, we’ll look <a id="_idIndexMarker800"/>at the weight scaling for our default character. </p>
<ol>
<li value="6">To preview this, navigate to <strong class="bold">Character</strong> and, from the drop-down menu, select the <strong class="bold">Mesh</strong> option. Then, select the <strong class="bold">Selected Bone Weight</strong> option toward the bottom in the <strong class="bold">Mesh Overlay Drawing</strong> section:</li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer280">
<img alt="Figure 10.21 – The Selected Bone Weight option " height="835" src="image/Figure_10.21_B18531.jpg" width="1100"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 10.21 – The Selected Bone Weight option</p>
<ol>
<li value="7">Now, if we select <a id="_idIndexMarker801"/>a bone or a group of bones from our<a id="_idIndexMarker802"/> hierarchy, we can see how each bone affects a certain area of our mesh:</li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer281">
<img alt="Figure 10.22 – This is the weight scaling for the spine_03 bone " height="767" src="image/Figure_10.22_B18531.jpg" width="1296"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 10.22 – This is the weight scaling for the spine_03 bone</p>
<p>You will notice that when we are previewing the weight scaling for a particular bone, there is a<a id="_idIndexMarker803"/> spectrum of colors across different sections of the <a id="_idIndexMarker804"/>Skeletal Mesh. This is the weight scaling shown visually instead of numerically. Colors such as <strong class="source-inline">red</strong>, <strong class="source-inline">orange</strong>, and <strong class="source-inline">yellow</strong> indicate larger weighting for a bone, meaning that the highlighted area of the mesh in these colors will be more affected. In areas that are <strong class="source-inline">blue</strong>, <strong class="source-inline">green</strong>, and <strong class="source-inline">cyan</strong>, they will still be affected, but not as significantly. Lastly, areas that have no overlay highlight will not be affected at all by the manipulation of the selected bone. Keep the hierarchy of the skeleton in mind –even though the left arm does not have an overlay color, it will still be affected when you are rotating, scaling, and moving the <strong class="source-inline">spine_03</strong> bone, since the arms are children of the <strong class="source-inline">spine_03</strong> bone. Please refer to the following screenshot to see how the arms are connected to the spine:</p>
<div>
<div class="IMG---Figure" id="_idContainer282">
<img alt="Figure 10.23 – The clavicle_l and clavicle_r bones are children of the spine_03 bone " height="680" src="image/Figure_10.23_B18531.jpg" width="895"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 10.23 – The clavicle_l and clavicle_r bones are children of the spine_03 bone</p>
<p>Let’s continue by manipulating <a id="_idIndexMarker805"/>one of the bones on the mannequin Skeletal Mesh and see <a id="_idIndexMarker806"/>how these changes affect its animation. Follow these steps:</p>
<ol>
<li value="1">In the <strong class="bold">Persona Editor</strong> area, left-click the <strong class="source-inline">thigh_l</strong> bone in the skeletal hierarchy:</li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer283">
<img alt="Figure 10.24 – Here, the thigh_l bone is selected " height="821" src="image/Figure_10.24_B18531.jpg" width="1302"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 10.24 – Here, the thigh_l bone is selected</p>
<p>With the <strong class="source-inline">thigh_l</strong> bone selected, we have a clear indication of how the weight scaling will affect other<a id="_idIndexMarker807"/> parts of the mesh. Also, because of how the<a id="_idIndexMarker808"/> skeleton is structured, any modifications to this bone will not impact the upper body of the mesh:</p>
<div>
<div class="IMG---Figure" id="_idContainer284">
<img alt="Figure 10.25 – On the skeletal bone hierarchy, the thigh_l bone is a child of the pelvis bone " height="395" src="image/Figure_10.25_B18531.jpg" width="389"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 10.25 – On the skeletal bone hierarchy, the thigh_l bone is a child of the pelvis bone</p>
<ol>
<li value="2">Using our knowledge from earlier chapters, change the <strong class="bold">Local Location</strong>, <strong class="bold">Local Rotation</strong>, and <strong class="bold">Scale</strong> values to offset the transform of the <strong class="source-inline">thigh_l</strong> bone. The following screenshot shows an example of the values you can use:</li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer285">
<img alt="Figure 10.26 – The thigh_l values updated " height="131" src="image/Figure_10.26_B18531.jpg" width="568"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 10.26 – The thigh_l values updated</p>
<p>After making these <a id="_idIndexMarker809"/>changes to the bone transform, you will<a id="_idIndexMarker810"/> see that the mannequin’s left leg has completely changed and looks ridiculous:</p>
<div>
<div class="IMG---Figure" id="_idContainer286">
<img alt="Figure 10.27 – The left leg of the mannequin has completely changed " height="742" src="image/Figure_10.27_B18531.jpg" width="906"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 10.27 – The left leg of the mannequin has completely changed</p>
<ol>
<li value="3">Next, in the <strong class="bold">Details</strong> panel, go to the <strong class="bold">Preview Scene Settings</strong> tab. Upon left-clicking this tab, you will see new options, displaying some default parameters and an <strong class="bold">Animation</strong> section. If <strong class="bold">Preview Scene Settings</strong> is not available, navigate to the <strong class="bold">Window</strong> tab at the top of the <strong class="bold">Persona Editor</strong> area; you will find it in the list of options there.</li>
<li>Use the <strong class="bold">Animation</strong> section to preview animations and how they are affected by the changes that are made to the skeleton. For the <strong class="bold">Preview Controller</strong> parameter, change that to the <strong class="bold">Use Specific Animation</strong> option. By doing this, a new option labeled <strong class="bold">Animation</strong> will appear. The <strong class="bold">Animation</strong> parameter allows us to choose an <a id="_idIndexMarker811"/>animation associated with the character skeleton to preview. </li>
<li>Next, left-click on the <a id="_idIndexMarker812"/>drop-down menu and select the <strong class="source-inline">MF_Walk_Fwd</strong> animation. </li>
<li>Finally, you will see the mannequin character playing the walking animation, but their left leg is completely misplaced and mis-scaled:</li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer287">
<img alt="Figure 10.28 – Preview of the updated animation for the mannequin character " height="750" src="image/Figure_10.28_B18531.jpg" width="903"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 10.28 – Preview of the updated animation for the mannequin character</p>
<p>Before moving on, make sure to return the <strong class="source-inline">thigh_l</strong> bone to its original <strong class="bold">Local Location</strong>, <strong class="bold">Local Rotation</strong>, and <strong class="bold">Scale</strong>; otherwise, the animations moving forward will not look correct.</p>
<p>Now that you have completed the<a id="_idIndexMarker813"/> final part of our second exercise, you have <a id="_idIndexMarker814"/>experienced first-hand how skeletal bones affect characters and animations.</p>
<p>Now, let’s move on to our second activity. Here, we will manipulate a different bone on the mannequin character and observe the results of applying different animations.</p>
<h2 id="_idParaDest-186"><a id="_idTextAnchor214"/>Activity 10.02 – Skeletal bone manipulation and animations</h2>
<p>For this activity, we will put the<a id="_idIndexMarker815"/> knowledge we have gained about manipulating bones on the default mannequin into practice and affect how the animations are played out on the skeleton.</p>
<p>Follow these steps to complete this activity:</p>
<ol>
<li value="1">Select the bone that will affect the entire skeleton.</li>
<li>Change the scale of this bone so that the character is half its original size. Use these values to change <strong class="bold">Scale</strong> to <strong class="source-inline">(X=0.500000, Y=0.500000, Z=0.500000)</strong>.</li>
<li>Apply the running animation to this Skeletal Mesh from the <strong class="bold">Preview Scene Settings</strong> tab and observe the animation for the half-sized character.</li>
</ol>
<p>Here is the expected output:</p>
<div>
<div class="IMG---Figure" id="_idContainer288">
<img alt="Figure 10.29 – The character has been halved in size and is performing the running animation " height="752" src="image/Figure_10.29_B18531.jpg" width="909"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 10.29 – The character has been halved in size and is performing the running animation</p>
<p class="callout-heading">Note</p>
<p class="callout">The solution to this activity can be found on GitHub here: <a href="https://github.com/PacktPublishing/Elevating-Game-Experiences-with-Unreal-Engine-5-Second-Edition/tree/main/Activity%20solutions">https://github.com/PacktPublishing/Elevating-Game-Experiences-with-Unreal-Engine-5-Second-Edition/tree/main/Activity%20solutions</a>.</p>
<p>With this activity complete, you<a id="_idIndexMarker816"/> now have practical knowledge of how bone manipulation of skeletons and Skeletal Meshes affects how animations are applied. You have also seen first-hand the effects weight scaling have on the bones of a skeleton.</p>
<p>Now that we have some experience with Skeletal Meshes, skeletons, and animations within UE5, let’s have a deeper discussion about these elements and how they work.</p>
<h1 id="_idParaDest-187"><a id="_idTextAnchor215"/>Understanding animations in Unreal Engine 5</h1>
<p>Let’s break down the main <a id="_idIndexMarker817"/>aspects of animations as they function inside Unreal Engine. More in-depth information about the topics in this section can be found in the documentation that is available directly from Epic Games: <a href="https://docs.unrealengine.com/en-US/Engine/Animation">https://docs.unrealengine.com/en-US/Engine/Animation</a>.</p>
<h2 id="_idParaDest-188"><a id="_idTextAnchor216"/>Skeletons</h2>
<p>Skeletons are Unreal Engine’s representation<a id="_idIndexMarker818"/> of the character rig that was made in external 3D software; we saw this in <em class="italic">Activity 10.02 – Skeletal bone manipulation and animations</em>. There isn’t much more to skeletons that we haven’t discussed already, but the main takeaway is that once the skeleton is in the engine, we can view the skeleton hierarchy, manipulate each bone, and add objects known as sockets. What sockets allow <a id="_idIndexMarker819"/>us to do is attach objects to the bones of our character. We can use these sockets to attach objects such as meshes and manipulate the transformation of the sockets without disrupting the bones’ transformation. In first-person shooters, typically, a weapon socket is made and attached to the appropriate hand.</p>
<h2 id="_idParaDest-189"><a id="_idTextAnchor217"/>Skeletal Meshes</h2>
<p>A Skeletal Mesh is a specific kind of <a id="_idIndexMarker820"/>mesh that combines the 3D character model and the hierarchy of bones that make up its skeleton. The main difference between a Static Mesh and a Skeletal Mesh is that Skeletal Meshes are required for objects that use animations, while Static Meshes cannot use animations due to their lack of a skeleton. We will look more into our main character Skeletal Mesh in the next chapter, but we will be importing our main character Skeletal Mesh in <em class="italic">Activity 10.03 – Importing more custom animations to preview the character running</em>, later in this chapter.</p>
<h2 id="_idParaDest-190"><a id="_idTextAnchor218"/>Animation sequences</h2>
<p>Finally, an animation sequence is an individual<a id="_idIndexMarker821"/> animation that can be played on a specific Skeletal Mesh; the mesh it applies to is determined by the skeleton selected while importing the animation into the engine. We will look at importing a character Skeletal Mesh and a single animation asset together in <em class="italic">Activity 10.03 – Importing more custom animations to preview the character running</em>.</p>
<p>Included in our animation sequence is a timeline that allows us to preview the animation frame by frame, with <a id="_idIndexMarker822"/>additional controls to pause, loop, rewind, and so on.</p>
<p>In the next exercise, you will import a custom character and an animation. The custom character will include a Skeletal Mesh and a skeleton, and the animation will be imported as an animation sequence.</p>
<h2 id="_idParaDest-191"><a id="_idTextAnchor219"/>Exercise 10.03 – Importing and setting up the character and animation</h2>
<p>For our final exercise, we will import our<a id="_idIndexMarker823"/> custom character and a single animation that we will use for the <strong class="source-inline">SuperSideScroller</strong> game’s main character, as well as <a id="_idIndexMarker824"/>create the necessary Character Blueprint and Animation Blueprint. </p>
<p class="callout-heading">Note</p>
<p class="callout">Included with this chapter is a set of files in a folder labeled <strong class="source-inline">Assets</strong>, and it is these files that we will import into the engine. These assets <a id="_idIndexMarker825"/>come from Mixamo: <a href="https://www.mixamo.com/">https://www.mixamo.com/</a>. Feel free to create an account and view the free 3D character and animation content available there.</p>
<p class="callout">The <strong class="source-inline">Assets</strong> content is available in this book’s GitHub repository: <a href="https://github.com/PacktPublishing/Elevating-Game-Experiences-with-Unreal-Engine-5-Second-Edition">https://github.com/PacktPublishing/Elevating-Game-Experiences-with-Unreal-Engine-5-Second-Edition</a>.</p>
<p>Follow these steps to complete this exercise:</p>
<ol>
<li value="1">Open Unreal Editor.</li>
<li>In the <strong class="bold">Content Drawer</strong> area, create a new folder named <strong class="source-inline">MainCharacter</strong>. Within this folder, create two new folders called <strong class="source-inline">Animation</strong> and <strong class="source-inline">Mesh</strong>. The <strong class="bold">Content Browser</strong> area should now look as follows:</li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer289">
<img alt="Figure 10.30 – Folders added to the MainCharacter directory in the Content Browser area " height="349" src="image/Figure_10.30_B18531.jpg" width="823"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 10.30 – Folders added to the MainCharacter directory in the Content Browser area</p>
<ol>
<li value="3">Next, let’s import our character mesh. Inside the <strong class="source-inline">Mesh</strong> folder, right-click and select the <strong class="bold">Import</strong> option. This will open the <strong class="bold">File Explorer</strong> menu. Navigate to the directory where<a id="_idIndexMarker826"/> you saved the <strong class="source-inline">Assets</strong> folder that accompanies <a id="_idIndexMarker827"/>this chapter and find the <strong class="source-inline">MainCharacter.fbx</strong> asset inside the <strong class="source-inline">Character Mesh</strong> folder – for example, <strong class="source-inline">\Assets\Character Mesh\MainCharacter.fbx</strong> – and open that file. </li>
<li>When selecting this asset, the <strong class="bold">FBX Import Options</strong> window will appear. Make sure that the options for <strong class="source-inline">Skeletal Mesh</strong> and <strong class="source-inline">Import Mesh</strong> are set to <strong class="source-inline">check</strong> in their respective checkboxes and leave every other option set to its default setting.</li>
<li>Lastly, we can select the <strong class="bold">Import</strong> option so that our FBX asset will be imported into the engine. This will include the necessary materials created within the FBX; a <strong class="source-inline">Physics Asset</strong>, which will automatically be created for us and assigned to <strong class="source-inline">Skeletal Mesh</strong>; and a <strong class="source-inline">Skeleton Asset</strong>.</li>
</ol>
<p class="callout-heading">Note</p>
<p class="callout">Ignore any warnings that may appear when importing the <strong class="source-inline">FBX</strong> file; they are unimportant and will not affect our project moving forward.</p>
<p>Now that we have our character, let’s import an animation. Follow these steps:</p>
<ol>
<li value="1">Inside our <strong class="source-inline">Animation</strong> folder in the <strong class="source-inline">MainCharacter</strong> folder directory, right-click and select <strong class="bold">Import</strong>. </li>
<li>Navigate to the directory <a id="_idIndexMarker828"/>where you saved the <strong class="source-inline">Assets</strong> folder that accompanies<a id="_idIndexMarker829"/> this chapter and locate the <strong class="source-inline">Idle.fbx</strong> asset inside the <strong class="source-inline">Animations/Idle</strong> folder – for example, <strong class="source-inline">\Assets\Animations\Idle\Idle.fbx</strong> – and open that file. </li>
</ol>
<p>When selecting this asset, an almost identical window will appear as when we imported our character Skeletal Mesh. Since this asset is only an animation and not a Skeletal Mesh/skeleton, we don’t have the same options as before, but there is one crucial parameter that we need to set correctly: <strong class="source-inline">Skeleton</strong>.</p>
<p>The <strong class="source-inline">Skeleton</strong> parameter under the <strong class="bold">Mesh</strong> category of our <strong class="bold">FBX</strong> import options tells the animation to which skeleton the animation applies. Without this parameter set, we cannot import our animation, and applying the animation to the wrong skeleton can have disastrous results or cause the animation to not import altogether. Luckily for us, our project is simple, and we have already imported our character’s Skeletal Mesh and skeleton. </p>
<ol>
<li value="3">Select <strong class="source-inline">MainCharacter_Skeleton</strong> and choose <strong class="bold">Import All</strong> at the bottom; leave all the other parameters set to their defaults:</li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer290">
<img alt="Figure 10.31 – The settings when importing the Idle.fbx animation " height="815" src="image/Figure_10.31_B18531.jpg" width="443"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 10.31 – The settings when importing the Idle.fbx animation</p>
<p>Understanding the importing process for both skeletal meshes and animations is crucial, and in the<a id="_idIndexMarker830"/> next activity, you will import the remaining animations. Let’s <a id="_idIndexMarker831"/>continue this exercise by creating both the Character Blueprint and the Animation Blueprint for the <strong class="source-inline">SuperSideScroller</strong> game’s main character.</p>
<p>Now, although the <strong class="bold">Side Scroller</strong> template project does include a Blueprint for our character and other assets such as an Animation Blueprint, we will want to create our own versions of these assets for the sake of organization and good practice as game developers.</p>
<ol>
<li value="4">Create a new folder <a id="_idIndexMarker832"/>under our <strong class="source-inline">MainCharacter</strong> directory in the <strong class="bold">Content Drawer</strong> area and name this folder <strong class="source-inline">Blueprints</strong>. In this directory, create a <a id="_idIndexMarker833"/>new Blueprint based on the <strong class="source-inline">SideScrollerCharacter</strong> class under <strong class="source-inline">All Classes</strong>. Name this new Blueprint <strong class="source-inline">BP_SuperSideScroller_MainCharacter</strong>:</li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer291">
<img alt="Figure 10.32 – The SideScrollerCharacter class to be used as the parent class for our character Blueprint " height="639" src="image/Figure_10.32_B18531.jpg" width="628"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 10.32 – The SideScrollerCharacter class to be used as the parent class for our character Blueprint</p>
<ol>
<li value="5">In our <strong class="source-inline">Blueprints</strong> directory, right-click in an empty area of the <strong class="bold">Content Browser</strong> area, hover over the <strong class="bold">Animation</strong> option, and select <strong class="bold">Animation Blueprint</strong>:</li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer292">
<img alt="Figure 10.33 – The Animation Blueprint option under the Animation category " height="568" src="image/Figure_10.33_B18531.jpg" width="1557"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 10.33 – The Animation Blueprint option under the Animation category</p>
<ol>
<li value="6">After we select this <a id="_idIndexMarker834"/>option, a new window will appear. This new<a id="_idIndexMarker835"/> window requires us to apply a parent class and a skeleton to our Animation Blueprint. In our case, use <strong class="source-inline">MainCharacter_Skeleton</strong>, select <strong class="bold">OK</strong>, and name the Animation Blueprint asset <strong class="source-inline">AnimBP_SuperSideScroller_MainCharacter</strong>:</li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer293">
<img alt="Figure 10.34 – The settings we need when creating our Animation Blueprint " height="650" src="image/Figure_10.34_B18531.jpg" width="631"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 10.34 – The settings we need when creating our Animation Blueprint</p>
<ol>
<li value="7">When we <a id="_idIndexMarker836"/>open our Character<a id="_idIndexMarker837"/> Blueprint, <strong class="source-inline">BP_SuperSideScroller_MainCharacter</strong>, and select the <strong class="bold">Mesh</strong> component, we will find a handful of parameters that we can change:</li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer294">
<img alt="Figure 10.35 – The SuperSideScroller Character Blueprint using the mannequin Skeletal Mesh " height="710" src="image/Figure_10.35_B18531.jpg" width="1372"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 10.35 – The SuperSideScroller Character Blueprint using the mannequin Skeletal Mesh</p>
<ol>
<li value="8">Under the <strong class="bold">Mesh</strong> category, we<a id="_idIndexMarker838"/> have the option to update the Skeletal Mesh. Find<a id="_idIndexMarker839"/> our <strong class="source-inline">MainCharacter</strong> Skeletal Mesh and assign it to this parameter:</li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer295">
<img alt="Figure 10.36 – The settings we need for our Mesh component " height="821" src="image/Figure_10.36_B18531.jpg" width="980"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 10.36 – The settings we need for our Mesh component</p>
<p>While still in our Character Blueprint and with the <strong class="bold">Mesh</strong> component selected, we can find the <strong class="bold">Animation</strong> category just above the <strong class="bold">Mesh</strong> category. Luckily, by default, the <strong class="bold">Animation Mode</strong> parameter is already set to <strong class="bold">Use Animation Blueprint</strong>, which is the setting we need.</p>
<ol>
<li value="9">Now, assign the <strong class="source-inline">Anim</strong> class parameter to our new Animation Blueprint, <strong class="source-inline">AnimBP_SuperSideScroller_MainCharacter</strong>. Finally, head back to our default <strong class="source-inline">SideScrollerExampleMap</strong> level and replace the default character with our new Character Blueprint.</li>
<li>Next, make sure that we<a id="_idIndexMarker840"/> have <strong class="source-inline">BP_SuperSideScroller_MainCharacter</strong> selected in the <strong class="bold">Content Browser</strong> area, right-click on the default character in our map, and choose to replace it with our new character: </li>
</ol>
<p>With our new character in the<a id="_idIndexMarker841"/> level, we can play in the editor and move around the level. The result should look something like what’s shown in the following screenshot; our character is in the default T-pose and moving around the level environment:</p>
<div>
<div class="IMG---Figure" id="_idContainer296">
<img alt="Figure 10.37 – You now have the custom character running around the level " height="638" src="image/Figure_10.37_B18531.jpg" width="1099"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 10.37 – You now have the custom character running around the level</p>
<p>With our final exercise complete, you have a full understanding of how to import custom Skeletal Meshes <a id="_idIndexMarker842"/>and animations. Additionally, you learned how to create a Character<a id="_idIndexMarker843"/> Blueprint and an Animation Blueprint from scratch and how to use those assets to create the base for the <strong class="source-inline">SuperSideScroller</strong> character.</p>
<p>Let’s move on to the final activity of this chapter, where you will be challenged to import the remaining animations for the character and preview the running animation inside Persona Editor.</p>
<h2 id="_idParaDest-192"><a id="_idTextAnchor220"/>Activity 10.03 – Importing more custom animations to preview the character running</h2>
<p>This activity aims to<a id="_idIndexMarker844"/> import the remaining animations, such as running for the player character, and preview the running animation on the character skeleton to ensure that it looks correct. </p>
<p>By the end of the activity, all of the player character animations will be imported into the project and you will be ready to use these animations to bring the player character to life in the next chapter.</p>
<p>Follow these steps to complete this activity:</p>
<ol>
<li value="1">As a reminder, all of the animation assets we need to import exist in the <strong class="source-inline">\Assets\Animations</strong> directory, wherever you may have saved the original .<strong class="source-inline">zip</strong> folder. Import all of the remaining animations in the <strong class="source-inline">MainCharacter/Animation</strong> folder. Importing the remaining animation assets will work the same way as in <em class="italic">Exercise 10.03 – Importing and setting up the character and animation</em>, when you imported the <strong class="source-inline">Idle</strong> animation.</li>
<li>Navigate to the <strong class="source-inline">MainCharacter</strong> skeleton and apply the <strong class="source-inline">Running</strong> animation you imported in the previous step.</li>
<li>Finally, with the <strong class="source-inline">Running</strong> animation applied, preview the character animation in the <strong class="bold">Persona Editor</strong> area.</li>
</ol>
<p>Here is the expected output:</p>
<div>
<div class="IMG---Figure" id="_idContainer297">
<img alt="Figure 10.38 – The expected output of the character with additional custom imported assets " height="749" src="image/Figure_10.38_B18531.jpg" width="912"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 10.38 – The expected output of the character with additional custom imported assets</p>
<p class="callout-heading">Note</p>
<p class="callout">The solution to this activity can be found on GitHub here: <a href="https://github.com/PacktPublishing/Elevating-Game-Experiences-with-Unreal-Engine-5-Second-Edition/tree/main/Activity%20solutions">https://github.com/PacktPublishing/Elevating-Game-Experiences-with-Unreal-Engine-5-Second-Edition/tree/main/Activity%20solutions</a>. </p>
<p>With this final activity <a id="_idIndexMarker845"/>completed, you have now experienced first-hand the process of importing custom skeletal and animation assets into UE5. This import process, regardless of the type of asset you are importing, is commonplace in the games industry, and you must be comfortable with it.</p>
<h1 id="_idParaDest-193"><a id="_idTextAnchor221"/>Summary</h1>
<p>With the player character skeleton, Skeletal Mesh, and animations imported into the engine, we can move on to the next chapter, where we will prepare the character movement and Update Animation Blueprint so that the character can animate while moving around the level. </p>
<p>From the exercises and activities of this chapter, you learned about how the skeleton and bones are used to animate and manipulate the character. With first-hand experience in importing and applying animations in UE5, you now have a strong understanding of the animation pipeline, from the character concept to the final assets being imported for your project. </p>
<p>We also took the necessary steps to outline what we want to accomplish with our <strong class="source-inline">SuperSideScroller</strong> game; that is, establishing how we want enemies to work, which power-ups to develop, how collectibles will work, and how the player HUD will look. Lastly, we explored how the character movement component works and how to manipulate its parameters to establish the character movement we desire for our game.</p>
<p>Additionally, you learned about what we will use in the next chapter, such as blend spaces for character movement animation blending. With the <strong class="source-inline">SuperSideScroller</strong> project template created and the player character ready, in the next chapter, we’ll animate the character with an Animation Blueprint.</p>
</div>
</div></body></html>