<html><head></head><body><div><div><div><h1 id="_idParaDest-4" class="mainHeading">Preface</h1>
    <p class="normal">Have you ever caught yourself watching your player character and the enemies in a first- or third-person game running and jumping around, firing and dodging, as you’re pressing buttons and shooting at targets, and asked yourself:</p>
    <p class="normal"><em class="italic">Wait... how do all the characters stay on the ground? How do they know where the walls are? And how does the button know that it was pressed by me and not by my teammate?</em></p>
    <p class="normal">To answer these questions, you would need to start up a modern 3D engine such as Unreal Engine, Unity, or Godot. You would play around with models and animations, levels, assets, menus, and other objects. By working your way through tutorials and videos, you would learn how to build a world similar to the game you love and be happy with what you have achieved.</p>
    <p class="normal">But what if your hunger for the low-level details, for the implementation of several features, remains? Even after moving from visual programming to the underlying programming languages of the 3D engine, you are still not satisfied. The complexity of the code is way too heavy to learn just the basics from it. So, you are again on the road, searching for answers to those questions...</p>
    <p class="normal">Does that sound familiar to you? Many game programmers start off with this kind of curiosity, a will to look “under the hood” of the things they see, and an urge to understand how models are animated and animations are blended. This might be how facial animations work or a simple “nodding” of the head is done, or how to make characters walk and run on the ground polygons of the level but not clip through walls.</p>
    <p class="normal">This book aims to answer your questions about the implementation details of 3D game character animations. You will start off with nothing more than a basic OpenGL or Vulkan renderer to draw triangles to the screen – and then you will be guided all the way up the hill, from loading a single character model from a file to multiple instances of different models roaming around a game map, detecting and avoiding walls and other instances in the virtual world, following predefined paths, and being able to interact with another instance.</p>
    <p class="normal">With the knowledge gained from this book, you will see the animations in games with a different pair of eyes, smiling a lot because you know how they’re made.</p>
    <h1 id="_idParaDest-5" class="heading-1">Who this book is for</h1>
    <p class="normal">If you are already familiar with C++ and character animations but want to learn more about the implementation details and advanced character animation topics, similar to the animations found in 3D games, this book is for you.</p>
    <h1 id="_idParaDest-6" class="heading-1">What this book covers</h1>
    <p class="normal"><a href="Chapter_1.xhtml"><em class="italic">Chapter 1</em></a>, <em class="italic">Working with Open Asset Import Library</em>, gives an overview of the data structures of <strong class="keyWord">Open Asset Import Library</strong> (or <strong class="keyWord">assimp</strong>) and explains how to load a character model from a file. The fileloading process will be enhanced by adding an ImGui-based <strong class="keyWord">Open File</strong> dialog. In addition, code to add and remove model and instances at runtime will be covered.</p>
    <p class="normal"><a href="Chapter_2.xhtml"><em class="italic">Chapter 2</em></a>, <em class="italic">Moving Animation Calculations from CPU to GPU</em>, introduces compute shaders to offload calculations to the graphics processor and store lookup data in GPU memory. By using the massively parallel architecture of the GPU, computing the node positions of all instances will be accelerated, and the CPU will be free again for other tasks.</p>
    <p class="normal"><a href="Chapter_3.xhtml"><em class="italic">Chapter 3</em></a>, <em class="italic">Adding a Visual Selection</em>, explains how to support the user of the application in the task of character instance selection. As well as highlighting the currently selected instance on the screen, the ability to select any instance by using the mouse will be added.</p>
    <p class="normal"><a href="Chapter_4.xhtml"><em class="italic">Chapter 4</em></a>, <em class="italic">Enhancing Application Handling</em>, introduces a separation of the application into a view mode and an edit mode with partially different configurations. Also, undo and redo operations will be implemented.</p>
    <p class="normal"><a href="Chapter_5.xhtml"><em class="italic">Chapter 5</em></a>, <em class="italic">Saving and Loading the Configuration</em>, covers storing the current configuration of the application plus the loaded models and created instances in a YAML file, as well as loading the configuration from a file back into the application.</p>
    <p class="normal"><a href="Chapter_6.xhtml"><em class="italic">Chapter 6</em></a>, <em class="italic">Extending Camera Handling</em>, shows how different camera types and configurations can be added. The new camera settings include orthogonal projection and first-person and third-person views.</p>
    <p class="normal"><a href="Chapter_7.xhtml"><em class="italic">Chapter 7</em></a>, <em class="italic">Enhancing Animation Controls</em>, covers basic animation blending, action states, and linking the action states with the animation clips. By the end of the chapter, you will be able to control the instances using the keyboard and mouse, including additional actions such as jumping, rolling, or waving.</p>
    <p class="normal"><a href="Chapter_8.xhtml"><em class="italic">Chapter 8</em></a>, <em class="italic">An Introduction to Collision Detection</em>, explains the path to instance/instance collision detection and the reaction to collisions, based on a quadtree, axis-aligned bounding boxes, and bounding spheres.</p>
    <p class="normal"><a href="Chapter_9.xhtml"><em class="italic">Chapter 9</em></a>, <em class="italic">Adding Behavior and Interaction</em>, adds a node-based graphical editor to control instance behavior by creating and connecting simple nodes. The nodes will be extended to cover a configurable interaction between instances.</p>
    <p class="normal"><a href="Chapter_10.xhtml"><em class="italic">Chapter 10</em></a>, <em class="italic">Advanced Animation Blending</em>, introduces face animations to express emotions and additive animation blending to move the head independently of the rest of the character model’s body.</p>
    <p class="normal"><a href="Chapter_11.xhtml"><em class="italic">Chapter 11</em></a>, <em class="italic">Loading a Game Map</em>, explains the differences between the dynamic character model instances and static level geometry, and how to load and process level data to achieve a good performance.</p>
    <p class="normal"><a href="Chapter_12.xhtml"><em class="italic">Chapter 12</em></a>, <em class="italic">Advanced Collision Detection</em>, extends collision detection to the level geometry added in <a href="Chapter_11.xhtml"><em class="italic">Chapter 11</em></a>. Simple gravity will be added to keep the model instances on the level floor, and you will see how to avoid instance collisions with walls.</p>
    <p class="normal"><a href="Chapter_13.xhtml"><em class="italic">Chapter 13</em></a>, <em class="italic">Adding Simple Navigation</em>, covers path-finding and navigation inside the loaded game map. A well-known path-finding algorithm will be used to let the instances roam around freely in the level.</p>
    <p class="normal"><a href="Chapter_14.xhtml"><em class="italic">Chapter 14</em></a>, <em class="italic">Creating Immersive Interactive Worlds</em>, gives tips and resources on how to add more cool features to the character model editor, advancing the code step by step to a simple game engine.</p>
    <h1 id="_idParaDest-7" class="heading-1">To get the most out of this book</h1>
    <p class="normal">To get the most out of this book, you should have at least intermediate-level experience in C++ and knowledge about vector/matrix mathematics, as well as understanding the basics of skeletal animation. Any special or advanced features will be explained, and sources to learn more about these features are included in the chapters of their first usage. But you should be able to debug simple C++ problems by yourself (i.e., by using logging statements, or by attaching a debugger to the application).</p>
    <p class="normal">The code is written for OpenGL 4.6 Core and Vulkan 1.1+. Both graphics APIs are widely supported in modern GPUs. The oldest graphics cards known to work with these API versions are the Intel HD 4000 series, made about 10 years ago.</p>
    <table id="table001" class="table-container">
      <tbody>
        <tr>
          <td class="table-cell">
            <p class="normal">Software covered in the book</p>
          </td>
          <td class="table-cell">
            <p class="normal">OS requirements</p>
          </td>
          <td class="table-cell"/>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal">OpenGL 4.6 and Vulkan 1.1+</p>
          </td>
          <td class="table-cell">
            <p class="normal">Windows or Linux</p>
          </td>
          <td class="table-cell">
            <p class="normal">C++17 and above (upto C++26)</p>
          </td>
        </tr>
      </tbody>
    </table>
    <p class="normal">The example code presented in the book should compile on any desktop computer or laptop running a recent version of Windows and Linux. The code has been tested with the following combinations:</p>
    <ul>
      <li class="bulletList">Windows 10 with Visual Studio 2022</li>
      <li class="bulletList">Windows 10 with Eclipse 2024-09, using GCC from MSYS2</li>
      <li class="bulletList">Ubuntu 24.04 LTS with Eclipse 2024-09, using GCC or Clang</li>
      <li class="bulletList">Ubuntu 24.04 LTS, compiling on the command line, using GCC or Clang</li>
    </ul>
    <p class="normal">If you are using the digital version of this book, we advise you to type the code yourself or access the code from the book’s GitHub repository (a link is available in the next section). Doing so will help you avoid any potential errors related to the copying and pasting of code.</p>
    <p class="normal">The full source code for the examples is available from the book’s GitHub repository (a link is available in the next section). The chapters in the book contain only excerpts from the code, covering the important parts.</p>
    <h2 id="_idParaDest-8" class="heading-2">Download the example code files</h2>
    <p class="normal">You can download the example code files for this book from GitHub at <a href="https://github.com/PacktPublishing/Mastering-Cpp-Game-Animation-Programming">https://github.com/PacktPublishing/Mastering-Cpp-Game-Animation-Programming</a>. If there’s an update to the code, it will be updated in the GitHub repository.</p>
    <p class="normal">We also have other code bundles from our rich catalog of books and videos available at <a href="https://github.com/PacktPublishing">https:// github.com/PacktPublishing</a>. Check them out!</p>
    <h2 id="_idParaDest-9" class="heading-2">Download the color images</h2>
    <p class="normal">We also provide a PDF file that has color images of the screenshots/diagrams used in this book. You can download it here: <a href="https://packt.link/gbp/9781835881927">https://packt.link/gbp/9781835881927</a>.</p>
    <h2 id="_idParaDest-10" class="heading-2">Conventions used</h2>
    <p class="normal">There are a number of text conventions used throughout this book:</p>
    <p class="normal"><code class="inlineCode">CodeInText</code>: Indicates code words in text, database table names, folder names, filenames, file extensions, pathnames, dummy URLs, user input, and Twitter handles. For example: “Usually, you would use <code class="inlineCode">nullptr</code> to signal the absence of an object instance.”</p>
    <p class="normal"><strong class="keyWord">Bold</strong>: Indicates a new term, an important word, or words that you see on the screen. For instance, words in menus or dialog boxes appear in the text like this. For example: “The <strong class="keyWord">Import Model</strong> button may seem a bit misplaced, but now we have the chance to change the functionality.”</p>
    <p class="normal">A block of code is set as follows:</p>
    <pre class="programlisting code"><code class="hljs-code">std::shared_ptr&lt;AssimpModel&gt; nullModel = std::make_shared&lt;AssimpModel&gt;();
mModelInstData.miModelList.emplace_back(nullModel)
</code></pre>
    <p class="normal">When we wish to draw your attention to a particular part of a code block, the relevant lines or items are set in bold:</p>
    <pre class="programlisting code"><code class="hljs-code"><strong class="hljs-type-slc">mat4</strong><strong class="hljs-slc"> worldPosSkinMat = worldPos[</strong><strong class="hljs-built_in-slc">gl_InstanceID</strong><strong class="hljs-slc">] * skinMat;</strong>
gl_Position = projection * view * <strong class="hljs-slc">worldPosSkinMat</strong> * vec4(aPos.x, aPos.y, aPos.z, 1.0);
...
normal = transpose(inverse(<strong class="hljs-slc">worldPosSkinMat</strong>)) * vec4(aNormal.x, aNormal.y, aNormal.z, 1.0);
</code></pre>
    <p class="normal">Any command-line input or output is written as follows:</p>
    <pre class="programlisting con"><code class="hljs-con">$ cd chapter01/01_assimp_opengl
$ mkdir build &amp;&amp; cd build
$ cmake -G Ninja .. &amp;&amp; ninja &amp;&amp; ./Main
</code></pre>
    <div><p class="normal"> Warnings or important notes appear like this.</p>
    </div>
    <div><p class="normal"> Tips and tricks appear like this.</p>
    </div>
    <h1 id="_idParaDest-11" class="heading-1">Get in touch</h1>
    <p class="normal">Feedback from our readers is always welcome.</p>
    <p class="normal"><strong class="keyWord">General feedback</strong>: Email <code class="inlineCode">feedback@packtpub.com</code> and mention the book’s title in the subject of your message. If you have questions about any aspect of this book, please email us at <code class="inlineCode">questions@packtpub.com</code>.</p>
    <p class="normal"><strong class="keyWord">Errata</strong>: Although we have taken every care to ensure the accuracy of our content, mistakes do happen. If you have found a mistake in this book, we would be grateful if you reported this to us. Please visit <a href="http://www.packtpub.com/submit-errata">http://www.packtpub.com/submit-errata</a>, click <strong class="keyWord">Submit Errata</strong>, and fill in the form.</p>
    <p class="normal"><strong class="keyWord">Piracy</strong>: If you come across any illegal copies of our works in any form on the internet, we would be grateful if you would provide us with the location address or website name. Please contact us at <code class="inlineCode">copyright@packtpub.com</code> with a link to the material.</p>
    <p class="normal"><strong class="keyWord">If you are interested in becoming an author</strong>: If there is a topic that you have expertise in and you are interested in either writing or contributing to a book, please visit <a href="http://authors.packtpub.com">http://authors.packtpub.com</a>.</p>
  </div>
  <div><h1 id="_idParaDest-12" class="heading-1">Share Your Thoughts</h1>
    <p class="normal">Once you’ve read <em class="italic">Mastering C++ Game Animation Programming</em>, we’d love to hear your thoughts! Please <a href="https://packt.link/r/1835881939">click here to go straight to the Amazon review page</a> for this book and share your feedback.</p>
    <p class="normal">Your review is important to us and the tech community and will help us make sure we’re delivering excellent quality content.</p>
  </div>
  <div><p class="eop"/>
    <h1 id="_idParaDest-13" class="heading-1">Download a free PDF copy of this book</h1>
    <p class="normal">Thanks for purchasing this book!</p>
    <p class="normal">Do you like to read on the go but are unable to carry your print books everywhere?</p>
    <p class="normal">Is your eBook purchase not compatible with the device of your choice?</p>
    <p class="normal">Don’t worry, now with every Packt book you get a DRM-free PDF version of that book at no cost.</p>
    <p class="normal">Read anywhere, any place, on any device. Search, copy, and paste code from your favorite technical books directly into your application. </p>
    <p class="normal">The perks don’t stop there, you can get exclusive access to discounts, newsletters, and great free content in your inbox daily</p>
    <p class="normal">Follow these simple steps to get the benefits:</p>
    <ol>
      <li class="numberedList" value="1">Scan the QR code or visit the link below</li>
    </ol>
    <figure class="mediaobject"><img src="img/B22428_QR_Free_PDF.png" alt="Qr code  Description automatically generated" width="200" height="200"/></figure>
    <p class="packt_figref"><a href="https://packt.link/free-ebook/978-1-83588-192-7">https://packt.link/free-ebook/978-1-83588-192-7</a></p>
    <ol>
      <li class="numberedList" value="2">Submit your proof of purchase</li>
      <li class="numberedList">That’s it! We’ll send your free PDF and other benefits to your email directly</li>
    </ol>
  </div>
</div></div></body></html>