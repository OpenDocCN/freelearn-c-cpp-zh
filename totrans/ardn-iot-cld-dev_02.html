<html><head></head><body>
<div id="_idContainer040">
<h1 class="chapter-number" id="_idParaDest-38"><a id="_idTextAnchor038"/><span class="koboSpan" id="kobo.1.1">2</span></h1>
<h1 id="_idParaDest-39"><a id="_idTextAnchor039"/><span class="koboSpan" id="kobo.2.1">First Look at the Arduino IoT Cloud</span></h1>
<p><span class="koboSpan" id="kobo.3.1">Every developer/programmer/cloud engineer, when they start their coding/cloud journey, is very curious to get started with the platform immediately. </span><span class="koboSpan" id="kobo.3.2">Well, guys, your wait is over, and we welcome you to this chapter with a </span><em class="italic"><span class="koboSpan" id="kobo.4.1">Hello World</span></em><span class="koboSpan" id="kobo.5.1"> greeting. </span><span class="koboSpan" id="kobo.5.2">This chapter not only provides you with a </span><em class="italic"><span class="koboSpan" id="kobo.6.1">Hello World</span></em><span class="koboSpan" id="kobo.7.1"> example but also comes with many important core concepts of how the </span><strong class="bold"><span class="koboSpan" id="kobo.8.1">Arduino IoT Cloud</span></strong><span class="koboSpan" id="kobo.9.1"> works. </span><span class="koboSpan" id="kobo.9.2">This is the most important chapter for all readers, as this chapter will give you an overview of how to get started with the Arduino IoT Cloud, as the Arduino IoT Cloud platform has significant differences compared to other platforms. </span><span class="koboSpan" id="kobo.9.3">This chapter is divided into two parts; in the first part, you will learn how to use the </span><strong class="bold"><span class="koboSpan" id="kobo.10.1">Arduino MKR Wi-Fi 1010</span></strong><span class="koboSpan" id="kobo.11.1"> board to interact with the Arduino IoT Cloud platform, and in the second part, you will learn how to use an </span><strong class="bold"><span class="koboSpan" id="kobo.12.1">API</span></strong><span class="koboSpan" id="kobo.13.1"> with </span><strong class="bold"><span class="koboSpan" id="kobo.14.1">Node-RED</span></strong><span class="koboSpan" id="kobo.15.1"> for communication with the </span><span class="No-Break"><span class="koboSpan" id="kobo.16.1">cloud platform.</span></span></p>
<p><span class="koboSpan" id="kobo.17.1">Along with these examples, you will learn the difference between a </span><strong class="bold"><span class="koboSpan" id="kobo.18.1">Thing</span></strong><span class="koboSpan" id="kobo.19.1"> and a </span><strong class="bold"><span class="koboSpan" id="kobo.20.1">device</span></strong><span class="koboSpan" id="kobo.21.1">, what a </span><strong class="bold"><span class="koboSpan" id="kobo.22.1">variable</span></strong><span class="koboSpan" id="kobo.23.1"> is, and different properties of Thing. </span><span class="koboSpan" id="kobo.23.2">You will also get a taste of the </span><strong class="bold"><span class="koboSpan" id="kobo.24.1">Arduino Web Editor</span></strong><span class="koboSpan" id="kobo.25.1">, which is an awesome feature with interesting stuff. </span><span class="koboSpan" id="kobo.25.2">After that, we will move on to the dashboard, which helps a user control a Thing and visualize sensor data. </span><span class="koboSpan" id="kobo.25.3">So, guys, buckle up for this </span><span class="No-Break"><span class="koboSpan" id="kobo.26.1">interesting journey.</span></span></p>
<p><span class="koboSpan" id="kobo.27.1">The following topics will be covered in </span><span class="No-Break"><span class="koboSpan" id="kobo.28.1">this chapter:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.29.1">Understanding how the Arduino IoT </span><span class="No-Break"><span class="koboSpan" id="kobo.30.1">Cloud works</span></span></li>
<li><span class="koboSpan" id="kobo.31.1">The Arduino IoT Cloud and an MKR1010 Hello </span><span class="No-Break"><span class="koboSpan" id="kobo.32.1">World example</span></span></li>
<li><span class="koboSpan" id="kobo.33.1">An introduction </span><span class="No-Break"><span class="koboSpan" id="kobo.34.1">to Node-RED</span></span></li>
<li><span class="koboSpan" id="kobo.35.1">The Arduino IoT Cloud and a Node-RED Hello </span><span class="No-Break"><span class="koboSpan" id="kobo.36.1">World example</span></span></li>
</ul>
<h1 id="_idParaDest-40"><a id="_idTextAnchor040"/><span class="koboSpan" id="kobo.37.1">Technical requirements</span></h1>
<p><span class="koboSpan" id="kobo.38.1">Before we start, we first need to set up an Arduino IoT Cloud-compatible board. </span><span class="koboSpan" id="kobo.38.2">I recommend the Arduino MKR Wi-Fi 1010, but there is a complete list of compatible boards at </span><a href="https://docs.arduino.cc/arduino-cloud/getting-started/technical-reference#compatible-hardware"><span class="koboSpan" id="kobo.39.1">https://docs.arduino.cc/arduino-cloud/getting-started/technical-reference#compatible-hardware</span></a><span class="koboSpan" id="kobo.40.1">, which you can choose according to </span><span class="No-Break"><span class="koboSpan" id="kobo.41.1">your requirements.</span></span></p>
<p><span class="koboSpan" id="kobo.42.1">Second, you should have an Arduino IoT Cloud account. </span><span class="koboSpan" id="kobo.42.2">If you don’t, then sign up at </span><a href="https://cloud.arduino.cc/"><span class="koboSpan" id="kobo.43.1">https://cloud.arduino.cc/</span></a><span class="koboSpan" id="kobo.44.1"> and select a plan according to </span><span class="No-Break"><span class="koboSpan" id="kobo.45.1">your requirements.</span></span></p>
<p><span class="koboSpan" id="kobo.46.1">Third, we need to download and install the </span><strong class="bold"><span class="koboSpan" id="kobo.47.1">Arduino Create Agent</span></strong><span class="koboSpan" id="kobo.48.1">. </span><span class="koboSpan" id="kobo.48.2">Arduino has created a beautiful web-based guide for installation </span><span class="No-Break"><span class="koboSpan" id="kobo.49.1">at </span></span><a href="https://create.arduino.cc/getting-started/plugin/welcome"><span class="No-Break"><span class="koboSpan" id="kobo.50.1">https://create.arduino.cc/getting-started/plugin/welcome</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.51.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.52.1">The second part of the chapter is related to Node-RED, which will be used for devices that are not officially supported by the Arduino IoT Cloud such as Raspberry Pi and older versions of Arduino development boards. </span><span class="koboSpan" id="kobo.52.2">Download and install Node-RED according to your operating system </span><span class="No-Break"><span class="koboSpan" id="kobo.53.1">from </span></span><a href="https://nodered.org/docs/getting-started/local"><span class="No-Break"><span class="koboSpan" id="kobo.54.1">https://nodered.org/docs/getting-started/local</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.55.1">.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.56.1">Important note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.57.1">All the Arduino IoT Cloud plans are available on the Arduino IoT Cloud website. </span><span class="koboSpan" id="kobo.57.2">You can visit the following link for updated plans, pricing, and features: </span><a href="https://cloud.arduino.cc/plans/"><span class="koboSpan" id="kobo.58.1">https://cloud.arduino.cc/plans/</span></a><span class="koboSpan" id="kobo.59.1">. </span><span class="koboSpan" id="kobo.59.2">If you are from an educational institute, then there are plenty of good plans for students and faculties. </span><span class="koboSpan" id="kobo.59.3">Arduino also offers customized plans to business organizations according to </span><span class="No-Break"><span class="koboSpan" id="kobo.60.1">their requirements.</span></span></p>
<h1 id="_idParaDest-41"><a id="_idTextAnchor041"/><span class="koboSpan" id="kobo.61.1">Understanding how the Arduino IoT Cloud works</span></h1>
<p><span class="koboSpan" id="kobo.62.1">So, before we start our </span><a id="_idIndexMarker133"/><span class="koboSpan" id="kobo.63.1">Arduino IoT Cloud journey, we need to understand how it operates because it’s a little bit different from traditional IoT cloud platforms. </span><span class="koboSpan" id="kobo.63.2">As a result, the Arduino IoT Cloud is a more flexible, secure, and industry-deployment-ready IoT solution. </span><span class="koboSpan" id="kobo.63.3">Firstly, we will understand the design of the Arduino IoT Cloud with the following diagram, which will help you to understand the key pillars of the Arduino </span><span class="No-Break"><span class="koboSpan" id="kobo.64.1">IoT Cloud:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer014">
<span class="koboSpan" id="kobo.65.1"><img alt="Figure 2.1 – ﻿The ﻿Arduino IoT Cloud architecture" src="image/B19752_02_01.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.66.1">Figure 2.1 – The Arduino IoT Cloud architecture</span></p>
<p><span class="koboSpan" id="kobo.67.1">Most cloud platforms work with the </span><a id="_idIndexMarker134"/><span class="koboSpan" id="kobo.68.1">concept of devices and sensors, but in the Arduino IoT Cloud, we have the concept of the Thing, which includes devices and </span><a id="_idIndexMarker135"/><span class="koboSpan" id="kobo.69.1">variables known as </span><strong class="bold"><span class="koboSpan" id="kobo.70.1">sensors</span></strong><span class="koboSpan" id="kobo.71.1">/</span><strong class="bold"><span class="koboSpan" id="kobo.72.1">actuators</span></strong><span class="koboSpan" id="kobo.73.1">. </span><span class="koboSpan" id="kobo.73.2">You may be thinking that a </span><em class="italic"><span class="koboSpan" id="kobo.74.1">Thing</span></em><span class="koboSpan" id="kobo.75.1"> and a </span><em class="italic"><span class="koboSpan" id="kobo.76.1">Device</span></em><span class="koboSpan" id="kobo.77.1"> are both</span><a id="_idIndexMarker136"/><span class="koboSpan" id="kobo.78.1"> the same; actually, they’re not. </span><span class="koboSpan" id="kobo.78.2">It’s important to make this distinction because if we do not understand it, then it will create more complications </span><span class="No-Break"><span class="koboSpan" id="kobo.79.1">going forward.</span></span></p>
<p><span class="koboSpan" id="kobo.80.1">To understand the difference between a Thing and a device, I am going to take an example from real life. </span><span class="koboSpan" id="kobo.80.2">Let’s say we have an empty box. </span><span class="koboSpan" id="kobo.80.3">If we put some stuff in that box, it will be a filled box. </span><span class="koboSpan" id="kobo.80.4">However, what if we put the shipping label on that box? </span><span class="koboSpan" id="kobo.80.5">Will it still be a box? </span><span class="koboSpan" id="kobo.80.6">No, now it’s a parcel. </span><span class="koboSpan" id="kobo.80.7">So, we can understand that a parcel is just a logical container that consists of the box, the stuff in the box, and the </span><span class="No-Break"><span class="koboSpan" id="kobo.81.1">shipping label.</span></span></p>
<p><span class="koboSpan" id="kobo.82.1">Like the preceding example, a Thing is a logical container that consists of a development board, variables that act as a bridge between the cloud and sensors/actuators for read/write operations, and network connectivity that makes the Thing live in an ecosystem (which is like the shipping label in the </span><span class="No-Break"><span class="koboSpan" id="kobo.83.1">box analogy).</span></span></p>
<p><span class="koboSpan" id="kobo.84.1">Next, we need to understand how device configuration works in relation to the Arduino IoT Cloud. </span><span class="koboSpan" id="kobo.84.2">Here, we are not talking about </span><strong class="bold"><span class="koboSpan" id="kobo.85.1">network connectivity</span></strong><span class="koboSpan" id="kobo.86.1"> but </span><strong class="bold"><span class="koboSpan" id="kobo.87.1">device configuration</span></strong><span class="koboSpan" id="kobo.88.1">. </span><span class="koboSpan" id="kobo.88.2">Some cloud platforms</span><a id="_idIndexMarker137"/><span class="koboSpan" id="kobo.89.1"> provide </span><strong class="bold"><span class="koboSpan" id="kobo.90.1">Arduino IDE</span></strong><span class="koboSpan" id="kobo.91.1"> libraries or </span><strong class="bold"><span class="koboSpan" id="kobo.92.1">Software Development Kits</span></strong><span class="koboSpan" id="kobo.93.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.94.1">SDKs</span></strong><span class="koboSpan" id="kobo.95.1">) for device configuration, but Arduino has a different, more restrictive system. </span><span class="koboSpan" id="kobo.95.2">Firstly, the Arduino IoT Cloud has two ways for device configuration; the first one uses compatible boards via the Arduino Create Agent (in the upcoming section, you will dive deep into the Arduino Create Agent) and the second way is through an API, which is used for </span><span class="No-Break"><span class="koboSpan" id="kobo.96.1">non-compatible devices.</span></span></p>
<p><span class="koboSpan" id="kobo.97.1">So, why does </span><a id="_idIndexMarker138"/><span class="koboSpan" id="kobo.98.1">Arduino have this restriction for device connectivity? </span><span class="koboSpan" id="kobo.98.2">Arduino cares about security for IoT devices, and security is as vital in an IoT infrastructure as water is for living beings. </span><span class="koboSpan" id="kobo.98.3">Also, not all the official Arduino development boards are compatible with the Arduino IoT Cloud. </span><span class="koboSpan" id="kobo.98.4">You can find the complete list of Arduino IoT Cloud-compatible devices at </span><a href="https://docs.arduino.cc/arduino-cloud/getting-started/technical-reference#compatible-hardware"><span class="koboSpan" id="kobo.99.1">https://docs.arduino.cc/arduino-cloud/getting-started/technical-reference#compatible-hardware</span></a><span class="koboSpan" id="kobo.100.1">. </span><span class="koboSpan" id="kobo.100.2">The Arduino IoT Cloud directly supports some famous boards besides the Arduino official compatible boards, which include </span><strong class="bold"><span class="koboSpan" id="kobo.101.1">ESP8266 Series</span></strong><span class="koboSpan" id="kobo.102.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.103.1">ESP32 Series</span></strong><span class="koboSpan" id="kobo.104.1">, and </span><strong class="bold"><span class="koboSpan" id="kobo.105.1">LoRaWAN Nodes</span></strong><span class="koboSpan" id="kobo.106.1">. </span><span class="koboSpan" id="kobo.106.2">An API is available for other development boards, which can be used via any programming language. </span><span class="koboSpan" id="kobo.106.3">Later on in this chapter, we will explain how to use APIs with Node-RED to communicate with the Arduino </span><span class="No-Break"><span class="koboSpan" id="kobo.107.1">IoT Cloud.</span></span></p>
<p><span class="koboSpan" id="kobo.108.1">Finally, which options are available for </span><strong class="bold"><span class="koboSpan" id="kobo.109.1">data visualization</span></strong><span class="koboSpan" id="kobo.110.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.111.1">data extraction</span></strong><span class="koboSpan" id="kobo.112.1">? </span><span class="koboSpan" id="kobo.112.2">The Arduino IoT Cloud platform </span><a id="_idIndexMarker139"/><span class="koboSpan" id="kobo.113.1">provides a variety of options. </span><span class="koboSpan" id="kobo.113.2">For data visualization, the platform provides a flexible dashboard option for both web and mobile, with huge widget features as well as sharing features. </span><span class="koboSpan" id="kobo.113.3">For third-party application integrations, a </span><strong class="bold"><span class="koboSpan" id="kobo.114.1">Representational State Transfer</span></strong><span class="koboSpan" id="kobo.115.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.116.1">REST</span></strong><span class="koboSpan" id="kobo.117.1">) </span><strong class="bold"><span class="koboSpan" id="kobo.118.1">API</span></strong><span class="koboSpan" id="kobo.119.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.120.1">w</span></strong><strong class="bold"><span class="koboSpan" id="kobo.121.1">ebhooks</span></strong><span class="koboSpan" id="kobo.122.1"> are available. </span><span class="koboSpan" id="kobo.122.2">For custom application development</span><a id="_idIndexMarker140"/><span class="koboSpan" id="kobo.123.1"> or custom integrations, Arduino provides </span><strong class="bold"><span class="koboSpan" id="kobo.124.1">JavaScript</span></strong><span class="koboSpan" id="kobo.125.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.126.1">Python SDKs</span></strong><span class="koboSpan" id="kobo.127.1">, which enrich the platform’s extensibility. </span><span class="koboSpan" id="kobo.127.2">An organization can create custom dashboard visualization and control panels by using </span><span class="No-Break"><span class="koboSpan" id="kobo.128.1">these SDKs.</span></span></p>
<p><span class="koboSpan" id="kobo.129.1">We have discussed the Arduino IoT Cloud’s main pillars; now it’s time to explore the Arduino IoT Cloud by implementing basic examples, which will get you started with the Arduino MKR Wi-Fi 1010 development board and the Arduino </span><span class="No-Break"><span class="koboSpan" id="kobo.130.1">IoT Cloud.</span></span></p>
<h1 id="_idParaDest-42"><a id="_idTextAnchor042"/><span class="koboSpan" id="kobo.131.1">The Arduino IoT Cloud and the MKR1010 Hello World example</span></h1>
<p><span class="koboSpan" id="kobo.132.1">A </span><strong class="bold"><span class="koboSpan" id="kobo.133.1">Hello World program</span></strong><span class="koboSpan" id="kobo.134.1"> is the first </span><a id="_idIndexMarker141"/><span class="koboSpan" id="kobo.135.1">program that every programmer uses when they start learning any programming technology to get a taste</span><a id="_idIndexMarker142"/><span class="koboSpan" id="kobo.136.1"> for a platform. </span><span class="koboSpan" id="kobo.136.2">However, when it comes to the IoT side, things are different; you will be working with hardware and software, which means the </span><em class="italic"><span class="koboSpan" id="kobo.137.1">Hello World</span></em><span class="koboSpan" id="kobo.138.1"> example will be different from its traditional onscreen appearance. </span><span class="koboSpan" id="kobo.138.2">In this section, we will demonstrate how to turn on/off a built-in LED of an Arduino MKR Wi-Fi 1010 development board using the Arduino IoT Cloud dashboard, which is a </span><em class="italic"><span class="koboSpan" id="kobo.139.1">Hello World</span></em><span class="koboSpan" id="kobo.140.1"> example for the Arduino </span><span class="No-Break"><span class="koboSpan" id="kobo.141.1">IoT Cloud.</span></span></p>
<p><span class="koboSpan" id="kobo.142.1">In a series of steps, you will learn how to work with Arduino IoT Cloud-compatible boards. </span><span class="koboSpan" id="kobo.142.2">This part is very important to understand how a Thing works on the Arduino IoT Cloud platform. </span><span class="koboSpan" id="kobo.142.3">First, you need to get the required hardware, software, and accounts, as mentioned in the </span><em class="italic"><span class="koboSpan" id="kobo.143.1">Technical </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.144.1">requirements</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.145.1"> section.</span></span></p>
<p><span class="koboSpan" id="kobo.146.1">So, in this section, we are </span><a id="_idIndexMarker143"/><span class="koboSpan" id="kobo.147.1">going to start the </span><em class="italic"><span class="koboSpan" id="kobo.148.1">Hello World</span></em><span class="koboSpan" id="kobo.149.1"> project for the Arduino IoT Cloud using MKR Wi-Fi 1010. </span><span class="koboSpan" id="kobo.149.2">In the next sub-section, we will </span><a id="_idIndexMarker144"/><span class="koboSpan" id="kobo.150.1">cover the Arduino Create Agent. </span><span class="koboSpan" id="kobo.150.2">Next, we will create a Thing and cloud variables, associate the MKR Wi-Fi 1010 device with the Thing, and provide the network configuration for the Thing. </span><span class="koboSpan" id="kobo.150.3">Later, we will discuss the sketch/coding for the </span><span class="No-Break"><span class="koboSpan" id="kobo.151.1">development board.</span></span></p>
<h2 id="_idParaDest-43"><a id="_idTextAnchor043"/><span class="koboSpan" id="kobo.152.1">What is the Arduino Create Agent?</span></h2>
<p><span class="koboSpan" id="kobo.153.1">The Arduino IoT Cloud provides </span><a id="_idIndexMarker145"/><span class="koboSpan" id="kobo.154.1">a different way to connect a device to its cloud. </span><span class="koboSpan" id="kobo.154.2">Arduino does not publicly reveal its cloud connectivity technique for security reasons. </span><span class="koboSpan" id="kobo.154.3">That’s why we only have two options to connect devices with the Arduino IoT Cloud – using the Arduino Cloud IDE or the API. </span><span class="koboSpan" id="kobo.154.4">Also, for the Arduino Cloud IDE, it’s mandatory to have the Arduino Create Agent on your machine. </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.155.1">Figure 2</span></em></span><em class="italic"><span class="koboSpan" id="kobo.156.1">.2</span></em><span class="koboSpan" id="kobo.157.1"> shows the complete process of how the Create Agent helps devices to interact with the Arduino </span><span class="No-Break"><span class="koboSpan" id="kobo.158.1">Web Editor.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer015">
<span class="koboSpan" id="kobo.159.1"><img alt="Figure 2.2 – The Arduino Create Agent process flow" src="image/B19752_02_02.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.160.1">Figure 2.2 – The Arduino Create Agent process flow</span></p>
<p><span class="koboSpan" id="kobo.161.1">As the Arduino Web Editor is a web-based tool, there is no way to talk to development boards via a browser. </span><span class="koboSpan" id="kobo.161.2">That’s why the Arduino team developed software for all major operating systems, including Windows, Linux, and macOS, called the Arduino Create Agent. </span><span class="koboSpan" id="kobo.161.3">The Create Agent acts like a bridge between a device and the Arduino Web Editor. </span><span class="koboSpan" id="kobo.161.4">The preceding</span><a id="_idIndexMarker146"/><span class="koboSpan" id="kobo.162.1"> diagram explains the process </span><span class="No-Break"><span class="koboSpan" id="kobo.163.1">in detail.</span></span></p>
<p><span class="koboSpan" id="kobo.164.1">To get the Create Agent on your machine, visit </span><a href="https://create.arduino.cc/getting-started/plugin/welcome"><span class="koboSpan" id="kobo.165.1">https://create.arduino.cc/getting-started/plugin/welcome</span></a><span class="koboSpan" id="kobo.166.1"> and </span><a id="_idIndexMarker147"/><span class="koboSpan" id="kobo.167.1">follow the steps. </span><span class="koboSpan" id="kobo.167.2">After installation, start the Create Agent, as just installing it is not enough for connectivity. </span><span class="koboSpan" id="kobo.167.3">The Create Agent will run as a background process to provide continuous integration between a device and a browser. </span><span class="koboSpan" id="kobo.167.4">The following is a figure that describes all the options of the Arduino </span><span class="No-Break"><span class="koboSpan" id="kobo.168.1">Create Agent:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer016">
<span class="koboSpan" id="kobo.169.1"><img alt="Figure 2.3 – The Arduino Create Agent menu" src="image/B19752_02_03.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.170.1">Figure 2.3 – The Arduino Create Agent menu</span></p>
<p><span class="koboSpan" id="kobo.171.1">When we click on the Create</span><a id="_idIndexMarker148"/><span class="koboSpan" id="kobo.172.1"> Agent icon, it shows the Create Agent version, a </span><strong class="bold"><span class="koboSpan" id="kobo.173.1">Go to Arduino Create</span></strong><span class="koboSpan" id="kobo.174.1"> option, and an </span><strong class="bold"><span class="koboSpan" id="kobo.175.1">Open Debug Console</span></strong><span class="koboSpan" id="kobo.176.1"> option, which is like a serial monitor, where you can execute different commands to get the status and information about the current process, devices, and ports. </span><span class="koboSpan" id="kobo.176.2">Also from this menu, you can pause/resume the Create Agent, or if you want to close it down properly, then click on </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.177.1">Quit Agent</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.178.1">.</span></span></p>
<h2 id="_idParaDest-44"><a id="_idTextAnchor044"/><span class="koboSpan" id="kobo.179.1">Setting up the Thing, device, and variable</span></h2>
<p><span class="koboSpan" id="kobo.180.1">In this section, we will create a Thing and name it. </span><span class="koboSpan" id="kobo.180.2">We will also learn how to add a device, along with network configuration and </span><span class="No-Break"><span class="koboSpan" id="kobo.181.1">cloud variables.</span></span></p>
<h3><span class="koboSpan" id="kobo.182.1">Creating a Thing</span></h3>
<p><span class="koboSpan" id="kobo.183.1">When you first </span><a id="_idIndexMarker149"/><span class="koboSpan" id="kobo.184.1">open the dashboard in the Arduino IoT Cloud (</span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.185.1">Figure 2</span></em></span><em class="italic"><span class="koboSpan" id="kobo.186.1">.4</span></em><span class="koboSpan" id="kobo.187.1">), you will see menu links such as </span><strong class="bold"><span class="koboSpan" id="kobo.188.1">Things</span></strong><span class="koboSpan" id="kobo.189.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.190.1">Dashboards</span></strong><span class="koboSpan" id="kobo.191.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.192.1">Devices</span></strong><span class="koboSpan" id="kobo.193.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.194.1">Integrations</span></strong><span class="koboSpan" id="kobo.195.1">, and </span><strong class="bold"><span class="koboSpan" id="kobo.196.1">Templates</span></strong><span class="koboSpan" id="kobo.197.1">, and the </span><strong class="bold"><span class="koboSpan" id="kobo.198.1">Create your first Thing</span></strong><span class="koboSpan" id="kobo.199.1"> message. </span><span class="koboSpan" id="kobo.199.2">Just click on the </span><strong class="bold"><span class="koboSpan" id="kobo.200.1">CREATE THING</span></strong><span class="koboSpan" id="kobo.201.1"> button and your journey </span><span class="No-Break"><span class="koboSpan" id="kobo.202.1">will start.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer017">
<span class="koboSpan" id="kobo.203.1"><img alt="Figure 2.4 – The Thing dashboard" src="image/B19752_02_04.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.204.1">Figure 2.4 – The Thing dashboard</span></p>
<p><span class="koboSpan" id="kobo.205.1">Adding a Thing is</span><a id="_idIndexMarker150"/><span class="koboSpan" id="kobo.206.1"> totally different compared to other IoT cloud platforms, as the Thing is a combination of multiple ingredients. </span><span class="koboSpan" id="kobo.206.2">The following figure describes all the ingredients of the Thing, such as the name, cloud variables, device, network settings, code, and </span><span class="No-Break"><span class="koboSpan" id="kobo.207.1">Thing metadata:</span></span></p>
<p class="IMG---Figure"> </p>
<div>
<div class="IMG---Figure" id="_idContainer018">
<span class="koboSpan" id="kobo.208.1"><img alt="Figure 2.5 – Thing creation" src="image/B19752_02_05.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.209.1">Figure 2.5 – Thing creation</span></p>
<p><span class="koboSpan" id="kobo.210.1">All the aspects indicated in the preceding screenshot are explained, step by step, </span><span class="No-Break"><span class="koboSpan" id="kobo.211.1">as follows:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.212.1">Assign a name to the Thing; the name should relate to the location and functionality of the device, which will help you to find the Thing easily in the </span><span class="No-Break"><span class="koboSpan" id="kobo.213.1">following wizards.</span></span></li>
<li><span class="koboSpan" id="kobo.214.1">Clicking on </span><strong class="bold"><span class="koboSpan" id="kobo.215.1">Select Device</span></strong><span class="koboSpan" id="kobo.216.1"> will show you a popup, where you can select the old device or set up a new device, as discussed in detail in </span><span class="No-Break"><span class="koboSpan" id="kobo.217.1">a moment.</span></span></li>
<li><span class="koboSpan" id="kobo.218.1">After attaching the device, we need to make the device network-ready by providing a Wi-Fi SSID and a password. </span><span class="koboSpan" id="kobo.218.2">Just click on the </span><strong class="bold"><span class="koboSpan" id="kobo.219.1">Configure</span></strong><span class="koboSpan" id="kobo.220.1"> button and you will see the popup for </span><span class="No-Break"><span class="koboSpan" id="kobo.221.1">network settings.</span></span></li>
<li><span class="koboSpan" id="kobo.222.1">Finally, we need to add a variable for the sensors/actuators to perform read/write operations. </span><span class="koboSpan" id="kobo.222.2">The Arduino IoT Cloud provides different types of variables, like the Arduino IDE; the only difference is that in the Arduino IDE, we declare the variables, whereas here, we need to create variables via </span><span class="No-Break"><span class="koboSpan" id="kobo.223.1">the interface.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.224.1">In this section, we have created the Thing and named it. </span><span class="koboSpan" id="kobo.224.2">Three further steps are required adding a device, network configuration, and adding cloud variables. </span><span class="koboSpan" id="kobo.224.3">We are going to cover the remaining steps in</span><a id="_idIndexMarker151"/><span class="koboSpan" id="kobo.225.1"> the </span><span class="No-Break"><span class="koboSpan" id="kobo.226.1">following subsections.</span></span></p>
<h3><span class="koboSpan" id="kobo.227.1">Adding a device</span></h3>
<p><span class="koboSpan" id="kobo.228.1">After assigning a name to the</span><a id="_idIndexMarker152"/><span class="koboSpan" id="kobo.229.1"> Thing, we need to attach a device to it. </span><span class="koboSpan" id="kobo.229.2">When you click on the </span><strong class="bold"><span class="koboSpan" id="kobo.230.1">Select Device</span></strong><span class="koboSpan" id="kobo.231.1"> button, you will see a popup that shows you an available device and the option to add a new device. </span><span class="koboSpan" id="kobo.231.2">If there is no device, then you will see the following figure to set up a </span><span class="No-Break"><span class="koboSpan" id="kobo.232.1">new device:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer019">
<span class="koboSpan" id="kobo.233.1"><img alt="Figure 2.6 – Associating a device" src="image/B19752_02_06.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.234.1">Figure 2.6 – Associating a device</span></p>
<p><span class="koboSpan" id="kobo.235.1">In our case, we don’t have any device in the portal, so we will just click on </span><strong class="bold"><span class="koboSpan" id="kobo.236.1">SET UP NEW DEVICE</span></strong><span class="koboSpan" id="kobo.237.1"> to configure a new device in </span><span class="No-Break"><span class="koboSpan" id="kobo.238.1">the account.</span></span></p>
<p><span class="koboSpan" id="kobo.239.1">Next, you will see the two options in the popup. </span><span class="koboSpan" id="kobo.239.2">The first option is</span><strong class="bold"><span class="koboSpan" id="kobo.240.1"> Arduino board</span></strong><span class="koboSpan" id="kobo.241.1">, and the second option is </span><strong class="bold"><span class="koboSpan" id="kobo.242.1">Third party device</span></strong><span class="koboSpan" id="kobo.243.1">. </span><span class="koboSpan" id="kobo.243.2">Here, you will see an icon in front of both names, which means you need to use compatible devices with the Arduino IoT Cloud. </span><span class="koboSpan" id="kobo.243.3">Next, you will see two options: one for the Arduino official development boards and a second option for the third-party </span><a id="_idIndexMarker153"/><span class="No-Break"><span class="koboSpan" id="kobo.244.1">development boards.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer020">
<span class="koboSpan" id="kobo.245.1"><img alt="Figure 2.7 – Choosing a development device" src="image/B19752_02_07.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.246.1">Figure 2.7 – Choosing a development device</span></p>
<p><span class="koboSpan" id="kobo.247.1">Select one option from the popup according to the available device. </span><span class="koboSpan" id="kobo.247.2">For this chapter, we will click on </span><strong class="bold"><span class="koboSpan" id="kobo.248.1">Arduino board</span></strong><span class="koboSpan" id="kobo.249.1">, as in this chapter, we will use the MKR Wi-Fi 1010 board. </span><span class="koboSpan" id="kobo.249.2">Before adding the device, make sure that the Arduino Create Agent is running on </span><span class="No-Break"><span class="koboSpan" id="kobo.250.1">your machine.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.251.1">Important note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.252.1">You can find the Arduino IoT Cloud-compatible boards at </span><a href="https://store-usa.arduino.cc/pages/cloud-compatible-boards"><span class="koboSpan" id="kobo.253.1">https://store-usa.arduino.cc/pages/cloud-compatible-boards</span></a><span class="koboSpan" id="kobo.254.1">, and for third-party devices, we have three options, which are </span><strong class="bold"><span class="koboSpan" id="kobo.255.1">ESP8266</span></strong><span class="koboSpan" id="kobo.256.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.257.1">ESP32</span></strong><span class="koboSpan" id="kobo.258.1">, and </span><strong class="bold"><span class="koboSpan" id="kobo.259.1">LoRaWAN</span></strong><span class="koboSpan" id="kobo.260.1"> devices. </span><span class="koboSpan" id="kobo.260.2">For some devices, we have API access, which will be discussed in the second part of </span><span class="No-Break"><span class="koboSpan" id="kobo.261.1">this chapter.</span></span></p>
<p><span class="koboSpan" id="kobo.262.1">Next, you will </span><a id="_idIndexMarker154"/><span class="koboSpan" id="kobo.263.1">see the </span><strong class="bold"><span class="koboSpan" id="kobo.264.1">Setup Device</span></strong><span class="koboSpan" id="kobo.265.1"> popup, which will start searching for your device. </span><span class="koboSpan" id="kobo.265.2">So, make sure the device is properly connected to your machine. </span><span class="koboSpan" id="kobo.265.3">When the Arduino Create Agent detects the compatible development board device, the following popup will </span><span class="No-Break"><span class="koboSpan" id="kobo.266.1">be shown:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer021">
<span class="koboSpan" id="kobo.267.1"><img alt="Figure 2.8 – Setup Device" src="image/B19752_02_08.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.268.1">Figure 2.8 – Setup Device</span></p>
<p><span class="koboSpan" id="kobo.269.1">The wizard will find and list all the connected boards with their name and port details. </span><span class="koboSpan" id="kobo.269.2">Click on the </span><strong class="bold"><span class="koboSpan" id="kobo.270.1">CONFIGURE</span></strong><span class="koboSpan" id="kobo.271.1"> button to move forward. </span><span class="koboSpan" id="kobo.271.2">If the wizard doesn’t show the device after searching, try to plug in a different port and click on the </span><strong class="bold"><span class="koboSpan" id="kobo.272.1">refresh</span></strong><span class="koboSpan" id="kobo.273.1"> link, located at the bottom. </span><span class="koboSpan" id="kobo.273.2">After development board configuration has been taken care of by the Arduino IoT Cloud, you will see a popup where you need to provide the name of </span><span class="No-Break"><span class="koboSpan" id="kobo.274.1">your device:</span></span></p>
<p><span class="koboSpan" id="kobo.275.1">In the next configuration wizard, provide the device’s name (note that spaces and special characters are not allowed in the device name) and then click on the </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.276.1">NEXT</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.277.1"> button.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer022">
<span class="koboSpan" id="kobo.278.1"><img alt="Figure 2.9 – The device configuration name" src="image/B19752_02_09.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.279.1">Figure 2.9 – The device configuration name</span></p>
<p><span class="koboSpan" id="kobo.280.1">After that, the wizard</span><a id="_idIndexMarker155"/><span class="koboSpan" id="kobo.281.1"> will start the device configuration process, which will take up to five minutes. </span><span class="koboSpan" id="kobo.281.2">But in most cases, it only takes one minute to configure </span><span class="No-Break"><span class="koboSpan" id="kobo.282.1">the device.</span></span></p>
<p><span class="koboSpan" id="kobo.283.1">Eventually, you will see a popup with a </span><strong class="bold"><span class="koboSpan" id="kobo.284.1">Congratulations! </span><span class="koboSpan" id="kobo.284.2">You are all set</span></strong><span class="koboSpan" id="kobo.285.1"> message. </span><span class="koboSpan" id="kobo.285.2">Click on the </span><strong class="bold"><span class="koboSpan" id="kobo.286.1">Done</span></strong><span class="koboSpan" id="kobo.287.1"> button, and the device will be attached to </span><span class="No-Break"><span class="koboSpan" id="kobo.288.1">your Thing.</span></span></p>
<p><span class="koboSpan" id="kobo.289.1">On the Thing page, you will see the device details, which are marked in the red box in the </span><span class="No-Break"><span class="koboSpan" id="kobo.290.1">following figure:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer023">
<span class="koboSpan" id="kobo.291.1"><img alt="Figure 2.10 – The device attached to the Thing" src="image/B19752_02_10.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.292.1">Figure 2.10 – The device attached to the Thing</span></p>
<p><span class="koboSpan" id="kobo.293.1">The page shows the </span><a id="_idIndexMarker156"/><span class="koboSpan" id="kobo.294.1">device name, the device ID, its type, its status (which is either </span><strong class="bold"><span class="koboSpan" id="kobo.295.1">Online</span></strong><span class="koboSpan" id="kobo.296.1"> or </span><strong class="bold"><span class="koboSpan" id="kobo.297.1">Offline</span></strong><span class="koboSpan" id="kobo.298.1">), and two buttons, </span><strong class="bold"><span class="koboSpan" id="kobo.299.1">Change</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.300.1">and </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.301.1">Detach</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.302.1">:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.303.1">Change</span></strong><span class="koboSpan" id="kobo.304.1"> is used to switch between devices – for example, if you have chosen the wrong device, then you can select a different one via </span><span class="No-Break"><span class="koboSpan" id="kobo.305.1">this option.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.306.1">Detach</span></strong><span class="koboSpan" id="kobo.307.1"> means removing the device from the Thing. </span><span class="koboSpan" id="kobo.307.2">Why might we need to detach? </span><span class="koboSpan" id="kobo.307.3">For example, you may have created a Thing and associated the device with it, but you are now not using that Thing. </span><span class="koboSpan" id="kobo.307.4">If you want to set up a new Thing with that device, the platform will not allow you to do so if it’s already associated with the </span><span class="No-Break"><span class="koboSpan" id="kobo.308.1">old Thing.</span></span></li>
</ul>
<p class="callout-heading"><span class="koboSpan" id="kobo.309.1">Important note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.310.1">The device and the Thing have a one-to-one relationship. </span><span class="koboSpan" id="kobo.310.2">If you want to use a device with a new Thing, then make sure it’s not associated with </span><span class="No-Break"><span class="koboSpan" id="kobo.311.1">another one.</span></span></p>
<p><span class="koboSpan" id="kobo.312.1">As we have added the</span><a id="_idIndexMarker157"/><span class="koboSpan" id="kobo.313.1"> device, let us move toward </span><span class="No-Break"><span class="koboSpan" id="kobo.314.1">network configuration.</span></span></p>
<h3><span class="koboSpan" id="kobo.315.1">Configuring the network</span></h3>
<p><span class="koboSpan" id="kobo.316.1">After attaching the device to the </span><a id="_idIndexMarker158"/><span class="koboSpan" id="kobo.317.1">Thing, we can see that the device is offline. </span><span class="koboSpan" id="kobo.317.2">To bring it online, we need to provide Wi-Fi details. </span><span class="koboSpan" id="kobo.317.3">The following figure represents the network configuration popup, which only consists of </span><span class="No-Break"><span class="koboSpan" id="kobo.318.1">two fields:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer024">
<span class="koboSpan" id="kobo.319.1"><img alt="Figure 2.11 – Network configuration" src="image/B19752_02_11.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.320.1">Figure 2.11 – Network configuration</span></p>
<p><span class="koboSpan" id="kobo.321.1">On the Thing page shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.322.1">Figure 2</span></em></span><em class="italic"><span class="koboSpan" id="kobo.323.1">.5</span></em><span class="koboSpan" id="kobo.324.1">, under the </span><strong class="bold"><span class="koboSpan" id="kobo.325.1">Network</span></strong><span class="koboSpan" id="kobo.326.1"> tab, click on the </span><strong class="bold"><span class="koboSpan" id="kobo.327.1">CONFIGURE</span></strong><span class="koboSpan" id="kobo.328.1"> button, which will take you to the </span><strong class="bold"><span class="koboSpan" id="kobo.329.1">Configure network</span></strong><span class="koboSpan" id="kobo.330.1"> popup with two fields, </span><strong class="bold"><span class="koboSpan" id="kobo.331.1">Wi-Fi Name</span></strong><span class="koboSpan" id="kobo.332.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.333.1">Password</span></strong><span class="koboSpan" id="kobo.334.1">. </span><span class="koboSpan" id="kobo.334.2">Type the Wi-Fi SSID and password, and then click on the </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.335.1">SAVE</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.336.1"> button.</span></span></p>
<p><span class="koboSpan" id="kobo.337.1">In this section, we </span><a id="_idIndexMarker159"/><span class="koboSpan" id="kobo.338.1">have configured the network for our device, which is MKR Wi-Fi 1010, and in the next sub section, we will create the </span><span class="No-Break"><span class="koboSpan" id="kobo.339.1">cloud variable.</span></span></p>
<h3><span class="koboSpan" id="kobo.340.1">Adding a cloud variable</span></h3>
<p><span class="koboSpan" id="kobo.341.1">The final part is adding a</span><a id="_idIndexMarker160"/><span class="koboSpan" id="kobo.342.1"> cloud variable. </span><span class="koboSpan" id="kobo.342.2">Before adding a variable, you have to have an idea of what type of variables you need for your project, including the </span><strong class="bold"><span class="koboSpan" id="kobo.343.1">variable type</span></strong><span class="koboSpan" id="kobo.344.1">, the </span><strong class="bold"><span class="koboSpan" id="kobo.345.1">variable permission</span></strong><span class="koboSpan" id="kobo.346.1">, and the </span><strong class="bold"><span class="koboSpan" id="kobo.347.1">variable </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.348.1">update policy</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.349.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.350.1">For the current example, we need one variable to control the built-in LED, so the variable type will be </span><strong class="bold"><span class="koboSpan" id="kobo.351.1">Boolean</span></strong><span class="koboSpan" id="kobo.352.1"> (</span><span class="No-Break"><span class="koboSpan" id="kobo.353.1">either on/off):</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer025">
<span class="koboSpan" id="kobo.354.1"><img alt="Figure 2.12 – Adding a variable" src="image/B19752_02_12.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.355.1">Figure 2.12 – Adding a variable</span></p>
<p><span class="koboSpan" id="kobo.356.1">This way, we will</span><a id="_idIndexMarker161"/><span class="koboSpan" id="kobo.357.1"> control the LED via </span><span class="No-Break"><span class="koboSpan" id="kobo.358.1">the dashboard:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.359.1">Assign a meaningful name to the variable, related to the sensor/actuator type. </span><span class="koboSpan" id="kobo.359.2">Remember that spaces and special characters are not allowed in </span><span class="No-Break"><span class="koboSpan" id="kobo.360.1">the name.</span></span></li>
<li><span class="koboSpan" id="kobo.361.1">If you want to sync the variable with other Things’ variables, then click on the </span><strong class="bold"><span class="koboSpan" id="kobo.362.1">Sync with other Things option</span></strong><span class="koboSpan" id="kobo.363.1">. </span><span class="koboSpan" id="kobo.363.2">The sync option is very beneficial if you want to share data across other Things. </span><span class="koboSpan" id="kobo.363.3">Sync will be explained in later chapters alongside a </span><span class="No-Break"><span class="koboSpan" id="kobo.364.1">practical demonstration.</span></span></li>
<li><span class="koboSpan" id="kobo.365.1">Select the variable type from the dropdown; the platform provides dozens of variable types. </span><span class="koboSpan" id="kobo.365.2">For this example, we need a </span><strong class="bold"><span class="koboSpan" id="kobo.366.1">Boolean</span></strong><span class="koboSpan" id="kobo.367.1"> variable type for </span><span class="No-Break"><span class="koboSpan" id="kobo.368.1">LED control.</span></span></li>
<li><span class="koboSpan" id="kobo.369.1">After selecting the </span><a id="_idIndexMarker162"/><span class="koboSpan" id="kobo.370.1">variable type, you will see the variable </span><strong class="bold"><span class="koboSpan" id="kobo.371.1">declaration</span></strong><span class="koboSpan" id="kobo.372.1"> that will be used during coding. </span><span class="koboSpan" id="kobo.372.2">You can see here that our variable name is </span><strong class="source-inline"><span class="koboSpan" id="kobo.373.1">LED</span></strong><span class="koboSpan" id="kobo.374.1">, but the system has converted the first letter to lowercase and the rest of the characters are left as is, making the name </span><strong class="bold"><span class="koboSpan" id="kobo.375.1">lED</span></strong><span class="koboSpan" id="kobo.376.1">. </span><span class="koboSpan" id="kobo.376.2">This declaration part is very important; you can change the declaration according to your requirements, but keep the declaration in mind, as it will be used </span><span class="No-Break"><span class="koboSpan" id="kobo.377.1">in coding.</span></span></li>
<li><span class="koboSpan" id="kobo.378.1">The variable permission provides two options, </span><strong class="bold"><span class="koboSpan" id="kobo.379.1">Read &amp; Write</span></strong><span class="koboSpan" id="kobo.380.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.381.1">Read Only</span></strong><span class="koboSpan" id="kobo.382.1">. </span><span class="koboSpan" id="kobo.382.2">The permission provides an extra layer of security for the Thing’s control. </span><span class="koboSpan" id="kobo.382.3">If a sensor only senses data such as temperature/humidity, then choose the </span><strong class="bold"><span class="koboSpan" id="kobo.383.1">Read Only</span></strong><span class="koboSpan" id="kobo.384.1"> option. </span><span class="koboSpan" id="kobo.384.2">If you want to control actuators such as the relay and the LED, then choose the </span><strong class="bold"><span class="koboSpan" id="kobo.385.1">Read &amp; Write</span></strong><span class="koboSpan" id="kobo.386.1"> option. </span><span class="koboSpan" id="kobo.386.2">For our example, we need to write data to the variable to control the LED, so we will simply choose </span><strong class="bold"><span class="koboSpan" id="kobo.387.1">Read &amp; </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.388.1">Write</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.389.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.390.1">Finally, we need to choose an update policy according to our requirements. </span><span class="koboSpan" id="kobo.390.2">One option is event-driven (shown onscreen as </span><strong class="bold"><span class="koboSpan" id="kobo.391.1">On change</span></strong><span class="koboSpan" id="kobo.392.1">), which only works when there is a change. </span><span class="koboSpan" id="kobo.392.2">It works when prompted by commands such as turning on/off a relay or LED. </span><span class="koboSpan" id="kobo.392.3">The second option is </span><strong class="bold"><span class="koboSpan" id="kobo.393.1">Periodically</span></strong><span class="koboSpan" id="kobo.394.1">, which means taking data from a variable, such as temperature, humidity, air pressure, or a </span><strong class="bold"><span class="koboSpan" id="kobo.395.1">Light Dependent Resistor</span></strong><span class="koboSpan" id="kobo.396.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.397.1">LDR</span></strong><span class="koboSpan" id="kobo.398.1">) value after </span><a id="_idIndexMarker163"/><span class="koboSpan" id="kobo.399.1">a specific time. </span><span class="koboSpan" id="kobo.399.2">When you change the option to </span><strong class="bold"><span class="koboSpan" id="kobo.400.1">Periodically</span></strong><span class="koboSpan" id="kobo.401.1">, it will ask you for a time measured in seconds, whereas for </span><strong class="bold"><span class="koboSpan" id="kobo.402.1">On change</span></strong><span class="koboSpan" id="kobo.403.1">, there is a </span><span class="No-Break"><span class="koboSpan" id="kobo.404.1">threshold option.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.405.1">After adding the variable, our Thing now has all the mandatory ingredients. </span><span class="koboSpan" id="kobo.405.2">The following figure describes all the settings and configurations when we are done with the cloud variable, device, and network settings. </span><span class="koboSpan" id="kobo.405.3">Next, we need to jump to the </span><strong class="bold"><span class="koboSpan" id="kobo.406.1">Sketch</span></strong><span class="koboSpan" id="kobo.407.1"> tab </span><span class="No-Break"><span class="koboSpan" id="kobo.408.1">for coding:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer026">
<span class="koboSpan" id="kobo.409.1"><img alt="Figure 2.13 – The Thing after configuration" src="image/B19752_02_13.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.410.1">Figure 2.13 – The Thing after configuration</span></p>
<p><span class="koboSpan" id="kobo.411.1">The preceding screenshot</span><a id="_idIndexMarker164"/><span class="koboSpan" id="kobo.412.1"> illustrates the device association, network configuration, and variable settings, which are essential components of the Thing. </span><span class="koboSpan" id="kobo.412.2">Next, click the </span><strong class="bold"><span class="koboSpan" id="kobo.413.1">Sketch</span></strong><span class="koboSpan" id="kobo.414.1"> tab, where you will open the Arduino Web Editor for coding. </span><span class="koboSpan" id="kobo.414.2">Here, we will add the code that will be associated with the LED variable. </span><span class="koboSpan" id="kobo.414.3">In this section, we have completed all the tasks via drag and drop, but now it’s time to do some work by putting some coding into our development board. </span><span class="koboSpan" id="kobo.414.4">In the next section, we will </span><span class="No-Break"><span class="koboSpan" id="kobo.415.1">explore sketches.</span></span></p>
<h2 id="_idParaDest-45"><a id="_idTextAnchor045"/><span class="koboSpan" id="kobo.416.1">Writing a sketch</span></h2>
<p><span class="koboSpan" id="kobo.417.1">Most Things are </span><a id="_idIndexMarker165"/><span class="koboSpan" id="kobo.418.1">set up in the </span><a id="_idIndexMarker166"/><span class="koboSpan" id="kobo.419.1">cloud via a </span><strong class="bold"><span class="koboSpan" id="kobo.420.1">graphical user interface</span></strong><span class="koboSpan" id="kobo.421.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.422.1">GUI</span></strong><span class="koboSpan" id="kobo.423.1">), but we still need to do some coding. </span><span class="koboSpan" id="kobo.423.2">The following figure describes all the options of the mini web editor, such as verifying and uploading the code, selecting the development board on specific ports, and the code area for writing </span><span class="No-Break"><span class="koboSpan" id="kobo.424.1">and editing.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer027">
<span class="koboSpan" id="kobo.425.1"><img alt="Figure 2.14 – Mini web editor" src="image/B19752_02_14.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.426.1">Figure 2.14 – Mini web editor</span></p>
<p><span class="koboSpan" id="kobo.427.1">The code will</span><a id="_idIndexMarker167"/><span class="koboSpan" id="kobo.428.1"> associate a variable with physical sensors/actuators to make it work properly. </span><span class="koboSpan" id="kobo.428.2">Please see the </span><span class="No-Break"><span class="koboSpan" id="kobo.429.1">following steps:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.430.1">Here, you will see two buttons, like with the Arduino IDE. </span><span class="koboSpan" id="kobo.430.2">The tick button is used to verify code, while the arrow icon button is used to upload the code to the </span><span class="No-Break"><span class="koboSpan" id="kobo.431.1">development board.</span></span></li>
<li><span class="koboSpan" id="kobo.432.1">This part shows whether your device is connected to your machine or not. </span><span class="koboSpan" id="kobo.432.2">If the development board is connected, then it will show the device name with </span><span class="No-Break"><span class="koboSpan" id="kobo.433.1">the port.</span></span></li>
<li><span class="koboSpan" id="kobo.434.1">The Arduino Cloud Editor has two variants – one is basic and the other is full. </span><span class="koboSpan" id="kobo.434.2">In the </span><strong class="bold"><span class="koboSpan" id="kobo.435.1">Thing </span></strong><span class="koboSpan" id="kobo.436.1">tab shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.437.1">Figure 2</span></em></span><em class="italic"><span class="koboSpan" id="kobo.438.1">.14</span></em><span class="koboSpan" id="kobo.439.1">, we can see the mini version of the editor, but if you want to move to the full editor for the installation of libraries or other stuff, then click on the </span><strong class="bold"><span class="koboSpan" id="kobo.440.1">&lt;/&gt;</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.441.1">button.</span></span></li>
<li><span class="koboSpan" id="kobo.442.1">Scroll down the editor, and at the bottom, you will see the </span><strong class="source-inline"><span class="koboSpan" id="kobo.443.1">OnLEDChange()</span></strong><span class="koboSpan" id="kobo.444.1"> function, which is associated with the </span><strong class="bold"><span class="koboSpan" id="kobo.445.1">LED</span></strong><span class="koboSpan" id="kobo.446.1"> variable. </span><span class="koboSpan" id="kobo.446.2">In this function, we need to write the code that will provide connectivity to the sensor/physical pins of the </span><span class="No-Break"><span class="koboSpan" id="kobo.447.1">development board.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.448.1">According to our </span><a id="_idIndexMarker168"/><span class="koboSpan" id="kobo.449.1">current example project, we just want a turned-on/turned-off, built-in LED for the development board. </span><span class="koboSpan" id="kobo.449.2">The following is the code that will be used in </span><span class="No-Break"><span class="koboSpan" id="kobo.450.1">the function:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.451.1">
if(lED==1)
  {
    digitalWrite(LED_BUILTIN,1);
  }else{
    digitalWrite(LED_BUILTIN,0);
  }</span></pre> <p><span class="koboSpan" id="kobo.452.1">First, let’s recall the declaration used during variable creation, which is shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.453.1">Figure 2</span></em></span><em class="italic"><span class="koboSpan" id="kobo.454.1">.12</span></em><span class="koboSpan" id="kobo.455.1">. </span><span class="koboSpan" id="kobo.455.2">What the code does is turn the built-in LED on if the </span><strong class="source-inline"><span class="koboSpan" id="kobo.456.1">lED</span></strong><span class="koboSpan" id="kobo.457.1"> variable contains a true value; otherwise, it turns the built-in </span><span class="No-Break"><span class="koboSpan" id="kobo.458.1">LED off.</span></span></p>
<p><span class="koboSpan" id="kobo.459.1">To write Boolean values on development board pins, we have a method called </span><strong class="source-inline"><span class="koboSpan" id="kobo.460.1">digitalWrite</span></strong><span class="koboSpan" id="kobo.461.1">, which takes two parameters. </span><span class="koboSpan" id="kobo.461.2">The first parameter is a pin number and in the second parameter we will place </span><strong class="source-inline"><span class="koboSpan" id="kobo.462.1">true</span></strong><span class="koboSpan" id="kobo.463.1">/</span><strong class="source-inline"><span class="koboSpan" id="kobo.464.1">false</span></strong><span class="koboSpan" id="kobo.465.1"> or </span><strong class="source-inline"><span class="koboSpan" id="kobo.466.1">1</span></strong><span class="koboSpan" id="kobo.467.1">/</span><strong class="source-inline"><span class="koboSpan" id="kobo.468.1">0</span></strong><span class="koboSpan" id="kobo.469.1">, while we are using </span><strong class="source-inline"><span class="koboSpan" id="kobo.470.1">LED_BUILTIN</span></strong><span class="koboSpan" id="kobo.471.1">, which is a constant and contains </span><em class="italic"><span class="koboSpan" id="kobo.472.1">PIN #13</span></em><span class="koboSpan" id="kobo.473.1">. </span><span class="koboSpan" id="kobo.473.2">The second parameter is a value, which is either </span><strong class="source-inline"><span class="koboSpan" id="kobo.474.1">1</span></strong><span class="koboSpan" id="kobo.475.1"> or </span><strong class="source-inline"><span class="koboSpan" id="kobo.476.1">0</span></strong><span class="koboSpan" id="kobo.477.1">. </span><span class="koboSpan" id="kobo.477.2">This parameter changes according to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.478.1">lED</span></strong><span class="koboSpan" id="kobo.479.1"> variable state. </span><span class="koboSpan" id="kobo.479.2">Here we are done with our coding exercise. </span><span class="koboSpan" id="kobo.479.3">Now it’s time to create a graphical user interface from where we turn on/off the LED. </span><span class="koboSpan" id="kobo.479.4">In the following section, we will set up the dashboard to control </span><span class="No-Break"><span class="koboSpan" id="kobo.480.1">the LED.</span></span></p>
<h2 id="_idParaDest-46"><a id="_idTextAnchor046"/><span class="koboSpan" id="kobo.481.1">Creating a dashboard for web and mobile with an interactive widget</span></h2>
<p><span class="koboSpan" id="kobo.482.1">After setting up a</span><a id="_idIndexMarker169"/><span class="koboSpan" id="kobo.483.1"> complete Thing, we are done with device setup, network settings, the variable, and coding the variable. </span><span class="koboSpan" id="kobo.483.2">The next question is, how can we turn the LED on/off? </span><span class="koboSpan" id="kobo.483.3">For that, we need to create a dashboard. </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.484.1">Figure 2</span></em></span><em class="italic"><span class="koboSpan" id="kobo.485.1">.15</span></em><span class="koboSpan" id="kobo.486.1"> illustrates a dashboard. </span><span class="koboSpan" id="kobo.486.2">Click on the </span><strong class="bold"><span class="koboSpan" id="kobo.487.1">Dashboards</span></strong><span class="koboSpan" id="kobo.488.1"> link in the top menu. </span><span class="koboSpan" id="kobo.488.2">After loading the dashboard page for the first time, you will see an empty page with one green button at the bottom of the page – </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.489.1">Build Dashboard</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.490.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer028">
<span class="koboSpan" id="kobo.491.1"><img alt="Figure 2.15 – The Things dashboard" src="image/B19752_02_15.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.492.1">Figure 2.15 – The Things dashboard</span></p>
<p><span class="koboSpan" id="kobo.493.1">Click on the button, and you will be taken to the dashboard builder page to create a new stunning dashboard for your device control, </span><span class="No-Break"><span class="koboSpan" id="kobo.494.1">as follows:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.495.1">The dashboard has two modes, view and editing. </span><span class="koboSpan" id="kobo.495.2">By default, it’s on editing mode, which is denoted by an edit icon, and we can switch to view mode by clicking on the eye icon. </span><span class="koboSpan" id="kobo.495.3">In view mode, we can’t modify the widget’s settings </span><span class="No-Break"><span class="koboSpan" id="kobo.496.1">and alignment.</span></span></li>
<li><span class="koboSpan" id="kobo.497.1">To add controls on the dashboard, click on the green </span><strong class="bold"><span class="koboSpan" id="kobo.498.1">ADD</span></strong><span class="koboSpan" id="kobo.499.1"> button, and a drop-down menu will appear with a variety of widgets. </span><span class="koboSpan" id="kobo.499.2">Here, you can select a widget by scrolling </span><span class="No-Break"><span class="koboSpan" id="kobo.500.1">or searching.</span></span></li>
<li><span class="koboSpan" id="kobo.501.1">This button is used to arrange the widgets. </span><span class="koboSpan" id="kobo.501.2">During editing, you are not able to navigate, resize, or move the </span><span class="No-Break"><span class="koboSpan" id="kobo.502.1">widget controls.</span></span></li>
<li><span class="koboSpan" id="kobo.503.1">As mobile icon is representing it’s working from its icon, this means by click on this icon you can adjust your dashboard for mobile devices. </span><span class="koboSpan" id="kobo.503.2">Arduino provides both views of the dashboard for desktop and mobile. </span><span class="koboSpan" id="kobo.503.3">You can switch between them by clicking on the </span><span class="No-Break"><span class="koboSpan" id="kobo.504.1">mobile/desktop icon.</span></span></li>
<li><span class="koboSpan" id="kobo.505.1">In the textbox, type the </span><span class="No-Break"><span class="koboSpan" id="kobo.506.1">dashboard name.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.507.1">Now that we have </span><a id="_idIndexMarker170"/><span class="koboSpan" id="kobo.508.1">created the dashboard, it’s time to put a widget on it. </span><span class="koboSpan" id="kobo.508.2">Widgets will help us to control/view the sensors/actuators. </span><span class="koboSpan" id="kobo.508.3">When you click on the </span><strong class="bold"><span class="koboSpan" id="kobo.509.1">Add</span></strong><span class="koboSpan" id="kobo.510.1"> button, you will see the list of widgets. </span><span class="koboSpan" id="kobo.510.2">Here you can select a widget by scrolling through the list or by searching the widgets via the search bar, as shown in the </span><span class="No-Break"><span class="koboSpan" id="kobo.511.1">following figure:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer029">
<span class="koboSpan" id="kobo.512.1"><img alt="Figure 2.16 – The widgets list" src="image/B19752_02_16.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.513.1">Figure 2.16 – The widgets list</span></p>
<p><span class="koboSpan" id="kobo.514.1">Select the </span><strong class="bold"><span class="koboSpan" id="kobo.515.1">Switch</span></strong><span class="koboSpan" id="kobo.516.1"> widget control for the current example project. </span><span class="koboSpan" id="kobo.516.2">After selecting the widget control, a popup will appear, where we need to link the Thing variable with the widget control to read/write the data to the device sensors. </span><span class="koboSpan" id="kobo.516.3">This is because the variable is the bridge between the </span><a id="_idIndexMarker171"/><span class="koboSpan" id="kobo.517.1">dashboard widget controls and the Thing sensors to read and </span><span class="No-Break"><span class="koboSpan" id="kobo.518.1">write data.</span></span></p>
<p><span class="koboSpan" id="kobo.519.1">In the widget popup, we have different settings, as shown in the </span><span class="No-Break"><span class="koboSpan" id="kobo.520.1">following figure:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer030">
<span class="koboSpan" id="kobo.521.1"><img alt="Figure 2.17 – Widget settings" src="image/B19752_02_17.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.522.1">Figure 2.17 – Widget settings</span></p>
<p><span class="koboSpan" id="kobo.523.1">The widget settings are detailed </span><span class="No-Break"><span class="koboSpan" id="kobo.524.1">as follows:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.525.1">Firstly, we need to assign a name to our widget. </span><span class="koboSpan" id="kobo.525.2">Make sure to give it a proper name that represents the sensor’s name. </span><span class="koboSpan" id="kobo.525.3">Here, I used the </span><span class="No-Break"><span class="koboSpan" id="kobo.526.1">name </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.527.1">LED-Switch</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.528.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.529.1">Hide or show the widget frame content, which is at the top and bottom of </span><span class="No-Break"><span class="koboSpan" id="kobo.530.1">the widget.</span></span></li>
<li><span class="koboSpan" id="kobo.531.1">Click on </span><strong class="bold"><span class="koboSpan" id="kobo.532.1">Link Variable</span></strong><span class="koboSpan" id="kobo.533.1"> to attach the Thing variable to the widget control, which will be explained in the </span><span class="No-Break"><span class="koboSpan" id="kobo.534.1">next figure.</span></span></li>
<li><span class="koboSpan" id="kobo.535.1">Hide/show the </span><a id="_idIndexMarker172"/><span class="koboSpan" id="kobo.536.1">widget label to hide the text that overlays the widget control. </span><span class="koboSpan" id="kobo.536.2">In the preceding figure, it switches the </span><strong class="bold"><span class="koboSpan" id="kobo.537.1">ON</span></strong><span class="koboSpan" id="kobo.538.1">/</span><strong class="bold"><span class="koboSpan" id="kobo.539.1">OFF</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.540.1">button text.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.541.1">It’s time to attach the widget control to the variables. </span><span class="koboSpan" id="kobo.541.2">Note that we can add multiple controls on the same dashboard that are linked to different Things’ variables, which shows the versatility of Arduino IoT Cloud dashboards, as shown in the </span><span class="No-Break"><span class="koboSpan" id="kobo.542.1">following figure:</span></span></p>
<p class="IMG---Figure"> </p>
<div>
<div class="IMG---Figure" id="_idContainer031">
<span class="koboSpan" id="kobo.543.1"><img alt="Figure 2.18 – Linking a Thing variable with a widget control" src="image/B19752_02_18.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.544.1">Figure 2.18 – Linking a Thing variable with a widget control</span></p>
<p><span class="koboSpan" id="kobo.545.1">As shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.546.1">Figure 2</span></em></span><em class="italic"><span class="koboSpan" id="kobo.547.1">.18</span></em><span class="koboSpan" id="kobo.548.1">, we have the following steps to assign the cloud variable to the </span><span class="No-Break"><span class="koboSpan" id="kobo.549.1">widget control:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.550.1">Select a Thing from the </span><strong class="bold"><span class="koboSpan" id="kobo.551.1">Things</span></strong><span class="koboSpan" id="kobo.552.1"> list. </span><span class="koboSpan" id="kobo.552.2">After selecting the Thing, it will show you the variables that are associated with </span><span class="No-Break"><span class="koboSpan" id="kobo.553.1">that Thing.</span></span></li>
<li><span class="koboSpan" id="kobo.554.1">Select a variable from the </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.555.1">Variables</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.556.1"> list.</span></span></li>
<li><span class="koboSpan" id="kobo.557.1">Here, you will see all the details of the variables, such as the Thing name, </span><strong class="bold"><span class="koboSpan" id="kobo.558.1">Type</span></strong><span class="koboSpan" id="kobo.559.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.560.1">Last value</span></strong><span class="koboSpan" id="kobo.561.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.562.1">Permission</span></strong><span class="koboSpan" id="kobo.563.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.564.1">Update policy</span></strong><span class="koboSpan" id="kobo.565.1">, and </span><strong class="bold"><span class="koboSpan" id="kobo.566.1">Last update</span></strong><span class="koboSpan" id="kobo.567.1">. </span><span class="koboSpan" id="kobo.567.2">The purpose of this detailed summary is to make sure to verify that you have attached the right variable to the </span><span class="No-Break"><span class="koboSpan" id="kobo.568.1">widget control.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.569.1">After selecting the variable from the specific Thing, click on the </span><strong class="bold"><span class="koboSpan" id="kobo.570.1">LINK VARIABLE</span></strong><span class="koboSpan" id="kobo.571.1"> button, and you will see the variable details in the widget control popup. </span><span class="koboSpan" id="kobo.571.2">From there, you can change or detach the variable. </span><span class="koboSpan" id="kobo.571.3">Finally, click on the </span><strong class="bold"><span class="koboSpan" id="kobo.572.1">DONE</span></strong><span class="koboSpan" id="kobo.573.1"> button; now, our dashboard is ready, with a widget control to send commands to the Thing. </span><span class="koboSpan" id="kobo.573.2">Just click on the eye icon on the dashboard to make it operational. </span><span class="koboSpan" id="kobo.573.3">After that, start testing the </span><span class="No-Break"><span class="koboSpan" id="kobo.574.1">dashboard controls.</span></span></p>
<p><span class="koboSpan" id="kobo.575.1">Here we are done with our first example project with Arduino MKR1010 and the Arduino IoT Cloud. </span><span class="koboSpan" id="kobo.575.2">Next, you need to solve </span><em class="italic"><span class="koboSpan" id="kobo.576.1">Assignment 1</span></em><span class="koboSpan" id="kobo.577.1"> of this section. </span><span class="koboSpan" id="kobo.577.2">After that, you will jump into the second</span><a id="_idIndexMarker173"/><span class="koboSpan" id="kobo.578.1"> section of this chapter, where you will learn how to use the Arduino IoT Cloud with non-compatible devices, such as Arduino Uno, Raspberry Pi, and so on </span><span class="No-Break"><span class="koboSpan" id="kobo.579.1">via Node-RED.</span></span></p>
<h2 id="_idParaDest-47"><a id="_idTextAnchor047"/><span class="koboSpan" id="kobo.580.1">Assignment 1</span></h2>
<p><span class="koboSpan" id="kobo.581.1">Congratulations! </span><span class="koboSpan" id="kobo.581.2">You have completed the first part of this chapter successfully, and I hope you enjoyed that journey. </span><span class="koboSpan" id="kobo.581.3">Now, it’s time to verify what you have learned so far by giving you a </span><span class="No-Break"><span class="koboSpan" id="kobo.582.1">small assignment:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.583.1">Attach three differently colored LEDs of any color (preferably, red, yellow, and green) to the Arduino MKR1010 development board on pin numbers 1, 2, and </span><span class="No-Break"><span class="koboSpan" id="kobo.584.1">3, respectively.</span></span></li>
<li><span class="koboSpan" id="kobo.585.1">Set up a new Thing with the name </span><strong class="source-inline"><span class="koboSpan" id="kobo.586.1">IoT-Based Traffic </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.587.1">Lights Control</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.588.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.589.1">Associate the device, configure its network settings, and create variables according to the number of LEDs. </span><span class="koboSpan" id="kobo.589.2">Variable names should be based on LED colors such </span><span class="No-Break"><span class="koboSpan" id="kobo.590.1">as </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.591.1">LED_Red</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.592.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.593.1">Write the code that will turn the LED on/off according to the variable value. </span><span class="koboSpan" id="kobo.593.2">After writing the code for each LED, verify and upload the code to the </span><span class="No-Break"><span class="koboSpan" id="kobo.594.1">development board.</span></span></li>
<li><span class="koboSpan" id="kobo.595.1">Finally, set up the dashboard with the name </span><strong class="source-inline"><span class="koboSpan" id="kobo.596.1">Traffic Light </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.597.1">Control Dashboard</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.598.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.599.1">Add the </span><strong class="bold"><span class="koboSpan" id="kobo.600.1">Switch</span></strong><span class="koboSpan" id="kobo.601.1"> buttons according to the number of LEDs, and link them with their </span><span class="No-Break"><span class="koboSpan" id="kobo.602.1">associated variables.</span></span></li>
<li><span class="koboSpan" id="kobo.603.1">Test the LEDs by switching them on/off via </span><span class="No-Break"><span class="koboSpan" id="kobo.604.1">a dashboard.</span></span></li>
</ol>
<p class="callout-heading"><span class="koboSpan" id="kobo.605.1">Important note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.606.1">Try the </span><strong class="bold"><span class="koboSpan" id="kobo.607.1">Push Button</span></strong><span class="koboSpan" id="kobo.608.1"> widget control along with the </span><strong class="bold"><span class="koboSpan" id="kobo.609.1">Switch</span></strong><span class="koboSpan" id="kobo.610.1"> button widget control. </span><span class="koboSpan" id="kobo.610.2">Verify whether one variable allows you to connect with more than one widget. </span><span class="koboSpan" id="kobo.610.3">Also, verify the behavior of the </span><strong class="bold"><span class="koboSpan" id="kobo.611.1">Push Button</span></strong><span class="koboSpan" id="kobo.612.1"> widget control by turning the </span><strong class="bold"><span class="koboSpan" id="kobo.613.1">Switch</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.614.1">button on/off.</span></span></p>
<p><span class="koboSpan" id="kobo.615.1">Our world is full of different types of technologies. </span><span class="koboSpan" id="kobo.615.2">Whenever a new innovation comes on the market, it always provides compatibility with older devices. </span><span class="koboSpan" id="kobo.615.3">In the Arduino IoT Cloud, we have a list of devices that are currently supported, but there are millions of devices that are not compatible with the Arduino IoT Cloud. </span><span class="koboSpan" id="kobo.615.4">So, while in the previous section of the chapter, we practiced an example with Arduino IoT Cloud-compatible development boards, next, we are going to look at how we can connect/use non-compatible devices with the Arduino IoT Cloud, such as Arduino UNO, Raspberry Pi, BeagleBone, and </span><span class="No-Break"><span class="koboSpan" id="kobo.616.1">so on.</span></span></p>
<h1 id="_idParaDest-48"><a id="_idTextAnchor048"/><span class="koboSpan" id="kobo.617.1">Introducing Node-RED</span></h1>
<p><span class="koboSpan" id="kobo.618.1">Node-RED is a free, open </span><a id="_idIndexMarker174"/><span class="koboSpan" id="kobo.619.1">source visual programming tool for IoT and other applications. </span><span class="koboSpan" id="kobo.619.2">It was developed by IBM Emerging Technology and was first released in 2013. </span><span class="koboSpan" id="kobo.619.3">Node-RED provides a web-based interface to wire together hardware devices, APIs, and online services in new and</span><a id="_idIndexMarker175"/><span class="koboSpan" id="kobo.620.1"> interesting ways. </span><span class="koboSpan" id="kobo.620.2">The tool uses a </span><strong class="bold"><span class="koboSpan" id="kobo.621.1">graphical flow-based programming language</span></strong><span class="koboSpan" id="kobo.622.1">, making it easy for users with little or no programming experience to build complex IoT systems. </span><span class="koboSpan" id="kobo.622.2">Node-RED has become popular in the IoT and smart home communities for its ease of use and ability to integrate with a wide range of devices </span><span class="No-Break"><span class="koboSpan" id="kobo.623.1">and services.</span></span></p>
<p><span class="koboSpan" id="kobo.624.1">Node-RED is a flow-based development tool for IoT and other applications. </span><span class="koboSpan" id="kobo.624.2">It provides a visual, drag-and-drop interface to connect different devices, APIs, and online services. </span><span class="koboSpan" id="kobo.624.3">With Node-RED, users can wire together inputs, outputs, and functions to create sophisticated IoT solutions. </span><span class="koboSpan" id="kobo.624.4">As well as being open source and free to use, Node-RED has a large user community and a library of </span><span class="No-Break"><span class="koboSpan" id="kobo.625.1">pre-built components.</span></span></p>
<p><span class="koboSpan" id="kobo.626.1">With all Node-RED’s aforementioned benefits, the following question arises: why do we need to use the Arduino IoT Cloud? </span><span class="koboSpan" id="kobo.626.2">At the start of the chapter, I mentioned that the Arduino IoT Cloud only supports a few development boards natively. </span><span class="koboSpan" id="kobo.626.3">Even Arduino doesn’t support all of their development boards, especially Arduino UNO, Arduino Mega, and Raspberry Pi from the Raspberry Pi Foundation, which are very famous among makers and hobbyists and used by industry. </span><span class="koboSpan" id="kobo.626.4">The solution to this is Node-RED, which is compatible with most development boards and has an Arduino IoT Cloud module, making it easier for developers to</span><a id="_idIndexMarker176"/><span class="koboSpan" id="kobo.627.1"> integrate non-compatible devices with the Arduino </span><span class="No-Break"><span class="koboSpan" id="kobo.628.1">IoT Cloud.</span></span></p>
<p><span class="koboSpan" id="kobo.629.1">Node-RED can be used with the Arduino IoT </span><a id="_idIndexMarker177"/><span class="koboSpan" id="kobo.630.1">Cloud with </span><span class="No-Break"><span class="koboSpan" id="kobo.631.1">several benefits:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.632.1">Ease of development</span></strong><span class="koboSpan" id="kobo.633.1">: Node-RED’s visual, drag-and-drop interface makes it easy for users to connect Arduino boards to the cloud and build IoT </span><span class="No-Break"><span class="koboSpan" id="kobo.634.1">applications quickly</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.635.1">Integration with the Arduino IoT Cloud</span></strong><span class="koboSpan" id="kobo.636.1">: Node-RED has built-in support for the Arduino IoT Cloud, allowing users to easily connect their Arduino boards, as well as other development boards, and send data to </span><span class="No-Break"><span class="koboSpan" id="kobo.637.1">the cloud</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.638.1">Flexibility</span></strong><span class="koboSpan" id="kobo.639.1">: The flow-based programming model of Node-RED makes it easy to build and modify </span><span class="No-Break"><span class="koboSpan" id="kobo.640.1">complex systems</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.641.1">Flow-based programming</span></strong><span class="koboSpan" id="kobo.642.1">: Node-RED’s flow-based programming model is well suited to building IoT applications, as it allows users to quickly connect inputs, outputs, and functions to create </span><span class="No-Break"><span class="koboSpan" id="kobo.643.1">sophisticated systems</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.644.1">Open source</span></strong><span class="koboSpan" id="kobo.645.1">: Node-RED is open source, allowing users to access the source code and make modifications </span><span class="No-Break"><span class="koboSpan" id="kobo.646.1">if necessary</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.647.1">Large user community</span></strong><span class="koboSpan" id="kobo.648.1">: Node-RED has a large and active user community, providing access to a wealth of information and </span><span class="No-Break"><span class="koboSpan" id="kobo.649.1">pre-built components</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.650.1">These benefits make Node-RED a good choice for developing Arduino-based IoT applications and connecting them to the cloud. </span><span class="koboSpan" id="kobo.650.2">By using Node-RED, users can leverage the power of the cloud to store, analyze, and visualize data from their IoT systems. </span><span class="koboSpan" id="kobo.650.3">In this section, we have discussed the features and benefits of Node-RED. </span><span class="koboSpan" id="kobo.650.4">Now it’s time to take a practical look by implementing the example project. </span><span class="koboSpan" id="kobo.650.5">The following sections will take you through the implementation of the project step </span><span class="No-Break"><span class="koboSpan" id="kobo.651.1">by step.</span></span></p>
<h1 id="_idParaDest-49"><a id="_idTextAnchor049"/><span class="koboSpan" id="kobo.652.1">The Arduino IoT Cloud and a Node-RED Hello World example</span></h1>
<p><span class="koboSpan" id="kobo.653.1">In this section, we will build </span><a id="_idIndexMarker178"/><span class="koboSpan" id="kobo.654.1">on our project by adding some extra functionality to our system via Node-RED. </span><span class="koboSpan" id="kobo.654.2">This will help you to understand how you can use Node-RED to integrate non-compatible devices with </span><a id="_idIndexMarker179"/><span class="koboSpan" id="kobo.655.1">the Arduino </span><span class="No-Break"><span class="koboSpan" id="kobo.656.1">IoT Cloud.</span></span></p>
<p><span class="koboSpan" id="kobo.657.1">Node-RED will monitor the LED status based on a value that is either </span><strong class="bold"><span class="koboSpan" id="kobo.658.1">true</span></strong><span class="koboSpan" id="kobo.659.1"> or </span><strong class="bold"><span class="koboSpan" id="kobo.660.1">false</span></strong><span class="koboSpan" id="kobo.661.1">. </span><span class="koboSpan" id="kobo.661.2">On the basis of this status, Node-RED will send the command to another Thing variable called </span><strong class="source-inline"><span class="koboSpan" id="kobo.662.1">LEDStatus</span></strong><span class="koboSpan" id="kobo.663.1">, which will be linked to the </span><strong class="bold"><span class="koboSpan" id="kobo.664.1">Status</span></strong><span class="koboSpan" id="kobo.665.1"> widget, which shows the LED as being either on or off. </span><span class="koboSpan" id="kobo.665.2">Using this example, you will learn how to read data from a Thing property/variable and how to write data to a </span><span class="No-Break"><span class="koboSpan" id="kobo.666.1">Thing property/variable.</span></span></p>
<p><span class="koboSpan" id="kobo.667.1">Node-RED has a module that was officially developed by Arduino for connectivity with the Arduino IoT Cloud. </span><span class="koboSpan" id="kobo.667.2">It provides five nodes to carry out different types of operations. </span><span class="koboSpan" id="kobo.667.3">For further details, </span><span class="No-Break"><span class="koboSpan" id="kobo.668.1">visit </span></span><a href="https://flows.nodered.org/node/@arduino/node-red-contrib-arduino-iot-cloud"><span class="No-Break"><span class="koboSpan" id="kobo.669.1">https://flows.nodered.org/node/@arduino/node-red-contrib-arduino-iot-cloud</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.670.1">.</span></span></p>
<h2 id="_idParaDest-50"><a id="_idTextAnchor050"/><span class="koboSpan" id="kobo.671.1">A tour of the Node-RED editor</span></h2>
<p><span class="koboSpan" id="kobo.672.1">Before moving on, I want </span><a id="_idIndexMarker180"/><span class="koboSpan" id="kobo.673.1">to first remind you that you need to set up Node-RED on your machine. </span><span class="koboSpan" id="kobo.673.2">If you already have, that’s great; otherwise, you need to set up on a local machine by going to </span><a href="https://nodered.org/docs/getting-started/local"><span class="koboSpan" id="kobo.674.1">https://nodered.org/docs/getting-started/local</span></a><span class="koboSpan" id="kobo.675.1">. </span><span class="koboSpan" id="kobo.675.2">If you are looking for more cloud/development board options, then go </span><span class="No-Break"><span class="koboSpan" id="kobo.676.1">to </span></span><a href="https://nodered.org/docs/getting-started/"><span class="No-Break"><span class="koboSpan" id="kobo.677.1">https://nodered.org/docs/getting-started/</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.678.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.679.1">After installation, start Node-RED and type </span><strong class="source-inline"><span class="koboSpan" id="kobo.680.1">127.0.0.1:1880</span></strong><span class="koboSpan" id="kobo.681.1"> or </span><strong class="source-inline"><span class="koboSpan" id="kobo.682.1">localhost:1880</span></strong><span class="koboSpan" id="kobo.683.1"> in your browser URL bar. </span><span class="koboSpan" id="kobo.683.2">After that, you will see an interface, with a white space area and several different colored boxes on the left sidebar; here I have marked the following figure with different numbered boxes, which are explained in detail after </span><span class="No-Break"><span class="koboSpan" id="kobo.684.1">the figure:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer032">
<span class="koboSpan" id="kobo.685.1"><img alt=" Figure 2.19 – A Node-RED interface overview" src="image/B19752_02_19.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.686.1"> Figure 2.19 – A Node-RED interface overview</span></p>
<p><span class="koboSpan" id="kobo.687.1">The various parts</span><a id="_idIndexMarker181"/><span class="koboSpan" id="kobo.688.1"> of the preceding figure are explained </span><span class="No-Break"><span class="koboSpan" id="kobo.689.1">as follows:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.690.1">These colorful boxes are called </span><strong class="bold"><span class="koboSpan" id="kobo.691.1">nodes</span></strong><span class="koboSpan" id="kobo.692.1">. </span><span class="koboSpan" id="kobo.692.2">Node-RED </span><a id="_idIndexMarker182"/><span class="koboSpan" id="kobo.693.1">divides different types of nodes into different groups, such as </span><strong class="bold"><span class="koboSpan" id="kobo.694.1">common</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.695.1">and </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.696.1">function</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.697.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.698.1">This is the working area, or canvas area, where you will drag and place </span><span class="No-Break"><span class="koboSpan" id="kobo.699.1">the nodes.</span></span></li>
<li><span class="koboSpan" id="kobo.700.1">The </span><strong class="bold"><span class="koboSpan" id="kobo.701.1">debug</span></strong><span class="koboSpan" id="kobo.702.1"> area is used to debug the output and input of different operations to verify that everything is </span><span class="No-Break"><span class="koboSpan" id="kobo.703.1">working fine.</span></span></li>
<li><span class="koboSpan" id="kobo.704.1">Just like in other development environments, we can execute/run a program using the </span><strong class="bold"><span class="koboSpan" id="kobo.705.1">Deploy</span></strong><span class="koboSpan" id="kobo.706.1"> option. </span><strong class="bold"><span class="koboSpan" id="kobo.707.1">Deploy</span></strong><span class="koboSpan" id="kobo.708.1"> has different options; if you click on the small downward arrow icon, you will get a list of options, such as </span><strong class="bold"><span class="koboSpan" id="kobo.709.1">Full</span></strong><span class="koboSpan" id="kobo.710.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.711.1">Modified Flows</span></strong><span class="koboSpan" id="kobo.712.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.713.1">Modified Nodes</span></strong><span class="koboSpan" id="kobo.714.1">, and </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.715.1">Restart Flows</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.716.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.717.1">The hamburger icon at the top right is the main navigation button, where you can find all the options to control the Node-RED configuration, especially for the installation </span><a id="_idIndexMarker183"/><span class="koboSpan" id="kobo.718.1">of modules. </span><span class="koboSpan" id="kobo.718.2">In our case, we will install the Arduino IoT </span><span class="No-Break"><span class="koboSpan" id="kobo.719.1">Cloud module.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.720.1">Here we have discussed the interface of Node-RED with all the main options. </span><span class="koboSpan" id="kobo.720.2">In the following section, we will look at how to install the Arduino IoT Cloud module for Node-RED, and in the subsequent sections, we will see </span><span class="No-Break"><span class="koboSpan" id="kobo.721.1">its implementation.</span></span></p>
<h2 id="_idParaDest-51"><a id="_idTextAnchor051"/><span class="koboSpan" id="kobo.722.1">Installing the Arduino IoT Cloud module for Node-RED</span></h2>
<p><span class="koboSpan" id="kobo.723.1">For Node-RED to</span><a id="_idIndexMarker184"/><span class="koboSpan" id="kobo.724.1"> communicate with the Arduino</span><a id="_idIndexMarker185"/><span class="koboSpan" id="kobo.725.1"> IoT Cloud, we need to install the Arduino IoT Cloud module, which was officially developed by the </span><span class="No-Break"><span class="koboSpan" id="kobo.726.1">Arduino team.</span></span></p>
<p><span class="koboSpan" id="kobo.727.1">Click on the navigation icon in the top-right corner of the app and then click on </span><strong class="bold"><span class="koboSpan" id="kobo.728.1">Manage palette</span></strong><span class="koboSpan" id="kobo.729.1">. </span><span class="koboSpan" id="kobo.729.2">After that, you will see a popup like the one in the </span><span class="No-Break"><span class="koboSpan" id="kobo.730.1">following figure:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer033">
<span class="koboSpan" id="kobo.731.1"><img alt="Figure 2.20 – Arduino IoT Cloud module installation" src="image/B19752_02_20.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.732.1">Figure 2.20 – Arduino IoT Cloud module installation</span></p>
<p><span class="koboSpan" id="kobo.733.1">From that</span><a id="_idIndexMarker186"/><span class="koboSpan" id="kobo.734.1"> popup, we will install </span><span class="No-Break"><span class="koboSpan" id="kobo.735.1">a</span></span><span class="No-Break"><a id="_idIndexMarker187"/></span><span class="No-Break"><span class="koboSpan" id="kobo.736.1"> module:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.737.1">To install a module, click </span><span class="No-Break"><span class="koboSpan" id="kobo.738.1">on </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.739.1">Palette</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.740.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.741.1">Next, select the </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.742.1">Install</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.743.1"> tab.</span></span></li>
<li><span class="koboSpan" id="kobo.744.1">Initially, you will see a blank area. </span><span class="koboSpan" id="kobo.744.2">Type </span><strong class="source-inline"><span class="koboSpan" id="kobo.745.1">Arduino</span></strong><span class="koboSpan" id="kobo.746.1"> in the search bar, which will display </span><span class="No-Break"><span class="koboSpan" id="kobo.747.1">different modules.</span></span></li>
<li><span class="koboSpan" id="kobo.748.1">Find the </span><strong class="bold"><span class="koboSpan" id="kobo.749.1">@arduino/node-red-contrib-arduinio-iot-cloud</span></strong><span class="koboSpan" id="kobo.750.1"> module and click on </span><strong class="bold"><span class="koboSpan" id="kobo.751.1">install</span></strong><span class="koboSpan" id="kobo.752.1">. </span><span class="koboSpan" id="kobo.752.2">In the previous figure, you can see that I already have </span><span class="No-Break"><span class="koboSpan" id="kobo.753.1">that module.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.754.1">Now that we have installed the</span><a id="_idIndexMarker188"/><span class="koboSpan" id="kobo.755.1"> module, it’s time to have a look at what type of nodes are available in the </span><a id="_idIndexMarker189"/><span class="koboSpan" id="kobo.756.1">Arduino IoT Cloud module. </span><span class="koboSpan" id="kobo.756.2">Close the installation palette, scroll down through the nodes to the bottom, and you will arrive at the </span><strong class="bold"><span class="koboSpan" id="kobo.757.1">Arduino IoT Cloud</span></strong><span class="koboSpan" id="kobo.758.1"> section, as shown in the </span><span class="No-Break"><span class="koboSpan" id="kobo.759.1">following figure:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer034">
<span class="koboSpan" id="kobo.760.1"><img alt="Figure 2.21 – Arduino IoT Cloud nodes" src="image/B19752_02_21.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.761.1">Figure 2.21 – Arduino IoT Cloud nodes</span></p>
<p><span class="koboSpan" id="kobo.762.1">Here is a breakdown of the nodes shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.763.1">Figure 2</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.764.1">.21</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.765.1">:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.766.1">The first one is an </span><em class="italic"><span class="koboSpan" id="kobo.767.1">IN</span></em><span class="koboSpan" id="kobo.768.1"> node (in Node-RED, we have nodes; that’s why I used the word node instead of property to get the value from the </span><span class="No-Break"><span class="koboSpan" id="kobo.769.1">Thing property/variable).</span></span></li>
<li><span class="koboSpan" id="kobo.770.1">The second is an </span><em class="italic"><span class="koboSpan" id="kobo.771.1">OUT</span></em><span class="koboSpan" id="kobo.772.1"> node, used to write the value to the </span><span class="No-Break"><span class="koboSpan" id="kobo.773.1">Thing property/variable.</span></span></li>
<li><span class="koboSpan" id="kobo.774.1">The third is the </span><strong class="bold"><span class="koboSpan" id="kobo.775.1">historic</span></strong><span class="koboSpan" id="kobo.776.1"> node, which is used to get data from a specific property until a specific time. </span><span class="koboSpan" id="kobo.776.2">This node is useful when you want to get the set of values for a specific sensor, such </span><span class="No-Break"><span class="koboSpan" id="kobo.777.1">as temperature/humidity.</span></span></li>
<li><span class="koboSpan" id="kobo.778.1">The </span><a id="_idIndexMarker190"/><span class="koboSpan" id="kobo.779.1">fourth is </span><strong class="bold"><span class="koboSpan" id="kobo.780.1">periodic</span></strong><span class="koboSpan" id="kobo.781.1"> and is useful when</span><a id="_idIndexMarker191"/><span class="koboSpan" id="kobo.782.1"> you want to get the value of a specific property after a specific period of time, such as getting the value of soil moisture after a specific </span><span class="No-Break"><span class="koboSpan" id="kobo.783.1">time interval.</span></span></li>
<li><span class="koboSpan" id="kobo.784.1">The fifth, which is our last node, is </span><strong class="bold"><span class="koboSpan" id="kobo.785.1">inject</span></strong><span class="koboSpan" id="kobo.786.1">. </span><span class="koboSpan" id="kobo.786.2">This is used to add value to the flow of the Arduino IoT Cloud variables after receiving some sort of input. </span><em class="italic"><span class="koboSpan" id="kobo.787.1">OUT</span></em><span class="koboSpan" id="kobo.788.1"> is different, as it only sends out data, but this node will inject the value into the Arduino IoT </span><span class="No-Break"><span class="koboSpan" id="kobo.789.1">Cloud variable.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.790.1">In this section, we have discussed the nodes to work with the Arduino IoT Cloud, that are available to developers from the Arduino IoT Cloud module. </span><span class="koboSpan" id="kobo.790.2">Next, we will set up the API, cloud variables, and dashboard to </span><span class="No-Break"><span class="koboSpan" id="kobo.791.1">proceed further.</span></span></p>
<h2 id="_idParaDest-52"><a id="_idTextAnchor052"/><span class="koboSpan" id="kobo.792.1">Setting up an API, variable, and dashboard widget</span></h2>
<p><span class="koboSpan" id="kobo.793.1">After installing the Arduino IoT Cloud module, it’s time to set up an API in the Arduino IoT Cloud. </span><span class="koboSpan" id="kobo.793.2">In the Arduino IoT Cloud’s older interface, there</span><a id="_idIndexMarker192"/><span class="koboSpan" id="kobo.794.1"> were API options under the </span><strong class="bold"><span class="koboSpan" id="kobo.795.1">Integrations</span></strong><span class="koboSpan" id="kobo.796.1"> tab, but now, the Arduino team has moved the API option to the Arduino IoT Cloud, which is available </span><span class="No-Break"><span class="koboSpan" id="kobo.797.1">at </span></span><a href="https://cloud.arduino.cc/home/"><span class="No-Break"><span class="koboSpan" id="kobo.798.1">https://cloud.arduino.cc/home/</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.799.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.800.1">Click on </span><strong class="bold"><span class="koboSpan" id="kobo.801.1">API Keys</span></strong><span class="koboSpan" id="kobo.802.1">. </span><span class="koboSpan" id="kobo.802.2">After that, you will be taken to the API page; click on </span><strong class="bold"><span class="koboSpan" id="kobo.803.1">CREATE API KEY</span></strong><span class="koboSpan" id="kobo.804.1">. </span><span class="koboSpan" id="kobo.804.2">A popup will appear; type the name for API and click on the </span><strong class="bold"><span class="koboSpan" id="kobo.805.1">CONTINUE</span></strong><span class="koboSpan" id="kobo.806.1"> button. </span><span class="koboSpan" id="kobo.806.2">The following wizard will take some seconds to generate the keys, and then a new popup will appear </span><span class="No-Break"><span class="koboSpan" id="kobo.807.1">displaying them:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer035">
<span class="koboSpan" id="kobo.808.1"><img alt="" role="presentation" src="image/B19752_02_22.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"> </p>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.809.1">Figure 2.22 – The API keys</span></p>
<p><span class="koboSpan" id="kobo.810.1">Copy the client ID and</span><a id="_idIndexMarker193"/><span class="koboSpan" id="kobo.811.1"> client secret by clicking on the copy icons; never try to copy the secret name by selecting it, as it is too long. </span><span class="koboSpan" id="kobo.811.2">Save both the client ID and client secret to secure the location, and after that, click on the checkbox beside </span><strong class="bold"><span class="koboSpan" id="kobo.812.1">I saved my Client ID and Secret</span></strong><span class="koboSpan" id="kobo.813.1"> to confirm that you have saved your keys. </span><span class="koboSpan" id="kobo.813.2">Finally, click on the </span><strong class="bold"><span class="koboSpan" id="kobo.814.1">DONE</span></strong><span class="koboSpan" id="kobo.815.1"> button, and you will see your API key in the panel, ready </span><span class="No-Break"><span class="koboSpan" id="kobo.816.1">for use.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.817.1">Important note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.818.1">One API key has access to all the Things and their variables. </span><span class="koboSpan" id="kobo.818.2">So, it’s good to use one API key to gain access to all Things instead of creating separate API keys for each one. </span><span class="koboSpan" id="kobo.818.3">On the other hand, take care of your keys, as losing them can be a big </span><span class="No-Break"><span class="koboSpan" id="kobo.819.1">security risk.</span></span></p>
<p><span class="koboSpan" id="kobo.820.1">After API key generation, we need to set up an</span><a id="_idIndexMarker194"/><span class="koboSpan" id="kobo.821.1"> extra variable that will receive the value from Node-RED, and a </span><strong class="bold"><span class="koboSpan" id="kobo.822.1">Status</span></strong><span class="koboSpan" id="kobo.823.1"> widget that will act according to the </span><span class="No-Break"><span class="koboSpan" id="kobo.824.1">variable value.</span></span></p>
<p><span class="koboSpan" id="kobo.825.1">For variable creation, go back to the IoT Cloud dashboard shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.826.1">Figure 2</span></em></span><em class="italic"><span class="koboSpan" id="kobo.827.1">.12</span></em><span class="koboSpan" id="kobo.828.1">, select the desired Thing, create a new variable named </span><strong class="source-inline"><span class="koboSpan" id="kobo.829.1">LEDStatus</span></strong><span class="koboSpan" id="kobo.830.1">, and choose the Boolean type that we previously created for the LED. </span><span class="koboSpan" id="kobo.830.2">Then, navigate back to the dashboard and select the dashboard that we developed for the previous exercise. </span><span class="koboSpan" id="kobo.830.3">Click on the </span><strong class="bold"><span class="koboSpan" id="kobo.831.1">Add</span></strong><span class="koboSpan" id="kobo.832.1"> button and search for the </span><strong class="bold"><span class="koboSpan" id="kobo.833.1">Status</span></strong><span class="koboSpan" id="kobo.834.1"> widget from the dropdown. </span><span class="koboSpan" id="kobo.834.2">Link the </span><strong class="source-inline"><span class="koboSpan" id="kobo.835.1">LEDStatus</span></strong><span class="koboSpan" id="kobo.836.1"> variable with the </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.837.1">Status</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.838.1"> widget.</span></span></p>
<p><span class="koboSpan" id="kobo.839.1">Here we have created the API keys in the Arduino IoT Cloud for Node-RED, as well as a new Thing with cloud variables and a dashboard. </span><span class="koboSpan" id="kobo.839.2">Next, we are going to configure the API keys in Node-RED for proper communication with the Arduino </span><span class="No-Break"><span class="koboSpan" id="kobo.840.1">IoT Cloud.</span></span></p>
<h2 id="_idParaDest-53"><a id="_idTextAnchor053"/><span class="koboSpan" id="kobo.841.1">Creating a first project with Node-RED</span></h2>
<p><span class="koboSpan" id="kobo.842.1">We have </span><a id="_idIndexMarker195"/><span class="koboSpan" id="kobo.843.1">done all the mandatory stuff that is required in our journey so far. </span><span class="koboSpan" id="kobo.843.2">Return to the Node-RED dashboard shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.844.1">Figure 2</span></em></span><em class="italic"><span class="koboSpan" id="kobo.845.1">.19</span></em><span class="koboSpan" id="kobo.846.1">, scroll down the left side, and move your node to the Arduino </span><span class="No-Break"><span class="koboSpan" id="kobo.847.1">IoT Cloud.</span></span></p>
<p><span class="koboSpan" id="kobo.848.1">Click on the first node, which is </span><em class="italic"><span class="koboSpan" id="kobo.849.1">IN</span></em><span class="koboSpan" id="kobo.850.1">, and drag it to the flow area. </span><span class="koboSpan" id="kobo.850.2">Double-click on the node, and you will see the following popup for </span><span class="No-Break"><span class="koboSpan" id="kobo.851.1">node configuration:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer036">
<span class="koboSpan" id="kobo.852.1"><img alt="Figure 2.23 – Arduino IN node configuration" src="image/B19752_02_23.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.853.1">Figure 2.23 – Arduino IN node configuration</span></p>
<p><span class="koboSpan" id="kobo.854.1">To edit the property node, follow </span><span class="No-Break"><span class="koboSpan" id="kobo.855.1">these steps:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.856.1">Select the Arduino connection from the dropdown (the dropdown is only there if you have multiple Arduino IoT </span><span class="No-Break"><span class="koboSpan" id="kobo.857.1">Cloud connections).</span></span></li>
<li><span class="koboSpan" id="kobo.858.1">If you don’t have a </span><a id="_idIndexMarker196"/><span class="koboSpan" id="kobo.859.1">connection, click on the pencil icon, and it will take you to a new popup where you will need to provide the name of the connection, along with the client ID and client secret that were generated in the previous section in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.860.1">Figure 2</span></em></span><em class="italic"><span class="koboSpan" id="kobo.861.1">.22</span></em><span class="koboSpan" id="kobo.862.1">. </span><span class="koboSpan" id="kobo.862.2">When you save the connection, it will appear under the </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.863.1">Connection</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.864.1"> dropdown.</span></span></li>
<li><span class="koboSpan" id="kobo.865.1">After successfully creating and selecting a connection, a list of Things that are associated with that connection will appear. </span><span class="koboSpan" id="kobo.865.2">From the </span><strong class="bold"><span class="koboSpan" id="kobo.866.1">Thing</span></strong><span class="koboSpan" id="kobo.867.1"> dropdown, select the target Thing that you will use in your flow. </span><span class="koboSpan" id="kobo.867.2">If you do not see anything in the dropdown, it means there is an issue with </span><span class="No-Break"><span class="koboSpan" id="kobo.868.1">the connection.</span></span></li>
<li><span class="koboSpan" id="kobo.869.1">After the selection of Thing, the </span><strong class="bold"><span class="koboSpan" id="kobo.870.1">Property</span></strong><span class="koboSpan" id="kobo.871.1"> dropdown will list all the variables that are associated with the selected Thing. </span><span class="koboSpan" id="kobo.871.2">Select one variable that you want to sense; in our exercise, I chose the </span><strong class="bold"><span class="koboSpan" id="kobo.872.1">LED</span></strong><span class="koboSpan" id="kobo.873.1"> variable to get </span><span class="No-Break"><span class="koboSpan" id="kobo.874.1">its status.</span></span></li>
<li><span class="koboSpan" id="kobo.875.1">Assign a name to the node, click on the </span><strong class="bold"><span class="koboSpan" id="kobo.876.1">Done</span></strong><span class="koboSpan" id="kobo.877.1"> button, and then you are done with </span><span class="No-Break"><span class="koboSpan" id="kobo.878.1">the configuration.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.879.1">The following is a complete flow of nodes. </span><span class="koboSpan" id="kobo.879.2">It shows the entire workflow, from getting variable values to the final node, which sends a value to the cloud based </span><span class="No-Break"><span class="koboSpan" id="kobo.880.1">on input:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer037">
<span class="koboSpan" id="kobo.881.1"><img alt="Figure 2.24 – A complete flow of the Node-RED project" src="image/B19752_02_24.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.882.1">Figure 2.24 – A complete flow of the Node-RED project</span></p>
<p><span class="koboSpan" id="kobo.883.1">The node workflow is</span><a id="_idIndexMarker197"/><span class="koboSpan" id="kobo.884.1"> broken down </span><span class="No-Break"><span class="koboSpan" id="kobo.885.1">as follows:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.886.1">The first node is the </span><em class="italic"><span class="koboSpan" id="kobo.887.1">IN</span></em><span class="koboSpan" id="kobo.888.1"> node. </span><span class="koboSpan" id="kobo.888.2">Select the variable that you want to read; I selected the </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.889.1">LED</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.890.1"> variable.</span></span></li>
<li><span class="koboSpan" id="kobo.891.1">Add the </span><em class="italic"><span class="koboSpan" id="kobo.892.1">switch</span></em><span class="koboSpan" id="kobo.893.1"> node (node </span><strong class="bold"><span class="koboSpan" id="kobo.894.1">2</span></strong><span class="koboSpan" id="kobo.895.1">) to the flow; it can be found in the </span><strong class="screen-inline"><span class="koboSpan" id="kobo.896.1">Functions</span></strong><em class="italic"> </em><span class="koboSpan" id="kobo.897.1">tab on the left sidebar of the page. </span><span class="koboSpan" id="kobo.897.2">This node is responsible for taking the value from node </span><strong class="bold"><span class="koboSpan" id="kobo.898.1">1</span></strong><span class="koboSpan" id="kobo.899.1"> and selecting the specific node from </span><strong class="bold"><span class="koboSpan" id="kobo.900.1">3</span></strong><span class="koboSpan" id="kobo.901.1"> or </span><strong class="bold"><span class="koboSpan" id="kobo.902.1">4</span></strong><span class="koboSpan" id="kobo.903.1">, according to the value. </span><span class="koboSpan" id="kobo.903.2">Link the Arduino </span><em class="italic"><span class="koboSpan" id="kobo.904.1">IN</span></em><span class="koboSpan" id="kobo.905.1"> node to the </span><em class="italic"><span class="koboSpan" id="kobo.906.1">switch</span></em><span class="koboSpan" id="kobo.907.1"> node. </span><span class="koboSpan" id="kobo.907.2">After linking, double-click on the </span><em class="italic"><span class="koboSpan" id="kobo.908.1">switch</span></em><span class="koboSpan" id="kobo.909.1"> node, where we need to specify the </span><span class="No-Break"><span class="koboSpan" id="kobo.910.1">switch cases.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer038">
<span class="koboSpan" id="kobo.911.1"><img alt="Figure 2.25 – Switch node options" src="image/B19752_02_25.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.912.1">Figure 2.25 – Switch node options</span></p>
<p><span class="koboSpan" id="kobo.913.1">To edit the </span><em class="italic"><span class="koboSpan" id="kobo.914.1">switch</span></em><span class="koboSpan" id="kobo.915.1"> node, follow</span><a id="_idIndexMarker198"/> <span class="No-Break"><span class="koboSpan" id="kobo.916.1">these steps:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.917.1">Firstly, assign a name to the node and then add the </span><span class="No-Break"><span class="koboSpan" id="kobo.918.1">switch cases.</span></span></li>
<li><span class="koboSpan" id="kobo.919.1">In our current exercise, we have two switch statements: the LED is either </span><em class="italic"><span class="koboSpan" id="kobo.920.1">true</span></em><span class="koboSpan" id="kobo.921.1"> or </span><em class="italic"><span class="koboSpan" id="kobo.922.1">false</span></em><span class="koboSpan" id="kobo.923.1">, which means on or off. </span><span class="koboSpan" id="kobo.923.2">By default, there is only one option – click on the small </span><strong class="bold"><span class="koboSpan" id="kobo.924.1">+add</span></strong><span class="koboSpan" id="kobo.925.1"> button to insert a new case. </span><span class="koboSpan" id="kobo.925.2">Input the values </span><strong class="source-inline"><span class="koboSpan" id="kobo.926.1">1</span></strong><span class="koboSpan" id="kobo.927.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.928.1">0</span></strong><span class="koboSpan" id="kobo.929.1">, and we will then have </span><span class="No-Break"><span class="koboSpan" id="kobo.930.1">two flows.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.931.1">The </span><em class="italic"><span class="koboSpan" id="kobo.932.1">change</span></em><span class="koboSpan" id="kobo.933.1"> nodes (</span><strong class="bold"><span class="koboSpan" id="kobo.934.1">3</span></strong><span class="koboSpan" id="kobo.935.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.936.1">4</span></strong><span class="koboSpan" id="kobo.937.1">) are responsible for sending content to the next node, which is </span><strong class="bold"><span class="koboSpan" id="kobo.938.1">5</span></strong><span class="koboSpan" id="kobo.939.1">. </span><span class="koboSpan" id="kobo.939.2">Drag </span><strong class="bold"><span class="koboSpan" id="kobo.940.1">3</span></strong><span class="koboSpan" id="kobo.941.1"> and link it with the </span><em class="italic"><span class="koboSpan" id="kobo.942.1">switch</span></em><span class="koboSpan" id="kobo.943.1"> node, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.944.1">Figure 2</span></em></span><em class="italic"><span class="koboSpan" id="kobo.945.1">.24</span></em><span class="koboSpan" id="kobo.946.1">. </span><span class="koboSpan" id="kobo.946.2">Node </span><strong class="bold"><span class="koboSpan" id="kobo.947.1">3</span></strong><span class="koboSpan" id="kobo.948.1"> represents the </span><strong class="source-inline"><span class="koboSpan" id="kobo.949.1">True</span></strong><span class="koboSpan" id="kobo.950.1">/</span><strong class="source-inline"><span class="koboSpan" id="kobo.951.1">1</span></strong><span class="koboSpan" id="kobo.952.1">/</span><strong class="source-inline"><span class="koboSpan" id="kobo.953.1">On</span></strong><span class="koboSpan" id="kobo.954.1"> value. </span><span class="koboSpan" id="kobo.954.2">Double-click on this node. </span><span class="koboSpan" id="kobo.954.3">Now, click on the drop-down icon, which is marked by a red box in the following figure, select the </span><strong class="bold"><span class="koboSpan" id="kobo.955.1">Boolean</span></strong><span class="koboSpan" id="kobo.956.1"> type, and then </span><span class="No-Break"><span class="koboSpan" id="kobo.957.1">select </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.958.1">true</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.959.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer039">
<span class="koboSpan" id="kobo.960.1"><img alt="Figure 2.26 – Changing the node configuration" src="image/B19752_02_26.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.961.1">Figure 2.26 – Changing the node configuration</span></p>
<p><span class="koboSpan" id="kobo.962.1">To edit the change </span><a id="_idIndexMarker199"/><span class="koboSpan" id="kobo.963.1">node, follow </span><span class="No-Break"><span class="koboSpan" id="kobo.964.1">these steps:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.965.1">Again, insert the </span><em class="italic"><span class="koboSpan" id="kobo.966.1">change</span></em><span class="koboSpan" id="kobo.967.1"> node and link it with the </span><em class="italic"><span class="koboSpan" id="kobo.968.1">switch</span></em><span class="koboSpan" id="kobo.969.1"> node (node </span><strong class="bold"><span class="koboSpan" id="kobo.970.1">4</span></strong><span class="koboSpan" id="kobo.971.1">) shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.972.1">Figure 2</span></em></span><em class="italic"><span class="koboSpan" id="kobo.973.1">.24</span></em><span class="koboSpan" id="kobo.974.1">. </span><span class="koboSpan" id="kobo.974.2">This will represent the </span><strong class="source-inline"><span class="koboSpan" id="kobo.975.1">False</span></strong><span class="koboSpan" id="kobo.976.1">/</span><strong class="source-inline"><span class="koboSpan" id="kobo.977.1">0</span></strong><span class="koboSpan" id="kobo.978.1">/</span><strong class="source-inline"><span class="koboSpan" id="kobo.979.1">Off</span></strong><span class="koboSpan" id="kobo.980.1"> value. </span><span class="koboSpan" id="kobo.980.2">Double-click the </span><em class="italic"><span class="koboSpan" id="kobo.981.1">change</span></em><span class="koboSpan" id="kobo.982.1"> node, select the Boolean data type, and select the </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.983.1">false</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.984.1"> value.</span></span></li>
<li><span class="koboSpan" id="kobo.985.1">Everything is ready now. </span><span class="koboSpan" id="kobo.985.2">We just need to add a node that will send data to a specific Arduino IoT Cloud Thing variable. </span><span class="koboSpan" id="kobo.985.3">To send the data, we need the Arduino </span><em class="italic"><span class="koboSpan" id="kobo.986.1">OUT</span></em><span class="koboSpan" id="kobo.987.1"> node, which is the second node under the Arduino IoT Cloud tab shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.988.1">Figure 2</span></em></span><em class="italic"><span class="koboSpan" id="kobo.989.1">.21</span></em><span class="koboSpan" id="kobo.990.1">. </span><span class="koboSpan" id="kobo.990.2">Drag this node, and connect both </span><em class="italic"><span class="koboSpan" id="kobo.991.1">change</span></em><span class="koboSpan" id="kobo.992.1"> nodes (</span><strong class="bold"><span class="koboSpan" id="kobo.993.1">3</span></strong><span class="koboSpan" id="kobo.994.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.995.1">4</span></strong><span class="koboSpan" id="kobo.996.1">) to the Arduino </span><em class="italic"><span class="koboSpan" id="kobo.997.1">OUT</span></em><span class="koboSpan" id="kobo.998.1"> node (</span><strong class="bold"><span class="koboSpan" id="kobo.999.1">5</span></strong><span class="koboSpan" id="kobo.1000.1">) as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1001.1">Figure 2</span></em></span><em class="italic"><span class="koboSpan" id="kobo.1002.1">.24</span></em><span class="koboSpan" id="kobo.1003.1">. </span><span class="koboSpan" id="kobo.1003.2">This node has the same configuration as the </span><em class="italic"><span class="koboSpan" id="kobo.1004.1">IN</span></em><span class="koboSpan" id="kobo.1005.1"> node. </span><span class="koboSpan" id="kobo.1005.2">Select the connection, then the Thing, and finally, select the variable where you want to send the data. </span><span class="koboSpan" id="kobo.1005.3">For the current exercise, we will select the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1006.1">LEDStatus</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1007.1"> variable.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.1008.1">Finally, we are done with all the node configurations and linkage. </span><span class="koboSpan" id="kobo.1008.2">Click on the </span><strong class="bold"><span class="koboSpan" id="kobo.1009.1">Deploy</span></strong><span class="koboSpan" id="kobo.1010.1"> button shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1011.1">Figure 2</span></em></span><em class="italic"><span class="koboSpan" id="kobo.1012.1">.19</span></em><span class="koboSpan" id="kobo.1013.1"> and move back to the device dashboard in the Arduino IoT Cloud. </span><span class="koboSpan" id="kobo.1013.2">Remember to keep MKR1010 on and connected to the internet. </span><span class="koboSpan" id="kobo.1013.3">Now, click on the </span><strong class="bold"><span class="koboSpan" id="kobo.1014.1">switch</span></strong><span class="koboSpan" id="kobo.1015.1"> button to turn the LED on/off, and wait for a few seconds to get an updated value from Node-RED. </span><span class="koboSpan" id="kobo.1015.2">In the background, Node-RED will send the value to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1016.1">LEDStatus</span></strong><span class="koboSpan" id="kobo.1017.1"> Arduino IoT Cloud variable according to the Node-RED </span><strong class="bold"><span class="koboSpan" id="kobo.1018.1">LED</span></strong><span class="koboSpan" id="kobo.1019.1"> variable, and the status widget will be </span><a id="_idIndexMarker200"/><span class="No-Break"><span class="koboSpan" id="kobo.1020.1">changed accordingly.</span></span></p>
<p><span class="koboSpan" id="kobo.1021.1">In the second part of the chapter, we have explored how to connect non-compatible IoT development boards with the Arduino IoT Cloud using Node-RED. </span><span class="koboSpan" id="kobo.1021.2">Next up is </span><em class="italic"><span class="koboSpan" id="kobo.1022.1">Assignment 2</span></em><span class="koboSpan" id="kobo.1023.1">, which is specially designed for you to practice with </span><span class="No-Break"><span class="koboSpan" id="kobo.1024.1">different experiments.</span></span></p>
<h2 id="_idParaDest-54"><a id="_idTextAnchor054"/><span class="koboSpan" id="kobo.1025.1">Assignment 2</span></h2>
<p><span class="koboSpan" id="kobo.1026.1">Continue the previous assignment, where you connected three LEDs to MKR Wi-Fi 1010 and the Arduino IoT </span><span class="No-Break"><span class="koboSpan" id="kobo.1027.1">Cloud setup:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.1028.1">Create three status variables in the Thing, according to the LED name such as Red, Yellow and Green, to the </span><span class="No-Break"><span class="koboSpan" id="kobo.1029.1">previously-set-up Thing.</span></span></li>
<li><span class="koboSpan" id="kobo.1030.1">Add three status widgets to the previously-set-up dashboard and attach newly created status variables </span><span class="No-Break"><span class="koboSpan" id="kobo.1031.1">to them.</span></span></li>
<li><span class="koboSpan" id="kobo.1032.1">Set up three different flows for each LED and deploy </span><span class="No-Break"><span class="koboSpan" id="kobo.1033.1">the flows.</span></span></li>
<li><span class="koboSpan" id="kobo.1034.1">Verify the status widgets by turning the LEDs on/off with the </span><strong class="bold"><span class="koboSpan" id="kobo.1035.1">Switch</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.1036.1">button widget.</span></span></li>
</ol>
<h1 id="_idParaDest-55"><a id="_idTextAnchor055"/><span class="koboSpan" id="kobo.1037.1">Summary</span></h1>
<p><span class="koboSpan" id="kobo.1038.1">This chapter is the first chapter where we explored how to connect devices with the Arduino IoT Cloud using a basic LED on/off example. </span><span class="koboSpan" id="kobo.1038.2">In the first part, we used an Arduino IoT Cloud-compatible development board, which was the MKR Wi-Fi 1010 board, where we learned how to create Things and cloud variables, how to associate devices, how to configure networks, and how to create sketches. </span><span class="koboSpan" id="kobo.1038.3">At the end of that section, there was an assignment for you to </span><span class="No-Break"><span class="koboSpan" id="kobo.1039.1">practice on.</span></span></p>
<p><span class="koboSpan" id="kobo.1040.1">In the second part of this chapter, we explored how to connect non-compatible development boards, such as Arduino UNO, Arduino Mega, and Raspberry Pi, with the Arduino IoT Cloud, using Node-RED and the Arduino API interface. </span><span class="koboSpan" id="kobo.1040.2">Here we have explored Node-RED, the Node-RED module for the Arduino IoT Cloud, and generating API keys in the cloud. </span><span class="koboSpan" id="kobo.1040.3">This part of the chapter helped teach you how to use non-compatible existing technologies with the Arduino </span><span class="No-Break"><span class="koboSpan" id="kobo.1041.1">IoT Cloud.</span></span></p>
<p><span class="koboSpan" id="kobo.1042.1">Arduino has a lot of options in the Arduino IoT Cloud, such as Things, devices, dashboards, and a lot of widgets for dashboards and the Arduino Web Editor. </span><span class="koboSpan" id="kobo.1042.2">So, in the next chapter, we will explore all those options in detail before moving on. </span><a href="B19752_03.xhtml#_idTextAnchor056"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1043.1">Chapter 3</span></em></span></a><span class="koboSpan" id="kobo.1044.1"> is very important for you to better understand all of the Arduino IoT </span><span class="No-Break"><span class="koboSpan" id="kobo.1045.1">Cloud options.</span></span></p>
</div>
</body></html>