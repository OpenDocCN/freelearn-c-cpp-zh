<html><head></head><body>
        <section>

                            <header>
                    <h1 class="header-title">Fluid UI with Qt Quick</h1>
                </header>
            
            <article>
                
<p class="mce-root">My television uses Qt. My phone uses Qt. I could buy a car that uses Qt. I can fly on a plane that uses Qt on its infotainment center. All these things use Qt Quick as their UI. Why? Because it provides faster development—no waiting around for compiling—and the syntax is easy to use, but complex enough to customize it beyond your imagination.</p>
<p><span>Qt Quick started out being developed in the Brisbane development office of Trolltech as one developer's research project. </span>One of my jobs was to put a demo app of an early version of it onto a Nokia N800 tablet<span>, which I had customized to run Qtopia instead of Nokia's Maemo interface. This was before Nokia purchased the Trolltech company. In my opinion, it was going to become the next generation of Qtopia, which had been renamed Qt Extended. Qtopia, by 2006, had been sold on millions of phone handsets, including 11 models of phones and 30 various handheld devices. </span>Some parts of Qtopia were melded into Qt itself – my favorites, Qt Sensors, and Qt Bearer Management, are examples of these. This new XML-like framework became QML and Qt Quick<span>.</span></p>
<p class="mce-root">Qt Quick is a really exciting technology and it seems to be taking over the world. It is used in laptops, mobile phones such as the Jolla Sailfish, and medical devices, among others things.</p>
<p class="mce-root">It allows rapid development, fluid transformations, animations, and special effects. Qt Quick allows developers to design customized animated <strong>User Interfaces</strong> (<strong>UI</strong>). Along with the related Qt Quick Controls 2 and <span>Qt Charts</span><span> APIs, anyone can create snazzy mobile and embedded apps.</span></p>
<p class="mce-root">In this chapter, we will design and construct an animated UI. We will also cover basic components, such as <kbd>Item</kbd>, <kbd>Rectangle</kbd>, and more advanced elements, such as <kbd>GraphicsView</kbd>. We will look at positioning items with anchors, states, animations, and transitions, and we will also cover traditional features, such as buttons, sliders, and scrollbars. Advanced components showing data in charts, such as BarChart and PieChart, will be shown.</p>
<p class="mce-root">We will be covering the following topics in this chapter:</p>
<ul>
<li style="font-weight: 400">Learning Qt Quick basics</li>
<li style="font-weight: 400">Advanced QML elements in Qt Quick Controls</li>
<li style="font-weight: 400">Elements for displaying data—Qt Data Visualization and Qt Charts</li>
<li style="font-weight: 400">Basic animation with Qt Quick</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Qt Quick basics – anything goes</h1>
                </header>
            
            <article>
                
<p>Qt Quick is unreal. You should be aware that, at its core, it has only a few fundamental building blocks, called components. You will undoubtedly be using these components quite often:</p>
<ul>
<li><kbd>Item</kbd></li>
<li><kbd>Rectangle</kbd></li>
<li><kbd>Text</kbd></li>
<li><kbd>Image</kbd></li>
<li><kbd>TextInput</kbd></li>
<li><kbd>MouseArea</kbd></li>
</ul>
<p>Although there are probably hundreds of components and types, these items are the most important. There are also several classes of elements for text, positioning, states, animation, transitions, and transformations. Views, paths, and data handling all have their own elements.</p>
<p>With those building blocks, you can create fantastic UIs that are alive with animations.</p>
<p>The language to write Qt Quick applications is quite easy to pick up. Let's get started.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">QML</h1>
                </header>
            
            <article>
                
<p><strong>Qt Modeling Language</strong><span> </span>(<strong><span>QML</span></strong>) i<span>s the declarative programming language that Qt Quick uses. Closely aligned with JavaScript, it is the centerpiece language for Qt Quick. You can use JavaScript functions within a QML document, and Qt Quick will run it.</span></p>
<div class="packt_tip packt_infobox"><span>We use Qt Quick 2 for this book, as Qt Quick 1.0 is depreciated.</span></div>
<p>All QML documents need to have one or more<span> </span><kbd>import</kbd><span> </span>statements.</p>
<p><span>This is about the same as C and C++'s</span><span> </span><kbd>#include</kbd><span> statement.</span></p>
<p>The most basic QML will have at least one import statement, such as this:</p>
<pre><span>import</span><span> </span>QtQuick<span> </span>2.12</pre>
<p><span>The </span><kbd>.12</kbd><span> </span><span>corresponds with Qt's minor version, which is the lowest version the application will support.</span></p>
<p><span>If you are using properties or components that were added in a certain Qt version,</span><span> </span>you will need to specify that version.</p>
<p>Qt Quick applications are built with building blocks known as elements, or components. Some basic types are <kbd>Rectangle</kbd>, <kbd>Item</kbd>, and <kbd>Text</kbd>.</p>
<p class="mce-root">Input interaction is supported through <kbd>MouseArea</kbd> and other items, such as <kbd>Flickable.</kbd></p>
<p>One way to start developing a Qt Quick app is by using the Qt Quick app wizard in Qt Creator. You can also grab your favorite text editor and start coding away!</p>
<p><span>Let's go though some of the following concepts that are i</span>mportant to be aware of as terms that make up the QML language:</p>
<ul>
<li>Components, types, and elements</li>
<li>Dynamic binding</li>
<li>Signal connection</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Components</h1>
                </header>
            
            <article>
                
<p>Components, also known as types or elements, are objects of code and can contain both UI and non-UI aspects.</p>
<p class="mce-root"/>
<p class="mce-root"/>
<p>A UI component example would be the <kbd>Text</kbd> object:</p>
<pre>Text {<br/>// this is a component<br/>}</pre>
<p>Component properties can be bound to variables, other properties, and values.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Dynamic binding</h1>
                </header>
            
            <article>
                
<p>Dynamic binding is a way to set a property value, which can either be a hardcoded static value, or be bound to other dynamic property values. Here, we bind the <kbd>Text</kbd> component's <kbd>id</kbd> property to <kbd>textLabel</kbd>. We can then refer it to this element just by using its <kbd>id</kbd>:</p>
<pre>Text {<br/>   id: textLabel<br/>}</pre>
<p>A component can have none, one, or a few signals that can be utilized.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Signal connections</h1>
                </header>
            
            <article>
                
<p>There are two ways signals can be handled. The easiest way is by prepending <kbd>on</kbd> and then capitalizing the first letter of the particular signal. For example, a <kbd>MouseArea</kbd> has a signal named <kbd>clicked</kbd>, which can be connected by declaring <kbd>onClicked</kbd>, and then binding this to a function with curly brackets, <kbd>{ }</kbd>, or even a single line:</p>
<pre>MouseArea {<br/>    onClicked: console.log("mouse area clicked!")<br/>}</pre>
<p>You can also use the <kbd>Connections</kbd> type to target some other component's signal:</p>
<pre>Connections {<br/>    target: mouseArea<br/>    onClicked: console.log("mouse area clicked!")<br/>}</pre>
<p>The model-view paradigm is not dead with Qt Quick. There are a few elements that can show data model views.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Model-view programming</h1>
                </header>
            
            <article>
                
<p>Qt Quick's views are<span> based on a</span> model<span>, which can be defined either with the</span> <kbd>model</kbd> <span>property or as a list of elements within the component. The view is controlled by a delegate, which is any UI element capable of showing the data.</span></p>
<p>You can refer to properties of the model data in the delegate.</p>
<p>For example, let's declare a <kbd>ListModel</kbd>, and fill it with two sets of data. <kbd>Component</kbd> is a generic object that can be declared, and here, I use it to contain a <kbd>Text</kbd> component that will function as the delegate. The model's data with the ID of <kbd>carModel</kbd> can be referred to in the delegate. Here, there is a binding to the <kbd>text</kbd> property of the <kbd>Text</kbd> element:</p>
<div class="packt_infobox"><span>The source code can be found on the Git repository under the </span><kbd><span>Chapter02</span>-1b</kbd><span> directory, in the</span> <kbd>cp2</kbd> <span>branch.</span></div>
<pre>ListModel {<br/>    id: myListModel<br/>    ListElement { carModel: "Tesla" }<br/>    ListElement { carModel: "Ford Sync 3" }<br/>}<br/><br/>Component {<br/>    id: theDelegate<br/>    Text {<br/>        text: carModel<br/>    }<br/>}</pre>
<p>We can then use this model and its delegate in different views. Qt Quick has a few different views to choose from:</p>
<ul>
<li><kbd>GridView</kbd></li>
<li><kbd>ListView</kbd></li>
<li><kbd>PathView</kbd></li>
<li><kbd>TreeView</kbd></li>
</ul>
<p>Let's look at how we can use each of these.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">GridView</h1>
                </header>
            
            <article>
                
<p>The <kbd>GridView</kbd> type shows model data in a grid, much like a <kbd>GridLayout</kbd>.</p>
<p>The grid's layout can be contained with the following properties:</p>
<ul>
<li><span><kbd>flow</kbd>:</span>
<ul>
<li><kbd><span>GridView.</span><span>FlowLeftToRight</span></kbd></li>
<li><kbd><span>GridView.</span><span>FlowTopToBottom</span></kbd></li>
</ul>
</li>
<li><span><kbd>layoutDirection</kbd>:</span>
<ul>
<li><kbd>Qt.LeftToRight</kbd></li>
<li><kbd>Qt.RightToLeft</kbd> </li>
</ul>
</li>
<li><span><kbd>verticalLayoutDirection</kbd>:</span>
<ul>
<li><kbd>GridView.TopToBottom</kbd></li>
<li><kbd>GridView.BottomToTop</kbd></li>
</ul>
</li>
</ul>
<p>The <kbd>flow</kbd> property contains the way the data is presented so it becomes wrapped to the next line or column when it is appropriate. <span>It controls the way it overflows to the next line or column.</span> </p>
<p>The icon for the following example came from <a href="https://icons8.com">https://icons8.com</a>.</p>
<p><kbd>FlowLeftToRight</kbd><span> means the</span> flow <span>is horizontal. Here's a pictorial representation for</span> <kbd>FlowLeftToRight</kbd><span>:</span></p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/487b0a67-225c-4e49-bd0c-39ac5c91d0fc.png"/></p>
<p><span>For </span><kbd>FlowTopToBottom</kbd><span>, the</span> flow <span>is vertical; here's a representation of <kbd>FlowTopToBottom</kbd>:</span></p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/a15cb40a-8dd7-44bb-ab31-55010d39c798.png" style="width:54.42em;height:36.00em;"/></p>
<p>When this example gets built and run, you can resize the window by grabbing the corner with the mouse. You will get a better idea of how the flow works.</p>
<p><span>The </span><kbd>layoutDirection</kbd><span> property indicates which direction the data will be laid out. In the following case, this is <kbd>RightToLeft</kbd>:</span></p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/50f2bd00-e771-4d1d-98ad-58e9f28575d5.png"/></p>
<p><span>The </span><kbd>verticalLayoutDirection</kbd><span> also indicates which direction the data is laid out, except this will be vertical. Here's the <kbd>GridView.BottomToTop</kbd> representation:</span></p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/e34592be-d6ca-4bf0-9537-52fc184cb427.png" style="width:26.75em;height:24.08em;"/></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">ListView</h1>
                </header>
            
            <article>
                
<p>The QML <kbd>Listview</kbd> is a type of <kbd>Flickable</kbd> element, meaning that the user can swipe or flick left or right to progress through the difference views. <kbd>ListView</kbd> looks different from the <kbd>QListView</kbd><span> desktop,</span> as the items are presented in their own page, which is accessible by flicking left or right.</p>
<p>The layout is handled by these properties:</p>
<ul>
<li><kbd>orientation</kbd>:
<ul>
<li><kbd>Qt.horizontal</kbd></li>
<li><kbd>Qt.vertical </kbd></li>
</ul>
</li>
<li><kbd>layoutDirection</kbd>:
<ul>
<li><kbd>Qt.LeftToRight</kbd></li>
<li><kbd>Qt.RightToLeft</kbd> </li>
</ul>
</li>
<li><kbd>verticalLayoutDirection</kbd>:
<ul>
<li><kbd>ListView.TopToBottom</kbd></li>
<li><kbd>ListView.BottonToTop</kbd> </li>
</ul>
</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">PathView</h1>
                </header>
            
            <article>
                
<p><kbd>PathView</kbd> shows model data in a <kbd>Path</kbd>. Its delegate is a view for displaying the model data. It could be a simple drawn line, or an image with text. This can produce a flowing wheel type of data presentation. A <kbd>Path</kbd> can be constructed by one or more of the following <kbd>path</kbd> segments:</p>
<ul>
<li><kbd>PathAngleArc</kbd>: An arc with radii and center</li>
<li><kbd>PathArc</kbd>: An arc with radius</li>
<li><kbd>PathCurve</kbd>: A path through a set of points</li>
<li><kbd>PathCubic</kbd>: A path on Bézier curve</li>
<li><kbd>PathLine</kbd>: A straight line</li>
<li><kbd>PathQuad</kbd>: A quadratic <span>Bézier</span> curve</li>
</ul>
<p>Here, we use <kbd>PathArc</kbd> to display a wheel-like item model, using our <kbd>carModel</kbd>:</p>
<div class="packt_infobox"><span>The source code can be found on the Git repository under the </span><kbd><span>Chapter02</span>-1c</kbd><span> directory, in the</span> <kbd>cp2</kbd> <span>branch.</span></div>
<pre><span>     </span><span>PathView</span><span> </span>{<br/><span>         </span><span>id</span>:<span> </span><span>pathView<br/></span><span>         </span><span>anchors.fill</span>:<span> </span><span>parent<br/></span><span>         </span><span>anchors.margins</span>:<span> </span>30<br/>         <span>model</span><span>:</span><span> </span><span>myListModel<br/></span>         <span>delegate</span><span>:</span><span>  </span><span>Rectangle</span><span> </span><span>{<br/></span><span>             </span><span>id</span>:<span> </span><span>theDelegate<br/></span><span>             </span><span>Text</span><span> </span>{<span>                 <br/></span><span>                 text</span>:<span> </span>carModel<br/>             }<br/><span>              </span><span>Image</span><span> </span>{<br/><span>                </span><span>source</span>:<span> </span><span>"/icons8-sedan-64.png"<br/></span><span>             </span>}<br/><span>         </span>}<br/><span>         </span><span>path</span>:<span> </span><span>Path</span><span> </span>{<br/><span>             </span><span>startX</span>:<span> </span>0;<span> </span><span>startY</span>:<span> </span>40<br/><span>             </span>PathArc<span> </span>{<span> </span><span>x</span>:<span> </span>0;<span> </span><span>y</span>:<span> </span>400;<span> </span><span>radiusX</span>:5;<span> </span><span>radiusY</span>:<span> </span>5<span> </span>}<br/><span>         </span>}<br/>     <span>}</span></pre>
<p>You should now see something like this:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/e6b1ded4-1eae-4839-ab66-7217df3d6ff3.png"/></p>
<p>There are a couple of special <kbd>path</kbd> segments that augment and change attributes of the <kbd>path</kbd>:</p>
<ul>
<li><kbd>PathAttribute</kbd>: Allows an attribute to be specified at certain points along a path</li>
<li><kbd>PathMove</kbd>: Moves a path to a new position</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">TreeView</h1>
                </header>
            
            <article>
                
<p><kbd>TreeView</kbd> is perhaps the most recognizable of these views. It looks very similar to the desktop variety. It displays a tree structure of its model data. <kbd>TreeView</kbd> has headers, called <kbd>TableViewColumn</kbd>, which you can use to add a title as well as to specify its width. Further customization can be made using <kbd>headerDelegate</kbd>, <kbd>itemDelegate</kbd>, and <kbd>rowDelegate</kbd>.</p>
<p>Sorting is not implemented by default, but can be controlled by a few properties:</p>
<ul>
<li><kbd>sortIndicatorColumn</kbd>: <kbd>Int</kbd>, indicating the column to be sorted</li>
<li><kbd>sortIndicatorVisible</kbd>: <kbd>Bool</kbd> is used to enable sorting</li>
<li><kbd>sortIndicatorOrder</kbd>: <kbd>Enum</kbd> either <kbd>Qt.AscendingOrder</kbd> or <kbd>Qt.DescendingOrder</kbd></li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Gestures and touch</h1>
                </header>
            
            <article>
                
<p>Touch gestures can be an innovative way to interact with your application. To use the <kbd>QtGesture</kbd> class in Qt, you will need to implement the handlers in C++ by overriding the <kbd>QGestureEvent</kbd> class and handling the built-in <kbd>Qt::GestureType</kbd>. In this way, the following gestures can be handled:</p>
<ul>
<li><kbd>Qt::TapGesture</kbd></li>
<li><kbd>Qt::TapAndHoldGesture</kbd></li>
<li><kbd>Qt::PanGesture</kbd></li>
<li><kbd>Qt::PinchGesture</kbd></li>
<li><kbd>Qt::SwipeGesture</kbd></li>
<li><kbd>Qt::CustomGesture</kbd></li>
</ul>
<p>The <span><kbd>Qt::CustomGesture</kbd> flag is a special one that can be used to invent your own custom gestures.</span></p>
<p>There is one built-in gesture item in Qt Quick— <kbd>PinchArea</kbd>.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">PinchArea</h1>
                </header>
            
            <article>
                
<p> <kbd>PinchArea</kbd> handles pinch gestures, which are commonly used on mobile phones to zoom in on an image from within Qt Quick, so you can use simple QML to implement it for any <kbd>Item</kbd>-based element.</p>
<p>You can use the <kbd>onPinchFinished</kbd>, <kbd>onPinchStarted</kbd>, and <kbd>onPinchUpdated</kbd> signals, or set the <kbd>pinch.target</kbd> property to the target item to handle the pinch gesture.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">MultiPointTouchArea</h1>
                </header>
            
            <article>
                
<p>The <kbd>MultiPointTouchArea</kbd> is not a gesture, but rather a way to track multiple points of contact of the touchscreen. Not all touchscreens support multi-touch. Mobile phones usually support multi-touch, and some embedded devices do as well. </p>
<p><span>To use multi-point touchscreens in QML, there is the </span><kbd>MultiPointTouchArea</kbd><span> component, which works a bit like </span><kbd>MouseArea</kbd><span>. It can operate alongside </span><kbd>MouseArea</kbd><span> by setting its </span><kbd>mouseEnabled</kbd><span> property to</span> <kbd>true</kbd><strong>.</strong><span> This makes the </span><kbd>MultiPointTouchArea</kbd><span> component ignore events from the mouse and only respond to touch events.</span></p>
<p><span>Each </span><kbd>MultiPointTouchArea</kbd><span> takes an array of </span><kbd>TouchPoints</kbd><span>.</span> Note the use of square brackets, <kbd>[ ]</kbd>—this denotes that it is an array. <span>You can define one or more of these to handle a certain number of <kbd>TouchPoints</kbd> or fingers. </span>Here, we define and handle only three <kbd>TouchPoints</kbd>.</p>
<p>If you try this on a non-touchscreen, only one green dot will track the touch point:</p>
<div class="packt_infobox"><span>The source code can be found on the Git repository under the </span><kbd><span>Chapter02</span>-2a</kbd><span> directory, in the</span> <kbd>cp2</kbd> <span>branch.</span></div>
<pre><span>import</span><span> </span>QtQuick<span> </span>2.12<br/><span>import QtQuick.Window 2.12<br/></span>Window<span> </span><span>{<br/></span><span>    </span><span>visible</span>:<span> </span>true<br/><span>    </span><span>width</span>:<span> </span>640<br/><span>    </span><span>height</span>:<span> </span>480<br/><span>    </span><span>color</span>:<span> </span><span>"black"<br/></span><span>    </span><span>title</span>:<span> "</span><span>You</span><span> </span><span>can</span><span> </span><span>touch</span><span> </span><span>this!"<br/></span><br/>    <span>MultiPointTouchArea</span><span> </span><span>{</span><span>        <br/></span><span>        anchors.fill</span>:<span> </span><span>parent<br/></span><span>        </span><span>touchPoints</span>:<span> [<br/></span><span>            </span>TouchPoint<span> </span>{<span> </span><span>id</span>:<span> </span><span>touch1</span><span> </span>},<br/><span>            </span>TouchPoint<span> </span>{<span> </span><span>id</span>:<span> </span><span>touch2</span><span> </span>},<br/><span>            </span>TouchPoint<span> </span>{<span> </span><span>id</span>:<span> </span><span>touch3</span><span> </span>}<br/><span>        </span>]<br/><span>        </span><span>Rectangle</span><span> </span>{<br/><span>            </span><span>width</span>:<span> </span>45;<span> </span><span>height</span>:<span> </span>45<br/><span>            </span><span>color</span>:<span> </span><span>"#80c342"<br/></span><span>            </span><span>x</span>:<span> </span><span>touch1</span>.x<br/><span>            </span><span>y</span>:<span> </span><span>touch1</span>.y<br/><span>            </span><span>radius</span>:<span> </span>50<br/><span>            </span><span>Behavior</span><span> </span><span>on</span><span> </span><span>x</span><span>  </span>{<br/><span>                 </span><span>PropertyAnimation</span><span> </span>{<span>easing.type</span>:<span> </span><span>Easing</span>.OutBounce;<span> </span><span>duration</span>:<span> </span>500<span> </span>}<br/><span>             </span>}<br/><span>            </span><span>Behavior</span><span> </span><span>on</span><span> </span><span>y</span><span>  </span>{<br/><span>                 </span><span>PropertyAnimation</span><span> </span>{<span>easing.type</span>:<span> </span><span>Easing</span>.OutBounce;<span> </span><span>duration</span>:<span> </span>500<span> </span>}<br/><span>             </span>}<br/><span>     </span>}<br/>     <span>Rectangle</span><span> </span><span>{<br/></span><span>         </span><span>width</span>:<span> </span>45;<span> </span><span>height</span>:<span> </span>45<br/><span>         </span><span>color</span>:<span> </span><span>"#b40000"<br/></span><span>         </span><span>x</span>:<span> </span><span>touch2</span>.x<br/><span>         </span><span>y</span>:<span> </span><span>touch2</span>.y<br/><span>         </span><span>radius</span>:<span> </span>50<br/><span>            </span><span>Behavior</span><span> </span><span>on</span><span> </span><span>x</span><span>  </span>{<br/><span>                 </span><span>PropertyAnimation</span><span> </span>{<span>easing.type</span>:<span> </span><span>Easing</span>.OutBounce;<span> </span><span>duration</span>:<span> </span>500<span> </span>}<br/><span>             </span>}<br/><span>            </span><span>Behavior</span><span> </span><span>on</span><span> </span><span>y</span><span>  </span>{<br/><span>                 </span><span>PropertyAnimation</span><span> </span>{<span>easing.type</span>:<span> </span><span>Easing</span>.OutBounce;<span> </span><span>duration</span>:<span> </span>500<span> </span>}<br/><span>             </span>}<br/><span>     </span>}<br/>     <span>Rectangle</span><span> </span><span>{<br/></span><span>         </span><span>width</span>:<span> </span>45;<span> </span><span>height</span>:<span> </span>45<br/><span>         </span><span>color</span>:<span> </span><span>"#6b11d8"<br/></span><span>         </span><span>x</span>:<span> </span><span>touch2</span>.x<br/><span>         </span><span>y</span>:<span> </span><span>touch2</span>.y<br/><span>         </span><span>radius</span>:<span> </span>50<br/><span>            </span><span>Behavior</span><span> </span><span>on</span><span> </span><span>x</span><span>  </span>{<br/><span>                 </span><span>PropertyAnimation</span><span> </span>{<span>easing.type</span>:<span> </span><span>Easing</span>.OutBounce;<span> </span><span>duration</span>:<span> </span>500<span> </span>}<br/><span>             </span>}<br/><span>            </span><span>Behavior</span><span> </span><span>on</span><span> </span><span>y</span><span>  </span>{<br/><span>                 </span><span>PropertyAnimation</span><span> </span>{<span>easing.type</span>:<span> </span><span>Easing</span>.OutBounce;<span> </span><span>duration</span>:<span> </span>500<span> </span>}<br/><span>             </span>}<br/><span>         </span>}<br/>       <span>}<br/></span>}</pre>
<p>You should see this when you run it on a non-touchscreen:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/12f55c55-7461-43af-afd1-543b80a5696c.png" style="width:49.50em;height:38.00em;"/></p>
<p>Notice the <kbd>PropertyAnimation</kbd>? We'll get to that soon; keep reading.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Positioning</h1>
                </header>
            
            <article>
                
<p>With the myriad of different mobile phones and embedded device sizes currently available, the dynamic positioning of elements becomes more important. You may not necessarily want things placed randomly on the screen. If you have a great-looking layout on a high-DPI iPhone, it may look completely different on a small Android device, with images covering half of the screen. Automatic layouts in QML are called positioners.</p>
<p><span>Mobile and embedded devices come with a variety of screen sizes. We can better target the size variance by using dynamic layouts. </span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Layouts</h1>
                </header>
            
            <article>
                
<p>These are the positioning elements that arrange the layout of the different items that you may want to use: </p>
<ul>
<li><kbd>Grid</kbd>: Positions items in a grid</li>
<li><kbd>Column</kbd>: Positions items vertically</li>
<li><kbd>Row</kbd>: Positions items horizontally</li>
<li><kbd>Flow</kbd>: Positions items side by side with wrapping</li>
</ul>
<p>Additionally, there are also the following items:</p>
<ul>
<li><kbd>GridLayout</kbd> </li>
<li><kbd>ColumnLayout</kbd></li>
<li><kbd>RowLayout</kbd></li>
<li><kbd>StackLayout</kbd></li>
</ul>
<p>The difference between the <kbd>Grid</kbd> and the <kbd>GridLayout</kbd> elements are that the layouts are more dynamic in terms of resizing. Layouts have attached properties, so you can easily specify aspects of the layout, such as <kbd>minimumWidth</kbd>, the number of columns, or the number of rows. The item can be made to fill itself to the grid or fixed width.</p>
<p>You can also use <em>rigid</em> layouts which are more like tables. Let's look at using layouts that are slight less dynamic and use static sizing.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Rigid layouts</h1>
                </header>
            
            <article>
                
<p>I use the word <em>rigid</em> because they are less dynamic than all the layout items. The cell sizes are fixed and <span>based on a percentage of the space where they are contained. They</span> cannot span across rows or columns to fill the next column or row. Take this code, for example.</p>
<p class="mce-root"/>
<p class="mce-root"/>
<p>It has no layouts at all, and, when you run it, all the elements get squished together on top of one another:</p>
<div class="packt_infobox"><span>The source code can be found on the Git repository under the </span><kbd><span>Chapter02</span>-3</kbd><span> directory, in the</span> <kbd>cp2</kbd> <span>branch.</span></div>
<pre><span>import</span><span> </span>QtQuick<span> </span>2.12<br/>import QtQuick.Window 2.12<br/><br/>Window<span> </span>{<br/><span>    </span><span>visible</span>:<span> </span>true<br/><span>    </span><span>width</span>:<span> </span>640<br/><span>    </span><span>height</span>:<span> </span>480<br/><span>    </span><span>title</span>:<span> </span><span>qsTr</span>(<span>"Hello</span><span> </span><span>World"</span>)<br/>    <span>Rectangle</span><span> </span><span>{<br/></span><span>        </span><span>width</span>:<span> </span>35<br/><span>        </span><span>height</span>:<span> </span>35<br/><span>        </span><span>gradient</span>:<span> </span><span>Gradient</span><span> </span>{<br/><span>            </span><span>GradientStop</span><span> </span>{<span> </span><span>position</span>:<span> </span>0.0;<span> </span><span>color</span>:<span> </span><span>"green"</span>;<span> </span>}<br/><span>            </span><span>GradientStop</span><span> </span>{<span> </span><span>position</span>:<span> </span>0.25;<span> </span><span>color</span>:<span> </span><span>"purple"</span>;<span> </span>}<br/><span>            </span><span>GradientStop</span><span> </span>{<span> </span><span>position</span>:<span> </span>0.5;<span> </span><span>color</span>:<span> </span><span>"yellow"</span>;<span> </span>}<br/><span>            </span><span>GradientStop</span><span> </span>{<span> </span><span>position</span>:<span> </span>1.0;<span> </span><span>color</span>:<span> </span><span>"black"</span>;<span> </span>}<br/><span>        </span>}<br/><span>    </span>}<br/>    <span>Text</span><span> </span><span>{<br/></span><span>        </span><span>text</span>:<span> </span><span>"Hands-On"<br/></span><span>        </span><span>color</span>:<span> </span><span>"purple"<br/></span><span>        </span><span>font.pointSize</span>:<span> </span>20<br/><span>    </span>}<br/><span>    </span><span>Text</span><span> </span>{<br/><span>        </span><span>text</span>:<span> </span><span>"Mobile"<br/></span><span>        </span><span>color</span>:<span> </span><span>"red"<br/></span><span>        </span><span>font.pointSize</span>:<span> </span>20<br/><span>    </span>}<br/><span>    </span><span>Text</span><span> </span>{<br/><span>        </span><span>text</span>:<span> </span><span>"and</span><span> </span><span>Embedded"<br/></span><span>        </span><span>color</span>:<span> </span><span>"blue"<br/></span><span>        </span><span>font.pointSize</span>:<span> </span>20<br/><span>    </span>}<br/>}</pre>
<p><span>As you can see in the following screenshot, all of the elements are bunched up on top of each other without positioning:</span></p>
<p style="font-size: 16px" class="CDPAlignCenter CDPAlign"><img style="font-family: Merriweather, serif;font-size: 1em;width:26.42em;height:27.50em;" src="assets/0464a11d-5686-4af5-9f0a-75419a45019b.png"/></p>
<p class="mce-root">This was probably not what the design team had dreamed up. Unless, of course, they did, and then wanted to use a<span> </span><kbd>PropertyAnimation</kbd><span> value </span>to<span> </span>animate the elements moving to their proper layout positions.</p>
<p class="mce-root">What happens when we add a <kbd>Column</kbd> QML element? Examine the following code:</p>
<div class="packt_infobox"><span>The source code can be found on the Git repository under the </span><kbd><span>Chapter02</span>-3a</kbd><span> directory, in the</span> <kbd>cp2</kbd> <span>branch.</span></div>
<pre><br/>Rectangle {<br/> width: 500<br/> height: 500<br/>     Column {<br/>         Rectangle {<br/>             width: 35<br/>             height: 35<br/>             gradient: Gradient {<br/>                 GradientStop { position: 0.0; color: "green"; }<br/>                 GradientStop { position: 0.25; color: "purple"; }<br/>                 GradientStop { position: 0.5; color: "yellow"; }<br/>                 GradientStop { position: 1.0; color: "black"; }<br/>             }<br/>         }<br/> <br/>         Text {<br/>             text: "Hands-On"<br/>             color: "purple"<br/>             font.pointSize: 20<br/>         }<br/><br/>         Text {<br/>             text: "Mobile"<br/>             color: "red"<br/>             font.pointSize: 20<br/>         }<br/><br/>         Text {<br/>             text: "and Embedded"<br/>             color: "blue"<br/>             font.pointSize: 20<br/>         }<br/>    }<br/>}</pre>
<p>When you build this example, the layout looks like this:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/299cad9c-5b13-4d19-bfc4-651581471b0c.png" style="width:20.92em;height:10.00em;"/> </p>
<p class="CDPAlignLeft CDPAlign">That's more like what the designer's mock-ups look like! (I know; cheap designers.)</p>
<p><kbd>Flow</kbd> is another layout item we can use.</p>
<div class="packt_infobox"><span>The source code can be found on the Git repository under the </span><kbd><span>Chapter02</span>-3b</kbd><strong> </strong><span>directory, in the</span> <kbd>cp2</kbd> <span>branch.</span></div>
<pre>    Flow {<br/>        anchors.fill: parent<br/>        anchors.margins: 4<br/>        spacing: 10</pre>
<p>Now, from our preceding code, change <kbd>Column</kbd> to <kbd>Flow</kbd>, add some anchor items, and build, then run on a simulator to get a feel for how the <kbd>Flow</kbd> item works on a small screen:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/897f3421-5af1-49b5-8b05-eab237eb16a7.png" style="width:17.33em;height:32.92em;"/></p>
<p><span>T</span>he <kbd>Flow</kbd> <span>type will wrap its contents around if needed, and, indeed, it has wrapped here on the last <kbd>Text</kbd> element. If this were to be re-oriented to the landscape orientation or on a tablet, there would be no need to wrap, and all of these elements would be on one row at the top.</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Dynamic layout</h1>
                </header>
            
            <article>
                
<p>Instead of using a <kbd>Grid</kbd> element to lay out items, there is also <kbd>GridLayout</kbd>, which can be used to customize the layout. In terms of targeting mobile and embedded devices that come with different screen sizes and device orientations, it is probably better to use <kbd>GridLayout</kbd>, <kbd>RowLayout</kbd>, and <kbd>ColumnLayout</kbd>. Using these, you will gain the ability to use its attached properties. Here is a list of attached properties you can use:</p>
<table style="border-collapse: collapse;width: 588px;height: 1172px" border="1">
<tbody>
<tr>
<td style="height: 30px;width: 245px">
<p><kbd>Layout.alignment</kbd><span> </span></p>
</td>
<td style="width: 336px"><span>A </span><kbd>Qt.Alignment</kbd><span> value specifying alignment of item within the cell</span></td>
</tr>
<tr>
<td style="width: 245px">
<p><span><kbd>Layout.bottomMargin</kbd> </span></p>
</td>
<td style="width: 336px"><span>Bottom margin of space</span></td>
</tr>
<tr>
<td style="width: 245px">
<p><span><kbd>Layout.column</kbd> </span></p>
</td>
<td style="width: 336px"><span>Specifies column position</span></td>
</tr>
<tr>
<td style="width: 245px">
<p><span><kbd>Layout.columnSpan</kbd> </span></p>
</td>
<td style="width: 336px"><span>How many columns to spreads out to</span></td>
</tr>
<tr>
<td style="width: 245px">
<p><span><kbd>Layout.fillHeight</kbd> </span></p>
</td>
<td style="width: 336px"><span>If <kbd>true</kbd>, item fills to the height</span></td>
</tr>
<tr>
<td style="width: 245px">
<p><kbd><span>Layout.fillWidth</span></kbd></p>
</td>
<td style="width: 336px"><span>If <kbd>true</kbd>, item fills to the width</span></td>
</tr>
<tr>
<td style="width: 245px">
<p><kbd><span>Layout.leftMargin</span></kbd></p>
</td>
<td style="width: 336px"><span>Left margin of space</span></td>
</tr>
<tr>
<td style="width: 245px">
<p><kbd><span>Layout.margins </span></kbd></p>
</td>
<td style="width: 336px">All margins of space</td>
</tr>
<tr>
<td style="width: 245px">
<p><kbd><span>Layout.maximumHeight </span></kbd></p>
</td>
<td style="width: 336px"><span>Maximum height of item</span></td>
</tr>
<tr>
<td style="width: 245px">
<p><kbd>Layout.maximumWidth </kbd></p>
</td>
<td style="width: 336px">Maximum width of item</td>
</tr>
<tr>
<td style="width: 245px">
<p><kbd><span>Layout.minimumHeight</span></kbd></p>
</td>
<td style="width: 336px">Minimum height of item</td>
</tr>
<tr>
<td style="width: 245px">
<p><kbd><span>Layout.minimumWidth</span></kbd></p>
</td>
<td style="width: 336px"><span>Minimum width of item</span></td>
</tr>
<tr>
<td style="width: 245px">
<p><kbd><span>Layout.preferredHeight</span></kbd></p>
</td>
<td style="width: 336px"><span>Preferred height of item</span></td>
</tr>
<tr>
<td style="width: 245px">
<p><kbd><span>Layout.preferredWidth</span></kbd></p>
</td>
<td style="width: 336px"><span>Preferred width of item</span></td>
</tr>
<tr>
<td style="width: 245px">
<p><span><kbd>Layout.rightMargin</kbd> </span></p>
</td>
<td style="width: 336px"><span>Right margin of space</span></td>
</tr>
<tr>
<td style="width: 245px">
<p><kbd><span>Layout.row</span></kbd></p>
</td>
<td style="width: 336px"><span>Specifies row position</span></td>
</tr>
<tr>
<td style="width: 245px">
<p><span><kbd>Layout.rowSpan</kbd> </span></p>
</td>
<td style="width: 336px"><span>How many rows to spread out to</span></td>
</tr>
<tr>
<td style="width: 245px">
<p><span><kbd>Layout.topMargin</kbd> </span></p>
</td>
<td style="width: 336px"><span>Top margin of space</span></td>
</tr>
</tbody>
</table>
<p> </p>
<p>In this code, we use <kbd>GridLayout</kbd> to position the three <kbd>Text</kbd> items. The first <kbd>Text</kbd> item will span, or fill, two rows so that the second <kbd>Text</kbd> will be in the second row:</p>
<div class="packt_infobox"><span>The source code can be found on the Git repository under the </span><kbd><span>Chapter02</span>-3c</kbd><span> directory, in the</span> <kbd>cp2</kbd> <span>branch.</span></div>
<pre><span>    </span>GridLayout<span> </span>{<br/><span>        </span><span>rows</span>:<span> </span>3<br/><span>        </span><span>columns</span>:<span> </span>2<br/>        <span>Text</span><span> </span><span>{<br/></span><span>            </span><span>text</span>:<span> </span><span>"Hands-On"<br/></span><span>            </span><span>color</span>:<span> </span><span>"purple"<br/></span><span>            </span><span>font.pointSize</span>:<span> </span>20<br/><span>        </span>}<br/>        <span>Text</span><span> </span><span>{<br/></span><span>            </span><span>text</span>:<span> </span><span>"Mobile"<br/></span><span>            </span><span>color</span>:<span> </span><span>"red"<br/></span><span>            </span><span>font.pointSize</span>:<span> </span>20<br/><span>        </span>}<br/>         <span>Text</span><span> </span><span>{<br/></span><span>            </span><span>text</span>:<span> </span><span>"and</span><span> </span><span>Embedded"<br/></span><span>            </span><span>color</span>:<span> </span><span>"blue"<br/></span><span>            </span><span>font.pointSize</span>:<span> </span>20<br/><span>            </span><span>Layout.fillHeight</span>:<span> </span>true<br/><span>         </span>}<br/><span>    </span>}</pre>
<p><span>Positioning is a way to get dynamically changing applications and allow them to work on various devices without having to change the code.</span> <kbd>GridLayout</kbd> <span>works much like a </span><span>layout, but with expanded capabilities.</span></p>
<p>Let's take a look at how we can dynamically position these components using <kbd>Anchors</kbd>.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Anchors</h1>
                </header>
            
            <article>
                
<p><kbd>Anchors</kbd><span> </span><span>are related to positioning, and are a way to position elements relative to each other. They are a way to dynamically position UI elements and layouts.</span></p>
<p><span>They use the following points of contact:</span></p>
<ul>
<li><kbd>left</kbd></li>
<li><kbd>right</kbd></li>
<li><kbd>top</kbd></li>
<li><kbd>bottom</kbd></li>
<li><kbd>horizontalCenter</kbd></li>
<li><kbd>verticalCenter</kbd></li>
</ul>
<p><span>Take, for example, two images; y</span>ou can put them together like a puzzle by specifying anchor positions:</p>
<pre>Image{ id: image1; source: "image1.png"; }<br/>Image{ id: image2; source: "image2.png; anchors.left: image1.right; }</pre>
<p>This will position the left side of <kbd>image2</kbd> at the right side of <kbd>image1</kbd>. If you were to add <kbd>anchors.top: parent.top</kbd> to <kbd>image1</kbd>, both of these items would then be positioned relative to the top of the parent position. If the parent was a top-level item, they would be placed at the top of the screen.</p>
<p>Anchors are a way to achieve columns, rows, and grids of components that are relative to some other component. You can anchor items diagonally and anchor them apart from each other, among other things.</p>
<p><span>For example, the <kbd>anchor</kbd> property of <kbd>Rectangle</kbd>, called</span><span> </span><kbd>fill</kbd><span>, is a special term meaning top, bottom, left, and right, and is bound to its parent. This means that it will fill itself to the size of its parent.</span></p>
<p><span>Using </span><kbd>anchors.top</kbd><span> </span><span>indicates an anchor point for the top of the element, meaning that it will be bound to the parent component's top position. For example, </span><span>a <kbd>Text</kbd> component will sit above of the <kbd>Rectangle</kbd> component.</span></p>
<p>To get a component such as<span> </span><kbd>Text</kbd> to be centered horizontally, we use the<span> </span><kbd>anchor.horizontal</kbd><span> </span>property and bind it with the<span> </span><kbd>parent.horizontalCenter</kbd> positional property.</p>
<p>Here, w<span>e anchor the</span><span> </span><kbd>Text</kbd><span> </span><span>label to the top center of the</span><span> </span><kbd>Rectangle</kbd><span> label, itself anchored to</span><span> </span><kbd>fill</kbd><span> </span><span>its parent, which is the</span><span> </span><kbd>Window</kbd>:</p>
<pre><span>import</span><span> </span>QtQuick<span> </span>2.12<br/><span>import</span><span> </span>QtQuick.Window<span> </span>2.12<br/><br/><span>Window</span><span> </span>{<br/><span>   </span><span>visible</span>:<span> </span>true<br/><span>   </span><span>width</span>:<span> </span>500<br/><span>   </span><span>height</span>:<span> </span>500<br/><span> <br/></span><span>   Rectangle</span><span> </span>{<br/><span>     </span><span>anchors.fill</span>:<span> </span><span>parent</span><br/><span>     <br/></span><span>       Text</span><span> </span>{<br/><span>           </span><span>id</span>:<span> </span><span>textLabel<br/></span><span>           </span><span>text</span>:<span> </span><span>"Hands-On</span><span> </span><span>Mobile</span><span> </span><span>and</span><span> </span><span>Embedded"<br/></span><span>           </span><span>color</span>:<span> </span><span>"purple"<br/></span><span>           </span><span>font.pointSize</span>:<span> </span>20<br/><span>           </span><span>anchors.top</span>:<span> </span><span>parent</span>.top<br/><span>           </span><span>anchors.horizontalCenter</span>:<span> </span><span>parent</span>.horizontalCenter<br/><span>       </span>}<br/><span>   </span>}<br/>}</pre>
<div class="packt_infobox"><span>The source code can be found on the Git repository under the</span><span> </span><kbd>Chapter02</kbd><span> </span><span>directory, in the <kbd>cp2</kbd> branch.</span></div>
<p>The<span> </span><kbd>Window</kbd> component was provided by the Qt Quick app wizard and is not visible by default, so the wizard set the<span> </span><kbd>visible</kbd><span> </span>property to<span> </span><kbd>true</kbd><span> </span>as we need see it. We will use<span> </span><kbd>Window</kbd><span> </span>as the parent for the <kbd>Rectangle</kbd> component. Our<span> </span><kbd>Rectangle</kbd> component will provide an area for our<span> </span><kbd>Text</kbd><span> </span>component, which is a simple label type.</p>
<p>Each component has its own properties to fiddle with. By fiddling, I mean binding. For instance, the <kbd>color: "purple"</kbd> line is binding the color referenced as<span> </span><kbd>"purple"</kbd><span> </span>to the<span> </span><kbd>color</kbd><span> </span>property of the<span> </span><kbd>Text</kbd><span> </span>element. These bindings do not have to be static; they can be dynamically changed, and the property's value that they are bound to changes as well. This value binding will persist until the property is written with another value.</p>
<p>The background of this application is boring. How about we add a gradient there? Under the closing bracket for the <kbd>Text</kbd><span> </span>component<span>, but still within the</span><span> </span><kbd>Rectangle</kbd><span>,</span><span> </span>add this gradient.<span> </span><kbd>GradientStop</kbd><span> </span>is a way to specify a color at a certain point in the gradient. The<span> </span><kbd>position</kbd><span> </span>property is a percent fraction point from zero to one, corresponding to where the color should start. The gradient will fill in the gap in between:</p>
<pre>gradient: Gradient {<br/>    GradientStop { position: 0.0; color: "green"; }<br/>    GradientStop { position: 0.25; color: "purple"; }<br/>    GradientStop { position: 0.75; color: "yellow"; }<br/>    GradientStop { position: 1.0; color: "black"; }<br/>}</pre>
<div class="packt_infobox"><span>The source code can be found on the Git repository under the </span><kbd>Chapter02-1</kbd><span> directory, in the</span><span> </span><kbd><span>cp2</span></kbd><span> </span><span>branch.</span></div>
<p>As you can see, the gradient starts with the green color at the top, smoothly blends to purple, then yellow, and finishes at black:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/4eb99784-f4a0-4648-b9b0-eb9410b832c1.png" style="width:21.42em;height:22.42em;"/></p>
<p>Easy peasy, lemon squeezy!</p>
<p>Layouts and anchors are important to be able to control the UIs. They provide an easy way to deal with differences in display size and orientation changes on hundreds of different devices with different screen sizes. You could have a QML file work on all displays, although it is recommended to use different layouts for extremely different devices. An application could work fine on a tablet, or even a phone, but try to place it on a watch or other embedded device, and you will run into trouble accessing many details that your users can use.</p>
<p>Qt Quick has many building blocks to create useful applications on any device. What happens when you don't want to create all the UI elements yourself? That is where Qt Quick Controls come into play.</p>
<p class="mce-root"/>
<p class="mce-root"/>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Qt Quick Controls 2 button, button, who's got the button?</h1>
                </header>
            
            <article>
                
<p class="mce-root">For a while in the life of Qt Quick, there were only basic components, such as <kbd>Rectangle</kbd> and <kbd>Text</kbd>. Developers had to create their own implementations of buttons, dials, and just about every common UI item. As it matured, it also grew elements such as <kbd>Window</kbd> and even <kbd>Sensor</kbd> elements. There were always rumblings about having a set of common UI elements available. Eventually, common UI elements were released.</p>
<p>Spotlight on Qt Quick Controls. No more having to create your own buttons and other components, yay! And developers rejoiced!</p>
<p>Then, they found a better way to do things and released Qt Quick Controls 2!</p>
<div class="packt_infobox">Qt Quick Controls comes in two versions, Qt Quick Controls and Qt Quick Controls 2. Qt Quick Controls (the original one) has been depreciated by Qt Quick Controls 2. Any new use of these components should use Qt Quick Controls 2. </div>
<p>You can access all kinds of common UI elements, including the following: </p>
<ul>
<li><kbd>Buttons</kbd></li>
<li><kbd>Containers</kbd></li>
<li><kbd>Input</kbd></li>
<li><kbd>Menu</kbd></li>
<li><kbd>Radio buttons</kbd></li>
<li><kbd>Progress bar</kbd></li>
<li><kbd>Popups</kbd></li>
</ul>
<p class="mce-root"/>
<p class="mce-root"/>
<p>Let's examine a simple Qt Quick Controls 2 example.</p>
<p>An <kbd>ApplicationWindow</kbd> has attached <kbd>menuBar</kbd>, <kbd>header</kbd>, and <kbd>footer</kbd> properties that you can use to add whatever you need to them. Since an <kbd>ApplicationWindow</kbd> is not visible by default, we almost always need to add <kbd>visible: true</kbd>.</p>
<p>Here, we will add a traditional menu with <kbd>TextField</kbd> in the header.</p>
<p>The menu has an <kbd>onTriggered</kbd> signal, which is used here to run the <kbd>open()</kbd> function of <kbd>MessageDialog</kbd>:</p>
<div class="packt_infobox"><span>The source code can be found on the Git repository under the </span><kbd><span>Chapter02</span>-4</kbd><span> directory, in the</span> <kbd>cp2</kbd> <span>branch.</span></div>
<pre><span>import</span><span> </span>QtQuick<span> </span>2.12<br/><span>import QtQuick.Controls 2.3<br/></span><span>import QtQuick.Dialogs 1.1<br/></span><span><br/></span>ApplicationWindow<span> </span><span>{<br/></span><span>   </span><span>visible</span>:<span> </span>true<br/><span>   </span><span>title</span>:<span> </span><span>"Mobile</span><span> </span><span>and</span><span> </span><span>Embedded"<br/></span><span>   </span><span>menuBar</span>:<span> </span>MenuBar<span> </span>{<br/><span>      </span>Menu<span> </span>{<span> </span><span>title</span>:<span> </span><span>"File"<br/></span><span>          </span>MenuItem<span> </span>{<span> </span><span>text</span>:<span> </span><span>"Open</span><span> </span><span>"<br/></span><span>              </span><span>onTriggered</span>:<span> </span><span>helloDialog</span>.open()<br/><span>          </span>}<br/><span>      </span>}<br/><span>   </span>}<br/><span>   </span><span>header</span>:<span> </span>TextField<span> </span>{<br/><span>       </span><span>placeholderText</span>:<span> </span><span>"Remember</span><span> </span><span>the</span><span> </span><span>Qt</span><span> </span><span>4</span><span> </span><span>Dance</span><span> </span><span>video?"<br/></span><span>   </span>}<br/><span>   </span>MessageDialog<span> </span>{<br/><span>       </span><span>id</span>:<span> </span><span>helloDialog<br/></span><span>       </span><span>title</span>:<span> </span><span>"Hello</span><span> </span><span>Mobile!"<br/></span><span>       </span><span>text</span>:<span> </span><span>"Qt</span><span> </span><span>for</span><span> </span><span>Embedded</span><span> </span><span>devices</span><span> </span><span>to</span><span> </span><span>rule</span><span> </span><span>the</span><span> </span><span>world!"<br/></span><span>   </span>}<br/>}</pre>
<p>Here's what our code would result in:</p>
<p class="mce-root"/>
<p class="CDPAlignCenter CDPAlign"><img src="assets/550a8d92-202c-4a7d-a8f6-93b153a008c9.png" style="width:24.08em;height:43.25em;"/></p>
<p>Oooooh – fancy!</p>
<p class="mce-root"/>
<p>Qt Quick Controls 2 has different styles to choose from – <kbd>Default</kbd>, <kbd>Fusion</kbd>, <kbd>Imagine</kbd>, <kbd>Material</kbd>, and <kbd>Universal</kbd>. This can be set in the C++ backend as <kbd>QQuickStyle::setStyle("Fusion");</kbd>. <span>I presume you do have a C++ backend, right?</span></p>
<p>Views that can come in handy on mobile and embedded devices are as follows:</p>
<ul>
<li><kbd>ScrollView</kbd></li>
<li><kbd>StackView</kbd></li>
<li><kbd>SwipeView</kbd></li>
</ul>
<p>These can be helpful on small screens, as they provide a way to easily view and access several pages without too much hassle. A <kbd>Drawer</kbd> <span>element is also handy and can provide a way to implement a menu or a toolbar that sticks to the side.</span></p>
<p>Buttons are awesome, and Qt Quick Controls 2 has buttons. It even has the <kbd>RoundButton</kbd> component, as well as icons for the buttons! Before Qt Quick Controls, we had to roll these up ourselves. At the same time, it is nice that we can implement these things to do what we need with little effort. And now with even less effort!</p>
<p>Let's put some of these to the test and expand upon our last example.</p>
<p>I like <kbd>SwipeView</kbd>, so let's use that, with two <kbd>Page</kbd> elements as children of <kbd>SwipeView</kbd>:</p>
<div class="packt_infobox"><span>The source code can be found on the Git repository under the </span><kbd><span>Chapter02</span>-5</kbd><span> directory, in the</span> <kbd>cp2</kbd> <span>branch.</span></div>
<pre><span>    </span><span>SwipeView</span><span> </span>{<br/><span>        </span><span>id</span>:<span> </span><span>swipeView<br/></span><span>        </span><span>anchors.fill</span>:<span> </span><span>parent<br/></span><span>        </span><br/><span>        Page</span><span> </span>{<br/><span>            </span><span>id</span>:<span> </span><span>page1<br/></span><span>            </span><span>anchors.fill</span>:<span> </span><span>parent</span>.fill<br/><span>            </span><span>header</span>:<span> </span><span>Label</span><span> </span>{<br/><span>                </span><span>text</span>:<span> </span><span>"Working"<br/></span><span>                </span><span>font.pixelSize</span>:<span> </span><span>Qt</span>.application.font.pixelSize<span> </span>*<span> </span>2<br/><span>                </span><span>padding</span>:<span> </span>10<br/><span>            </span>}<br/><span>            </span><span>BusyIndicator</span><span> </span>{<br/><span>                </span><span>id</span>:<span> </span><span>busyId<br/></span><span>                </span><span>anchors.centerIn</span>:<span> </span><span>parent<br/></span><span>                </span><span>running</span>:<span> </span>true;<br/><span>            </span>}<br/><span>            </span><span>Label</span><span> </span>{<br/><span>                </span><span>text</span>:<span> </span><span>"Busy</span><span> </span><span>Working"<br/></span><span>                </span><span>anchors.top</span>:<span> </span><span>busyId</span>.bottom<br/><span>                </span><span>anchors.horizontalCenter</span>:<span> </span><span>parent</span>.horizontalCenter<br/><span>            </span>}<br/><span>        </span>}<br/><span><br/>        </span><span>Page</span><span> </span>{<br/><span>            </span><span>id</span>:<span> </span><span>page2<br/></span><span>            </span><span>anchors.fill</span>:<span> </span><span>parent</span>.fill<br/><span>            </span><span>header</span>:<span> </span><span>Label</span><span> </span>{<br/><span>                </span><span>text</span>:<span> </span><span>"Go</span><span> </span><span>Back"<br/></span><span>                </span><span>font.pixelSize</span>:<span> </span><span>Qt</span>.application.font.pixelSize<span> </span>*<span> </span>2<br/><span>                </span><span>padding</span>:<span> </span>10<br/><span>            </span>}<br/>            <span>Label</span><span> </span><span>{<br/></span><span>                </span><span>text</span>:<span> </span><span>"Nothing</span><span> </span><span>here</span><span> </span><span>to</span><span> </span><span>see.</span><span> </span><span>Move</span><span> </span><span>along,</span><span> </span><span>move</span><span> </span><span>along."<br/></span><span>                </span><span>anchors.centerIn</span>:<span> </span><span>parent<br/></span><span>            </span>}<br/><span>        </span>}<br/><span> </span>}<br/><br/><span> </span><span>PageIndicator</span><span> </span>{<br/><span>     </span><span>id</span>:<span> </span><span>indicator<br/></span>     <span>count</span><span>:</span><span> </span><span>swipeView</span><span>.count<br/></span><span>     </span><span>currentIndex</span>:<span> </span><span>swipeView</span>.currentIndex<br/>     <span>anchors.bottom</span><span>:</span><span> </span><span>swipeView</span><span>.bottom<br/></span><span>     </span><span>anchors.horizontalCenter</span>:<span> </span><span>parent</span>.horizontalCenter<br/><span> </span>}</pre>
<p><span>I think that a </span><kbd>PageIndicator</kbd><span> at the bottom to indicate which page we are on gives the user some visual feedback for navigation. We tie in </span><kbd>PageIndicator</kbd><span> by binding the </span><kbd>count</kbd><span> of <kbd>SwipeView</kbd> and </span><kbd>currentIndex</kbd><span> properties to its properties of the same name. How convenient!</span></p>
<p>Instead of <kbd>PageIndicator</kbd>, we could just as easily use <kbd>TabBar</kbd>.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Customizing</h1>
                </header>
            
            <article>
                
<p>You can customize the look and feel of just about every Qt Quick Control 2 component. You can override different properties of the controls, such as <kbd>background</kbd>. In the previous example code, we customized the <kbd>Page</kbd> header. Here, we override the background to a button, add our own <kbd>Rectangle</kbd>, color it, give it a border with a contrasting color, and make it rounded at the ends by using the <kbd>radius</kbd> property. Here's how it would work:</p>
<div class="packt_infobox"><span>The source code can be found on the Git repository under the </span><kbd><span>Chapter02</span>-5</kbd><span> directory, in the</span> <kbd>cp2</kbd> <span>branch.</span></div>
<pre><span>                </span><span>Button</span><span> </span>{<br/><span>                    </span><span>text</span>:<span> </span><span>"Click</span><span> </span><span>to</span><span> </span><span>go</span><span> </span><span>back"<br/></span><span>                    </span><span>background</span>:<span> </span><span>Rectangle</span><span> </span>{<br/><span>                        </span><span>color</span>:<span> </span><span>"#673AB7"<br/></span><span>                        </span><span>radius</span>:<span> </span>50<br/><span>                        </span><span>border.color</span>:<span> </span><span>"#4CAF50"<br/></span><span>                        </span><span>border.width</span>:<span> </span>2<br/><span>                    </span>}<br/><span>                    </span><span>onClicked</span>:<span> </span><span>swipeView</span>.currentIndex<span> </span>=<span> </span>0<br/><span>                </span>}</pre>
<p class="CDPAlignCenter CDPAlign"><img src="assets/bc0f81cf-6c19-4d18-acee-a3c87f2f2b67.png" style="width:12.17em;height:3.33em;"/></p>
<p>Customizing is easy with Qt Quick. It was built with customizing in mind. The ways are endless. Nearly all the Qt Quick Controls 2 elements have visual elements that can be customized including most of the background and content items, although not all.</p>
<p class="mce-root">These controls seem to be best on a desktop, but they can be customized to work well on mobile and embedded devices. The <kbd>ScrollBar</kbd> property of <kbd><span>ScrollView</span></kbd> can be made larger in width on touchscreens.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Show your data – Qt Data Visualization and Qt Charts</h1>
                </header>
            
            <article>
                
<p>Qt Quick has a convenient way to show data of all kinds. The two modules, Qt Data Visualization and Qt Charts, can both supply integral UI elements. They are similar, except Qt Data Visualization displays data in 3D. </p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Qt Charts</h1>
                </header>
            
            <article>
                
<p>Qt Charts shows 2D graphs and uses the Graphics View framework.</p>
<p>It adds the following chart types:</p>
<ul>
<li>Area </li>
<li>Bar </li>
<li>Box-and-whiskers </li>
<li>Candlestick</li>
<li>Line: a simple line chart</li>
<li>Pie: pie slices</li>
<li>Polar: a circular line</li>
<li>Scatter: a collection of points</li>
<li>Spline: a line chart with curved points</li>
</ul>
<p>The following example from Qt shows a few different charts that are available:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/386351c0-be88-4103-830c-265c626aafb0.png"/></p>
<p>Each graph or chart has at least one axis and can have the following types:</p>
<ul>
<li>Bar axis</li>
<li>Category</li>
<li>Date-time</li>
<li>Logarithmic value</li>
<li>Value</li>
</ul>
<div class="packt_infobox">Qt Charts requires a <kbd>QApplication</kbd> instance. If you use the Qt Creator wizard to create your app, it uses a <kbd>QGuiApplication</kbd> instance by default. You will need to replace the <kbd>QGuiApplication</kbd> instance in <kbd>main.cpp</kbd> to <kbd>QApplication</kbd>, and also change the <kbd>includes</kbd> file.</div>
<p>You can use grid lines, shades, and tick marks on the axis, which can also be shown in these charts.</p>
<p>Let's look at how to create a simple BarChart.</p>
<div class="packt_infobox"><span>The source code can be found on the Git repository under the </span><kbd><span>Chapter02</span>-6</kbd><span> directory, in the</span> <kbd>cp2</kbd> <span>branch.</span></div>
<pre class="qml prettyprint prettyprinted"><span class="type"><span class="typ">import QtCharts 2.0<br/></span></span><span class="type"><span class="typ">ChartView</span></span><span class="pln"> </span><span class="pun">{</span><span class="pln">     <br/>    </span><span class="name"><span class="pln">title</span></span><span class="pun">:</span><span class="pln"> </span><span class="string"><span class="str">"Australian Rain"</span></span><span class="pln">     <br/>    </span><span class="name"><span class="pln">anchors</span></span><span class="pun">.</span><span class="pln">fill</span><span class="pun">:</span><span class="pln"> </span><span class="name"><span class="pln">parent</span></span><span class="pln">     <br/>    </span><span class="name"><span class="pln">legend</span></span><span class="pun">.</span><span class="pln">alignment</span><span class="pun">:</span><span class="pln"> </span><span class="name"><span class="typ">Qt</span></span><span class="pun">.</span><span class="name"><span class="typ">AlignBottom</span></span><span class="pln">     <br/>    </span><span class="name"><span class="pln">antialiasing</span></span><span class="pun">:</span><span class="pln"> </span><span class="number"><span class="kwd">true</span></span><span class="pln">     <br/><br/>    </span><span class="type"><span class="typ">BarSeries</span></span><span class="pln"> </span><span class="pun">{</span><span class="pln">         <br/>        </span><span class="name"><span class="pln">id</span></span><span class="pun">:</span><span class="pln"> </span><span class="name"><span class="pln">mySeries</span></span><span class="pln">         <br/>        </span><span class="name"><span class="pln">axisX</span></span><span class="pun">:</span><span class="pln"> </span><span class="name"><span class="typ">BarCategoryAxis</span></span><span class="pln"> </span><span class="pun">{</span><span class="pln"> <br/>            </span><span class="name"><span class="pln">categories</span></span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="string"><span class="str">"2015"</span></span><span class="pun">,</span><span class="pln"> </span><span class="string"><span class="str">"2016"</span></span><span class="pun">,</span><span class="pln"> </span><span class="string"><span class="str">"2017"</span></span><span class="pln"> </span><span class="pun">]</span><span class="pln"> <br/>        </span><span class="pun">}</span><span class="pln">         <br/>        </span><span class="type"><span class="typ">BarSet</span></span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="name"><span class="pln">label</span></span><span class="pun">:</span><span class="pln"> </span><span class="string"><span class="str">"Adelaide"</span></span><span class="pun">;</span><span class="pln"> </span><span class="name"><span class="pln">values</span></span><span class="pun">:</span><span class="pln"> </span><span class="pun">[536, 821, 395</span><span class="pun">]</span><span class="pln"> </span><span class="pun">}</span><span class="pln">         <br/>        </span><span class="type"><span class="typ">BarSet</span></span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="name"><span class="pln">label</span></span><span class="pun">:</span><span class="pln"> </span><span class="string"><span class="str">"Brisbane"</span></span><span class="pun">;</span><span class="pln"> </span><span class="name"><span class="pln">values</span></span><span class="pun">:</span><span class="pln"> </span><span class="pun">[1076, 759, 1263</span><span class="pun">]</span><span class="pln"> </span><span class="pun">}</span><span class="pln">         <br/>        </span><span class="type"><span class="typ">BarSet</span></span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="name"><span class="pln">label</span></span><span class="pun">:</span><span class="pln"> </span><span class="string"><span class="str">"Darwin"</span></span><span class="pun">;</span><span class="pln"> </span><span class="name"><span class="pln">values</span></span><span class="pun">:</span><span class="pln"> </span><span class="pun">[2201, 1363, 1744</span><span class="pun">]</span><span class="pln"> </span><span class="pun">}<br/></span><span class="type"><span class="typ">        BarSet</span></span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="name"><span class="pln">label</span></span><span class="pun">:</span><span class="pln"> </span><span class="string"><span class="str">"Melbourne"</span></span><span class="pun">;</span><span class="pln"> </span><span class="name"><span class="pln">values</span></span><span class="pun">:</span><span class="pln"> </span><span class="pun">[526, 601, 401</span><span class="pun">]</span><span class="pln"> </span><span class="pun">}<br/></span><span class="type"><span class="typ">        BarSet</span></span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="name"><span class="pln">label</span></span><span class="pun">:</span><span class="pln"> </span><span class="string"><span class="str">"Perth"</span></span><span class="pun">;</span><span class="pln"> </span><span class="name"><span class="pln">values</span></span><span class="pun">:</span><span class="pln"> </span><span class="pun">[729, 674, 578</span><span class="pun">]</span><span class="pln"> </span><span class="pun">}<br/></span><span class="type"><span class="typ">        BarSet</span></span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="name"><span class="pln">label</span></span><span class="pun">:</span><span class="pln"> </span><span class="string"><span class="str">"Sydney"</span></span><span class="pun">;</span><span class="pln"> </span><span class="name"><span class="pln">values</span></span><span class="pun">:</span><span class="pln"> </span><span class="pun">[1076, 1386, 1338</span><span class="pun">]</span><span class="pln"> </span><span class="pun">}<br/></span><span class="pln">   </span><span class="pun">}</span><span class="pln"> <br/></span><span class="pun">}</span></pre>
<p>See how nice the charts look? Have a look:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/8376dc5b-21cf-4c0d-a654-25cde7f49cda.png"/></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Qt Data Visualization</h1>
                </header>
            
            <article>
                
<p>Qt Data Visualization is similar to Qt Charts but presents data in 3D form. It can be downloaded through Qt Creator's Maintenance Tool app. It is available for use with Qt Widget and Qt Quick. We will be working with the Qt Quick version. It uses OpenGL to present 3D graphs of data.</p>
<p>Since we are targeting mobile phones and embedded devices, we talk about using OpenGL ES2. There are some features of <span>Qt Data Visualization that do not work with OpenGl ES2, which is what you will find on mobile phones:</span></p>
<ul>
<li>Antialiasing</li>
<li>Flat shading</li>
<li>Shadows</li>
<li>Volumetric objects that use 3D textures</li>
</ul>
<p>Let's try using a <kbd>Bars3D</kbd> with data from the total amount of rain in certain Australian cities used in the previous example.</p>
<p>I set the theme to <kbd>Theme3D.ThemeQt</kbd>, which is a green-based theme. Add a few customizations such as font size to be able to see the content better on small mobile displays.</p>
<p> <kbd>Bar3DSeries</kbd> <span>will manage the visual elements such as labels for rows, columns, and the data, which here is the total rain amount for that year. </span><kbd>ItemModelBarDataProxy</kbd> <span>is the proxy for displaying the data. The model data here is a</span> <kbd>ListModel</kbd> <span>containing</span> <kbd>ListElements</kbd> <span>of cities rainfall data for the previous three years. We will use the same data from the previous Qt Charts example so you can compare the differences in the way the bar charts display their data:</span></p>
<div class="packt_infobox"><span>The source code can be found on the Git repository under the </span><kbd><span>Chapter02</span>-7</kbd><span> directory, in the</span> <kbd>cp2</kbd> <span>branch.</span></div>
<pre><span>import</span><span> </span>QtQuick<span> </span>2.12<br/><span>import</span><span> </span>QtQuick.Window<span> </span>2.12<br/><span>import</span><span> </span>QtDataVisualization<span> </span>1.2<br/>Window<span> </span><span>{<br/></span><span>    </span><span>visible</span>:<span> </span>true<br/><span>    </span><span>width</span>:<span> </span>640<br/><span>    </span><span>height</span>:<span> </span>480<br/><span>    </span><span>title</span>:<span> </span><span>qsTr</span>(<span>"Australian</span><span> </span><span>Rain"</span>)<br/><span>    </span><span>Bars3D</span><span> </span>{<br/><span>        </span><span>width</span>:<span> </span><span>parent</span>.width<br/><span>        </span><span>height</span>:<span> </span><span>parent</span>.height<br/><span>        </span><span>theme</span>:<span> </span><span>Theme3D</span><span> </span>{<br/><span>            </span><span>type</span>:<span> </span><span>Theme3D</span>.ThemeQt<br/><span>            </span><span>labelBorderEnabled</span>:<span> </span>true<br/><span>            </span><span>font.pointSize</span>:<span> </span>75<br/><span>            </span><span>labelBackgroundEnabled</span>:<span> </span>true<br/><span>        </span>}<br/><span>        </span><span>Bar3DSeries</span><span> </span>{<br/><span>            </span><span>itemLabelFormat</span>:<span> </span><span>"@colLabel,</span><span> </span><span>@rowLabel:</span><span> </span><span>@valueLabel"<br/></span>            <span>ItemModelBarDataProxy</span><span> </span><span>{<br/></span><span>                </span><span>itemModel</span>:<span> </span><span>dataModel<br/></span><span>                </span><span>rowRole</span>:<span> </span><span>"year"<br/></span><span>                </span><span>columnRole</span>:<span> </span><span>"city"<br/></span><span>                </span><span>valueRole</span>:<span> </span><span>"total"<br/></span><span>            </span>}<br/><span>        </span>}<br/><span>    </span>}<br/>    <span>ListModel</span><span> </span><span>{<br/></span><span>        </span><span>id</span>:<span> </span><span>dataModel<br/></span><span>        </span><span>ListElement</span>{<span> </span><span>year</span>:<span> </span><span>"2017"</span>;<span> </span><span>city</span>:<span> </span><span>"Adelaide"</span>;<span> </span><span>total</span>:<span> </span><span>"536"</span>;<span> </span>}<br/><span>        </span><span>ListElement</span>{<span> </span><span>year</span>:<span> </span><span>"2016"</span>;<span> </span><span>city</span>:<span> </span><span>"Adelaide"</span>;<span> </span><span>total</span>:<span> </span><span>"821"</span>;<span> </span>}<br/><span>        </span><span>ListElement</span>{<span> </span><span>year</span>:<span> </span><span>"2015"</span>;<span> </span><span>city</span>:<span> </span><span>"Adelaide"</span>;<span> </span><span>total</span>:<span> </span><span>"395"</span>;<span> </span>}<br/><span>        </span><span>ListElement</span>{<span> </span><span>year</span>:<span> </span><span>"2017"</span>;<span> </span><span>city</span>:<span> </span><span>"Brisbane"</span>;<span> </span><span>total</span>:<span> </span><span>"1076"</span>;<span> </span>}<br/><span>        </span><span>ListElement</span>{<span> </span><span>year</span>:<span> </span><span>"2016"</span>;<span> </span><span>city</span>:<span> </span><span>"Brisbane"</span>;<span> </span><span>total</span>:<span> </span><span>"759"</span>;<span> </span>}<br/><span>        </span><span>ListElement</span>{<span> </span><span>year</span>:<span> </span><span>"2015"</span>;<span> </span><span>city</span>:<span> </span><span>"Brisbane"</span>;<span> </span><span>total</span>:<span> </span><span>"1263"</span>;<span> </span>}<br/><span>        </span><span>ListElement</span>{<span> </span><span>year</span>:<span> </span><span>"2017"</span>;<span> </span><span>city</span>:<span> </span><span>"Darwin"</span>;<span> </span><span>total</span>:<span> </span><span>"2201"</span>;<span> </span>}<br/><span>        </span><span>ListElement</span>{<span> </span><span>year</span>:<span> </span><span>"2016"</span>;<span> </span><span>city</span>:<span> </span><span>"Darwin"</span>;<span> </span><span>total</span>:<span> </span><span>"1363"</span>;<span> </span>}<br/><span>        </span><span>ListElement</span>{<span> </span><span>year</span>:<span> </span><span>"2015"</span>;<span> </span><span>city</span>:<span> </span><span>"Darwin"</span>;<span> </span><span>total</span>:<span> </span><span>"1744"</span>;<span> </span>}<br/><span>        </span><span>ListElement</span>{<span> </span><span>year</span>:<span> </span><span>"2017"</span>;<span> </span><span>city</span>:<span> </span><span>"Melbourne"</span>;<span> </span><span>total</span>:<span> </span><span>"526"</span>;<span> </span>}<br/><span>        </span><span>ListElement</span>{<span> </span><span>year</span>:<span> </span><span>"2016"</span>;<span> </span><span>city</span>:<span> </span><span>"Melbourne"</span>;<span> </span><span>total</span>:<span> </span><span>"601"</span>;<span> </span>}<br/><span>        </span><span>ListElement</span>{<span> </span><span>year</span>:<span> </span><span>"2015"</span>;<span> </span><span>city</span>:<span> </span><span>"Melbourne"</span>;<span> </span><span>total</span>:<span> </span><span>"401"</span>;<span> </span>}<br/><span>        </span><span>ListElement</span>{<span> </span><span>year</span>:<span> </span><span>"2017"</span>;<span> </span><span>city</span>:<span> </span><span>"Perth"</span>;<span> </span><span>total</span>:<span> </span><span>"729"</span>;<span> </span>}<br/><span>        </span><span>ListElement</span>{<span> </span><span>year</span>:<span> </span><span>"2016"</span>;<span> </span><span>city</span>:<span> </span><span>"Perth"</span>;<span> </span><span>total</span>:<span> </span><span>"674"</span>;<span> </span>}<br/><span>        </span><span>ListElement</span>{<span> </span><span>year</span>:<span> </span><span>"2015"</span>;<span> </span><span>city</span>:<span> </span><span>"Perth"</span>;<span> </span><span>total</span>:<span> </span><span>"578"</span>;<span> </span>}<br/><span>        </span><span>ListElement</span>{<span> </span><span>year</span>:<span> </span><span>"2017"</span>;<span> </span><span>city</span>:<span> </span><span>"Sydney"</span>;<span> </span><span>total</span>:<span> </span><span>"1076"</span>;<span> </span>}<br/><span>        </span><span>ListElement</span>{<span> </span><span>year</span>:<span> </span><span>"2016"</span>;<span> </span><span>city</span>:<span> </span><span>"Sydney"</span>;<span> </span><span>total</span>:<span> </span><span>"1386"</span>;<span> </span>}<br/><span>        </span><span>ListElement</span>{<span> </span><span>year</span>:<span> </span><span>"2015"</span>;<span> </span><span>city</span>:<span> </span><span>"Sydney"</span>;<span> </span><span>total</span>:<span> </span><span>"1338</span><span>"</span>;<span> </span>}<br/><span>    </span>}<br/>}<br/><br/></pre>
<p>You can run this on a touchscreen device, and then move the chart around in 3D!:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/70a2d639-c4f5-470f-bdd7-58ebf20a5806.png"/></p>
<p>You can grab the graph and spin it around to see the data from different perspectives. You can zoom in and back out, as well.</p>
<p><span>The </span><kbd>QtDataVisualization</kbd> <span>module also</span> has scatter<span> and </span>surface<span> graphs that show data in 3D.</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Animate it!</h1>
                </header>
            
            <article>
                
<p>This is where it gets gloriously complicated. There are various types of animations:</p>
<ul>
<li><kbd>ParallelAnimation</kbd></li>
<li><kbd>SmoothedAnimation</kbd></li>
<li><kbd>PauseAnimation</kbd></li>
<li><kbd>SequentialAnimation</kbd></li>
</ul>
<p>Additionally,<span> </span><kbd>PropertyAction</kbd><span> </span>and<span> </span><kbd>ScriptAction</kbd><span> </span>can be used. A<span> </span><kbd>PropertyAction</kbd><span> </span>is a change to any property that happens without an animation. We learned about<span> </span><kbd>ScriptAction</kbd><span> </span>in the last section on <em>States</em>.</p>
<p>There are also animation types that operate on various values:</p>
<ul>
<li><kbd>AnchorAnimation</kbd> </li>
<li><kbd>ColorAnimation</kbd></li>
<li><kbd>NumberAnimation</kbd></li>
<li><kbd>OpacityAnimator</kbd></li>
<li><kbd>PathAnimation</kbd></li>
<li><kbd>ParentAnimation</kbd></li>
<li><kbd>PropertyAnimation</kbd></li>
<li><kbd>RotationAnimation</kbd></li>
<li><kbd>SpringAnimation</kbd></li>
<li><kbd>Vector3DAnimation</kbd></li>
</ul>
<p>A<span> </span><kbd>Behavior</kbd><span> </span>can be used to specify an animation for a property change.</p>
<p>Let's look at how some of these can be used.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Transitions</h1>
                </header>
            
            <article>
                
<p>Transitions and states are explicitly tied together. A <kbd>Transition</kbd> animation happens when a <kbd>State</kbd> change occurs.</p>
<p>A <kbd>State</kbd> change can handle different kinds of changes:</p>
<ul>
<li><kbd>AnchorChanges</kbd>: Changes to anchor layouts</li>
<li><kbd>ParentChanges</kbd>: Changes to parenting (as in reparenting)</li>
<li><kbd>PropertyChanges</kbd>: Changes to the target's properties</li>
</ul>
<p>You can even run JavaScript on <kbd>State</kbd> changes using <kbd>StateChangeScript</kbd> and <kbd>ScriptAction</kbd>.</p>
<p>To define different <kbd>states</kbd>, an element has a <kbd>states</kbd> array of<span> </span><kbd>State</kbd><span> </span>elements that can be defined. We will add a<span> </span><kbd>PropertyChanges</kbd>:</p>
<pre>states : [<br/>    State {<br/>        name: "phase1"<br/>        PropertyChanges { target: someTarget; someproperty: "some value";}<br/>    },<br/>    State {<br/>        name: "phase2"<br/>        PropertyChanges { target: someTarget; someproperty: "some other value";}<br/>    }<br/>]</pre>
<p>Target properties can be just about anything—<kbd>opacity</kbd>, <kbd>position</kbd>, <kbd>color</kbd>, <kbd>width</kbd>, or <kbd>height</kbd>. If an element has a changeable property, the chances are that you can animate it in a <kbd>State</kbd> change.</p>
<p>As I mentioned before, to run a script in a <kbd>State</kbd> change, you can define a<span> </span><kbd>StateChangeScript</kbd><span> </span>in the <kbd>State</kbd> element that you want it to run in. Here, we simply output some logging text:</p>
<pre>function phase3Script() {<br/>    console.log("demonstrate a state running a script");<br/>}<br/><br/>State {<br/>    name: "phase3"<br/>    StateChangeScript {<br/>        name: "phase3Action"<br/>        script: phase3Script()<br/>    }<br/>}</pre>
<p>Just imagine the possibilities! We haven't even presented<span> a</span>nimations! We will go there next.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Animation</h1>
                </header>
            
            <article>
                
<p>Animation can spice up your apps in wonderful ways. Qt Quick makes it almost trivial to animate different aspects of your application. At the same time, it allows you to customize them into unique and more complicated animations.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">PropertyAnimation</h1>
                </header>
            
            <article>
                
<p><kbd>PropertyAnimation</kbd> animates an item's changeable property. Typically, this is x or y color, or it can be some other property of any item:</p>
<pre>Behavior on activeFocus { PropertyAnimation { target: myItem; property: color; to: "green"; } }</pre>
<p>The<span> </span><kbd>Behavior</kbd><span> </span>specifier implies that when the<span> </span><kbd>activeFocus</kbd><span> </span>is on<span> </span><kbd>myItem</kbd>, the <kbd>color</kbd> will change to <kbd>green</kbd>.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">NumberAnimation</h1>
                </header>
            
            <article>
                
<p><kbd>NumberAnimation</kbd> derives from <kbd>PropertyAnimation</kbd>, but only works on properties that have a<span> </span><kbd>qreal</kbd><span> </span>changeable value: </p>
<pre>NumberAnimation { target: myOtherItem; property: "y"; to: 65; duration: 250 }</pre>
<p>This will move the <kbd>myOtherItem</kbd> element's <kbd>y</kbd> position to 65 over a 250-microsecond period of time.</p>
<p>Some of these animation elements control how other animations are played, including <kbd>SequentialAnimation</kbd> and <kbd>ParallelAnimation</kbd>.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">SequentialAnimation</h1>
                </header>
            
            <article>
                
<p><kbd>SequentialAnimation</kbd> is an animation that runs other animation types consecutively, one after the other, like a numbered procedure:</p>
<pre>SequentialAnimation {<br/>    NumberAnimation { target: myOtherItem; property: "x"; to: 35; duration: 1500 }<br/>    NumberAnimation { target: myOtherItem; property: "y"; to: 65; duration: 1500 }<br/>}</pre>
<p class="mce-root"/>
<p>In this instance, the animation that would play first is <kbd>ColorAnimation</kbd>, and, once that is finished, it would play <kbd>NumberAnimation</kbd>. Move the <kbd>myOtherItem</kbd> element's <kbd>x</kbd> <span>property to position</span> <kbd>35</kbd><span>, and then move its</span> <kbd>y</kbd> <span>property to position</span> <kbd>65</kbd><span>, in two steps:</span></p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/f45daa0e-b695-4a4d-a3a2-42e541872458.png" style="width:8.42em;height:7.92em;"/></p>
<p><span>You can use either</span> <kbd>on &lt;property&gt;</kbd><span> or</span> <kbd>properties</kbd><span> to target a property.</span></p>
<div class="packt_tip">Also available is the <kbd><span>when</span></kbd> keyword, which denotes<span> </span>when<span> </span>something can take place. It can be used with any property if it evaluates to <kbd>true</kbd> or <kbd>false</kbd>, such as <kbd>when: y &gt; 50</kbd>. You could use it, for example, on the <kbd>running</kbd> property. </div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">ParallelAnimation</h1>
                </header>
            
            <article>
                
<p><kbd>ParallelAnimation</kbd> plays all its defined animations at the same time, asynchronously:</p>
<pre>ParallelAnimation {<br/>    NumberAnimation { target: myOtherItem; property: "x"; to: 35; duration: 1500 }<br/>    NumberAnimation { target: myOtherItem; property: "y"; to: 65; duration: 1500 }<br/>}</pre>
<p class="mce-root">These are the same animations, but this would perform them at the same time.</p>
<p>It is interesting to note that this animation would move <kbd>myOtherItem</kbd> to position <kbd>35</kbd> and <kbd>65</kbd> directly from where the current position is, as if it were one step:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/5dd76d12-c152-4558-bd01-f58932a46035.png" style="width:8.67em;height:9.67em;"/></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">SpringAnimation</h1>
                </header>
            
            <article>
                
<p><kbd>SpringAnimation</kbd><span> </span>animates items with a spring-like motion. It has two properties to pay attention to—<kbd>spring</kbd> and <kbd>damping</kbd>:</p>
<ul>
<li><kbd>spring</kbd>: A <kbd>qreal</kbd> <span>value that controls how energetic the bounce is</span></li>
<li><kbd>damping</kbd>:<strong> </strong><span>How quickly the bouncing stops</span></li>
<li><kbd>mass</kbd>:<strong> </strong>Adds a weight to the bounce, so it acts as if there is gravity and weight</li>
<li><kbd>velocity</kbd>:<strong> </strong>Specifies the maximum velocity</li>
<li><kbd>modulus</kbd>: The value at which a value will wrap around to zero</li>
<li><kbd>epsilon</kbd>: Amount of rounding to zero</li>
</ul>
<div class="packt_infobox"><span>The source code can be found on the Git repository under the </span><kbd><span>Chapter02</span>-8</kbd><span> directory, in the</span> <kbd>cp2</kbd> <span>branch.</span></div>
<pre><span>import</span><span> </span>QtQuick<span> </span>2.12<br/><span>import QtQuick.Window 2.12<br/></span>Window<span> </span><span>{<br/></span><span>    </span><span>visible</span>:<span> </span>true<br/><span>    </span><span>width</span>:<span> </span>640<br/><span>    </span><span>height</span>:<span> </span>480<br/><span>    </span><span>color</span>:<span> </span><span>"black"<br/></span><span>    </span><span>title</span>:<span> </span><span>qsTr</span>(<span>"Red</span><span> </span><span>Bouncy</span><span> </span><span>Box"</span>)<br/>    <span>Rectangle</span><span> </span><span>{<br/></span><span>        </span><span>id</span>:<span> </span><span>redBox<br/></span><span>        </span><span>width</span>:<span> </span>50;<span> </span><span>height</span>:<span> </span>50<br/><span>        </span><span>color</span>:<span> </span><span>"black"<br/></span><span>        </span><span>border.width</span>:<span> </span>4<br/><span>        </span><span>border.color</span>:<span> </span><span>"red"<br/></span>        <span>Behavior</span><span> </span><span>on</span><span> </span><span>x</span><span> </span><span>{</span><span> </span><span>SpringAnimation</span><span> </span><span>{</span><span> </span><span>spring</span><span>:</span><span> </span><span>10;</span><span> </span><span>damping</span><span>:</span><span> </span><span>10;</span><span> </span><span>}</span><span> </span><span>}<br/></span><span>        </span><span>Behavior</span><span> </span><span>on</span><span> </span><span>y</span><span> </span>{<span> </span><span>SpringAnimation</span><span> </span>{<span> </span><span>spring</span>:<span> </span>10;<span> </span><span>damping</span>:<span> </span>.1;<span>  </span><span>mass</span>:<span> </span>10<span> </span>}<span> </span>}<br/><span>    </span>}    <br/><span>    MouseArea</span><span> </span><span>{<br/></span><span>        </span><span>anchors.fill</span>:<span> </span><span>parent<br/></span><span>        </span><span>hoverEnabled</span>:<span> </span>true<br/><span>        </span><span>onClicked</span>:<span> </span><span>animation</span>.start()<br/>        <span>onPositionChanged</span><span>:</span><span> </span><span>{<br/></span><span>            </span><span>redBox</span>.x<span> </span>=<span> </span><span>mouse</span>.x<span> </span>-<span> </span><span>redBox</span>.width/2<br/><span>            </span><span>redBox</span>.y<span> </span>=<span> </span><span>mouse</span>.y<span> </span>-<span> </span><span>redBox</span>.height/2<br/><span>        </span>}<br/><span>    </span>}<br/>    <span>ParallelAnimation</span><span> </span><span>{<br/></span><span>        </span><span>id</span>:<span> </span><span>animation<br/></span><span>        </span><span>NumberAnimation</span><span> </span>{<span> </span><span>target</span>:<span> </span><span>redBox</span>;<span> </span><span>property</span>:<span> </span><span>"x"</span>;<span> </span><span>to</span>:<span> </span>35;<span> </span><span>duration</span>:<span> </span>1500<span> </span>}<br/><span>        </span><span>NumberAnimation</span><span> </span>{<span> </span><span>target</span>:<span> </span><span>redBox</span>;<span> </span><span>property</span>:<span> </span><span>"y"</span>;<span> </span><span>to</span>:<span> </span>65;<span> </span><span>duration</span>:<span> </span>1500<span> </span>}<br/><span>    </span>}<br/>}</pre>
<p>In this example, a red square follows the finger or mouse cursor around, bouncing up and down as it goes. When the user clicks on the app, the red square will move to position <kbd>35</kbd> and <kbd>65</kbd>. A<span> </span><kbd>spring</kbd><span> </span>value of <kbd>10</kbd> makes it very bouncy, but the<span> </span><kbd>mass</kbd><span> </span>of <kbd>10</kbd> on the<span> </span><kbd>y</kbd><span> </span>axis will cause it to bounce like it has more weight. The lower the <kbd>damping</kbd> value is, the more quickly it will come to rest. Here, the <kbd>damping</kbd> value is much greater on the <kbd>x</kbd> axis, so it will tend to keep bouncing up and down more than side to side.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Easing</h1>
                </header>
            
            <article>
                
<p>I should mention easing at this point. Every Qt Quick animation has an<span> </span><kbd>easing</kbd><span> </span>property. Easing is a way to specify the speed at which the animation progresses. The default <kbd>easing</kbd> value is <kbd>Easing.Linear</kbd><span>. </span>There are 40 different <kbd>easing</kbd> properties, which are probably better seen running in an example than seen here demonstrated with graphs. </p>
<p>You can see a demonstration of this<span> at my GitHub web server </span>by the magic of Qt for WebAssembly at</p>
<p><a href="https://lpotter.github.io/easing/easing.html">https://lpotter.github.io/easing/easing.html</a>.</p>
<p>Qt for WebAssembly brings Qt apps to the web. Firefox has the fastest WebAssembly implementation at the time of writing this book. We will discuss Qt for WebAssembly in <a href="04b4eb0e-2f09-4205-9d2f-ac17ff6a958d.xhtml">Chapter 14</a>, <em><span>Universal Platform for Mobiles and Embedded Devices</span></em><span class="cdp-organizer-chapter-title"><span class="cdp-organize-title-label">.</span></span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">SceneGraph</h1>
                </header>
            
            <article>
                
<p>Scene Graph is based on OpenGL for Qt Quick. On mobile and embedded devices, it is usually OpenGL ES2. As I mentioned before, Scene Graph caters to manage a sizable number of graphics. OpenGL is a huge subject worthy of its own book—in fact, tons of books—about OpenGL ES2 programming. I won't go into too much detail about it here, but will just mention that OpenGL is available for mobile phones and embedded devices, depending on the hardware.</p>
<p class="mce-root"/>
<p class="mce-root"/>
<p>If you are planning to use Scene Graph, most of the heavy lifting will be done in C++. You should already be familiar with how to use C++ and QML together, as well as OpenGL ES2. If not, Qt has great documentation on it. </p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Summary</h1>
                </header>
            
            <article>
                
<p>Qt Quick is ready-made for using on mobile and embedded devices. From the simple building blocks of basic Qt Quick items to 3D data charts, you can write complicated animated applications using various data sets and presentations in QML.</p>
<p>You should now be able to use basic components such as <kbd>Rectangle</kbd> or <kbd>Text</kbd> to create Qt Quick applications that use dynamic variable bindings and signals.</p>
<p>We also covered how to use <kbd>anchors</kbd> to position the components visually and will be able to accept changing orientations and various screen sizes of target devices.</p>
<p>You are now able to use more conventional-looking components such as ready-made <kbd>Button</kbd>, <kbd>Menu</kbd> and <kbd>ProgressBar</kbd> instances, as well as more advanced graphical elements such as <kbd>PieChart</kbd> and <kbd>BarChart</kbd>.</p>
<p class="mce-root"/>
<p>We also examined using different animation methods available in Qt Quick, such as <kbd>ProperyAnimation</kbd> and <kbd>NumberAnimation</kbd>.</p>
<p>In the next chapter, we will learn about using particles and special graphical effects.</p>


            </article>

            
        </section>
    </body></html>