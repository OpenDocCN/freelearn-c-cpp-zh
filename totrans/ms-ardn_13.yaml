- en: Using LCD Displays
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: There are times that we would like to have the ability to display data from
    the Arduino to the user. For this, we can use an LCD display. There are numerous
    types of LCD displays that we can use and probably the most popular is the 1602
    display. Because they are so popular, you can find numerous tutorials on how to
    use them on the internet. While these displays are easy to use, you are limited
    by what you can do with them.
  prefs: []
  type: TYPE_NORMAL
- en: In this chapter, we will look at a display that we can do a lot more with. This
    display is the **Nokia 5110 LCD display**.
  prefs: []
  type: TYPE_NORMAL
- en: 'In this chapter, you will learn:'
  prefs: []
  type: TYPE_NORMAL
- en: How to connect a Nokia 5110 LCD to an Arduino
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: How to print text to an LCD
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: How to draw circles on an LCD
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: How to draw rectangles on an LCD
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: How to draw rounded rectangles on an LCD
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Introduction
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: The Nokia 5110 LCD display is a basic monochrome graphics LCD screen that can
    be used in numerous projects. Nokia originally developed this display for use
    with cell phones in the late 1990's. This display uses the **PCD8544 LCD controller/driver**.
  prefs: []
  type: TYPE_NORMAL
- en: Having an LCD display greatly improves the user interface of any project because
    we have the ability to display messages directly to the user letting them know
    what is happening or giving them specific error messages if something goes wrong.
    The 5110 LCD allows us to display both text and graphics.
  prefs: []
  type: TYPE_NORMAL
- en: 'The 5110 LCD has a display area of approximately 4.2 cm with 84 × 48 individual
    pixels. The display is inexpensive and very easy to use with the Adafruit 5110
    LCD library that we will be using in this chapter. The 5110 LCD that we will be
    using in this chapter looks like the following:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/d52c7991-1a40-45b8-931e-b2ada86559ec.png)'
  prefs: []
  type: TYPE_IMG
- en: 'The 5110 LCD display comes mounted on a PCB board and has eight pins that are
    used to power the display and interface with it. These pins are, from left to
    right:'
  prefs: []
  type: TYPE_NORMAL
- en: '**RST**: Reset – Active low'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '**CE**: Chip Select – Active low'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '**DC**: Mode (data/instruction) selection – Select between command mode (low)
    or data mode (high)'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '**DIN**: Serial Data Inline'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '**CLK**: Serial Clock Line'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '**VCC**: Power input 3.3V'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '**BL**: Backlight LED control – 3.3V'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '**GND**: Ground'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The reset pin will reset the 5110 LCD module and is active low, which means
    that the reset will be triggered if the pin goes to 0V. The chip select pin is
    used when more than one SPI peripheral is connected. The pin is also active low.
  prefs: []
  type: TYPE_NORMAL
- en: The DC pin is used to select between data or command mode. When the pin is high
    data mode is used, and when the pin is low command mode is used.
  prefs: []
  type: TYPE_NORMAL
- en: The DIN pin is the input pin where serial instructions are sent.
  prefs: []
  type: TYPE_NORMAL
- en: The CLK pin is the common clock used for the SPI modules. The clock source is
    supplied to the pin.
  prefs: []
  type: TYPE_NORMAL
- en: The BL pin powers the backlight display. This pin should never be above 3.3V.
    If the pin is low, then the backlight will be off.
  prefs: []
  type: TYPE_NORMAL
- en: VCC and GND are power and ground respectively. Power should never be above 3.3V.
  prefs: []
  type: TYPE_NORMAL
- en: Let's see what parts we will need for this chapter's project.
  prefs: []
  type: TYPE_NORMAL
- en: Components needed
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: One Arduino Uno or compatible board
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: One Nokia 5110 LCD
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Four 10K ohm resistors
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: One 1K ohm resistor
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Jumper wires
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: One breadboard
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Circuit diagrams
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'The following diagram shows the circuit diagram for this chapter''s project:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/9b28f7ed-05cf-44cf-a980-7ea63e42fa13.png)'
  prefs: []
  type: TYPE_IMG
- en: The Nokia 5110 LCD should use the 3.3V power out from the Arduino and not the
    5V that we have used in the earlier projects. We use inline resistors to protect
    the 3.3V input lines on the LCD. The CE line uses a 1K ohm resistor and the remainder
    use 10K ohm resistors.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following chart shows what pins on the 5110 LCD module are connected to
    what pins on the Arduino:'
  prefs: []
  type: TYPE_NORMAL
- en: '| **5110** | **Arduino** |'
  prefs: []
  type: TYPE_TB
- en: '| RST | 3 |'
  prefs: []
  type: TYPE_TB
- en: '| CE | 4 |'
  prefs: []
  type: TYPE_TB
- en: '| DC | 5 |'
  prefs: []
  type: TYPE_TB
- en: '| DIN | 11 |'
  prefs: []
  type: TYPE_TB
- en: '| CLK | 13 |'
  prefs: []
  type: TYPE_TB
- en: '| VCC | 3.3V out |'
  prefs: []
  type: TYPE_TB
- en: '| BL | GND |'
  prefs: []
  type: TYPE_TB
- en: '| GND | GND |'
  prefs: []
  type: TYPE_TB
- en: The backlight is set to ground to turn it off. If you wish to use the backlight,
    you can connect the pin to the 3.3V power out that was used for the VCC pin.
  prefs: []
  type: TYPE_NORMAL
- en: Now let's see how we can display items on the LCD.
  prefs: []
  type: TYPE_NORMAL
- en: Code
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'We will need to start off by installing two Adafruit libraries. These are the
    **Adafruit GFX Library** and the **Adafruit PCD8544 Nokia 5110 LCD library**.
    These libraries are installed as we will need to include them and the SPI library.
    We can do this by adding the following `include` statements at the beginning of
    the sketch:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: 'We will not want to initiate an instance of the `Adafruit_PCD8544` type using
    the following code:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: The parameters are the Arduino pin numbers that the CLK, DIN, DC, CE and RST
    pins respectively are connected too.
  prefs: []
  type: TYPE_NORMAL
- en: 'In the `setup()` function, we will want to add the following code to set up
    the `Adafruit_PCD8544` instance:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: 'Now the rest of the code can go in the `setup()` function for test purposes
    or in the `loop()` function. Let''s start off by seeing how to light up a single
    pixel on the display. This can be accomplished by using the `drawPixel()` function
    as shown in the following code:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: Before we draw anything to the screen, we will want to clear the display and
    buffer. We do this with the `clearDisplay()` function. Next, we use the `drawPixel()`
    function to light up a single pixel located at the *X* coordinate 10 and the *Y*
    coordinate 10\. Before anything is displayed on the LCD, we need to run the `display()`
    function as shown in the preceding code. It is important to remember to run the
    `clearDisplay()` function before we draw anything to the LCD, and we run the `display()`
    function after we draw everything to the screen to display it.
  prefs: []
  type: TYPE_NORMAL
- en: Drawing a line
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'We could put several of the `drawPixel()` function calls together to draw a
    line, but it would be a lot easier to use the `drawLine()` function as shown in
    the following code:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: The `drawLine()` function takes five parameters. The first two parameters are
    the *X*/*Y* coordinates of the starting point for the line. The next two parameters
    are the *X*/*Y* coordinates for the ending point of the line, and the final parameter
    is the color to draw the line. Since the Nokia 5110 LCD is a monochrome display,
    the only options here are `BLACK` or `WHITE`.
  prefs: []
  type: TYPE_NORMAL
- en: 'If we ran this code, we would see a line on the display like the one seen in
    the following photograph:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/1e3d6003-54d4-4ab2-8aa3-be7ae4c97fee.png)'
  prefs: []
  type: TYPE_IMG
- en: Displaying text
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'The Adafruit library also makes it very easy to display text to the Nokia 5110
    LCD. The following code shows how we can display text:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs: []
  type: TYPE_PRE
- en: The `setTextSize()` function sets the size of the text. In the first example,
    the text size is set to `1`. The `setTextColor()` function will set the color
    of the text. Once again, since the Nokia 5110 LCD is a monochrome display, the
    two options are `BLACK` or `WHITE`. The `setCursor()` function sets the position
    of the cursor to the position on the screen to write the text too. In this case,
    the cursor is set to the upper left corner of the screen. Finally, the `println()`
    function is used to print the `Hello World!` message to the screen.
  prefs: []
  type: TYPE_NORMAL
- en: In the next example, we use the `setTextColor()` function to set the foreground
    color to `WHITE` and the background color to `BLACK` to reverse the text and then
    use the `println()` function to print the value of PI to the screen. Since we
    did not call the `setTextSize()` function, the text stays at the previously defined
    size, which is `1`.
  prefs: []
  type: TYPE_NORMAL
- en: 'In the last example, the text size is set to `2`, and the text color is set
    back to black. The following image shows what the screen will display when this
    code is run:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/a3519eda-f2f0-4e8d-929b-4af212fe47bb.png)'
  prefs: []
  type: TYPE_IMG
- en: Rotating text
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'We can also rotate text. The following code shows how to do this:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs: []
  type: TYPE_PRE
- en: 'The `setRotation()` function will rotate the text counterclockwise. A value
    of 1 will rotate the text 90 degrees counterclockwise. Values of 2 and 3 can also
    be used to rotate the text at 180 and 270 degrees. The following photograph shows
    how the text will look when this code is run:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/1a8bca0e-b645-4efc-8487-16ae5408d4c4.png)'
  prefs: []
  type: TYPE_IMG
- en: Notice that the text will wrap to a new line if it is longer than what can be
    displayed on a single line.
  prefs: []
  type: TYPE_NORMAL
- en: Basic shapes
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'The Adafruit library also enables us to create basic shapes on the LCD. These
    include circles, rectangles and rounded rectangles. There are also functions that
    enable us to create these shapes and fill them in. The following code and screenshots
    show how to use the circle functions:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE7]'
  prefs: []
  type: TYPE_PRE
- en: '![](img/e18481b3-e029-4322-9c44-c89a8f4a7342.png)'
  prefs: []
  type: TYPE_IMG
- en: Filled shape
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '[PRE8]'
  prefs: []
  type: TYPE_PRE
- en: '![](img/d16f8195-efdd-4952-9087-92c6a8012ef3.png)'
  prefs: []
  type: TYPE_IMG
- en: The circle functions take four parameters. The first two parameters are the
    *X*/*Y* coordinates for the center of the circle. In these two examples, the center
    of the circle is the center of the screen. The third parameter is the radius of
    the circle, and the last parameter is the color for the circle and also the color
    to fill the circle in the case of the `fillCircle()` function.
  prefs: []
  type: TYPE_NORMAL
- en: Rectangle
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'The next two examples show how to draw a rectangle and also a filled rectangle:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE9]'
  prefs: []
  type: TYPE_PRE
- en: '![](img/d43d4e35-1433-4f50-a1f0-4465809cd95a.png)'
  prefs: []
  type: TYPE_IMG
- en: Filled rectangle
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '[PRE10]'
  prefs: []
  type: TYPE_PRE
- en: '![](img/84c7bc13-d2cf-469d-9bce-cae618e22e0d.png)'
  prefs: []
  type: TYPE_IMG
- en: Rounded rectangle
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: The rectangle functions take five parameters. The first two are the *X*/*Y*
    coordinates of the upper left corner of the rectangle. The next two parameters
    are the *X*/*Y* coordinates of the lower right-hand corner of the rectangle, and
    the last parameter is the color to draw the rectangle and the color to fill the
    rectangle for the `fillRect()` function.
  prefs: []
  type: TYPE_NORMAL
- en: 'The next two examples show how we can draw rounded rectangles with the Adafruit
    library:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE11]'
  prefs: []
  type: TYPE_PRE
- en: '![](img/980bd3b2-a0da-47a2-9093-3dd99ac64142.png)'
  prefs: []
  type: TYPE_IMG
- en: Filled rounded rectangle
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '[PRE12]'
  prefs: []
  type: TYPE_PRE
- en: '![](img/a2741c8b-6bb9-48e2-bb18-e14606607272.png)'
  prefs: []
  type: TYPE_IMG
- en: The first four parameters for the round rectangle functions are the same as
    the regular rectangle functions, which are the coordinates for the upper left
    and lower right corners of the rectangle. The next parameter is how much to round
    the corners, and the last parameter is the color to draw the rounded rectangle
    and the color to fill it.
  prefs: []
  type: TYPE_NORMAL
- en: As we can see from the examples in this chapter, we can do a lot more than text
    with the Nokia 5110 LCD display, and the Adafruit library makes it very easy to
    use.
  prefs: []
  type: TYPE_NORMAL
- en: Challenge
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: For the challenge, take any of the previous projects in this book and add the
    Nokia 5110 LCD display to it. Then, rather than displaying the output to the serial
    console, display the output to the LCD display. An example would be to add the
    LCD display to the rangefinder project from [Chapter 10](52e8daa7-b58a-4c75-ac23-13795fc1279d.xhtml),
    *Obstacle Avoidance and Collision Detection*, and use the LCD to display the distance.
  prefs: []
  type: TYPE_NORMAL
- en: Summary
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this chapter, we saw how we could add a Nokia 5110 LCD monochrome display
    to our projects. These displays can greatly enhance the user experience of almost
    any project because we are able to tell the users what is happening and what is
    wrong if there is an issue.
  prefs: []
  type: TYPE_NORMAL
- en: In the next chapter, we will see how we can add a voice synthesizer and voice
    recognition to our projects.
  prefs: []
  type: TYPE_NORMAL
