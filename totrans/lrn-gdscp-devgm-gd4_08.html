<html><head></head><body>
		<div><h1 class="chapter-number" id="_idParaDest-205"><a id="_idTextAnchor573"/>8</h1>
			<h1 id="_idParaDest-206"><a id="_idTextAnchor574"/>Splitting and Reusing Scenes</h1>
			<p>It is possible to create the whole game within one Godot scene, but this can get quite unwieldy. Not only do we have to recreate every part over and over again, such as every boulder or enemy, but if we want to change something about the rocks, we have to go and find every rock to change them.</p>
			<p>This is not scalable for any kind of game. Luckily, in Godot, there are such things as <em class="italic">scenes</em>. In <a href="B19358_02.xhtml#_idTextAnchor044"><em class="italic">Chapter 2</em></a>, we saw how to create new scenes from scratch, but in this chapter, we will learn how we can create a scene for each element so that we can easily reuse it throughout the game. This way, we can make one scene for the rocks and use that to populate the arena instead of having multiple unique rocks.</p>
			<p>Next to reusing components, it’s also way easier to work on certain parts of the game in isolation instead of having a big scene. Saving parts of the game like this will keep us focused on what we are working on.</p>
			<p>Other game engines have very similar systems. Unity has Prefabs, Unreal Engine has Blueprint Classes, and so on. The great thing about Godot scenes is that they behave just like any other node once they are instanced in the scene tree.</p>
			<p>In this chapter, we will cover the following main topics:</p>
			<ul>
				<li>Saving a branch as a new scene</li>
				<li>Using saved scenes</li>
				<li>Organizing scenes in a project</li>
			</ul>
			<h1 id="_idParaDest-207"><a id="_idTextAnchor575"/>Technical requirements</h1>
			<p>As for every chapter, you can find the final code in this book’s GitHub repository in the subfolder for this chapter: <a href="https://github.com/PacktPublishing/Learning-GDScript-by-Developing-a-Game-with-Godot-4/tree/main/chapter08">https://github.com/PacktPublishing/Learning-GDScript-by-Developing-a-Game-with-Godot-4/tree/main/chapter08</a>.</p>
			<h1 id="_idParaDest-208"><a id="_idTextAnchor576"/>Saving a branch as a new scene</h1>
			<p>In the <em class="italic">Creating new scenes</em> section of <a href="B19358_02.xhtml#_idTextAnchor044"><em class="italic">Chapter 2</em></a>, we learned how to create new scenes for different <a id="_idIndexMarker472"/>code experiments. This process can be followed to create any scene at all. But another way to do this is to save part of an existing scene tree. We’ll be splitting a branch of the scene tree into its separate sub-scene that we can reuse anywhere.<a id="_idTextAnchor577"/></p>
			<h2 id="_idParaDest-209"><a id="_idTextAnchor578"/>Creating a separate player scene</h2>
			<p>Let’s save the <code>Player</code> node<a id="_idIndexMarker473"/> as a separate scene so that we can<a id="_idIndexMarker474"/> work on it in isolation. Go to our <code>Main</code> scene and follow these steps:</p>
			<ol>
				<li>Right-click the <code>Player</code> node.</li>
				<li>From the pop-up menu, select <strong class="bold">Save Branch </strong><strong class="bold">as Scene</strong>:</li>
			</ol>
			<div><div><img alt="Figure 8.1 – Selecting Save Branch as Scene to save the node as a separate scene" src="img/B19358_08_01.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.1 – Selecting Save Branch as Scene to save the node as a separate scene</p>
			<ol>
				<li value="3">Now, we have to <a id="_idIndexMarker475"/>select<a id="_idIndexMarker476"/> a location and name for the new scene. Leaving everything as-is should do the trick:</li>
			</ol>
			<div><div><img alt="Figure 8.2 – Saving the scene under an appropriate name" src="img/B19358_08_02.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.2 – Saving the scene under an appropriate name</p>
			<ol>
				<li value="4">The new scene will<a id="_idIndexMarker477"/> now<a id="_idIndexMarker478"/> open and only contain the <code>Player</code> node and its child:</li>
			</ol>
			<div><div><img alt="Figure 8.3 – The player.tscn scene, which only contains the Player node and its children" src="img/B19358_08_03.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.3 – The player.tscn scene, which only contains the Player node and its children</p>
			<ol>
				<li value="5">Reset the <code>Player</code> node’s position so that it is positioned at <code>(0, 0)</code> within the scene:</li>
			</ol>
			<div><div><img alt="Figure 8.4 – Resetting the position of the root Player node to (0, 0)" src="img/B19358_08_04.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.4 – Resetting the position of the root Player node to (0, 0)</p>
			<p>If you go back to the main scene, as shown in <em class="italic">Figure 8</em><em class="italic">.3</em>, you’ll see that the <code>Player</code> node, which first had some child nodes underneath it, is replaced by one node called <code>Player</code>. This one node now represents everything that is within the <strong class="bold">Player</strong> scene. Visually, nothing changed in the 2D editor; the player is still there complete, with its <strong class="bold">Sprite2D</strong> and <strong class="bold">Health</strong> labels:</p>
			<div><div><img alt="Figure 8.5 – The Player node and its children are replaced with a single node" src="img/B19358_08_05.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.5 – The Player node and its children are replaced with a single node</p>
			<p>If you run the game, nothing <a id="_idIndexMarker479"/>will <a id="_idIndexMarker480"/>change because everything has stayed the same. We just split off the <code>Player</code> node into its own scene file. You can check this by going into the <strong class="bold">Remote</strong> tree and confirming that the player node gets expanded into all its parts when the game starts to run:</p>
			<div><div><img alt="Figure 8.6 – The Player node expands to have all its child nodes in the Remote tree when running the game" src="img/B19358_08_06.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.6 – The Player node expands to have all its child nodes in the Remote tree when running the game</p>
			<p>There is also a new button available in the <code>Player</code> node. Pressing this button will bring us straight to the <code>Player</code> scene. This <a id="_idIndexMarker481"/>is<a id="_idIndexMarker482"/> very convenient for when we’ll be working with lots of different scenes and nodes later on:</p>
			<div><div><img alt="Figure 8.7 - The new button that will bring us directly to the Player scene" src="img/B19358_08_07.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.7 - The new button that will bring us directly to the Player scene</p>
			<p>Now, the player has their own scene that we can work in without having to deal with everything in the whole ga<a id="_idTextAnchor579"/>me.</p>
			<h2 id="_idParaDest-210"><a id="_idTextAnchor580"/>The root node of a scene</h2>
			<p>You’ll also see that the<a id="_idIndexMarker483"/> root node of the player scene is the <code>CharacterBody2D</code> node called <code>Player</code>, which we chose for it in <a href="B19358_07.xhtml#_idTextAnchor523"><em class="italic">Chapter 7</em></a>. Scenes can have any type of node as their root. You can choose this type when creating the scene, as we did in <a href="B19358_02.xhtml#_idTextAnchor044"><em class="italic">Chapter 2</em></a>, or later on, by changing the node type, as we did in <a href="B19358_07.xhtml#_idTextAnchor523"><em class="italic">Chapter 7</em></a> for the <code>Player</code> node.</p>
			<p>Having a separate scene file allows us to create multiple instances of that scene within another scene. We’ll see how we can do that in the next secti<a id="_idTextAnchor581"/>on.</p>
			<h1 id="_idParaDest-211"><a id="_idTextAnchor582"/>Using saved scenes</h1>
			<p>Because we will use <a id="_idIndexMarker484"/>only one player in the game, we are not going to reuse the player scene multiple times. However, we will want to reuse the rocks and walls within the arena. Follow the steps in the <em class="italic">Saving a branch as a new scene</em> section to separate one boulder into a new scene:</p>
			<div><div><img alt="Figure 8.8 – The boulder.tscn scene" src="img/B19358_08_08.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.8 – The boulder.tscn scene</p>
			<p>Now, let’s reuse this new scene in our arena as the default rock:</p>
			<ol>
				<li>Go back to the main scene. Remove all the rocks from the scene; we don’t need them anymore.</li>
				<li>Select the <code>Arena</code> node. By doing so, everything we add will be added as a child of this node.</li>
				<li>Now, drag and drop the boulder scene from <strong class="bold">FileSystem</strong> into the 2D editor. You will see the visual of the boulder pop up while you’re still dragging it around:</li>
			</ol>
			<div><div><img alt="Figure 8.9 – Dragging and dropping the boulder.tscn scene into the main sc﻿ene tree" src="img/B19358_08_09.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.9 – Dragging and dropping the boulder.tscn scene into the main sc<a id="_idTextAnchor583"/>ene tree</p>
			<p>Now, you can do the<a id="_idIndexMarker485"/> same for the inner walls in the scene and repopulate the arena with rocks and walls so that it looks less barren. However, don’t do the same for <code>OuterWalls</code> – we aren’t going to reuse it, so this one can stay the same.</p>
			<p>When placing the boulder and wall scenes, you can use the transform parameters, such as rotation, scale, and skew, to give variety to the instances so that they don’t all look too similar.</p>
			<p>The cool thing is that we can use any scene within any other scene!</p>
			<p>Having many smaller scene files has lots of upsides, with the maintainability of the code and easy reuse being just two of them, but it will also complexify the file structure of the project. Because of this, we’ll have to think about how we’ll organize all the files within the project. We’ll do <a id="_idIndexMarker486"/>that in the next sec<a id="_idTextAnchor584"/>tion.</p>
			<h1 id="_idParaDest-212"><a id="_idTextAnchor585"/>Organizing scene files</h1>
			<p>Now that we have more<a id="_idIndexMarker487"/> files to worry about, we’ll have to start being smart regarding how we organize them. Let’s separate scenes into different folders that make sense for our project. This way, we’ll always know where to find something or save a new scene.</p>
			<p>Add the following folders in the root folder of our project:</p>
			<ul>
				<li><code>parts</code>:<ul><li><code>environment</code></li><li><code>player</code></li></ul></li>
				<li><code>screens</code>:<ul><li><code>game</code></li></ul></li>
			</ul>
			<p>The <code>parts</code> folder will contain all the scenes that are part of a different scene, such as the player, walls, enemies, collectibles, UI buttons, and so forth.</p>
			<p><code>screens</code>, on the other hand, will contain all scenes that can stand on their own, such as the game screen, full-screen menus such as the main menu or pause menu, and so forth. These scenes are made up of scenes from the <code>parts</code> folder.</p>
			<p>At the beginning of the project, I gave you an <code>assets</code> folder. This folder is used to hold all the art assets, from sprites to animations and sounds.</p>
			<p>Now, move all scenes and scripts to the appropriate folders, like so:</p>
			<div><div><img alt="Figure 8.10 – Our project with better file management" src="img/B19358_08_10.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.10 – Our project with better file management</p>
			<p>Once you look at other<a id="_idIndexMarker488"/> game projects made in Godot, or other game engines, you’ll see that everyone has their own way of organizing different files within their project. I like to keep scenes and scripts together within the same folder, for example, because most of the time, you will use and edit them very closely together. However, I will keep assets, such as pictures and sounds, separate because these are easier to reuse over different scenes.</p>
			<p>Over time, you will probably develop an organizational structure for projects and that’s fine. Whatever makes the most sense to you is what you should use, so long as you are consistent.</p>
			<h1 id="_idParaDest-213"><a id="_idTextAnchor586"/>Additional exercises – Sharepening the axe</h1>
			<ol>
				<li>Using what we<a id="_idIndexMarker489"/> learned about splitting off scenes, try making a second boulder scene with a different shape than the first one. Call the first boulder scene <code>boulder01.tscn</code> and the second one <code>boulder02.tscn</code>.</li>
			</ol>
			<h1 id="_idParaDest-214"><a id="_idTextAnchor587"/>Summary</h1>
			<p>Reusing parts of your work is almost always a good idea. In this chapter, we learned how to reuse whole branches of the scene tree as separate scenes. This will come in handy in the following chapters as we are now able to work on the player’s camera movement separately and create collisions in all rocks and walls simultaneously. But that’s for the next c<a id="_idTextAnchor588"/>hapter.</p>
			<h1 id="_idParaDest-215"><a id="_idTextAnchor589"/>Quiz time</h1>
			<ul>
				<li>How can you save a branch within the scene tree as a separate scene?</li>
				<li>Is it important to organize our scenes, scripts, and assets in the <strong class="bold">FileSystem</strong> area? Why?</li>
			</ul>
		</div>
	</body></html>