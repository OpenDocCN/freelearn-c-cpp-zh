<html><head></head><body>
		<div id="_idContainer148">
			<h1 class="chapter-number" id="_idParaDest-205"><a id="_idTextAnchor573"/>8</h1>
			<h1 id="_idParaDest-206"><a id="_idTextAnchor574"/>Splitting and Reusing Scenes</h1>
			<p>It is possible to create the whole game within one Godot scene, but this can get quite unwieldy. Not only do we have to recreate every part over and over again, such as every boulder or enemy, but if we want to change something about the rocks, we have to go and find every rock to <span class="No-Break">change them.</span></p>
			<p>This is not scalable for any kind of game. Luckily, in Godot, there are such things as <em class="italic">scenes</em>. In <a href="B19358_02.xhtml#_idTextAnchor044"><span class="No-Break"><em class="italic">Chapter 2</em></span></a>, we saw how to create new scenes from scratch, but in this chapter, we will learn how we can create a scene for each element so that we can easily reuse it throughout the game. This way, we can make one scene for the rocks and use that to populate the arena instead of having multiple <span class="No-Break">unique rocks.</span></p>
			<p>Next to reusing components, it’s also way easier to work on certain parts of the game in isolation instead of having a big scene. Saving parts of the game like this will keep us focused on what we are <span class="No-Break">working on.</span></p>
			<p>Other game engines have very similar systems. Unity has Prefabs, Unreal Engine has Blueprint Classes, and so on. The great thing about Godot scenes is that they behave just like any other node once they are instanced in the <span class="No-Break">scene tree.</span></p>
			<p>In this chapter, we will cover the following <span class="No-Break">main topics:</span></p>
			<ul>
				<li>Saving a branch as a <span class="No-Break">new scene</span></li>
				<li>Using <span class="No-Break">saved scenes</span></li>
				<li>Organizing scenes in <span class="No-Break">a project</span></li>
			</ul>
			<h1 id="_idParaDest-207"><a id="_idTextAnchor575"/>Technical requirements</h1>
			<p>As for every chapter, you can find the final code in this book’s GitHub repository in the subfolder for this <span class="No-Break">chapter: </span><a href="https://github.com/PacktPublishing/Learning-GDScript-by-Developing-a-Game-with-Godot-4/tree/main/chapter08"><span class="No-Break">https://github.com/PacktPublishing/Learning-GDScript-by-Developing-a-Game-with-Godot-4/tree/main/chapter08</span></a><span class="No-Break">.</span></p>
			<h1 id="_idParaDest-208"><a id="_idTextAnchor576"/>Saving a branch as a new scene</h1>
			<p>In the <em class="italic">Creating new scenes</em> section of <a href="B19358_02.xhtml#_idTextAnchor044"><span class="No-Break"><em class="italic">Chapter 2</em></span></a>, we learned how to create new scenes for different <a id="_idIndexMarker472"/>code experiments. This process can be followed to create any scene at all. But another way to do this is to save part of an existing scene tree. We’ll be splitting a branch of the scene tree into its separate sub-scene that we can <span class="No-Break">reuse anywhere.</span><a id="_idTextAnchor577"/></p>
			<h2 id="_idParaDest-209"><a id="_idTextAnchor578"/>Creating a separate player scene</h2>
			<p>Let’s save the <strong class="source-inline">Player</strong> node<a id="_idIndexMarker473"/> as a separate scene so that we can<a id="_idIndexMarker474"/> work on it in isolation. Go to our <strong class="source-inline">Main</strong> scene and follow <span class="No-Break">these steps:</span></p>
			<ol>
				<li>Right-click the <span class="No-Break"><strong class="source-inline">Player</strong></span><span class="No-Break"> node.</span></li>
				<li>From the pop-up menu, select <strong class="bold">Save Branch </strong><span class="No-Break"><strong class="bold">as Scene</strong></span><span class="No-Break">:</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer138">
					<img alt="Figure 8.1 – Selecting Save Branch as Scene to save the node as a separate scene" src="image/B19358_08_01.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.1 – Selecting Save Branch as Scene to save the node as a separate scene</p>
			<ol>
				<li value="3">Now, we have to <a id="_idIndexMarker475"/>select<a id="_idIndexMarker476"/> a location and name for the new scene. Leaving everything as-is should do <span class="No-Break">the trick:</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer139">
					<img alt="Figure 8.2 – Saving the scene under an appropriate name" src="image/B19358_08_02.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.2 – Saving the scene under an appropriate name</p>
			<ol>
				<li value="4">The new scene will<a id="_idIndexMarker477"/> now<a id="_idIndexMarker478"/> open and only contain the <strong class="source-inline">Player</strong> node and <span class="No-Break">its child:</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer140">
					<img alt="Figure 8.3 – The player.tscn scene, which only contains the Player node and its children" src="image/B19358_08_03.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.3 – The player.tscn scene, which only contains the Player node and its children</p>
			<ol>
				<li value="5">Reset the <strong class="source-inline">Player</strong> node’s position so that it is positioned at <strong class="source-inline">(0, 0)</strong> within <span class="No-Break">the scene:</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer141">
					<img alt="Figure 8.4 – Resetting the position of the root Player node to (0, 0)" src="image/B19358_08_04.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.4 – Resetting the position of the root Player node to (0, 0)</p>
			<p>If you go back to the main scene, as shown in <span class="No-Break"><em class="italic">Figure 8</em></span><em class="italic">.3</em>, you’ll see that the <strong class="source-inline">Player</strong> node, which first had some child nodes underneath it, is replaced by one node called <strong class="source-inline">Player</strong>. This one node now represents everything that is within the <strong class="bold">Player</strong> scene. Visually, nothing changed in the 2D editor; the player is still there complete, with its <strong class="bold">Sprite2D</strong> and <span class="No-Break"><strong class="bold">Health</strong></span><span class="No-Break"> labels:</span></p>
			<div>
				<div class="IMG---Figure" id="_idContainer142">
					<img alt="Figure 8.5 – The Player node and its children are replaced with a single node" src="image/B19358_08_05.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.5 – The Player node and its children are replaced with a single node</p>
			<p>If you run the game, nothing <a id="_idIndexMarker479"/>will <a id="_idIndexMarker480"/>change because everything has stayed the same. We just split off the <strong class="source-inline">Player</strong> node into its own scene file. You can check this by going into the <strong class="bold">Remote</strong> tree and confirming that the player node gets expanded into all its parts when the game starts <span class="No-Break">to run:</span></p>
			<div>
				<div class="IMG---Figure" id="_idContainer143">
					<img alt="Figure 8.6 – The Player node expands to have all its child nodes in the Remote tree when running the game" src="image/B19358_08_06.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.6 – The Player node expands to have all its child nodes in the Remote tree when running the game</p>
			<p>There is also a new button available in the <strong class="source-inline">Player</strong> node. Pressing this button will bring us straight to the <strong class="source-inline">Player</strong> scene. This <a id="_idIndexMarker481"/>is<a id="_idIndexMarker482"/> very convenient for when we’ll be working with lots of different scenes and nodes <span class="No-Break">later on:</span></p>
			<div>
				<div class="IMG---Figure" id="_idContainer144">
					<img alt="Figure 8.7 - The new button that will bring us directly to the Player scene" src="image/B19358_08_07.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.7 - The new button that will bring us directly to the Player scene</p>
			<p>Now, the player has their own scene that we can work in without having to deal with everything in the <span class="No-Break">whole ga<a id="_idTextAnchor579"/>me.</span></p>
			<h2 id="_idParaDest-210"><a id="_idTextAnchor580"/>The root node of a scene</h2>
			<p>You’ll also see that the<a id="_idIndexMarker483"/> root node of the player scene is the <strong class="source-inline">CharacterBody2D</strong> node called <strong class="source-inline">Player</strong>, which we chose for it in <a href="B19358_07.xhtml#_idTextAnchor523"><span class="No-Break"><em class="italic">Chapter 7</em></span></a>. Scenes can have any type of node as their root. You can choose this type when creating the scene, as we did in <a href="B19358_02.xhtml#_idTextAnchor044"><span class="No-Break"><em class="italic">Chapter 2</em></span></a>, or later on, by changing the node type, as we did in <a href="B19358_07.xhtml#_idTextAnchor523"><span class="No-Break"><em class="italic">Chapter 7</em></span></a> for the <span class="No-Break"><strong class="source-inline">Player</strong></span><span class="No-Break"> node.</span></p>
			<p>Having a separate scene file allows us to create multiple instances of that scene within another scene. We’ll see how we can do that in the <span class="No-Break">next secti<a id="_idTextAnchor581"/>on.</span></p>
			<h1 id="_idParaDest-211"><a id="_idTextAnchor582"/>Using saved scenes</h1>
			<p>Because we will use <a id="_idIndexMarker484"/>only one player in the game, we are not going to reuse the player scene multiple times. However, we will want to reuse the rocks and walls within the arena. Follow the steps in the <em class="italic">Saving a branch as a new scene</em> section to separate one boulder into a <span class="No-Break">new scene:</span></p>
			<div>
				<div class="IMG---Figure" id="_idContainer145">
					<img alt="Figure 8.8 – The boulder.tscn scene" src="image/B19358_08_08.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.8 – The boulder.tscn scene</p>
			<p>Now, let’s reuse this new scene in our arena as the <span class="No-Break">default rock:</span></p>
			<ol>
				<li>Go back to the main scene. Remove all the rocks from the scene; we don’t need <span class="No-Break">them anymore.</span></li>
				<li>Select the <strong class="source-inline">Arena</strong> node. By doing so, everything we add will be added as a child of <span class="No-Break">this node.</span></li>
				<li>Now, drag and drop the boulder scene from <strong class="bold">FileSystem</strong> into the 2D editor. You will see the visual of the boulder pop up while you’re still dragging <span class="No-Break">it around:</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer146">
					<img alt="Figure 8.9 – Dragging and dropping the boulder.tscn scene into the main sc﻿ene tree" src="image/B19358_08_09.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.9 – Dragging and dropping the boulder.tscn scene into the main sc<a id="_idTextAnchor583"/>ene tree</p>
			<p>Now, you can do the<a id="_idIndexMarker485"/> same for the inner walls in the scene and repopulate the arena with rocks and walls so that it looks less barren. However, don’t do the same for <strong class="source-inline">OuterWalls</strong> – we aren’t going to reuse it, so this one can stay <span class="No-Break">the same.</span></p>
			<p>When placing the boulder and wall scenes, you can use the transform parameters, such as rotation, scale, and skew, to give variety to the instances so that they don’t all look <span class="No-Break">too similar.</span></p>
			<p>The cool thing is that we can use any scene within any <span class="No-Break">other scene!</span></p>
			<p>Having many smaller scene files has lots of upsides, with the maintainability of the code and easy reuse being just two of them, but it will also complexify the file structure of the project. Because of this, we’ll have to think about how we’ll organize all the files within the project. We’ll do <a id="_idIndexMarker486"/>that in the <span class="No-Break">next sec<a id="_idTextAnchor584"/>tion.</span></p>
			<h1 id="_idParaDest-212"><a id="_idTextAnchor585"/>Organizing scene files</h1>
			<p>Now that we have more<a id="_idIndexMarker487"/> files to worry about, we’ll have to start being smart regarding how we organize them. Let’s separate scenes into different folders that make sense for our project. This way, we’ll always know where to find something or save a <span class="No-Break">new scene.</span></p>
			<p>Add the following folders in the root folder of <span class="No-Break">our project:</span></p>
			<ul>
				<li><span class="No-Break"><strong class="source-inline">parts</strong></span><span class="No-Break">:</span><ul><li><span class="No-Break"><strong class="source-inline">environment</strong></span></li><li><span class="No-Break"><strong class="source-inline">player</strong></span></li></ul></li>
				<li><span class="No-Break"><strong class="source-inline">screens</strong></span><span class="No-Break">:</span><ul><li><span class="No-Break"><strong class="source-inline">game</strong></span></li></ul></li>
			</ul>
			<p>The <strong class="source-inline">parts</strong> folder will contain all the scenes that are part of a different scene, such as the player, walls, enemies, collectibles, UI buttons, and <span class="No-Break">so forth.</span></p>
			<p><strong class="source-inline">screens</strong>, on the other hand, will contain all scenes that can stand on their own, such as the game screen, full-screen menus such as the main menu or pause menu, and so forth. These scenes are made up of scenes from the <span class="No-Break"><strong class="source-inline">parts</strong></span><span class="No-Break"> folder.</span></p>
			<p>At the beginning of the project, I gave you an <strong class="source-inline">assets</strong> folder. This folder is used to hold all the art assets, from sprites to animations <span class="No-Break">and sounds.</span></p>
			<p>Now, move all scenes and scripts to the appropriate folders, <span class="No-Break">like so:</span></p>
			<div>
				<div class="IMG---Figure" id="_idContainer147">
					<img alt="Figure 8.10 – Our project with better file management" src="image/B19358_08_10.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.10 – Our project with better file management</p>
			<p>Once you look at other<a id="_idIndexMarker488"/> game projects made in Godot, or other game engines, you’ll see that everyone has their own way of organizing different files within their project. I like to keep scenes and scripts together within the same folder, for example, because most of the time, you will use and edit them very closely together. However, I will keep assets, such as pictures and sounds, separate because these are easier to reuse over <span class="No-Break">different scenes.</span></p>
			<p>Over time, you will probably develop an organizational structure for projects and that’s fine. Whatever makes the most sense to you is what you should use, so long as you <span class="No-Break">are consistent.</span></p>
			<h1 id="_idParaDest-213"><a id="_idTextAnchor586"/>Additional exercises – Sharepening the axe</h1>
			<ol>
				<li>Using what we<a id="_idIndexMarker489"/> learned about splitting off scenes, try making a second boulder scene with a different shape than the first one. Call the first boulder scene <strong class="source-inline">boulder01.tscn</strong> and the second <span class="No-Break">one </span><span class="No-Break"><strong class="source-inline">boulder02.tscn</strong></span><span class="No-Break">.</span></li>
			</ol>
			<h1 id="_idParaDest-214"><a id="_idTextAnchor587"/>Summary</h1>
			<p>Reusing parts of your work is almost always a good idea. In this chapter, we learned how to reuse whole branches of the scene tree as separate scenes. This will come in handy in the following chapters as we are now able to work on the player’s camera movement separately and create collisions in all rocks and walls simultaneously. But that’s for the <span class="No-Break">next c<a id="_idTextAnchor588"/>hapter.</span></p>
			<h1 id="_idParaDest-215"><a id="_idTextAnchor589"/>Quiz time</h1>
			<ul>
				<li>How can you save a branch within the scene tree as a <span class="No-Break">separate scene?</span></li>
				<li>Is it important to organize our scenes, scripts, and assets in the <strong class="bold">FileSystem</strong> <span class="No-Break">area? Why?</span></li>
			</ul>
		</div>
	</body></html>