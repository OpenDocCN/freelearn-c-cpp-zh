<html><head></head><body>
<div id="_idContainer166">
<h1 class="chapter-number" id="_idParaDest-211"><a id="_idTextAnchor211"/><span class="koboSpan" id="kobo.1.1">10</span></h1>
<h1 id="_idParaDest-212"><a id="_idTextAnchor212"/><span class="koboSpan" id="kobo.2.1">Project #6 – Making Your Home Smarter with a Voice Assistant</span></h1>
<p><span class="koboSpan" id="kobo.3.1">This chapter is dedicated</span><a id="_idIndexMarker803"/><span class="koboSpan" id="kobo.4.1"> to smart homes. </span><strong class="bold"><span class="koboSpan" id="kobo.5.1">Smart homes</span></strong><span class="koboSpan" id="kobo.6.1"> is a wide field that aims to automate everything in your home to make your life experience better and more comfortable, for example, smart light systems, smart air conditioning, smart TVs, and so on. </span><span class="koboSpan" id="kobo.6.2">But in this chapter, we will explore how we can build a multi-color smart bulb that is controlled by the </span><strong class="bold"><span class="koboSpan" id="kobo.7.1">Arduino IoT Cloud</span></strong><span class="koboSpan" id="kobo.8.1"> web and mobile dashboard. </span><span class="koboSpan" id="kobo.8.2">We’ll also add the Amazon Alexa voice assistant to control the smart bulb using </span><span class="No-Break"><span class="koboSpan" id="kobo.9.1">voice commands.</span></span></p>
<p><span class="koboSpan" id="kobo.10.1">Here, we will practically</span><a id="_idIndexMarker804"/><span class="koboSpan" id="kobo.11.1"> explore smart homes, picking up the </span><strong class="bold"><span class="koboSpan" id="kobo.12.1">WS2812 RGB LED</span></strong><span class="koboSpan" id="kobo.13.1"> ring and Seeed Studio’s newest, and very small, development board in the XIAO series, which is based on ESP32 with a lot of features. </span><span class="koboSpan" id="kobo.13.2">With the help of the light module, development board, and the Arduino IoT Cloud, we will build a smart </span><span class="No-Break"><span class="koboSpan" id="kobo.14.1">light system.</span></span></p>
<p><span class="koboSpan" id="kobo.15.1">By the end of this chapter, you will have the confidence to build smart home solutions with the help of any open source ESP32/ESP8266 or Arduino series development board using the Arduino IoT Cloud. </span><span class="koboSpan" id="kobo.15.2">In particular, you will learn how easy it is to integrate Amazon Alexa Voice assistant into your smart home projects to make them more convenient for </span><span class="No-Break"><span class="koboSpan" id="kobo.16.1">end users.</span></span></p>
<p><span class="koboSpan" id="kobo.17.1">In this chapter, we’re going to cover the following </span><span class="No-Break"><span class="koboSpan" id="kobo.18.1">main topics:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.19.1">Creating smarter homes </span><span class="No-Break"><span class="koboSpan" id="kobo.20.1">with IoT</span></span></li>
<li><span class="koboSpan" id="kobo.21.1">Essential components – sensors and </span><span class="No-Break"><span class="koboSpan" id="kobo.22.1">development boards</span></span></li>
<li><span class="koboSpan" id="kobo.23.1">Blueprint for your smart home </span><span class="No-Break"><span class="koboSpan" id="kobo.24.1">IoT project</span></span></li>
<li><span class="koboSpan" id="kobo.25.1">Initial setup – Thing, network credentials, cloud variables, </span><span class="No-Break"><span class="koboSpan" id="kobo.26.1">and code</span></span></li>
<li><span class="koboSpan" id="kobo.27.1">User-friendly controls – building web and </span><span class="No-Break"><span class="koboSpan" id="kobo.28.1">mobile dashboards</span></span></li>
<li><span class="koboSpan" id="kobo.29.1">Enhancing controls – integrating the Arduino IoT Cloud with </span><span class="No-Break"><span class="koboSpan" id="kobo.30.1">Amazon Alexa</span></span></li>
</ul>
<h1 id="_idParaDest-213"><a id="_idTextAnchor213"/><span class="koboSpan" id="kobo.31.1">Technical requirements</span></h1>
<p><span class="koboSpan" id="kobo.32.1">The following hardware components are required to complete this </span><span class="No-Break"><span class="koboSpan" id="kobo.33.1">chapter’s exercise:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.34.1">Seeed Studio </span><span class="No-Break"><span class="koboSpan" id="kobo.35.1">XIAO ESP32C3</span></span></li>
<li><span class="koboSpan" id="kobo.36.1">USB type-C cable for </span><span class="No-Break"><span class="koboSpan" id="kobo.37.1">XIAO ESP32C3</span></span></li>
<li><span class="koboSpan" id="kobo.38.1">WS2812 RGB </span><span class="No-Break"><span class="koboSpan" id="kobo.39.1">LED ring</span></span></li>
<li><span class="koboSpan" id="kobo.40.1">Male headers, female headers, and </span><span class="No-Break"><span class="koboSpan" id="kobo.41.1">a veroboard</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.42.1">Jumper cables</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.43.1">Soldering iron</span></span></li>
<li><span class="koboSpan" id="kobo.44.1">Amazon Echo Dot and the Amazon Alexa </span><span class="No-Break"><span class="koboSpan" id="kobo.45.1">mobile app</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.46.1">For coding, we will use the </span><strong class="bold"><span class="koboSpan" id="kobo.47.1">Arduino Web Editor</span></strong><span class="koboSpan" id="kobo.48.1">, which includes a large collection of development boards and sensor libraries, and the Arduino IoT Cloud for the Thing and dashboard setup. </span><span class="koboSpan" id="kobo.48.2">To develop hardware and sensor designs, we need the </span><strong class="bold"><span class="koboSpan" id="kobo.49.1">Fritzing</span></strong><span class="koboSpan" id="kobo.50.1"> desktop software and the </span><strong class="bold"><span class="koboSpan" id="kobo.51.1">Arduino IDE</span></strong><span class="koboSpan" id="kobo.52.1"> for testing the </span><span class="No-Break"><span class="koboSpan" id="kobo.53.1">WS2812 ring.</span></span></p>
<p><span class="koboSpan" id="kobo.54.1">Here, we will use the </span><strong class="bold"><span class="koboSpan" id="kobo.55.1">Amazon Echo Dot</span></strong><span class="koboSpan" id="kobo.56.1"> as a voice assistant for voice commands to control the smart bulb. </span><span class="koboSpan" id="kobo.56.2">If you don’t have an Echo Dot, then you can use the </span><strong class="bold"><span class="koboSpan" id="kobo.57.1">Amazon Alexa</span></strong><span class="koboSpan" id="kobo.58.1"> app for Android/iOS. </span><span class="koboSpan" id="kobo.58.2">The chapter’s code is available in the official GitHub repository for the book by following this </span><span class="No-Break"><span class="koboSpan" id="kobo.59.1">link: </span></span><a href="https://github.com/PacktPublishing/Arduino-IoT-Cloud-for-Developers"><span class="No-Break"><span class="koboSpan" id="kobo.60.1">https://github.com/PacktPublishing/Arduino-IoT-Cloud-for-Developers</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.61.1">.</span></span></p>
<h1 id="_idParaDest-214"><a id="_idTextAnchor214"/><span class="koboSpan" id="kobo.62.1">Creating smarter homes with IoT</span></h1>
<p><strong class="bold"><span class="koboSpan" id="kobo.63.1">Internet of Things</span></strong><span class="koboSpan" id="kobo.64.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.65.1">IoT</span></strong><span class="koboSpan" id="kobo.66.1">) technology plays a crucial role in the development of smart</span><a id="_idIndexMarker805"/><span class="koboSpan" id="kobo.67.1"> homes. </span><span class="koboSpan" id="kobo.67.2">It enables various devices</span><a id="_idIndexMarker806"/><span class="koboSpan" id="kobo.68.1"> and appliances within a home to connect, communicate, and automate tasks for the convenience, comfort, and efficiency of homeowners. </span><span class="koboSpan" id="kobo.68.2">Here are some key aspects of IoT for </span><span class="No-Break"><span class="koboSpan" id="kobo.69.1">smart homes:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.70.1">Connectivity</span></strong><span class="koboSpan" id="kobo.71.1">: IoT devices in a smart home are connected to the internet, allowing them to communicate</span><a id="_idIndexMarker807"/><span class="koboSpan" id="kobo.72.1"> with each other, as well as with the</span><a id="_idIndexMarker808"/><span class="koboSpan" id="kobo.73.1"> homeowner, remotely. </span><span class="koboSpan" id="kobo.73.2">This connectivity facilitates the control, monitoring, and automation of devices from anywhere, using smartphones, tablets, </span><span class="No-Break"><span class="koboSpan" id="kobo.74.1">or computers.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.75.1">Home automation</span></strong><span class="koboSpan" id="kobo.76.1">: IoT enables the automation of various tasks within a smart home. </span><span class="koboSpan" id="kobo.76.2">For example, lights can automatically turn on or off based on occupancy or the time of day. </span><span class="koboSpan" id="kobo.76.3">Thermostats can adjust temperature settings based on the homeowner’s preferences or presence in the house. </span><span class="koboSpan" id="kobo.76.4">IoT-powered automation helps optimize energy usage, enhance security, and simplify </span><span class="No-Break"><span class="koboSpan" id="kobo.77.1">routine activities.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.78.1">Security and surveillance</span></strong><span class="koboSpan" id="kobo.79.1">: IoT devices can enhance the security of a smart home. </span><span class="koboSpan" id="kobo.79.2">Smart locks provide keyless entry and allow remote access control. </span><span class="koboSpan" id="kobo.79.3">Video doorbells enable homeowners to see and communicate with visitors remotely. </span><span class="koboSpan" id="kobo.79.4">Surveillance cameras can be accessed and monitored from anywhere, providing an additional layer </span><span class="No-Break"><span class="koboSpan" id="kobo.80.1">of security.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.81.1">Energy management</span></strong><span class="koboSpan" id="kobo.82.1">: IoT devices help optimize energy consumption within a smart home. </span><span class="koboSpan" id="kobo.82.2">Smart thermostats learn user preferences and adjust temperature settings accordingly, conserving energy when rooms are unoccupied. </span><span class="koboSpan" id="kobo.82.3">Smart plugs and power strips can monitor and control the energy usage of appliances and electronics, helping identify energy-hungry devices and promoting </span><span class="No-Break"><span class="koboSpan" id="kobo.83.1">efficient usage.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.84.1">Voice control</span></strong><span class="koboSpan" id="kobo.85.1">: Voice assistants, such as Amazon Alexa or </span><strong class="bold"><span class="koboSpan" id="kobo.86.1">Google Assistant</span></strong><span class="koboSpan" id="kobo.87.1">, integrated with IoT </span><a id="_idIndexMarker809"/><span class="koboSpan" id="kobo.88.1">devices enable</span><a id="_idIndexMarker810"/><span class="koboSpan" id="kobo.89.1"> hands-free control of various functions in a smart home. </span><span class="koboSpan" id="kobo.89.2">Homeowners can use voice commands to control lights, adjust thermostats, play music, check the weather, and perform other tasks, enhancing convenience </span><span class="No-Break"><span class="koboSpan" id="kobo.90.1">and accessibility.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.91.1">Health and wellness</span></strong><span class="koboSpan" id="kobo.92.1">: IoT devices can contribute to health and wellness within a smart home. </span><span class="koboSpan" id="kobo.92.2">Wearable devices, such as fitness trackers or smartwatches, can integrate with other home devices, such as smart scales or health monitors, to provide comprehensive health data and insights. </span><span class="koboSpan" id="kobo.92.3">This data can be shared with healthcare professionals or used to automate certain </span><span class="No-Break"><span class="koboSpan" id="kobo.93.1">health-related tasks.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.94.1">Appliance control</span></strong><span class="koboSpan" id="kobo.95.1">: IoT enables the remote control and monitoring of various appliances in a smart home. </span><span class="koboSpan" id="kobo.95.2">Refrigerators, ovens, washing machines, and other appliances can be connected to the internet, allowing homeowners to check their status, receive alerts, or control their operation remotely. </span><span class="koboSpan" id="kobo.95.3">This connectivity adds convenience and flexibility to household chores </span><span class="No-Break"><span class="koboSpan" id="kobo.96.1">and management.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.97.1">Integration and interoperability</span></strong><span class="koboSpan" id="kobo.98.1">: A crucial aspect of IoT for smart homes is the integration and interoperability</span><a id="_idIndexMarker811"/><span class="koboSpan" id="kobo.99.1"> of devices</span><a id="_idIndexMarker812"/><span class="koboSpan" id="kobo.100.1"> from different manufacturers. </span><span class="koboSpan" id="kobo.100.2">Standards and protocols, such as </span><strong class="bold"><span class="koboSpan" id="kobo.101.1">Zigbee</span></strong><span class="koboSpan" id="kobo.102.1"> or </span><strong class="bold"><span class="koboSpan" id="kobo.103.1">Z-Wave</span></strong><span class="koboSpan" id="kobo.104.1">, facilitate the seamless connection and communication between devices, ensuring that different IoT products can work together in a </span><span class="No-Break"><span class="koboSpan" id="kobo.105.1">unified ecosystem.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.106.1">It’s important to note that while IoT technology brings numerous benefits to smart homes, it also introduces potential security and privacy risks. </span><span class="koboSpan" id="kobo.106.2">Homeowners should take measures to secure their IoT devices, such as using</span><a id="_idIndexMarker813"/><span class="koboSpan" id="kobo.107.1"> strong passwords, keeping firmware up to date, and ensuring proper network</span><a id="_idIndexMarker814"/> <span class="No-Break"><span class="koboSpan" id="kobo.108.1">security configurations.</span></span></p>
<p><span class="koboSpan" id="kobo.109.1">Here, we have discussed in detail how IoT is reshaping the lives of human beings in homes and offices. </span><span class="koboSpan" id="kobo.109.2">Next, we are going to talk about the hardware and components that we require to carry on with this </span><span class="No-Break"><span class="koboSpan" id="kobo.110.1">chapter’s project.</span></span></p>
<h1 id="_idParaDest-215"><a id="_idTextAnchor215"/><span class="koboSpan" id="kobo.111.1">Essential components – sensors and development boards</span></h1>
<p><span class="koboSpan" id="kobo.112.1">In the ESP32 series, we have a wide</span><a id="_idIndexMarker815"/><span class="koboSpan" id="kobo.113.1"> collection of development</span><a id="_idIndexMarker816"/><span class="koboSpan" id="kobo.114.1"> boards, which vary in size and pins. </span><span class="koboSpan" id="kobo.114.2">In this chapter, we are using Seeed Studio’s latest development board, the </span><strong class="bold"><span class="koboSpan" id="kobo.115.1">XIAO ESP32C3</span></strong><span class="koboSpan" id="kobo.116.1">, as it’s very compact and smaller in size</span><a id="_idIndexMarker817"/><span class="koboSpan" id="kobo.117.1"> than other boards, and of course, cheaper and is suitable for 5V as well as 3.3V. </span><span class="koboSpan" id="kobo.117.2">The following figure is the pin layout diagram of </span><span class="No-Break"><span class="koboSpan" id="kobo.118.1">XIAO ESP32C3.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer152">
<span class="koboSpan" id="kobo.119.1"><img alt="Figure 10.1 – XIAO ESP32C pinout diagram" src="image/B19752_10_01.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.120.1">Figure 10.1 – XIAO ESP32C pinout diagram</span></p>
<p><span class="koboSpan" id="kobo.121.1">XIAO ESP32C provides multiple pins for digital input/output. </span><span class="koboSpan" id="kobo.121.2">In the previous ESP series board, we found only one analog pin, but on this development board, we have four analog pins, which removes the biggest hurdle while developing a solution that uses multiple analog pins. </span><span class="koboSpan" id="kobo.121.3">With previous ESP series boards, we used ADS1115/ADS1015 for extra analog pins, so this development board will save us some bucks as we will get four analog pins by default on the </span><span class="No-Break"><span class="koboSpan" id="kobo.122.1">development board.</span></span></p>
<p><span class="koboSpan" id="kobo.123.1">Besides all those features, XIAO</span><a id="_idIndexMarker818"/><span class="koboSpan" id="kobo.124.1"> provides a built-in battery charge module and the board</span><a id="_idIndexMarker819"/><span class="koboSpan" id="kobo.125.1"> is optimized for power consumption, which helps to use this board as a wearable device. </span><span class="koboSpan" id="kobo.125.2">For connectivity, there</span><a id="_idIndexMarker820"/><span class="koboSpan" id="kobo.126.1"> are both Wi-Fi and Bluetooth options available. </span><span class="koboSpan" id="kobo.126.2">It also supports </span><strong class="bold"><span class="koboSpan" id="kobo.127.1">Bluetooth Low Energy</span></strong><span class="koboSpan" id="kobo.128.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.129.1">BLE 5</span></strong><span class="koboSpan" id="kobo.130.1">), which is more specific to IoT</span><a id="_idIndexMarker821"/><span class="koboSpan" id="kobo.131.1"> use cases. </span><span class="koboSpan" id="kobo.131.2">For further details, please </span><span class="No-Break"><span class="koboSpan" id="kobo.132.1">visit </span></span><a href="https://wiki.seeedstudio.com/XIAO_ESP32C3_Getting_Started/"><span class="No-Break"><span class="koboSpan" id="kobo.133.1">https://wiki.seeedstudio.com/XIAO_ESP32C3_Getting_Started/</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.134.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.135.1">In the current project, we need one digital pin for the WS2812 RGB LED ring. </span><span class="koboSpan" id="kobo.135.2">One of the good features of the development board is that we have a 5V power pin, which is not available on most of the ESP32 series </span><span class="No-Break"><span class="koboSpan" id="kobo.136.1">development boards.</span></span></p>
<p><span class="koboSpan" id="kobo.137.1">We are using the WS2812 16-pixel RGB ring but it comes in different pixels and shapes, such as a stick, matrix, and strip. </span><span class="koboSpan" id="kobo.137.2">For the lamp, we prefer the ring shape, but you guys can choose according to your preferences. </span><span class="koboSpan" id="kobo.137.3">WS2812 also comes in long strip cables for room decoration and computer tables – especially for gamers, hotels, and so on. </span><span class="koboSpan" id="kobo.137.4">There are different vendors who provide the WS2812 module, but we are using a WS2812 that we purchased from AliExpress and it’s working perfectly. </span><span class="koboSpan" id="kobo.137.5">You can buy it from Amazon, AdaFruit, SparkFun, or </span><span class="No-Break"><span class="koboSpan" id="kobo.138.1">from AliExpress.</span></span></p>
<p><span class="koboSpan" id="kobo.139.1">WS2812 comes</span><a id="_idIndexMarker822"/><span class="koboSpan" id="kobo.140.1"> with RGB color, and it also allows you to control the brightness</span><a id="_idIndexMarker823"/><span class="koboSpan" id="kobo.141.1"> of the module, which varies from 1–100%. </span><span class="koboSpan" id="kobo.141.2">It also allows you to control every single pixel of the LED – either on/off, or any color, which provides a broad range of use cases to develop interesting solutions and prototypes. </span><span class="koboSpan" id="kobo.141.3">The WS2812 RGB LED comes in different sizes and shapes. </span><span class="koboSpan" id="kobo.141.4">The following figure shows the RGB LED ring with both the front and </span><span class="No-Break"><span class="koboSpan" id="kobo.142.1">back sides.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer153">
<span class="koboSpan" id="kobo.143.1"><img alt="Figure 10.2 – WS2812 RGB LED ring and pinout diagram" src="image/B19752_10_02.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.144.1">Figure 10.2 – WS2812 RGB LED ring and pinout diagram</span></p>
<p><span class="koboSpan" id="kobo.145.1">The preceding diagram depicts the pinout layout of the WS2812 RGB ring. </span><span class="koboSpan" id="kobo.145.2">The complete configuration of the pin connections of WS2812 with XIAO ESP32C3 is shown in </span><em class="italic"><span class="koboSpan" id="kobo.146.1">Table 10.1</span></em><span class="koboSpan" id="kobo.147.1">. </span><em class="italic"><span class="koboSpan" id="kobo.148.1">Pin #1</span></em><span class="koboSpan" id="kobo.149.1"> is a GND pin that connects with the onboard GND pin of XIAO ESP32C3. </span><em class="italic"><span class="koboSpan" id="kobo.150.1">Pin #2</span></em><span class="koboSpan" id="kobo.151.1"> is a Power 5V DC pin that works with both 3.3V and 5V. </span><em class="italic"><span class="koboSpan" id="kobo.152.1">Pin #3</span></em><span class="koboSpan" id="kobo.153.1"> is </span><strong class="bold"><span class="koboSpan" id="kobo.154.1">Data Input</span></strong><span class="koboSpan" id="kobo.155.1">, which connects with any digital pin. </span><em class="italic"><span class="koboSpan" id="kobo.156.1">Pin #4</span></em><span class="koboSpan" id="kobo.157.1"> is </span><strong class="bold"><span class="koboSpan" id="kobo.158.1">Data Out</span></strong><span class="koboSpan" id="kobo.159.1">, which is only used if you want to extend the WS2812 ring with another ring or stick – this pin will connect to the other ring’s data input pin as an extension. </span><span class="koboSpan" id="kobo.159.2">Here, I am connecting </span><strong class="bold"><span class="koboSpan" id="kobo.160.1">Data Input</span></strong><span class="koboSpan" id="kobo.161.1"> with </span><em class="italic"><span class="koboSpan" id="kobo.162.1">Pin #D3</span></em><span class="koboSpan" id="kobo.163.1"> of the board. </span><span class="koboSpan" id="kobo.163.2">You can solder the male headers with WS2812 or directly solder the cables without any </span><span class="No-Break"><span class="koboSpan" id="kobo.164.1">header pins.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.165.1">Important note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.166.1">The WS2812 module works perfectly, but still it’s necessary to verify that all pixels of the ring/strip are working perfectly. </span><span class="koboSpan" id="kobo.166.2">In my case, my last pixel is </span><span class="No-Break"><span class="koboSpan" id="kobo.167.1">not working.</span></span></p>
<p><span class="koboSpan" id="kobo.168.1">In the current section, we have</span><a id="_idIndexMarker824"/><span class="koboSpan" id="kobo.169.1"> discussed the XIAO ESP32C3 and WS2812 RGH LED</span><a id="_idIndexMarker825"/><span class="koboSpan" id="kobo.170.1"> ring, as well as its pins. </span><span class="koboSpan" id="kobo.170.2">Next, we are going to discuss the project architecture in detail, which includes the project schematics </span><span class="No-Break"><span class="koboSpan" id="kobo.171.1">and assembly.</span></span></p>
<h1 id="_idParaDest-216"><a id="_idTextAnchor216"/><span class="koboSpan" id="kobo.172.1">Blueprint for your smart home IoT project</span></h1>
<p><span class="koboSpan" id="kobo.173.1">In the preceding sections, we discussed</span><a id="_idIndexMarker826"/><span class="koboSpan" id="kobo.174.1"> the sensors and development board in detail. </span><span class="koboSpan" id="kobo.174.2">Now, it’s time to cook the recipe. </span><span class="koboSpan" id="kobo.174.3">In hardware development, before starting to work with sensors and development boards, we need to develop the design concepts to get a better understanding of how things will be connected. </span><span class="koboSpan" id="kobo.174.4">There is a lot of software available to design and develop design concepts regarding electronics projects, but we are going to </span><span class="No-Break"><span class="koboSpan" id="kobo.175.1">use Fritzing.</span></span></p>
<p><span class="koboSpan" id="kobo.176.1">In the following two subsections, first, we will talk about the schematics and design of a project and explain how to connect the pins of the development board with soldering. </span><span class="koboSpan" id="kobo.176.2">Next, we will do some testing of the WS2812 to check all the colors and pixels </span><span class="No-Break"><span class="koboSpan" id="kobo.177.1">are working.</span></span></p>
<h2 id="_idParaDest-217"><a id="_idTextAnchor217"/><span class="koboSpan" id="kobo.178.1">Schematic design and assembly</span></h2>
<p><span class="koboSpan" id="kobo.179.1">The purpose of the design</span><a id="_idIndexMarker827"/><span class="koboSpan" id="kobo.180.1"> is to clearly understand how sensors will connect</span><a id="_idIndexMarker828"/><span class="koboSpan" id="kobo.181.1"> with the development board. </span><span class="koboSpan" id="kobo.181.2">It helps engineers to develop a prototype on a breadboard or on a veroboard by using these design files. </span><span class="koboSpan" id="kobo.181.3">Another major benefit of designing is that Fritzing builds hardware schematics and a </span><strong class="bold"><span class="koboSpan" id="kobo.182.1">Printed Circuit Board</span></strong><span class="koboSpan" id="kobo.183.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.184.1">PCB</span></strong><span class="koboSpan" id="kobo.185.1">) design in the background according</span><a id="_idIndexMarker829"/><span class="koboSpan" id="kobo.186.1"> to your design, which could be adjusted by designers according to system requirements. </span><span class="koboSpan" id="kobo.186.2">The complete connection diagram of the XIAO ESP32C3 and WS2812 RGB LED ring is shown in the </span><span class="No-Break"><span class="koboSpan" id="kobo.187.1">following figure.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer154">
<span class="koboSpan" id="kobo.188.1"><img alt="Figure 10.3 – XIAO ESP32C and WS2812 system design" src="image/B19752_10_03.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.189.1">Figure 10.3 – XIAO ESP32C and WS2812 system design</span></p>
<p><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.190.1">Figure 10</span></em></span><em class="italic"><span class="koboSpan" id="kobo.191.1">.3</span></em><span class="koboSpan" id="kobo.192.1"> illustrates the pin diagram</span><a id="_idIndexMarker830"/><span class="koboSpan" id="kobo.193.1"> of the whole setup, but for easy</span><a id="_idIndexMarker831"/><span class="koboSpan" id="kobo.194.1"> guidance, we also created </span><em class="italic"><span class="koboSpan" id="kobo.195.1">Table 10.1</span></em><span class="koboSpan" id="kobo.196.1">, which explains, in a simple way, how to connect the pins of WS2812 to </span><span class="No-Break"><span class="koboSpan" id="kobo.197.1">XIAO ESP32C.</span></span></p>
<table class="No-Table-Style _idGenTablePara-1" id="table001-6">
<colgroup>
<col/>
<col/>
</colgroup>
<tbody>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.198.1">XIAO ESP32C</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.199.1">WS2812 Ring</span></strong></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.200.1">A3</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.201.1">Data Input</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.202.1">5V</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.203.1">Power </span><span class="No-Break"><span class="koboSpan" id="kobo.204.1">5V DC</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.205.1">GND</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.206.1">Power </span><span class="No-Break"><span class="koboSpan" id="kobo.207.1">Signal Ground</span></span></p>
</td>
</tr>
</tbody>
</table>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.208.1">Table 10.1 – XIAO ESP32C and WS2812 connection</span></p>
<p><span class="koboSpan" id="kobo.209.1">The preceding design and table provide a full overview of how you can connect the sensors to the development board. </span><span class="koboSpan" id="kobo.209.2">According to the design, we have common 5V and GND pins from the XIAO ESP32C3 board to the WS2812 module. </span><span class="koboSpan" id="kobo.209.3">WS2812 is a digital module so we connected its </span><strong class="bold"><span class="koboSpan" id="kobo.210.1">Data Input</span></strong><span class="koboSpan" id="kobo.211.1"> pin to the D3 pin of the development board. </span><span class="koboSpan" id="kobo.211.2">The following figure shows the final prototype of the smart bulb on </span><span class="No-Break"><span class="koboSpan" id="kobo.212.1">the veroboard.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer155">
<span class="koboSpan" id="kobo.213.1"><img alt="Figure 10.4 – Final prototype" src="image/B19752_10_04.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.214.1">Figure 10.4 – Final prototype</span></p>
<p><span class="koboSpan" id="kobo.215.1">After soldering cables to the module and the male header to the XIAO ESP32C3, connect the pins according to the schematic diagram. </span><span class="koboSpan" id="kobo.215.2">There is only one module, so there is no requirement for a veroboard. </span><span class="koboSpan" id="kobo.215.3">But I am developing</span><a id="_idIndexMarker832"/><span class="koboSpan" id="kobo.216.1"> a proper prototype</span><a id="_idIndexMarker833"/><span class="koboSpan" id="kobo.217.1"> this time – that’s why I used a Veroboard. </span><span class="koboSpan" id="kobo.217.2">Now it’s time to verify the colors and pixels of the WS2812 </span><span class="No-Break"><span class="koboSpan" id="kobo.218.1">using ESP32C3.</span></span></p>
<h2 id="_idParaDest-218"><a id="_idTextAnchor218"/><span class="koboSpan" id="kobo.219.1">Testing the WS2812 with the Arduino IDE</span></h2>
<p><span class="koboSpan" id="kobo.220.1">To install the ESP32 series development board</span><a id="_idIndexMarker834"/><span class="koboSpan" id="kobo.221.1"> in the Arduino IDE, first, add the board’s definition</span><a id="_idIndexMarker835"/><span class="koboSpan" id="kobo.222.1"> file in the preferences. </span><span class="koboSpan" id="kobo.222.2">To proceed further, follow </span><span class="No-Break"><span class="koboSpan" id="kobo.223.1">these steps:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.224.1">Navigate to </span><strong class="bold"><span class="koboSpan" id="kobo.225.1">File</span></strong><span class="koboSpan" id="kobo.226.1"> &gt; </span><strong class="bold"><span class="koboSpan" id="kobo.227.1">Preferences</span></strong><span class="koboSpan" id="kobo.228.1"> and fill </span><strong class="bold"><span class="koboSpan" id="kobo.229.1">Additional Boards Manager URLs</span></strong><span class="koboSpan" id="kobo.230.1"> with the URL </span><a href="https://raw.githubusercontent.com/espressif/arduino-esp32/gh-pages/package_esp32_dev_index.json"><span class="koboSpan" id="kobo.231.1">https://raw.githubusercontent.com/espressif/arduino-esp32/gh-pages/package_esp32_dev_index.json</span></a><span class="koboSpan" id="kobo.232.1">, as shown in the </span><span class="No-Break"><span class="koboSpan" id="kobo.233.1">following figure.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer156">
<span class="koboSpan" id="kobo.234.1"><img alt="Figure 10.5 – ESP32 board information in the Arduino IDE" src="image/B19752_10_05.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.235.1">Figure 10.5 – ESP32 board information in the Arduino IDE</span></p>
<ol>
<li value="2"><span class="koboSpan" id="kobo.236.1">Later on, navigate</span><a id="_idIndexMarker836"/><span class="koboSpan" id="kobo.237.1"> to </span><strong class="bold"><span class="koboSpan" id="kobo.238.1">Tools</span></strong><span class="koboSpan" id="kobo.239.1"> &gt; </span><strong class="bold"><span class="koboSpan" id="kobo.240.1">Board</span></strong><span class="koboSpan" id="kobo.241.1"> &gt; </span><strong class="bold"><span class="koboSpan" id="kobo.242.1">Boards Manager...</span></strong><span class="koboSpan" id="kobo.243.1">, type the</span><a id="_idIndexMarker837"/><span class="koboSpan" id="kobo.244.1"> keyword </span><strong class="source-inline"><span class="koboSpan" id="kobo.245.1">esp32</span></strong><span class="koboSpan" id="kobo.246.1"> in the search box, select the latest version of </span><strong class="bold"><span class="koboSpan" id="kobo.247.1">esp32</span></strong><span class="koboSpan" id="kobo.248.1">, and install it, as shown in the </span><span class="No-Break"><span class="koboSpan" id="kobo.249.1">following figure.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer157">
<span class="koboSpan" id="kobo.250.1"><img alt="Figure 10.6 – ESP32 series board installation in the Arduino IDE" src="image/B19752_10_06.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.251.1">Figure 10.6 – ESP32 series board installation in the Arduino IDE</span></p>
<ol>
<li value="3"><span class="koboSpan" id="kobo.252.1">Finally, select the board, navigate</span><a id="_idIndexMarker838"/><span class="koboSpan" id="kobo.253.1"> to </span><strong class="bold"><span class="koboSpan" id="kobo.254.1">Tools</span></strong><span class="koboSpan" id="kobo.255.1"> &gt; </span><strong class="bold"><span class="koboSpan" id="kobo.256.1">Board</span></strong><span class="koboSpan" id="kobo.257.1"> &gt; </span><strong class="bold"><span class="koboSpan" id="kobo.258.1">ESP32 Arduino</span></strong><span class="koboSpan" id="kobo.259.1">, and select </span><strong class="bold"><span class="koboSpan" id="kobo.260.1">XIAO_ESP32C3</span></strong><span class="koboSpan" id="kobo.261.1">. </span><span class="koboSpan" id="kobo.261.2">The list of boards</span><a id="_idIndexMarker839"/><span class="koboSpan" id="kobo.262.1"> is a little long and you need to scroll to the bottom, as shown in the </span><span class="No-Break"><span class="koboSpan" id="kobo.263.1">following figure.</span></span><div class="IMG---Figure" id="_idContainer158"><span class="koboSpan" id="kobo.264.1"><img alt="" role="presentation" src="image/B19752_10_07.jpg"/></span></div></li>
</ol>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"> </p>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.265.1">Figure 10.7 – XIAO ESP32C3 board selection in the Arduino IDE</span></p>
<p><span class="koboSpan" id="kobo.266.1">It’s time to install the WS2812 library. </span><span class="koboSpan" id="kobo.266.2">Navigate to </span><strong class="bold"><span class="koboSpan" id="kobo.267.1">Sketch</span></strong><span class="koboSpan" id="kobo.268.1"> &gt; </span><strong class="bold"><span class="koboSpan" id="kobo.269.1">Include Library</span></strong><span class="koboSpan" id="kobo.270.1"> &gt; </span><strong class="bold"><span class="koboSpan" id="kobo.271.1">Manage Libraries</span></strong><span class="koboSpan" id="kobo.272.1">. </span><span class="koboSpan" id="kobo.272.2">Type </span><strong class="source-inline"><span class="koboSpan" id="kobo.273.1">Adafruit neopixel</span></strong><span class="koboSpan" id="kobo.274.1"> in the search bar. </span><span class="koboSpan" id="kobo.274.2">Here, you will get different libraries, but you need to install the specific library that matches the </span><span class="No-Break"><span class="koboSpan" id="kobo.275.1">search query.</span></span></p>
<p><span class="koboSpan" id="kobo.276.1">Now we are ready to proceed</span><a id="_idIndexMarker840"/><span class="koboSpan" id="kobo.277.1"> with the testing </span><a id="_idIndexMarker841"/><span class="koboSpan" id="kobo.278.1">steps. </span><span class="koboSpan" id="kobo.278.2">Download the code from the official GitHub repository for the book, navigate to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.279.1">WS2812_Testing</span></strong><span class="koboSpan" id="kobo.280.1"> folder, and open up </span><span class="No-Break"><span class="koboSpan" id="kobo.281.1">the code:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.282.1">
#include &lt;Adafruit_NeoPixel.h&gt;
#define LED_PIN    D3
// How many NeoPixels are attached to the Arduino?
</span><span class="koboSpan" id="kobo.282.2">#define LED_COUNT 16
// Declare our NeoPixel strip object:
Adafruit_NeoPixel strip(LED_COUNT, LED_PIN, NEO_GRB + NEO_KHZ800);
void setup() {
  strip.begin();           // INITIALIZE NeoPixel strip object (REQUIRED)
  strip.show();            // Turn OFF all pixels ASAP
  strip.setBrightness(50); // Set BRIGHTNESS to about 1/5 (max = 255)
}</span></pre> <p><span class="koboSpan" id="kobo.283.1">Change the </span><strong class="source-inline"><span class="koboSpan" id="kobo.284.1">LED_PIN</span></strong><span class="koboSpan" id="kobo.285.1"> constant to </span><strong class="source-inline"><span class="koboSpan" id="kobo.286.1">D3</span></strong><span class="koboSpan" id="kobo.287.1"> or </span><strong class="source-inline"><span class="koboSpan" id="kobo.288.1">D5</span></strong><span class="koboSpan" id="kobo.289.1">. </span><span class="koboSpan" id="kobo.289.2">Next, assign the number of pixels to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.290.1">LED_COUNT</span></strong><span class="koboSpan" id="kobo.291.1"> constant. </span><span class="koboSpan" id="kobo.291.2">Right now, I have 16 pixels in the WS2812 – that’s why I am inserting </span><strong class="source-inline"><span class="koboSpan" id="kobo.292.1">16</span></strong><span class="koboSpan" id="kobo.293.1">. </span><span class="koboSpan" id="kobo.293.2">After making modifications, upload the code to the board. </span><span class="koboSpan" id="kobo.293.3">Later, you will see the color white on the LED and a moving animation in a circular form. </span><span class="koboSpan" id="kobo.293.4">In the </span><strong class="source-inline"><span class="koboSpan" id="kobo.294.1">setup()</span></strong><span class="koboSpan" id="kobo.295.1"> method, we initialized </span><strong class="source-inline"><span class="koboSpan" id="kobo.296.1">NeoPixel strip</span></strong><span class="koboSpan" id="kobo.297.1"> and set the brightness </span><span class="No-Break"><span class="koboSpan" id="kobo.298.1">to 50%:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.299.1">
// loop() function -- runs repeatedly as long as board is on ---------------
void loop() {
  for(int i=0; i&lt;LED_COUNT+1; i++){
    strip.setBrightness(50);
    strip.setPixelColor(i, strip.Color(127+i, 127, 127)); //  Set pixel's color (in RAM)
    strip.show();
    delay(200);
  }
    for(int i=0; i&lt;LED_COUNT+1; i++){
    strip.setBrightness(0);
    strip.setPixelColor(i, strip.Color(0, 0, 0)); //  Set pixel's color (in RAM)
    strip.show();
  }
}</span></pre> <p><span class="koboSpan" id="kobo.300.1">Later, in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.301.1">loop()</span></strong><span class="koboSpan" id="kobo.302.1"> method, there</span><a id="_idIndexMarker842"/><span class="koboSpan" id="kobo.303.1"> are two loops. </span><span class="koboSpan" id="kobo.303.2">The first loop</span><a id="_idIndexMarker843"/><span class="koboSpan" id="kobo.304.1"> is used to assign the white color to each pixel and turn on the pixel according to the loop value, with a delay of 200 milliseconds, while in the second loop, we turn off all the pixels one by one by changing the brightness to </span><strong class="source-inline"><span class="koboSpan" id="kobo.305.1">0</span></strong><span class="koboSpan" id="kobo.306.1"> and RGB colors </span><span class="No-Break"><span class="koboSpan" id="kobo.307.1">to </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.308.1">0</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.309.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.310.1">In this section, we have assembled </span><a id="_idIndexMarker844"/><span class="koboSpan" id="kobo.311.1">the hardware component on the veroboard and used the code to verify that the WS2812 RGB LED</span><a id="_idIndexMarker845"/><span class="koboSpan" id="kobo.312.1"> is working. </span><span class="koboSpan" id="kobo.312.2">Next, we will set up the Thing and cloud variables in the Arduino IoT Cloud to make our </span><span class="No-Break"><span class="koboSpan" id="kobo.313.1">prototype live.</span></span></p>
<h1 id="_idParaDest-219"><a id="_idTextAnchor219"/><span class="koboSpan" id="kobo.314.1">Initial setup – Thing, network credentials, cloud variables, and code</span></h1>
<p><span class="koboSpan" id="kobo.315.1">After setting up the hardware, it’s time to set up Thing in the Arduino IoT Cloud. </span><span class="koboSpan" id="kobo.315.2">For this project, we need one cloud variable to control the LED brightness and color, and turn on/off the WS2812 ring, but I am using three different cloud variables so you will get an idea of when and why we need to use these cloud variables, and every variable connects with a specific widget. </span><span class="koboSpan" id="kobo.315.3">The network settings</span><a id="_idIndexMarker846"/><span class="koboSpan" id="kobo.316.1"> will be different from Arduino development boards due to using ESP </span><span class="No-Break"><span class="koboSpan" id="kobo.317.1">series board.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer159">
<span class="koboSpan" id="kobo.318.1"><img alt="Figure 10.8 – Air quality monitoring system Thing setup" src="image/B19752_10_08.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.319.1">Figure 10.8 – Air quality monitoring system Thing setup</span></p>
<p><span class="koboSpan" id="kobo.320.1">Set up a new </span><strong class="bold"><span class="koboSpan" id="kobo.321.1">Thing</span></strong><span class="koboSpan" id="kobo.322.1"> with the name </span><strong class="source-inline"><span class="koboSpan" id="kobo.323.1">Voice Controlled Smart Lamp</span></strong><span class="koboSpan" id="kobo.324.1"> and follow these steps</span><a id="_idIndexMarker847"/><span class="koboSpan" id="kobo.325.1"> to create variables, associate a device and network configuration, and finally, write </span><span class="No-Break"><span class="koboSpan" id="kobo.326.1">the code:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.327.1">Firstly, we need to set up three cloud variables for the WS2812. </span><span class="koboSpan" id="kobo.327.2">Complete details regarding cloud variables are available in the </span><span class="No-Break"><span class="koboSpan" id="kobo.328.1">following section.</span></span></li>
<li><span class="koboSpan" id="kobo.329.1">After that, we need to associate the device with the Thing. </span><span class="koboSpan" id="kobo.329.2">In the current project, we are using the XIAO ESP32C3, so the wizard will be different than for Arduino boards. </span><span class="koboSpan" id="kobo.329.3">The complete details are available in the </span><em class="italic"><span class="koboSpan" id="kobo.330.1">Associating a </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.331.1">device</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.332.1"> section.</span></span></li>
<li><span class="koboSpan" id="kobo.333.1">Finally, we need to set up the network configuration for the device, but this time we need to provide a security key for ESP series boards to make the connection secure. </span><span class="koboSpan" id="kobo.333.2">Arduino-compatible boards are configured by the Arduino IoT Cloud automatically during the device </span><span class="No-Break"><span class="koboSpan" id="kobo.334.1">setup wizard.</span></span></li>
</ol>
<h2 id="_idParaDest-220"><a id="_idTextAnchor220"/><span class="koboSpan" id="kobo.335.1">Cloud variables</span></h2>
<p><span class="koboSpan" id="kobo.336.1">The following table provides all the properties</span><a id="_idIndexMarker848"/><span class="koboSpan" id="kobo.337.1"> of the variables that we need to use during cloud variable creation. </span><span class="koboSpan" id="kobo.337.2">For the WS2812, we can use the integer and bool data types, which creates a lot of mess, but thanks to the Arduino IoT Cloud’s extended group of variables, we have the </span><strong class="bold"><span class="koboSpan" id="kobo.338.1">Dimmed light</span></strong><span class="koboSpan" id="kobo.339.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.340.1">Color</span></strong><span class="koboSpan" id="kobo.341.1">, and </span><strong class="bold"><span class="koboSpan" id="kobo.342.1">Colored Light</span></strong><span class="koboSpan" id="kobo.343.1"> type variables. </span><span class="koboSpan" id="kobo.343.2">Next, make sure the same variables are declared as shown in </span><em class="italic"><span class="koboSpan" id="kobo.344.1">Table 10.2</span></em><span class="koboSpan" id="kobo.345.1">, otherwise, you’ll need to modify the example code according to </span><span class="No-Break"><span class="koboSpan" id="kobo.346.1">your naming.</span></span></p>
<p><span class="koboSpan" id="kobo.347.1">Here, I made the permission read and write, as this time we will send commands from the cloud dashboard or voice assistant, so it’s mandatory to give cloud variables permission to read </span><span class="No-Break"><span class="koboSpan" id="kobo.348.1">and write.</span></span></p>
<table class="No-Table-Style _idGenTablePara-1" id="table002-4">
<colgroup>
<col/>
<col/>
<col/>
<col/>
<col/>
<col/>
</colgroup>
<tbody>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.349.1">S#</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.350.1">Variable Name</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.351.1">Variable Type</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.352.1">Declaration</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.353.1">Permission</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><strong class="bold"><span class="koboSpan" id="kobo.354.1">Update </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.355.1">Policy</span></strong></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.356.1">1</span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.357.1">LightBrightness</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.358.1">Dimmed light</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.359.1">lightBrightness</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.360.1">Read </span><span class="No-Break"><span class="koboSpan" id="kobo.361.1">and write</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.362.1">On change</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.363.1">2</span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.364.1">RGBLightColor</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.365.1">Color</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.366.1">rGBLightColor</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.367.1">Read </span><span class="No-Break"><span class="koboSpan" id="kobo.368.1">and write</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.369.1">On change</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.370.1">3</span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.371.1">TableLight</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.372.1">Colored Light</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.373.1">tableLight</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.374.1">Read </span><span class="No-Break"><span class="koboSpan" id="kobo.375.1">and write</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.376.1">On change</span></span></p>
</td>
</tr>
</tbody>
</table>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.377.1">Table 10.2 – Cloud variables properties table</span></p>
<p><span class="koboSpan" id="kobo.378.1">Previously, I mentioned that we only need one cloud variable, but I am using three different cloud variables and will explain their usage. </span><span class="koboSpan" id="kobo.378.2">If I start from the </span><strong class="bold"><span class="koboSpan" id="kobo.379.1">Dimmed light</span></strong><span class="koboSpan" id="kobo.380.1"> type cloud variable, then it has only two options to control the WS2812 – one is brightness and the second is the on/off switch. </span><span class="koboSpan" id="kobo.380.2">The </span><strong class="bold"><span class="koboSpan" id="kobo.381.1">Color</span></strong><span class="koboSpan" id="kobo.382.1"> type cloud variable, which is </span><strong class="source-inline"><span class="koboSpan" id="kobo.383.1">RGBLightColor</span></strong><span class="koboSpan" id="kobo.384.1">, has only one option regarding the color change. </span><span class="koboSpan" id="kobo.384.2">But if we come to the </span><strong class="bold"><span class="koboSpan" id="kobo.385.1">Colored Light</span></strong><span class="koboSpan" id="kobo.386.1"> type cloud variable, then it provides all three options: brightness, color, and an on/off switch. </span><span class="koboSpan" id="kobo.386.2">This cloud variable is also compatible with Amazon Alexa and that type cloud variable will be represented as a device in the Amazon Alexa Smart Home skills portal, which is discussed</span><a id="_idIndexMarker849"/><span class="koboSpan" id="kobo.387.1"> in the </span><em class="italic"><span class="koboSpan" id="kobo.388.1">Enhancing control – Integrating Arduino IoT Cloud with Amazon </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.389.1">Alexa</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.390.1"> section.</span></span></p>
<h2 id="_idParaDest-221"><a id="_idTextAnchor221"/><span class="koboSpan" id="kobo.391.1">Associating a device</span></h2>
<p><span class="koboSpan" id="kobo.392.1">After variable</span><a id="_idIndexMarker850"/><span class="koboSpan" id="kobo.393.1"> creation, it’s time to add a device associated with the Thing. </span><span class="koboSpan" id="kobo.393.2">Before adding</span><a id="_idIndexMarker851"/><span class="koboSpan" id="kobo.394.1"> the device, connect the development board to the computer and open the </span><strong class="bold"><span class="koboSpan" id="kobo.395.1">Arduino Create Agent</span></strong><span class="koboSpan" id="kobo.396.1"> application. </span><span class="koboSpan" id="kobo.396.2">The following figure shows how to select the ESP32 and then the XIAO_ESP32C3 development board in </span><span class="No-Break"><span class="koboSpan" id="kobo.397.1">the popup.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer160">
<span class="koboSpan" id="kobo.398.1"><img alt="Figure 10.9 – Device selection wizard" src="image/B19752_10_09.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.399.1">Figure 10.9 – Device selection wizard</span></p>
<p><span class="koboSpan" id="kobo.400.1">Follow these steps to associate</span><a id="_idIndexMarker852"/><span class="koboSpan" id="kobo.401.1"> the XIAO ESP32C3 to </span><span class="No-Break"><span class="koboSpan" id="kobo.402.1">the Thing:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.403.1">Click on the </span><strong class="bold"><span class="koboSpan" id="kobo.404.1">Select Device</span></strong><span class="koboSpan" id="kobo.405.1"> button under the </span><strong class="bold"><span class="koboSpan" id="kobo.406.1">Associated Device</span></strong><span class="koboSpan" id="kobo.407.1"> section on the Thing page shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.408.1">Figure 10</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.409.1">.8</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.410.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.411.1">A popup will appear where you can see all the devices that are already available. </span><span class="koboSpan" id="kobo.411.2">If you have already added your XIAO ESP32C3, select it. </span><span class="koboSpan" id="kobo.411.3">Otherwise, click on </span><strong class="bold"><span class="koboSpan" id="kobo.412.1">SET UP </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.413.1">NEW DEVICE</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.414.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.415.1">Next, click on the </span><strong class="bold"><span class="koboSpan" id="kobo.416.1">Third party </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.417.1">device</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.418.1"> option.</span></span></li>
<li><span class="koboSpan" id="kobo.419.1">Select </span><strong class="bold"><span class="koboSpan" id="kobo.420.1">ESP32</span></strong><span class="koboSpan" id="kobo.421.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.422.1">XIAO_ESP32C3</span></strong><span class="koboSpan" id="kobo.423.1"> from the dropdown and click on the </span><strong class="bold"><span class="koboSpan" id="kobo.424.1">CONTINUE</span></strong><span class="koboSpan" id="kobo.425.1"> button shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.426.1">Figure 10</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.427.1">.9</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.428.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.429.1">Fill in </span><strong class="bold"><span class="koboSpan" id="kobo.430.1">Device Name</span></strong><span class="koboSpan" id="kobo.431.1"> and click on the </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.432.1">Next</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.433.1"> button.</span></span></li>
<li><span class="koboSpan" id="kobo.434.1">In the final wizard, </span><strong class="bold"><span class="koboSpan" id="kobo.435.1">Device ID</span></strong><span class="koboSpan" id="kobo.436.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.437.1">Secret Key</span></strong><span class="koboSpan" id="kobo.438.1"> will be displayed. </span><span class="koboSpan" id="kobo.438.2">Copy the secret key to a safe</span><a id="_idIndexMarker853"/><span class="koboSpan" id="kobo.439.1"> place as it will be used during the </span><span class="No-Break"><span class="koboSpan" id="kobo.440.1">network configuration.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.441.1">Now, let’s move to the </span><span class="No-Break"><span class="koboSpan" id="kobo.442.1">network configuration.</span></span></p>
<h2 id="_idParaDest-222"><a id="_idTextAnchor222"/><span class="koboSpan" id="kobo.443.1">Network</span></h2>
<p><span class="koboSpan" id="kobo.444.1">After associating</span><a id="_idIndexMarker854"/><span class="koboSpan" id="kobo.445.1"> the device with the Thing, it is time to configure the Wi-Fi settings for device communication. </span><span class="koboSpan" id="kobo.445.2">The following figure shows the network configuration popup with the </span><strong class="bold"><span class="koboSpan" id="kobo.446.1">Wi-Fi Name</span></strong><span class="koboSpan" id="kobo.447.1"> and </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.448.1">Password</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.449.1"> fields.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer161">
<span class="koboSpan" id="kobo.450.1"><img alt="Figure 10.10 – Network configuration for ﻿the Thing" src="image/B19752_10_10.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.451.1">Figure 10.10 – Network configuration for the Thing</span></p>
<p><span class="koboSpan" id="kobo.452.1">You will find a new field – </span><strong class="bold"><span class="koboSpan" id="kobo.453.1">Secret Key</span></strong><span class="koboSpan" id="kobo.454.1">. </span><span class="koboSpan" id="kobo.454.2">Paste the secret</span><a id="_idIndexMarker855"/><span class="koboSpan" id="kobo.455.1"> key that we received from the system during </span><span class="No-Break"><span class="koboSpan" id="kobo.456.1">device creation.</span></span></p>
<h2 id="_idParaDest-223"><a id="_idTextAnchor223"/><span class="koboSpan" id="kobo.457.1">Coding</span></h2>
<p><span class="koboSpan" id="kobo.458.1">The chapter’s code</span><a id="_idIndexMarker856"/><span class="koboSpan" id="kobo.459.1"> is available at the official GitHub repository for the book. </span><span class="koboSpan" id="kobo.459.2">Download the </span><strong class="source-inline"><span class="koboSpan" id="kobo.460.1">Voice_Controlled_Smart_Lamp_may13a</span></strong><span class="koboSpan" id="kobo.461.1"> code from the repository and import it to the Arduino </span><span class="No-Break"><span class="koboSpan" id="kobo.462.1">Web Editor.</span></span></p>
<p><span class="koboSpan" id="kobo.463.1">You can download the code and put it into your Thing by navigating to the </span><strong class="bold"><span class="koboSpan" id="kobo.464.1">Sketch</span></strong><span class="koboSpan" id="kobo.465.1"> tab. </span><span class="koboSpan" id="kobo.465.2">I am not going to discuss that code as you will get the idea after reading it. </span><span class="koboSpan" id="kobo.465.3">But here, I will explain the main workflow that initializes all the things in the setup. </span><span class="koboSpan" id="kobo.465.4">Remember, never try to use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.466.1">delay()</span></strong><span class="koboSpan" id="kobo.467.1"> method – it will block the </span><strong class="source-inline"><span class="koboSpan" id="kobo.468.1">ArduinoCloud.update()</span></strong><span class="koboSpan" id="kobo.469.1"> method. </span><span class="koboSpan" id="kobo.469.2">But before moving forward, at the start of the code, we need to change the </span><strong class="bold"><span class="koboSpan" id="kobo.470.1">Pin#</span></strong><span class="koboSpan" id="kobo.471.1"> of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.472.1">LED_PIN</span></strong><span class="koboSpan" id="kobo.473.1"> constant to </span><strong class="source-inline"><span class="koboSpan" id="kobo.474.1">5</span></strong><span class="koboSpan" id="kobo.475.1"> and assign a value to </span><strong class="source-inline"><span class="koboSpan" id="kobo.476.1">LED_COUNT</span></strong><span class="koboSpan" id="kobo.477.1"> according to the number of pixels in the ring/strip. </span><span class="koboSpan" id="kobo.477.2">Here, I am assigning the value </span><strong class="source-inline"><span class="koboSpan" id="kobo.478.1">16</span></strong><span class="koboSpan" id="kobo.479.1"> as I am using a </span><span class="No-Break"><span class="koboSpan" id="kobo.480.1">16-pixel ring:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.481.1">
#define LED_PIN   5
// How many NeoPixels are attached to the Arduino?
</span><span class="koboSpan" id="kobo.481.2">#define LED_COUNT 16
// Declare our NeoPixel strip object:
Adafruit_NeoPixel strip(LED_COUNT, LED_PIN, NEO_GRB + NEO_KHZ800);
//Sync Variables
bool swi;
float bright;
float sat;
float hue;</span></pre> <p><span class="koboSpan" id="kobo.482.1">If we review the preceding code for the constant, then we will see there is one </span><strong class="source-inline"><span class="koboSpan" id="kobo.483.1">NeoPixel strip</span></strong><span class="koboSpan" id="kobo.484.1"> object and four global variables for the switch (</span><strong class="source-inline"><span class="koboSpan" id="kobo.485.1">swi</span></strong><span class="koboSpan" id="kobo.486.1">), brightness (</span><strong class="source-inline"><span class="koboSpan" id="kobo.487.1">bright</span></strong><span class="koboSpan" id="kobo.488.1">), saturation (</span><strong class="source-inline"><span class="koboSpan" id="kobo.489.1">sat</span></strong><span class="koboSpan" id="kobo.490.1">), and hue that will be used later to sync the values from one widget control to another widget control to enable the synchronization </span><span class="No-Break"><span class="koboSpan" id="kobo.491.1">between widgets.</span></span></p>
<p><span class="koboSpan" id="kobo.492.1">After filling the preceding constants with appropriate values, it’s time to explore some other methods. </span><span class="koboSpan" id="kobo.492.2">If we talk about the setup, then there are only a few lines that initiate the </span><strong class="source-inline"><span class="koboSpan" id="kobo.493.1">NeoPixel strip</span></strong><span class="koboSpan" id="kobo.494.1"> object as well as the Arduino IoT Cloud and some other operations. </span><span class="koboSpan" id="kobo.494.2">In this project, our </span><strong class="source-inline"><span class="koboSpan" id="kobo.495.1">loop()</span></strong><span class="koboSpan" id="kobo.496.1"> method will include one line regarding an Arduino Cloud update and nothing else. </span><span class="koboSpan" id="kobo.496.2">Actually, in this project, code will be executed where any change happens on the </span><span class="No-Break"><span class="koboSpan" id="kobo.497.1">widget side.</span></span></p>
<p><span class="koboSpan" id="kobo.498.1">In the project, we have</span><a id="_idIndexMarker857"/><span class="koboSpan" id="kobo.499.1"> four more methods. </span><span class="koboSpan" id="kobo.499.2">Three are event-oriented</span><a id="_idIndexMarker858"/><span class="koboSpan" id="kobo.500.1"> and one is a common helper method that will be used by three </span><strong class="bold"><span class="koboSpan" id="kobo.501.1">event-oriented methods</span></strong><span class="koboSpan" id="kobo.502.1"> to perform operations on WS2812. </span><span class="koboSpan" id="kobo.502.2">Here, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.503.1">onLightBrightnessChange()</span></strong><span class="koboSpan" id="kobo.504.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.505.1">onRGBLightColorChange()</span></strong><span class="koboSpan" id="kobo.506.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.507.1">onTableLightChange()</span></strong><span class="koboSpan" id="kobo.508.1"> methods are event-oriented and the </span><strong class="source-inline"><span class="koboSpan" id="kobo.509.1">ControlTheWS2812()</span></strong><span class="koboSpan" id="kobo.510.1"> method is a </span><strong class="bold"><span class="koboSpan" id="kobo.511.1">common helper method</span></strong><span class="koboSpan" id="kobo.512.1">. </span><span class="koboSpan" id="kobo.512.2">Next, we are going to explore all the methods step </span><span class="No-Break"><span class="koboSpan" id="kobo.513.1">by step:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.514.1">
void onLightBrightnessChange()  {
  // Add your code here to act upon LightBrightness change
  swi=lightBrightness.getSwitch();
  bright=lightBrightness.getBrightness();
  //Sync the values to tableLight Cloud Variable
  tableLight.setSwitch(swi);
  tableLight.setBrightness(bright);
  //Call the method for operations on WS2812
  ControlTheWS2812();
}</span></pre> <p><span class="koboSpan" id="kobo.515.1">In the </span><strong class="source-inline"><span class="koboSpan" id="kobo.516.1">onLightBrightnessChange()</span></strong><span class="koboSpan" id="kobo.517.1"> method, we take brightness and switch values from the </span><strong class="source-inline"><span class="koboSpan" id="kobo.518.1">lightBrightness</span></strong><span class="koboSpan" id="kobo.519.1"> cloud variable and later assign the values with global variables. </span><span class="koboSpan" id="kobo.519.2">The last calling method, </span><strong class="source-inline"><span class="koboSpan" id="kobo.520.1">ControlTheWS2812()</span></strong><span class="koboSpan" id="kobo.521.1">, performs the operation on the WS2812 ring according to global </span><span class="No-Break"><span class="koboSpan" id="kobo.522.1">variable values:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.523.1">
void onRGBLightColorChange()  {
  // Add your code here to act upon RGBLightColor change
  hue=rGBLightColor.getValue().hue;
  sat=rGBLightColor.getValue().sat;
  bright=rGBLightColor.getValue().bri;
  //Sync the values with LightBrightness &amp; tableLight widget
  tableLight.setBrightness(bright);
  tableLight.setHue(hue);
  tableLight.setSaturation(sat);
  lightBrightness.setBrightness(bright);
  //Call the method for operations on WS2812
  ControlTheWS2812();
}</span></pre> <p><span class="koboSpan" id="kobo.524.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.525.1">onRGBLightColorChange()</span></strong><span class="koboSpan" id="kobo.526.1"> method is the second method that will be called when there is any change</span><a id="_idIndexMarker859"/><span class="koboSpan" id="kobo.527.1"> in the color widget control. </span><span class="koboSpan" id="kobo.527.2">This method fetches hue, saturation, and brightness values from the </span><strong class="source-inline"><span class="koboSpan" id="kobo.528.1">Color</span></strong><span class="koboSpan" id="kobo.529.1"> type cloud variable and later assigns these values to other cloud variables as well as global variables. </span><span class="koboSpan" id="kobo.529.2">The last calling method, </span><strong class="source-inline"><span class="koboSpan" id="kobo.530.1">ControlTheWS2812()</span></strong><span class="koboSpan" id="kobo.531.1">, performs the operation on the WS2812 ring according to global </span><span class="No-Break"><span class="koboSpan" id="kobo.532.1">variable values:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.533.1">
void onTableLightChange()  {
  // Add your code here to act upon TableLight change
  swi=tableLight.getSwitch();
  bright=tableLight.getBrightness();
  hue=tableLight.getHue();
  sat=tableLight.getSaturation();
  //Sync the values with LightBrightness &amp; RGBLightColor widget
  lightBrightness.setSwitch(swi);
  lightBrightness.setBrightness(bright);
  rGBLightColor= Color(hue,sat,bright);
  //Call the method for operations on WS2812
  ControlTheWS2812();
}</span></pre> <p><span class="koboSpan" id="kobo.534.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.535.1">onTableLightChange()</span></strong><span class="koboSpan" id="kobo.536.1"> method is associated</span><a id="_idIndexMarker860"/><span class="koboSpan" id="kobo.537.1"> with the </span><strong class="bold"><span class="koboSpan" id="kobo.538.1">Colored Light</span></strong><span class="koboSpan" id="kobo.539.1"> control widget and it will be called when there is any change to the switch, brightness, or color. </span><span class="koboSpan" id="kobo.539.2">This method will fetch four values from the </span><strong class="source-inline"><span class="koboSpan" id="kobo.540.1">tablelight</span></strong><span class="koboSpan" id="kobo.541.1"> cloud variable and assign these values to global variables as well to two other cloud variables for synchronization. </span><span class="koboSpan" id="kobo.541.2">The last calling method, </span><strong class="source-inline"><span class="koboSpan" id="kobo.542.1">ControlTheWS2812()</span></strong><span class="koboSpan" id="kobo.543.1">, will perform the operation on the WS2812 ring according to global </span><span class="No-Break"><span class="koboSpan" id="kobo.544.1">variable values:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.545.1">
void ControlTheWS2812(){
  // declare a variable of the Color data type and define it using the HSB values of the color variable
  Color currentColor=Color(hue,sat, bright);
  byte RValue;
  byte GValue;
  byte BValue;
  currentColor.getRGB(RValue, GValue, BValue);  // the variables will contain the RGB values after the function returns
  if(swi==true){
    strip.setBrightness(bright);
    for(int i=0; i&lt;LED_COUNT+1; i++){
    strip.setPixelColor(i, strip.Color(RValue, GValue, BValue)); //  Set pixel's color (in RAM)
    strip.show();
  }
  }else{
    for(int i=0; i&lt;LED_COUNT+1; i++){
    strip.setBrightness(0);
    strip.setPixelColor(i, strip.Color(0, 0, 0)); //  Set pixel's color (in RAM)
    strip.show();
    }
  }
}</span></pre> <p><span class="koboSpan" id="kobo.546.1">Finally, we have our last, common helper method, </span><strong class="source-inline"><span class="koboSpan" id="kobo.547.1">ControlTheWS2812()</span></strong><span class="koboSpan" id="kobo.548.1">. </span><span class="koboSpan" id="kobo.548.2">This method will first generate RGB color from hue, saturation, and brightness. </span><span class="koboSpan" id="kobo.548.3">Then it will check the switch value – if it is true, then the condition will assign the brightness and color to the WS2812 ring and turn on every pixel of the ring with the help of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.549.1">for</span></strong><span class="koboSpan" id="kobo.550.1"> loop. </span><span class="koboSpan" id="kobo.550.2">Otherwise, it will set the brightness</span><a id="_idIndexMarker861"/><span class="koboSpan" id="kobo.551.1"> to </span><strong class="source-inline"><span class="koboSpan" id="kobo.552.1">0</span></strong><span class="koboSpan" id="kobo.553.1"> and turn off all the pixels of </span><span class="No-Break"><span class="koboSpan" id="kobo.554.1">the WS2812.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.555.1">Important note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.556.1">If you used different </span><em class="italic"><span class="koboSpan" id="kobo.557.1">naming</span></em><span class="koboSpan" id="kobo.558.1"> in the variable declaration, then update the code</span><a id="_idIndexMarker862"/><span class="koboSpan" id="kobo.559.1"> according to your naming scheme. </span><span class="koboSpan" id="kobo.559.2">But it’s better if you first follow all the steps according to the book and later change the cloud variable names and modify your </span><span class="No-Break"><span class="koboSpan" id="kobo.560.1">code respectively.</span></span></p>
<p class="callout"><span class="koboSpan" id="kobo.561.1">The Arduino IoT Cloud only updates the values on the dashboard whenever a variable value is changed. </span><span class="koboSpan" id="kobo.561.2">For example, if the temperature is 30 and after 5 minutes it’s the same, then the Arduino IoT Cloud will not record the value. </span><span class="koboSpan" id="kobo.561.3">So, don’t get confused if values are not changed on the widget controls. </span><span class="koboSpan" id="kobo.561.4">Another benefit of this feature is you will not get duplicated data when you are exporting </span><span class="No-Break"><span class="koboSpan" id="kobo.562.1">the content.</span></span></p>
<p><span class="koboSpan" id="kobo.563.1">In this section, we set up the Thing, associated the XIAO ESP32C3 with the Thing, and set up cloud variables of different types to control LED operations. </span><span class="koboSpan" id="kobo.563.2">We also discussed the code for the device in detail, step by step, according to different methods. </span><span class="koboSpan" id="kobo.563.3">Now, in the next section, we will set up </span><span class="No-Break"><span class="koboSpan" id="kobo.564.1">the dashboard.</span></span></p>
<h1 id="_idParaDest-224"><a id="_idTextAnchor224"/><span class="koboSpan" id="kobo.565.1">User-friendly controls – building web and mobile dashboards</span></h1>
<p><span class="koboSpan" id="kobo.566.1">After uploading the code</span><a id="_idIndexMarker863"/><span class="koboSpan" id="kobo.567.1"> to the device, it’s time to set up a dashboard for web</span><a id="_idIndexMarker864"/><span class="koboSpan" id="kobo.568.1"> and mobile to visualize the data with different widgets. </span><span class="koboSpan" id="kobo.568.2">The following screenshot shows a visualization of light controls with </span><span class="No-Break"><span class="koboSpan" id="kobo.569.1">different widgets.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer162">
<span class="koboSpan" id="kobo.570.1"><img alt="Figure 10.11 – Thing dashboard" src="image/B19752_10_11.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.571.1">Figure 10.11 – Thing dashboard</span></p>
<p><span class="koboSpan" id="kobo.572.1">We have three core functionalities</span><a id="_idIndexMarker865"/><span class="koboSpan" id="kobo.573.1"> of WS2812, which include RGB color, brightness, and the on/off</span><a id="_idIndexMarker866"/><span class="koboSpan" id="kobo.574.1"> switch. </span><span class="koboSpan" id="kobo.574.2">In the previous section, we created three different cloud variables, which provide different functionalities. </span><span class="koboSpan" id="kobo.574.3">That’s why here we have three different widget controls, which only work with these cloud variables. </span><span class="koboSpan" id="kobo.574.4">The first widget is </span><strong class="bold"><span class="koboSpan" id="kobo.575.1">Colored Light</span></strong><span class="koboSpan" id="kobo.576.1">, which is linked to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.577.1">tableLight</span></strong><span class="koboSpan" id="kobo.578.1"> cloud variable and capable of performing all of the operations on the WS2812, such as color change, brightness control, and switching it on </span><span class="No-Break"><span class="koboSpan" id="kobo.579.1">and off.</span></span></p>
<p><span class="koboSpan" id="kobo.580.1">Next, we have two more controls with limited functionalities. </span><span class="koboSpan" id="kobo.580.2">The second widget is </span><strong class="bold"><span class="koboSpan" id="kobo.581.1">Dimmed light</span></strong><span class="koboSpan" id="kobo.582.1">, which is linked with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.583.1">lightBrightness</span></strong><span class="koboSpan" id="kobo.584.1"> cloud variable and only provides an on/off switch and brightness control, while our third widget control is </span><strong class="bold"><span class="koboSpan" id="kobo.585.1">Color</span></strong><span class="koboSpan" id="kobo.586.1">, which is linked with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.587.1">rGBLightColor</span></strong><span class="koboSpan" id="kobo.588.1"> cloud variable and only provides the option to choose the color. </span><span class="koboSpan" id="kobo.588.2">If we compare all three widgets, then the </span><strong class="bold"><span class="koboSpan" id="kobo.589.1">Colored Light</span></strong><span class="koboSpan" id="kobo.590.1"> widget is equal to both </span><strong class="bold"><span class="koboSpan" id="kobo.591.1">Dimmed light</span></strong><span class="koboSpan" id="kobo.592.1"> and the </span><strong class="bold"><span class="koboSpan" id="kobo.593.1">Color</span></strong><span class="koboSpan" id="kobo.594.1"> widget, as the </span><strong class="bold"><span class="koboSpan" id="kobo.595.1">Colored Light</span></strong><span class="koboSpan" id="kobo.596.1"> widget has three functionalities, which include turning it on and off, color selection, and brightness control, while the </span><strong class="bold"><span class="koboSpan" id="kobo.597.1">Dimmed light</span></strong><span class="koboSpan" id="kobo.598.1"> widget control has only two options, brightness control and turning on and off functionality, and the </span><strong class="bold"><span class="koboSpan" id="kobo.599.1">Color</span></strong><span class="koboSpan" id="kobo.600.1"> widget control only has the option to choose </span><span class="No-Break"><span class="koboSpan" id="kobo.601.1">the color.</span></span></p>
<p><span class="koboSpan" id="kobo.602.1">So, the final conclusion is if you have a multi-color strip with a brightness control feature, then the </span><strong class="bold"><span class="koboSpan" id="kobo.603.1">Colored Light</span></strong><span class="koboSpan" id="kobo.604.1"> widget and cloud variable are good to go; otherwise, for a single-color light with brightness control, the </span><strong class="bold"><span class="koboSpan" id="kobo.605.1">Dimmed light</span></strong><span class="koboSpan" id="kobo.606.1"> widget and cloud variable are perfect. </span><span class="koboSpan" id="kobo.606.2">And if you have only a strip with the multi-color option without a brightness control, then a simple </span><strong class="bold"><span class="koboSpan" id="kobo.607.1">Color</span></strong><span class="koboSpan" id="kobo.608.1"> widget and cloud variable type are enough but remember the </span><strong class="bold"><span class="koboSpan" id="kobo.609.1">Color</span></strong><span class="koboSpan" id="kobo.610.1"> type cloud variable is not compatible with </span><span class="No-Break"><span class="koboSpan" id="kobo.611.1">Amazon Alexa.</span></span></p>
<p><span class="koboSpan" id="kobo.612.1">In this section, we have set up the dashboard</span><a id="_idIndexMarker867"/><span class="koboSpan" id="kobo.613.1"> with different types of widget</span><a id="_idIndexMarker868"/><span class="koboSpan" id="kobo.614.1"> controls, which help you to control WS2812 in different ways, such as controlling the brightness, color, and turning on and off the LED ring. </span><span class="koboSpan" id="kobo.614.2">Next, we are going to set up the Amazon Alexa Skill with the Arduino IoT Cloud to control our table lamp with voice commands using </span><span class="No-Break"><span class="koboSpan" id="kobo.615.1">Amazon Alexa.</span></span></p>
<h1 id="_idParaDest-225"><a id="_idTextAnchor225"/><span class="koboSpan" id="kobo.616.1">Enhancing controls – integrating the Arduino IoT Cloud with Amazon Alexa</span></h1>
<p><span class="koboSpan" id="kobo.617.1">After testing everything</span><a id="_idIndexMarker869"/><span class="koboSpan" id="kobo.618.1"> on the device using the Arduino IoT Cloud</span><a id="_idIndexMarker870"/><span class="koboSpan" id="kobo.619.1"> dashboard, it’s time to link Amazon Alexa with our thing for the voice control system. </span><span class="koboSpan" id="kobo.619.2">We have a physical hardware device for Alexa</span><a id="_idIndexMarker871"/><span class="koboSpan" id="kobo.620.1"> as well mobile apps for Android/iOS. </span><span class="koboSpan" id="kobo.620.2">Please visit </span><a href="https://alexa.amazon.com/"><span class="koboSpan" id="kobo.621.1">https://alexa.amazon.com/</span></a><span class="koboSpan" id="kobo.622.1"> to set up this project. </span><span class="koboSpan" id="kobo.622.2">I am using Amazon Echo Dot second generation, but if you don’t have access to an Alexa hardware device, then you can simply use the </span><span class="No-Break"><span class="koboSpan" id="kobo.623.1">mobile app.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer163">
<span class="koboSpan" id="kobo.624.1"><img alt="Figure 10.12 – Arduino Skill for Amazon Alexa" src="image/B19752_10_12.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.625.1">Figure 10.12 – Arduino Skill for Amazon Alexa</span></p>
<p><span class="koboSpan" id="kobo.626.1">The Arduino IoT Cloud natively developed a skill for Amazon Alexa, which can be found at </span><a href="https://www.amazon.com/Arduino-LLC/dp/B07ZT2PK2H"><span class="koboSpan" id="kobo.627.1">https://www.amazon.com/Arduino-LLC/dp/B07ZT2PK2H</span></a><span class="koboSpan" id="kobo.628.1">. </span><span class="koboSpan" id="kobo.628.2">Set up your Amazon Alexa and navigate to the preceding URL to enable a skill, which is shown in the preceding figure. </span><span class="koboSpan" id="kobo.628.3">When you link the account, it will automatically link the Arduino IoT cloud account that is already logged in with this Skill. </span><span class="koboSpan" id="kobo.628.4">So, make sure you are already logged in to the Arduino IoT Cloud. </span><span class="koboSpan" id="kobo.628.5">The preceding figure shows the Arduino Skill for </span><span class="No-Break"><span class="koboSpan" id="kobo.629.1">Amazon Alexa.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer164">
<span class="koboSpan" id="kobo.630.1"><img alt="Figure 10.13 – Amazon Alexa Smart Home and devices" src="image/B19752_10_13.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.631.1">Figure 10.13 – Amazon Alexa Smart Home and devices</span></p>
<p><span class="koboSpan" id="kobo.632.1">After enabling the Arduino skill in Amazon Alexa, navigate to </span><a href="https://alexa.amazon.com/spa/index.html"><span class="koboSpan" id="kobo.633.1">https://alexa.amazon.com/spa/index.html</span></a><span class="koboSpan" id="kobo.634.1"> and click on the </span><strong class="bold"><span class="koboSpan" id="kobo.635.1">Smart Home</span></strong><span class="koboSpan" id="kobo.636.1"> link, which is located in the left sidebar, then click on </span><strong class="bold"><span class="koboSpan" id="kobo.637.1">Devices</span></strong><span class="koboSpan" id="kobo.638.1">, shown in the preceding figure. </span><span class="koboSpan" id="kobo.638.2">Here, you will see cloud</span><a id="_idIndexMarker872"/><span class="koboSpan" id="kobo.639.1"> variables will become</span><a id="_idIndexMarker873"/><span class="koboSpan" id="kobo.640.1"> devices, as shown in the following figure. </span><span class="koboSpan" id="kobo.640.2">If you don’t see your desired Arduino IoT Cloud variables as a device, then at the bottom, click on the </span><strong class="bold"><span class="koboSpan" id="kobo.641.1">Discover</span></strong><span class="koboSpan" id="kobo.642.1"> button on the </span><strong class="bold"><span class="koboSpan" id="kobo.643.1">Devices</span></strong><span class="koboSpan" id="kobo.644.1"> page, which will take around 20 seconds to load all </span><span class="No-Break"><span class="koboSpan" id="kobo.645.1">the stuff.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer165">
<span class="koboSpan" id="kobo.646.1"><img alt="Figure 10.14 – Arduino Cloud variables as devices at Amazon Alexa" src="image/B19752_10_14.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.647.1">Figure 10.14 – Arduino Cloud variables as devices at Amazon Alexa</span></p>
<p><span class="koboSpan" id="kobo.648.1">Finally, turn on your Amazon Echo Dot and WS2812-based smart lamp and try the following voice commands on Amazon Alexa. </span><span class="koboSpan" id="kobo.648.2">Firstly, try these commands, which will help you turn on/off </span><strong class="bold"><span class="koboSpan" id="kobo.649.1">TableLight</span></strong><span class="koboSpan" id="kobo.650.1">. </span><span class="koboSpan" id="kobo.650.2">As shown in the preceding figure, </span><strong class="bold"><span class="koboSpan" id="kobo.651.1">TableLight</span></strong><span class="koboSpan" id="kobo.652.1"> is now acting as a device in the Amazon Alexa </span><span class="No-Break"><span class="koboSpan" id="kobo.653.1">smart home:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.654.1">
Hey Alexa Turn on the TableLight
Hey Alexa Turn off the TableLight</span></pre> <p><span class="koboSpan" id="kobo.655.1">Now it’s time to change</span><a id="_idIndexMarker874"/><span class="koboSpan" id="kobo.656.1"> the brightness and colors</span><a id="_idIndexMarker875"/><span class="koboSpan" id="kobo.657.1"> of the WS2812 using voice commands. </span><span class="koboSpan" id="kobo.657.2">Try the following commands, which will help you to update the brightness and colors. </span><span class="koboSpan" id="kobo.657.3">Right now, I have just written four different colors, but you can choose any color name that </span><span class="No-Break"><span class="koboSpan" id="kobo.658.1">you want:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.659.1">
Hey Alexa set the brightness of TableLight to 99
Hey Alexa set the brightness of TableLight to 50
Hey Alexa change the color of TableLight to red
Hey Alexa change the color of TableLight to blue
Hey Alexa change the color of TableLight to green
Hey Alexa change the color of TableLight to purple</span></pre> <p><span class="koboSpan" id="kobo.660.1">Finally, I am using the Alexa timer functionality to schedule turning on/off the table light after a specific time interval. </span><span class="koboSpan" id="kobo.660.2">But you can also use this function just like an alarm and turn on/off the WS2812 for long intervals, such as to turn on the light early in the morning, turning off the lamp at 10:00 P.M., and </span><span class="No-Break"><span class="koboSpan" id="kobo.661.1">so on:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.662.1">
Hey Alexa turn on the table light after 30 minutes
Hey Alexa turn off the table light after 10 minutes</span></pre> <p><span class="koboSpan" id="kobo.663.1">We have discussed different voice commands for Amazon Alexa, but you can search on the internet for more commands regarding light controls </span><span class="No-Break"><span class="koboSpan" id="kobo.664.1">and colors.</span></span></p>
<p><span class="koboSpan" id="kobo.665.1">Now it’s time to talk about which Arduino Cloud variables are compatible with Amazon Alexa. </span><span class="koboSpan" id="kobo.665.2">You can get up-to-date information at </span><a href="https://www.amazon.com/Arduino-LLC/dp/B07ZT2PK2H"><span class="koboSpan" id="kobo.666.1">https://www.amazon.com/Arduino-LLC/dp/B07ZT2PK2H</span></a><span class="koboSpan" id="kobo.667.1">. </span><span class="koboSpan" id="kobo.667.2">At the moment, we have the following list of cloud variables that work perfectly with </span><span class="No-Break"><span class="koboSpan" id="kobo.668.1">Amazon Alexa:</span></span></p>
<ul>
<li><span class="No-Break"><span class="koboSpan" id="kobo.669.1">Temperature</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.670.1">Motion detection</span></span></li>
<li><span class="koboSpan" id="kobo.671.1">Light, smart plug, and </span><span class="No-Break"><span class="koboSpan" id="kobo.672.1">smart switch</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.673.1">Dimmed light</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.674.1">Colored light</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.675.1">According to the preceding list, you can create a thermostat for a room, which will help you to change the room or kitchen temperature according to outdoor and indoor thermostat temperature, you can control your heating and cooling system. </span><span class="koboSpan" id="kobo.675.2">To turn on/off any device, we have four different types of cloud variables, which have the same data type Boolean but different names, including light, smart plug, smart switch, and motion detection. </span><span class="koboSpan" id="kobo.675.3">These four variables could be used to control any relay/magnetic contactors to turn home appliances on/off, such as cooling/heating systems. </span><span class="koboSpan" id="kobo.675.4">We have already discussed </span><strong class="bold"><span class="koboSpan" id="kobo.676.1">Dimmed light</span></strong><span class="koboSpan" id="kobo.677.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.678.1">Colored Light</span></strong><span class="koboSpan" id="kobo.679.1"> in </span><span class="No-Break"><span class="koboSpan" id="kobo.680.1">previous sections.</span></span></p>
<p><span class="koboSpan" id="kobo.681.1">In this section, we have set up the Amazon Alexa</span><a id="_idIndexMarker876"/><span class="koboSpan" id="kobo.682.1"> with Arduino Cloud skill</span><a id="_idIndexMarker877"/><span class="koboSpan" id="kobo.683.1"> and tried different voice commands related to turning lights on and off, as well as how to change the color and brightness of the WS2812 RGB </span><span class="No-Break"><span class="koboSpan" id="kobo.684.1">LED ring.</span></span></p>
<h1 id="_idParaDest-226"><a id="_idTextAnchor226"/><span class="koboSpan" id="kobo.685.1">What next?</span></h1>
<p><span class="koboSpan" id="kobo.686.1">We still have lots of options available to explore, but now your assignment is to use different relays, sensors, and development boards to do some more experiments and learn from them. </span><span class="koboSpan" id="kobo.686.2">In the current chapter, we have only used one WS2812 module for light control, but you can use temperature sensors, relays, and motion sensors to automate your devices in your home, such as automating room switches to control fans, exhaust fans, lights, and air conditioning systems according to </span><span class="No-Break"><span class="koboSpan" id="kobo.687.1">room temperature.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.688.1">Important note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.689.1">Be careful when playing with high-voltage power cables when patching the cables </span><span class="No-Break"><span class="koboSpan" id="kobo.690.1">to relays.</span></span></p>
<h1 id="_idParaDest-227"><a id="_idTextAnchor227"/><span class="koboSpan" id="kobo.691.1">Summary</span></h1>
<p><span class="koboSpan" id="kobo.692.1">In this chapter, we have explored how to develop a low-cost, multi-color smart table lamp for our room using the XIAO ESP32C3 and WS2812. </span><span class="koboSpan" id="kobo.692.2">We have set up the Thing, which included cloud variable creation, device association, network configuration, and coding of the development board. </span><span class="koboSpan" id="kobo.692.3">Later, we created a dashboard using different widgets to control the WS2812 RGB ring. </span><span class="koboSpan" id="kobo.692.4">Finally, we used the Amazon Alexa voice assistant to turn our table lamp on/off and control its color and brightness with </span><span class="No-Break"><span class="koboSpan" id="kobo.693.1">voice commands.</span></span></p>
<p><span class="koboSpan" id="kobo.694.1">This chapter will give you the confidence to build more interesting stuff to make your home and office smarter. </span><span class="koboSpan" id="kobo.694.2">In the next chapter, we will talk about Cloud Scheduler and over-the-air update’ features. </span><span class="koboSpan" id="kobo.694.3">Both features are interesting and specially designed to carry out operations on </span><span class="No-Break"><span class="koboSpan" id="kobo.695.1">IoT nodes.</span></span></p>
</div>


<div class="Content" id="_idContainer167">
<h1 id="_idParaDest-228" lang="en-US" xml:lang="en-US"><a id="_idTextAnchor228"/><span class="koboSpan" id="kobo.1.1">Part 4: Learning Advanced Features of the Arduino IoT Cloud and Looking Ahead</span></h1>
<p><span class="koboSpan" id="kobo.2.1">In </span><em class="italic"><span class="koboSpan" id="kobo.3.1">Part 4</span></em><span class="koboSpan" id="kobo.4.1">, the reader is guided through the advanced features of the Arduino IoT Cloud platform, how to use them to develop professional applications, and the tools for maintaining solutions during their life cycle. </span><span class="koboSpan" id="kobo.4.2">The book ends with some suggestions for further learning, experimenting, and </span><span class="No-Break"><span class="koboSpan" id="kobo.5.1">sourcing information.</span></span></p>
<p><span class="koboSpan" id="kobo.6.1">This part has the </span><span class="No-Break"><span class="koboSpan" id="kobo.7.1">following chapters:</span></span></p>
<ul>
<li><a href="B19752_11.xhtml#_idTextAnchor229"><em class="italic"><span class="koboSpan" id="kobo.8.1">Chapter 11</span></em></a><span class="koboSpan" id="kobo.9.1">, </span><em class="italic"><span class="koboSpan" id="kobo.10.1">Implementing the Arduino IoT Cloud Scheduler and Over-the-Air Features</span></em></li>
<li><a href="B19752_12.xhtml#_idTextAnchor251"><em class="italic"><span class="koboSpan" id="kobo.11.1">Chapter 12</span></em></a><span class="koboSpan" id="kobo.12.1">, </span><em class="italic"><span class="koboSpan" id="kobo.13.1">Project #6 – Tracking and Notifying about Your Heart Rate</span></em></li>
<li><a href="B19752_13.xhtml#_idTextAnchor268"><em class="italic"><span class="koboSpan" id="kobo.14.1">Chapter 13</span></em></a><span class="koboSpan" id="kobo.15.1">, </span><em class="italic"><span class="koboSpan" id="kobo.16.1">Scripting the Arduino IoT Cloud with Cloud CLI</span></em></li>
<li><a href="B19752_14.xhtml#_idTextAnchor296"><em class="italic"><span class="koboSpan" id="kobo.17.1">Chapter 14</span></em></a><span class="koboSpan" id="kobo.18.1">, </span><em class="italic"><span class="koboSpan" id="kobo.19.1">Moving Ahead in the Arduino IoT Cloud</span></em></li>
</ul>
</div>
<div>
<div id="_idContainer168">
</div>
</div>
<div>
<div class="Basic-Graphics-Frame" id="_idContainer169">
</div>
</div>
</body></html>