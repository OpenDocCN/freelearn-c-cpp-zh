<html><head></head><body>
<div><h1 class="mainHeading" id="_idParaDest-4">Preface</h1>
<p class="normal">C++ is one of the most popular and widely used programming languages, and it has been that way for three decades. Designed with a focus on performance, efficiency, and flexibility, C++ combines paradigms such as object-oriented, imperative, generic, and functional programming. C++ is standardized by the <strong class="keyWord">International Organization for Standardization</strong> (<strong class="keyWord">ISO</strong>) and has undergone massive changes over the last decade and a half. With the standardization of C++11, the language has entered a new age, which has been widely referred to as modern C++. Type inference, move semantics, lambda expressions, smart pointers, uniform initialization, variadic templates, and many other recent features have changed the way we write code in C++ to the point that it almost looks like a new programming language. This change has been further advanced with the release of C++20, which includes many new changes to the language, such as modules, concepts, and coroutines, as well as changes to the standard library, such as ranges, text formatting, and calendars. And now, the language is moving even further with more changes introduced in C++23 and the upcoming C++26.</p>
<p class="normal">This book addresses many of the new features included in C++11, C++14, C++17, C++20, and C++23. This book is organized into recipes, each covering one particular language or library feature, or a common problem that developers often face and the typical solution to it using modern C++. Through more than 150 recipes, you will learn to master both core language features and the standard libraries; including those for strings, containers, algorithms, iterators, streams, regular expressions, threads, filesystem, atomic operations, utilities, and ranges.</p>
<p class="normal">This third edition of the book took several months to write, and during this time the work on the C++23 standard has been completed. However, at the time of writing this preface, the standard is yet to be approved and will be published this year (2024).</p>
<p class="normal">More than 30 new or updated recipes in the second and third editions cover C++20 features, including modules, concepts, coroutines, ranges, threads and synchronization mechanisms, text formatting, calendars and time zones, immediate functions, the three-way comparison operator, and the new <code class="inlineCode">std::span</code> class. Almost 20 new or updated recipes in this third edition cover C++23 features, including the <code class="inlineCode">std::expected</code> class, the <code class="inlineCode">std::mdspan</code> class, the <code class="inlineCode">stacktrace</code> library, the <code class="inlineCode">span</code> buffer, the multi-dimensional subscript operator, and the additions to the text format library.</p>
<p class="normal">All the recipes in the book contain code samples that show you how to use a feature or how to solve a problem. These code samples have been written using Visual Studio 2022, but have also been compiled using Clang and GCC. Since the support for various language and library features has been gradually added to all these compilers, it is recommended that you use the latest version of each to ensure that all of the new features are supported. </p>
<p class="normal">At the time of writing this preface, the latest versions are GCC 14.0, Clang 18.0, and VC++ 2022 version 14.37 (from Visual Studio 2019 version 17.7). Although all these compilers are C++17 complete, the support for C++23 varies from compiler to compiler. Please refer to <a href="https://en.cppreference.com/w/cpp/compiler_support">https://en.cppreference.com/w/cpp/compiler_support</a> to check your compiler’s support for C++23 features.</p>
<h1 class="heading-1" id="_idParaDest-5">Who this book is for</h1>
<p class="normal">This book is intended for all C++ developers, regardless of their experience level. The typical reader is an entry- or medium-level C++ developer who wants to master the language and become a prolific modern C++ developer. The experienced C++ developer will find a good reference for many C++11, C++14, C++17, C++20, and C++23 language and library features that may come in handy from time to time. The book consists of more than 150 recipes that span simple, to intermediate, and even advanced. However, they all require prior knowledge of C++, and that includes functions, classes, templates, namespaces, macros, and others. Therefore, if you are not familiar with the language, it is recommended that you first read an introductory book to familiarize yourself with the core aspects, and then proceed with this book.</p>
<h1 class="heading-1" id="_idParaDest-6">What this book covers</h1>
<p class="normal"><em class="chapterRef">Chapter 1</em>, <em class="italic">Learning Modern Core Language Features</em>, teaches you about modern core language features, including type inference, uniform initialization, scoped enumerations, range-based for loops, structured bindings, class template argument deduction, and others.</p>
<p class="normal"><em class="chapterRef">Chapter 2</em>, <em class="italic">Working with Numbers and Strings</em>, discusses how to convert between numbers and strings, generate pseudo-random numbers, work with regular expressions and various types of string, as well as how to format text using the C++20 text formatting library.</p>
<p class="normal"><em class="chapterRef">Chapter 3</em>, <em class="italic">Exploring Functions</em>, dives into defaulted and deleted functions, variadic templates, lambda expressions, and higher-order functions.</p>
<p class="normal"><em class="chapterRef">Chapter 4</em>, <em class="italic">Preprocessing and Compilation</em>, takes a look at various aspects of compilation, from how to perform conditional compilation, to compile-time assertions, code generation, and hinting the compiler with attributes.</p>
<p class="normal"><em class="chapterRef">Chapter 5</em>, <em class="italic">Standard Library Containers, Algorithms, and Iterators</em>, introduces you to several standard containers, many algorithms, and teaches you how to write your own random-access iterator.</p>
<p class="normal"><em class="chapterRef">Chapter 6</em>, <em class="italic">General-Purpose Utilities</em>, dives into the <code class="inlineCode">chrono</code> library, including the C++20 calendars and time zones support; the <code class="inlineCode">any</code>, <code class="inlineCode">optional</code>, <code class="inlineCode">variant</code>, and <code class="inlineCode">span</code> and <code class="inlineCode">mdspan</code> types; and type traits.</p>
<p class="normal"><em class="chapterRef">Chapter 7</em>, <em class="italic">Working with Files and Streams</em>, explains how to read and write data to/from streams, use I/O manipulators to control streams, and explores the <code class="inlineCode">filesystem</code> library.</p>
<p class="normal"><em class="chapterRef">Chapter 8</em>, <em class="italic">Leveraging Threading and Concurrency</em>, teaches you how to work with threads, mutexes, locks, condition variables, promises, futures, atomic types, as well as the C++20 latches, barriers, and semaphores.</p>
<p class="normal"><em class="chapterRef">Chapter 9</em>, <em class="italic">Robustness and Performance</em>, focuses on exceptions, constant correctness, type casts, smart pointers, and move semantics.</p>
<p class="normal"><em class="chapterRef">Chapter 10</em>, <em class="italic">Implementing Patterns and Idioms</em>, covers various useful patterns and idioms, such as the pimpl idiom, the non-virtual interface idiom, the curiously recurring template pattern, and mixins.</p>
<p class="normal"><em class="chapterRef">Chapter 11</em>, <em class="italic">Exploring Testing Frameworks</em>, gives you a kickstart with three of the most widely used testing frameworks, Boost.Test, Google Test, and Catch2.</p>
<p class="normal"><em class="chapterRef">Chapter 12</em>, <em class="italic">C++20 Core Features</em>, introduces you to the most important new additions to the C++20 standard—modules, concepts, coroutines, and ranges, including updates in C++23.</p>
<h1 class="heading-1" id="_idParaDest-7">What’s new in this edition</h1>
<p class="normal">This section provides a list of new or updated recipes along with a short description of the change.</p>
<p class="normal"><em class="chapterRef">Chapter 1</em>, <em class="italic">Learning Modern Core Language Features</em>:</p>
<ul>
<li class="bulletList"><em class="italic">Using scope enumeration</em>: updated with C++23 <code class="inlineCode">std::to_underlying</code> and <code class="inlineCode">std::is_scoped_enum</code></li>
<li class="bulletList"><em class="italic">Using range-based for loops to iterate on a range</em>: updated with the C++23 <code class="inlineCode">init</code> statement</li>
<li class="bulletList"><em class="italic">Using the subscript operator to access elements in a collection</em>: (new) C++23 multidimensional subscript operator</li>
</ul>
<p class="normal"><em class="chapterRef">Chapter 2</em>, <em class="italic">Working with Numbers and Strings</em>:</p>
<ul>
<li class="bulletList"><em class="italic">Understanding the various numeric types</em>: (new) explains the C++ numerical types</li>
<li class="bulletList"><em class="italic">Understanding the various character and string types</em>: (new) explains the C++ character types</li>
<li class="bulletList"><em class="italic">Printing Unicode characters to the output console</em>: (new) discusses working with UNICODE and printing to the console</li>
<li class="bulletList"><em class="italic">Creating a library of string helpers</em>: updated with C++20 <code class="inlineCode">starts_with()</code>, <code class="inlineCode">ends_with()</code>, and <code class="inlineCode">contains()</code></li>
<li class="bulletList"><em class="italic">Formatting and printing text with std::format and std::print</em>: updated with C++23 <code class="inlineCode">std::print()</code> and <code class="inlineCode">std::println()</code></li>
<li class="bulletList"><em class="italic">Using std::format with user-defined types</em>: updated with C++23 <code class="inlineCode">std::formattable</code> and better examples</li>
</ul>
<p class="normal"><em class="chapterRef">Chapter 3</em>, <em class="italic">Exploring Functions</em>:</p>
<ul>
<li class="bulletList"><em class="italic">Using lambdas with standard algorithms</em>: updated with C++23 attributes on function call operators</li>
<li class="bulletList"><em class="italic">Writing a recursive lambda</em>: updated with C++14 recursive generic lambdas</li>
<li class="bulletList"><em class="italic">Writing function templates</em>: (new) a walkthrough of writing function templates</li>
</ul>
<p class="normal"><em class="chapterRef">Chapter 4</em>, <em class="italic">Preprocessing and Compilation</em>:</p>
<ul>
<li class="bulletList"><em class="italic">Conditionally compiling your source code</em>: updated with C++23 <code class="inlineCode">#warning</code>, <code class="inlineCode">#elifdef</code>, and <code class="inlineCode">#elifndef</code></li>
<li class="bulletList"><em class="italic">Performing compile time assertion checks with static_assert</em>: updated with C++26 user-generated messages</li>
<li class="bulletList"><em class="italic">Providing metadata to the compiler with attributes</em>: updated with C++23 attributes on lambda, <code class="inlineCode">[[assume]]</code>, and duplicate attributes</li>
</ul>
<p class="normal"><em class="chapterRef">Chapter 5</em>, <em class="italic">Standard Library Containers, Algorithms, and Iterators</em>:</p>
<ul>
<li class="bulletList"><em class="italic">Using vector as default container</em>: updated with C++23 range-aware member functions</li>
<li class="bulletList"><em class="italic">Selecting the right standard containers</em> (new) a comparison of standard containers</li>
</ul>
<p class="normal"><em class="chapterRef">Chapter 6</em>, <em class="italic">General-Purpose Utilities</em>:</p>
<ul>
<li class="bulletList"><em class="italic">Working with calendars</em>: updated with C++20-compliant examples</li>
<li class="bulletList"><em class="italic">Converting times between timezones</em>: updated with C++20-compliant examples</li>
<li class="bulletList"><em class="italic">Chaining together computations which may or may not produce a value</em>: (new) discusses the C++23 <code class="inlineCode">std::optional</code> monadic operations</li>
<li class="bulletList"><em class="italic">Using std::expected for returning a value or an error</em>: (new) discusses the C++23 <code class="inlineCode">std::expected</code> type</li>
<li class="bulletList"><em class="italic">Using std::mdspan for multidimensional views of sequences of objects</em>: (new) explores the C++23 <code class="inlineCode">std::mdspan</code> type</li>
<li class="bulletList"><em class="italic">Providing logging details with source_location</em>: (new) explores the C++20 <code class="inlineCode">std::source_location</code> type</li>
<li class="bulletList"><em class="italic">Using the stacktrace library to print the call stack</em>: (new) teaches the C++23 stacktrace library</li>
</ul>
<p class="normal"><em class="chapterRef">Chapter 7</em>, <em class="italic">Working with Files and Streams</em>:</p>
<ul>
<li class="bulletList"><em class="italic">Using streams on fixed-size external buffers</em>: (new) explores the C++23 span buffers</li>
</ul>
<p class="normal"><em class="chapterRef">Chapter 8</em>, <em class="italic">Leveraging Threading and Concurrency</em>:</p>
<ul>
<li class="bulletList"><em class="italic">Using thread synchronization mechanisms</em>: updated with C++20-compliant samples</li>
<li class="bulletList"><em class="italic">Synchronizing output streams</em>: (new) discusses the C++20 sync streams</li>
</ul>
<p class="normal"><em class="chapterRef">Chapter 9</em>, <em class="italic">Robustness and Performance</em>:</p>
<ul>
<li class="bulletList"><em class="italic">Creating compile-time constant expressions</em>: updated with C++23 static <code class="inlineCode">constexpr</code> variables</li>
<li class="bulletList"><em class="italic">Optimizing code in constant-evaluated contexts</em>: (new) explains the C++23 if <code class="inlineCode">consteval</code></li>
<li class="bulletList"><em class="italic">Using virtual function calls in constant expressions</em>: (new) discusses the C++20 <code class="inlineCode">constexpr</code> virtual functions</li>
</ul>
<p class="normal"><em class="chapterRef">Chapter 10</em>, <em class="italic">Implementing Patterns and Idioms</em>:</p>
<ul>
<li class="bulletList"><em class="italic">Adding functionality to classes with mixins</em>: (new) explains the mixins pattern</li>
<li class="bulletList"><em class="italic">Handling unrelated types generically with type erasure</em>: (new) discusses the type erasure idiom</li>
</ul>
<p class="normal"><em class="chapterRef">Chapter 11</em>, <em class="italic">Exploring Testing Frameworks</em>:</p>
<ul>
<li class="bulletList"><em class="italic">Getting started with Catch2</em>: updated installation instructions for Catch2 version 3.4.0</li>
<li class="bulletList"><em class="italic">Asserting with Catch2</em>: updated examples for Catch2 version 3.4.0</li>
</ul>
<p class="normal"><em class="chapterRef">Chapter 12</em>, <em class="italic">C++20 Core Features</em>:</p>
<ul>
<li class="bulletList"><em class="italic">Exploring abbreviated function templates</em>: (new) examines C++20 abbreviated function templates</li>
<li class="bulletList"><em class="italic">Exploring the standard range adaptors</em>: (new) discusses the C++20 and C++23 range adaptors</li>
<li class="bulletList"><em class="italic">Converting a range to a container</em>: (new) explains how to convert a range to a standard container using C++23 <code class="inlineCode">std::ranges::to()</code></li>
<li class="bulletList"><em class="italic">Using constrained algorithms</em>: (new) explores the general-purpose algorithms that work directly with ranges</li>
<li class="bulletList"><em class="italic">Creating a coroutine task for asynchronous computation</em>: updated with standard compliant examples (and alternatives with the libcoro library)</li>
<li class="bulletList"><em class="italic">Creating a coroutine generator type for sequences of values</em>: updated with standard compliant examples (and alternatives with the libcoro library)</li>
<li class="bulletList"><em class="italic">Recursively generating values with the std::generator type</em>: (new) explains the C++23 <code class="inlineCode">std::generator</code></li>
</ul>
<h1 class="heading-1" id="_idParaDest-8">To get the most out of this book</h1>
<p class="normal">The code presented in the book is available for download from <a href="https://github.com/PacktPublishing/Modern-Cpp-Programming-Cookbook-Third-Edition">https://github.com/PacktPublishing/Modern-Cpp-Programming-Cookbook-Third-Edition</a>, although I encourage you to try writing all the samples by yourself. In order to compile them, you need VC++ 2022 17.7 on Windows and GCC 14.0 or Clang 18.0 on Linux and Mac. If you don’t have the latest version of the compiler, or you want to try another compiler, you can use one that is available online.</p>
<p class="normal">Although there are various online platforms that you could use, I recommend Wandbox, available at <a href="https://wandbox.org/">https://wandbox.org/</a>, and Compiler Explorer, available at <a href="https://godbolt.org/">https://godbolt.org/</a>.</p>
<h2 class="heading-2" id="_idParaDest-9">Download the example code files</h2>
<p class="normal">The code bundle for the book is hosted on GitHub at <a href="https://github.com/PacktPublishing/Modern-Cpp-Programming-Cookbook-Third-Edition">https://github.com/PacktPublishing/Modern-Cpp-Programming-Cookbook-Third-Edition</a>. We also have other code bundles from our rich catalog of books and videos available at <a href="https://github.com/PacktPublishing/">https://github.com/PacktPublishing/</a>. Check them out!</p>
<h2 class="heading-2" id="_idParaDest-10">Download the color images</h2>
<p class="normal">We also provide a PDF file that has color images of the screenshots/diagrams used in this book. You can download it here: <a href="https://packt.link/gbp/9781835080542">https://packt.link/gbp/9781835080542</a>.</p>
<h2 class="heading-2" id="_idParaDest-11">Conventions used</h2>
<p class="normal">There are a number of text conventions used throughout this book.</p>
<p class="normal"><code class="inlineCode">CodeInText</code>: Indicates code words in text, database table names, folder names, filenames, file extensions, pathnames, dummy URLs, user input, and Twitter handles. For example: “The geometry module was defined in a file called <code class="inlineCode">geometry.ixx</code>/<code class="inlineCode">.cppm</code>, although any file name would have had the same result.”</p>
<p class="normal">A block of code is set as follows:</p>
<pre class="programlisting code"><code class="hljs-code">static std::map&lt;
  std::string,
  std::function&lt;std::unique_ptr&lt;Image&gt;()&gt;&gt; mapping
{
  { "bmp", []() {return std::make_unique&lt;BitmapImage&gt;(); } },
  { "png", []() {return std::make_unique&lt;PngImage&gt;(); } },
  { "jpg", []() {return std::make_unique&lt;JpgImage&gt;(); } }
};
</code></pre>
<p class="normal">When we wish to draw your attention to a particular part of a code block, the relevant lines or items are highlighted:</p>
<pre class="programlisting code"><code class="hljs-code">static std::map&lt;
  std::string,
  <strong class="hljs-slc">std::function&lt;std::unique_ptr&lt;Image&gt;()&gt;&gt; mapping</strong>
{
  { "bmp", []() {return std::make_unique&lt;BitmapImage&gt;(); } },
  { "png", []() {return std::make_unique&lt;PngImage&gt;(); } },
  { "jpg", []() {return std::make_unique&lt;JpgImage&gt;(); } }
};
</code></pre>
<p class="normal">Any command-line input or output is written as follows:</p>
<pre class="programlisting con"><code class="hljs-con">running thread 140296854550272
running thread 140296846157568
running thread 140296837764864
</code></pre>
<p class="normal"><strong class="keyWord">Bold</strong>: Indicates a new term, an important word, or words that you see on the screen, for example, in menus or dialog boxes, also appear in the text like this. For example: “Select <strong class="keyWord">System info</strong> from the <strong class="keyWord">Administration</strong> panel.”</p>
<div><p class="normal">Warnings or important notes appear like this.</p>
</div>
<div><p class="normal">Tips and tricks appear like this.</p>
</div>
<h1 class="heading-1" id="_idParaDest-12">Get in touch</h1>
<p class="normal">Feedback from our readers is always welcome.</p>
<p class="normal"><strong class="keyWord">General feedback</strong>: Email <code class="inlineCode">feedback@packtpub.com</code>, and mention the book’s title in the subject of your message. If you have questions about any aspect of this book, please email us at <code class="inlineCode">questions@packtpub.com</code>.</p>
<p class="normal"><strong class="keyWord">Errata</strong>: Although we have taken every care to ensure the accuracy of our content, mistakes do happen. If you have found a mistake in this book we would be grateful if you would report this to us. Please visit, <a href="http://www.packtpub.com/submit-errata">http://www.packtpub.com/submit-errata</a>, selecting your book, clicking on the Errata Submission Form link, and entering the details.</p>
<p class="normal"><strong class="keyWord">Piracy</strong>: If you come across any illegal copies of our works in any form on the Internet, we would be grateful if you would provide us with the location address or website name. Please contact us at <code class="inlineCode">copyright@packtpub.com</code> with a link to the material.</p>
<p class="normal"><strong class="keyWord">If you are interested in becoming an author</strong>: If there is a topic that you have expertise in and you are interested in either writing or contributing to a book, please visit <a href="http://authors.packtpub.com">http://authors.packtpub.com</a>.</p>
</div><p class="eop"/>
<div><h1 class="heading-1" id="_idParaDest-13">Share your thoughts</h1>
<p class="normal">Once you’ve read <em class="italic">Modern C++ Programming Cookbook, Third Edition</em>, we’d love to hear your thoughts! Please <a href="https://packt.link/r/1835080545">click here to go straight to the Amazon review page</a> for this book and share your feedback.</p>
<p class="normal">Your review is important to us and the tech community and will help us make sure we’re delivering excellent quality content.</p>
</div><p class="eop"/>
<div><h1 class="heading-1" id="_idParaDest-14">Download a free PDF copy of this book</h1>
<p class="normal">Thanks for purchasing this book!</p>
<p class="normal">Do you like to read on the go but are unable to carry your print books everywhere?</p>
<p class="normal">Is your eBook purchase not compatible with the device of your choice?</p>
<p class="normal">Don’t worry, now with every Packt book you get a DRM-free PDF version of that book at no cost.</p>
<p class="normal">Read anywhere, any place, on any device. Search, copy, and paste code from your favorite technical books directly into your application. </p>
<p class="normal">The perks don’t stop there, you can get exclusive access to discounts, newsletters, and great free content in your inbox daily</p>
<p class="normal">Follow these simple steps to get the benefits:</p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="1">Scan the QR code or visit the link below</li>
</ol>
<figure class="mediaobject"><em class="italic"><img alt="Qr code  Description automatically generated" src="img/B21549_Free_PDF.png"/></em></figure>
<p class="packt_figref"><a href="https://packt.link/free-ebook/9781835080542">https://packt.link/free-ebook/9781835080542</a></p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="2">Submit your proof of purchase</li>
<li class="numberedList">That’s it! We’ll send your free PDF and other benefits to your email directly</li>
</ol>
</div>
</body></html>