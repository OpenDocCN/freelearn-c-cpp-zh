<html><head></head><body>
<div id="_idContainer199">
<h1 class="chapter-number" id="_idParaDest-251"><a id="_idTextAnchor251"/><span class="koboSpan" id="kobo.1.1">12</span></h1>
<h1 id="_idParaDest-252"><a id="_idTextAnchor252"/><span class="koboSpan" id="kobo.2.1">Project #6 – Tracking and Notifying about Your Heart Rate</span></h1>
<p><span class="koboSpan" id="kobo.3.1">This chapter is dedicated to smart healthcare and wearables. </span><span class="koboSpan" id="kobo.3.2">It shows how healthcare devices can be integrated with the </span><strong class="bold"><span class="koboSpan" id="kobo.4.1">Arduino IoT Cloud platform</span></strong><span class="koboSpan" id="kobo.5.1"> and offers an example of an interface between the Arduino IoT Cloud and a third-party service. </span><span class="koboSpan" id="kobo.5.2">The notification service sends notifications to recipients when the measured heart rate exceeds the defined heart </span><span class="No-Break"><span class="koboSpan" id="kobo.6.1">rate threshold.</span></span></p>
<p><span class="koboSpan" id="kobo.7.1">In this chapter, we will embark on a practical exploration of smart health and wearables by working with a </span><strong class="bold"><span class="koboSpan" id="kobo.8.1">heart rate sensor</span></strong><span class="koboSpan" id="kobo.9.1"> and Seeed Studio’s newest and very small development board in the </span><strong class="bold"><span class="koboSpan" id="kobo.10.1">XIAO series</span></strong><span class="koboSpan" id="kobo.11.1">, based on </span><strong class="bold"><span class="koboSpan" id="kobo.12.1">ESP32</span></strong><span class="koboSpan" id="kobo.13.1"> with a lot of features. </span><span class="koboSpan" id="kobo.13.2">With the help of a sensor, a development board, and the Arduino IoT Cloud, we will build an IoT-enabled wearable healthcare solution. </span><span class="koboSpan" id="kobo.13.3">You will also learn how to set up webhooks for sending the latest heart rate values to Zapier. </span><span class="koboSpan" id="kobo.13.4">Finally, you will see how to set up Zaps in Zapier for email/mobile notifications on heart </span><span class="No-Break"><span class="koboSpan" id="kobo.14.1">rate data.</span></span></p>
<p><span class="koboSpan" id="kobo.15.1">In this chapter, we’re going to cover the following </span><span class="No-Break"><span class="koboSpan" id="kobo.16.1">main topics:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.17.1">Exploring IoT for smart </span><span class="No-Break"><span class="koboSpan" id="kobo.18.1">health solutions</span></span></li>
<li><span class="koboSpan" id="kobo.19.1">Knowing the hardware components – sensors and </span><span class="No-Break"><span class="koboSpan" id="kobo.20.1">development boards</span></span></li>
<li><span class="koboSpan" id="kobo.21.1">Understanding the </span><span class="No-Break"><span class="koboSpan" id="kobo.22.1">project architecture</span></span></li>
<li><span class="koboSpan" id="kobo.23.1">Setting up Things, network credentials, cloud variables, </span><span class="No-Break"><span class="koboSpan" id="kobo.24.1">and code</span></span></li>
<li><span class="koboSpan" id="kobo.25.1">Setting up a dashboard for web </span><span class="No-Break"><span class="koboSpan" id="kobo.26.1">and mobile</span></span></li>
<li><span class="koboSpan" id="kobo.27.1">Setting up the </span><span class="No-Break"><span class="koboSpan" id="kobo.28.1">notification service</span></span></li>
</ul>
<h1 id="_idParaDest-253"><a id="_idTextAnchor253"/><span class="koboSpan" id="kobo.29.1">Technical requirements</span></h1>
<p><span class="koboSpan" id="kobo.30.1">The following hardware components are required to complete this </span><span class="No-Break"><span class="koboSpan" id="kobo.31.1">chapter’s exercise:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.32.1">Seeed Studio </span><span class="No-Break"><span class="koboSpan" id="kobo.33.1">XIAO ESP32C3</span></span></li>
<li><span class="koboSpan" id="kobo.34.1">USB Type-C cable for the </span><span class="No-Break"><span class="koboSpan" id="kobo.35.1">XIAO ESP32C3</span></span></li>
<li><span class="koboSpan" id="kobo.36.1">Pulse sensor (find the complete details and store links in the </span><em class="italic"><span class="koboSpan" id="kobo.37.1">Knowing the hardware components – sensors and development </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.38.1">boards</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.39.1"> section)</span></span></li>
<li><span class="koboSpan" id="kobo.40.1">Male headers for the </span><span class="No-Break"><span class="koboSpan" id="kobo.41.1">development board</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.42.1">Jumper cables</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.43.1">For coding, we will use the </span><strong class="bold"><span class="koboSpan" id="kobo.44.1">Arduino Web Editor</span></strong><span class="koboSpan" id="kobo.45.1">, which includes a large collection of development boards and sensor libraries, along with Arduino IoT Cloud for Thing and dashboard setup. </span><span class="koboSpan" id="kobo.45.2">To develop hardware and sensor designs, we need the </span><strong class="bold"><span class="koboSpan" id="kobo.46.1">Fritzing</span></strong><span class="koboSpan" id="kobo.47.1"> desktop software and the </span><strong class="bold"><span class="koboSpan" id="kobo.48.1">Arduino IDE</span></strong><span class="koboSpan" id="kobo.49.1"> desktop software for pulse-sensor calibration using the </span><strong class="bold"><span class="koboSpan" id="kobo.50.1">Serial Plotter</span></strong><span class="koboSpan" id="kobo.51.1">, which is not available in the Arduino </span><span class="No-Break"><span class="koboSpan" id="kobo.52.1">Web Editor.</span></span></p>
<p><span class="koboSpan" id="kobo.53.1">We will also use </span><strong class="bold"><span class="koboSpan" id="kobo.54.1">Zapier</span></strong><span class="koboSpan" id="kobo.55.1"> to send alerts by email when our sensor detects a heart rate above our specified </span><strong class="bold"><span class="koboSpan" id="kobo.56.1">beats-per-minute</span></strong><span class="koboSpan" id="kobo.57.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.58.1">BPM</span></strong><span class="koboSpan" id="kobo.59.1">) threshold. </span><span class="koboSpan" id="kobo.59.2">You can use a Free/trial account or buy a Zapier Professional plan according to the requirements of your project as Zapier Professional provides more features and functions compared to a Free account. </span><span class="koboSpan" id="kobo.59.3">The code used in this chapter is available from the book’s official GitHub repository </span><span class="No-Break"><span class="koboSpan" id="kobo.60.1">at </span></span><a href="https://github.com/PacktPublishing/Arduino-IoT-Cloud-for-Developers"><span class="No-Break"><span class="koboSpan" id="kobo.61.1">https://github.com/PacktPublishing/Arduino-IoT-Cloud-for-Developers</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.62.1">.</span></span></p>
<h1 id="_idParaDest-254"><a id="_idTextAnchor254"/><span class="koboSpan" id="kobo.63.1">Exploring IoT for smart health solutions</span></h1>
<p><span class="koboSpan" id="kobo.64.1">The </span><strong class="bold"><span class="koboSpan" id="kobo.65.1">Internet of Things</span></strong><span class="koboSpan" id="kobo.66.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.67.1">IoT</span></strong><span class="koboSpan" id="kobo.68.1">) is </span><a id="_idIndexMarker942"/><span class="koboSpan" id="kobo.69.1">playing a significant role in providing smart healthcare solutions that can improve patient outcomes and reduce healthcare costs. </span><span class="koboSpan" id="kobo.69.2">IoT devices can collect real-time data, communicate with other devices, and generate insights that can help healthcare providers make </span><span class="No-Break"><span class="koboSpan" id="kobo.70.1">better decisions.</span></span></p>
<p><span class="koboSpan" id="kobo.71.1">Here are some examples of how IoT can be used in smart </span><span class="No-Break"><span class="koboSpan" id="kobo.72.1">health solutions:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.73.1">Remote patient monitoring</span></strong><span class="koboSpan" id="kobo.74.1">: IoT devices</span><a id="_idIndexMarker943"/><span class="koboSpan" id="kobo.75.1"> can be used to monitor patients’ health in real time, even when they are not in the hospital. </span><span class="koboSpan" id="kobo.75.2">Wearable devices, sensors, and medical-grade IoT devices can collect data on vital signs, BPM rates, blood-glucose levels, and medication adherence. </span><span class="koboSpan" id="kobo.75.3">Healthcare providers can use this data to provide personalized care and </span><span class="No-Break"><span class="koboSpan" id="kobo.76.1">prevent complications.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.77.1">Telemedicine</span></strong><span class="koboSpan" id="kobo.78.1">: IoT devices</span><a id="_idIndexMarker944"/><span class="koboSpan" id="kobo.79.1"> can enable virtual consultations and remote medical services. </span><span class="koboSpan" id="kobo.79.2">Patients can communicate with their healthcare providers using video conferencing, and healthcare providers can remotely monitor patients’ health through IoT devices. </span><span class="koboSpan" id="kobo.79.3">This can improve access to healthcare services, reduce healthcare costs, and improve </span><span class="No-Break"><span class="koboSpan" id="kobo.80.1">patient outcomes.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.81.1">Smart medication management</span></strong><span class="koboSpan" id="kobo.82.1">: IoT </span><a id="_idIndexMarker945"/><span class="koboSpan" id="kobo.83.1">devices can help patients manage their medications more effectively. </span><span class="koboSpan" id="kobo.83.2">IoT-enabled pill dispensers can remind patients when it’s time to take their medication and can track medication usage. </span><span class="koboSpan" id="kobo.83.3">Healthcare providers can use this data to provide personalized care and prevent </span><span class="No-Break"><span class="koboSpan" id="kobo.84.1">medication errors.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.85.1">Predictive maintenance</span></strong><span class="koboSpan" id="kobo.86.1">: IoT devices</span><a id="_idIndexMarker946"/><span class="koboSpan" id="kobo.87.1"> can be used to monitor medical equipment and predict when maintenance is required. </span><span class="koboSpan" id="kobo.87.2">This can help prevent equipment failures, reduce downtime, and improve </span><span class="No-Break"><span class="koboSpan" id="kobo.88.1">patient outcomes.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.89.1">Smart hospital management</span></strong><span class="koboSpan" id="kobo.90.1">: IoT devices </span><a id="_idIndexMarker947"/><span class="koboSpan" id="kobo.91.1">can be used to manage hospital resources more efficiently. </span><span class="koboSpan" id="kobo.91.2">For example, IoT-enabled asset tracking systems can help healthcare providers locate medical equipment quickly, reducing waiting times </span><span class="No-Break"><span class="koboSpan" id="kobo.92.1">for patients.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.93.1">In conclusion, IoT </span><a id="_idIndexMarker948"/><span class="koboSpan" id="kobo.94.1">can enable smart health solutions that improve patient outcomes and reduce healthcare costs. </span><span class="koboSpan" id="kobo.94.2">Healthcare providers can use IoT data to provide personalized care and make more informed decisions. </span><span class="koboSpan" id="kobo.94.3">As IoT technology continues to evolve, we can expect to see even more innovative healthcare solutions in </span><span class="No-Break"><span class="koboSpan" id="kobo.95.1">the future.</span></span></p>
<p><span class="koboSpan" id="kobo.96.1">In this section, we have discussed IoT and smart healthcare and how IoT is beneficial to us in the development of smart healthcare products. </span><span class="koboSpan" id="kobo.96.2">Next, we will take a look at what types of hardware and sensors are required to carry out the exercise in </span><span class="No-Break"><span class="koboSpan" id="kobo.97.1">this chapter.</span></span></p>
<h1 id="_idParaDest-255"><a id="_idTextAnchor255"/><span class="koboSpan" id="kobo.98.1">Knowing the hardware components – sensors and development boards</span></h1>
<p><span class="koboSpan" id="kobo.99.1">The ESP32 series </span><a id="_idIndexMarker949"/><span class="koboSpan" id="kobo.100.1">offers a wide array of development boards that vary in the sizes and pins offered. </span><span class="koboSpan" id="kobo.100.2">In this chapter, we are</span><a id="_idIndexMarker950"/><span class="koboSpan" id="kobo.101.1"> using Seeed Studio’s latest </span><a id="_idIndexMarker951"/><span class="koboSpan" id="kobo.102.1">development board, the </span><strong class="bold"><span class="koboSpan" id="kobo.103.1">XIAO ESP32C3</span></strong><span class="koboSpan" id="kobo.104.1">, as it’s </span><a id="_idIndexMarker952"/><span class="koboSpan" id="kobo.105.1">very compact and smaller in size than other boards, cheaper in cost, and provides 5V along with 3.3V. </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.106.1">Figure 12</span></em></span><em class="italic"><span class="koboSpan" id="kobo.107.1">.1</span></em><span class="koboSpan" id="kobo.108.1"> shows a pin diagram of the XIAO ESP32C3 we </span><span class="No-Break"><span class="koboSpan" id="kobo.109.1">will use:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer185">
<span class="koboSpan" id="kobo.110.1"><img alt="Figure 12.1 – XIAO ESP32C3 pinout diagram" src="image/B19752_12_01.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.111.1">Figure 12.1 – XIAO ESP32C3 pinout diagram</span></p>
<p><span class="koboSpan" id="kobo.112.1">The XIAO ESP32C3 provides multiple pins for digital input/output. </span><span class="koboSpan" id="kobo.112.2">In previous ESP-series boards such as the ESP8266, we only had one analog pin, but we have four on this development board, which removes the biggest hurdle encountered when developing solutions using multiple analog pins. </span><span class="koboSpan" id="kobo.112.3">To get around this on previous ESP-series boards, we had to use </span><strong class="bold"><span class="koboSpan" id="kobo.113.1">ADS1115</span></strong><span class="koboSpan" id="kobo.114.1">/</span><strong class="bold"><span class="koboSpan" id="kobo.115.1">ADS1015</span></strong><span class="koboSpan" id="kobo.116.1"> for extra </span><a id="_idIndexMarker953"/><span class="koboSpan" id="kobo.117.1">analog pins, so this development board will save you some bucks with its four analog pins </span><span class="No-Break"><span class="koboSpan" id="kobo.118.1">by default.</span></span></p>
<p><span class="koboSpan" id="kobo.119.1">Besides these features, XIAO provides a built-in battery charge module and the board is optimized for power consumption, which make this board appropriate for developing wearable devices. </span><span class="koboSpan" id="kobo.119.2">For connectivity, both Wi-Fi and Bluetooth are available, including </span><strong class="bold"><span class="koboSpan" id="kobo.120.1">Bluetooth Low Energy</span></strong><span class="koboSpan" id="kobo.121.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.122.1">BLE</span></strong><span class="koboSpan" id="kobo.123.1">) </span><strong class="bold"><span class="koboSpan" id="kobo.124.1">5 support</span></strong><span class="koboSpan" id="kobo.125.1">, which</span><a id="_idIndexMarker954"/><span class="koboSpan" id="kobo.126.1"> is more specific to IoT use cases. </span><span class="koboSpan" id="kobo.126.2">For further details, please </span><span class="No-Break"><span class="koboSpan" id="kobo.127.1">visit </span></span><a href="https://wiki.seeedstudio.com/XIAO_ESP32C3_Getting_Started/"><span class="No-Break"><span class="koboSpan" id="kobo.128.1">https://wiki.seeedstudio.com/XIAO_ESP32C3_Getting_Started/</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.129.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.130.1">For our current project, we need one analog pin </span><a id="_idIndexMarker955"/><span class="koboSpan" id="kobo.131.1">for the </span><strong class="bold"><span class="koboSpan" id="kobo.132.1">pulse sensor</span></strong><span class="koboSpan" id="kobo.133.1">, and a5V pin for power. </span><span class="koboSpan" id="kobo.133.2">One of the good features of our chosen development board is that we have a 5V power pin, which is not available in most of the ESP32 series </span><span class="No-Break"><span class="koboSpan" id="kobo.134.1">development boards.</span></span></p>
<p><span class="koboSpan" id="kobo.135.1">We use the</span><a id="_idIndexMarker956"/><span class="koboSpan" id="kobo.136.1"> pulse sensor to measure the BPM but there is a variety of other pulse oximeters on the market for BPM and pulse measurement. </span><span class="koboSpan" id="kobo.136.2">The following pulse sensor (</span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.137.1">Figure 12</span></em></span><em class="italic"><span class="koboSpan" id="kobo.138.1">.2</span></em><span class="koboSpan" id="kobo.139.1">) is open source, cheaper, and easier to use than other sensors. </span><span class="koboSpan" id="kobo.139.2">You can also use Chinese-made pulse sensors but you will require controlled conditions while using </span><span class="No-Break"><span class="koboSpan" id="kobo.140.1">these sensors.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer186">
<span class="koboSpan" id="kobo.141.1"><img alt="Figure 12.2 – Pulse sensor and its pinout diagram" src="image/B19752_12_02.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.142.1">Figure 12.2 – Pulse sensor and its pinout diagram</span></p>
<p><span class="koboSpan" id="kobo.143.1">The following is a list of official stores where you can buy the original </span><span class="No-Break"><span class="koboSpan" id="kobo.144.1">pulse sensor:</span></span></p>
<ul>
<li><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.145.1">SparkFun</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.146.1">: </span></span><a href="https://www.sparkfun.com/products/11574"><span class="No-Break"><span class="koboSpan" id="kobo.147.1">https://www.sparkfun.com/products/11574</span></span></a></li>
<li><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.148.1">Adafruit</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.149.1">: </span></span><a href="https://www.adafruit.com/product/1093"><span class="No-Break"><span class="koboSpan" id="kobo.150.1">https://www.adafruit.com/product/1093</span></span></a></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.151.1">Amazon </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.152.1">UK</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.153.1">: </span></span><a href="https://www.amazon.co.uk/dp/B01CPP4QM0"><span class="No-Break"><span class="koboSpan" id="kobo.154.1">https://www.amazon.co.uk/dp/B01CPP4QM0</span></span></a></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.155.1">Amazon </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.156.1">USA</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.157.1">: </span></span><a href="https://www.amazon.com/PulseSensor-com-Original-Pulse-Sensor-project/dp/B01CPP4QM0"><span class="No-Break"><span class="koboSpan" id="kobo.158.1">https://www.amazon.com/PulseSensor-com-Original-Pulse-Sensor-project/dp/B01CPP4QM0</span></span></a></li>
</ul>
<p><span class="koboSpan" id="kobo.159.1">The preceding figure shows the pinout layout of the pulse sensor. </span><em class="italic"><span class="koboSpan" id="kobo.160.1">Pin #1</span></em><span class="koboSpan" id="kobo.161.1"> is the GND pin, which connects to the onboard GND pin. </span><em class="italic"><span class="koboSpan" id="kobo.162.1">Pin #2</span></em><span class="koboSpan" id="kobo.163.1">, VCC, works with both 3.3V and 5V. </span><em class="italic"><span class="koboSpan" id="kobo.164.1">Pin #3</span></em><span class="koboSpan" id="kobo.165.1"> connects to any analog pin on the board. </span><span class="koboSpan" id="kobo.165.2">I connect it to </span><em class="italic"><span class="koboSpan" id="kobo.166.1">Pin #A1</span></em><span class="koboSpan" id="kobo.167.1"> on the board. </span><span class="koboSpan" id="kobo.167.2">You can solder the male </span><a id="_idIndexMarker957"/><span class="koboSpan" id="kobo.168.1">headers to the pulse sensor or directly solder the cables without any </span><span class="No-Break"><span class="koboSpan" id="kobo.169.1">header pins.</span></span></p>
<p><span class="koboSpan" id="kobo.170.1">Measuring a pulse is a very critical and difficult task, but we can benefit from </span><a href="http://pulsesensor.com"><span class="koboSpan" id="kobo.171.1">pulsesensor.com</span></a><span class="koboSpan" id="kobo.172.1">, started by </span><strong class="bold"><span class="koboSpan" id="kobo.173.1">World Famous Electronics LLC</span></strong><span class="koboSpan" id="kobo.174.1"> as a crowd-funding project. </span><span class="koboSpan" id="kobo.174.2">On this site, you can find all the official details including specifications, how the sensor works, and development board </span><span class="No-Break"><span class="koboSpan" id="kobo.175.1">code samples.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.176.1">Important note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.177.1">Chinese-made pulse sensors are good for DIY projects, but even sensors from official stores can’t be deployed in real-world use cases without professional calibration using a real-time </span><strong class="bold"><span class="koboSpan" id="kobo.178.1">electrocardiogram</span></strong><span class="koboSpan" id="kobo.179.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.180.1">ECG</span></strong><span class="koboSpan" id="kobo.181.1">), BPM equipment, and a </span><span class="No-Break"><span class="koboSpan" id="kobo.182.1">doctor’s verification.</span></span></p>
<p><span class="koboSpan" id="kobo.183.1">In this section, we discussed the pulse sensor and where you can buy it, as well as examining its pinout diagram for better understanding. </span><span class="koboSpan" id="kobo.183.2">Next, we will examine the project architecture, covering how to connect the sensors to the </span><span class="No-Break"><span class="koboSpan" id="kobo.184.1">XIAO ESP32C3.</span></span></p>
<h1 id="_idParaDest-256"><a id="_idTextAnchor256"/><span class="koboSpan" id="kobo.185.1">Understanding the project architecture</span></h1>
<p><span class="koboSpan" id="kobo.186.1">In the</span><a id="_idIndexMarker958"/><span class="koboSpan" id="kobo.187.1"> preceding sections, we discussed the sensors and development board in detail. </span><span class="koboSpan" id="kobo.187.2">Now it’s time to get started on the recipe. </span><span class="koboSpan" id="kobo.187.3">In </span><a id="_idIndexMarker959"/><span class="koboSpan" id="kobo.188.1">hardware development, before we start working </span><a id="_idIndexMarker960"/><span class="koboSpan" id="kobo.189.1">with sensors and development boards, we need to develop the design concepts to get a better understanding of how things will be connected. </span><span class="koboSpan" id="kobo.189.2">There are many pieces of software available to design and develop design concepts for electronics projects, but we are going to </span><span class="No-Break"><span class="koboSpan" id="kobo.190.1">use Fritzing.</span></span></p>
<p><span class="koboSpan" id="kobo.191.1">In the following two subsections, we will cover schematics and project design, explaining how to connect the pins to the development board and soldering. </span><span class="koboSpan" id="kobo.191.2">Next, we will do some calibration of the </span><em class="italic"><span class="koboSpan" id="kobo.192.1">pulse sensor fetch-reading threshold</span></em><span class="koboSpan" id="kobo.193.1">, as this is different for different development boards. </span><span class="koboSpan" id="kobo.193.2">This is very important to do before we send the data to </span><span class="No-Break"><span class="koboSpan" id="kobo.194.1">the cloud.</span></span></p>
<h2 id="_idParaDest-257"><a id="_idTextAnchor257"/><span class="koboSpan" id="kobo.195.1">Schematics design and assembly</span></h2>
<p><span class="koboSpan" id="kobo.196.1">The purpose</span><a id="_idIndexMarker961"/><span class="koboSpan" id="kobo.197.1"> of design is to get a clear understanding</span><a id="_idIndexMarker962"/><span class="koboSpan" id="kobo.198.1"> of how the sensors will be connected to the development board. </span><span class="koboSpan" id="kobo.198.2">A clear design helps engineers to develop</span><a id="_idIndexMarker963"/><span class="koboSpan" id="kobo.199.1"> a prototype</span><a id="_idIndexMarker964"/><span class="koboSpan" id="kobo.200.1"> on a </span><strong class="bold"><span class="koboSpan" id="kobo.201.1">breadboard</span></strong><span class="koboSpan" id="kobo.202.1"> or </span><strong class="bold"><span class="koboSpan" id="kobo.203.1">veroboard</span></strong><span class="koboSpan" id="kobo.204.1">. </span><span class="koboSpan" id="kobo.204.2">Another major benefit of effective design is that Fritzing builds hardware schematics and PCB designs in the background according to your design, which can then be adjusted by designers according to the system requirements. </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.205.1">Figure 12</span></em></span><em class="italic"><span class="koboSpan" id="kobo.206.1">.3</span></em><span class="koboSpan" id="kobo.207.1"> shows the project schematic diagram demonstrating how to connect the pulse sensor to the </span><span class="No-Break"><span class="koboSpan" id="kobo.208.1">XIAO ESP32C3:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer187">
<span class="koboSpan" id="kobo.209.1"><img alt="Figure 12.3 – XIAO ESP32C and pulse sensor system design" src="image/B19752_12_03.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.210.1">Figure 12.3 – XIAO ESP32C and pulse sensor system design</span></p>
<p><span class="koboSpan" id="kobo.211.1">The design in the preceding figure provides an overview of how to connect the sensors to the development board. </span><span class="koboSpan" id="kobo.211.2">According to our design, we have 5V and GND from the development board to the pulse sensor. </span><span class="koboSpan" id="kobo.211.3">The pulse sensor is an analog sensor, so we connected its </span><em class="italic"><span class="koboSpan" id="kobo.212.1">Signal</span></em><span class="koboSpan" id="kobo.213.1"> pin to the </span><em class="italic"><span class="koboSpan" id="kobo.214.1">A1</span></em><span class="koboSpan" id="kobo.215.1"> pin of the </span><span class="No-Break"><span class="koboSpan" id="kobo.216.1">development board.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer188">
<span class="koboSpan" id="kobo.217.1"><img alt="Figure 12.4 – Final prototype" src="image/B19752_12_04.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.218.1">Figure 12.4 – Final prototype</span></p>
<p><span class="koboSpan" id="kobo.219.1">After soldering the </span><a id="_idIndexMarker965"/><span class="koboSpan" id="kobo.220.1">male headers to the pulse sensor</span><a id="_idIndexMarker966"/><span class="koboSpan" id="kobo.221.1"> and the XIAO ESP32C3, connect the pins according to the schematic. </span><span class="koboSpan" id="kobo.221.2">There is only one sensor, so no veroboard is required. </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.222.1">Figure 12</span></em></span><em class="italic"><span class="koboSpan" id="kobo.223.1">.4</span></em><span class="koboSpan" id="kobo.224.1"> shows the pulse sensor connected to the XIAO ESP32C3 without any breadboard or Veroboard, but rather, directly connected with jumper wires. </span><span class="koboSpan" id="kobo.224.2">Now, it’s time to calibrate the pulse sensor and get an appropriate threshold value by putting your fingertip on </span><span class="No-Break"><span class="koboSpan" id="kobo.225.1">the sensor.</span></span></p>
<h2 id="_idParaDest-258"><a id="_idTextAnchor258"/><span class="koboSpan" id="kobo.226.1">Sensor calibration</span></h2>
<p><span class="koboSpan" id="kobo.227.1">For</span><a id="_idIndexMarker967"/><span class="koboSpan" id="kobo.228.1"> sensor calibration, we need the Serial Plotter </span><a id="_idIndexMarker968"/><span class="koboSpan" id="kobo.229.1">to identify the pulse value threshold. </span><span class="koboSpan" id="kobo.229.2">Currently, the Arduino Web Editor does not support the Serial Plotter, so we are going to use the Arduino IDE. </span><span class="koboSpan" id="kobo.229.3">To work with the Arduino IDE, we need to install the </span><strong class="bold"><span class="koboSpan" id="kobo.230.1">Seeed Studio XIAO ESP32C3 series</span></strong><span class="koboSpan" id="kobo.231.1"> development board and the </span><a href="http://pulsesensor.com"><span class="No-Break"><span class="koboSpan" id="kobo.232.1">pulsesensor.com</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.233.1"> library.</span></span></p>
<p><span class="koboSpan" id="kobo.234.1">To install the ESP32 series development board in the Arduino IDE, firstly, add the board’s definition file in </span><span class="No-Break"><span class="koboSpan" id="kobo.235.1">the preferences:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.236.1">Navigate to </span><strong class="bold"><span class="koboSpan" id="kobo.237.1">File</span></strong><span class="koboSpan" id="kobo.238.1"> &gt; </span><strong class="bold"><span class="koboSpan" id="kobo.239.1">Preferences</span></strong><span class="koboSpan" id="kobo.240.1">, and fill the </span><strong class="bold"><span class="koboSpan" id="kobo.241.1">Additional Boards Manager URLs</span></strong><span class="koboSpan" id="kobo.242.1"> field with the following </span><span class="No-Break"><span class="koboSpan" id="kobo.243.1">URL: </span></span><a href="https://raw.githubusercontent.com/espressif/arduino-esp32/gh-pages/package_esp32_dev_index.json"><span class="No-Break"><span class="koboSpan" id="kobo.244.1">https://raw.githubusercontent.com/espressif/arduino-esp32/gh-pages/package_esp32_dev_index.json</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.245.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.246.1">Then, navigate to </span><strong class="bold"><span class="koboSpan" id="kobo.247.1">Tools</span></strong><span class="koboSpan" id="kobo.248.1"> &gt; </span><strong class="bold"><span class="koboSpan" id="kobo.249.1">Board</span></strong><span class="koboSpan" id="kobo.250.1"> &gt; </span><strong class="bold"><span class="koboSpan" id="kobo.251.1">Boards Manager...</span></strong><span class="koboSpan" id="kobo.252.1">, type </span><strong class="source-inline"><span class="koboSpan" id="kobo.253.1">esp32</span></strong><span class="koboSpan" id="kobo.254.1"> in the search box, select the latest version of </span><strong class="bold"><span class="koboSpan" id="kobo.255.1">**esp32**</span></strong><span class="koboSpan" id="kobo.256.1">, and </span><span class="No-Break"><span class="koboSpan" id="kobo.257.1">install it.</span></span></li>
<li><span class="koboSpan" id="kobo.258.1">Finally, select the board by navigating to </span><strong class="bold"><span class="koboSpan" id="kobo.259.1">Tools</span></strong><span class="koboSpan" id="kobo.260.1"> &gt; </span><strong class="bold"><span class="koboSpan" id="kobo.261.1">Board</span></strong><span class="koboSpan" id="kobo.262.1"> &gt; </span><strong class="bold"><span class="koboSpan" id="kobo.263.1">ESP32 Arduino</span></strong><span class="koboSpan" id="kobo.264.1"> and selecting </span><strong class="bold"><span class="koboSpan" id="kobo.265.1">XIAO_ESP32C3</span></strong><span class="koboSpan" id="kobo.266.1">. </span><span class="koboSpan" id="kobo.266.2">The list of boards is a little long and you will need to scroll to the bottom to </span><span class="No-Break"><span class="koboSpan" id="kobo.267.1">find it.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.268.1">It’s time to install the pulse sensor library. </span><span class="koboSpan" id="kobo.268.2">Navigate to </span><strong class="bold"><span class="koboSpan" id="kobo.269.1">Sketch</span></strong><span class="koboSpan" id="kobo.270.1"> &gt; </span><strong class="bold"><span class="koboSpan" id="kobo.271.1">Include Library</span></strong><span class="koboSpan" id="kobo.272.1"> &gt; </span><strong class="bold"><span class="koboSpan" id="kobo.273.1">Manage Libraries</span></strong><span class="koboSpan" id="kobo.274.1">. </span><span class="koboSpan" id="kobo.274.2">Type </span><strong class="source-inline"><span class="koboSpan" id="kobo.275.1">pulsesensor playground</span></strong><span class="koboSpan" id="kobo.276.1"> into the search bar. </span><span class="koboSpan" id="kobo.276.2">Only one library will </span><a id="_idIndexMarker969"/><span class="koboSpan" id="kobo.277.1">be returned here – </span><span class="No-Break"><span class="koboSpan" id="kobo.278.1">install it.</span></span></p>
<p><span class="koboSpan" id="kobo.279.1">Now we </span><a id="_idIndexMarker970"/><span class="koboSpan" id="kobo.280.1">are ready to proceed to the calibration step. </span><span class="koboSpan" id="kobo.280.2">Navigate to </span><strong class="bold"><span class="koboSpan" id="kobo.281.1">File</span></strong><span class="koboSpan" id="kobo.282.1"> &gt; </span><strong class="bold"><span class="koboSpan" id="kobo.283.1">Examples</span></strong><span class="koboSpan" id="kobo.284.1"> &gt; </span><strong class="bold"><span class="koboSpan" id="kobo.285.1">PulseSensor Playground</span></strong><span class="koboSpan" id="kobo.286.1"> &gt; </span><strong class="bold"><span class="koboSpan" id="kobo.287.1">Getting Started Project</span></strong><span class="koboSpan" id="kobo.288.1">. </span><span class="koboSpan" id="kobo.288.2">Here, you will get the template code for calibration, to which we will make the </span><span class="No-Break"><span class="koboSpan" id="kobo.289.1">following changes:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.290.1">
//  Variables
int PulseSensorPurplePin = A1;        // Pulse Sensor PURPLE WIRE connected to ANALOG PIN 0
int LED = 10;   //  The on-board Arduino LED</span></pre> <p><span class="koboSpan" id="kobo.291.1">Set the </span><strong class="source-inline"><span class="koboSpan" id="kobo.292.1">PulseSensorPurplePin</span></strong><span class="koboSpan" id="kobo.293.1"> variable to </span><strong class="source-inline"><span class="koboSpan" id="kobo.294.1">A1</span></strong><span class="koboSpan" id="kobo.295.1">. </span><span class="koboSpan" id="kobo.295.2">Remember to never use a simple </span><strong class="source-inline"><span class="koboSpan" id="kobo.296.1">1</span></strong><span class="koboSpan" id="kobo.297.1"> as it will give you different values. </span><span class="koboSpan" id="kobo.297.2">Next, assign </span><strong class="source-inline"><span class="koboSpan" id="kobo.298.1">10</span></strong><span class="koboSpan" id="kobo.299.1"> to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.300.1">LED</span></strong><span class="koboSpan" id="kobo.301.1"> variable. </span><span class="koboSpan" id="kobo.301.2">After these modifications, upload the code to the board. </span><span class="koboSpan" id="kobo.301.3">To monitor the recorded values in graph format, navigate to </span><strong class="bold"><span class="koboSpan" id="kobo.302.1">Tools</span></strong><span class="koboSpan" id="kobo.303.1"> &gt; </span><strong class="bold"><span class="koboSpan" id="kobo.304.1">Serial Plotter</span></strong><span class="koboSpan" id="kobo.305.1">. </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.306.1">Figure 12</span></em></span><em class="italic"><span class="koboSpan" id="kobo.307.1">.5</span></em><span class="koboSpan" id="kobo.308.1"> shows the Serial Plotter presenting all the values in the form of a graph. </span><span class="koboSpan" id="kobo.308.2">The threshold values are marked by the </span><span class="No-Break"><span class="koboSpan" id="kobo.309.1">red box.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer189">
<span class="koboSpan" id="kobo.310.1"><img alt="Figure 12.5 – Pulse sensor raw-readings graph using the Serial Plotter" src="image/B19752_12_05.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.311.1">Figure 12.5 – Pulse sensor raw-readings graph using the Serial Plotter</span></p>
<p><span class="koboSpan" id="kobo.312.1">Put a </span><a id="_idIndexMarker971"/><span class="koboSpan" id="kobo.313.1">finger on the front side of the pulse sensor, which is marked with a white heart shape. </span><span class="koboSpan" id="kobo.313.2">Wait for some time for the readings to stabilize on the Serial Plotter. </span><span class="koboSpan" id="kobo.313.3">After a few seconds, you should see stable readings as shown in the</span><a id="_idIndexMarker972"/><span class="koboSpan" id="kobo.314.1"> preceding figure. </span><span class="koboSpan" id="kobo.314.2">Mark the lowest level as the threshold. </span><span class="koboSpan" id="kobo.314.3">In my case, I take </span><strong class="bold"><span class="koboSpan" id="kobo.315.1">3500</span></strong><span class="koboSpan" id="kobo.316.1"> as the threshold value to </span><span class="No-Break"><span class="koboSpan" id="kobo.317.1">avoid noise.</span></span></p>
<p><span class="koboSpan" id="kobo.318.1">After that, download the </span><strong class="source-inline"><span class="koboSpan" id="kobo.319.1">PulseSensor_BPM_Alternative</span></strong><span class="koboSpan" id="kobo.320.1"> code from the GitHub repository under </span><a href="B19752_12.xhtml#_idTextAnchor251"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.321.1">Chapter 12</span></em></span></a><span class="koboSpan" id="kobo.322.1">. </span><span class="koboSpan" id="kobo.322.2">This is some code modified by us that we’ll use to display the BPM. </span><span class="koboSpan" id="kobo.322.3">But before uploading the code to the board, modify the values </span><span class="No-Break"><span class="koboSpan" id="kobo.323.1">as follows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.324.1">
const int PULSE_INPUT = A1;
const int PULSE_BLINK = 10;
const int PULSE_FADE = 5;
const int THRESHOLD = 3450;   // Adjust this number to avoid noise when idle</span></pre> <p><span class="koboSpan" id="kobo.325.1">Assign </span><strong class="source-inline"><span class="koboSpan" id="kobo.326.1">A1</span></strong><span class="koboSpan" id="kobo.327.1"> to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.328.1">PULSE_INPUT</span></strong><span class="koboSpan" id="kobo.329.1"> variable, </span><strong class="source-inline"><span class="koboSpan" id="kobo.330.1">10</span></strong><span class="koboSpan" id="kobo.331.1"> to </span><strong class="source-inline"><span class="koboSpan" id="kobo.332.1">PULSE_BLINK</span></strong><span class="koboSpan" id="kobo.333.1">, and set the </span><strong class="source-inline"><span class="koboSpan" id="kobo.334.1">THRESHOLD</span></strong><span class="koboSpan" id="kobo.335.1"> value according to your stabilized reading taken from the Serial Plotter. </span><span class="koboSpan" id="kobo.335.2">As stated, I am using </span><strong class="source-inline"><span class="koboSpan" id="kobo.336.1">3500</span></strong><span class="koboSpan" id="kobo.337.1"> from my graph. </span><span class="koboSpan" id="kobo.337.2">Upload the code to the board and observe the BPM readings</span><a id="_idIndexMarker973"/><span class="koboSpan" id="kobo.338.1"> in the Serial Monitor. </span><span class="koboSpan" id="kobo.338.2">Place a finger on the top of the</span><a id="_idIndexMarker974"/><span class="koboSpan" id="kobo.339.1"> sensor and you will get different BPM readings. </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.340.1">Figure 12</span></em></span><em class="italic"><span class="koboSpan" id="kobo.341.1">.6</span></em><span class="koboSpan" id="kobo.342.1"> demonstrates what this should </span><span class="No-Break"><span class="koboSpan" id="kobo.343.1">look like:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer190">
<span class="koboSpan" id="kobo.344.1"><img alt="Figure 12.6 – BPM values in the Serial Monitor" src="image/B19752_12_06.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.345.1">Figure 12.6 – BPM values in the Serial Monitor</span></p>
<p><span class="koboSpan" id="kobo.346.1">The preceding figure shows random BPM values, and when we put a finger on the sensor, it detects </span><strong class="bold"><span class="koboSpan" id="kobo.347.1">96</span></strong><span class="koboSpan" id="kobo.348.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.349.1">100</span></strong><span class="koboSpan" id="kobo.350.1"> BPM. </span><span class="koboSpan" id="kobo.350.2">You can play with the sensor and verify the readings with any professional smartwatch. </span><span class="koboSpan" id="kobo.350.3">Next, we need to set up a Thing, some code, and a dashboard in the Arduino IoT Cloud to prepare our </span><span class="No-Break"><span class="koboSpan" id="kobo.351.1">IoT project.</span></span></p>
<h1 id="_idParaDest-259"><a id="_idTextAnchor259"/><span class="koboSpan" id="kobo.352.1">Setting up a Thing, network credentials, cloud variables, and code</span></h1>
<p><span class="koboSpan" id="kobo.353.1">After </span><a id="_idIndexMarker975"/><span class="koboSpan" id="kobo.354.1">setting up the hardware, it’s time to set up a Thing in the Arduino IoT Cloud. </span><span class="koboSpan" id="kobo.354.2">For this project, we need one cloud variable to fetch BPM reading</span><a id="_idIndexMarker976"/><span class="koboSpan" id="kobo.355.1"> from the device. </span><span class="koboSpan" id="kobo.355.2">The network settings will be different from those of Arduino IoT development boards as we are using an ESP series board. </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.356.1">Figure 12</span></em></span><em class="italic"><span class="koboSpan" id="kobo.357.1">.7</span></em><span class="koboSpan" id="kobo.358.1"> shows the complete Thing details including cloud variables, device info, and </span><span class="No-Break"><span class="koboSpan" id="kobo.359.1">network configurations:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer191">
<span class="koboSpan" id="kobo.360.1"><img alt="Figure 12.7 – Tracking and notifying about your heart rate Thing setup" src="image/B19752_12_07.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.361.1">Figure 12.7 – Tracking and notifying about your heart rate Thing setup</span></p>
<p><span class="koboSpan" id="kobo.362.1">Set up a new </span><strong class="bold"><span class="koboSpan" id="kobo.363.1">Thing</span></strong><span class="koboSpan" id="kobo.364.1"> with the name </span><strong class="source-inline"><span class="koboSpan" id="kobo.365.1">Tracking and notifying about your heart rate</span></strong><span class="koboSpan" id="kobo.366.1">. </span><span class="koboSpan" id="kobo.366.2">Then, proceed to the following sections of this chapter, which will take us through the following steps to create the variables, associate the device, set up the network configuration, and finally, apply </span><span class="No-Break"><span class="koboSpan" id="kobo.367.1">the code:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.368.1">Firstly, we need to set up one cloud variable for </span><strong class="bold"><span class="koboSpan" id="kobo.369.1">BPM</span></strong><span class="koboSpan" id="kobo.370.1">. </span><span class="koboSpan" id="kobo.370.2">The complete details regarding cloud variables are available in the following </span><em class="italic"><span class="koboSpan" id="kobo.371.1">Cloud </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.372.1">variables</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.373.1"> section.</span></span></li>
<li><span class="koboSpan" id="kobo.374.1">After that, we </span><a id="_idIndexMarker977"/><span class="koboSpan" id="kobo.375.1">need to associate the device with the Thing. </span><span class="koboSpan" id="kobo.375.2">In our current project, we are using the XIAO ESP32C3, so the wizard will be different from that for Arduino boards. </span><span class="koboSpan" id="kobo.375.3">The complete details are available in the </span><em class="italic"><span class="koboSpan" id="kobo.376.1">Device </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.377.1">association</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.378.1"> section.</span></span></li>
<li><span class="koboSpan" id="kobo.379.1">Next, we </span><a id="_idIndexMarker978"/><span class="koboSpan" id="kobo.380.1">need to set up the network configuration for the device, but this time, we need to provide a security key for ESP-series boards to make the connection secure (whereas Arduino-compatible boards are configured by the Arduino IoT Cloud automatically during the device </span><span class="No-Break"><span class="koboSpan" id="kobo.381.1">setup wizard).</span></span></li>
<li><span class="koboSpan" id="kobo.382.1">Lastly, we will set up the webhook toward the end of the chapter, along with the notification service </span><span class="No-Break"><span class="koboSpan" id="kobo.383.1">using Zapier.</span></span></li>
</ol>
<h2 id="_idParaDest-260"><a id="_idTextAnchor260"/><span class="koboSpan" id="kobo.384.1">Cloud variables</span></h2>
<p><span class="koboSpan" id="kobo.385.1">The following table</span><a id="_idIndexMarker979"/><span class="koboSpan" id="kobo.386.1"> outlines the properties that we need to use during cloud variable creation. </span><span class="koboSpan" id="kobo.386.2">For BPM, we could just use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.387.1">integer</span></strong><span class="koboSpan" id="kobo.388.1"> data type, but thanks to the Arduino IoT Cloud extended group of variables, we can choose the specific </span><strong class="source-inline"><span class="koboSpan" id="kobo.389.1">Heart rate</span></strong><span class="koboSpan" id="kobo.390.1"> variable type. </span><span class="koboSpan" id="kobo.390.2">Next, make sure you use the same variable declaration as in the table; otherwise, you will need to modify the example code according to your </span><span class="No-Break"><span class="koboSpan" id="kobo.391.1">own naming.</span></span></p>
<p><span class="koboSpan" id="kobo.392.1">For </span><strong class="bold"><span class="koboSpan" id="kobo.393.1">Permission</span></strong><span class="koboSpan" id="kobo.394.1">, while we do have a </span><strong class="bold"><span class="koboSpan" id="kobo.395.1">Read/Write</span></strong><span class="koboSpan" id="kobo.396.1"> option, I chose </span><strong class="bold"><span class="koboSpan" id="kobo.397.1">Read Only</span></strong><span class="koboSpan" id="kobo.398.1"> as we only want to receive data from the device, as opposed to dashboard modification, so </span><strong class="bold"><span class="koboSpan" id="kobo.399.1">Read Only</span></strong><span class="koboSpan" id="kobo.400.1"> mode will avoid issues in data consistency. </span><strong class="bold"><span class="koboSpan" id="kobo.401.1">Update Policy</span></strong><span class="koboSpan" id="kobo.402.1"> is set to </span><strong class="bold"><span class="koboSpan" id="kobo.403.1">On change</span></strong><span class="koboSpan" id="kobo.404.1"> as the device will send the data whenever there is any change detected in the </span><span class="No-Break"><span class="koboSpan" id="kobo.405.1">BPM value:</span></span></p>
<table class="No-Table-Style _idGenTablePara-1" id="table001-8">
<colgroup>
<col/>
<col/>
<col/>
<col/>
<col/>
<col/>
</colgroup>
<tbody>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.406.1">S#</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.407.1">Variable Name</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.408.1">Variable Type</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.409.1">Declaration</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.410.1">Permission</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.411.1">Update Policy</span></strong></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.412.1">1</span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.413.1">BPM</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.414.1">Heart rate</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.415.1">bPM</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.416.1">Read Only</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.417.1">On change</span></span></p>
</td>
</tr>
</tbody>
</table>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.418.1">Table 12.1 – Cloud variable for our Thing</span></p>
<p><span class="koboSpan" id="kobo.419.1">In this section, we</span><a id="_idIndexMarker980"/><span class="koboSpan" id="kobo.420.1"> have created the cloud variable that receives the heart rate value in BPM from the sensor device. </span><span class="koboSpan" id="kobo.420.2">In the next section, we will associate the device with </span><span class="No-Break"><span class="koboSpan" id="kobo.421.1">the Thing.</span></span></p>
<h2 id="_idParaDest-261"><a id="_idTextAnchor261"/><span class="koboSpan" id="kobo.422.1">Device association</span></h2>
<p><span class="koboSpan" id="kobo.423.1">After variable </span><a id="_idIndexMarker981"/><span class="koboSpan" id="kobo.424.1">creation, it’s time to add the device and associate it with the Thing. </span><span class="koboSpan" id="kobo.424.2">Before adding the device, connect the development board to the computer and open the </span><strong class="bold"><span class="koboSpan" id="kobo.425.1">Arduino Create Agent</span></strong><span class="koboSpan" id="kobo.426.1"> application. </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.427.1">Figure 12</span></em></span><em class="italic"><span class="koboSpan" id="kobo.428.1">.8</span></em><span class="koboSpan" id="kobo.429.1"> shows the device setup wizard where we have selected </span><strong class="bold"><span class="koboSpan" id="kobo.430.1">ESP32</span></strong><span class="koboSpan" id="kobo.431.1"> and then </span><strong class="bold"><span class="koboSpan" id="kobo.432.1">XIAO_ESP32C3</span></strong><span class="koboSpan" id="kobo.433.1"> from </span><span class="No-Break"><span class="koboSpan" id="kobo.434.1">the dropdown:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer192">
<span class="koboSpan" id="kobo.435.1"><img alt="Figure 12.8 – Device selection wizard" src="image/B19752_12_08.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.436.1">Figure 12.8 – Device selection wizard</span></p>
<ol>
<li><span class="koboSpan" id="kobo.437.1">Click on the </span><strong class="bold"><span class="koboSpan" id="kobo.438.1">Select Device</span></strong><span class="koboSpan" id="kobo.439.1"> button under the </span><strong class="bold"><span class="koboSpan" id="kobo.440.1">Associated Devices</span></strong><span class="koboSpan" id="kobo.441.1"> section on the Thing page. </span><span class="koboSpan" id="kobo.441.2">A popup will appear showing all the devices that are already available. </span><span class="koboSpan" id="kobo.441.3">If you have already added your XIAO ESP32C3, select it. </span><span class="koboSpan" id="kobo.441.4">Otherwise, click on </span><strong class="bold"><span class="koboSpan" id="kobo.442.1">SET UP </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.443.1">NEW DEVICE</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.444.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.445.1">Next, click</span><a id="_idIndexMarker982"/><span class="koboSpan" id="kobo.446.1"> on the </span><strong class="bold"><span class="koboSpan" id="kobo.447.1">Third Party device</span></strong><span class="koboSpan" id="kobo.448.1"> option. </span><span class="koboSpan" id="kobo.448.2">Select </span><strong class="bold"><span class="koboSpan" id="kobo.449.1">ESP32</span></strong><span class="koboSpan" id="kobo.450.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.451.1">XIAO_ESP32C3</span></strong><span class="koboSpan" id="kobo.452.1"> from the dropdown and click on the </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.453.1">CONTINUE</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.454.1"> button.</span></span></li>
<li><span class="koboSpan" id="kobo.455.1">Fill in the </span><strong class="bold"><span class="koboSpan" id="kobo.456.1">Device Name</span></strong><span class="koboSpan" id="kobo.457.1"> field and click on the </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.458.1">Next</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.459.1"> button.</span></span></li>
<li><span class="koboSpan" id="kobo.460.1">On the final wizard screen, the </span><strong class="bold"><span class="koboSpan" id="kobo.461.1">Device ID</span></strong><span class="koboSpan" id="kobo.462.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.463.1">Secret Key</span></strong><span class="koboSpan" id="kobo.464.1"> values will be displayed. </span><span class="koboSpan" id="kobo.464.2">Copy the </span><strong class="bold"><span class="koboSpan" id="kobo.465.1">Secret Key</span></strong><span class="koboSpan" id="kobo.466.1"> value to a safe place as it will be needed later during the </span><span class="No-Break"><span class="koboSpan" id="kobo.467.1">network configuration.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.468.1">In this section, we associated the XIAO ESP32C3 device with the Thing. </span><span class="koboSpan" id="kobo.468.2">The device association process is somewhat different to adding the Arduino MKR1010 to a Thing. </span><span class="koboSpan" id="kobo.468.3">Next, let’s complete the </span><span class="No-Break"><span class="koboSpan" id="kobo.469.1">network settings.</span></span></p>
<h2 id="_idParaDest-262"><a id="_idTextAnchor262"/><span class="koboSpan" id="kobo.470.1">Network</span></h2>
<p><span class="koboSpan" id="kobo.471.1">After </span><a id="_idIndexMarker983"/><span class="koboSpan" id="kobo.472.1">associating the device with the Thing, it is time to configure the Wi-Fi settings for device communication. </span><span class="koboSpan" id="kobo.472.2">Fill in the form shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.473.1">Figure 12</span></em></span><em class="italic"><span class="koboSpan" id="kobo.474.1">.9</span></em><span class="koboSpan" id="kobo.475.1"> with your </span><strong class="bold"><span class="koboSpan" id="kobo.476.1">Wi-Fi Name</span></strong><span class="koboSpan" id="kobo.477.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.478.1">Password</span></strong><span class="koboSpan" id="kobo.479.1"> values. </span><span class="koboSpan" id="kobo.479.2">The last field here is the </span><strong class="bold"><span class="koboSpan" id="kobo.480.1">Secret Key</span></strong><span class="koboSpan" id="kobo.481.1"> field. </span><span class="koboSpan" id="kobo.481.2">Paste the secret key value in here that we received from the system during </span><span class="No-Break"><span class="koboSpan" id="kobo.482.1">device creation.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer193">
<span class="koboSpan" id="kobo.483.1"><img alt="Figure 12.9 – Network configuration for ﻿the Thing" src="image/B19752_12_09.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.484.1">Figure 12.9 – Network configuration for the Thing</span></p>
<p><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.485.1">Figure 12</span></em></span><em class="italic"><span class="koboSpan" id="kobo.486.1">.9</span></em><span class="koboSpan" id="kobo.487.1"> shows </span><a id="_idIndexMarker984"/><span class="koboSpan" id="kobo.488.1">how it should look once you’ve entered all the relevant values. </span><span class="koboSpan" id="kobo.488.2">In the next subsection, we will cover the coding for </span><span class="No-Break"><span class="koboSpan" id="kobo.489.1">the device.</span></span></p>
<h2 id="_idParaDest-263"><a id="_idTextAnchor263"/><span class="koboSpan" id="kobo.490.1">Coding</span></h2>
<p><span class="koboSpan" id="kobo.491.1">The code</span><a id="_idIndexMarker985"/><span class="koboSpan" id="kobo.492.1"> for this chapter is available in the book’s official GitHub repository. </span><span class="koboSpan" id="kobo.492.2">Download the </span><strong class="source-inline"><span class="koboSpan" id="kobo.493.1">Tracking_and_notifying_Your_Heart_Rate_mar31a</span></strong><span class="koboSpan" id="kobo.494.1"> code from the repository and import it to the Arduino </span><span class="No-Break"><span class="koboSpan" id="kobo.495.1">Web Editor.</span></span></p>
<p><span class="koboSpan" id="kobo.496.1">You can download the code and add it to your Thing by navigating to the </span><strong class="bold"><span class="koboSpan" id="kobo.497.1">Sketch</span></strong><span class="koboSpan" id="kobo.498.1"> tab. </span><span class="koboSpan" id="kobo.498.2">We will not discuss the code at length as you will get the gist after reading the code yourself, but I will explain the main workflow with which we initialize all the variables and constants in </span><span class="No-Break"><span class="koboSpan" id="kobo.499.1">the setup.</span></span></p>
<p><span class="koboSpan" id="kobo.500.1">Remember</span><a id="_idIndexMarker986"/><span class="koboSpan" id="kobo.501.1"> to never use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.502.1">delay</span></strong><span class="koboSpan" id="kobo.503.1"> method as it will create blocking in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.504.1">ArduinoCloud.update()</span></strong><span class="koboSpan" id="kobo.505.1"> method. </span><span class="koboSpan" id="kobo.505.2">But before moving on to the code, we need to set the </span><strong class="source-inline"><span class="koboSpan" id="kobo.506.1">PULSE_INPUT</span></strong><span class="koboSpan" id="kobo.507.1"> variable to pin </span><strong class="source-inline"><span class="koboSpan" id="kobo.508.1">A1</span></strong><span class="koboSpan" id="kobo.509.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.510.1">PULSE_BLINK</span></strong><span class="koboSpan" id="kobo.511.1"> to digital pin </span><strong class="source-inline"><span class="koboSpan" id="kobo.512.1">10</span></strong><span class="koboSpan" id="kobo.513.1"> for the LED, and set </span><strong class="source-inline"><span class="koboSpan" id="kobo.514.1">THRESHOLD</span></strong><span class="koboSpan" id="kobo.515.1"> with your </span><span class="No-Break"><span class="koboSpan" id="kobo.516.1">calibration value:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.517.1">
const int PULSE_INPUT = A1;
const int PULSE_BLINK = 10;
const int PULSE_FADE = 5;
const int THRESHOLD = 3450; // Adjust this number to avoid noise when you will start getting values from sensor</span></pre> <p><span class="koboSpan" id="kobo.518.1">After configuring the preceding variables with the appropriate values, it’s time to explore the </span><span class="No-Break"><span class="koboSpan" id="kobo.519.1">loop method:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.520.1">
  if (pulseSensor.sawNewSample()) {
    if (--samplesUntilReport == (byte) 0) {
      samplesUntilReport = SAMPLES_PER_SERIAL_SAMPLE;
      //pulseSensor.outputSample();
      if (pulseSensor.sawStartOfBeat()) {
          bPM=pulseSensor.getBeatsPerMinute();
           Serial.print(bPM);
           Serial.println(" bpm");
      }
    }
    /*******
      Here is a good place to add code that could take up
      to a millisecond or so to run.
</span><span class="koboSpan" id="kobo.520.2">    *******/
  }
  /******
     Don't add code here, because it could slow the sampling
     from the PulseSensor.
</span><span class="koboSpan" id="kobo.520.3">  ******/</span></pre> <p><span class="koboSpan" id="kobo.521.1">In the loop </span><a id="_idIndexMarker987"/><span class="koboSpan" id="kobo.522.1">method, the development board calls </span><strong class="source-inline"><span class="koboSpan" id="kobo.523.1">pulseSensor.sawNewSample()</span></strong><span class="koboSpan" id="kobo.524.1"> to fetch new samples if they exist. </span><span class="koboSpan" id="kobo.524.2">Other than that, it will not call any activity, which is why you will see a delay in readings returned if there is no change found by the system in the BPM data. </span><span class="koboSpan" id="kobo.524.3">If any change occurred in the sensor readings, then BPM readings will verify using the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.525.1">pulseSensor.sawStartOfBeat()</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.526.1"> method.</span></span></p>
<p><span class="koboSpan" id="kobo.527.1">In the previous section where we created the cloud variable, recall the cloud variable declaration – our </span><strong class="source-inline"><span class="koboSpan" id="kobo.528.1">pulseSensor.getBeatsPerMinute();</span></strong><span class="koboSpan" id="kobo.529.1"> method assigns the sensor reading to that </span><strong class="bold"><span class="koboSpan" id="kobo.530.1">bPM </span></strong><span class="koboSpan" id="kobo.531.1">variable. </span><span class="koboSpan" id="kobo.531.2">This cloud variable declaration is available in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.532.1">thingProperties.h</span></strong><span class="koboSpan" id="kobo.533.1"> file. </span><span class="koboSpan" id="kobo.533.2">So, when you assign the values to these constants, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.534.1">ArduinoCloud.update()</span></strong><span class="koboSpan" id="kobo.535.1"> method in the loop will automatically send the data to the cloud. </span><span class="koboSpan" id="kobo.535.2">Finally, upload the code to the device and verify the readings returned using the </span><span class="No-Break"><span class="koboSpan" id="kobo.536.1">Serial Monitor.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.537.1">Important note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.538.1">If you used different </span><em class="italic"><span class="koboSpan" id="kobo.539.1">naming</span></em><span class="koboSpan" id="kobo.540.1"> in the variable declaration, then update the code according to your naming scheme. </span><span class="koboSpan" id="kobo.540.2">It would be better, however, if you followed the steps according to the book first and then change the cloud variable names later and modify your </span><span class="No-Break"><span class="koboSpan" id="kobo.541.1">code respectively.</span></span></p>
<p class="callout"><span class="koboSpan" id="kobo.542.1">Never use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.543.1">delay</span></strong><span class="koboSpan" id="kobo.544.1"> method, which will create a block for the </span><strong class="source-inline"><span class="koboSpan" id="kobo.545.1">ArduinoCloud.update()</span></strong><span class="koboSpan" id="kobo.546.1"> method, and don’t put code at the end of the loop method, as it will cause a delay in the pulse </span><span class="No-Break"><span class="koboSpan" id="kobo.547.1">sensor readings.</span></span></p>
<p class="callout"><span class="koboSpan" id="kobo.548.1">The Arduino IoT Cloud only updates the value on the dashboard whenever the variable value is changed. </span><span class="koboSpan" id="kobo.548.2">For example, if the heart beat is </span><strong class="source-inline"><span class="koboSpan" id="kobo.549.1">80</span></strong><span class="koboSpan" id="kobo.550.1"> and after 5 minutes it’s still the same, then the Arduino IoT Cloud will not record the value, so don’t get confused if values do not appear to change on the graph. </span><span class="koboSpan" id="kobo.550.2">Another benefit of this feature is you will not get duplicated data when you export </span><span class="No-Break"><span class="koboSpan" id="kobo.551.1">the content.</span></span></p>
<p><span class="koboSpan" id="kobo.552.1">In this section, we</span><a id="_idIndexMarker988"/><span class="koboSpan" id="kobo.553.1"> discussed the code in depth and guided you through the code operation and how to set the threshold values. </span><span class="koboSpan" id="kobo.553.2">In the next section, we are going to set up the dashboard to visualize the BPM value in different formats for </span><span class="No-Break"><span class="koboSpan" id="kobo.554.1">better understanding.</span></span></p>
<h1 id="_idParaDest-264"><a id="_idTextAnchor264"/><span class="koboSpan" id="kobo.555.1">Setting up a dashboard for web and mobile</span></h1>
<p><span class="koboSpan" id="kobo.556.1">After uploading</span><a id="_idIndexMarker989"/><span class="koboSpan" id="kobo.557.1"> the code to the device, it’s now time to set up the dashboard for web and mobile to visualize the data with different widgets. </span><span class="koboSpan" id="kobo.557.2">The following figure demonstrates how this visualization </span><span class="No-Break"><span class="koboSpan" id="kobo.558.1">might look:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer194">
<span class="koboSpan" id="kobo.559.1"><img alt="Figure 12.10 – Thing dashboard" src="image/B19752_12_10.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.560.1">Figure 12.10 – Thing dashboard</span></p>
<p><span class="koboSpan" id="kobo.561.1">In the</span><a id="_idIndexMarker990"/><span class="koboSpan" id="kobo.562.1"> preceding figure, we have a BPM reading, and to visualize it, we have used two widgets, </span><strong class="bold"><span class="koboSpan" id="kobo.563.1">Value</span></strong><span class="koboSpan" id="kobo.564.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.565.1">Advanced Chart</span></strong><span class="koboSpan" id="kobo.566.1">. </span><span class="koboSpan" id="kobo.566.2">The </span><strong class="bold"><span class="koboSpan" id="kobo.567.1">Value</span></strong><span class="koboSpan" id="kobo.568.1"> widget on the left of the screen shows the real-time </span><strong class="bold"><span class="koboSpan" id="kobo.569.1">BPM</span></strong><span class="koboSpan" id="kobo.570.1"> values, while the </span><strong class="bold"><span class="koboSpan" id="kobo.571.1">Advanced Chart</span></strong><span class="koboSpan" id="kobo.572.1"> widget illustrates the real-time readings as well as historical readings for proper analysis, just like an ECG machine display. </span><span class="koboSpan" id="kobo.572.2">Both widgets are attached to the BPM </span><span class="No-Break"><span class="koboSpan" id="kobo.573.1">cloud variable.</span></span></p>
<p><span class="koboSpan" id="kobo.574.1">The </span><strong class="bold"><span class="koboSpan" id="kobo.575.1">Advanced Chart </span></strong><span class="koboSpan" id="kobo.576.1">widget is a new addition to the widgets on offer, and comes with a variety of features including different chart formats such as line, spline, spline/line area, and bar charts, with the option to customize the color of the plot. </span><span class="koboSpan" id="kobo.576.2">Another big feature is the ability to visualize multiple cloud variables on the same chart, which is not available in simpler chart widgets. </span><span class="koboSpan" id="kobo.576.3">We will use that feature in upcoming projects for a </span><span class="No-Break"><span class="koboSpan" id="kobo.577.1">proper demonstration.</span></span></p>
<p><span class="koboSpan" id="kobo.578.1">In this section, we briefly discussed some widgets and why these widgets are used in our dashboard. </span><span class="koboSpan" id="kobo.578.2">Next, we will set up the notification service using Zapier, which will send an email/SMS when the pulse is detected as going above or below </span><span class="No-Break"><span class="koboSpan" id="kobo.579.1">our thresholds.</span></span></p>
<h1 id="_idParaDest-265"><a id="_idTextAnchor265"/><span class="koboSpan" id="kobo.580.1">Setting up the notification service</span></h1>
<p><span class="koboSpan" id="kobo.581.1">Multiple</span><a id="_idIndexMarker991"/><span class="koboSpan" id="kobo.582.1"> platforms provide </span><strong class="bold"><span class="koboSpan" id="kobo.583.1">Software-as-a-Service</span></strong><span class="koboSpan" id="kobo.584.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.585.1">SaaS</span></strong><span class="koboSpan" id="kobo.586.1">) infrastructure</span><a id="_idIndexMarker992"/><span class="koboSpan" id="kobo.587.1"> and operate as a bridge between a variety of applications to make interoperability easy. </span><span class="koboSpan" id="kobo.587.2">Platforms for this purpose</span><a id="_idIndexMarker993"/><span class="koboSpan" id="kobo.588.1"> include </span><strong class="bold"><span class="koboSpan" id="kobo.589.1">Zapier</span></strong><span class="koboSpan" id="kobo.590.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.591.1">IFTTT</span></strong><span class="koboSpan" id="kobo.592.1">, and </span><strong class="bold"><span class="koboSpan" id="kobo.593.1">Integromat</span></strong><span class="koboSpan" id="kobo.594.1">, and provide an interface to</span><a id="_idIndexMarker994"/><span class="koboSpan" id="kobo.595.1"> integrate </span><a id="_idIndexMarker995"/><span class="koboSpan" id="kobo.596.1">other platforms into the Arduino IoT Cloud platform to fulfill the requirements instead of developing the required features </span><span class="No-Break"><span class="koboSpan" id="kobo.597.1">from scratch.</span></span></p>
<p><span class="koboSpan" id="kobo.598.1">So firstly, we need to understand why we need the Zapier automation platform. </span><span class="koboSpan" id="kobo.598.2">In our current project, we want to send notifications by email/SMS when a specific threshold is met, but the Arduino IoT Cloud only provides the data visualization, webhooks, and API functionalities. </span><span class="koboSpan" id="kobo.598.3">We have two options to solve this problem. </span><span class="koboSpan" id="kobo.598.4">Either we need to develop a custom solution to send notifications by email/SMS using Arduino webhooks and APIs, or we can use an automation platform such as Zapier or IFTTT, which will save time and reduce costs compared to the </span><span class="No-Break"><span class="koboSpan" id="kobo.599.1">first option.</span></span></p>
<p><span class="koboSpan" id="kobo.600.1">For this exercise, we will use Zapier, which will receive the data via </span><strong class="bold"><span class="koboSpan" id="kobo.601.1">Arduino webhooks</span></strong><span class="koboSpan" id="kobo.602.1">. </span><span class="koboSpan" id="kobo.602.2">We</span><a id="_idIndexMarker996"/><span class="koboSpan" id="kobo.603.1"> will apply Zapier filters in Zaps to manage the threshold, and when the threshold is crossed, Zapier will send an email notification about BPM levels. </span><span class="koboSpan" id="kobo.603.2">A </span><em class="italic"><span class="koboSpan" id="kobo.604.1">Zap</span></em><span class="koboSpan" id="kobo.605.1"> is a term used in Zapier to describe an automated workflow that allows you to connect apps and services together, and each Zap can consist of </span><span class="No-Break"><span class="koboSpan" id="kobo.606.1">multiple actions.</span></span></p>
<p><span class="koboSpan" id="kobo.607.1">Before moving onto the main steps, first sign up to </span><a href="http://zapier.com"><span class="koboSpan" id="kobo.608.1">zapier.com</span></a><span class="koboSpan" id="kobo.609.1"> and use the trial version, as the Zapier webhooks we are going to use are only available under the </span><em class="italic"><span class="koboSpan" id="kobo.610.1">Professional plan</span></em><span class="koboSpan" id="kobo.611.1">. </span><span class="koboSpan" id="kobo.611.2">The following screenshot demonstrates the trigger and two actions required to set up our </span><span class="No-Break"><span class="koboSpan" id="kobo.612.1">notification functionality:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer195">
<span class="koboSpan" id="kobo.613.1"><img alt="Figure 12.11 – Zapier complete notification Zap" src="image/B19752_12_11.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.614.1">Figure 12.11 – Zapier complete notification Zap</span></p>
<p><span class="koboSpan" id="kobo.615.1">The steps to create this, which we will work through for the remainder of this section, are </span><span class="No-Break"><span class="koboSpan" id="kobo.616.1">as follows:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.617.1">Firstly, we need to set up</span><a id="_idIndexMarker997"/><span class="koboSpan" id="kobo.618.1"> the </span><strong class="bold"><span class="koboSpan" id="kobo.619.1">webhook trigger</span></strong><span class="koboSpan" id="kobo.620.1">, which will provide a URL. </span><span class="koboSpan" id="kobo.620.2">This URL should be inserted into the </span><strong class="bold"><span class="koboSpan" id="kobo.621.1">Thing</span></strong><span class="koboSpan" id="kobo.622.1"> by clicking on </span><strong class="bold"><span class="koboSpan" id="kobo.623.1">Set Webhook</span></strong><span class="koboSpan" id="kobo.624.1"> on the Arduino IoT Cloud Thing page. </span><span class="koboSpan" id="kobo.624.2">This trigger will be responsible for receiving the data from the Arduino </span><span class="No-Break"><span class="koboSpan" id="kobo.625.1">IoT Cloud.</span></span></li>
<li><span class="koboSpan" id="kobo.626.1">In the second step, we apply the filter on the BPM value, which specifies that if the BPM is greater than 100 or less than 60, then proceed to the next action; otherwise, the BPM is normal and there is no need to send </span><span class="No-Break"><span class="koboSpan" id="kobo.627.1">a notification.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.628.1">Finally, we</span><a id="_idIndexMarker998"/><span class="koboSpan" id="kobo.629.1"> will use the </span><strong class="bold"><span class="koboSpan" id="kobo.630.1">Email by Zapier</span></strong><span class="koboSpan" id="kobo.631.1"> or </span><strong class="bold"><span class="koboSpan" id="kobo.632.1">Gmail</span></strong><span class="koboSpan" id="kobo.633.1"> option to send the notification. </span><span class="koboSpan" id="kobo.633.2">We add multiple actions</span><a id="_idIndexMarker999"/><span class="koboSpan" id="kobo.634.1"> to the Zap. </span><span class="koboSpan" id="kobo.634.2">To keep things easy and manageable, we chose to use a simple email notification. </span><span class="koboSpan" id="kobo.634.3">Alternatively, you could </span><a id="_idIndexMarker1000"/><span class="koboSpan" id="kobo.635.1">also use </span><strong class="bold"><span class="koboSpan" id="kobo.636.1">Twillo</span></strong><span class="koboSpan" id="kobo.637.1"> to send SMS notifications </span><span class="No-Break"><span class="koboSpan" id="kobo.638.1">to recipients.</span></span></p>
<p><span class="koboSpan" id="kobo.639.1">Previously, we have discussed the different triggers and actions step by step that are required for notifications to be triggered and sent. </span><span class="koboSpan" id="kobo.639.2">The following points will guide you through these steps </span><span class="No-Break"><span class="koboSpan" id="kobo.640.1">in Zapier:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.641.1">The preceding screenshot gives a rough idea of how our setup looks in Zapier. </span><span class="koboSpan" id="kobo.641.2">To create a new Zap in Zapier, click the </span><strong class="bold"><span class="koboSpan" id="kobo.642.1">Create</span></strong><span class="koboSpan" id="kobo.643.1"> button and select </span><strong class="bold"><span class="koboSpan" id="kobo.644.1">New Zap</span></strong><span class="koboSpan" id="kobo.645.1">, which will open a new page where you select the required triggers </span><span class="No-Break"><span class="koboSpan" id="kobo.646.1">and actions.</span></span></li>
<li><span class="koboSpan" id="kobo.647.1">Type </span><strong class="source-inline"><span class="koboSpan" id="kobo.648.1">Webhook</span></strong><span class="koboSpan" id="kobo.649.1"> in the search bar and select the </span><strong class="bold"><span class="koboSpan" id="kobo.650.1">Webhooks By Zapier</span></strong><span class="koboSpan" id="kobo.651.1"> option, which is available under the Professional plan. </span><span class="koboSpan" id="kobo.651.2">Click on </span><strong class="bold"><span class="koboSpan" id="kobo.652.1">Event</span></strong><span class="koboSpan" id="kobo.653.1"> and select </span><strong class="bold"><span class="koboSpan" id="kobo.654.1">Catch Hook</span></strong><span class="koboSpan" id="kobo.655.1">, then click </span><strong class="bold"><span class="koboSpan" id="kobo.656.1">Continue</span></strong><span class="koboSpan" id="kobo.657.1">. </span><span class="koboSpan" id="kobo.657.2">In the </span><strong class="bold"><span class="koboSpan" id="kobo.658.1">Trigger</span></strong><span class="koboSpan" id="kobo.659.1"> tab, just leave the empty </span><strong class="bold"><span class="koboSpan" id="kobo.660.1">Pick off a Child Key</span></strong><span class="koboSpan" id="kobo.661.1"> textbox as is and proceed to the next step by clicking on the </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.662.1">Continue</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.663.1"> button.</span></span></li>
<li><span class="koboSpan" id="kobo.664.1">In the </span><strong class="bold"><span class="koboSpan" id="kobo.665.1">Test</span></strong><span class="koboSpan" id="kobo.666.1"> tab, you will get the </span><strong class="bold"><span class="koboSpan" id="kobo.667.1">webhook URL</span></strong><span class="koboSpan" id="kobo.668.1"> – copy that and navigate to </span><strong class="bold"><span class="koboSpan" id="kobo.669.1">Thing</span></strong><span class="koboSpan" id="kobo.670.1"> in the Arduino IoT Cloud, then click on </span><strong class="bold"><span class="koboSpan" id="kobo.671.1">Set Webhook</span></strong><span class="koboSpan" id="kobo.672.1">. </span><span class="koboSpan" id="kobo.672.2">Insert the URL into the window that pops up, then hit the </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.673.1">Save</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.674.1"> button.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.675.1">Come back to Zapier and click the </span><strong class="bold"><span class="koboSpan" id="kobo.676.1">Test Trigger</span></strong><span class="koboSpan" id="kobo.677.1"> button to verify whether data is arriving or not. </span><span class="koboSpan" id="kobo.677.2">Before you can verify this, the device must be powered on and connected to the internet to send the values. </span><span class="koboSpan" id="kobo.677.3">This might not work on your first try; if not, try again and you should see the data arriving, which means you are receiving the data successfully from the Arduino Thing. </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.678.1">Figure 12</span></em></span><em class="italic"><span class="koboSpan" id="kobo.679.1">.12</span></em><span class="koboSpan" id="kobo.680.1"> shows a trigger test, demonstrating the values received from the Arduino IoT Cloud pulse </span><span class="No-Break"><span class="koboSpan" id="kobo.681.1">monitoring Thing:</span></span></p>
<p class="IMG---Figure"> </p>
<div>
<div class="IMG---Figure" id="_idContainer196">
<span class="koboSpan" id="kobo.682.1"><img alt="Figure 12.12 – Trigger test" src="image/B19752_12_12.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.683.1">Figure 12.12 – Trigger test</span></p>
<p><span class="koboSpan" id="kobo.684.1">The preceding </span><a id="_idIndexMarker1001"/><span class="koboSpan" id="kobo.685.1">screenshot shows Zapier successfully receiving the data from the Arduino IoT Cloud Thing. </span><span class="koboSpan" id="kobo.685.2">In the red box, we can see </span><strong class="bold"><span class="koboSpan" id="kobo.686.1">bPM</span></strong><span class="koboSpan" id="kobo.687.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.688.1">value</span></strong><span class="koboSpan" id="kobo.689.1">. </span><span class="koboSpan" id="kobo.689.2">The </span><strong class="bold"><span class="koboSpan" id="kobo.690.1">value</span></strong><span class="koboSpan" id="kobo.691.1"> parameter will be used in the next action. </span><span class="koboSpan" id="kobo.691.2">Click the </span><strong class="bold"><span class="koboSpan" id="kobo.692.1">Continue</span></strong><span class="koboSpan" id="kobo.693.1"> button and a new </span><strong class="bold"><span class="koboSpan" id="kobo.694.1">Action</span></strong><span class="koboSpan" id="kobo.695.1"> popup will appear. </span><span class="koboSpan" id="kobo.695.2">Here, we need to configure the filter action where we will set the threshold for our BPM notification, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.696.1">Figure 12</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.697.1">.13</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.698.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer197">
<span class="koboSpan" id="kobo.699.1"><img alt="Figure 12.13 – Filter action" src="image/B19752_12_13.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.700.1">Figure 12.13 – Filter action</span></p>
<p><span class="koboSpan" id="kobo.701.1">Type </span><strong class="source-inline"><span class="koboSpan" id="kobo.702.1">Filter</span></strong><span class="koboSpan" id="kobo.703.1"> in the</span><a id="_idIndexMarker1002"/><span class="koboSpan" id="kobo.704.1"> search box and select </span><strong class="bold"><span class="koboSpan" id="kobo.705.1">Filter by Zapier</span></strong><span class="koboSpan" id="kobo.706.1">. </span><span class="koboSpan" id="kobo.706.2">Click on </span><strong class="bold"><span class="koboSpan" id="kobo.707.1">Choose Field…</span></strong><span class="koboSpan" id="kobo.708.1"> and select </span><strong class="bold"><span class="koboSpan" id="kobo.709.1">Values Value</span></strong><span class="koboSpan" id="kobo.710.1"> from the dropdown. </span><span class="koboSpan" id="kobo.710.2">Then, click </span><strong class="bold"><span class="koboSpan" id="kobo.711.1">Choose Condition</span></strong><span class="koboSpan" id="kobo.712.1">, select </span><strong class="bold"><span class="koboSpan" id="kobo.713.1">Number (Greater than)</span></strong><span class="koboSpan" id="kobo.714.1">, and put </span><strong class="source-inline"><span class="koboSpan" id="kobo.715.1">100</span></strong><span class="koboSpan" id="kobo.716.1"> in the next input field. </span><span class="koboSpan" id="kobo.716.2">This sets the upper threshold value to 100 BPM. </span><span class="koboSpan" id="kobo.716.3">Next, click </span><strong class="bold"><span class="koboSpan" id="kobo.717.1">OR</span></strong><span class="koboSpan" id="kobo.718.1">, and leave the value field as it is, but in </span><strong class="bold"><span class="koboSpan" id="kobo.719.1">Choose Condition</span></strong><span class="koboSpan" id="kobo.720.1">, select </span><strong class="bold"><span class="koboSpan" id="kobo.721.1">Number (Less than)</span></strong><span class="koboSpan" id="kobo.722.1"> and insert </span><strong class="source-inline"><span class="koboSpan" id="kobo.723.1">60</span></strong><span class="koboSpan" id="kobo.724.1"> in the next field. </span><span class="koboSpan" id="kobo.724.2">Lastly, click </span><span class="No-Break"><span class="koboSpan" id="kobo.725.1">on </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.726.1">Continue</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.727.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.728.1">Our filter is ready; now, our email notification action is required to finish the setup. </span><span class="koboSpan" id="kobo.728.2">We have two options to send email notifications: either </span><strong class="bold"><span class="koboSpan" id="kobo.729.1">Email by Zapier </span></strong><span class="koboSpan" id="kobo.730.1">or </span><strong class="bold"><span class="koboSpan" id="kobo.731.1">Gmail</span></strong><span class="koboSpan" id="kobo.732.1">. </span><span class="koboSpan" id="kobo.732.2">I opted to use </span><strong class="bold"><span class="koboSpan" id="kobo.733.1">Email by Zapier</span></strong><span class="koboSpan" id="kobo.734.1">. </span><span class="koboSpan" id="kobo.734.2">Next, the </span><strong class="bold"><span class="koboSpan" id="kobo.735.1">Action</span></strong><span class="koboSpan" id="kobo.736.1"> popup window will appear; type </span><strong class="source-inline"><span class="koboSpan" id="kobo.737.1">Email</span></strong><span class="koboSpan" id="kobo.738.1"> in the search box and click on </span><strong class="bold"><span class="koboSpan" id="kobo.739.1">Email by Zapier</span></strong><span class="koboSpan" id="kobo.740.1">. </span><span class="koboSpan" id="kobo.740.2">Click on </span><strong class="bold"><span class="koboSpan" id="kobo.741.1">Event</span></strong><span class="koboSpan" id="kobo.742.1"> and select </span><strong class="bold"><span class="koboSpan" id="kobo.743.1">Send Outbound Email</span></strong><span class="koboSpan" id="kobo.744.1">. </span><span class="koboSpan" id="kobo.744.2">In the next window, set all the parameters for the email receiver, subject, and body, as shown in the </span><span class="No-Break"><span class="koboSpan" id="kobo.745.1">following screenshot:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer198">
<span class="koboSpan" id="kobo.746.1"><img alt="Figure 12.14 – Email notification settings" src="image/B19752_12_14.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.747.1">Figure 12.14 – Email notification settings</span></p>
<p><span class="koboSpan" id="kobo.748.1">Only three </span><a id="_idIndexMarker1003"/><span class="koboSpan" id="kobo.749.1">fields are mandatory here – insert the recipient email in the </span><strong class="bold"><span class="koboSpan" id="kobo.750.1">To</span></strong><span class="koboSpan" id="kobo.751.1"> field, write a relevant entry for the </span><strong class="bold"><span class="koboSpan" id="kobo.752.1">Subject</span></strong><span class="koboSpan" id="kobo.753.1"> field, and insert a message in the </span><strong class="bold"><span class="koboSpan" id="kobo.754.1">Body</span></strong><span class="koboSpan" id="kobo.755.1"> area. </span><span class="koboSpan" id="kobo.755.2">It’s up to you whether you fill the other fields or leave them blank. </span><span class="koboSpan" id="kobo.755.3">If you observe the preceding screenshot, you may notice I added </span><strong class="bold"><span class="koboSpan" id="kobo.756.1">Values Value</span></strong><span class="koboSpan" id="kobo.757.1"> to both the </span><strong class="bold"><span class="koboSpan" id="kobo.758.1">Subject</span></strong><span class="koboSpan" id="kobo.759.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.760.1">Body</span></strong><span class="koboSpan" id="kobo.761.1"> fields, which will display the values that triggered the notification in the email. </span><span class="koboSpan" id="kobo.761.2">Click the </span><strong class="bold"><span class="koboSpan" id="kobo.762.1">Continue</span></strong><span class="koboSpan" id="kobo.763.1"> button at the bottom of the page and test the action – if you receive the email with the BPM values, then publish the Zap and you are good </span><span class="No-Break"><span class="koboSpan" id="kobo.764.1">to go.</span></span></p>
<p><span class="koboSpan" id="kobo.765.1">In this section, we set up the notification services for our pulse monitor using Zapier. </span><span class="koboSpan" id="kobo.765.2">We created a Zap that consists of three steps. </span><span class="koboSpan" id="kobo.765.3">Firstly, we set up the webhook responsible for receiving the data. </span><span class="koboSpan" id="kobo.765.4">The second step deals with the threshold, and the third and final step handles sending the </span><span class="No-Break"><span class="koboSpan" id="kobo.766.1">email notification.</span></span></p>
<h1 id="_idParaDest-266"><a id="_idTextAnchor266"/><span class="koboSpan" id="kobo.767.1">What next?</span></h1>
<p><span class="koboSpan" id="kobo.768.1">There are many more options available to explore, but these are left to you to work on, using different health sensors and development boards to do some more experiments and learn from them. </span><span class="koboSpan" id="kobo.768.2">In the current chapter, we only used one sensor that provided only one parameter, but there are many sensors on the market that provide a wide variety of functionalities including the monitoring of blood sugar, blood oxygen, blood pressure, body temperature, </span><span class="No-Break"><span class="koboSpan" id="kobo.769.1">and more.</span></span></p>
<p><span class="koboSpan" id="kobo.770.1">Try the following sensors to enhance your practical knowledge and compare this selection with other sensors in terms of features, ranges, </span><span class="No-Break"><span class="koboSpan" id="kobo.771.1">and cost:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.772.1">LilyPad temperature </span><span class="No-Break"><span class="koboSpan" id="kobo.773.1">sensor (</span></span><a href="https://www.sparkfun.com/products/8777"><span class="No-Break"><span class="koboSpan" id="kobo.774.1">https://www.sparkfun.com/products/8777</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.775.1">)</span></span></li>
<li><span class="koboSpan" id="kobo.776.1">High-sensitivity pulse oximeter and heart-rate sensor for wearables (</span><a href="https://www.seeedstudio.com/MAXREFDES117-HEART-RATE-AND-PULSE-OXIMETRY-MONITOR-p-2762.html?queryID=51de6141574a711bbe455cb4894ce3fb&amp;objectID=411&amp;indexName=bazaar_retailer_products"><span class="No-Break"><span class="koboSpan" id="kobo.777.1">https://www.seeedstudio.com/MAXREFDES117-HEART-RATE-AND-PULSE-OXIMETRY-MONITOR-p-2762.html?queryID=51de6141574a711bbe455cb4894ce3fb&amp;objectID=411&amp;index Name=bazaar_retailer_products</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.778.1">)</span></span></li>
<li><span class="koboSpan" id="kobo.779.1">Fall detection </span><span class="No-Break"><span class="koboSpan" id="kobo.780.1">module (</span></span><a href="https://www.seeedstudio.com/24GHz-mmWave-Radar-Sensor-Fall-Detection-Module-p-5268.html"><span class="No-Break"><span class="koboSpan" id="kobo.781.1">https://www.seeedstudio.com/24GHz-mmWave-Radar-Sensor-Fall-Detection-Module-p-5268.html</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.782.1">)</span></span></li>
<li><span class="koboSpan" id="kobo.783.1">Open source Arduino blood glucose </span><span class="No-Break"><span class="koboSpan" id="kobo.784.1">meter shield</span></span></li>
<li><span class="koboSpan" id="kobo.785.1">MIKROE series </span><span class="No-Break"><span class="koboSpan" id="kobo.786.1">health sensors</span></span></li>
</ul>
<h1 id="_idParaDest-267"><a id="_idTextAnchor267"/><span class="koboSpan" id="kobo.787.1">Summary</span></h1>
<p><span class="koboSpan" id="kobo.788.1">In this chapter, we explored how to develop a low-cost wearable smart heart-rate monitoring system using the XIAO ESP32C3 and a pulse sensor. </span><span class="koboSpan" id="kobo.788.2">One important thing to note was the necessity of calibrating medical sensors before using them in the field. </span><span class="koboSpan" id="kobo.788.3">We set up a Thing, which included cloud variable creation, device association, network configuration, and coding for our development board. </span><span class="koboSpan" id="kobo.788.4">Later, we created a dashboard to visualize our sensor readings with different widgets to display both current readings and historical data with the help of graphs. </span><span class="koboSpan" id="kobo.788.5">Finally, we used Zapier to set up an email notification service based on thresholds using webhooks and saw how to employ webhooks to integrate third-party services with the Arduino </span><span class="No-Break"><span class="koboSpan" id="kobo.789.1">IoT Cloud.</span></span></p>
<p><span class="koboSpan" id="kobo.790.1">In the next chapter, we will learn about scripting in the Arduino IoT Cloud with the </span><strong class="bold"><span class="koboSpan" id="kobo.791.1">Arduino Cloud CLI</span></strong><span class="koboSpan" id="kobo.792.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.793.1">CCLI</span></strong><span class="koboSpan" id="kobo.794.1">). </span><span class="koboSpan" id="kobo.794.2">This is a command-line tool that provides access to Arduino IoT Cloud services via terminal commands. </span><span class="koboSpan" id="kobo.794.3">We will use the Arduino IoT Cloud CLI to automate bulk operations, including bulk device creation, which will help us to minimize the time required for operations </span><span class="No-Break"><span class="koboSpan" id="kobo.795.1">and maintenance.</span></span></p>
</div>
</body></html>