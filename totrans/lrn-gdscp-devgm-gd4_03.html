<html><head></head><body>
		<div id="_idContainer054">
			<h1 class="chapter-number" id="_idParaDest-63"><a id="_idTextAnchor100"/>3</h1>
			<h1 id="_idParaDest-64"><a id="_idTextAnchor101"/>Grouping Information in Arrays, Loops, and Dictionaries</h1>
			<p>In <a href="B19358_02.xhtml#_idTextAnchor044"><span class="No-Break"><em class="italic">Chapter 2</em></span></a>, we learned about the all-important basics of programming: variables and control flow. Although these building blocks may seem rudimentary and limiting, they are already Turing-complete, meaning you can create any program you’ve ever used with them. I’m not saying that you should or that it would be easy, but <span class="No-Break">you could.</span></p>
			<p>In this chapter, we’ll learn about new data structures and more advanced control flows to make our lives easier when dealing with large quantities of data. First, we’ll see how arrays can help us create lists of data. Then, we’ll learn all about loops, a very powerful control flow structure to execute code blocks multiple times instead of just once. Lastly, we’ll learn about dictionaries, a data structure that helps us group other pieces of data in <span class="No-Break">little packages.</span></p>
			<p>In this chapter, we will cover the following <span class="No-Break">main topics:</span></p>
			<ul>
				<li><span class="No-Break">Arrays</span></li>
				<li><span class="No-Break">Loops</span></li>
				<li><span class="No-Break">Dictionaries</span></li>
				<li><span class="No-Break">Debugging</span></li>
				<li><span class="No-Break">Null</span><a id="_idTextAnchor102"/></li>
			</ul>
			<h1 id="_idParaDest-65"><a id="_idTextAnchor103"/>Technical requirements</h1>
			<p>If you get stuck anywhere, don’t forget that you can find an example of everything we do in this chapter in the <strong class="source-inline">chapter03</strong> folder of the repository. You can find the repository <span class="No-Break">here: </span><a href="https://github.com/PacktPublishing/Learning-GDScript-by-Developing-a-Game-with-Godot-4/tree/main/chapter03"><span class="No-Break">https://github.com/PacktPublishing/Learning-GDScript-by-Developing-a-Game-with-Godot-4/tree/main/chapter03</span></a><span class="No-Break">.</span></p>
			<h1 id="_idParaDest-66"><a id="_idTextAnchor104"/>Arrays</h1>
			<p>Often, we want to work<a id="_idIndexMarker121"/> with a list of data, such as a list of items the player possesses. An <strong class="bold">array</strong> is precisely the data structure we want to use for such occasions: it is a list that can contain elements from other data types; it is a <span class="No-Break">container type.</span></p>
			<p class="callout-heading">Containers</p>
			<p class="callout">We call an array a <strong class="bold">container</strong> because we can store and retrieve<a id="_idIndexMarker122"/> pieces of data of other data types within them, such as integers, strings, Booleans, and such. An array contains <span class="No-Break">other data.</span></p>
			<p class="callout">Containers structure other data so that it is easier to <span class="No-Break">work with.</span></p>
			<p>Let’s have a look at what an array is in code and how we can create one and access <span class="No-Break">its elements<a id="_idTextAnchor105"/>.</span></p>
			<h2 id="_idParaDest-67"><a id="_idTextAnchor106"/>Creating an array</h2>
			<p>Creating an array<a id="_idIndexMarker123"/> looks <span class="No-Break">like this:</span></p>
			<pre class="source-code">
var inventory = ["Key", "Potion", "Red Flower", "Boots"]</pre>			<p>Here, we created an array – a list of four strings – and put it in the <strong class="source-inline">inventory</strong> variable. Notice that all the elements of the array are contained within square brackets, <strong class="source-inline">[]</strong>, and that each element is separated by <span class="No-Break">a </span><span class="No-Break"><em class="italic">comma</em></span><span class="No-Break">.</span></p>
			<p>Creating an array in one line like we did just now is often fine. But sometimes, it can make the line of code too long. Luckily, we can also put every element on a separate line; this promotes readability and makes it easier to edit the array later if we want to add or remove <span class="No-Break">an element:</span></p>
			<pre class="source-code">
var inventory = [
   "Key",
   "Potion",
   "Red Flower",
   "Boots"
]</pre>			<p>This snippet of code will create the same array as the one at the start of this section, but with the added benefit that each<a id="_idIndexMarker124"/> element is nicely formatted on a new line and thus easier <span class="No-Break">to read.</span></p>
			<p class="callout-heading">Important note</p>
			<p class="callout">Note that we don’t have to indent the elements of the array with a tab, but the general convention is to do so and I urge you to do the same. This is part of the clean code philosophy makes it extra clear that these elements are part of the array. We’ll talk more about writing clean code in <a href="B19358_05.xhtml#_idTextAnchor365"><span class="No-Break"><em class="italic">Chapter 5</em></span></a><span class="No-Break">.</span></p>
			<p>As an experiment, try printing out a variable that contains <span class="No-Break">an arr<a id="_idTextAnchor107"/>ay.</span></p>
			<h2 id="_idParaDest-68"><a id="_idTextAnchor108"/>Accessing values</h2>
			<p>Now that we have<a id="_idIndexMarker125"/> our list – the array – we <a id="_idIndexMarker126"/>want to be able to access its elements. To do this, we must specify the number of the element we want to retrieve within the square brackets, right behind the name of the variable. To get the first element of our array, for example, we must write <span class="No-Break">the following:</span></p>
			<pre class="source-code">
print( inventory[0] )
# Prints out: Key</pre>			<p>But what is this? I told you we were retrieving the first element in the array, but I used the number 0 to do so. That is because, unlike human counting, arrays are 0-based, meaning that they start counting from 0. By extension, the second element can be accessed by using <strong class="source-inline">1</strong> and <span class="No-Break">so on:</span></p>
			<table class="No-Table-Style _idGenTablePara-1" id="table001-2">
				<colgroup>
					<col/>
					<col/>
				</colgroup>
				<thead>
					<tr class="No-Table-Style">
						<td class="No-Table-Style" colspan="2">
							<p><strong class="bold">Contents </strong><span class="No-Break"><strong class="bold">of inventory</strong></span></p>
						</td>
					</tr>
				</thead>
				<tbody>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span class="No-Break"><strong class="bold">Index</strong></span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break"><strong class="bold">Value</strong></span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><strong class="source-inline">0</strong></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Key</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><strong class="source-inline">1</strong></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Potion</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><strong class="source-inline">2</strong></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Red Flower</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><strong class="source-inline">3</strong></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Boots</span></p>
						</td>
					</tr>
				</tbody>
			</table>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Table 3.1 – The contents of the inventory array</p>
			<p>Zero-based counting makes a lot of sense within the context of mathematic concepts and computer algorithms, so we better get used <span class="No-Break">to it.</span></p>
			<p>We call the position<a id="_idIndexMarker127"/> an element is at in an array <span class="No-Break">its </span><span class="No-Break"><strong class="bold">index</strong></span><span class="No-Break">.</span></p>
			<p>As an experiment, instead of directly using a number to retrieve an element, try putting a variable that contains a number between the square brackets <span class="No-Break">like so:</span></p>
			<pre class="source-code">
var index = 3
print(inventory[index])</pre>			<p>You can also try accessing<a id="_idIndexMarker128"/> an element<a id="_idIndexMarker129"/> that is not in the array, such as element <strong class="source-inline">1000</strong>, and see what errors pop up. Try negative <span class="No-Break">numbers too.</span></p>
			<h2 id="_idParaDest-69"><a id="_idTextAnchor109"/>Accessing elements backward</h2>
			<p>You might have<a id="_idIndexMarker130"/> noticed something<a id="_idIndexMarker131"/> strange if you tried out one of the earlier experiments where I asked you to access an array’s element using negative numbers. Although negative numbers don’t always give an error, some return elements from <span class="No-Break">the array.</span></p>
			<p>This is because if you use negative numbers, you access elements within the array from the back! So, the element with index -1 is the last, -2 is the second last, and <span class="No-Break">so on:</span></p>
			<pre class="source-code">
var inventory = ["Key", "Potion"]
prints("The last item in your inventory is a: ", inventory[-1])
# Prints out: Potion</pre>			<p>This indexing trick<a id="_idIndexMarker132"/> will prove<a id="_idIndexMarker133"/> to be <span class="No-Break">very u<a id="_idTextAnchor110"/>seful.</span></p>
			<h2 id="_idParaDest-70"><a id="_idTextAnchor111"/>Changing the elements of an array</h2>
			<p>An interesting property<a id="_idIndexMarker134"/> of arrays is that we can treat each element as a regular variable. To assign a new value to an element, for example, we can just assign it a <span class="No-Break">new value:</span></p>
			<pre class="source-code">
inventory[3] = "Helmet"</pre>			<p>We can also use one of the special assignment operators, such as <strong class="source-inline">+=</strong> or <strong class="source-inline">-=</strong>, that we learned about in <a href="B19358_02.xhtml#_idTextAnchor044"><span class="No-Break"><em class="italic">Chapter 2</em></span></a> to directly change one of the values in <span class="No-Break">the array:</span></p>
			<pre class="source-code">
var array_of_numbers = [1, 4, -74, 0]
array_of_numbers[3] <strong class="bold">+=</strong> 4</pre>			<p>In this previous example, we added <strong class="source-inline">4</strong> to the third element in our <strong class="source-inline">array_of_numbers</strong>, <strong class="source-inline">0</strong>, so that the value is <span class="No-Break">now </span><span class="No-Break"><strong class="source-inline">4</strong></span><span class="No-Break">.</span></p>
			<p>Using the assignment operator (<strong class="source-inline">=</strong>) makes it easy to change the elements in <span class="No-Break">a<a id="_idTextAnchor112"/>n array.</span></p>
			<h2 id="_idParaDest-71"><a id="_idTextAnchor113"/>Data types in arrays</h2>
			<p>Arrays can hold any<a id="_idIndexMarker135"/> data type. You can<a id="_idIndexMarker136"/> even put multiple different data types in the same array, <span class="No-Break">like so:</span></p>
			<pre class="source-code">
var an_array = [
   5,          # An Integer
   "seven",    # A string
   8.9,        # A float
   True        # A boolean
]</pre>			<p>This is bad practice<a id="_idIndexMarker137"/> because when you<a id="_idIndexMarker138"/> want to access one of the elements, you don’t know what you are dealing with. That is why I advise you to always use one data type for all the elements i<a id="_idTextAnchor114"/><a id="_idTextAnchor115"/>n <span class="No-Break">an array.</span></p>
			<h2 id="_idParaDest-72"><a id="_idTextAnchor116"/>Strings are secretly arrays</h2>
			<p>If you think back to <a href="B19358_02.xhtml#_idTextAnchor044"><span class="No-Break"><em class="italic">Chapter 2</em></span></a>, when I said that strings<a id="_idIndexMarker139"/> are called that way because they are <em class="italic">strings of characters</em>, then this<a id="_idIndexMarker140"/> might not seem like a big surprise. But a string can be thought of as an array of characters. So, we can get one specific character, just like we would get one particular element in <span class="No-Break">an array:</span></p>
			<pre class="source-code">
var player_name = "Eric"
print(player_name[0])
# Prints out: E</pre>			<p>In practice, we use this less often, but it is good to know how strings work un<a id="_idTextAnchor117"/>der <span class="No-Break">the hood.</span></p>
			<h2 id="_idParaDest-73"><a id="_idTextAnchor118"/>Manipulating arrays</h2>
			<p>So far, we have created<a id="_idIndexMarker141"/> arrays, accessed their elements, and even changed those elements. But there are so many more things that arrays can do. Unlike the standard data types we’ve already encountered, arrays provide functions to us that we could use. Functions are little pieces of code, just like the <strong class="source-inline">_ready()</strong> function we have been writing for each scene, that provides functionality and can do things <span class="No-Break">for us.</span></p>
			<p>For example, one of these functions can append an extra element at the end of <span class="No-Break">an array:</span></p>
			<pre class="source-code">
var inventory = ["Key", "Potion"]
inventory.append("Sword")</pre>			<p>Try printing out this variable; it will show <strong class="source-inline">[Key, Potion, Sword]</strong>. <span class="No-Break">Cool, right?</span></p>
			<p>As you can see, to call a function of an array, add a point (<strong class="source-inline">.</strong>), followed by the name of that function, to the name of that array. This also applies to other <span class="No-Break">data types.</span></p>
			<p>But what if we want to append one array to another one? Well, there is a function for <span class="No-Break">that too:</span></p>
			<pre class="source-code">
var loot = ["Gold Coin", "Dagger"]
inventory.append_array(loot)</pre>			<p>Now, the whole <strong class="source-inline">loot</strong> array will be appended at the end of <span class="No-Break">the inventory.</span></p>
			<p>But wait, there’s more! What if you need to remove an element? You use the <strong class="source-inline">remove_at()</strong> function. This function removes an element of the array at a <span class="No-Break">certain index:</span></p>
			<pre class="source-code">
inventory.remove_at(1)</pre>			<p>This will remove the element at index 1. But what if you don’t know the position the element is at? You can always <span class="No-Break">find it!</span></p>
			<pre class="source-code">
var index_of_sword = inventory.find("Sword")
inventory.remove_at(index_of_sword)</pre>			<p>The <strong class="source-inline">find()</strong> function will return the index of the element we were looking for. If it finds nothing, it will return the number <strong class="source-inline">-1</strong>. So, it’s best to check if the number it returns is equal to or larger than 0; otherwise, you might remove the <span class="No-Break">wrong element.</span></p>
			<p>The <strong class="source-inline">remove_at()</strong> and <strong class="source-inline">find()</strong> functions are very useful in their own right, but there is also a function that combines the two into one! This is the <strong class="source-inline">erase()</strong> function, and it can be used <span class="No-Break">like this:</span></p>
			<pre class="source-code">
inventory.erase("Sword")</pre>			<p>This last line of code will give the same result as the snippet of the two lines before because it removes the first instance of <strong class="source-inline">"Sword"</strong> it finds within <span class="No-Break">the array.</span></p>
			<p>Arrays are an important concept<a id="_idIndexMarker142"/> in programming. They dynamically hold an arbitrary number <span class="No-Break">of elements.</span></p>
			<p>After a small detour into debugging in the next section, we’ll learn how we can loop over these elements and run code for each of them separately using the <strong class="source-inline">for</strong> and <a id="_idTextAnchor119"/><span class="No-Break"><strong class="source-inline">while</strong></span><span class="No-Break"> keywords.</span></p>
			<h2 id="_idParaDest-74"><a id="_idTextAnchor120"/>Don’t be scared of errors or warnings</h2>
			<p>We’ve encountered errors<a id="_idIndexMarker143"/> here and there while writing code, especially during some of the experiments. These errors often contain valuable information about the problem and how to solve it. Let’s examine the following piece <span class="No-Break">of code:</span></p>
			<div>
				<div class="IMG---Figure" id="_idContainer047">
					<img alt="Figure 3.1 – An error tells us that the var keyword should be followed by the new variable’s name" src="image/B19358_03_01.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.1 – An error tells us that the var keyword should be followed by the new variable’s name</p>
			<p>Here, I stopped typing halfway while defining a variable. The code editor immediately gave me an error. As shown at the bottom, it is telling me it expected a variable’s name. Thanks for the <span class="No-Break">hint, engine!</span></p>
			<p>Let’s look at an error that the engine can’t predict before running <span class="No-Break">the code:</span></p>
			<pre class="source-code">
func _ready():
   var inventory = [
      "Boots",
      "Bananas",
      "Bees"
   ]
   print(inventory[100])</pre>			<p>At first glance, this code might look okay, but if you put it in a script and run it, you’ll see the following error <span class="No-Break">pop up:</span></p>
			<div>
				<div class="IMG---Figure" id="_idContainer048">
					<img alt="Figure 3.2 – After running this code, the interpreter warns us that the inventory array does not have a 101st element" src="image/B19358_03_02.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.2 – After running this code, the interpreter warns us that the inventory array does not have a 101<span class="superscript">st</span> element</p>
			<p>The <strong class="bold">Debugger</strong> panel opened up, clearly<a id="_idIndexMarker144"/> stating that there was an <em class="italic">Invalid get index ‘100’ (on base: ‘Array’)</em> error. This means we used an invalid index to retrieve an element from an array. We can also see a yellow arrow showing the exact line where the error occurred. From this, we can conclude that the inventory array does not have a 101<span class="superscript">st</span> element and thus, we should not try to print <span class="No-Break">it out.</span></p>
			<p>Some errors and warnings already pop up while writing the code, such as the first one we saw in this section. This makes it easy to ensure what we write will run. Unfortunately, writing code that does not contain errors or warnings at this stage does not guarantee that executing this code will be error and warning-free. This is because, from the moment we run a piece of code, it can encounter scenarios the code parser could never <span class="No-Break">have considered.</span></p>
			<p>These runtime errors and warnings occur because GDScript is a weakly typed language, meaning that any variable can have any type and could even switch types mid-execution. Here’s a <span class="No-Break">simple example:</span></p>
			<pre class="source-code">
var my_vairable = 5
my_variable = "Hello, World"</pre>			<p>But this means that during execution, a piece of code could crash. In <a href="B19358_04.xhtml#_idTextAnchor164"><span class="No-Break"><em class="italic">Chapter 4</em></span></a>, you’ll learn how to deal with this uncertainty in an elegant way that keeps the flexibility of loosely <span class="No-Break">typed variables.</span></p>
			<p>It is good to appreciate warnings and errors. The engine does not show these to bully us but to nudge us in the right direction to create a better, more solid piece of software. If the engine didn’t care and didn’t crash the game when an error occurred, for example, then we might ship a half-broken game. This is not what we want! We want the best experience for our players<a id="_idIndexMarker145"/> with the lowest number <span class="No-Break">of bugs!</span></p>
			<p class="callout-heading">Bugs</p>
			<p class="callout">When a game is broken in some way, be it a crash<a id="_idIndexMarker146"/> or a logical error, we say it has <strong class="bold">bugs</strong>. This terminology comes from one of the first times a computer malfunctioned and the culprit turned out to be a literal bug that crawled into the machinery. But the term was even used before that by the likes of Thomas Edison to describe “little faults and difficulties” in a p<a id="_idTextAnchor121"/>iece <span class="No-Break">of hardware.</span></p>
			<p>In the next section, we’ll learn <span class="No-Break">about loops.</span></p>
			<h1 id="_idParaDest-75"><a id="_idTextAnchor122"/>Loops</h1>
			<p>We’ve been putting lines<a id="_idIndexMarker147"/> of code one after the other and Godot Engine executed them nicely from top to bottom. But there comes a time when we want to repeat one or multiple lines of code. For example, what if we want to print out every item in the player’s inventory in a <span class="No-Break">nice way?</span></p>
			<p>We could do something like that with the <span class="No-Break">following code:</span></p>
			<pre class="source-code">
var inventory = ["Boots", "Bananas", "Bandages"]
for item in inventory:
   print("You possess ", item)</pre>			<p>This is called a <strong class="bold">loop</strong>; this specific one is a <strong class="bold">for loop</strong>. We’ll have a look at the two kinds of loops that are present in GDScript<a id="_idIndexMarker148"/> in the next <span class="No-Break">few sections.</span></p>
			<h2 id="_idParaDest-76"><a id="_idTextAnchor123"/>For loops</h2>
			<p> A <strong class="bold">for loop</strong> will repeat its code block<a id="_idIndexMarker149"/> for every element<a id="_idIndexMarker150"/> of an array. In the case of the example provided in the introduction, this element will be available in the variable<a id="_idIndexMarker151"/> that is only valid within the <strong class="source-inline">for</strong> loop called <strong class="bold">item</strong>. Of course, we can use the same structure for other arrays and call the temporary variable differently. I chose the name <em class="italic">items</em> because that is what an inventory contains. Another suitable name could <span class="No-Break">be </span><span class="No-Break"><em class="italic">item_name</em></span><span class="No-Break">.</span></p>
			<p>We can visualize the <strong class="source-inline">for</strong> loop with the following <span class="No-Break">flow chart:</span></p>
			<div>
				<div class="IMG---Figure" id="_idContainer049">
					<img alt="Figure 3.3 – The flow of a for loop during the execution of the code" src="image/B19358_03_03.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.3 – The flow of a for loop during the execution of the code</p>
			<p>As shown in <span class="No-Break"><em class="italic">Figure 3</em></span><em class="italic">.3</em>, we start the loop from the top. If there is a first element, we follow the <em class="italic">Yes</em> and execute the code block within the loop for that element. Then, we check if there is a next element. If so, we execute the code block again, now for that element, and so on until there are no more <span class="No-Break">elements left.</span></p>
			<p>The <strong class="bold">syntax</strong> – that is, the general structure – of a <strong class="source-inline">for</strong> loop looks <span class="No-Break">like this:</span></p>
			<pre class="source-code">
for &lt;temporary_variable_name&gt; in &lt;array&gt;:
   &lt;code_block&gt;</pre>			<p class="callout-heading">Syntax</p>
			<p class="callout">The preceding structure is also called the syntax of the language. It captures the rules of what is possible and how things should be specified in <span class="No-Break">the language.</span></p>
			<p>A <strong class="source-inline">for</strong> loop is a very<a id="_idIndexMarker152"/> powerful control<a id="_idIndexMarker153"/> flow structure. Let’s have a look at some other use cases i<a id="_idTextAnchor124"/>n which we can <span class="No-Break">use it.</span></p>
			<h3>Range function</h3>
			<p>Sometimes, you will want to iterate<a id="_idIndexMarker154"/> over all indexes within an array. To do so, you can use the <strong class="source-inline">range()</strong> function, which is built into the engine. This function returns an array from <strong class="source-inline">0</strong> to a specified number. Here’s <span class="No-Break">an example:</span></p>
			<pre class="source-code">
var numbers_from_0_to_5 = range(6)
print(numbers_from_0_to_5 )</pre>			<p>This code will print out <strong class="source-inline">[0, 1, 2, 3, </strong><span class="No-Break"><strong class="source-inline">4, 5]</strong></span><span class="No-Break">.</span></p>
			<p>Notice that we gave the number <strong class="source-inline">6</strong> to the function but that the array stops at the <span class="No-Break">number 5.</span></p>
			<p>We can use the <strong class="source-inline">range()</strong> function <span class="No-Break">like so:</span></p>
			<pre class="source-code">
var inventory = ["Boots", "Bananas", "Bandages"]
for index in range(inventory.size()):
   print("The item at index ", index, " is ", inventory[index])</pre>			<p>Here, I called the <strong class="source-inline">size()</strong> function on the <strong class="source-inline">inventory</strong> array; this returns the size of the array, which we then can plug right into the <span class="No-Break"><strong class="source-inline">range()</strong></span><span class="No-Break"> function.</span></p>
			<p>The <strong class="source-inline">range()</strong> function can even do more than this. If you provide it with two numbers, it will create an array that starts from the first number and goes up to the second one, excluding it again. <span class="No-Break">Try this:</span></p>
			<pre class="source-code">
for number in range(10, 20):
   print(number)</pre>			<p>As an experiment, try constructing a <strong class="source-inline">for</strong> loop with the preceding <strong class="source-inline">range()</strong> function and print the result – that is, <strong class="source-inline">range(16, </strong><span class="No-Break"><strong class="source-inline">26, 2)</strong></span><span class="No-Break">.</span></p>
			<p>You’ll see that we go from <strong class="source-inline">16</strong> to <strong class="source-inline">26</strong> as expected. But this time, the interval between each number is <strong class="source-inline">2</strong>. So, we should get the numbers <strong class="source-inline">16</strong>, <strong class="source-inline">18</strong>, <strong class="source-inline">20</strong>, <strong class="source-inline">22</strong> <span class="No-Break">and </span><span class="No-Break"><strong class="source-inline">24</strong></span><span class="No-Break">.</span></p>
			<p>The third argument that’s given to a range command defines the size of the step we take <span class="No-Break">between numbers.</span></p>
			<p>Now that we have the <strong class="source-inline">for</strong> loop and <strong class="source-inline">range()</strong> function<a id="_idIndexMarker155"/> under our belt, let’s take a<a id="_idTextAnchor125"/> look at the <span class="No-Break">while loop.</span></p>
			<h2 id="_idParaDest-77"><a id="_idTextAnchor126"/>While loops</h2>
			<p>The second kind <a id="_idIndexMarker156"/>of loop in GDScript is the <strong class="bold">while loop</strong>. This loop works<a id="_idIndexMarker157"/> a bit like an <strong class="source-inline">if</strong> statement – we give it a condition and repeat its code block, so long as the condition evaluates to <strong class="source-inline">true</strong>. Here’s <span class="No-Break">an example:</span></p>
			<pre class="source-code">
var inventory = ["Boots", "Bananas", "Bandages", "Warm Gloves", "Goggles"]
while inventory.size() &gt; 3:
   inventory.remove_at(0)</pre>			<p>Here, we remove the first element of the inventory array as long, so the array has a length of more than <span class="No-Break">three elements.</span></p>
			<p>The syntax of a <strong class="source-inline">while</strong> loop looks <span class="No-Break">as follows:</span></p>
			<pre class="source-code">
while &lt;condition&gt;:
   &lt;code_block&gt;</pre>			<p>When Godot encounters a <strong class="source-inline">while</strong> statement, it follows <span class="No-Break">these steps:</span></p>
			<ol>
				<li>First, it evaluates the condition statement. If it is true, it will go to <em class="italic">step 2</em>; otherwise. it will skip the code block completely and go to <span class="No-Break"><em class="italic">step 4</em></span><span class="No-Break">.</span></li>
				<li>Second, the code block will <span class="No-Break">be executed.</span></li>
				<li>Third, it will go back to <em class="italic">step 1</em> to evaluate the condition again and see if it <span class="No-Break">has changed.</span></li>
				<li>Finally, it will execute the rest of <span class="No-Break">the code.</span></li>
			</ol>
			<p>So <strong class="source-inline">while</strong> loops will loop<a id="_idIndexMarker158"/> so long as the condition<a id="_idIndexMarker159"/> we defined returns a <span class="No-Break"><strong class="source-inline">true</strong></span><span class="No-Break"> value.</span></p>
			<p>We can visualize a <strong class="source-inline">while</strong> loop with the following <span class="No-Break">flow chart:</span></p>
			<div>
				<div class="IMG---Figure" id="_idContainer050">
					<img alt="Figure 3.4 – The flow of a while loop during the execution of the code" src="image/B19358_03_04.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.4 – The flow of a while loop during the execution of the code</p>
			<p> In <span class="No-Break"><em class="italic">Figure 3</em></span><em class="italic">.4</em>, we start the loop by evaluating the condition we specified. If it results in a <strong class="source-inline">true</strong> value, we execute the code block of the loop. If this value is not evaluated to be <strong class="source-inline">true</strong>, we exit <span class="No-Break">the loop.</span></p>
			<p class="callout-heading">Infinite loops</p>
			<p class="callout">The code block within a <strong class="source-inline">while</strong> statement must work toward getting the condition<a id="_idIndexMarker160"/> to evaluate false. Otherwise, this will result in an <strong class="bold">infinite loop</strong>. Luckily, Godot ensures this does not crash our computer, but it could freeze up your game and make that <span class="No-Break">crash instead!</span></p>
			<p>So far, we have learned <a id="_idIndexMarker161"/>about the two basic loops<a id="_idIndexMarker162"/> within GDScript. Now, let’s have a look at how we can have more control over these loops with some special keywords that we can<a id="_idTextAnchor127"/> only use within <span class="No-Break">these loops.</span></p>
			<h2 id="_idParaDest-78"><a id="_idTextAnchor128"/>Continuing or breaking a loop</h2>
			<p>Two keywords can only be used within a loop: <strong class="bold">continue</strong> and <strong class="bold">break</strong>. Using them excessively or abusing them is not a best practice; you can avoid both if you construct your loop correctly. But they<a id="_idTextAnchor129"/> are still essential <span class="No-Break">to know.</span></p>
			<h3>The continue keyword</h3>
			<p>The <strong class="bold">continue</strong> keyword can be used<a id="_idIndexMarker163"/> within a loop<a id="_idIndexMarker164"/> to directly skip back to the beginning. In a <strong class="source-inline">for</strong> loop, this means we go to the next element in the array. In a <strong class="source-inline">while</strong> loop, this means we go back to evaluating <span class="No-Break">the condition:</span></p>
			<div>
				<div class="IMG---Figure" id="_idContainer051">
					<img alt="Figure 3.5 – The continue keyword will skip all subsequent code and go back to the start of the loop for the next element in the array" src="image/B19358_03_05.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.5 – The continue keyword will skip all subsequent code and go back to the start of the loop for the next element in the array</p>
			<p>For example, the following code will print out all items in the inventory but <span class="No-Break">skip </span><span class="No-Break"><strong class="source-inline">Banana</strong></span><span class="No-Break">:</span></p>
			<pre class="source-code">
var inventory = ["Boots", "Banana", "Bandages"]
for item in inventory.size():
   if item == "Banana":
      <strong class="bold">continue</strong>
   print(item)</pre>			<p>The result of this loop will be <span class="No-Break">as follows:</span></p>
			<pre class="source-code">
Boots
Bandages</pre>			<p>The <strong class="source-inline">continue</strong> keyword is quite useful<a id="_idIndexMarker165"/> when you want to skip elements, but what<a id="_idIndexMarker166"/> if you want to halt the execution of the loop altogether? That is where the <strong class="source-inline">break</strong> keyword c<a id="_idTextAnchor130"/>omes in. Let’s look at <span class="No-Break">that now.</span></p>
			<h3>The break keyword</h3>
			<p>Sometimes, you’ll want<a id="_idIndexMarker167"/> to stop the execution<a id="_idIndexMarker168"/> of a loop prematurely. In such a case, we can use the <span class="No-Break"><strong class="bold">break</strong></span><span class="No-Break"> keyword:</span></p>
			<div>
				<div class="IMG---Figure" id="_idContainer052">
					<img alt="Figure 3.6 – The break keyword will skip all subsequent code and stop executing the loop" src="image/B19358_03_06.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.6 – The break keyword will skip all subsequent code and stop executing the loop</p>
			<p>The interpreter will drop<a id="_idIndexMarker169"/> everything it was doing<a id="_idIndexMarker170"/> within the loop and go to the code after it. Here’s <span class="No-Break">an example:</span></p>
			<pre class="source-code">
var inventory = ["Boots", "Bandages", "Bananas", "Warm Gloves", "Goggles"]
while inventory.size() &gt; 3:
   if inventory[0] == "Bananas":
      <strong class="bold">break</strong>
   prints("Removing :", inventory[0])
   inventory.remove_at(0)</pre>			<p>This snippet will print out <span class="No-Break">the following:</span></p>
			<pre class="source-code">
Removing Boots
Removing Bandages</pre>			<p>Then, it will see that the first item in the inventory is <strong class="source-inline">Bananas</strong>, so the <strong class="source-inline">if</strong> statement evaluates to <strong class="source-inline">true</strong> and we break the loop, stopping <span class="No-Break">it completely.</span></p>
			<p>With that, we’ve seen how to use <strong class="source-inline">continue</strong> and <strong class="source-inline">break</strong>, but as I said earlier, it is possible to write the same loop without these keywords. As an experiment, try rewriting both examples using the <strong class="bold">continue</strong> and <strong class="bold">break</strong> keywords so that they have the same behavior, but don’t use the <strong class="bold">continue</strong> or <span class="No-Break"><strong class="bold">break</strong></span><span class="No-Break"> keywords.</span></p>
			<p>Loops allow us to run code<a id="_idIndexMarker171"/> for an undefined number of elements, making our code<a id="_idIndexMarker172"/> more flexible and dynamic. We will use them throughout this book. Now, let’s take a look at anoth<a id="_idTextAnchor131"/>er container data <span class="No-Break">type: dictionaries.</span></p>
			<h1 id="_idParaDest-79"><a id="_idTextAnchor132"/>Dictionaries</h1>
			<p>A <strong class="bold">dictionary</strong> is another data container, just like<a id="_idIndexMarker173"/> an array. But unlike arrays, which store data in a certain<a id="_idIndexMarker174"/> order, dictionaries store data using a <strong class="bold">key-value pair</strong>. Instead of associating each element with a predetermined number, like in an array, we associate them with a key that we define ourselves. Because we must define our own keys, there is a more rigid stru<a id="_idTextAnchor133"/>cture in a dictionary than in <span class="No-Break">an array.</span></p>
			<h2 id="_idParaDest-80"><a id="_idTextAnchor134"/>Creating a dictionary</h2>
			<p>Let’s say that we want<a id="_idIndexMarker175"/> to store the name, price, and weight of an item in our game. We can do this using <span class="No-Break">a dictionary:</span></p>
			<pre class="source-code">
var item = {
   "name": "Boots",
   "price": 5,
   "weight": 3.9
}</pre>			<p>Here, we use curly brackets, <strong class="source-inline">{}</strong>, to define a dictionary. Then, we define a key and its associated value within the curly brackets. For example, the <strong class="source-inline">"name"</strong> key is associated with the <strong class="source-inline">"Boots"</strong> value. Each key-value pair must be separated by <span class="No-Break">a comma:</span></p>
			<div>
				<div class="IMG---Figure" id="_idContainer053">
					<img alt="Figure 3.7 – Dictionaries consist of one or more key-value pairs" src="image/B19358_03_07.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.7 – Dictionaries consist of one or more key-value pairs</p>
			<p>As an experiment, try printing the preceding dictionary <span class="No-Break">like so:</span></p>
			<pre class="source-code">
print({
   "name": "Boots",
   "price": 5,
   "weight": 3.9
})</pre>			<p>Dictionaries help us in organizing<a id="_idIndexMarker176"/> the data together in a more structured form. Now, let’s have a look <a id="_idTextAnchor135"/>at what data we can put in <span class="No-Break">a dictionary.</span></p>
			<h2 id="_idParaDest-81"><a id="_idTextAnchor136"/>Data types in dictionaries</h2>
			<p>What data types<a id="_idIndexMarker177"/> can we use for keys <span class="No-Break">and values?</span></p>
			<p>The values within a dictionary can be any data type we like, even arrays or <span class="No-Break">other dictionaries!</span></p>
			<p>The keys, on the other hand, cannot. We can only use simple data types as keys in a dictionary. Strings, floats and integers are valid. More complex data types, such as arrays or dictionaries, are <span class="No-Break">not allowed.</span></p>
			<p>It’s good to note that the type of the keys and values don’t need to be the same over the whole dictionary. You can use different data <span class="No-Break">types throughout:</span></p>
			<pre class="source-code">
var a_mess_dictionary = {
   "string_key": [4, 6, 9],
   3.14: "Pi",
   123: {
      "sub_key": "This is a sub-dictionary"
   }
}</pre>			<p>As you can see, dictionaries<a id="_idIndexMarker178"/> are ver<a id="_idTextAnchor137"/>y powerful structures for <span class="No-Break">organizing data.</span></p>
			<h2 id="_idParaDest-82"><a id="_idTextAnchor138"/>Accessing and changing values</h2>
			<p>Accessing and changing<a id="_idIndexMarker179"/> a dictionary’s values<a id="_idIndexMarker180"/> is very similar<a id="_idIndexMarker181"/> to how we access<a id="_idIndexMarker182"/> the values of an array. Instead of specifying the index of the element within the square brackets, we specify the key of the value <span class="No-Break">we want:</span></p>
			<pre class="source-code">
var item = {
   "name": "Boots",
   "price": 5,
   "weight": 3.9
}
print(item["name"])
item["price"] += 10</pre>			<p>We can even use a stored key from within <span class="No-Break">a variable:</span></p>
			<pre class="source-code">
var key_variable = "name"
print(item[key_variable])</pre>			<p>Lastly, if the key you are trying to access is a string, you can also get to its value using the <span class="No-Break">following syntax:</span></p>
			<pre class="source-code">
print(item.name)</pre>			<p>Just use a dot behind the dictionary’s name and then the key. This will not work if the key i<a id="_idTextAnchor139"/>s anything other than a string, like <span class="No-Break">a number.</span></p>
			<h2 id="_idParaDest-83"><a id="_idTextAnchor140"/>Creating a new key-value pair</h2>
			<p>A remarkable feature<a id="_idIndexMarker183"/> of dictionaries<a id="_idIndexMarker184"/> is that we can easily add new key-value pairs after the dictionary is created. We can simply do this by assigning a value to a <span class="No-Break">non-existing key:</span></p>
			<pre class="source-code">
item["color"] = "blue"</pre>			<p>Here, we added a new key-value pair to the item dictionary <a id="_idTextAnchor141"/>with <strong class="source-inline">"color"</strong> as the key and <strong class="source-inline">"blue"</strong> as <span class="No-Break">the value.</span></p>
			<h2 id="_idParaDest-84"><a id="_idTextAnchor142"/>Useful functions</h2>
			<p>Just like arrays, dictionaries have some u<a id="_idTextAnchor143"/>seful functions<a id="_idIndexMarker185"/> that come in <span class="No-Break">handy occasionally.</span></p>
			<h3>has</h3>
			<p>Sometimes, we need to know<a id="_idIndexMarker186"/> if a dictionary contains a certain key. In such a case, we can count on the <span class="No-Break"><strong class="source-inline">has()</strong></span><span class="No-Break"> function:</span></p>
			<pre class="source-code">
var item = { "name": "Banana" }
if item.has("name"):
   print(item.name)</pre>			<p>Because the <strong class="source-inline">item</strong> dictionary has <a id="_idTextAnchor144"/>a key called <em class="italic">name</em>, this code will print <span class="No-Break">that name.</span></p>
			<h3>erase</h3>
			<p>We only saw how to add key-value pairs<a id="_idIndexMarker187"/> to a dictionary. But with <strong class="source-inline">erase()</strong>, we can also remove <span class="No-Break">a pair:</span></p>
			<pre class="source-code">
var item = { "name": "Banana" }
item.erase("name")</pre>			<p>The item dictionary will be empty at the end of <span class="No-Break">this snippet.</span></p>
			<p>As an experiment, try printin<a id="_idTextAnchor145"/>g out the item dictionary after you erase <span class="No-Break">all keys.</span></p>
			<h2 id="_idParaDest-85"><a id="_idTextAnchor146"/>Looping through dictionaries</h2>
			<p>It might be surprising, but you can loop<a id="_idIndexMarker188"/> through dictionaries, just like arrays. For example, if we want to print out all the information in an item dictionary, we could do something <span class="No-Break">like t<a id="_idTextAnchor147"/>his:</span></p>
			<pre class="source-code">
var item = {
   "name": "Boots",
   "price": 5,
   "weight": 3.9
}
for key in item:
   prints(key, "is", item[key])</pre>			<p>As you can see, the temporary variable, <strong class="source-inline">key</strong>, carries the keys of the dictionary one <span class="No-Break">for one.</span></p>
			<p>We can also directly iterate over all the values of a dictionary instead of first having to get <span class="No-Break">the keys:</span></p>
			<pre class="source-code">
for value in item.values():
   print(value)</pre>			<p>This loop will print out all the values within <span class="No-Break">the dictionary.</span></p>
			<p class="callout-heading">Important note</p>
			<p class="callout">Looping over an array or other data structure can also be called <em class="italic">iterating</em> <span class="No-Break">over it.</span></p>
			<p>As an experiment, try printing out the values of a <a id="_idTextAnchor148"/>dictionary with <strong class="source-inline">item.values()</strong>:  <span class="No-Break"><strong class="source-inline">print(item.values())</strong></span></p>
			<h2 id="_idParaDest-86"><a id="_idTextAnchor149"/>Nested loops</h2>
			<p>If you want to have<a id="_idIndexMarker189"/> more fun<a id="_idIndexMarker190"/> with loops, you can also nest them. By this, we mean you can use a loop within another loop. For example, let’s say we have an inventory that is an array of item dictionaries and we want to print out the information of each item in a nice way. We could do something <span class="No-Break">like this:</span></p>
			<pre class="source-code">
var inventory = [
   {
      "name": "Boots",
      "price": 5,
   },
   {
      "name": "Magical Gloves",
      "price": 10
   },
   {
      "name": "Cool Glasses",
      "price": 58
   }
]
for item_index in inventory.size():
   print("Stats of item ", item_index, ":")
   var item = inventory[item_index]
   for key in item:
     printt(key, item[key])</pre>			<p>First, we iterate over all the elements of the array, which gives us each item dictionary. Then, we iterate on all the keys of that item and print the key and <span class="No-Break">its value.</span></p>
			<p>Of course, you can also combine <strong class="source-inline">while</strong> and <strong class="source-inline">for</strong> loops freely. There are <span class="No-Break">no limits!</span></p>
			<p>With that, we’ve learned all about the two main looping<a id="_idIndexMarker191"/> control flows and the two main container<a id="_idIndexMarker192"/> data types in GDScript. In t<a id="_idTextAnchor150"/><a id="_idTextAnchor151"/><a id="_idTextAnchor152"/><a id="_idTextAnchor153"/><a id="_idTextAnchor154"/><a id="_idTextAnchor155"/><a id="_idTextAnchor156"/>he next section, we’ll learn about a new data <span class="No-Break">type: </span><span class="No-Break"><strong class="source-inline">null</strong></span><span class="No-Break">.</span></p>
			<h1 id="_idParaDest-87"><a id="_idTextAnchor157"/>Null</h1>
			<p>Lastly, let me introduce<a id="_idIndexMarker193"/> you to a new data type: <strong class="bold">null</strong>. This type only has one value: <strong class="source-inline">null</strong>. It carries no information, cannot be changed, and has no functions you can call. So, what is it good for? It is a variable’s value when we don’t give it one from the start. Try out the following snippet <span class="No-Break">of code:</span></p>
			<pre class="source-code">
var inventory
print(inventory)</pre>			<p>You’ll see that it will print out <strong class="source-inline">null</strong>. Sometimes, you’ll want to do this to ensure a variable exists but don’t want to initiate it with a value yet. In the filing cabinet metaphor from <a href="B19358_02.xhtml#_idTextAnchor044"><span class="No-Break"><em class="italic">Chapter 2</em></span></a>, this would mean that we reserved a drawer and a name for the variable but haven’t filled it with <span class="No-Break">data yet.</span></p>
			<p>Using a variable in any way while it is null will result in an error. For example, the next two operations will result in an error while running <span class="No-Break">the code:</span></p>
			<pre class="source-code">
var inventory
inventory.append("Boots")
var number_of_lives
number_of_lives -= 2</pre>			<p>So, it is best to check whether a variable is <strong class="source-inline">null</strong> if you are not sure that the variable <span class="No-Break">is initialized:</span></p>
			<pre class="source-code">
var number_of_lives
if number_of_lives != null:
   number_of_lives -= 2</pre>			<p>Some operators or functions return <strong class="source-inline">null</strong> when they cannot complete their task as expected. For example, if you access a key in a dictionary that doesn’t exist, it will return the <span class="No-Break"><strong class="source-inline">null</strong></span><span class="No-Break"> value:</span></p>
			<pre class="source-code">
var item = {
   "name": "Boots",
   "price": 5,
   "weight": 3.9
}
print(i<a id="_idTextAnchor158"/>tem["height"])</pre>			<p>The preceding example<a id="_idIndexMarker194"/> will print <span class="No-Break">out </span><span class="No-Break"><strong class="source-inline">null</strong></span><span class="No-Break">.</span></p>
			<h1 id="_idParaDest-88"><a id="_idTextAnchor159"/>Additional exercises – Sharpening the axe</h1>
			<ol>
				<li>Write a script that finds and prints out the name of the most expensive item in the following array using a <strong class="source-inline">for</strong> loop. You will need to keep two variables <strong class="source-inline">most_expensive_item</strong> and <strong class="source-inline">max_price</strong>. The <strong class="source-inline">max_price</strong> variable starts out at 0. Now, every time you come across a more expensive item you save that item in the <strong class="source-inline">most_expensive_item</strong> variable and update the new <strong class="source-inline">max_price</strong>. The most expensive item in the following array should be the <em class="italic">Ring </em><span class="No-Break"><em class="italic">of Might</em></span><span class="No-Break">:</span><pre class="source-code">
var inventory = [
   { "name": "Banana", "price": 5 },
   { "name": "Ring of Might", "price": 100 },
   { "name": "Potion of Healing", "price": 58 },
   { "name": "Helmet", "price": 44 },
]</pre></li>				<li>Write a script that checks whether a specific string is a palindrome; this means that the string should look the same whether you’re reading it forward or backward. For example, <em class="italic">rotator</em> is a palindrome, while <em class="italic">bee</em> is not. To do this, you’ll have to iterate over the string in two <span class="No-Break">directions simultaneously.</span></li>
			</ol>
			<h1 id="_idParaDest-89"><a id="_idTextAnchor160"/>Summary</h1>
			<p>In this chapter, we looked at two new container types, arrays and dictionaries, and two types of loops, <strong class="source-inline">for</strong> and <strong class="source-inline">while</strong> loops. We also learned about useful functions in the string data type and got acquainted with the <span class="No-Break"><strong class="source-inline">null</strong></span><span class="No-Break"> value.</span></p>
			<p>In the next chapter, we’ll learn all about classes,<a id="_idTextAnchor161"/> which are custom data types that we can <span class="No-Break">define ourselves.</span></p>
			<h1 id="_idParaDest-90"><a id="_idTextAnchor162"/>Quiz time</h1>
			<ul>
				<li>What are two container types we learned about in <span class="No-Break">this chapter?</span></li>
				<li>What is the difference between arrays <span class="No-Break">and dictionaries?</span></li>
				<li>How do you access the 4th value in the <span class="No-Break">following array?</span><pre class="source-code">
var grocery list = ["Appels", "Flour", "Lettuce", "Jelly", "Soap"]</pre></li>				<li>How do you access the value of the height in the <span class="No-Break">following dictionary?</span><pre class="source-code">
var person = {
   "name": "Mike",
   "eye_color": "brown",
   "hair_color": "blonde",
   "height": 184,
}</pre></li>				<li>What does <strong class="source-inline">range(2, </strong><span class="No-Break"><strong class="source-inline">9)</strong></span><span class="No-Break"> return?</span></li>
				<li>What is the difference between a <strong class="source-inline">for</strong> and a <span class="No-Break"><strong class="source-inline">while</strong></span><span class="No-Break"> loop?</span></li>
				<li>When we use one loop inside of another loop, do we call this <a id="_idTextAnchor163"/>a <span class="No-Break">nested loop?</span></li>
				<li>What value does the following <span class="No-Break">variable have?</span><pre class="source-code">
var number_of_lives</pre></li>			</ul>
		</div>
	</body></html>