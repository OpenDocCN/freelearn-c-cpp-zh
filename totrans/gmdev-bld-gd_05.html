<html><head></head><body>
<div id="sbo-rt-content"><div id="_idContainer067">
<h1 class="chapter-number" id="_idParaDest-74"><a id="_idTextAnchor075"/>5</h1>
<h1 id="_idParaDest-75"><a id="_idTextAnchor076"/>Setting Up Animation and Rigging</h1>
<p>In <a href="B17473_04.xhtml#_idTextAnchor060"><em class="italic">Chapter 4</em></a>, <em class="italic">Adjusting Cameras and Lights</em>, you saw why you should ignore certain concepts in Blender, specifically cameras and lights, because they don’t transfer easily to Godot. This chapter is sort of an opposite case. You might be wondering whether a game engine can’t move objects around for us, right? After all, we use a game engine to facilitate things such as displaying models, creating environments with visually rich effects, and so on. It’s normal to expect a game engine to take care of animating our models as well.</p>
<p>Although animating simple objects is perfectly possible in Godot, doing it for complex models such as a human character (or any bipeds, such as a robot) or a lion (or any quadrupeds, such as a cow) will take a lot of effort. Therefore, it makes much more sense to do most animations in Blender because it offers a much more streamlined workflow. We’ll explain in detail why that is so you can apply a similar reasoning process in your own projects.</p>
<p>Sometimes, you will have a model that looks nice and complete, but it won’t be suitable or ready to be animated. In <a href="B17473_01.xhtml#_idTextAnchor013"><em class="italic">Chapter 1</em></a>, <em class="italic">Creating Low-Poly Models</em>, we discussed vertices, faces, and edges. We will revisit some of those concepts in the context of getting our models ready for animation.</p>
<p>Then, when we believe the model is ready, we’ll look at Blender’s animation capabilities. We’ll do this by discovering two new things. First, we’ll utilize a new method called <strong class="bold">rigging</strong> and construct a rig that’s ubiquitous in animating models. Second, we’ll switch to a new workspace dedicated to animations. During this effort, you’ll get to know a whole different side of Blender.</p>
<p>After you see how rigging is done and how models can be animated, we’ll look into ways to prepare and store more animations in Blender so that they can easily be used later in Godot. So, once you know beforehand what will be required down the line, this knowledge might help you in setting things up accordingly in Blender before it’s too cumbersome to change later.</p>
<p>Despite the following section titles looking deceptively short, we have a lot to cover in this chapter:</p>
<ul>
<li>Where to build animations</li>
<li>Understanding the readiness of models</li>
<li>Creating animations</li>
<li>Getting animations ready for Godot</li>
</ul>
<p>In the end, you’ll know whether Blender or Godot is the right environment to tackle animations and how to get models ready for animations so that you can rig them. </p>
<h1 id="_idParaDest-76"><a id="_idTextAnchor077"/>Technical requirements</h1>
<p>There will be a lot of moving parts, figuratively and literally, in this chapter. Animation and rigging are challenging topics for most people who start practicing 3D. Although we’ll take things step by step, to give you extra help along the way, you might want to use some of the files that are in the interim stages instead of doing it all at once.</p>
<p>As usual, the book’s repository will have the necessary files for this chapter at the following link: <a href="https://github.com/PacktPublishing/Game-Development-with-Blender-and-Godot">https://github.com/PacktPublishing/Game-Development-with-Blender-and-Godot</a>.</p>
<h1 id="_idParaDest-77"><a id="_idTextAnchor078"/>Where to build animations</h1>
<p>Both Blender and Godot Engine have animating capabilities. Therefore, you might be wondering which<a id="_idIndexMarker201"/> software is better for creating animations. To answer this crucial question, we should be discussing what we are animating. When it comes to animations, especially in game development, we will be tackling the following two main concepts:</p>
<ul>
<li><strong class="bold">Whole-body objects</strong>: Objects <a id="_idIndexMarker202"/>such as a bouncing ball, a boat, or a projectile thrown from a source are all examples of objects that act like a solid system with no individually moving parts. The system can move as a whole without depending on its individual parts.</li>
<li><strong class="bold">Connected systems</strong>: Some<a id="_idIndexMarker203"/> systems depend on individual parts to be in motion. These systems have parts that are connected to each other and the individual parts work together to move the system they are part of. For example, cats use their feet, birds use their wings, and a human body moves in a certain direction using two appendages that are either in <a id="_idIndexMarker204"/>contact with a surface or interact with the medium they are in.</li>
</ul>
<p>Sometimes, some tools and gadgets in real life can do a similar job, and it’s possible to use one over another for a quick solution. However, every so often, we would like to pick the best tool for the job. We’ll discuss both Blender and Godot in the context of the concepts we have just pointed out to see which option might be a better choice.</p>
<h2 id="_idParaDest-78"><a id="_idTextAnchor079"/>Animating in Godot Engine</h2>
<p>Godot <a id="_idIndexMarker205"/>has a component, <strong class="bold">AnimationPlayer</strong>, that <a id="_idIndexMarker206"/>helps you build animations. We’ll look at it more closely in later chapters when we import our models to create a point-and-click adventure game. Similar to other applications’ animation components, it depends on<a id="_idIndexMarker207"/> setting <strong class="bold">keyframes</strong> to mark the changing points of an <a id="_idIndexMarker208"/>animated object. For example, to create a bouncing ball animation, you’d mark the ball sitting still on a plane in the earlier frames of the animation and mark a higher position in the world in the later frames.</p>
<p>This is quite easy to do with Godot. You just have to mark the important events as keyframes, and this operation is <a id="_idIndexMarker209"/>called <strong class="bold">keying</strong> or <strong class="bold">inserting a key</strong>. Thus, the engine figures out how the object should move in between the two keyframes. However, when the system is much more complicated than a simple ball, and it has moving parts, you’d be expected to select these separate parts to <strong class="bold">key</strong> them. This is not easy to do in Godot since the workflow is not constructed in a way to facilitate such complex operations in an easy manner. Consequently, it’s best to use Godot Engine when the system is relatively simple.</p>
<h2 id="_idParaDest-79"><a id="_idTextAnchor080"/>Animating in Blender</h2>
<p>As <a id="_idIndexMarker210"/>was just mentioned, when you are animating <a id="_idIndexMarker211"/>an object with parts that are responsible for creating the overall motion, such as animating a human body by moving individual parts such as feet and <a id="_idIndexMarker212"/>hands, then doing this kind of work in Blender will be the right choice thanks to a method called <strong class="bold">rigging</strong>. Later, in the <em class="italic">Creating animations</em> section, we’ll explain what rigging is and discover how to construct a rig for our models.</p>
<p>For now, it should be enough to know that individually moving parts for an animated body will require rigging to expedite the animation process. This is where Blender shines because it offers tools and custom interfaces to help you along the way. </p>
<p>Besides<a id="_idIndexMarker213"/> the ease of creating an animation, let’s point out another reason why Blender is a better choice for animating complex systems. If you construct <a id="_idIndexMarker214"/>your animations in Godot, you can only use them in Godot. On the contrary, a Blender animation will act as a source of truth so you can share it with other applications. </p>
<h2 id="_idParaDest-80"><a id="_idTextAnchor081"/>Wrapping up</h2>
<p>We’ll say one more thing about why Blender might be a better choice regardless of the complexity of creating animations. If you ever want to create a trailer for your game and you’ve gone through the trouble of creating accurate enough camera and light conditions similar to the ones you are going to employ in your game, then you can take a render of your scene, composed of many frames, which will utilize Blender’s animation system.</p>
<p>So, for simple objects that can be moved, utilize Godot Engine’s animation system. For systems that have individually moving parts, it’s better to do it in Blender. After all, Blender has dedicated tools to facilitate the creation of advanced animations. Now, let’s discuss when your models are ready to be animated.</p>
<h1 id="_idParaDest-81"><a id="_idTextAnchor082"/>Understanding the readiness of models</h1>
<p>In <a href="B17473_01.xhtml#_idTextAnchor013"><em class="italic">Chapter 1</em></a>, <em class="italic">Creating Low-Poly Models</em>, we started with primitive objects and altered their vertices, faces, and edges. During that process, we were concerned with how the model would look. As corny as it may sound, looks might be misleading sometimes. To be animated correctly, a model has to respect certain conventions other than how it looks. In other words, you’ve got to be sure whether your model is ready. </p>
<h2 id="_idParaDest-82"><a id="_idTextAnchor083"/>Topology and rigging</h2>
<p>The <a id="_idIndexMarker215"/>readiness level of a <a id="_idIndexMarker216"/>model could be defined by the term <strong class="bold">topology</strong>, which <a id="_idIndexMarker217"/>sounds a bit technical. In layman’s terms, it’s the distribution and arrangement of the vertices, edges, and faces of a model that altogether mark how optimized the model is for animation. </p>
<p>Not all topologies are created equal. There are bad and good topologies. Let’s look at <em class="italic">Figure 5.1</em> to get a better idea about what we mean by topology or distribution, particularly as being bad or good.</p>
<div>
<div class="IMG---Figure" id="_idContainer054">
<img alt="Figure 5.1 – The same model with two different distributions of vertices " height="640" src="image/Figure_5.1.jpg" width="1350"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.1 – The same model with two different distributions of vertices</p>
<p>The <a id="_idIndexMarker218"/>preceding figure shows a model with the same shape, but the topologies are different. Simply put, the left case is ready for animation, and the right one could use some work to straighten up those vertices to form a good flow. Then, you’d have to fix some of the irregularities by evenly distributing many of the faces that congregate. So, not only is the right case an eyesore, but it’s also detrimental during the animation process. </p>
<p>Let’s briefly touch on the role of <a id="_idIndexMarker219"/>rigging to understand the importance of<a id="_idIndexMarker220"/> good topology. If you were to model a human hand, you’d be designing fingers, knuckles, and the wrist. The model, or more correctly, its volume, would be hollow. In other words, you’d only be creating the vertices that would give the shape of a hand. However, in our minds, we know that this hand should have bones inside. When you wiggle your fingers around or bend your fingers at the knuckles and joints, different parts of the skeleton start moving so that the outer structure that’s connected to the bone system can move accordingly. </p>
<p>To simulate this, you take advantage of a practice called rigging, which involves introducing a skeleton system and a series of constraints that manage how the skeleton system behaves. We’ll work<a id="_idIndexMarker221"/> on a rigging example later in the chapter. For now, we are still concerned about <a id="_idIndexMarker222"/>our models being ready for the rigging to take place. To emphasize the relationship between topology and rigging better, let’s turn our attention to <em class="italic">Figure 5.2</em>.</p>
<div>
<div class="IMG---Figure" id="_idContainer055">
<img alt="Figure 5.2 – Different topologies for a hand model " height="713" src="image/Figure_5.2.jpg" width="1500"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"> </p>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.2 – Different topologies for a hand model</p>
<p>Observe how the <a id="_idIndexMarker223"/>faces are aligned more naturally in the middle case, which certainly looks like an improvement over the left one. Then, still for the middle case, look where the big thumb meets the main part of the hand; that area could use a bit more detail so that when the thumb stretches out like in the right case, there would be enough geometry to accommodate the skeleton’s behavior. Compare the first and the third hands to see which one looks more natural to your eye when it comes to flesh and skin in between fingers.</p>
<p>When a model is bending or stretching at certain points, it will be creating some creased and protruded areas, similar to where the fingers meet the hand in the preceding figure. If vertices, hence faces, don’t have a smooth flow, the model will look ripped or crushed in these weak spots. Having the correct topology is a topic that’s hard to master and it throws off a lot of beginners when they want to get into animation and rigging. You can find a few links that can help you understand the difference between a good and bad topology in the <em class="italic">Further reading</em> section.</p>
<p>To satisfy a good topology, since it’s necessary to line up edges and faces correctly where the action will occur, we need a mechanism to move problematic edges and faces around so that they will be in the right place. For this, we are going to discover a new method, or rather, a shortcut.</p>
<h2 id="_idParaDest-83"><a id="_idTextAnchor084"/>Grabbing</h2>
<p>In <a href="B17473_01.xhtml#_idTextAnchor013"><em class="italic">Chapter 1</em></a>, <em class="italic">Creating Low-Poly Models</em>, you got to know two methods that are very commonly used among Blender fans. <a id="_idIndexMarker224"/>They were <strong class="bold">Rotate</strong> (<em class="italic">R</em> as a shortcut) and <strong class="bold">Scale</strong> (<em class="italic">S</em> as a shortcut). There is<a id="_idIndexMarker225"/> a third common method<a id="_idIndexMarker226"/> that we intentionally omitted during that exercise. We depended on modifiers that helped us move vertices around, so we got away without it; however, it’s now time to employ it.</p>
<p>If you are able to rotate and scale things, then why can’t you move things around? In fact, you can, and this new method will help you move vertices, edges, and faces anywhere you want. There is only one caveat. Although most people refer to this operation as <strong class="bold">Move</strong>, its<a id="_idIndexMarker227"/> shortcut is a bit bizarre; it’s <em class="italic">G</em>. So, an easier way to think of this shortcut in the context of moving might perhaps be grabbing. You grab a vertex and leave it somewhere, in a sense. </p>
<p>In most Blender tutorials, you may find people use grab and move interchangeably. They're one and the same. So, throughout this book, when you see the word move, we mean the grab operation and the <em class="italic">G</em> shortcut.</p>
<p>Let’s practice this new piece of knowledge with a series of simple steps. After you start a new file, perform the following steps:</p>
<ol>
<li>Press <em class="italic">Tab</em> to enter <strong class="bold">Edit Mode</strong>.</li>
<li>Select only one vertex of the default cube.</li>
<li>Press <em class="italic">G</em> and move your mouse around.</li>
</ol>
<p>The vertex you selected is now being pulled around while you are moving your mouse. To terminate the grabbing, you can click anywhere and this should rest the selected vertex at its last position. <em class="italic">Figure 5.3</em> is an example of what we want to achieve.</p>
<div>
<div class="IMG---Figure" id="_idContainer056">
<img alt="Figure 5.3 – A vertex grabbed out of its original place and moved somewhere else " height="432" src="image/Figure_5.3.jpg" width="923"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.3 – A vertex grabbed out of its original place and moved somewhere else</p>
<p>You might have <a id="_idIndexMarker228"/>surmised that the vertex was moving freely in all three axes, and that would be correct. If you want to limit the movement to a certain axis, and if you wish to move the vertex a precise amount, you can do that too. While still in <strong class="bold">Edit Mode</strong>, perform the following steps:</p>
<ol>
<li value="1">Select another vertex.</li>
<li>Press <em class="italic">G</em>, then <em class="italic">X</em>.</li>
<li>Type <strong class="source-inline">0.5</strong>.</li>
</ol>
<p>You can pick any one of the other two axes if you want. Regardless, the value you type for any given axis defines the movement amount. So, a negative value will still move the selected part in the axis you choose, just in the opposite direction. </p>
<p>Additionally, sometimes you might want to move the selection in any but a certain direction. When you initiate a grab shortcut, if you press <em class="italic">Shift</em> before you pick the axis, it’ll move the selection to the other two remaining axes. So, <em class="italic">Shift+X</em> would move things anywhere but on the X axis. </p>
<p>Practice the grabbing operation a bit more by selecting edges or faces if you would like. Soon, we’ll explore the building blocks of animation. During that effort, you’ll most likely utilize the grab operation. So, when you are ready, let’s see how we can animate things.</p>
<h1 id="_idParaDest-84"><a id="_idTextAnchor085"/>Creating animations</h1>
<p>As we<a id="_idIndexMarker229"/> mentioned in the <em class="italic">Where to build animations</em> section, the type of animation we’ll do in Blender involves having individual parts of a system that move independently from each other or collaboratively move together sometimes. We also said that we would need a method called rigging, so let’s give an example to understand why rigging is useful.</p>
<p>When you talk, whether you are sitting or walking, the muscles and bones that are responsible for the talking are generally not affected by or affecting the other parts of your body. However, when you are walking, your legs rotate around the hip bones, and the rest of the system triggers other natural actions, such as swinging your arms, moving your shoulders slightly forward and backward, and so on.</p>
<p>In both cases where you have a local or system-wide dependency, we eventually move some of the vertices that make up a model. Since moving so many vertices is a lot of work, we use a structure we place inside the model to tell the necessary vertices where to move. The process to create such a structure is called rigging. In a way, rigging mimics what bones and muscles do in real life.  </p>
<p>In this section, we’ll work on a simple rigging process and rig a low-poly snake. Through this process, you’ll prepare the model for animation, but first, we'll get to know some of the essential components, as follows:</p>
<ul>
<li><strong class="bold">Armature</strong>: An <a id="_idIndexMarker230"/>armature, in simple terms, is a set of bones, but a better definition might be a framework serving as a control structure – what materials are to textures, armatures are to bones. So, the same armature could have multiple bones. Furthermore, the rigging process could involve many armatures if the system that’s animated requires so.</li>
<li><strong class="bold">Bone</strong>: This is the<a id="_idIndexMarker231"/> most essential part of a rigging system. Without bones, there would not be armatures, therefore nothing to animate. In real life, when your bones move outside of their zone of freedom, you feel pain, so your body keeps things intact. There are similar ways to restrict a bone’s freedom digitally, so to speak, so it works in tandem with other bones.</li>
</ul>
<p>We’ll first look at how to rig a model. For this effort, we’ll utilize one armature and many bones. After adding constraints to some of the bones, the rigging process will be complete. So, in the end, we will use our rig to animate the snake. </p>
<h2 id="_idParaDest-85"><a id="_idTextAnchor086"/>Rigging</h2>
<p>Now that<a id="_idIndexMarker232"/> the theoretical stuff is out of the way, we can focus on the practical aspects, mainly how to set up armatures and bones. To focus on the rigging process, we’ll use a low-poly snake model. The <strong class="source-inline">Snake.blend</strong> file in <strong class="source-inline">Chapter 5</strong>’s <strong class="source-inline">Start</strong> folder is a <a id="_idIndexMarker233"/>good starting point, and by the end of this <em class="italic">Rigging</em> section, you’ll have reached what you see in the <strong class="source-inline">Snake.Rigged.blend</strong> file. </p>
<p>Besides these two<a id="_idIndexMarker234"/> files, we’ll mention other complementary files that show the interim phase. As always, you can find all of these files at the URL mentioned in the <em class="italic">Technical requirements</em> section.</p>
<p>After you open the <strong class="source-inline">Snake.blend</strong> file, let’s add an armature by performing the following steps:</p>
<ol>
<li value="1">Press <em class="italic">3</em> on your numpad to switch to the <strong class="bold">Right Orthographic</strong> view.</li>
<li>Press <em class="italic">Shift+A</em>.</li>
<li>Select <strong class="bold">Armature</strong>.</li>
</ol>
<p>You can also find the result of the preceding operations in the <strong class="source-inline">Snake.First Bone.blend</strong> file. If your keyboard doesn’t have a numpad, then you can click on the <strong class="bold">X</strong> axis in the gizmo in the top-right corner of <strong class="bold">3D Viewport</strong> until you read <strong class="bold">Right Orthographic</strong> in the top-left corner. The following figure should help you see what we have done so far:</p>
<div>
<div class="IMG---Figure" id="_idContainer057">
<img alt="" height="1045" src="image/Figure_5.4.jpg" width="1548"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.4 – Beware the snake! On second thought, it doesn’t seem to have a mean bone in its body</p>
<p>We now have a new object type in our scene: an armature. You can see it in <strong class="bold">Outliner</strong> too with two green stick figures next to its title. Right now, we have one bone in the armature. So, bone and armature kind of mean the same thing at this point. Our goal, in rigging, will be to create and distribute a bunch of bones <a id="_idIndexMarker235"/>inside the snake’s mesh. So, let’s add more.</p>
<p>We seem to have a problem, though. That bone we added earlier looks like it’s occluded by the snake’s tail. So, if we keep adding more bones and laying them out so that they align with the snake’s body, we won’t be able to see what we are doing. Luckily, the solution is a couple of clicks away. While the armature is still selected, you can expand <strong class="bold">Viewport Display</strong> in the <strong class="bold">Armature</strong> settings in the <strong class="bold">Properties</strong> panel and turn on the <strong class="bold">In Front</strong> option. This will make sure the armature is always visible. </p>
<p class="callout-heading">Missing out on a numpad</p>
<p class="callout">Numpad shortcuts are helpful and they will make your life easier, especially during modeling and rigging when you need to view your work from certain angles often on. The following website offers eight different ways to mimic a numpad: <a href="https://essentialpicks.com/using-blender-with-no-numpad/">https://essentialpicks.com/using-blender-with-no-numpad/</a>.</p>
<p>Meshes are<a id="_idIndexMarker236"/> composed of vertices, faces, and edges. Similarly, bones are made of<a id="_idIndexMarker237"/> three <a id="_idIndexMarker238"/>components: <strong class="bold">root</strong>, <strong class="bold">body</strong>, and <strong class="bold">tip</strong>. The<a id="_idIndexMarker239"/> tip can be the root of another bone and vice versa. Just as we can go into <strong class="bold">Edit Mode</strong> for a mesh to change its inner parts, we can do so with an armature. So, select the armature and press <em class="italic">Tab</em>.</p>
<p>You should be able to click on and select the root and tip separately. When you select the structure in between the joints, it’ll automatically select the root and the tip since it’s all connected. <em class="italic">Figure 5.5</em> shows only the tip selected.</p>
<div>
<div class="IMG---Figure" id="_idContainer058">
<img alt="" height="974" src="image/Figure_5.5.jpg" width="1443"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.5 – The tip of the bone is selected in Edit Mode</p>
<p class="callout-heading">Credit where credit is due</p>
<p class="callout">The snake model we are rigging in this section is an asset created by an artist known as Quaternius. You <a id="_idIndexMarker240"/>can follow his work at <a href="https://quaternius.com">https://quaternius.com</a>. We’ll be using his other assets in later chapters as well. So, thank you for your generosity.</p>
<p>Now, we <a id="_idIndexMarker241"/>are ready to add more bones to the armature. We’ll do that by first positioning that initial bone, then we’ll add new bones coming off the tip. While still in <strong class="bold">Edit Mode</strong>, perform the following steps:</p>
<ol>
<li value="1">Select the root joint.</li>
<li>Press <em class="italic">G</em> and move the mouse so that the joint is somewhere in the middle of the snake’s chest.</li>
<li>Click to finish grabbing.</li>
<li>Select the tip joint.</li>
<li>Press <em class="italic">G</em> and move the mouse so that the joint is somewhere near the Y axis but inside the tail.</li>
<li>Click to finish grabbing again.</li>
</ol>
<p>A figure might be extremely helpful since all of this moving and positioning sounds a bit arbitrary. <em class="italic">Figure 5.6</em> is an example of what we have achieved in the last few steps.</p>
<div>
<div class="IMG---Figure" id="_idContainer059">
<img alt="Figure 5.6 – A well-placed bone for our snake " height="1114" src="image/Figure_5.6.jpg" width="1650"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.6 – A well-placed bone for our snake</p>
<p>Since up, down, or <a id="_idIndexMarker242"/>right concepts lose their meanings in the 3D space, it’s important to have a simple yet effective way to represent the natural flow of bones. If you compare <em class="italic">Figure 5.5</em> and <em class="italic">Figure 5.6</em>, which correspond to the <strong class="source-inline">Snake.First Bone.Editing.blend</strong> and <strong class="source-inline">Snake.First Bone.Position.blend</strong> files, respectively, you’ll notice that the structure between the joints is going in different directions. The broader part of the bone is closer to the root, and the narrower end of the bone is approaching its tip. For example, imagine your kneecap as the root and your ankle as the tip of one bone. Moreover, hip bone to kneecap, elbow to wrist, and so on.</p>
<p>We have to add a few more bones to our system. We’ll do that by extruding the original bone. While still having the tip of the bone selected, perform the following steps:</p>
<ol>
<li value="1">Press <em class="italic">E</em> to start extrusion.</li>
<li>Move the mouse in the right and bottom direction so it follows the tail’s form.</li>
<li>Click to finish extrusion.</li>
<li>Repeat <em class="italic">Steps 1 to 3</em> until you have four bones of roughly the same length.</li>
</ol>
<p>The result is <a id="_idIndexMarker243"/>shown in <em class="italic">Figure 5.7</em>, and you can also open the <strong class="source-inline">Snake.Tail Bones.blend</strong> file to compare your result.</p>
<div>
<div class="IMG---Figure" id="_idContainer060">
<img alt="Figure 5.7 – Four bones that make up the tail " height="1114" src="image/Figure_5.7.jpg" width="1650"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.7 – Four bones that make up the tail</p>
<p class="callout-heading">Importance of clicks</p>
<p class="callout">Similar to finishing a grabbing operation, extrusion needs a final click to solidify the position of an extruded object. Hence, throughout the rest of this chapter, when you follow a step where you see the word <em class="italic">extrude</em>, you are expected to click and finalize the extrusion when you are happy with the object’s position. If you prematurely terminate the extrusion, you can always hit <em class="italic">G</em> and grab this new object to move elsewhere and continue extruding if you wish. Thus, click to finalize both grabbing and extrusion, and use these two handy methods as often as you need. Also, if you change your mind while extruding, right-clicking will cancel this operation.</p>
<p>Extrusion <a id="_idIndexMarker244"/>helped us do a few things at once. We have created a new bone, positioned it correctly so its root aligned with the previous bone’s tip, parented this new bone to the previous bone, and finally, moved its tip to where we’d start the next bone.</p>
<p>We’re halfway through adding bones to the snake. That being said, now is a good time for a bit of housekeeping. We’ll be referencing some of these bones later, so it would be prudent of us to rename them now. If you have been paying attention to the new bones’ names after the extrusion, you must have seen that they are labeled in a format that goes like <strong class="bold">Bone.00X</strong> where X is the succeeding bone’s number. To rename all of the bones you have added so far, perform the following steps:</p>
<ol>
<li value="1">Select the original bone.</li>
<li>Press <em class="italic">F2</em> and rename it to <strong class="source-inline">Tail.1</strong>.</li>
<li>Repeat the preceding two steps for the rest of the bones so that their names look like <strong class="bold">Tail.X</strong>.</li>
</ol>
<p>Let’s move on to adding bones for the torso. For this, we are going to utilize the original bone, which is now renamed <strong class="bold">Tail.1</strong>. Some of the decisions that you’ll make while rigging your models will depend on the situation you are going to use the rig for. It would have been perfectly possible to start the bones from the head and go all the way to the end of the tail. However, we know that this snake will have an inclination point, mainly where the torso and tail bones meet. Therefore, you need to perform the following steps:</p>
<ol>
<li value="1">Select the root of <strong class="bold">Tail.1</strong>.</li>
<li>Press <em class="italic">E</em> to extrude a new bone in the right and top direction, following the torso.</li>
<li>Repeat <em class="italic">Step 2</em> twice more so that you have three bones in the end.</li>
<li>Select each new bone and rename them to look like <strong class="bold">Torso.X</strong> where X is a consecutive number starting at 1.</li>
</ol>
<p>The result is what you see in <em class="italic">Figure 5.8</em> and in the <strong class="source-inline">Snake.Torso Bones.blend</strong> file.</p>
<div>
<div class="IMG---Figure" id="_idContainer061">
<img alt="Figure 5.8 – New bones have been added following the torso to the head " height="1114" src="image/Figure_5.8.jpg" width="1650"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.8 – New bones have been added following the torso to the head</p>
<p>We can now <a id="_idIndexMarker245"/>plan the remaining bones. We’ll be concerned with only two bones for brevity’s sake: the head and mouth bones. If you have been following all along, the tip of <strong class="bold">Torso.3</strong> should still be selected. If not, select it, then perform the following steps:</p>
<ol>
<li value="1">Press <em class="italic">E</em> to extrude a new bone to the end of the snake’s nose.</li>
<li>Select <strong class="bold">Torso.3</strong>’s tip again.</li>
<li>Press <em class="italic">E</em> to extrude a new bone to the end of the snake’s mouth.</li>
</ol>
<p>In the end, the fully constructed skeleton, which you can find in the <strong class="source-inline">Snake.Full Skeleton.blend</strong> file, will look like what you see in <em class="italic">Figure 5.9</em>.</p>
<div>
<div class="IMG---Figure" id="_idContainer062">
<img alt="Figure 5.9 – The skeleton of our snake is complete " height="1225" src="image/Figure_5.9.jpg" width="1650"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.9 – The skeleton of our snake is complete</p>
<p>We are done <a id="_idIndexMarker246"/>with the skeleton. To complete the rigging, we need to add two more bones, which are usually called control bones. The following is an explanation of why a simple skeleton, although necessary, is still considered less than ideal. It has to do with the following two conflicting concepts:</p>
<ul>
<li><strong class="bold">Forward Kinematics</strong> (<strong class="bold">FK</strong>): When<a id="_idIndexMarker247"/> you have a series of bones and you want to move the extremity bones, for example, a thumb in a human’s hand, the motion would have to be calculated while considering all of the position and orientation values for all of the interim bones starting from the shoulder joint. Thus, the motion starts off at the root and goes forward.</li>
<li><strong class="bold">Inverse Kinematics</strong> (<strong class="bold">IK</strong>): This <a id="_idIndexMarker248"/>is a much more efficient method where, following the preceding example, by moving a thumb, all of the connected bones determine their state in reverse order one at a time, instead of calculating the overall system’s behavior. Thus, the moving bone dictates how the bone behind should behave, and that bone behind does the same all the way to the root.</li>
</ul>
<p>We prefer IK in our exercise since it’s much more convenient to use, and it is widely accepted in the industry. If you would like to get more in-depth information, especially on the math aspect of FK and IK, refer to the following two pages:</p>
<ul>
<li><a href="https://www.sciencedirect.com/topics/engineering/forward-kinematics">https://www.sciencedirect.com/topics/engineering/forward-kinematics</a></li>
<li><a href="https://www.sciencedirect.com/topics/engineering/inverse-kinematics">https://www.sciencedirect.com/topics/engineering/inverse-kinematics</a></li>
</ul>
<p>To introduce<a id="_idIndexMarker249"/> IK to some of our bones, we need to create control bones that will propagate the motion to the rest of the bones. Although these control bones will look like they are part of the skeleton visually, they will be decoupled from the skeleton. Right now, all of the bones that have been extruded have been automatically parented. So, we’ll need to unparent our two control bones once we extrude them off the end bones. </p>
<p>It would seem one of these bones could be coming off the <strong class="bold">Head</strong> bone, and the other control bone, by symmetry, could be coming off the <strong class="bold">Tail.4</strong> bone. Assuming you are still in the <strong class="bold">Right Orthographic</strong> view, in order to create these bones, you need to perform the following steps:</p>
<ol>
<li value="1">Extrude a bone in the left direction off the tip of the <strong class="bold">Head</strong> bone.</li>
<li>Rename this new bone as <strong class="source-inline">Head.IK</strong>.</li>
<li>Extrude a bone in the right direction off the tip of the <strong class="bold">Tail.4</strong> bone.</li>
<li>Rename this new bone as <strong class="source-inline">Tail.IK</strong>.</li>
</ol>
<p>We have created two new bones, but they are still attached to the skeleton. So, we need to separate them. <em class="italic">ALT+P</em> is a shortcut you can use to clear the parent relationship, but we’ll do the decoupling somewhere else since we’ll have to turn off another setting too. So, let’s do both at the same time, as follows:</p>
<ol>
<li value="1">Select the <strong class="bold">Head.IK</strong> bone.</li>
<li>Turn on the <strong class="bold">Bone Properties</strong> tab (the green bone icon) in the <strong class="bold">Properties</strong> panel.</li>
<li>Expand the <strong class="bold">Relations</strong> section in that tab.</li>
<li>Clear the parent by clicking on <strong class="bold">X</strong> in the name field.</li>
<li>Turn off the <strong class="bold">Deform</strong> option.</li>
<li>Repeat <em class="italic">Steps 3 to 5</em> for the <strong class="bold">Tail.IK</strong> bone.</li>
</ol>
<p>The <strong class="source-inline">Snake.Full Skeleton.IK.blend</strong> file contains all of the progress you have made so far, but let’s explain what we have done in the last several steps. We used to see the <strong class="bold">Armature</strong> properties, so we asked the <strong class="bold">Properties</strong> panel to show another view to display bone properties. We broke the connection of our control bones with their parent. Since there is no parent, the <strong class="bold">Connected</strong> checkbox automatically switched itself off. Lastly, we turned off a setting that’s the crux of all this whole operation: <strong class="bold">Deform</strong>.</p>
<p>If you<a id="_idIndexMarker250"/> recall what topology is and why we use a rigging system to animate systems that bend and stretch, then you’ll know that deformation is the key. We want the skeleton of the snake to deform the mesh it’s in. However, we wouldn’t want that for the control bones since we’ll use these to dictate the overall motion. So, they should not be deforming anything. </p>
<p>That being said, they will be responsible for IK, which is the last missing piece to the rigging. To complete the rigging, we need to add the <strong class="bold">IK</strong> ingredient, and we’ll do that in <strong class="bold">Pose Mode</strong>.</p>
<p>In <a href="B17473_01.xhtml#_idTextAnchor013"><em class="italic">Chapter 1</em></a>, <em class="italic">Creating Low-Poly Models</em>, we went back and forth between <strong class="bold">Object Mode</strong> and <strong class="bold">Edit Mode</strong>. In this chapter, we’ve been in <strong class="bold">Edit Mode</strong> all this time to move the parts of a bone and extrude new ones. Bones can be in another mode, <strong class="bold">Pose Mode</strong>, with which you can define the relationship of the bones with each other by introducing constraints. Consider this new mode as editing the behavior of the armature, hence how the model will <em class="italic">pose</em>.</p>
<p>Assuming you are in <strong class="bold">Edit Mode</strong> already, press <em class="italic">CTRL+Tab</em> then press <em class="italic">2</em> to switch. Or, if you are in <strong class="bold">Object Mode</strong>, then <em class="italic">CTRL+Tab</em> will take you directly to <strong class="bold">Pose Mode</strong>. Keep in mind that this works if you have a bone or the armature selected. Alternatively, the dropdown in the top-left corner can help you to be in the right mode. We’re now ready to add <strong class="bold">IK</strong> constraints as follows:</p>
<ol>
<li value="1">Select the <strong class="bold">Tail.4</strong> bone.</li>
<li>Turn on the <strong class="bold">Bone Constraints Properties</strong> tab (the blue bone icon with a strap around it) in the <strong class="bold">Properties</strong> panel.</li>
<li>Choose the <strong class="bold">Inverse Kinematics</strong> option in the <strong class="bold">Add Bone Constraint</strong> dropdown.</li>
<li>Repeat <em class="italic">Step 3</em> for the <strong class="bold">Head</strong> bone.</li>
</ol>
<p>We have <a id="_idIndexMarker251"/>added the missing <strong class="bold">IK</strong> component to two bones. Maybe you noticed that the constraint was not added to the control bones but to the bones just before them. We’ll now map some of the <strong class="bold">IK</strong> constraints' values to use the control bones. To do that, while the <strong class="bold">Head</strong> bone is selected, perform the following steps:</p>
<ol>
<li value="1">Click on the square icon in the <strong class="bold">Target</strong> field of the <strong class="bold">IK</strong> constraint.</li>
<li>Select <strong class="bold">Armature</strong> in the options.</li>
<li>Click on the bone icon in the <strong class="bold">Bone</strong> field of the <strong class="bold">IK</strong> constraint.</li>
<li>Select <strong class="bold">Head.IK</strong> in the options.</li>
</ol>
<p>This will designate <strong class="bold">Head.IK</strong> as the control bone for the <strong class="bold">Head</strong> bone. So, from now on, whenever you interact with <strong class="bold">Head.IK</strong>, it will control the <strong class="bold">Head</strong> bone that is connected to the other bones all the way to the root. That’s why you see a dotted yellow line going from the tip to the joint in between the <strong class="bold">Torso.1</strong> and <strong class="bold">Tail.1</strong> bones.</p>
<p>Let’s associate <strong class="bold">Tail.4</strong> and <strong class="bold">Tail.IK</strong> by following the preceding recipe so that interacting with <strong class="bold">Tail.IK</strong> can dictate the tail bones’ behavior. Select <strong class="bold">Tail.4</strong> then perform the following steps:</p>
<ol>
<li value="1">Select <strong class="bold">Armature</strong> in the options after clicking on the square icon in the <strong class="bold">Target</strong> field.</li>
<li>Select <strong class="bold">Tail.IK</strong> in the options after clicking on the bone icon in the <strong class="bold">Bone</strong> field.</li>
<li>Change the <strong class="bold">Chain Length</strong> value to <strong class="bold">3</strong>.</li>
</ol>
<p>The first two steps in the preceding set of instructions are pretty much exactly the same except that we picked the appropriate bone. The last step introduced a new concept that tells the control bone how far down the chain of bones the root bone is. The dotted line moved accordingly. The final result is what you see in <em class="italic">Figure 5.10</em>. </p>
<div>
<div class="IMG---Figure" id="_idContainer063">
<img alt="Figure 5.10 – A fully rigged snake " height="1113" src="image/Figure_5.10.jpg" width="1650"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.10 – A fully rigged snake</p>
<p>We’ve been<a id="_idIndexMarker252"/> doing all of this work so that the armature would be part of the snake. However, if you look at <strong class="bold">Outliner</strong>, you can still see that these two objects are separate. It’s time to really connect the skeleton to the snake’s mesh as follows:</p>
<ol>
<li value="1">Switch to <strong class="bold">Object Mode</strong>.</li>
<li>First select the <strong class="bold">Snake</strong> mesh, then <strong class="bold">Armature</strong> by holding down the <em class="italic">Shift</em> key.</li>
<li>Press <em class="italic">CTRL+P</em> to bring up the <strong class="bold">Set Parent To</strong> menu.</li>
<li>Choose <strong class="bold">With Automatic Weights</strong>.</li>
</ol>
<p>When you parent the armature to the mesh, two things will happen. First, <strong class="bold">Snake</strong> in <strong class="bold">Outliner</strong> will be moved as a child under the <strong class="bold">Armature</strong> item. Second, <strong class="bold">Snake</strong> will be assigned an <strong class="bold">Armature</strong> modifier that will build the connection between these two objects. </p>
<p>In the end, the <a id="_idIndexMarker253"/>armature will designate its bones to nearby vertices so that when a bone moves, it mobilizes the associated vertices. It’s as if some vertices that are closer to a particular bone <em class="italic">weigh</em> more in terms of priority. Thus, you won’t see a tail bone move far away vertices that much. </p>
<p>Phew, the rigging is finally complete. As you may have noticed, all of this creating and separating bones, adding constraints, adjusting settings, and so on could sometimes become a tricky business. You get visual clues as to which bone is doing what and how they are connected, but the scene could quickly get cluttered with gizmos. Like anything else, though, you get used to doing it with practice. On that note, you’ll find links to more advanced rigging material in the <em class="italic">Further reading</em> section. </p>
<p>We have provided the <strong class="source-inline">Snake.Rigged.blend</strong> file both in the <strong class="source-inline">Start</strong> and <strong class="source-inline">Finish</strong> folders for you to compare your results. You can also use this file as a starting point in the following section. Since we deemed that rigging was necessary for animation and that our rig is done, we can now turn to a new section where we’ll get to know the <strong class="bold">Animation</strong> workspace of Blender. </p>
<h2 id="_idParaDest-86"><a id="_idTextAnchor087"/>Animating</h2>
<p>We’re about<a id="_idIndexMarker254"/> to animate our snake. We’ve prepared a skeleton and introduced two control bones to construct a rig. In this section, we’ll use this setup to create an attack animation. Using the methods presented in this section, you can create different animations for your models and store these animations with the model in the same file.</p>
<p>Let’s switch to the <strong class="bold">Animation</strong> workspace to take advantage of a more suitable set of interfaces. The layout will change to mainly two side-by-side <strong class="bold">3D Viewport</strong> panels and what looks like a timeline underneath. There are actually two panels at the bottom, as follows:</p>
<ul>
<li><strong class="bold">Dope Sheet</strong>: We’ll work with keyframes soon to mark the defining points when parts of your model move over time. For example, a frog can have one keyframe for its resting position, then another keyframe defined as its highest jump level later in time.</li>
<li><strong class="bold">Timeline</strong>: This is a simpler version of <strong class="bold">Dope Sheet</strong>. It is represented with a clock icon and lets you see things at a higher level. We won’t utilize this interface that much, but it’s useful to set the <strong class="bold">Start</strong> and <strong class="bold">End</strong> keyframes of your animations.</li>
</ul>
<p>Besides <a id="_idIndexMarker255"/>these two editors, there is also the <strong class="bold">Graph Editor</strong>, which you can access by clicking the icon in the drop-down menu in the top-left corner of any panel. Actually, let’s do that by changing the left <strong class="bold">3D Viewport</strong> into a <strong class="bold">Graph Editor</strong>. When you are done, you should see something like the following:</p>
<div>
<div class="IMG---Figure" id="_idContainer064">
<img alt="Figure 5.11 – We have further customized the Animation workspace " height="1064" src="image/Figure_5.11.jpg" width="1650"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.11 – We have further customized the Animation workspace</p>
<p>We have everything we need to animate the snake. We’ll start with an attack animation. For this, we’ll move the head forward and raise the tail to depict a menacing pose. Start by switching the 3D perspective to <strong class="bold">Right Orthographic</strong> by pressing <em class="italic">3</em> on the numpad and performing the following steps:</p>
<ol>
<li value="1">Go into <strong class="bold">Pose Mode</strong>.</li>
<li>Select the <strong class="bold">Head.IK</strong> bone.</li>
<li>Press <em class="italic">I</em> to insert a keyframe and select <strong class="bold">Location</strong> in the options.</li>
</ol>
<p>This <a id="_idIndexMarker256"/>operation will add a key to the first frame in <strong class="bold">Dope Sheet</strong> as well as populating some elements both in <strong class="bold">Dope Sheet</strong> and <strong class="bold">Graph Editor</strong>. So far, so good. Take a look at what’s added to the animation editors and expand the <strong class="bold">Head.IK</strong> title in both editors to see what exactly is happening under the hood. We are marking the location of the <strong class="bold">Head.IK</strong> bone. </p>
<p>For the next event in the snake’s attack animation, we need to move the snake’s head forward and key (mark) its new location. For this, we need to select a new frame in the timeline as follows:</p>
<ol>
<li value="1">Change the frame value from <strong class="bold">1</strong> to <strong class="bold">10</strong> (just to the left of the <strong class="bold">Start</strong> section in <strong class="bold">Timeline</strong>).</li>
<li>Press <em class="italic">G</em> and move the head slightly to the left and up.</li>
<li>Press <em class="italic">I</em> to insert a keyframe and choose <strong class="bold">Location</strong> again.</li>
</ol>
<p>This should add more elements – more specifically, curved lines – to <strong class="bold">Graph Editor</strong>. This is good because you can use those curves to fine-tune how the action will start and end—more abruptly or smoothly, which can be used for more dramatic effects. We leave it to your artistic interpretation. What we can do, for now, is finish the head’s motion so that it goes back to its original position, as follows:</p>
<ol>
<li value="1">Change the frame value from <strong class="bold">10</strong> to <strong class="bold">25</strong>.</li>
<li>Press <em class="italic">Alt+G</em> to reset its position to the original values.</li>
<li>Press <em class="italic">I</em> to insert a keyframe and choose <strong class="bold">Location</strong> again.</li>
</ol>
<p><em class="italic">Figure 5.12</em> shows our progress so far.</p>
<div>
<div class="IMG---Figure" id="_idContainer065">
<img alt="Figure 5.12 – We have animated the head bone via a control bone " height="889" src="image/Figure_5.12.jpg" width="1650"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.12 – We have animated the head bone via a control bone</p>
<p>In the<a id="_idIndexMarker257"/> end, we have moved the torso bones by animating the <strong class="bold">Head.IK</strong> bone. That’s why we have implemented a control bone instead of moving the individual torso bones. Additionally, we haven’t done anything special to the <strong class="bold">Mouth</strong> bone, but that’s also moving to keep up with the head. </p>
<p>Let’s do something similar with the tail, as follows:</p>
<ol>
<li value="1">Set the frame to <strong class="bold">1</strong>.</li>
<li>Select the <strong class="bold">Tail.IK</strong> bone.</li>
<li>Press <em class="italic">I</em> to insert a keyframe and choose <strong class="bold">Location</strong>.</li>
<li>Set the frame to <strong class="bold">10</strong>.</li>
<li>Press <em class="italic">G</em> and move the tail slightly to the top and left.</li>
<li>Press <em class="italic">I</em> to insert a keyframe and choose <strong class="bold">Location</strong> again.</li>
<li>Set the frame to <strong class="bold">25</strong>.</li>
<li>Press <em class="italic">Alt+G</em> to reset the position.</li>
<li>Press <em class="italic">I</em> to insert a keyframe and choose <strong class="bold">Location</strong> again.</li>
</ol>
<p>In this pose, the tail naturally looks angry, which accentuates the head’s motion. By the way, where is your head? If you look in <strong class="bold">Dope Sheet</strong>, the keyframes for the head animation are gone. Blender only displays the keyframes for the selected object to keep the interface clean and simple. You can display everything by toggling off the <strong class="bold">Only Show Selected</strong> button, which looks like a select icon in the header of <strong class="bold">Dope Sheet</strong>. There is a similar button in <strong class="bold">Graph Editor</strong>; if you disable both, you should have something similar to what you see in <em class="italic">Figure 5.13</em>.</p>
<div>
<div class="IMG---Figure" id="_idContainer066">
<img alt="Figure 5.13 – Both the head and tail keyframes are visible in the editors " height="888" src="image/Figure_5.13.jpg" width="1649"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.13 – Both the head and tail keyframes are visible in the editors</p>
<p>You can<a id="_idIndexMarker258"/> also refer to the <strong class="source-inline">Snake.Animated.blend</strong> file in the <strong class="source-inline">Finish</strong> folder.</p>
<p>We’ve completed our first animation. If you would like to create another animation, where would you do it? It seems that we could keep adding more keyframes to the timeline. However, how would we know which keyframes are responsible for a particular animation? </p>
<p>We can answer this question both in Blender and Godot contexts. Actually, once we understand how to create separate animations in Blender for the same model, we’ll have practically prepared our animations to be shipped to Godot. To do this, we’ll discover <strong class="bold">Action Editor</strong> in <a id="_idIndexMarker259"/>the following section.</p>
<h1 id="_idParaDest-87"><a id="_idTextAnchor088"/>Getting animations ready for Godot</h1>
<p>Creating <a id="_idIndexMarker260"/>separate Blender files for different animations would be extremely unwieldy. If only we had a way to store multiple animations in the same file. Luckily, there is. We need to use a new interface called <strong class="bold">Action Editor</strong> for that. Let’s see how we can use it to create another action for the snake.</p>
<p>There is a <a id="_idIndexMarker261"/>dropdown in the top-left corner of the <strong class="bold">Dope Sheet</strong> panel. Although that whole panel could be considered as the <strong class="bold">Dope Sheet</strong> panel, we have been using its default view. This is similar to how <strong class="bold">3D Viewport</strong> works. When we were switching between <strong class="bold">Object Mode</strong> and <strong class="bold">Edit Mode</strong>, we were still working in the same <strong class="bold">3D Viewport</strong> panel but in one of its specialized views. In other words, these dropdowns customize the panel you are in. To switch the <strong class="bold">Dope Sheet</strong> panel to its <strong class="bold">Action Editor</strong> view, perform the following steps:</p>
<ol>
<li value="1">Expand the dropdown that shows <strong class="bold">Dope Sheet</strong>.</li>
<li>Select <strong class="bold">Action Editor</strong> in the options.</li>
</ol>
<p>This will reveal the title of our first animation, <strong class="bold">ArmatureAction</strong>, in the middle portion of the <strong class="bold">Action Editor</strong> header. This is a lackluster action name. The snake deserves better. Let’s change it by clicking its text and typing <strong class="source-inline">Attack</strong>. Now, you have just changed the default name to something you can easily keep track of. Moreover, when we import this model into Godot and we want to trigger the correct animation sequence, we’ll use this action name. Let’s create more actions as follows:</p>
<ol>
<li value="1">Click on the second icon next to the action title (the icon with stacked papers).</li>
<li>Change this new action’s title to <strong class="source-inline">Idle</strong>.</li>
</ol>
<p>This will actually create a copy of the first animation. Except for its title, everything is the same, but we can now change the features of the animation that match the title we just gave. In most games, the idle state of characters usually looks calm, but they have a slight bobbing up and down motion that indicates the character is alive but otherwise in a neutral state. Our idle action involves performing the following steps:</p>
<ol>
<li value="1">Set the frame to <strong class="bold">10</strong>.</li>
<li>Select the <strong class="bold">Head.IK</strong> bone and reset its position by pressing <em class="italic">Alt+G</em>.</li>
<li>Press <em class="italic">G</em> and move the bone ever so slightly downward.</li>
<li>Press <em class="italic">I</em> and choose <strong class="bold">Location</strong>.</li>
<li>Repeat <em class="italic">Steps 2 to 5</em>, but move the <strong class="bold">Tail.IK</strong> bone slightly upward.</li>
</ol>
<p>Let’s do <a id="_idIndexMarker262"/>one more thing and test our new action. Change the <strong class="bold">End</strong> value in <strong class="bold">Timeline</strong> to <strong class="bold">25</strong> and click the play button. This will let you see the action in a looped manner so that you get a sense of whether the locations in the animation are good enough. Make more corrections to the location of the head and tail control bones<a id="_idIndexMarker263"/> if you would like, but remember to set their values by pressing <em class="italic">I</em>.</p>
<p>Our snake is idling, up and down, perhaps waiting for a target to attack. By using the dropdown to the left of the action’s title, you can switch between different actions. </p>
<p>Congratulations! You have officially created two animations. If, at times, it was difficult to follow the instructions, you can find a fully finished example in the <strong class="source-inline">Finish</strong> folder in the <strong class="source-inline">Snake.blend</strong> file for further studying.</p>
<p>We have done a lot in this chapter. It’s time to summarize our efforts.</p>
<h1 id="_idParaDest-88"><a id="_idTextAnchor089"/>Summary</h1>
<p>This chapter started off with a discussion about which software (Blender versus Godot) would be suitable for animations. We exemplified different cases of animation and determined that Blender is the right choice for animating systems that have individually moving parts.</p>
<p>We then discussed the importance of good geometry, better known as topology, since not everything that looks good is good enough from an animation perspective. Once the system is in motion, the vertices, faces, and edges will act like a wrapper around a skeleton. If you know you’ll be animating your model, you might be careful in how you create the geometry better ahead of time.</p>
<p>Nevertheless, if such an early option is not always possible, to prevent tearing and creasing that might occur in certain areas of a model, we introduced the grab option. It can help you resolve problematic parts by moving them to a different location.</p>
<p>As soon as the distribution of vertices is in a favorable place, then the rigging can start. This is, in fact, one of the most advanced topics for most artists who are learning any 3D modeling software. It helps sometimes to think of rigging as a bunch of strings that control a puppet. Like a puppet master, you need to know which string controls which parts. To that end, we introduced IK, which has advantages over a more direct, also known as FK, approach.</p>
<p>After we created a rig for a snake, we discovered the animation workspace. Since the rigging depended on control bones via IK, our animation was done effortlessly. Along the way, we learned how to move parts of a rig and keyframe their properties. In our simple case, it was only location, and we kept the motion on one axis. </p>
<p>Lastly, we got to know how we could store two animations, rather actions, for the same model. Once you have properly labeled actions, not only will it be easier for you to find them in Blender in the future, but you will also see the benefit of this practice later in Godot chapters.</p>
<p>You have completed five chapters that took you from creating models to adding animations to your models. Along the way, you’ve also learned how to construct and apply materials and textures. In the following chapter, we’ll investigate how to export our work from Blender.</p>
<h1 id="_idParaDest-89"><a id="_idTextAnchor090"/>Further reading</h1>
<p>We mentioned the importance of topology, and it could be challenging to know what constitutes good or bad topology. So, to see more examples and benefit from other people’s expertise, refer to the following links:</p>
<ul>
<li><a href="https://blender.stackexchange.com/questions/140963/do-i-have-bad-topology">https://blender.stackexchange.com/questions/140963/do-i-have-bad-topology</a></li>
<li><a href="https://www.reddit.com/r/blenderhelp/comments/speyjs/is_this_bad_topology/">https://www.reddit.com/r/blenderhelp/comments/speyjs/is_this_bad_topology/</a></li>
<li><a href="https://www.pluralsight.com/blog/film-games/ngons-triangles-bad">https://www.pluralsight.com/blog/film-games/ngons-triangles-bad</a></li>
</ul>
<p>Some 3D practitioners specialize only in animation. Although it’s possible to animate some Blender objects without rigging them, for example, cameras and lights to move them around the scene, most online courses usually cover rigging and animation topics together. The following is a list of online courses and material for you to further your knowledge in both of these domains:</p>
<ul>
<li>CG Cookie: <a href="https://cgcookie.com/courses?sort_category=140,179">https://cgcookie.com/courses?sort_category=140,179</a></li>
<li>Udemy:<ul><li><a href="https://www.udemy.com/course/rigging-fundamentals-blender/">https://www.udemy.com/course/rigging-fundamentals-blender/</a></li>
<li><a href="https://www.udemy.com/course/rigging-and-animating-low-poly-fps-arms-in-blender/">https://www.udemy.com/course/rigging-and-animating-low-poly-fps-arms-in-blender/</a></li>
<li><a href="https://www.udemy.com/course/learn-3d-modelling-rigging/">https://www.udemy.com/course/learn-3d-modelling-rigging/</a></li>
<li><a href="https://www.udemy.com/course/blendercharacters/">https://www.udemy.com/course/blendercharacters/</a></li>
</ul></li>
</ul>
<p>Additionally, while you are browsing for more training content, you might come across a topic called <strong class="bold">Weight Painting</strong>, which is helpful in determining how the rigging will prioritize the nearby vertices. We left it out for brevity’s sake, but it’s a topic you’ll most likely want to cover if you want to be more thorough. </p>
<p>In the following chapter, we’ll be slowly transitioning from Blender to Godot. So, this chapter was really the last hands-on Blender chapter. If you want to know more about what Blender can do, there are some really useful resources out there, in both written and video formats, offered by Packt Publishing, such as the following resources:</p>
<ul>
<li><em class="italic">Blender 3D By Example</em> by Oscar Baechler and Xury Greer</li>
<li><em class="italic">Blender 3D Modeling and Animation: Build 20+ 3D Projects in Blender</em> by Raja Biswas</li>
<li><em class="italic">The Secrets to Photorealism: The PBR/Blender 2.8 Workflow</em> by Daniel Krafft</li>
</ul>
</div>
</div>


<div id="sbo-rt-content"><div class="Content" id="_idContainer068">
<h1 id="_idParaDest-90"><a id="_idTextAnchor091"/>Part 2: Asset Management</h1>
</div>
<div id="_idContainer069">
<p>In this transitional part, you'll learn how to move from Blender to Godot. An essential part of this workflow will be knowing which settings matter. By getting to know potential pitfalls and how to apply workarounds, you can prepare yourself for scenarios where you have to use third-party assets.</p>
<p>In this part, we cover the following chapters:</p>
<ul>
<li><a href="B17473_06.xhtml#_idTextAnchor092"><em class="italic">Chapter 6</em></a><em class="italic">, Exporting Blender Assets</em></li>
<li><a href="B17473_07.xhtml#_idTextAnchor112"><em class="italic">Chapter 7</em></a><em class="italic">, Importing Blender Assets into Godot</em></li>
<li><a href="B17473_08.xhtml#_idTextAnchor129"><em class="italic">Chapter 8</em></a><em class="italic">, Adding Sound Assets</em></li>
</ul>
</div>
<div>
<div id="_idContainer070">
</div>
</div>
<div>
<div class="Content" id="_idContainer071">
</div>
</div>
<div>
<div id="_idContainer072">
</div>
</div>
</div>
</body></html>