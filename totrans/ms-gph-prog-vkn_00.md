# 前言

Vulkan 现在是一个成熟且灵活的多平台图形 API。它已被广泛应用于许多行业，包括游戏开发、医学成像、电影制作和媒体播放。

了解 Vulkan 是理解现代图形 API 如何在桌面和移动设备上工作的基础步骤。

在《精通 Vulkan 图形编程》中，你将从开发渲染框架的基础开始。你将学习如何利用高级 Vulkan 特性来编写现代渲染引擎。你将了解如何自动化资源绑定和依赖关系。然后，你将利用 GPU 驱动渲染来扩展场景的大小，最后，你将熟悉提高渲染图像视觉质量的光线追踪技术。

在本书结束时，你将深入理解现代渲染引擎的内部工作原理以及实现最先进效果的图形技术。本书中开发的框架将成为你未来所有实验的起点。

# 本书面向对象

本书面向希望深入了解如何在 Vulkan 中编写现代且高性能渲染引擎的专业或业余图形和游戏开发者。

用户应熟悉图形编程的基本概念（即矩阵和向量）以及 Vulkan 的基本知识。

# 本书涵盖内容

*第一章*，*介绍 Raptor 引擎和 Hydra*，通过概述主要组件的结构来介绍我们的框架。然后我们将看到如何为 Windows 和 Linux 编译代码。

*第二章*，*改进资源管理*，通过将我们的渲染器移至使用无绑定纹理来简化渲染纹理的管理。我们还将通过解析生成的 SPIR-V 来自动化管线布局生成，并演示如何实现管线缓存。

*第三章*，*解锁多线程*，详细介绍了基于任务并行性的概念，这将帮助我们利用多个核心。我们将利用这项技术异步加载资源，并并行记录多个命令缓冲区。

*第四章*，*实现帧图*，帮助我们开发帧图，这是一种包含我们的渲染通道及其相互依赖的数据结构。我们将利用这个数据结构来自动化资源屏障放置，并通过资源别名提高内存使用效率。

*第五章*，*解锁异步计算*，说明了如何利用 Vulkan 中的异步计算队列。我们介绍了时间线信号量，这使得队列同步管理更加容易。最后，我们将实现一个简单的布料模拟，它在单独的队列上运行。

*第六章*, *GPU 驱动渲染*，将我们的渲染器从网格转换为 meshlets（用于实现 GPU 剔除的小三角形组），我们将介绍 mesh shaders 并解释如何利用它们实现现代剔除技术。

*第七章*, *使用集群延迟渲染渲染多个光源*，描述了我们的 G 缓冲区实现，然后转向集群光渲染。我们将演示如何利用屏幕瓦片和深度分箱实现高效渲染。

*第八章*, *使用网格着色器添加阴影*，简要回顾了阴影技术的历史，然后继续描述我们选择的方法。我们利用 meshlets 和 mesh shaders 支持高效渲染立方体贴图阴影贴图。我们还将演示如何使用稀疏资源来减少内存使用。

*第九章*, *实现可变率着色*，概述了可变率着色及其用途。然后我们将描述如何使用 Vulkan 扩展将此技术添加到我们的渲染器中。

*第十章*, *添加体积雾*，从第一原理实现体积效果。然后我们将讨论空间和时间滤波以改善最终结果的质量。

*第十一章*, *时间抗锯齿技术概述*，简要回顾了抗锯齿技术的发展历史。然后我们将描述实现健壮时间抗锯齿解决方案所需的全部步骤。

*第十二章*, *使用光线追踪入门*，概述了使用 Vulkan 中光线追踪扩展所需的关键概念。然后我们将提供创建光线追踪管线、着色器绑定表和加速结构的实现细节。

*第十三章*, *使用光线追踪重新审视阴影*，提出了一种使用光线追踪的阴影实现方案。我们将描述一个算法，该算法利用每个光源的动态光线数量，并结合空间和时间滤波器以产生稳定的结果。

*第十四章*, *使用光线追踪添加动态漫反射全局照明*，涉及将全局照明添加到我们的场景中。我们将描述我们使用光线追踪生成探针数据的方法，并提供一种最小化光泄漏的解决方案。

*第十五章*, *使用光线追踪添加反射*，简要介绍了屏幕空间反射及其不足之处。然后我们将描述我们的光线追踪反射实现。最后，我们将实现一个降噪器，以便结果可用于最终的光照计算。

# 为了充分利用这本书

本书假设读者熟悉 Vulkan 或其他现代渲染 API（如 DirectX 12 或 Metal）的基本概念。您应该熟悉编辑和编译 C 或 C++代码以及 GLSL 着色器代码。

| **本书涵盖的软件/硬件** | **操作系统要求** |
| --- | --- |
| Vulkan 1.2 | Windows 或 Linux |

您需要一个支持 C++17 的 C++编译器。还需要在系统上安装最新的 Vulkan SDK。我们提供了 Visual Studio 解决方案以及 CMake 文件来编译项目。

**如果您正在使用这本书的数字版，我们建议您亲自输入代码或从书的 GitHub 仓库（下一节中有一个链接）获取代码。这样做将帮助您避免与代码复制和粘贴相关的任何潜在错误**。

对于每一章，我们建议您运行代码并确保您理解其工作原理。每一章都是基于前一章的概念构建的，因此在继续之前，您必须对这些概念有深刻的理解。我们还建议您进行自己的更改，以尝试不同的方法。

# 下载示例代码文件

您可以从 GitHub 下载本书的示例代码文件：[`github.com/PacktPublishing/Mastering-Graphics-Programming-with-Vulkan`](https://github.com/PacktPublishing/Mastering-Graphics-Programming-with-Vulkan)。如果代码有更新，它将在 GitHub 仓库中更新。

我们还有其他来自我们丰富的图书和视频目录的代码包，可在[`github.com/PacktPublishing/`](https://github.com/PacktPublishing/)找到。查看它们！

# 下载彩色图像

我们还提供了一份包含本书中使用的截图和图表的彩色图像 PDF 文件。您可以从这里下载：[`packt.link/ht2jV`](https://packt.link/ht2jV)。

# 使用的约定

本书使用了许多文本约定。

`文本中的代码`：表示文本中的代码单词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 昵称。以下是一个示例：“对于每种资源类型，我们在`DescriptorSetCreation`对象上调用相对方法。”

代码块设置如下：

```cpp
export VULKAN_SDK=~/vulkan/1.2.198.1/x86_64 
export PATH=$VULKAN_SDK/bin:$PATH 
export LD_LIBRARY_PATH=$VULKAN_SDK/lib:$LD_LIBRARY_PATH 
export VK_LAYER_PATH=$VULKAN_SDK/etc/vulkan/explicit_layer.d
```

当我们希望将您的注意力引向代码块中的特定部分时，相关的行或项目将以粗体显示：

```cpp
VkPhysicalDeviceFeatures2 device_features{ VK_STRUCTURE_TYPE_PHYSICAL_DEVICE_FEATURES_2, &indexing_features }; 
vkGetPhysicalDeviceFeatures2( vulkan_physical_device, 
&device_features ); 
    bindless_supported = indexing_features.
descriptorBindingPartiallyBound && indexing_features.
runtimeDescriptorArray;
```

任何命令行输入或输出都应如下编写：

```cpp
$ tar -xvf vulkansdk-linux-x86_64-1.2.198.1.tar.gz
```

**粗体**：表示新术语、重要单词或屏幕上看到的单词。例如，菜单或对话框中的单词以粗体显示。以下是一个示例：“我们通过点击**启动**来启动应用程序，我们会注意到一个显示帧时间和渲染帧数的覆盖层。”

小贴士或重要提示

看起来是这样的。

# 联系我们

我们欢迎读者的反馈。

**一般反馈**：如果您对本书的任何方面有疑问，请通过电子邮件发送至 customercare@packtpub.com，并在邮件主题中提及书名。

**勘误**：尽管我们已经尽一切努力确保我们内容的准确性，但错误仍然可能发生。如果您在本书中发现错误，我们将不胜感激，如果您能向我们报告此错误。请访问[www.packtpub.com/support/errata](http://www.packtpub.com/support/errata)并填写表格。

**盗版**：如果您在互联网上遇到我们作品的任何形式的非法副本，如果您能提供位置地址或网站名称，我们将不胜感激。请通过 copyright@packt.com 与我们联系，并提供材料的链接。

**如果您有兴趣成为作者**：如果您在某个领域有专业知识，并且您有兴趣撰写或为本书做出贡献，请访问[authors.packtpub.com](http://authors.packtpub.com)。

# 分享您的想法

一旦您阅读了《精通 Vulkan 图形编程》，我们非常乐意听到您的想法！请选择[`www.amazon.com/review/create-review/error?asin=1803244798`](https://www.amazon.com/review/create-review/error?asin=1803244798)为此书评分并分享您的反馈。

您的评论对我们和科技社区非常重要，并将帮助我们确保我们提供高质量的内容。

# 下载本书的免费 PDF 副本

感谢您购买本书！

您喜欢在路上阅读，但无法随身携带您的印刷书籍吗？

您的电子书购买是否与您选择的设备不兼容？

不要担心，现在，每购买一本 Packt 书籍，您都可以免费获得该书的 DRM 免费 PDF 版本。

在任何地方、任何设备上阅读。直接从您最喜欢的技术书籍中搜索、复制和粘贴代码到您的应用程序中。

优惠不会就此结束，您还可以获得独家折扣、时事通讯和每日免费内容的每日电子邮件。

按照以下简单步骤获取福利：

1.  扫描下面的二维码或访问以下链接

![](img/B18395_QR_Free_PDF.jpg)

https://packt.link/free-ebook/9781803244792

1.  提交您的购买证明

1.  就这样！我们将直接将您的免费 PDF 和其他福利发送到您的电子邮件。

# 第一部分：现代渲染引擎的基础

在本部分，我们将为我们的渲染引擎打下坚实的基础。本节将涵盖以下章节：

+   *第一章**，介绍 Raptor 引擎和 Hydra*

+   *第二章**，改进资源管理*

+   *第三章**，解锁多线程*

+   *第四章**，实现帧图*

+   *第五章**，解锁异步计算*
