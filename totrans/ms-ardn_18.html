<html><head></head><body>
        

                            
                    <h1 class="header-title">Remotely Controlling the Arduino</h1>
                
            
            
                
<p>When I was a kid, my parents used to use both myself and my sister as the remote control for the television sets because back then, television sets did not come with remote controls. Fortunately, Eugene Polley, an engineer at <em>Zenith,</em> came up with the idea to control television with remote controls, saving millions of kids from having to change the channels for their parents. The remote control greatly enhanced how we interacted with the television set and can do the same for your Arduino project.</p>
<p>In this chapter, you will learn:</p>
<ul>
<li>How to connect a radio frequency remote control to an Arduino</li>
<li>How to determine what button is pressed on a radio frequency remote</li>
<li>How to connect an infrared remote control to an Arduino</li>
<li>How to determine what button is pressed on an infrared remote</li>
</ul>


            

            
        
    

        

                            
                    <h1 class="header-title">Introduction</h1>
                
            
            
                
<p>In this chapter, we will look at a couple of ways that we can control our Arduino project remotely. For the first project, we will use the Keyestudio IR (infrared) receiver, which uses the <strong>HX1838 infrared control module</strong>. The HX1838 infrared control module is used in numerous IR receivers that can be used by the Arduino. Therefore, you do not need to specifically get the Keyestudio one that we use here.</p>
<p>An infrared transmitter has an LED that emits infrared radiation, which is picked up by the infrared receiver. When a button is pressed on the remote control, the LED on the transmitter will blink very quickly for a fraction of a second and the receiver will read the pattern of blinks and interpret it.</p>
<p>The Keyestudio IR receiver that we will be using in this chapter looks like the following photograph:</p>
<p class="CDPAlignCenter CDPAlign"><img src="img/ec2f13b3-b1b8-4766-841a-5726474390ca.png" style="width:32.42em;height:18.75em;"/></p>
<p>The pin marked with the <strong>S</strong> is the signal pin and should be connected to one of the digital pins on the Arduino. The pin marked with the <strong>+</strong> sign should be connected to 5V and the pin with the <strong>-</strong> sign should be connected to ground.</p>
<p>One of the really nice things about using an IR receiver as the remote control for your project is you can use pretty much any IR remote controller as the transmitter. For example, I can use this remote that came with one of my IR receivers:</p>
<p class="CDPAlignCenter CDPAlign"><img src="img/e25082b0-b686-4861-b5aa-30475d73eb5a.png" style="width:12.08em;height:21.83em;"/></p>
<p>Or I could use any of my spare TV remotes that use infrared such as the one shown in the following photograph:</p>
<p class="CDPAlignCenter CDPAlign"><img src="img/594144fe-8f46-45d1-adad-cfe298a65fb3.png" style="width:11.25em;height:26.83em;"/></p>
<p>Some remotes, however, do not use infrared technologies such as the Apple TV remote, which uses Bluetooth 4.0. Therefore, they cannot be used with the infrared receiver.</p>
<p>Infrared remotes do have a couple drawbacks, the biggest being that they must have a line of sight to communicate with the receiver. What this means is the transmitter must be pointed directly at the receiver; otherwise, the receiver will not be able to read the transmission. Another drawback with infrared remotes is they are only really useful up to 30 feet (10 meters).</p>
<p>Rather than using an infrared transmitter/receiver we could use a <strong>radio frequency</strong> (<strong>RF</strong>) transmitter and receiver. In this chapter, we will look at how to use a basic four-button keyfob RF transmitter and a receiver like the ones shown in the following photograph:</p>
<p class="CDPAlignCenter CDPAlign"><img src="img/6bb52204-6b5c-4759-b54f-60dd9094c3dd.png" style="width:29.42em;height:20.17em;"/></p>
<p>The two biggest advantages of using an RF transmitter and receiver is that the RF signal can travel further, and they can go through normal walls, which means it does not need line of sight. Unlike the infrared receiver, which can work with almost any infrared transmitter, if the RF transmitter and receiver are not designed to work together, and are set to the same frequencies, they will not be able to communicate. RF transmitters such as the one shown in the preceding photograph, also have far fewer buttons than infrared remotes.</p>
<p>Let's look at the parts we will need for these projects.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Components needed</h1>
                
            
            
                
<p>For these projects, you will need the following items:</p>
<ul>
<li>One Arduino Uno or compatible board</li>
<li>One infrared receiver</li>
<li>One or more infrared transmitter(s)</li>
<li>One RF transmitter and receiver pair</li>
<li>Jumper wires</li>
<li>Breadboard</li>
</ul>


            

            
        
    

        

                            
                    <h1 class="header-title">Circuit diagrams</h1>
                
            
            
                
<p>The following diagram shows how we connect the infrared receiver to the Arduino:</p>
<p class="CDPAlignCenter CDPAlign"><img src="img/0b08245c-4b46-46a2-a3d7-21401cbe397a.png" style="width:32.92em;height:25.42em;"/></p>
<p>The 5V in and the ground pins on the IR receiver are connected to the appropriate rails on the breadboard. The signal pin is connected to the digital 2 pin on the Arduino. Now let's look at how we would connect the radio frequency receiver to the Arduino:</p>
<p class="CDPAlignCenter CDPAlign"><img src="img/51ede3ee-b019-421a-aa23-02a6f7b7c01c.png" style="width:33.08em;height:29.17em;"/></p>
<p>The 5V in and the ground pins on the RF receiver are connected to the appropriate rails on the breadboard. The four output pins on the receiver are connected to the 8, 9, 10 and 11 digital pins on the Arduino. When a button is pressed on the transmitter, the corresponding output pin on the receiver goes to HIGH.</p>
<p>Now let's look at the code for our projects.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Code</h1>
                
            
            
                
<p>Before we can start writing the code that will read the input from the infrared receiver, we will need to load the <strong>IRremote library</strong> by shirriff. The following screenshot shows the library and version that we will use:</p>
<p class="CDPAlignCenter CDPAlign"><img src="img/17076f8f-2192-4001-b420-e0fd5d161352.png" style="width:71.33em;height:34.83em;"/></p>
<p>Once the library is loaded, we will need to start by importing the header file for the IRremote library and creating the global variables and directives. The following code shows how to do that:</p>
<pre>#include &lt;IRremote.h&gt;

#define IR_PIN 2
IRrecv ir(IR_PIN);
decode_results irCode;</pre>
<p>In the preceding code, we start off by including the <kbd>IRremote.h</kbd> header file into our project. We then define that the infrared receiver is connected to pin 2 on the Arduino. Next, we create an instance of the <kbd>IRrecv</kbd> type, which is used to read the input from the IR receiver. Finally, we create an instance of the <kbd>decode_results</kbd> type, which is used to store the values from the IR receiver.</p>
<p>Now we will need to add the initialization code to the <kbd>setup()</kbd> function. The following codes shows the <kbd>setup()</kbd> function for this example:</p>
<pre>void setup()
{ 
  Serial.begin(9600);
  ir.enableIRIn();
}</pre>
<p>In this example, we start off by initializing the serial monitor so we can print out the results. We then call the <kbd>enableIRIn()</kbd> function from the <kbd>IRrecv</kbd> type instance, which will prepare the Arduino to read the input from the IR receiver.</p>
<p>In the <kbd>loop()</kbd> function, we look for input from the IR receiver and print out the codes for the buttons pressed on the remote. The following code shows what the <kbd>loop()</kbd> function will look like:</p>
<pre>void loop()
{
  if (ir.decode(&amp;irCode))
  {
    Serial.println(irCode.value, HEX);
    ir.resume();
  }
  delay(100);
}</pre>
<p>In the <kbd>loop()</kbd> function, we use the <kbd>decode()</kbd> function, passing in the instance of the <kbd>decode_results</kbd> type, to read the code of the button that was pressed. Once a code has been received, the <kbd>Serial.println()</kbd> function is used to print out the code to the serial console. We delay the execution of the application for 100 milliseconds to give the user a chance to release the button before a repeat code is sent. Finally, the <kbd>resume()</kbd> function is called to begin listening for results again.</p>
<p>The results of the code should look something like the following screenshot:</p>
<p class="CDPAlignCenter CDPAlign"><img src="img/da5fca3d-1494-43a2-ab59-57edb885a5a8.png" style="width:56.42em;height:26.42em;"/></p>
<p>The Car mp3 remote, shown earlier in this chapter, was used to get the results shown in the preceding screenshot.  <kbd>FF30CF</kbd> is the code for button number 1, the <kbd>FF18E7</kbd> code is the number 2 button, and the <kbd>ff7A85</kbd> code is the number 3 button. The <kbd>FFFFFFFF</kbd> results mean that the button is being held down; therefore, the last valid code should be used again.</p>
<p>You will probably want to save this project somewhere because it is very useful for getting valid codes for buttons on your remotes. Once you have the codes, you can then use the IRremote library in your other projects and perform whatever activities are needed depending on the codes returned from the receiver.</p>
<p>The RF receiver is a little easier to read because we do not need an external library to read it because there is one pin per button on the transmitter. When a user presses the button, the corresponding pin on the receiver will be pulled HIGH.</p>
<p>We will start the RF code by defining what pins on the Arduino are connected to the pins on the RF receiver. If you connected the RF receiver as shown in the Fritzing diagram, the buttons would be defined like this:</p>
<pre>#define BUTTON_A 10
#define BUTTON_B 8
#define BUTTON_C 11
#define BUTTON_D 9</pre>
<p>We then need to set up these pins for input within the <kbd>setup()</kbd> function and also initialize the serial monitor. The following code shows the <kbd>setup()</kbd> function for this project:</p>
<pre>void setup() {
  pinMode(BUTTON_A, INPUT);
  pinMode(BUTTON_B, INPUT);
  pinMode(BUTTON_C, INPUT);
  pinMode(BUTTON_D, INPUT);
  Serial.begin(9600);
}</pre>
<p>In the <kbd>loop()</kbd> function, we need to read each of the pins, check whether it is HIGH, and if so, perform what function is needed within your project. For this project, we simply print out that the pin was pressed. The following shows the <kbd>loop()</kbd> function for this project:</p>
<pre>void loop() {
  int valA = digitalRead(BUTTON_A);
  if (valA == HIGH) {
    Serial.println("Button A");
  }

  int valB = digitalRead(BUTTON_B);
  if (valB == HIGH) {
    Serial.println("Button B");
  }

  int valC = digitalRead(BUTTON_C);
  if (valC == HIGH) {
    Serial.println("Button C");
  }

  int valD = digitalRead(BUTTON_D);
  if (valD == HIGH) {
    Serial.println("Button D");
  }
  delay(100);
}</pre>
<p>When this code is run, you will be able to see which buttons were pressed within the serial monitor. Adding a remote control to your project may seem like simply a <em>nice to have;</em> however, it can really enhance the usability of your project and also save you from constantly getting up to interact with it. Now let's look at our challenge for this chapter.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Challenge</h1>
                
            
            
                
<p>In this chapter, we saw two types of remote control devices. The first was the IR control, which needs a line of sight to the project and can have a lot of different buttons. The radio frequency remote is good when the remote needs to work over greater distances from the device or even in a different room.</p>
<p>There are numerous other ways to create remote controls using wireless signals, such as <strong>Zigbee</strong> radios or even Wi-Fi; however, for this challenge, we want you to think outside the box and to begin to expand your own horizons. The challenge for this chapter is to think of ways to remotely control your device without using a wireless signal.</p>
<p>You may be shaking your head right now wondering what we mean by remotely controlling a project without using a wireless signal. One example of this would be the clapper. The clapper is a sound-activated electrical switch. You clap once, and the switch will turn on, you clap again, and the switch will turn off. Another example is a motion sensor that controls your outside lights. If the motion sensor detects motion, it will turn on the light. Now try to think outside the box and come up with other ways that you can control your device without using a wireless signal.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Summary</h1>
                
            
            
                
<p>In this chapter, we saw how to use an IR remote and an RF remote with an Arduino. You were also challenged to think outside of the box and think of other ways that you could remotely control your project without using a wireless signal. The reason this challenge was in this last project chapter was to get you to start thinking outside of the box when designing your projects because thinking outside of the box and creating new and improved ways to do something is what gets people excited about these types of projects. It can also make you a lot of money if you are able to monopolize your project.</p>
<p>In the next chapter, we will talk about how you can use the knowledge you gained from previous project chapters to create a simple robot. We will not be writing the code or designing the circuits for you. Instead we will show you how to put the pieces you have learned in the book together, so you can design your own robot or create other projects.</p>


            

            
        
    </body></html>