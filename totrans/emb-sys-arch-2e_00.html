<html><head></head><body>
<div><h1 id="_idParaDest-5"><a id="_idTextAnchor004"/>Preface</h1>
<p>Embedded systems have become increasingly popular in the last two decades thanks to the technological progress made by microelectronics manufacturers and designers, which has aimed to increase computing power and decrease the size of the logic of microprocessors and peripherals.</p>
<p>Designing, implementing, and integrating the software components for these systems requires a direct approach to the hardware functionalities in most cases, where tasks are implemented in a single thread and there is no operating system to provide abstractions to access CPU features and external peripherals. For this reason, embedded development is considered a domain on its own in the universe of software development, in which the developer’s approach and workflow need to be adapted accordingly.</p>
<p>This book briefly explains the hardware architecture of a typical embedded system, introduces the tools and methodologies needed to get started with the development of a target architecture, and then guides the readers through interaction with the system features and peripheral interaction. Some areas, such as energy efficiency and connectivity, are addressed in more detail to give a closer view of the techniques used to design low-power and connected systems. Later in the book, a more complex design, incorporating a (simplified) real-time operating system, is built from the bottom up, starting from the implementation of single system components. Finally, in this second edition, we have added a detailed analysis of the implementation of TrustZone-M, the TEE technology introduced by ARM as part of its latest family of embedded microcontrollers.</p>
<p>The discussion often focuses on specific security and safety mechanisms by suggesting specific technologies aimed at improving the robustness of the system against programming errors in the application code, or even malicious attempts to compromise its integrity.</p>
<h1 id="_idParaDest-6"><a id="_idTextAnchor005"/>Who this book is for</h1>
<p>If you’re a software developer or designer that wants to learn about embedded programming, this is the book for you. You’ll also find this book useful if you’re a less experienced or a beginner embedded programmer willing to expand your knowledge of embedded systems. More experience embedded software engineers may find this book useful for refreshing their knowledge of the internals of device drivers, memory safety, secure data transfers, privilege separation, and secure execution domains.</p>
<h1 id="_idParaDest-7"><a id="_idTextAnchor006"/>What this book covers</h1>
<p><a href="B18730_01.xhtml#_idTextAnchor015"><em class="italic">Chapter 1</em></a>, <em class="italic">Embedded Systems – A Pragmatic Approach</em>, is an introduction to microcontroller-based embedded systems. The scope of the book is identified, from a broader definition of “embedded systems” to the actual domain that will be analyzed – 32-bit microcontrollers with physical memory mapping.</p>
<p><a href="B18730_02.xhtml#_idTextAnchor055"><em class="italic">Chapter 2</em></a>, <em class="italic">Work Environment and Workflow Optimization</em>, outlines the tools used and the development workflow. This is an introduction to the toolchain, debuggers, and emulators that can be used to produce code in a binary format that can be uploaded and run on the target platform.</p>
<p><a href="B18730_03.xhtml#_idTextAnchor079"><em class="italic">Chapter 3</em></a>, <em class="italic">Architectural Patterns</em>, is all about the strategies and development methodologies for collaborative development and testing. This chapter proposes a description of the processes that are typically used while developing and testing software for embedded systems.</p>
<p><a href="B18730_04.xhtml#_idTextAnchor115"><em class="italic">Chapter 4</em></a>, <em class="italic">The Boot-Up Procedure</em>, analyzes the boot phase of an embedded system, boot stages, and bootloaders. It contains a detailed description of the bring-up code and the mechanisms used to separate the software into several boot stages.</p>
<p><a href="B18730_05.xhtml#_idTextAnchor149"><em class="italic">Chapter 5</em></a>, <em class="italic">Memory Management</em>, suggests some optimal strategies for memory management by pointing out common pitfalls and explaining how to avoid memory errors that can result in unpredictable or bad behavior in the application code.</p>
<p><a href="B18730_06.xhtml#_idTextAnchor194"><em class="italic">Chapter 6</em></a>, <em class="italic">General-Purpose Peripherals</em>, walks through accessing GPIO pins and other generic integrated peripherals. This is the first interaction of the target platform with the outside world, using electric signals to perform simple input/output operations.</p>
<p><a href="B18730_07.xhtml#_idTextAnchor230"><em class="italic">Chapter 7</em></a>, <em class="italic">Local Bus Interfaces</em>, guides you through the integration of serial bus controllers (UART, SPI, and I2C). A code-oriented, detailed analysis of the most common bus communication protocols is introduced by explaining the code required to interact with the transceivers commonly available in embedded systems.</p>
<p><a href="B18730_08.xhtml#_idTextAnchor275"><em class="italic">Chapter 8</em></a>, <em class="italic">Power Management and Energy Saving</em>, explores the techniques available to reduce power consumption in energy-efficient systems. Designing low-power and ultra-low-power embedded systems requires specific steps to be performed for reducing energy consumption while running the required tasks.</p>
<p><a href="B18730_09.xhtml#_idTextAnchor311"><em class="italic">Chapter 9</em></a>, <em class="italic">Distributed Systems and IoT Architecture</em>, introduces the available protocols and interfaces required to build distributed and connected systems. IoT systems need to communicate with remote endpoints using standard network protocols that are implemented using third-party libraries. Particular attention is dedicated to securing communication between endpoints using secure sockets.</p>
<p><a href="B18730_10.xhtml#_idTextAnchor357"><em class="italic">Chapter 10</em></a>, <em class="italic">Parallel Tasks and Scheduling</em>, explains the infrastructure of a multitasking operating system through the implementation of a real-time task scheduler. This chapter proposes three approaches for implementing operating systems for microcontrollers from scratch, using different schedulers (cooperative, pre-emptive, and safe).</p>
<p><a href="B18730_11.xhtml#_idTextAnchor403"><em class="italic">Chapter 11</em></a>, <em class="italic">Trusted Execution Environment</em>, describes the TEE mechanisms typically available on embedded systems and provides an example of running secure and non-secure domains using ARM TrustZone-M. On modern microcontrollers, TEE provides the opportunity to secure specific areas of memory or peripherals by limiting their access from the non-secure execution domain.</p>
<h1 id="_idParaDest-8"><a id="_idTextAnchor007"/>To get the most out of this book</h1>
<p>It is expected that you are proficient in the C language and understand how computer systems work. A GNU or Linux development machine is required to apply the concepts explained. Going through the example code provided is sometimes necessary to fully understand the mechanisms implemented. You are encouraged to modify, improve, and reuse the examples provided, applying the suggested methodologies.</p>
<div><div><img alt="" src="img/01.jpg"/>
</div>
</div>
<p>Additional usage instructions for the requested tools are available in<em class="italic"> </em><a href="B18730_02.xhtml#_idTextAnchor055"><em class="italic">Chapter 2</em></a><em class="italic">, Work Environment and </em><em class="italic">Workflow Optimization.</em></p>
<p><strong class="bold">If you are using the digital version of this book, we advise you to type the code yourself or access the code from the book’s GitHub repository (a link is available in the next section). Doing so will help you avoid any potential errors related to the copying and pasting </strong><strong class="bold">of code.</strong></p>
<h1 id="_idParaDest-9"><a id="_idTextAnchor008"/>Download the example code files</h1>
<p>You can download the example code files for this book from GitHub at <a href="https://github.com/PacktPublishing/Embedded-Systems-Architecture-Second-Edition">https://github.com/PacktPublishing/Embedded-Systems-Architecture-Second-Edition</a>. If there’s an update to the code, it will be updated in the GitHub repository.</p>
<p>We also have other code bundles from our rich catalog of books and videos available at <a href="https://github.com/PacktPublishing/">https://github.com/PacktPublishing/</a>. Check them out!</p>
<h1 id="_idParaDest-10"><a id="_idTextAnchor009"/>Download the color images</h1>
<p>We also provide a PDF file that has color images of the screenshots and diagrams used in this book. You can download it here: <a href="https://packt.link/kVMr1">https://packt.link/kVMr1</a>.</p>
<h1 id="_idParaDest-11"><a id="_idTextAnchor010"/>Conventions used</h1>
<p>There are a number of text conventions used throughout this book.</p>
<p><code>Code in text</code>: Indicates code words in text, database table names, folder names, filenames, file extensions, pathnames, dummy URLs, user input, and Twitter handles. Here is an example: “A single configuration file must be provided from the command-line invocation, with several platforms and development board configurations provided under the <code>/</code><code>scripts</code> directory.”</p>
<p>A block of code is set as follows:</p>
<pre class="source-code">
  /* Jump to non secure app_entry */  asm volatile("mov r12, %0" ::"r"     ((uint32_t)app_entry - 1));  asm volatile("blxns   r12" );</pre>
<p>When we wish to draw your attention to a particular part of a code block, the relevant lines or items are set in bold:</p>
<pre class="source-code">
   Secure Area 1:
<strong class="bold">     SECWM1_PSTRT : 0x0  (0x8000000)</strong>
<strong class="bold">     SECWM1_PEND  : 0x39  (0x8039000)</strong></pre>
<p>Any command-line input or output is written as follows:</p>
<pre class="console">
<strong class="bold">$ renode /opt/renode/scripts/single-node/stm32f4_discovery.resc</strong></pre>
<p>Commands for the debugger console are written as follows:</p>
<pre class="console">
<strong class="bold">    &gt; add-symbol-file app.elf 0x1000</strong>
<strong class="bold">    &gt; bt full</strong></pre>
<p class="callout-heading">Tips or important notes</p>
<p class="callout">Appear like this.</p>
<h1 id="_idParaDest-12"><a id="_idTextAnchor011"/>Get in touch</h1>
<p>Feedback from our readers is always welcome.</p>
<p><code>customercare@packtpub.com</code> and mention the book title in the subject of your message.</p>
<p><strong class="bold">Errata</strong>: Although we have taken every care to ensure the accuracy of our content, mistakes do happen. If you have found a mistake in this book, we would be grateful if you would report this to us. Please visit <a href="http://www.packtpub.com/support/errata">www.packtpub.com/support/errata</a> and fill in the form.</p>
<p><code>copyright@packt.com</code> with a link to the material.</p>
<p><strong class="bold">If you are interested in becoming an author</strong>: If there is a topic that you have expertise in and you are interested in either writing or contributing to a book, please visit <a href="http://authors.packtpub.com">authors.packtpub.com</a>.</p>
<h1 id="_idParaDest-13"><a id="_idTextAnchor012"/>Share your thoughts</h1>
<p>Once you’ve read <em class="italic">Embedded Systems Architecture, Second Edition</em>, we’d love to hear your thoughts! Please <a href="https://packt.link/r/1-803-23954-9">click here to go straight to the Amazon review page</a> for this book and share your feedback.</p>
<p>Your review is important to us and the tech community and will help us make sure we’re delivering excellent quality content.</p>
<h1 id="_idParaDest-14"><a id="_idTextAnchor013"/>Download a free PDF copy of this book</h1>
<p>Thanks for purchasing this book!</p>
<p>Do you like to read on the go but are unable to carry your print books everywhere?</p>
<p>Is your eBook purchase not compatible with the device of your choice?</p>
<p>Don’t worry, now with every Packt book you get a DRM-free PDF version of that book at no cost.</p>
<p>Read anywhere, any place, on any device. Search, copy, and paste code from your favorite technical books directly into your application.</p>
<p>The perks don’t stop there, you can get exclusive access to discounts, newsletters, and great free content in your inbox daily!</p>
<p>Follow these simple steps to get the benefits:</p>
<ol>
<li>Scan the QR code or visit the link below:</li>
</ol>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"> </p>
<div><div><img alt="" src="img/B18730_QR_Free_PDF.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><a href="https://packt.link/free-ebook/9781803239545">https://packt.link/free-ebook/9781803239545</a></p>
<ol>
<li value="2">Submit your proof of purchase</li>
<li>That’s it! We’ll send your free PDF and other benefits to your email directly</li>
</ol>
</div>


<div><h1 id="_idParaDest-15"><a id="_idTextAnchor014"/>Part 1 – Introduction to Embedded Systems Development</h1>
<p>This part gives a bird’s eye view of embedded development, explaining how it differs from other technical fields that developers may be familiar with. The second chapter helps transform a developer’s workstation into an actual hardware/software development lab and optimizes the steps needed to develop, test, debug, and deploy embedded software.</p>
<p>This part has the following chapters:</p>
<ul>
<li><a href="B18730_01.xhtml#_idTextAnchor015"><em class="italic">Chapter 1</em></a>, <em class="italic">Embedded Systems – A Pragmatic Approach</em></li>
<li><a href="B18730_02.xhtml#_idTextAnchor055"><em class="italic">Chapter 2</em></a>, <em class="italic">Work Environment and Workflow Optimization</em></li>
</ul>
</div>
<div><div></div>
</div>
</body></html>