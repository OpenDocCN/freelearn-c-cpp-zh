# 前言

虚拟现实不仅仅是我们在二十世纪喜爱的媒体在立体眼镜中的呈现。它远不止于此。虚拟现实不仅仅是以立体 3D 的方式向我们展示周围世界的图像。从字面上说，没错，它确实是这样，但这有点像说音乐只是让我们的耳朵周围的空气动一动。从技术上讲是对的，但这样的解释太过简单，无法让我们理解它。虚拟现实通过与我们的感官互动，与我们认为我们理解世界的认知机制共舞。要理解虚拟现实并学习如何为其创建，我们必须接受它是一种全新的媒体，我们对它的语言、规则和方法所不知道的远远超过我们所知道的。这是强大的东西，毫无疑问，虚拟现实或类似的技术很可能成为二十一世纪的定义艺术形式。

你对这种说法持怀疑态度是正确的。鉴于技术和行业的现状，需要一些想象力才能看到我们现在所处的地平线之外。而且你可能已经看到，公众的期望与技术和艺术形式的实际状态相比，有时滞后，有时超前。因此，对于虚拟现实的意见各不相同。如果我们处于技术迈出重要一步的阶段，人们会对可能性感到惊讶和兴奋，而充满激情的博客则宣称世界已经改变。如果我们处于期望超前的阶段，突然间每个人都对他们的第一代 Oculus Rift 没有一夜之间变成全息甲板感到失望，我们会在博客上看到很多幻灭。在你阅读这篇文章时，很难预测钟摆在摆动时会在哪个方向。

然而，这是一个现实，也是为什么我们相信现在值得学习这种媒体的原因：虚拟现实即将到来，这是不可避免的，它将改变一切，即使从第一代技术的初级状态来看，这一点还不明显。这种媒体具有改变我们学习、玩耍、参与虚拟世界等方方面面的潜力。但这需要时间和想象力。

虚拟现实是一个处于十字路口的媒体。我们现在做出的决策将深远影响未来。在这个媒体中工作的开发人员将成为下一代塑造其语言和方法的人。在虚拟现实领域工作是在一个前沿工作，这是一个令人兴奋的地方。

在这本书中，我们打算为你提供一套坚实的工具，以便开始在这个领域上工作。本书采用实践性、动手操作的方法，教你如何使用虚幻引擎构建虚拟现实游戏和应用程序。每一章都会逐步引导你构建虚拟现实应用程序的基本构建模块，并配以深入的解释，说明你按照这些步骤进行时实际发生了什么，以及为什么要这样做。这就是为什么很重要的原因。理解底层系统和思想的工作原理对于你在完成这些教程后自己的工作至关重要，在这本书中，我们试图给你两者都提供——构建虚拟现实应用程序的方法和你在虚拟现实领域工作所需的背景知识。

你应该从这本书中获得对虚拟现实应用程序的构建有坚实的理解，以及构建它们所需的关于虚幻引擎的具体知识和理解。我们希望我们在这里一起完成的工作能够让你在这个新的领域中自由探索。

# 这本书适合谁阅读

如果你对创建 VR 游戏或应用程序感兴趣，对于看看 VR 如何能够增强你在当前领域的工作，或者只是对探索 VR 并看看它能做什么感兴趣，本书适合你。你不需要成为一名有经验的工程师，甚至对虚幻引擎有深入的了解，都可以从本书中获益；我们会在进行解释。对于完全不熟悉虚幻引擎的读者来说，在开始阅读本书之前，跟着 Epic 的入门教程走一遍会很有帮助，这样你就知道一切在哪里，但本书完全适合那些需要了解虚幻引擎如何与 VR 配合使用的有经验的虚幻用户，以及刚刚开始探索虚幻引擎的新用户。

无论你是完全新手，对 VR 开发和虚幻引擎都不熟悉，还是已经在其他引擎中进行 VR 开发，或者对虚幻引擎很熟悉但对 VR 还不熟悉，本书都能为你提供很多价值。（我们也希望那些已经熟悉使用虚幻引擎进行 VR 创作的人能够找到一些有趣的新视角和技巧。）

# 本书内容包括：

第一章，*在 VR 中思考*，介绍了 VR 作为一种媒介，并讨论了它在许多领域中的应用方式。我们讨论了沉浸和存在感的关键概念，并概述了设计和构建有效的 VR 体验的实践方法。

第二章，*设置开发环境*，带你了解设置虚幻引擎和移动 VR 开发环境的过程，并介绍了学习使用虚幻引擎和获取帮助的途径。对于那些对使用 C++感兴趣的人来说，本章还展示了如何设置开发环境来构建 C++项目和从源代码构建虚幻引擎。

第三章，*你的第一个 VR 项目：Hello World*，向你展示如何从头开始创建一个新的 VR 项目，创建 VR 时要使用的设置以及为什么要使用它们，以及如果你要为移动 VR 构建时需要做的不同之处。本章还教你如何将内容导入项目并与之一起工作，以及如何设置一些基本的蓝图，这些蓝图在 VR 开发中需要用到。

第四章，*在虚拟世界中移动*，教你如何创建和优化角色运动的导航网格，如何构建玩家控制的角色并设置输入处理，然后展示如何构建基于传送的运动方案以及如何实现无缝移动，以获得更沉浸式的虚拟现实体验。

第五章，*与虚拟世界互动-第一部分*，向你展示如何为玩家控制的角色添加手部，并使用手持动作控制器来驱动它们。

第六章，*与虚拟世界互动-第二部分*，展示如何设置动画蓝图以响应输入来动画化玩家的手部，并使玩家能够拾取和操作世界中的物体。

第七章，*在 VR 中创建用户界面*，向你展示如何为 VR 创建交互式的 3D 用户界面，并介绍了一个由该界面控制的 AI 伴侣角色。

第八章，*构建虚拟世界并优化 VR*，教你如何使用虚幻引擎编辑器的 VR 模式在 VR 中构建环境，以及如何找到环境中的性能瓶颈并修复它们。

第九章，*在 VR 中显示媒体*，教您如何在 VR 空间中在虚拟屏幕上显示视频媒体，包括单眼和立体。您将学习如何将 2D 和 3D 电影放在传统的虚拟屏幕上，如何将玩家包围在 360 度单眼和立体视频中，以及如何创建媒体管理器来控制其播放。

第十章，*在 VR 中创建多人体验*，教您关于虚幻的客户端-服务器网络模型，并向您展示如何从服务器复制角色、变量和函数调用到连接的客户端，如何设置玩家角色以在其所有者和其他玩家之间显示不同，以及如何设置远程过程调用以触发服务器上的事件。

第十一章，*进一步的 VR-扩展虚幻引擎*，向您展示如何安装和构建插件以扩展引擎的功能，并介绍如何使用蓝图强大的调试工具来深入了解陌生代码。

第十二章，*接下来去哪里*，向您展示了在深入进行 VR 开发时如何获取更多信息。

附录 A，*有用的心智技巧*，为您提供了一些有用的心智技巧，使您的开发更加高效。

附录 B，*研究和进一步阅读*，为您的搜索提供了一些有用的起点，这将逐渐帮助您加快学习速度。

# 为了充分利用本书

您不需要成为一名专业的虚幻引擎开发者才能从本书中受益，但了解事物的位置是有帮助的。如果您还没有安装虚幻引擎，不用担心-我们将在第二章中介绍这个，*设置开发环境*，但如果您以前从未使用过它，那么在重新开始阅读本书之前，可能有必要花些时间运行虚幻引擎的入门教程，以便了解一切的位置。

本书中的所有项目都经过设计，可以与 Oculus Rift 和 HTC Vive 的最低规格配合使用，因此无论您使用台式机还是笔记本电脑，只要您的系统符合这些最低规格，都应该可以正常运行。当然，您应该有一个 VR 头盔，并且如果您计划开发移动 VR，建议您也有一个台式机 VR 头盔，因为这将大大简化测试过程。本书中您将使用的所有软件都可以在网上免费获取，我们将指导您下载和安装，因此在开始之前，您不需要安装任何特殊的软件。

本书主要是为 PC 开发者编写的，但如果您在 Mac 上工作，您的开发环境设置将有所不同，但我们在引擎中所做的一切都是相同的。

就是这样。如果您有一个 VR 头盔、一个可以运行它的系统和互联网访问权限（因为我们将下载引擎和示例内容），您就拥有了所需的一切。

# 下载示例代码文件

您可以从您在[www.packt.com](http://www.packt.com)上的账户中下载本书的示例代码文件。如果您在其他地方购买了本书，您可以访问[www.packt.com/support](http://www.packt.com/support)并注册，以便直接通过电子邮件接收文件。

您可以按照以下步骤下载代码文件：

1.  在[www.packt.com](http://www.packt.com)上登录或注册。

1.  选择“支持”选项卡。

1.  点击“代码下载和勘误”。

1.  在搜索框中输入书名，然后按照屏幕上的说明进行操作。

下载完成后，请确保使用最新版本的解压软件解压文件夹：

+   Windows 用户请使用 WinRAR/7-Zip

+   Mac 用户请使用 Zipeg/iZip/UnRarX

+   7-Zip/PeaZip for Linux

本书的代码包也托管在 GitHub 上，网址为[`github.com/PacktPublishing/Unreal-Engine-4-Virtual-Reality-Projects`](https://github.com/PacktPublishing/Unreal-Engine-4-Virtual-Reality-Projects)。如果代码有更新，将在现有的 GitHub 存储库上进行更新。

我们还有其他代码包，来自我们丰富的图书和视频目录，可在[`github.com/PacktPublishing/`](https://github.com/PacktPublishing/)上找到。请查看！

# 下载彩色图像

我们还提供了一个 PDF 文件，其中包含本书中使用的彩色图像的截图/图表。您可以在这里下载：[`www.packtpub.com/sites/default/files/downloads/9781789132878_ColorImages.pdf`](https://www.packtpub.com/sites/default/files/downloads/9781789132878_ColorImages.pdf)。

# 使用的约定

本书中使用了许多文本约定。

`CodeInText`：表示文本中的代码词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 句柄。以下是一个示例：“我们还应该快速查看一下您项目的`.uproject`文件。”

代码块设置如下：

```cpp
html, body, #map {
 height: 100%; 
 margin: 0;
 padding: 0
}
```

当我们希望引起您对代码块的特定部分的注意时，相关的行或项目将以粗体显示：

```cpp
[default]
exten => s,1,Dial(Zap/1|30)
exten => s,2,Voicemail(u100)
exten => s,102,Voicemail(b100)
exten => i,1,Voicemail(s0)
```

任何命令行输入或输出都以以下方式编写：

```cpp
UE4Editor.exe ProjectName ServerIP -game
```

**粗体**：表示新术语、重要单词或屏幕上显示的单词。例如，菜单或对话框中的单词会以这种方式出现在文本中。以下是一个示例：“选择窗口|开发者工具|设备配置文件以打开设备配置文件窗口。”

警告或重要提示会以这种方式出现。

技巧和诀窍会以这种方式出现。
