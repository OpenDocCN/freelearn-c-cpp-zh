<html><head></head><body><div><div><div><div><h1 class="title"><a id="ch06"/>Chapter 6. Materials</h1></div></div></div><p>Every video game provides a kind of colorful presentation for the player (even in black and white). As most players experience memorable parts of the game, this is what a player hears and detects visually in the game. This detection can be about an image, some notes, or something known as texture.</p><p>
<strong>Texture</strong> is a digital <a id="id357" class="indexterm"/>shell that covers objects in the game world. They can be unique or repetitive over a big area during the play in the different levels of the game. They can be interactive with the player or world, artistic, fantasy, or real and physical.</p><p>For example, sea mostly has a real texture of water. Some old engines just handle a simple image of water, whereas some modern engines (such as UE4) can provide the wave motion over the texture. Water is well known by everyone on our planet, and physical rules related to water have already been discovered by everyone during their lifetime.</p><p>On the other hand, <em>Alien</em> skin is something mostly related to art and fantasy of the game story. There is no experimental or proven physical aspect for such a thing. It can wave or vibrate with many different forms.</p><p>The art of creating materials in UE4 covers the physical and artistic features of design in detailed textures for the game.</p><div><div><div><div><h1 class="title"><a id="ch06lvl1sec58"/>What is physical material?</h1></div></div></div><p>Unreal Engine 4 <a id="id358" class="indexterm"/>defines a new method for creating materials. This method is based on the physical aspects of the real world. Things such as light reflections or heaviness will directly affect your model in the game world as visual elements and interactive behavior. You can make an ice cube that moves on the surface like a real one, or you can make waves of the ocean that have their own movements and reflect sunlight.</p><p>Basically, the quality of material has a direct connection to the graphics card and technologies involved in the CPU and the memory speed of the machine of a user. This leads developers and art directors to answer some important questions: how does our game render materials? Is it necessary that a user should have a super good machine to get what designers plan to show, or can we solve the quality aspect in simple ways?</p><p>A material can be created in three different ways. The first method uses an image that is copied to memory. This <a id="id359" class="indexterm"/>image gets loaded several times from the memory and depends on the size and alpha channel. It also gets some processing time from the CPU. The other method is to use the shaders technology. Here, the graphics card and the CPU are involved in creating a fully calculated shell on the surface of the object that represents the material. The final one is a mix of both. Unreal Engine 4 has all the tools to develop materials of high quality. At the same time, artists/developers can include some Shader-based effect on the surface of object. These features can be customized. This means that you can allow the players to set the graphics options of the game depending on the machine they use.</p><p>Let's go through an example of visual and interactive elements and how to create a physics-based material in the next section.</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch06lvl1sec59"/>Creating the first material</h1></div></div></div><p>Before we <a id="id360" class="indexterm"/>start working in Unreal Editor, we will need to have a project to work with. Perform the following steps:</p><div><ol class="orderedlist arabic"><li class="listitem">First, open Unreal Editor by clicking on the <strong>Launch</strong> button from the Unreal Engine launcher.</li><li class="listitem">Then, start a new project from <strong>Project</strong> browser by selecting the <strong>New Project</strong> tab. Now, select <strong>Blank</strong> and make sure that <strong>With Starter Content</strong> is selected. Name the project <code class="literal">material_test</code>.</li><li class="listitem">From <strong>Content Browser</strong>, click on the <strong>Props</strong> folder. You will see a series of models that you can drag and drop onto the stage. Select <strong>SM_MatPreviewMesh_02</strong> and drag an instance of it to the stage. Then, press the <em>F</em> key to focus the camera on your shape. We will use this shape to describe the physical aspects of materials in the game. You can choose other shapes and follow the next steps.<div><img src="img/image00307.jpeg" alt="Creating the first material"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">Now, click <a id="id361" class="indexterm"/>on the <strong>Materials</strong> folder and right click on an empty space in the preview section. From the menu, select <strong>Material</strong> and then enter <code class="literal">mymaterial</code> as the name for the new one. Now, drag and drop this material onto the <strong>Materials</strong> section in <strong>Element0</strong>, in <strong>Details</strong> menu. Now your new material is defined in the model:<div><img src="img/image00308.jpeg" alt="Creating the first material"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">Rotate the shape and zoom in and out of the surface. It's important to learn how you can easily navigate your camera around the model when you create materials. Unreal Engine 4 provides the basic elements of physical light and ray processing in real time for the materials. It also calculates how rough the surface is and then dynamically renders this on the shape. All these are at the same time connected to world details, such as sunlight or any other source of light, gravity, and materials around the shape. Therefore, it is good practice to check your object from different angles and zoom value. Try to reach out to the angles, as shown in the following screenshot:<div><img src="img/image00309.jpeg" alt="Creating the first material"/></div><p style="clear:both; height: 1em;"> </p><p>Also, the model that we are using has two elements: <strong>Element0</strong> and <strong>Element1</strong>. <strong>Element0 </strong>is the surface or shell of the model, whereas <strong>Element1</strong> is similar to the core of the shape. Both can accept different materials from the <strong>Material</strong> folder.</p></li><li class="listitem">Double-click <a id="id362" class="indexterm"/>on <strong>Element0</strong> in the <strong>Materials</strong> section of the <strong>Details</strong> menu. This opens the blueprint and the material editor for your material. In the middle of the screen, there is a blueprint of the current material. This is completely new and is named <code class="literal">mymaterial</code>.<p>Before we go too far, click on <strong>Apply</strong> from the top menu and check your model. It's similar to a black surface that covers the shell; your material is simply applied to the model, as shown in the following screenshot:</p><div><img src="img/image00310.jpeg" alt="Creating the first material"/></div><p style="clear:both; height: 1em;"> </p><p>From now on, you will learn how to change this layer on the shape using the blueprint in UE4.</p></li><li class="listitem">Double-click <a id="id363" class="indexterm"/>on <strong>Element0</strong> to go back to the material blueprint. As you can see in the following screenshot, there is a box with your material name (<code class="literal">mymaterial</code>). This box has some features to connect the blueprint units:<div><img src="img/image00311.jpeg" alt="Creating the first material"/></div><p style="clear:both; height: 1em;"> </p><p>Imagine that this box is kind of an output. You will send data to base color, metallic, and the rest of the inputs of this box. It creates a surface for your model and then outputs this data to your model's surface. As you can see, we don't have any input for this box at this stage. As a result, our material is simple and without any color or texture. You <a id="id364" class="indexterm"/>will have a sample of your material in the top-left corner of your screen that you can rotate or zoom with the help of your mouse.</p></li></ol><div></div></div>
<div><div><div><div><h1 class="title"><a id="ch06lvl1sec60"/>The physics of materials</h1></div></div></div><p>Each <a id="id365" class="indexterm"/>material in Unreal Engine 4 follows some physical properties to be defined by a designer. This is somehow different from the previous versions of the engine. Unreal Engine 4 gives developers and artists more options to create complex materials with higher performance compare to old versions. Also, you can invent or create dynamic materials with this structure.</p><p>As you can see in the preceding screenshot, there are a number of commands on the left-hand side of your material blueprint editor in the <strong>Palette</strong> section. Some have shortcuts to use. For example, you can drag and drop <strong>Constant</strong> from here onto your screen, or simply hold the <em>1</em> key on your keyboard and left-click your mouse on the screen. Both these methods give you a constant number to connect the input of the other box in the blueprint. Also, each box has some properties in the <strong>Details</strong> menu. These properties can be customized.</p><a id="id366" class="indexterm"/><p>Now let's make a material, based on physical rules, inside the Unreal Engine 4:</p><div><ol class="orderedlist arabic"><li class="listitem">At the top of the <code class="literal">mymaterial</code> box, locate <strong>Base Color</strong>. This property defines the color of the material and accepts numbers called vector numbers. Vectors in Unreal Engine 4 can handle 2, 3, and 4 numbers together.<div><ul class="itemizedlist"><li class="listitem">This example describes the main concept of vectors. Now, imagine that you have three chocolate boxes named <code class="literal">2Vector</code>, <code class="literal">3Vector</code>, and <code class="literal">4Vector</code>. When you open <code class="literal">2Vector</code>, you will find two chocolates together in the box. When you open <code class="literal">3Vector</code>, you will find three chocolates together in the box, and so on. If you send one of these boxes to someone, it means that you have sent all the chocolates together in the box to the destination. Now, when it is opened at the destination, all the chocolates are there at the same time. In this scenario, the chocolate box is a vector and the chocolates are the members of the vector. The members of the vector have the same weight on interaction between the user and themselves.</li><li class="listitem">We can use vectors when we need to use large amounts of data at the same time to apply physical properties in the engine. Color is a physical property made from three numbers for RGB values (red, green, and blue). We need to send three numbers, all together to this input, so the best choice is to send a vector number.</li><li class="listitem">On the right-hand side of the screen in <strong>Palette</strong>, locate <strong>Constant2Vector</strong>, drag and drop an instance of it onto the stage, or hold the <em>3</em> key and right-click on the stage, as shown in the following screenshot. Now, right-click on black area, set the color, and connect the box to <strong>Base Color</strong> on the <code class="literal">mymaterial</code> box. The values of RGB are shown in the <strong>Details</strong> menu as well. You can change them between <code class="literal">0</code> and <code class="literal">1</code>, so for example, pure yellow will be <strong>R</strong>: <code class="literal">1.0</code>, <strong>G</strong>: <code class="literal">1.0</code>, and <strong>B</strong>: <code class="literal">0.0</code>. Change this to <strong>R</strong>: <code class="literal">1.0</code>, <strong>G</strong>: <code class="literal">0.327</code>, and <strong>B</strong>: <code class="literal">0.0</code> to have an orange color on the model:</li></ul></div><div><img src="img/image00312.jpeg" alt="The physics of materials"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">Metallic surface is another physical aspect of your material. It defines how metallic your object looks like in case of the shininess of lights around. Locate <strong>Metallic</strong> under <strong>Base Color</strong> on the <code class="literal">mymaterial</code> box, then drag and drop one <a id="id367" class="indexterm"/><strong>Constant</strong> from <strong>Palette</strong> on the right-hand side. Change its value to <code class="literal">1.0</code> in the <strong>Details</strong> section. Click on <strong>Apply</strong> at the top and check your model. It looks similar to unpolished gold. Now, go back to the material editor and change the color to <strong>R</strong>: <code class="literal">0.2</code>, <strong>G</strong>: <code class="literal">0.2</code>, and <strong>B</strong>: <code class="literal">0.2</code>. Click on <strong>Apply</strong> at the top and check your model. Now, it looks similar to unpolished silver, as shown in the following screenshot:<div><img src="img/image00313.jpeg" alt="The physics of materials"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">Each material can provide the physical behavior of soft or none of the soft surfaces. Imagine the difference between a mirror and the white surface of a wall made by chalk. The big difference is that the mirror reflects the light in a linear way, but the chalk breaks the light into many different angles. As a result, you can't see any reflection of the shape on the wall.<div><ol class="orderedlist arabic"><li class="listitem">Let's <a id="id368" class="indexterm"/>try this by changing the color to white by setting <strong>R</strong>, <strong>G</strong>, and <strong>B</strong> to <code class="literal">1.0</code> for your <strong>Base Color</strong> property. Now, change the metallic value to <code class="literal">0.0</code> and then drag and drop one <strong>Constant</strong> from <strong>Palette</strong> on the right-hand side of your screen. Connect this to the <strong>Roughness</strong> property on the <code class="literal">mymaterial</code> box. Now, click on apply and check your model. It looks similar to a plastic with a mirror-like reflection of other objects on the surface. Now, go back back to the material editor and change its value to <code class="literal">1.0</code> in the <strong>Details</strong> section. Again, click on apply and check your model. Now, it looks similar a piece of chalk with absolutely no reflections of other objects around, as shown in the following screenshot:<div><img src="img/image00314.jpeg" alt="The physics of materials"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">Now, change the metallic value to <code class="literal">1.0</code> and click on <strong>Apply</strong>. The result is a nice reflective mirror surface around the object. Let's go back to the material editor. What you see is a fully metallic surface with maximum shininess of light and an absolute reflective <a id="id369" class="indexterm"/>surface that reflects light in the most linear and direct form. This is the physical descriptions of this material. So, if you wish to create a golden object similar to the following screenshot, you should change the values to <code class="literal">1.0</code>, <code class="literal">0.46</code>, and <code class="literal">1.0</code> for <strong>Base Color</strong>, <code class="literal">1.0</code> for <strong>Metallic</strong>, and <code class="literal">0.28</code> for <strong>Roughness</strong>:<div><img src="img/image00315.jpeg" alt="The physics of materials"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">Sometimes, you need to create some shiny plastics (such as pool balls). For this purpose, Unreal Engine 4 defines some physical methods to simulate plastic-like materials. Change your metallic property to <code class="literal">0</code> and then change roughness to <code class="literal">0</code>. Now, click on <strong>Apply</strong> and check the model. As you can see, the model looks similar to a <a id="id370" class="indexterm"/>plastic shiny toy. Set the <strong>Specular</strong> property to <code class="literal">1.0</code> by adding one <strong>Constant</strong> to it. Similarly, change other properties as well. Now, click on <strong>Apply</strong> and check your model. The images of surrounding objects will become more visible in the plastic. Unreal Engine 4 simulates the differences between the shiny non-metal surface and the metal surface by including the <strong>Specular</strong> value of the surface as physical variable.<div><img src="img/image00316.jpeg" alt="The physics of materials"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">It is good practice to select a couple of real-world objects around your computer and create their material in the engine based on physical elements. This includes <strong>Softness</strong> (<strong>Roughness</strong> and <strong>Specular</strong> inside the engine) and <strong>Shininess</strong>, related to the <strong>Metallic</strong> <a id="id371" class="indexterm"/>property. For example, try to create green apple skin, shoes, cooking tools (such as a spoon or fork), and paper.</li></ol><div></div></li><li class="listitem">Some materials need more physical aspects than has been mentioned before. For example, water has some patterns similar to waves on its surface and transparency. Also, the way light reflects on the surface of water is different from metal or plastic. To create these kinds of materials, which mostly have patterns and shadows on the surface, Unreal Engine 4 uses some images known as <strong>Normal </strong><a id="id372" class="indexterm"/><strong>Maps</strong>. Click on the <strong>Texture</strong> folder in your editor, find <code class="literal">T_Ground_Moss_N</code> and drag it onto your material editor, and connect this to the <strong>Normal</strong> property of <code class="literal">mymaterial</code>. Now, change <strong>Base Color</strong> to <code class="literal">0.4</code>, <code class="literal">0.5</code>, and <code class="literal">0.5</code> for the values of RGB. Then, click on <strong>Apply</strong> and check your model.<p>As you can see in the following screenshot, your model will have a surface similar to a stone, which in different angles of light shows shadows.</p><div><img src="img/image00317.jpeg" alt="The physics of materials"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">The texture on the surface of your model can also accept movements in the <em>X</em> and <em>Y</em> direction. Find <a id="id373" class="indexterm"/><strong>Panner</strong> in <strong>Palette</strong> on the right-hand side of your material editor and drag it onto the stage and then connect this to the UV's input on your <strong>Texture Sample</strong>. Select both boxes and hit <em>Ctrl</em> + <em>W</em>. This shortcut duplicates your selection. Now, add the <strong>Multiply</strong> box and connect your boxes, as shown in the following screenshot. Then, change <strong>Metallic</strong> to <code class="literal">0.7</code> and <strong>Roughness</strong> to <code class="literal">0.0</code>. Now, change <strong>Base Color</strong> to <code class="literal">0.2</code>, <code class="literal">0.5</code>, and <code class="literal">1.0</code> for RGB to see the water. Change the values of <strong>Panner</strong> to <code class="literal">0.02</code>, <code class="literal">0.0</code>, <code class="literal">0.01</code>, and <code class="literal">-0.011</code> to generate water waves on your model.<div><img src="img/image00318.jpeg" alt="The physics of materials"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">Now, let's talk about other physical aspects. For this, close your project and create a new project <a id="id374" class="indexterm"/>from <strong>Project</strong> browser by selecting the <strong>New Project</strong> tab. Select <strong>First Person</strong> and make sure that <strong>With Starter Content</strong> is selected. Then, select the <strong>Material</strong> folder and right-click on an empty space, navigate to <strong>Physics</strong>, select <strong>Physical Material</strong>, and name it <code class="literal">mymaterial</code>:<div><img src="img/image00319.jpeg" alt="The physics of materials"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">Now, select a cube, click on <strong>Apply</strong>, and double-click on <strong>Materials</strong> on the right-hand side to navigate to the material editor. In the <strong>Details</strong> section of <strong>Phys Materials</strong> on <a id="id375" class="indexterm"/>the left-hand side, click and select <code class="literal">mymaterial</code>; this will apply your physical material to the shape. Now, click on <strong>Apply</strong> at the top to go back to the material editor, as shown in the following screenshot:<div><img src="img/image00320.jpeg" alt="The physics of materials"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">As you can see, there isn't any change on the surface. We created a different kind of material that is responsible for the physical interaction of the shape, along with other shapes around. Let's click on <strong>Play</strong> and test how your cube responds to your shooting. Then, press <strong>Stop</strong>, double-click on <code class="literal">mymaterial</code>, and change <strong>Density</strong> to <code class="literal">20</code> in the new window. Now, click on <strong>Play</strong>. You will find that your cube <a id="id376" class="indexterm"/>appears to be heavier than the other cubes and moves very slowly in response to the shooting.</li><li class="listitem">Click on <strong>Stop</strong> to go back to the editor, double-click again on <code class="literal">mymaterial</code>, and change <strong>Density</strong> to <code class="literal">1.0</code> (the default value). This time, change <strong>Restitution</strong> from <code class="literal">0.3</code> to <code class="literal">2.3</code>. Now, go back to the editor, click on <strong>Play</strong>, and shoot at the box. It seems that the box has some more elastic movement.</li><li class="listitem">Now, click on <strong>Stop</strong> and again open the <strong>Details</strong> menu for <code class="literal">mymaterial</code> by double- clicking on it. Set <strong>Restitution</strong> to <code class="literal">0.3</code> (the default value). This time, change <strong>Friction</strong> to <code class="literal">-24</code> and play again. This property prepares an ice-like behavior for your shape.<p>You can create a simple game by changing <strong>Density</strong> to <code class="literal">10</code>, <strong>Restitution</strong> to <code class="literal">2.3</code>, and <strong>Friction</strong> to <code class="literal">-24</code>. Now, try to hit other cubes with the one that you defined your physical materials with.</p><div><img src="img/image00321.jpeg" alt="The physics of materials"/></div><p style="clear:both; height: 1em;"> </p></li></ol><div></div><p>Start a new project from <a id="id377" class="indexterm"/>
<strong>Project</strong> browser by selecting the <strong>New Project</strong> tab. Select <strong>First Person</strong> and make sure that <strong>With Starter Content</strong> is selected and name the project <code class="literal">material_test</code>.</p></div>
<div><div><div><div><h1 class="title"><a id="ch06lvl1sec61"/>Summary</h1></div></div></div><p>Making materials is an art in game design, and the new generation of Unreal Engine, which is 4, provides sufficient levels of detail design for the artists and developers in this area. Basically, the first step of making each material in Unreal Engine 4 is to address the physical features of this object. Features such as Metallic or <em>Color</em> and <em>Density</em> are some examples of how you can make a material inside your game world, which we went through in this chapter in detail.</p></div></body></html>