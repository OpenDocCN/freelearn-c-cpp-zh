<html><head></head><body><div class="chapter" title="Chapter&#xA0;4.&#xA0;Material and Light"><div class="titlepage"><div><div><h1 class="title"><a id="ch04"/>Chapter 4. Material and Light</h1></div></div></div><p>In this chapter, we will learn in detail about the materials and the lights in Unreal Engine 4. We have grouped both Material and Light together in this chapter because how an object looks is largely determined by both—material and lighting.</p><p>Material is what we apply to the surface of an object and it affects how the object looks in the game. Material/Shader programming is a hot ongoing research topic as we always strive to improve the texture performance—seeking higher graphic details/realism/quality with limited CPU/GPU rendering power. Researchers in this area need to find ways to make the models we have in a game look as real as possible, with as little calculations/data size as possible.</p><p>Lighting is also a very powerful tool in world creation. There are many uses of light. Lights can create a mood for the level. When effectively used, it can be used to focus attention on objects in the level and guide players through your level. Light also creates shadow. In a game level, shadow needs to be created artificially. Hence, we will also learn how we get shadows rendered appropriately for our game.</p><div class="section" title="Materials"><div class="titlepage"><div><div><h1 class="title"><a id="ch04lvl1sec51"/>Materials</h1></div></div></div><p>In the previous chapter, we<a id="id258" class="indexterm"/> briefly touched on what a material is and what a texture is. A texture<a id="id259" class="indexterm"/> is like a simple image file in the format of <code class="literal">.png</code>/<code class="literal">.tga</code>. A material is a combination of different elements, including textures to create a surface property that we apply to our objects in the game. We have also briefly covered what UV coordinates are and how we use them to apply a 2D texture to the surface of a 3D object.</p><p>So far, we have only learned how to apply materials that are available in the default Unreal Engine. In this chapter, we will dive deeper into how we can actually create our own custom material in Unreal Engine 4. Fundamentally, the material creation for the objects falls into the scope of an artist. For special customized textures, they are sometimes hand painted by 2D artists using tools such as Photoshop or taken from photographs of textures from the exact objects we want, or similar objects. Textures can also be tweaked from existing texture collection to create the customized material that is needed for the 3D models. Due to the vast number of realistic textures needed, textures are sometimes also generated algorithmically by the programmers to allow more control over its final look. This is also an important research area for the advancing materials for computer graphics.</p><p>Material manipulation<a id="id260" class="indexterm"/> here falls under the scope of a specialized group of programmers known as<a id="id261" class="indexterm"/> <span class="strong"><strong>graphic programmers</strong></span>. They are sometimes also researchers that look into ways to better compress texture, improve rendering performance, and create special dynamic material manipulation.</p></div></div>
<div class="section" title="The Material Editor"><div class="titlepage"><div><div><h1 class="title"><a id="ch04lvl1sec52"/>The Material Editor</h1></div></div></div><p>In Unreal Engine 4, material<a id="id262" class="indexterm"/> manipulation can be achieved using the Material Editor. What this editor offers is the ability to create material expressions. Material expressions work together to create an overall surface property for the material. You can think of them as mathematical formulas that add/multiply together to affect the properties of a material. The Material Editor makes it easy to edit/formulate material expressions to create customized material and provides the capability to quickly preview the changes in the game. Through Unreal's Blueprint capabilities and programming, we can also achieve dynamic manipulation of materials as needed by the game.</p><div class="section" title="The rendering system"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec55"/>The rendering system</h2></div></div></div><p>The rendering system<a id="id263" class="indexterm"/> in Unreal Engine 4 uses the DirectX 11 pipeline, which includes deferred shading, global illumination, lit translucency, and post processing. Unreal Engine 4 has also started branching to work with the newest DirectX 12 pipeline for Windows 10, and DirectX 12 capabilities will be available to all.</p></div><div class="section" title="Physical Based Shading Model"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec56"/>Physical Based Shading Model</h2></div></div></div><p>Unreal Engine 4 uses <a id="id264" class="indexterm"/>the <span class="strong"><strong>Physical Based Shading Model</strong></span> (<span class="strong"><strong>PBSP</strong></span>). This is a concept used in many modern day game engines. It uses an approximation of what light does in order to give an object its properties. Using this concept, we give values (0 to 1) to these four properties: <span class="strong"><strong>Base Color</strong></span>, <span class="strong"><strong>Roughness</strong></span>, <span class="strong"><strong>Metallic</strong></span>, and <span class="strong"><strong>Specular</strong></span> to approximate the visual properties.</p><p>For example, the bark of a tree trunk is normally brown, rough, and not very reflective. Based on what we know about how the bark should look like, we would probably set the metallic value to low value, roughness to a high value, and the base color to display brown with a low specular value.</p><p>This improves the process of creating materials as it is more intuitive as visual properties are governed by how light reacts, instead of the old method where we approximate the visual properties based on how light should behave.</p><p>For those who are <a id="id265" class="indexterm"/>familiar with the old terms used to describe material properties, you can think of it as having <span class="strong"><strong>Diffuse Color</strong></span> and <span class="strong"><strong>Specular Power</strong></span> replaced by <span class="strong"><strong>Base Color</strong></span>, <span class="strong"><strong>Metallic</strong></span>, and <span class="strong"><strong>Roughness</strong></span>.</p><p>The advantage of using PBSP is that we can better approximate material properties with more accuracy.</p></div><div class="section" title="High Level Shading Language"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec57"/>High Level Shading Language</h2></div></div></div><p>The Material Editor enables visual scripting of the <a id="id266" class="indexterm"/>
<span class="strong"><strong>High Level Shading Language</strong></span> (<span class="strong"><strong>HLSL</strong></span>), using a network of nodes and connection. Those who are completely new to the concept of shaders or HLSL should go on to read the next section about shaders, DirectX and HLSL first, so that you have the basic foundation on how the computer renders material information on the screen. HLSL is aproprietary shading language developed by Microsoft. OpenGL has its own version, known as GLSL. HLSL is the programming language used to program the stages in the graphics pipeline. It uses variables that are similar to C programming and has many intrinsic functions that are already written and available for use by simply calling the function.HLSL shaders can be compiled at author-time or at runtime, and set at runtime into the appropriate pipeline stage.</p></div><div class="section" title="Getting started"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec58"/>Getting started</h2></div></div></div><p>To open the Material Editor in Unreal Engine 4, go to <span class="strong"><strong>Content Browser</strong></span> | <span class="strong"><strong>Material</strong></span> and double-click on any material asset. Alternatively, you can select a material asset, right-click to open the context menu and select <span class="strong"><strong>Edit</strong></span> to view that asset in the Material Editor.</p><p>If you want to learn how to create a new material, you can try out the example, which is covered in the upcoming section.</p></div><div class="section" title="Creating a simple custom material"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec59"/>Creating a simple custom material</h2></div></div></div><p>We will continue to use<a id="id267" class="indexterm"/> the levels we have created. Open <code class="literal">Chapter3Level.umap</code> and rename it <code class="literal">Chapter4Level.umap</code> to prevent overwriting what we have completed at the end of the previous chapter.</p><p>To create a new Material asset in our game package, go to <span class="strong"><strong>Content Browser</strong></span> | <span class="strong"><strong>Material</strong></span>. With <span class="strong"><strong>Material</strong></span> selected, right-click to open the contextual menu, navigate to <span class="strong"><strong>New Asset</strong></span> | <span class="strong"><strong>Material</strong></span>. This creates the new material in the <code class="literal">Material</code> folder (we want to place assets in logical folders so that we can find game assets easily). Alternatively, you can go to <span class="strong"><strong>Content Browser</strong></span> | <span class="strong"><strong>New</strong></span> | <span class="strong"><strong>Material</strong></span>.</p><div class="mediaobject"><img src="graphics/B03679_04_01.jpg" alt="Creating a simple custom material"/></div><p>Rename the new<a id="id268" class="indexterm"/> material to <code class="literal">MyMaterial</code>. The following screenshot shows the new <span class="strong"><strong>MyMaterial</strong></span> correctly created:</p><div class="mediaobject"><img src="graphics/B03679_04_02.jpg" alt="Creating a simple custom material"/></div><p>Note that the thumbnail display for the new <span class="strong"><strong>MyMaterial</strong></span> shows a grayed-out checkered material. This is the default material when no material has been applied.</p><p>To open the <a id="id269" class="indexterm"/>Material Editor to start designing our material, double-click on <span class="strong"><strong>MyMaterial</strong></span>. The following screenshot shows the Material Editor with a blank new material. The spherical preview of the material shows up as black since no properties have been defined yet.</p><div class="mediaobject"><img src="graphics/B03679_04_03.jpg" alt="Creating a simple custom material"/></div><p>Let's start to define some properties for the <span class="strong"><strong>MyMaterial</strong></span> node to create our very own unique material. <span class="strong"><strong>Base Color</strong></span>, <span class="strong"><strong>Metallic</strong></span>, and <span class="strong"><strong>Roughness</strong></span> are the three values we will learn to configure first.</p><p>
<span class="strong"><strong>Base Color</strong></span> is defined by the red, green, and blue values in the form of a vector. To do so, we will drag and drop <span class="strong"><strong>Constant3Vector</strong></span> from <span class="strong"><strong>MyPalette</strong></span> on the right-hand side into the main window where the <span class="strong"><strong>MyMaterial</strong></span> node is in. Alternatively, you can right-click to open the context menu and type <code class="literal">vector</code> into the search box to filter the list. Click and select <span class="strong"><strong>Constant3Vector</strong></span> to create the node. Double-click on the <span class="strong"><strong>Constant3Vector</strong></span> to display the <span class="strong"><strong>Color Picker</strong></span> window. The following screenshot shows the setting of <span class="strong"><strong>Constant3Vector</strong></span> we want to use to create a material for a red wall. (<span class="strong"><strong>R</strong></span> = <span class="strong"><strong>0.4</strong></span>, <span class="strong"><strong>G</strong></span> = <span class="strong"><strong>0.0</strong></span>, <span class="strong"><strong>B</strong></span> = <span class="strong"><strong>0.0</strong></span>, <span class="strong"><strong>H</strong></span> = <span class="strong"><strong>0.0</strong></span>, <span class="strong"><strong>S</strong></span> = <span class="strong"><strong>1.0</strong></span>, <span class="strong"><strong>V</strong></span> = <span class="strong"><strong>0.4</strong></span>):</p><div class="mediaobject"><img src="graphics/B03679_04_04.jpg" alt="Creating a simple custom material"/></div><p>Connect the <a id="id270" class="indexterm"/>
<span class="strong"><strong>Constant3Vector</strong></span> to the <span class="strong"><strong>MyMaterial</strong></span> node as shown in the following screenshot by clicking and dragging from the small circle from the <span class="strong"><strong>Constant3Vector</strong></span> node to the small circle next to the <span class="strong"><strong>Base Color</strong></span> property in the <span class="strong"><strong>MyMaterial</strong></span> node. This <span class="strong"><strong>Constant3Vector</strong></span> node now provides the base color to the material. Notice how the spherical preview on the left updates to show the new color. If the color is not updated automatically, make sure that the <span class="strong"><strong>Live Preview</strong></span> setting on the top ribbon is selected.</p><div class="mediaobject"><img src="graphics/B03679_04_05.jpg" alt="Creating a simple custom material"/></div><p>Now, let us set the<a id="id271" class="indexterm"/> <span class="strong"><strong>Metallic</strong></span> value for the material. This property takes a numerical value from 0 to 1, where 1 is for a 100% metal. To create an input for a value, click and drag <span class="strong"><strong>Constant</strong></span> from <span class="strong"><strong>MyPalette</strong></span> or right-click in the Material Editor to open the menu; type in <code class="literal">Constant</code> into the search box to filter and select <span class="strong"><strong>Constant</strong></span> from the filtered list. To edit the value in the constant, click on the <span class="strong"><strong>Constant</strong></span> node to display the <span class="strong"><strong>Details</strong></span> window and fill in the value. The following screenshot shows how the material would look if <span class="strong"><strong>Metallic</strong></span> is set to 1:</p><div class="mediaobject"><img src="graphics/B03679_04_06.jpg" alt="Creating a simple custom material"/></div><p>After seeing how<a id="id272" class="indexterm"/> the <span class="strong"><strong>Metallic</strong></span> value affects the material, let us see what <span class="strong"><strong>Roughness</strong></span> does. <span class="strong"><strong>Roughness</strong></span> also takes a <span class="strong"><strong>Constant</strong></span> value from 0 to 1, where 0 is completely smooth and makes the surface very reflective. The left-hand screenshot shows how the material looks when <span class="strong"><strong>Roughness</strong></span> is set to 0, whereas the right-hand screenshot shows how the material will look when <span class="strong"><strong>Roughness</strong></span> is set to 1:</p><div class="mediaobject"><img src="graphics/B03679_04_07.jpg" alt="Creating a simple custom material"/></div><p>We want to use this new material to texture the walls. So, we have set <span class="strong"><strong>Metallic</strong></span> as <span class="strong"><strong>0.3</strong></span> and <span class="strong"><strong>Roughness</strong></span> as <span class="strong"><strong>0.7</strong></span>. The following screenshot shows the final settings we have for our first custom material:</p><div class="mediaobject"><img src="graphics/B03679_04_08.jpg" alt="Creating a simple custom material"/></div><p>Go to <span class="strong"><strong>MyMaterial</strong></span> in <a id="id273" class="indexterm"/>
<span class="strong"><strong>Content Browser</strong></span> and duplicate <span class="strong"><strong>MyMaterial</strong></span>. Rename it <code class="literal">MyWall_Grey</code>. Change the base color to gray using the following values as shown in the picker node for the <span class="strong"><strong>Constant3Vector</strong></span> value for <span class="strong"><strong>Base Color</strong></span>. (<span class="strong"><strong>R</strong></span> = <span class="strong"><strong>0.185</strong></span>, <span class="strong"><strong>G</strong></span> = <span class="strong"><strong>0.185</strong></span>, <span class="strong"><strong>B</strong></span> = <span class="strong"><strong>0.185</strong></span>, <span class="strong"><strong>H</strong></span> = <span class="strong"><strong>0.0</strong></span>, <span class="strong"><strong>S</strong></span> = <span class="strong"><strong>0.0</strong></span>, <span class="strong"><strong>V</strong></span> = <span class="strong"><strong>0.185</strong></span>):</p><div class="mediaobject"><img src="graphics/B03679_04_09.jpg" alt="Creating a simple custom material"/></div><p>The following screenshot <a id="id274" class="indexterm"/>shows the links for the <span class="strong"><strong>MyWall_Grey</strong></span> node. (<span class="strong"><strong>Metallic</strong></span> = <span class="strong"><strong>0.3</strong></span>, <span class="strong"><strong>Roughness</strong></span> = <span class="strong"><strong>0.7</strong></span>):</p><div class="mediaobject"><img src="graphics/B03679_04_10.jpg" alt="Creating a simple custom material"/></div></div><div class="section" title="Creating custom material using simple textures"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec60"/>Creating custom material using simple textures</h2></div></div></div><p>To create a material <a id="id275" class="indexterm"/>using textures, we must first <a id="id276" class="indexterm"/>select a texture that is suitable. Textures can be created by artists or taken from photos of materials. For learning purposes, you can find suitable free source images from the Web, such as <a class="ulink" href="http://www.textures.com">www.textures.com</a>, and use them. Remember to check for conditions of usage and other license-related clauses, if you plan to publish it in a game.</p><p>There are two types of textures we need for a custom material using a simple texture. First, the actual texture that we want to use. For now, let us keep this selection simple and straightforward. Select this texture based on the color and it should have the overall properties of what you want the material to look like. Next, we need a normal texture. If you still remember what a normal map is, it controls the bumps on a surface. The normal map gives the grooves in a material. Both of these textures will work together to give you a realistic-looking material that you can use in your game.</p><p>In this example, we will create another wood texture that we will use to replace the wood texture from the default package that we have already applied in the room.</p><p>Here, we will start first by importing the textures that we need in Unreal Engine. Go to <span class="strong"><strong>Content Browser</strong></span> | <span class="strong"><strong>Textures</strong></span>. Then click on the <span class="strong"><strong>Import</strong></span> button at the top. This opens up a window to browse to the location of your texture. Navigate to the folder location where your texture is saved, select the texture and click on <span class="strong"><strong>Open</strong></span>. Note that if you are importing textures that are not in the power of two (256 x 256, 1024 x 1024, and so on), you would have a warning message. Textures that are not in the power of two should be avoided due to poor memory usage. If you are importing the example images that I am using, they are already converted to the power of two so you would not get this warning message on screen.</p><p>Import both <span class="strong"><strong>T_Wood_Light</strong></span> and <span class="strong"><strong>T_Wood_Light_N</strong></span>. <span class="strong"><strong>T_Wood_Light</strong></span> will be used as the main texture, we want to have, and <span class="strong"><strong>T_Wood_Light_N</strong></span> is the normal map texture, which we will use for this wood.</p><p>Next, we follow the same steps to create a new material, as in the previous example. Go to <span class="strong"><strong>Content Browser</strong></span> | <span class="strong"><strong>Material</strong></span>. With the <span class="strong"><strong>Material</strong></span> folder selected, to open the contextual menu, navigate to <span class="strong"><strong>New Asset</strong></span> | <span class="strong"><strong>Material</strong></span>. Rename the new material <code class="literal">MyWood</code>.</p><p>Now, instead of selecting <span class="strong"><strong>Constant3Vector</strong></span> to provide values to the base color, we will use <span class="strong"><strong>TextureSample</strong></span>. Go to <span class="strong"><strong>MyPalette</strong></span> and type in <code class="literal">Texture</code> to filter the list. Select <span class="strong"><strong>TextureSample</strong></span>, drag and drop it into the Material Editor. Click on the <span class="strong"><strong>TextureSample</strong></span> node to display the <span class="strong"><strong>Details</strong></span>
<a id="id277" class="indexterm"/> panel, as shown in the following <a id="id278" class="indexterm"/>screenshot. On the <span class="strong"><strong>Details</strong></span> panel, go to <span class="strong"><strong>Material Expression Texture Base</strong></span> and click on the small arrow next to it. This opens up a popup with all the suitable assets that you can use. Scroll down to select <span class="strong"><strong>T_Wood_Light</strong></span>.</p><div class="mediaobject"><img src="graphics/B03679_04_11.jpg" alt="Creating custom material using simple textures"/></div><p>Now, we have configured <span class="strong"><strong>TextureSample</strong></span> with the wood texture that we have imported into the editor earlier. Connect <span class="strong"><strong>TextureSample</strong></span> by clicking on the white hollow circle connector, dragging it and dropping it on the <span class="strong"><strong>Base Color</strong></span> connector on the <span class="strong"><strong>MyWood</strong></span> node.</p><p>Repeat the same steps to create a <span class="strong"><strong>TextureSample</strong></span> node for the <span class="strong"><strong>T_Wood_Light_N</strong></span> normal map texture and connect it to the <span class="strong"><strong>Normal</strong></span> input for <span class="strong"><strong>MyWood</strong></span>.</p><p>The following screenshot <a id="id279" class="indexterm"/>shows the settings that we want to <a id="id280" class="indexterm"/>have for <span class="strong"><strong>MyWood</strong></span>. To have a little glossy feel for our wood texture, set <span class="strong"><strong>Roughness</strong></span> to <span class="strong"><strong>0.2 </strong></span>by using a <span class="strong"><strong>Constant</strong></span> node. (Recap: drag and drop a <span class="strong"><strong>Constant</strong></span> node from <span class="strong"><strong>MyPalette</strong></span> and set the value to <span class="strong"><strong>0.2</strong></span>, connect it to the <span class="strong"><strong>Roughness</strong></span> input of <span class="strong"><strong>MyWood</strong></span>.)</p><div class="mediaobject"><img src="graphics/B03679_04_12.jpg" alt="Creating custom material using simple textures"/></div></div><div class="section" title="Using custom materials to transform the level"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec61"/>Using custom materials to transform the level</h2></div></div></div><p>Using <a id="id281" class="indexterm"/>the custom materials that we have created in<a id="id282" class="indexterm"/> the previous two examples, we will replace the current materials that we have used.</p><p>The following screenshot shows the before and after look of the first room. Notice how the new custom materials have transformed the room into a modern looking room.</p><div class="mediaobject"><img src="graphics/B03679_04_13.jpg" alt="Using custom materials to transform the level"/></div><p>From the preceding <a id="id283" class="indexterm"/>screenshot, we also have added a Point <a id="id284" class="indexterm"/>Light and placed it onto the lamp prop, making it seem to be emitting light. The following screenshot shows the Point Light setting we have used (<span class="strong"><strong>Light Intensity</strong></span> = <span class="strong"><strong>1000.0</strong></span>, <span class="strong"><strong>Attenuation Radius</strong></span> = <span class="strong"><strong>1000.0</strong></span>):</p><div class="mediaobject"><img src="graphics/B03679_04_14.jpg" alt="Using custom materials to transform the level"/></div><p>Next, we added a ceiling to cover up the room. The ceiling of the wall uses the same box geometry as the rest of the walls. We have applied the <span class="strong"><strong>M_Basic_Wall</strong></span> material onto it.</p><p>Then, we use the red <a id="id285" class="indexterm"/>wall material (<span class="strong"><strong>MyMaterial</strong></span>) to replace <a id="id286" class="indexterm"/>the material on wall with the door frame. The gray wall material (<span class="strong"><strong>MyWall_Grey</strong></span>) is used to replace the brick material for the walls at the side. The glossy wood material (<span class="strong"><strong>MyWood</strong></span>) is used to replace the wooden floor material.</p></div></div>
<div class="section" title="Rendering pipeline"><div class="titlepage"><div><div><h1 class="title"><a id="ch04lvl1sec53"/>Rendering pipeline</h1></div></div></div><p>For an image to appear on the <a id="id287" class="indexterm"/>screen, the computer must draw the images on the screen to display it. The sequence of steps to create a 2D representation of a scene by using both 2D and 3D data information is known as the graphics or rendering pipeline. Computer hardware such as <span class="strong"><strong>central processing unit</strong></span> (<span class="strong"><strong>CPU</strong></span>)<a id="id288" class="indexterm"/> and <span class="strong"><strong>graphics processing unit</strong></span> (<span class="strong"><strong>GPU</strong></span>) <a id="id289" class="indexterm"/>are used to calculate and manipulate the input data needed for drawing the 3D scene.</p><p>As games are interactive and rely heavily on real-time rendering, the amount of data necessary for rendering moving scenes is huge. Coordinate position, color, and all display information needs to be calculated for each vertex of the triangle polygon and at the same time, taking into account the effect of overlapping polygons before they can be displayed on screen correctly. Hence, it is very crucial to optimize both the CPU and GPU capabilities to process this data and deliver them timely on the screen. Continuous improvement in this area has been made over the years to allow better quality images to be rendered at higher frame rates for a better visual effect. At this point, games should run at a minimum frame rate of 30fps in order for players to have a reasonable gaming experience.</p><p>The rendering pipeline today uses a series of programmable shaders to manipulate information about an image before displaying the image on the screen. We'll cover shaders and Direct3D 11 graphics pipeline in more detail in the upcoming section.</p></div>
<div class="section" title="Shaders"><div class="titlepage"><div><div><h1 class="title"><a id="ch04lvl1sec54"/>Shaders</h1></div></div></div><p>Shaders <a id="id290" class="indexterm"/>can be thought of as a sequence of programming codes that tells a computer how an image should be drawn. Different shaders govern different properties of an image. For example, Vertex Shaders give properties such as position, color, and UV coordinates for individual vertices. Another important purpose of vertex shaders is to transform vertices with 3D coordinates into the 2D screen space for display. Pixel shaders processes pixels to provide color, z-depth, and alpha value information. Geometry shader is responsible for processing data at the level of a primitive (triangle, line, and vertex).</p><p>Data information from an image is passed from one shader to the next for processing before they are finally output through a frame buffer.</p><p>Shaders are also used to incorporate post-processing effects such as Volumetric Lighting, HDR, and Bloom effects to accentuate images in a game.</p><p>The language which <a id="id291" class="indexterm"/>shaders are programmed in depends on the target environment. For Direct3D, the official language is HLSL. For OpenGL, the official shading language is<a id="id292" class="indexterm"/> <span class="strong"><strong>OpenGL Shading Language</strong></span> (<span class="strong"><strong>GLSL</strong></span>).</p><p>Since most shaders<a id="id293" class="indexterm"/> are coded for a GPU, major GPU makers Nvidia and AMD have also tried developing their own languages that can output for both OpenGL and Direct3D shaders. Nvidia developed Cg (deprecated now after version 3.1 in 2012) and AMD developed Mantle (used in some games, such as <span class="emphasis"><em>Battlefield 4</em></span>, that were released in 2014 and seems to be gaining popularity among developers). Apple has also recently released its own shading language known as <a id="id294" class="indexterm"/>
<span class="strong"><strong>Metal Shading Language</strong></span> for iOS 8 in September 2014 to increase the performance benefits for iOS. Kronos has also announced a next generation graphics API based on OpenGL known as <span class="strong"><strong>Vulkan</strong></span>
<a id="id295" class="indexterm"/> in early 2015, which appears to be strongly supported by member companies such as Valve Corporation.</p><p>The following image is taken from a Direct3D 11 graphics pipeline<a id="id296" class="indexterm"/> on MSDN (<a class="ulink" href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476882(v=vs.85).aspx">http://msdn.microsoft.com/en-us/library/windows/desktop/ff476882(v=vs.85).aspx</a>). It shows the programmable stages, which data can flow through to generate real-time graphics for our game, known as the rendering pipeline state representation.</p><div class="mediaobject"><img src="graphics/B03679_04_15.jpg" alt="Shaders"/></div><p>The information here is<a id="id297" class="indexterm"/> taken from Microsoft MSDN page. You can use the Direct3D 11API to configure all of the stages. Stages such as vertex, hull, domain, geometry, and pixel-shader (those with the rounded rectangular blocks), are programmable using HLSL. The ability to configure this pipeline programmatically makes it flexible for the game graphics rendering.</p><p>What each stage does is explained as follows:</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Stage</p>
</th><th style="text-align: left" valign="bottom">
<p>Function</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>Input-assembler</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id298" class="indexterm"/>stage supplies data (in the form of triangles, lines, and points) to the pipeline.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Vertex-shader</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id299" class="indexterm"/>stage processes vertices such as undergoing transformations, skinning, and lighting. The number of vertices does not change after undergoing this stage.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Geometry-shader</p>
</td><td style="text-align: left" valign="top">
<p>This<a id="id300" class="indexterm"/> stage processes entire geometry primitives such as triangles, lines, and a single vertex for a point.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Stream-output</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id301" class="indexterm"/>stage serves to stream primitive data from the pipeline to memory while on its way to the rasterizer.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Rasterizer</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id302" class="indexterm"/>clips primitives and prepare the primitives for the pixel-shader.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Pixel-shader</p>
</td><td style="text-align: left" valign="top">
<p>Pixel <a id="id303" class="indexterm"/>manipulation is done here. Each pixel in the primitive is processed here, for example, pixel color.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Output-merger</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id304" class="indexterm"/>stage combines the various output data (pixel-shader values, depth, and stencil information) with the contents of the render target and depth/stencil buffers to generate the final pipeline result.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Hull-shader, tessellator, and domain-shader</p>
</td><td style="text-align: left" valign="top">
<p>These<a id="id305" class="indexterm"/> tessellation stages convert higher-order <a id="id306" class="indexterm"/>surfaces to triangles to prepare for <a id="id307" class="indexterm"/>rendering.</p>
</td></tr></tbody></table></div><p>To help you better visualize what happens in each of the stages, the following image shows a very good illustration of a simplified rendering pipeline for vertices only. The image is taken from an old Cg tutorial. Note that different APIs have different pipelines but rely on similar basic concepts in <a id="id308" class="indexterm"/>rendering (source: <a class="ulink" href="http://goanna.cs.rmit.edu.au/~gl/teaching/rtr&amp;3dgp/notes/pipeline.html">http://goanna.cs.rmit.edu.au/~gl/teaching/rtr&amp;3dgp/notes/pipeline.html</a>).</p><div class="mediaobject"><img src="graphics/B03679_04_16.jpg" alt="Shaders"/></div><p>Example flow of how graphics <a id="id309" class="indexterm"/>is displayed:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The CPU sends instructions (compiled shading language programs) and geometry data to the graphics processing unit, located on the graphics card.</li><li class="listitem" style="list-style-type: disc">The data is passed through into the vertex shader where vertices are transformed.</li><li class="listitem" style="list-style-type: disc">If the geometry shader is active in the GPU, the geometry changes are performed in the scene.</li><li class="listitem" style="list-style-type: disc">If a tessellation shader is active in the GPU, the geometries in the scene can be subdivided. The calculated geometry is triangulated (subdivided into triangles).</li><li class="listitem" style="list-style-type: disc">Triangles are broken down into fragments. Fragment quads are modified according to the fragment shader.</li><li class="listitem" style="list-style-type: disc">To create the feel of depth, the z buffer value is set for the fragments and then sent to the frame buffer for displaying.</li></ul></div></div>
<div class="section" title="APIs &#x2013; DirectX and OpenGL"><div class="titlepage"><div><div><h1 class="title"><a id="ch04lvl1sec55"/>APIs – DirectX and OpenGL</h1></div></div></div><p>Both DirectX<a id="id310" class="indexterm"/> and OpenGL <a id="id311" class="indexterm"/>are collections of <a id="id312" class="indexterm"/>
<span class="strong"><strong>application programming interfaces</strong></span> (<span class="strong"><strong>APIs</strong></span>) used for handling multimedia information in a computer. They are the two most common APIs used today for video cards.</p><p>DirectX is created by Microsoft to allow multimedia related hardware, such as GPU, to communicate with the Windows system. OpenGL is the open source version that can be used on many operating system including Mac OS.</p><p>The decision to use DirectX or OpenGL APIs to program is dependent on operating system of the target machine.</p><div class="section" title="DirectX"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec62"/>DirectX</h2></div></div></div><p>Unreal Engine 4 <a id="id313" class="indexterm"/>was first launched using DirectX11. Following the announcement that DirectX 12 ships with Windows 10, Unreal has created a DirectX 12 branch from the 4.4 version to allow developers to start creating games using this new DirectX 12.</p><p>An easy way to identify APIs that are a part of DirectX is that the names all begin with Direct. For computer games, the APIs that we are most concerned about are Direct3D, which is the graphical API for drawing high performance 3D graphics in games, and DirectSound3D, which is for the sound playback.</p><p>DirectX APIs are integral in creating high-performance 2D and 3D graphics for the Windows operating system. For example, DirectX11 is supported in Windows Vista, Windows 7 and Windows 8.1. The latest version of DirectX can be updated through service pack updates. DirectX 12 is known to be shipped with Windows 10.</p><div class="section" title="DirectX12"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl3sec21"/>DirectX12</h3></div></div></div><p>Direct3D 12 was <a id="id314" class="indexterm"/>announced in 2014 and has been vastly revamped from Direct3D 11 to provide significant performance improvement. This is a very good link to a video posted on the<a id="id315" class="indexterm"/> MSDN blog that shows the tech demo for DirectX 12: <a class="ulink" href="http://channel9.msdn.com/Blogs/DirectX-Developer-Blog/DirectX-Techdemo">http://channel9.msdn.com/Blogs/DirectX-Developer-Blog/DirectX-Techdemo</a>.</p><p>(If you are unfamiliar with Direct3D 11 and have not read the <span class="emphasis"><em>Shaders</em></span> section earlier, read that section before proceeding with the rest of the DirectX section.)</p><div class="section" title="Pipeline state representation"><div class="titlepage"><div><div><h4 class="title"><a id="ch04lvl4sec03"/>Pipeline state representation</h4></div></div></div><p>If you can recall <a id="id316" class="indexterm"/>from the <span class="emphasis"><em>Shaders</em></span> section, we have looked at the programmable pipeline for Direct3D 11. The following image is the same from the <span class="emphasis"><em>Shaders</em></span> section (taken from MSDN) and it shows a series of programmable shaders:</p><div class="mediaobject"><img src="graphics/B03679_04_17.jpg" alt="Pipeline state representation"/></div><p>In Direct3D 11, each <a id="id317" class="indexterm"/>of the stages is configurable independently and each stage is setting states on the hardware independently. Since many stages have the capability to set the same hardware state due to interdependency, this results in hardware mismatch overhead. The following image is an excellent illustration of how hardware mismatch overhead happens:</p><div class="mediaobject"><img src="graphics/B03679_04_18.jpg" alt="Pipeline state representation"/></div><p>The driver will normally<a id="id318" class="indexterm"/> record these states from the application (game) first and wait until the draw time, when it is ready to send it to the display monitor. At draw time, these states are then queried in a control loop before they are is translated into a GPU code for the hardware in order to render the correct scene for the game. This creates an additional overhead to record and query for all the states at draw time.</p><p>In Direct3D 12, some programmable stages are grouped to form a single object known as <span class="strong"><strong>pipeline state object</strong></span> (<span class="strong"><strong>PSO</strong></span>)<a id="id319" class="indexterm"/> so that the each hardware state is set only once by the entire group, preventing hardware mismatch overhead. These states can now be used directly, instead of having to spend resources computing the resulting hardware states before the draw call. This reduces the draw call overhead, allowing more draw calls per frame. The PSO that is in use can still be changed dynamically based on whatever hardware native instructions and states that are required.</p><div class="mediaobject"><img src="graphics/B03679_04_19.jpg" alt="Pipeline state representation"/></div></div><div class="section" title="Work submission"><div class="titlepage"><div><div><h4 class="title"><a id="ch04lvl4sec04"/>Work submission</h4></div></div></div><p>In Direct3D 11, work <a id="id320" class="indexterm"/>submission to the GPU is immediate. What is new in Direct3D 12 is that it uses command lists and bundles that contain the entire information needed to execute a particular workload.</p><p>Immediate work submission in Direct3D 11 means that information is passed as a single stream of command to the GPU and due to the lack of the entire information, these commands are often deferred until the actual work can be done.</p><p>When work submission is grouped in the self-contained command list, the drivers can precompute all the necessary GPU commands and then send that list to the GPU, making Direct3D 12 work submission a more efficient process. Additionally, the use of bundles can be thought of as a small list of commands that are grouped to create a particular object. When this object needs to be duplicated on screen, this bundle of commands can be "played back" to create the duplicated object. This further reduces computational time needed in Direct3D 12.</p></div><div class="section" title="Resource access"><div class="titlepage"><div><div><h4 class="title"><a id="ch04lvl4sec05"/>Resource access</h4></div></div></div><p>In Direct3D 11, the<a id="id321" class="indexterm"/> game creates resource views that bind these views to slots at the shaders. These shaders then read the data from these explicit bound slots during a draw call. If the game wants to draw using different resources, it will be done in the next draw call with a different view.</p><p>In Direct3D 12, you can create various resource views by using descriptor heaps. Each descriptor heap can be customized to be linked to a specific shader using specific resources. This flexibility to design the descriptor heap allows you to have full control over the resource usage pattern, fully utilizing modern hardware capabilities. You are also able to describe more than one descriptor heap that is indexed to allow easy flexibility to swap heaps, to complete a single draw call.</p></div></div></div></div>
<div class="section" title="Lights"><div class="titlepage"><div><div><h1 class="title"><a id="ch04lvl1sec56"/>Lights</h1></div></div></div><p>We have briefly gone through the<a id="id322" class="indexterm"/> types of light in <a class="link" href="ch01.html" title="Chapter 1. An Overview of Unreal Engine">Chapter 1</a>, <span class="emphasis"><em>An Overview of Unreal Engine</em></span>. Let us do a quick recap first. Directional Light emits beams of parallel lights. Point Light emits light like a light bulb (from a single point radially outward in all directions). Spot Light emits light in a conical shape outwards and Sky Light mimics light from the sky downwards on the objects in the level.</p><p>In this chapter, we will learn how to use these basic lights to illuminate an interior area. We have already placed a Point Light in <a class="link" href="ch02.html" title="Chapter 2. Creating Your First Level">Chapter 2</a>, <span class="emphasis"><em>Creating Your First Level</em></span>, and learned how to adjust its intensity to 1700. Here in this chapter, we will learn more about the parameters that we can adjust with each type of light to create the lighting that we want.</p><p>Let us first view a level that has been illuminated using these Unreal lights. Load <code class="literal">Chapter4Level_Prebuilt.umap</code>, build and play the level to look around. Click on the lights that are placed in the level and you will notice that most of lights used are Point or Spot Light. These two forms of lights are quite commonly found in interior lighting.</p><p>The next section will guide you to extend the level on your own. Alternatively, you can use the <code class="literal">Chapter4Level_Prebuilt</code> level to help you along in the creation of your own level since it does take a fair amount of time to create the entire level. If you wish to skip to the next section, feel free to simply use the prebuilt version of the map provided, and go through the other examples in this chapter using the prebuilt map as a reference. However, it will be a great opportunity to revise what you have learned in the previous chapters and extend the level on your own.</p><p>Before we embark on the optional exercise to extend the level, let us go through a few tutorial examples on how we can place and configure the different types of light.</p><div class="section" title="Configuring a Point Light with more settings"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec63"/>Configuring a Point Light with more settings</h2></div></div></div><p>Open <code class="literal">Chapter4Level.umap</code> and <a id="id323" class="indexterm"/>rename it <code class="literal">Chapter4Level_PointLight.umap</code>.</p><p>Go to <span class="strong"><strong>Modes</strong></span> | <span class="strong"><strong>Lights</strong></span>, <a id="id324" class="indexterm"/>drag and drop a Point Light into the level. As Point Light emits light equally in all directions from a single point, <span class="strong"><strong>Attenuation Radius</strong></span>, <span class="strong"><strong>Intensity</strong></span>, and <span class="strong"><strong>Color</strong></span> are the three most common values that are configured for a Point Light.</p><div class="section" title="Attenuation Radius"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl3sec22"/>Attenuation Radius</h3></div></div></div><p>The following screenshot shows when the<a id="id325" class="indexterm"/> Point Light has its default <span class="strong"><strong>Attenuation Radius</strong></span> of <span class="strong"><strong>1000</strong></span>. The radius of the three blue circles is based on the attenuation radius of the Point Light and is used to show its area of effect on the environment.</p><div class="mediaobject"><img src="graphics/B03679_04_20.jpg" alt="Attenuation Radius"/></div><p>The following <a id="id326" class="indexterm"/>screenshot shows when the attenuation radius is reduced to 500. In this situation, you probably cannot see any difference in the lighting since the radius is still larger than the room itself:</p><div class="mediaobject"><img src="graphics/B03679_04_21.jpg" alt="Attenuation Radius"/></div><p>Now, let us take a look at what happens when we adjust the radius much smaller. The following screenshot shows the difference in light brightness when the radius changes. The image on the <a id="id327" class="indexterm"/>left is when the attenuation radius is set as 500 and the right when attenuation radius is set as 10.</p><div class="mediaobject"><img src="graphics/B03679_04_22.jpg" alt="Attenuation Radius"/></div></div><div class="section" title="Intensity"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl3sec23"/>Intensity</h3></div></div></div><p>Another<a id="id328" class="indexterm"/> setting for Point Light is <span class="strong"><strong>Intensity</strong></span>. Intensity affects the brightness of the light. You can play around the Intensity value to adjust the brightness of the light. Before we determine what value to use for this field and how bright we want our light to be, you should be aware of another setting, <span class="strong"><strong>Use Inverse Squared Falloff</strong></span>.</p><div class="section" title="Use Inverse Squared Falloff"><div class="titlepage"><div><div><h4 class="title"><a id="ch04lvl4sec06"/>Use Inverse Squared Falloff</h4></div></div></div><p>Point Lights <a id="id329" class="indexterm"/>and Spot Lights have physically based inverse squared falloff set on, as default. This setting is configurable as a checkbox found in the <span class="strong"><strong>Light</strong></span> details under <span class="strong"><strong>Advanced</strong></span>. The following screenshot shows where this property is found in the <span class="strong"><strong>Details</strong></span> panel:</p><div class="mediaobject"><img src="graphics/B03679_04_23.jpg" alt="Use Inverse Squared Falloff"/></div><p>Inverse <a id="id330" class="indexterm"/>squared falloff is a physics law that describes how light intensity naturally fades over distance. When we have this setting, the units for intensity use the same units as the lights we have in the real world, in lumens. When inverse squared distance falloff is not used, intensity becomes just a value.</p><p>In the previous chapter where we have added our first Point Light, we have set intensity as 1700. This is equivalent to the brightness of a light bulb that has 1700 lumens because inverse squared distance falloff is used.</p></div></div><div class="section" title="Color"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl3sec24"/>Color</h3></div></div></div><p>To adjust the <a id="id331" class="indexterm"/>color of Point Light, go to <span class="strong"><strong>Light</strong></span> | <span class="strong"><strong>Color</strong></span>. The following screenshot shows how the color of the light can be adjusted by specifying the RGB values or using the color picker to select the desired color:</p><div class="mediaobject"><img src="graphics/B03679_04_24.jpg" alt="Color"/></div></div></div><div class="section" title="Adding and configuring a Spot Light"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec64"/>Adding and configuring a Spot Light</h2></div></div></div><p>Open <code class="literal">Chapter4Level.umap</code> and<a id="id332" class="indexterm"/> rename it <code class="literal">Chapter4Level_SpotLight.umap</code>. Go to <span class="strong"><strong>Modes</strong></span> | <span class="strong"><strong>Lights</strong></span>, drag and drop a Spot Light into the level.</p><p>The brightness, visible influence <a id="id333" class="indexterm"/>radius, and color of a Spot Light can be configured in the same way as the Point Light through the value of <span class="strong"><strong>Intensity</strong></span>, <span class="strong"><strong>Attenuation Radius</strong></span>, and <span class="strong"><strong>Color</strong></span>.</p><p>Since Point Light has<a id="id334" class="indexterm"/> light emitting in all directions and a Spot Light emits light from a single point outwards in a conical shape with a direction, the Spot Light has additional properties such as inner cone and outer cone angle, which are configurable.</p><div class="section" title="Inner cone and outer cone angle"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl3sec25"/>Inner cone and outer cone angle</h3></div></div></div><p>The unit for the <a id="id335" class="indexterm"/>outer cone angle and inner cone angle is in degrees. The <a id="id336" class="indexterm"/>following screenshot shows the light radius that the spotlight has when the outer cone angle = 20 (on the left) and outer cone angle = 15 (on the right). The inner cone angle value did not produce much visible results in the screenshot, so very often the value is 0. However, the inner cone angle can be used to provide light in the center of the cone. This would be more visible for lights with a wider spread and certain IES Profiles.</p><div class="mediaobject"><img src="graphics/B03679_04_25.jpg" alt="Inner cone and outer cone angle"/></div></div></div><div class="section" title="Using the IES Profile"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec65"/>Using the IES Profile</h2></div></div></div><p>Open <code class="literal">Chapter4Level_PointLight.umap</code> and rename it <code class="literal">Chapter4Level_IESProfile.umap</code>.</p><p>IES Light Profile<a id="id337" class="indexterm"/> is a file that contains information that describes how a light will look. This is created by light manufacturers and can be downloaded from the manufacturers' websites. These profiles could be used in architectural models to render scenes with realistic lighting. In the same way, the IES Profile information can be used in Unreal Engine 4 to render more realistic lights. IES Light Profiles can be applied to a Point Light or a Spot Light.</p><div class="section" title="Downloading IES Light Profiles"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl3sec26"/>Downloading IES Light Profiles</h3></div></div></div><p>IES Light Profiles<a id="id338" class="indexterm"/> can be downloaded from light manufacturers' websites. Here's <a id="id339" class="indexterm"/>a few <a id="id340" class="indexterm"/>that you can use:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Cooper </strong></span><a id="id341" class="indexterm"/><span class="strong"><strong>Industries</strong></span>: <a class="ulink" href="http://www.cooperindustries.com/content/public/en/lighting/resources/design_center_tools/photometric_tool_box.html">http://www.cooperindustries.com/content/public/en/lighting/resources/design_center_tools/photometric_tool_box.html</a></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Philips</strong></span>: <a class="ulink" href="http://www.usa.lighting.philips.com/connect/tools_literature/photometric_data_1.wpd">http://www.usa.lighting.philips.com/connect/tools_literature/photometric_data_1.wpd</a></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Lithonia</strong></span>: <a class="ulink" href="http://www.lithonia.com/photometrics.aspx">http://www.lithonia.com/photometrics.aspx</a></li></ul></div></div><div class="section" title="Importing IES Profiles into the Unreal Engine Editor"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl3sec27"/>Importing IES Profiles into the Unreal Engine Editor</h3></div></div></div><p>From <span class="strong"><strong>Content Browser</strong></span>, click on<a id="id342" class="indexterm"/> <span class="strong"><strong>Import</strong></span>, as shown in the<a id="id343" class="indexterm"/> following screenshot:</p><div class="mediaobject"><img src="graphics/B03679_04_26.jpg" alt="Importing IES Profiles into the Unreal Engine Editor"/></div><p>I prefer to have my files in a certain order, hence I have created a new folder called <code class="literal">IESProfile</code> and created subfolders with the names of the manufacturers to better categorize all the light profiles that were imported.</p></div><div class="section" title="Using IES Profiles"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl3sec28"/>Using IES Profiles</h3></div></div></div><p>Continuing from<a id="id344" class="indexterm"/> the previous example, select the right Spot Light which we have in the scene and make sure it is selected. Go to the <span class="strong"><strong>Details</strong></span> panel and scroll down to show the Light Profile of the light.</p><p>Then go to <span class="strong"><strong>Content Browser</strong></span> and go to the <code class="literal">IESProfile</code> folder where we have imported the light profiles into. Click on one of the profiles that you want, drag and drop it on the IES Texture of the Spot Light. Alternatively, you can select the profile and go back to the <span class="strong"><strong>Details</strong></span> panel of the <span class="strong"><strong>Light</strong></span> and click on the arrow next to <span class="strong"><strong>IES Texture</strong></span> to apply the profile on the Spot Light. In the following screenshot, I applied one of the profiles downloaded from the Panasonic website labeled <span class="strong"><strong>144907</strong></span>.</p><div class="mediaobject"><img src="graphics/B03679_04_27.jpg" alt="Using IES Profiles"/></div><p>I reconfigured <a id="id345" class="indexterm"/>the Spot Light with <span class="strong"><strong>Intensity</strong></span> = <span class="strong"><strong>1000</strong></span>, <span class="strong"><strong>Attenuation Radius</strong></span> = <span class="strong"><strong>1000</strong></span>, <span class="strong"><strong>Outer Cone Angle</strong></span> = <span class="strong"><strong>40</strong></span>, and <span class="strong"><strong>Inner Cone Angle</strong></span> = <span class="strong"><strong>0</strong></span>.</p><p>Next, I deleted the other Spot Light and replaced it with a Point Light where I set <span class="strong"><strong>Intensity</strong></span> = <span class="strong"><strong>1000</strong></span> and <span class="strong"><strong>Attenuation Radius</strong></span> = <span class="strong"><strong>1000</strong></span>. I also set the <span class="strong"><strong>Rotation-Y</strong></span> = <span class="strong"><strong>-90</strong></span> and then applied the same IES Profile to it. The following screenshot shows the difference when the same light profile is applied to a Spot Light and a Point Light. Note that the spread of the light in the Spot Light is reduced. This reinforces the concept that a Spot Light provides a conical shaped light with a direction spreading from the point source outwards. The outer cone angle determines this spread. The point light emits light in all directions and equally out, so it did not attenuate the light profile settings allowing the full design of this light profile to be displayed on the screen. This is one thing to keep in mind while using the IES Light Profile and which types of light to use them on.</p><div class="mediaobject"><img src="graphics/B03679_04_28.jpg" alt="Using IES Profiles"/></div></div></div><div class="section" title="Adding and configuring a Directional Light"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec66"/>Adding and configuring a Directional Light</h2></div></div></div><p>Open <code class="literal">Chapter4Level.umap</code> and rename it <code class="literal">Chapter4Level_DirectionalLight.umap</code>.</p><p>We have already added a Directional Light into our level in <a class="link" href="ch02.html" title="Chapter 2. Creating Your First Level">Chapter 2</a>, <span class="emphasis"><em>Creating Your First Level</em></span>, and it <a id="id346" class="indexterm"/>provides parallel beams of light into the level.</p><p>Directional Light <a id="id347" class="indexterm"/>can also be used to light the level by controlling the <a id="id348" class="indexterm"/>direction of the sun. The screenshot on the left shows the Directional Light when the <span class="strong"><strong>Atmosphere Sun Light</strong></span> checkbox is unchecked. The screenshot on the right shows the Directional Light when the <span class="strong"><strong>Atmosphere Sun Light</strong></span> checkbox is checked. When the <span class="strong"><strong>Atmosphere Sun Light</strong></span> checkbox is checked, you can control the direction of the sunlight by adjusting the rotation of Directional Light.</p><div class="mediaobject"><img src="graphics/B03679_04_29.jpg" alt="Adding and configuring a Directional Light"/></div><p>The following screenshot <a id="id349" class="indexterm"/>shows how this looks when <span class="strong"><strong>Rotation-Y</strong></span> = <span class="strong"><strong>0</strong></span>. This looks like<a id="id350" class="indexterm"/> an early sunset <a id="id351" class="indexterm"/>scene:</p><div class="mediaobject"><img src="graphics/B03679_04_30.jpg" alt="Adding and configuring a Directional Light"/></div><div class="section" title="Example – adding and configuring a Sky light"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl3sec29"/>Example – adding and configuring a Sky light</h3></div></div></div><p>Open <code class="literal">Chapter4Level_DirectionalLight.umap</code> and rename it <code class="literal">Chapter4Level_Skylight.umap</code>.</p><p>In the previous <a id="id352" class="indexterm"/>example, we<a id="id353" class="indexterm"/> have added sunlight control in the<a id="id354" class="indexterm"/> Directional Light. Build and compile to see how the level now looks.</p><p>Now, let us add a Sky Light into the level by going to <span class="strong"><strong>Modes</strong></span> | <span class="strong"><strong>Lights</strong></span> and then clicking and dragging Sky Light into the level. When adding a Sky Light to the level, always remember to build and compile first in order to see the effect of the Sky Light.</p><p>What does a Sky Light do? Sky Light models the color/light from the sky and is used to light up the external areas of the level. So the external areas of the level look more realistic as the color/light is reflecting off the surfaces (instead of using simple white/colored light).</p><p>The following <a id="id355" class="indexterm"/>screenshot shows the effect of a Sky Light. The left image shows the Sky Light<a id="id356" class="indexterm"/> not in the level. The right one shows the Sky Light. Note<a id="id357" class="indexterm"/> that the walls now have a tinge of the color of the sky.</p><div class="mediaobject"><img src="graphics/B03679_04_31.jpg" alt="Example – adding and configuring a Sky light"/></div></div></div><div class="section" title="Static, stationary, or movable lights"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec67"/>Static, stationary, or movable lights</h2></div></div></div><p>After learning how to<a id="id358" class="indexterm"/> place and configure the different lights, we need to consider what <a id="id359" class="indexterm"/>kind of lights we need in the level. If you are new to the <a id="id360" class="indexterm"/>concept of light, you might want to briefly go through the useful light terms section to help in your understanding.</p><p>The following screenshot shows the <span class="strong"><strong>Details</strong></span> panel where you can change a light to be static, stationary, or movable.</p><div class="mediaobject"><img src="graphics/B03679_04_32.jpg" alt="Static, stationary, or movable lights"/></div><p>
<span class="strong"><strong>Static</strong></span> and <span class="strong"><strong>Stationary</strong></span>
<a id="id361" class="indexterm"/> light sounds pretty much similar. What is the difference? When do <a id="id362" class="indexterm"/>you want to use a <span class="strong"><strong>Static</strong></span> light and when do you want to use<a id="id363" class="indexterm"/> a <span class="strong"><strong>Stationary</strong></span> light?</p><div class="section" title="Common light/shadow definitions"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl3sec30"/>Common light/shadow definitions</h3></div></div></div><p>The common light/shadow definitions are as follows:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Direct Light</strong></span>: This is the<a id="id364" class="indexterm"/> light that is present in the scene directly due to a light source.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Indirect Light</strong></span>: This is the<a id="id365" class="indexterm"/> light in the scene that is not directly from a light source. It is reflected light bouncing around and it comes from all sides.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Light Map</strong></span>: This is a <a id="id366" class="indexterm"/>data structure that stores the light/brightness information about an object. This makes the rendering of the object much quicker because we already know its color/brightness information in advance and it is not necessary to compute this during runtime.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Shadow Map</strong></span>: This is a <a id="id367" class="indexterm"/>process created to make dynamic shadows. It is fundamentally made up of two passes to create shadows. More passes can be added to render nicer shadows.</li></ul></div></div><div class="section" title="Static Light"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl3sec31"/>Static Light</h3></div></div></div><p>In a game, we always want to have the best performance, and<a id="id368" class="indexterm"/> Static Light will be an excellent option because a Static Light needs only to be precomputed once into a Light Map. So for a Static Light, we have the lowest performance cost but in exchange, we are unable to change how the light looks, move the light, and integrate the effect of this light with moving objects (which means it is unable to create a shadow for the moving object as it moves within the influence of the light) into the environment during gameplay. However, a Static Light can cast shadow on the existing stationary objects<a id="id369" class="indexterm"/> that are in the level within its influence of radius. The radius of influence is based on the source radius of the light. In return for low performance cost, a Static Light has quite a bit of limitation. Hence, Static Lights are commonly used in the creation of scenes targeted for devices with low computational power.</p></div><div class="section" title="Stationary Light"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl3sec32"/>Stationary Light</h3></div></div></div><p>Stationary Light <a id="id370" class="indexterm"/>can be used in situations when we do not need to move, rotate, or change the influence radius of the light during gameplay, but allow the light the capacity to change color and brightness. Indirect Light and shadows are prebaked in Light Map in the same way as Static Light. Direct Light shadows are stored within Shadow Maps.</p><p>Stationary Light is medium in performance cost as it is able to create static shadow on static objects through the use of distance field shadow maps. Completely dynamic light and shadows is often more than 20 times more intensive.</p></div><div class="section" title="Movable Light"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl3sec33"/>Movable Light</h3></div></div></div><p>Movable Light<a id="id371" class="indexterm"/> is used to cast dynamic light and shadows for the scene. This should be used sparingly in the level, unless absolutely necessary.</p></div></div><div class="section" title="Exercise – extending your game level (optional)"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec68"/>Exercise – extending your game level (optional)</h2></div></div></div><p>Here are the steps<a id="id372" class="indexterm"/> that I have taken to extend the current <span class="strong"><strong>Level4</strong></span> to the prebuilt version of what we have right now. They are by no means the only way to do it. I have simply used a Geometry Brush to extend the level here for simplicity. The following screenshot shows one part of the extended level:</p><div class="mediaobject"><img src="graphics/B03679_04_33.jpg" alt="Exercise – extending your game level (optional)"/></div><div class="section" title="Useful tips"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl3sec34"/>Useful tips</h3></div></div></div><p>Group items in the same area <a id="id373" class="indexterm"/>together when possible and rename the entity to help you identify parts of the level more quickly. These simple extra steps can save time when using the editor to create a mock-up of a game level.</p></div><div class="section" title="Guidelines"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl3sec35"/>Guidelines</h3></div></div></div><p>If you plan to extend the<a id="id374" class="indexterm"/> game level on your own, open and load <code class="literal">Level4.umap</code>. Then save map as <code class="literal">Level4_MyPreBuilt.umap</code>. You can also open a copy of the extended level to copy assets or use it as a quick reference.</p><div class="section" title="Area expansion"><div class="titlepage"><div><div><h4 class="title"><a id="ch04lvl4sec07"/>Area expansion</h4></div></div></div><p>We will<a id="id375" class="indexterm"/> start by extending the floor area of the level.</p><div class="section" title="Part 1 – lengthening the current walkway"><div class="titlepage"><div><div><h5 class="title"><a id="ch04lvl5sec01"/>Part 1 – lengthening the current walkway</h5></div></div></div><p>The short walkway was extended to form an L-shaped walkway. The dimensions of the extended portion are X1200 x Y340 x Z40.</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>BSPs needed</p>
</th><th style="text-align: left" valign="bottom">
<p>X</p>
</th><th style="text-align: left" valign="bottom">
<p>Y</p>
</th><th style="text-align: left" valign="bottom">
<p>Z</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>Ceiling</p>
</td><td style="text-align: left" valign="top">
<p>1200</p>
</td><td style="text-align: left" valign="top">
<p>400</p>
</td><td style="text-align: left" valign="top">
<p>40</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Floor</p>
</td><td style="text-align: left" valign="top">
<p>1200</p>
</td><td style="text-align: left" valign="top">
<p>400</p>
</td><td style="text-align: left" valign="top">
<p>40</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Left wall</p>
</td><td style="text-align: left" valign="top">
<p>1570</p>
</td><td style="text-align: left" valign="top">
<p>30</p>
</td><td style="text-align: left" valign="top">
<p>280</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Right wall</p>
</td><td style="text-align: left" valign="top">
<p>1260</p>
</td><td style="text-align: left" valign="top">
<p>30</p>
</td><td style="text-align: left" valign="top">
<p>280</p>
</td></tr></tbody></table></div></div><div class="section" title="Part 2 – creating a big room (living and kitchen area)"><div class="titlepage"><div><div><h5 class="title"><a id="ch04lvl5sec02"/>Part 2 – creating a big room (living and kitchen area)</h5></div></div></div><p>The walkway leads<a id="id376" class="indexterm"/> to a big room at the end, which is the main living and kitchen area.</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>BSPs needed</p>
</th><th style="text-align: left" valign="bottom">
<p>X</p>
</th><th style="text-align: left" valign="bottom">
<p>Y</p>
</th><th style="text-align: left" valign="bottom">
<p>Z</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>Ceiling</p>
</td><td style="text-align: left" valign="top">
<p>2000</p>
</td><td style="text-align: left" valign="top">
<p>1600</p>
</td><td style="text-align: left" valign="top">
<p>40</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Floor</p>
</td><td style="text-align: left" valign="top">
<p>2000</p>
</td><td style="text-align: left" valign="top">
<p>1600</p>
</td><td style="text-align: left" valign="top">
<p>40</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>The left wall dividing the big room and walkway (the wall closest to you as you enter the big room from the walkway)</p>
</td><td style="text-align: left" valign="top">
<p>30</p>
</td><td style="text-align: left" valign="top">
<p>600</p>
</td><td style="text-align: left" valign="top">
<p>340</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>The light wall dividing the big room and walkway (the wall closest to you as you enter the big room from the walkway)</p>
</td><td style="text-align: left" valign="top">
<p>30</p>
</td><td style="text-align: left" valign="top">
<p>600</p>
</td><td style="text-align: left" valign="top">
<p>340</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>The left wall of the big room (where the kitchen area is)</p>
</td><td style="text-align: left" valign="top">
<p>1200</p>
</td><td style="text-align: left" valign="top">
<p>30</p>
</td><td style="text-align: left" valign="top">
<p>340</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>The right wall of the big room (where the dining area is)</p>
</td><td style="text-align: left" valign="top">
<p>2000</p>
</td><td style="text-align: left" valign="top">
<p>30</p>
</td><td style="text-align: left" valign="top">
<p>340</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>The left wall to the door (the wall across the room as you enter from the walkway, where the window seats are)</p>
</td><td style="text-align: left" valign="top">
<p>30</p>
</td><td style="text-align: left" valign="top">
<p>350</p>
</td><td style="text-align: left" valign="top">
<p>340</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>The right wall to the door (the wall across the room as you enter from the walkway, where the long benches are)</p>
</td><td style="text-align: left" valign="top">
<p>30</p>
</td><td style="text-align: left" valign="top">
<p>590</p>
</td><td style="text-align: left" valign="top">
<p>340</p>
</td></tr><tr><td colspan="4" style="text-align: center" valign="top">
<p>Door area (consists of brick walls, door frames, and door)</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Wall filler left</p>
</td><td style="text-align: left" valign="top">
<p>30</p>
</td><td style="text-align: left" valign="top">
<p>130</p>
</td><td style="text-align: left" valign="top">
<p>340</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Wall filler right</p>
</td><td style="text-align: left" valign="top">
<p>30</p>
</td><td style="text-align: left" valign="top">
<p>126</p>
</td><td style="text-align: left" valign="top">
<p>340</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Door x 2</p>
</td><td style="text-align: left" valign="top">
<p>20</p>
</td><td style="text-align: left" valign="top">
<p>116</p>
</td><td style="text-align: left" valign="top">
<p>250</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Side door frame x 2</p>
</td><td style="text-align: left" valign="top">
<p>25</p>
</td><td style="text-align: left" valign="top">
<p>4</p>
</td><td style="text-align: left" valign="top">
<p>250</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Horizontal door frame</p>
</td><td style="text-align: left" valign="top">
<p>25</p>
</td><td style="text-align: left" valign="top">
<p>242</p>
</td><td style="text-align: left" valign="top">
<p>5</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Side brick wall x 2</p>
</td><td style="text-align: left" valign="top">
<p>30</p>
</td><td style="text-align: left" valign="top">
<p>52</p>
</td><td style="text-align: left" valign="top">
<p>340</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Horizontal brick wall</p>
</td><td style="text-align: left" valign="top">
<p>30</p>
</td><td style="text-align: left" valign="top">
<p>242</p>
</td><td style="text-align: left" valign="top">
<p>74</p>
</td></tr></tbody></table></div></div><div class="section" title="Part 3 – creating a small room along the walkway"><div class="titlepage"><div><div><h5 class="title"><a id="ch04lvl5sec03"/>Part 3 – creating a small room along the walkway</h5></div></div></div><p>To create the walkway<a id="id377" class="indexterm"/> to the small room, duplicate the same doorframe that we have created in the first room.</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>BSPs needed</p>
</th><th style="text-align: left" valign="bottom">
<p>X</p>
</th><th style="text-align: left" valign="bottom">
<p>Y</p>
</th><th style="text-align: left" valign="bottom">
<p>Z</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>Ceiling</p>
</td><td style="text-align: left" valign="top">
<p>800</p>
</td><td style="text-align: left" valign="top">
<p>600</p>
</td><td style="text-align: left" valign="top">
<p>40</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Floor</p>
</td><td style="text-align: left" valign="top">
<p>800</p>
</td><td style="text-align: left" valign="top">
<p>600</p>
</td><td style="text-align: left" valign="top">
<p>40</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Side wall x 2</p>
</td><td style="text-align: left" valign="top">
<p>30</p>
</td><td style="text-align: left" valign="top">
<p>570</p>
</td><td style="text-align: left" valign="top">
<p>340</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Opposite wall (wall with the windows)</p>
</td><td style="text-align: left" valign="top">
<p>740</p>
</td><td style="text-align: left" valign="top">
<p>30</p>
</td><td style="text-align: left" valign="top">
<p>340</p>
</td></tr></tbody></table></div></div><div class="section" title="Part 4 – Creating a den area in the big room"><div class="titlepage"><div><div><h5 class="title"><a id="ch04lvl5sec04"/>Part 4 – Creating a den area in the big room</h5></div></div></div><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>BSPs needed</p>
</th><th style="text-align: left" valign="bottom">
<p>X</p>
</th><th style="text-align: left" valign="bottom">
<p>Y</p>
</th><th style="text-align: left" valign="bottom">
<p>Z</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>Sidewall x 2</p>
</td><td style="text-align: left" valign="top">
<p>30</p>
</td><td style="text-align: left" valign="top">
<p>620</p>
</td><td style="text-align: left" valign="top">
<p>340</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Wall with shelves</p>
</td><td style="text-align: left" valign="top">
<p>740</p>
</td><td style="text-align: left" valign="top">
<p>30</p>
</td><td style="text-align: left" valign="top">
<p>340</p>
</td></tr></tbody></table></div></div></div><div class="section" title="Creating windows and doors"><div class="titlepage"><div><div><h4 class="title"><a id="ch04lvl4sec08"/>Creating windows and doors</h4></div></div></div><p>Now that we are<a id="id378" class="indexterm"/> done with rooms, we can <a id="id379" class="indexterm"/>work on the doors and windows.</p><div class="section" title="Part 1 – creating large glass windows for the dining area"><div class="titlepage"><div><div><h5 class="title"><a id="ch04lvl5sec05"/>Part 1 – creating large glass windows for the dining area</h5></div></div></div><p>To create the windows, we use a subtractive Geometry Brush to create holes in the wall. First, create one of size X144 x Y30 x Z300 and place it right in the middle between the ceiling and ground. Duplicate this and convert it to an additive brush; adjust the size to X142 x Y4 x Z298.</p><p>Apply <span class="strong"><strong>M_Metal_Copper</strong></span> for the frame and <span class="strong"><strong>M_Glass</strong></span> to the addition brush, which was just created. Now, group them and duplicate both the brushes four times to create five windows. The screenshot of the dining area windows is shown as follows:</p><div class="mediaobject"><img src="graphics/B03679_04_34.jpg" alt="Part 1 – creating large glass windows for the dining area"/></div></div><div class="section" title="Part 2 – creating an open window for the window seat"><div class="titlepage"><div><div><h5 class="title"><a id="ch04lvl5sec06"/>Part 2 – creating an open window for the window seat</h5></div></div></div><p>To create the window<a id="id380" class="indexterm"/> for the window seat area, create<a id="id381" class="indexterm"/> a subtractive geometry brush of size X50 x Y280 x Z220. For this window, we have a protruding ledge of X50 x Y280 x Z5 at the bottom of the window. Then for the glass, we duplicate the subtractive brush of size X4 x Y278 x Z216, convert it to additive brush and adjust it to fit.</p><p>Apply <span class="strong"><strong>M_Metal_Brushed</strong></span> for the frame and <span class="strong"><strong>M_Glass</strong></span> to the addition brush that was just created.</p><div class="mediaobject"><img src="graphics/B03679_04_35.jpg" alt="Part 2 – creating an open window for the window seat"/></div></div><div class="section" title="Part 3 – creating windows for the room"><div class="titlepage"><div><div><h5 class="title"><a id="ch04lvl5sec07"/>Part 3 – creating windows for the room</h5></div></div></div><p>For the room <a id="id382" class="indexterm"/>windows, create a subtractive <a id="id383" class="indexterm"/>brush of size X144 x Y40 x Z94. This is to create a hollow in the wall for the prop frame: <span class="strong"><strong>SM_WindowFrame</strong></span>. Duplicate the subtractive brush and prop to create two windows for the room.</p></div><div class="section" title="Part 4 – creating the main door area"><div class="titlepage"><div><div><h5 class="title"><a id="ch04lvl5sec08"/>Part 4 – creating the main door area</h5></div></div></div><p>For the main door area, we start by creating the doors and its frame, then the brick walls around the door and lastly, the remaining concrete plain wall.</p><p>We have two doors with frames then some brick wall to augment before going back to the usual smooth walls. Here are the dimensions for creating this door area:</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>BSPs needed</p>
</th><th style="text-align: left" valign="bottom">
<p>X</p>
</th><th style="text-align: left" valign="bottom">
<p>Y</p>
</th><th style="text-align: left" valign="bottom">
<p>Z</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>Actual door x 2</p>
</td><td style="text-align: left" valign="top">
<p>20</p>
</td><td style="text-align: left" valign="top">
<p>116</p>
</td><td style="text-align: left" valign="top">
<p>250</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Side frame x 2</p>
</td><td style="text-align: left" valign="top">
<p>25</p>
</td><td style="text-align: left" valign="top">
<p>4</p>
</td><td style="text-align: left" valign="top">
<p>250</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Top frame</p>
</td><td style="text-align: left" valign="top">
<p>25</p>
</td><td style="text-align: left" valign="top">
<p>242</p>
</td><td style="text-align: left" valign="top">
<p>5</p>
</td></tr></tbody></table></div><p>Here are the <a id="id384" class="indexterm"/>dimensions for creating the area <a id="id385" class="indexterm"/>around the door:</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>BSPs needed</p>
</th><th style="text-align: left" valign="bottom">
<p>X</p>
</th><th style="text-align: left" valign="bottom">
<p>Y</p>
</th><th style="text-align: left" valign="bottom">
<p>Z</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>Brick wall side x 2</p>
</td><td style="text-align: left" valign="top">
<p>30</p>
</td><td style="text-align: left" valign="top">
<p>52</p>
</td><td style="text-align: left" valign="top">
<p>340</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Brick wall top</p>
</td><td style="text-align: left" valign="top">
<p>30</p>
</td><td style="text-align: left" valign="top">
<p>242</p>
</td><td style="text-align: left" valign="top">
<p>74</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Smooth wall left</p>
</td><td style="text-align: left" valign="top">
<p>30</p>
</td><td style="text-align: left" valign="top">
<p>126</p>
</td><td style="text-align: left" valign="top">
<p>340</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Smooth wall right</p>
</td><td style="text-align: left" valign="top">
<p>30</p>
</td><td style="text-align: left" valign="top">
<p>130</p>
</td><td style="text-align: left" valign="top">
<p>360</p>
</td></tr></tbody></table></div></div></div><div class="section" title="Creating basic furniture"><div class="titlepage"><div><div><h4 class="title"><a id="ch04lvl4sec09"/>Creating basic furniture</h4></div></div></div><p>Let us begin it<a id="id386" class="indexterm"/> part by part as follows.</p><div class="section" title="Part 1 – creating a dining table and placing chairs"><div class="titlepage"><div><div><h5 class="title"><a id="ch04lvl5sec09"/>Part 1 – creating a dining table and placing chairs</h5></div></div></div><p>For the dining table, we will be customizing a wooden table with a table top of size X480 x Y160 x Z12 and two legs each of size X20 x Y120 x Z70 placed 40 from the edge of the table. Material used to texture is <span class="strong"><strong>M_Wood_Walnut</strong></span>.</p><p>Then arrange eight chairs around the table using <span class="strong"><strong>SM_Chair</strong></span> from the <code class="literal">Props</code> folder.</p></div><div class="section" title="Part 2 – decorating the sitting area"><div class="titlepage"><div><div><h5 class="title"><a id="ch04lvl5sec10"/>Part 2 – decorating the sitting area</h5></div></div></div><p>There are two low tables in the middle and one low long table at the wall. Place three <span class="strong"><strong>SM_Couch</strong></span> from the <code class="literal">Props</code> folder around the low tables. Here are the dimensions for the larger table:</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>BSPs needed</p>
</th><th style="text-align: left" valign="bottom">
<p>X</p>
</th><th style="text-align: left" valign="bottom">
<p>Y</p>
</th><th style="text-align: left" valign="bottom">
<p>Z</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>Square top</p>
</td><td style="text-align: left" valign="top">
<p>140</p>
</td><td style="text-align: left" valign="top">
<p>140</p>
</td><td style="text-align: left" valign="top">
<p>8</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Leg x 2</p>
</td><td style="text-align: left" valign="top">
<p>120</p>
</td><td style="text-align: left" valign="top">
<p>12</p>
</td><td style="text-align: left" valign="top">
<p>36</p>
</td></tr></tbody></table></div><p>Here are the dimensions for the smaller table:</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>BSPs needed</p>
</th><th style="text-align: left" valign="bottom">
<p>X</p>
</th><th style="text-align: left" valign="bottom">
<p>Y</p>
</th><th style="text-align: left" valign="bottom">
<p>Z</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>Leg x 2</p>
</td><td style="text-align: left" valign="top">
<p>120</p>
</td><td style="text-align: left" valign="top">
<p>12</p>
</td><td style="text-align: left" valign="top">
<p>36</p>
</td></tr></tbody></table></div><p>Here are the dimensions for a low long table at the wall:</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>BSPs needed</p>
</th><th style="text-align: left" valign="bottom">
<p>X</p>
</th><th style="text-align: left" valign="bottom">
<p>Y</p>
</th><th style="text-align: left" valign="bottom">
<p>Z</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>Block</p>
</td><td style="text-align: left" valign="top">
<p>100</p>
</td><td style="text-align: left" valign="top">
<p>550</p>
</td><td style="text-align: left" valign="top">
<p>100</p>
</td></tr></tbody></table></div></div><div class="section" title="Part 3 – creating the window seat area"><div class="titlepage"><div><div><h5 class="title"><a id="ch04lvl5sec11"/>Part 3 – creating the window seat area</h5></div></div></div><p>Next to the open <a id="id387" class="indexterm"/>window, place a geometry box of size X120 x Y310 x Z100. This is to create a simplified seat by the window.</p></div><div class="section" title="Part 4 – creating the Japanese seating area"><div class="titlepage"><div><div><h5 class="title"><a id="ch04lvl5sec12"/>Part 4 – creating the Japanese seating area</h5></div></div></div><p>The Japanese square table with surface size X200 x Y200 x Z8 and 4 short legs, each of size X20 x Y20 x Z36) is placed close to the corner of the table. </p><p>To create a leg space under the table, I used a subtractive brush (X140 x Y140 x Z40) and placed it on the ground under the table. I used the corner of this subtractive brush as a guide as to where to place the short legs for the table.</p></div><div class="section" title="Part 5 – creating the kitchen cabinet area"><div class="titlepage"><div><div><h5 class="title"><a id="ch04lvl5sec13"/>Part 5 – creating the kitchen cabinet area</h5></div></div></div><p>This is a simplified block prototype for the kitchen cabinet area. The following are the dimensions for L-shaped area:</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/><col style="text-align: left"/><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>BSPs needed</p>
</th><th style="text-align: left" valign="bottom">
<p>Material</p>
</th><th style="text-align: left" valign="bottom">
<p>X</p>
</th><th style="text-align: left" valign="bottom">
<p>Y</p>
</th><th style="text-align: left" valign="bottom">
<p>Z</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>Shorter L: cabinet under tabletop</p>
</td><td style="text-align: left" valign="top">
<p>
<span class="strong"><strong>M_Wood_Walnut</strong></span>
</p>
</td><td style="text-align: left" valign="top">
<p>140</p>
</td><td style="text-align: left" valign="top">
<p>450</p>
</td><td style="text-align: left" valign="top">
<p>100</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Longer L: cabinet under tabletop</p>
</td><td style="text-align: left" valign="top">
<p>
<span class="strong"><strong>M_Wood_Walnut</strong></span>
</p>
</td><td style="text-align: left" valign="top">
<p>890</p>
</td><td style="text-align: left" valign="top">
<p>140</p>
</td><td style="text-align: left" valign="top">
<p>100</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Shorter L: tabletop</p>
</td><td style="text-align: left" valign="top">
<p>
<span class="strong"><strong>M_Metal_Brushed_Nickel</strong></span>
</p>
</td><td style="text-align: left" valign="top">
<p>150</p>
</td><td style="text-align: left" valign="top">
<p>450</p>
</td><td style="text-align: left" valign="top">
<p>10</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Longer L: tabletop</p>
</td><td style="text-align: left" valign="top">
<p>
<span class="strong"><strong>M_Metal_Brushed_Nickel</strong></span>
</p>
</td><td style="text-align: left" valign="top">
<p>900</p>
</td><td style="text-align: left" valign="top">
<p>150</p>
</td><td style="text-align: left" valign="top">
<p>10</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Shorter L: hanging cabinet</p>
</td><td style="text-align: left" valign="top">
<p>
<span class="strong"><strong>M_Wood_Walnut</strong></span>
</p>
</td><td style="text-align: left" valign="top">
<p>100</p>
</td><td style="text-align: left" valign="top">
<p>500</p>
</td><td style="text-align: left" valign="top">
<p>100</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Longer L: hanging cabinet</p>
</td><td style="text-align: left" valign="top">
<p>
<span class="strong"><strong>M_Wood_Walnut</strong></span>
</p>
</td><td style="text-align: left" valign="top">
<p>900</p>
</td><td style="text-align: left" valign="top">
<p>100</p>
</td><td style="text-align: left" valign="top">
<p>100</p>
</td></tr></tbody></table></div><p>The following are the dimensions for the island area (hood):</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/><col style="text-align: left"/><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>BSPs needed</p>
</th><th style="text-align: left" valign="bottom">
<p>Material</p>
</th><th style="text-align: left" valign="bottom">
<p>X</p>
</th><th style="text-align: left" valign="bottom">
<p>Y</p>
</th><th style="text-align: left" valign="bottom">
<p>Z</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>Hood (wooden area)</p>
</td><td style="text-align: left" valign="top">
<p>
<span class="strong"><strong>M_Wood_Walnut</strong></span>
</p>
</td><td style="text-align: left" valign="top">
<p>400</p>
</td><td style="text-align: left" valign="top">
<p>75</p>
</td><td style="text-align: left" valign="top">
<p>60</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Hood (metallic area)</p>
</td><td style="text-align: left" valign="top">
<p>
<span class="strong"><strong>M_Metal_Chrome</strong></span>
</p>
</td><td style="text-align: left" valign="top">
<p>500</p>
</td><td style="text-align: left" valign="top">
<p>150</p>
</td><td style="text-align: left" valign="top">
<p>30</p>
</td></tr></tbody></table></div><p>The following<a id="id388" class="indexterm"/> are the dimensions for the island area (table):</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/><col style="text-align: left"/><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>BSPs needed</p>
</th><th style="text-align: left" valign="bottom">
<p>Material</p>
</th><th style="text-align: left" valign="bottom">
<p>X</p>
</th><th style="text-align: left" valign="bottom">
<p>Y</p>
</th><th style="text-align: left" valign="bottom">
<p>Z</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>Cabinet under the table</p>
</td><td style="text-align: left" valign="top">
<p>
<span class="strong"><strong>M_Wood_Walnut</strong></span>
</p>
</td><td style="text-align: left" valign="top">
<p>500</p>
</td><td style="text-align: left" valign="top">
<p>150</p>
</td><td style="text-align: left" valign="top">
<p>100</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Tabletop</p>
</td><td style="text-align: left" valign="top">
<p>
<span class="strong"><strong>M_Metal_Chrome</strong></span>
</p>
</td><td style="text-align: left" valign="top">
<p>550</p>
</td><td style="text-align: left" valign="top">
<p>180</p>
</td><td style="text-align: left" valign="top">
<p>10</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Sink (use a subtractive brush)</p>
</td><td style="text-align: left" valign="top">
<p>
<span class="strong"><strong>M_Metal_Chrome</strong></span>
</p>
</td><td style="text-align: left" valign="top">
<p>100</p>
</td><td style="text-align: left" valign="top">
<p>80</p>
</td><td style="text-align: left" valign="top">
<p>40</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Stovetop</p>
</td><td style="text-align: left" valign="top">
<p>
<span class="strong"><strong>M_Metal_Burnished_Steel</strong></span>
</p>
</td><td style="text-align: left" valign="top">
<p>140</p>
</td><td style="text-align: left" valign="top">
<p>100</p>
</td><td style="text-align: left" valign="top">
<p>5</p>
</td></tr></tbody></table></div></div></div></div></div></div>
<div class="section" title="Summary"><div class="titlepage"><div><div><h1 class="title"><a id="ch04lvl1sec57"/>Summary</h1></div></div></div><p>In this chapter, we covered in-depth information about materials and lights. We learned how the rendering system works and the underlying graphics pipeline/technology such as Directx 11, DirectX 12, and OpenGL/Vulkan. We also learned how to use the Unreal 4 Material Editor to create custom materials and apply it into your level.</p><p>We also explored the different types of lights and adjusting <span class="strong"><strong>Intensity</strong></span>, <span class="strong"><strong>Attenuation Radius</strong></span>, and other settings to customize lights for the level. We also learned how to import IES light profiles from light manufacturer's website to create realistic lights for the level. We learned about the differences between <span class="strong"><strong>Static</strong></span>, <span class="strong"><strong>Stationary</strong></span>, and <span class="strong"><strong>Movable</strong></span> lights and how the different lights cast shadows for the level.</p><p>In the next chapter, we will learn about animation and artificial intelligence in games. Stay tuned for more!</p></div></body></html>