<html><head></head><body><div class="chapter" title="Chapter&#xA0;6.&#xA0;Blueprints"><div class="titlepage"><div><div><h1 class="title"><a id="ch06"/>Chapter 6. Blueprints</h1></div></div></div><p>In this chapter, we will learn what Blueprints are and how they can be used to prototype your game. We will learn about:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Getting familiar with Blueprint editor</li><li class="listitem" style="list-style-type: disc">Various Blueprint graph types (for example, function graphs, event graphs, and so on)</li><li class="listitem" style="list-style-type: disc">Blueprint nodes</li><li class="listitem" style="list-style-type: disc">And, finally, we will create a simple Blueprint that can be placed in world or dynamically spawned while running the game</li></ul></div><p>Blueprint Visual Scripting in Unreal Engine 4 is an extremely powerful and flexible node-based interface to create gameplay elements and provides artists and designers with the ability to program their <a id="id231" class="indexterm"/>game and to quickly iterate gameplay within the editor without writing a single line of code! Using Blueprints you can create and tweak gameplay, characters, inputs, environments, and virtually anything in your game.</p><p>Blueprints work by using graphs that contain various nodes connected to each other, which defines what the Blueprint does. For example, it can be gameplay events, spawning new Actors, or anything really.</p><div class="section" title="Different Blueprint types"><div class="titlepage"><div><div><h1 class="title"><a id="ch06lvl1sec29"/>Different Blueprint types</h1></div></div></div><p>Let's take a quick look at various Blueprint types that are<a id="id232" class="indexterm"/> available in Unreal Engine 4:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Level Blueprint</strong></span>: Level Blueprint is a special Blueprint that acts as a level-wide global event graph, which the user can neither remove nor create. Each level will have its own level <a id="id233" class="indexterm"/>Blueprint that the user can use to create events that pertain to the whole level. The user can use this graph to call events on a specific actor present in the level or play a Matinee sequence. Users who are familiar with Unreal Engine 3 (or UDK) should be familiar with this concept as this is similar to how Kismet worked in those Engines.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Class Blueprint</strong></span>: Commonly referred to as just Blueprint, is an asset that you create inside <span class="strong"><strong>Content Browser</strong></span>. Once the asset is created, you define its behavior visually instead<a id="id234" class="indexterm"/> of typing any code. This Blueprint is saved as an asset in <span class="strong"><strong>Content Browser</strong></span> so you can drag and drop this into your world as an instance or spawn dynamically in another Blueprint graph.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Animation Blueprint</strong></span>: These <a id="id235" class="indexterm"/>are specialized graphs that control the animation of a skeletal mesh by blending animations, controlling the bones directly, and outputting a final pose in each frame. Animation Blueprints will always have two graphs, namely <span class="strong"><strong>EventGraph</strong></span> and <span class="strong"><strong>AnimGraph</strong></span>.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>EventGraph</strong></span>: This uses a <a id="id236" class="indexterm"/>collection of animation-related events to initiate a sequence of nodes, which updates the values used to drive animations within <span class="strong"><strong>Animgraph</strong></span>.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>AnimGraph</strong></span>: This is used to <a id="id237" class="indexterm"/>evaluate the final pose for your <span class="strong"><strong>Skeletal Mesh</strong></span>. In this graph, you can perform animation blends or control bone transforms using <span class="strong"><strong>SkeletalControls</strong></span>.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Macro Library</strong></span>: These are<a id="id238" class="indexterm"/> containers that can hold various macros or graphs that you can use multiple times in any other Blueprint class. Macro libraries cannot contain variables or inherit from other Blueprints or be placed in the level. They are just a collection of graphs that you use commonly and can be a time-saver. If you are referencing a macro in your Blueprint then changes to that macro will not be applied to your Blueprint until you recompile your Blueprint. Compiling a Blueprint means converting all the properties and graphs into a class that Unreal can use.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Blueprint Interface</strong></span>: These are <a id="id239" class="indexterm"/>graphs that contain one or more functions without implementation. Other classes that add this interface must include the functions in a unique manner. This has the same concept of interface in programming where you can access various objects with a common interface and share or send data to one another. Interface graphs have some limitations in that you cannot create variables, edit graphs, or add any components.</li></ul></div></div></div>
<div class="section" title="Getting familiar with the Blueprint user interface"><div class="titlepage"><div><div><h1 class="title"><a id="ch06lvl1sec30"/>Getting familiar with the Blueprint user interface</h1></div></div></div><p>The Blueprint <span class="strong"><strong>User Interface</strong></span> (<span class="strong"><strong>UI</strong></span>) contains<a id="id240" class="indexterm"/> various tabs by default. In the following<a id="id241" class="indexterm"/> screenshot you can see the unified layout of the Blueprint UI:</p><div class="mediaobject"><img src="graphics/B03950_06_01.jpg" alt="Getting familiar with the Blueprint user interface"/></div><p>Let's take a look at these tabs:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Components</strong></span></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>My Blueprint</strong></span></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Toolbar</strong></span></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Graph editor</strong></span></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Details panel</strong></span></li></ul></div><div class="section" title="Components tab"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec54"/>Components tab</h2></div></div></div><p>Most Blueprint classes can have <a id="id242" class="indexterm"/>different types of components. These can be light components, mesh components, UI components, and <a id="id243" class="indexterm"/>so on. In this section, we will see what they are and how we can use them in our Blueprint classes.</p><div class="section" title="What are components?"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl3sec17"/>What are components?</h3></div></div></div><p>Components are the bits and pieces that make up the whole Actor. Components cannot exist on their own but when added to an Actor, the Actor will then have access to all the functionalities provided by the <a id="id244" class="indexterm"/>component. For example, think about a car. The wheels, body, lights, and so on can be considered as components and the car itself as the Actor. Then in the graph, you can access the component and do the logic for your car Actor. Components are always instanced and each Actor instance will have its own unique instance of components. If this were not the case, then, if we place multiple car Actors in world and if one starts moving, all the others will also move.</p></div><div class="section" title="Adding a component"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl3sec18"/>Adding a component</h3></div></div></div><p>To add a component to <a id="id245" class="indexterm"/>your Actor, click the <span class="strong"><strong>Add Component</strong></span> button on the <span class="strong"><strong>Components</strong></span> tab. After clicking the button it will show a list of various <span class="strong"><strong>Components</strong></span> that you can add.</p><div class="mediaobject"><img src="graphics/B03950_06_02.jpg" alt="Adding a component"/></div><p>After adding a component, you<a id="id246" class="indexterm"/> will be prompted to give it a name. Components can also be directly added simply by dragging-and-dropping from <span class="strong"><strong>Content Browser</strong></span> to the <span class="strong"><strong>Components</strong></span> window.</p><p>To rename a component, you can select it in the <span class="strong"><strong>Components</strong></span> tab and press <span class="emphasis"><em>F2</em></span>.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note17"/>Note</h3><p>The drag-and-drop method only applies to <span class="strong"><strong>StaticMeshes</strong></span>, <span class="strong"><strong>SkeletalMeshes</strong></span>, <span class="strong"><strong>SoundCues</strong></span>, and <span class="strong"><strong>ParticleSystems</strong></span>.</p></div></div><p>With the component selected, you can delete it by pressing the <span class="emphasis"><em>Delete</em></span> key. You can also right-click on the component and select <span class="strong"><strong>Delete</strong></span> to remove it as well.</p></div><div class="section" title="Transforming the component"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl3sec19"/>Transforming the component</h3></div></div></div><p>Once the component is<a id="id247" class="indexterm"/> added and selected, you can use the transform tools (<span class="emphasis"><em>W</em></span>, <span class="emphasis"><em>E</em></span>, and <span class="emphasis"><em>R</em></span>) to change the location, rotation, and scale of the component either by entering values in the <span class="strong"><strong>Details</strong></span> panel or in the <span class="strong"><strong>Viewport</strong></span> tab. When using moving, rotating, or scaling, you can press <span class="emphasis"><em>Shift</em></span> to enable snapping, provided you have enabled grid snapping in the <span class="strong"><strong>Viewport</strong></span> toolbar.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note18"/>Note</h3><p>If the Component has any child components attached to it then moving, rotating or scaling that component will propagate the transformation to all child components too.</p></div></div></div><div class="section" title="Adding events for components"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl3sec20"/>Adding events for components</h3></div></div></div><p>Adding events based on a<a id="id248" class="indexterm"/> component is very easy and can be done by different methods. Events created in this manner are specific to that component and need not be tested as to which component is involved:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Adding events from the details panel</strong></span>: When you select the component you will see all the events available for that component in the <span class="strong"><strong>Details</strong></span> panel as buttons. When you <a id="id249" class="indexterm"/>click on any of them, the editor will create the event node specific for that component in the event graph.<div class="mediaobject"><img src="graphics/B03950_06_03.jpg" alt="Adding events for components"/></div></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Adding events by right-clicking</strong></span>: When you right-click on a component, you will see <span class="strong"><strong>Add Event</strong></span> in the <a id="id250" class="indexterm"/>context menu. From there you can select any event you want and editor will create the event node specific to that component in the event graph.<div class="mediaobject"><img src="graphics/B03950_06_04.jpg" alt="Adding events for components"/></div></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Adding events in the graph</strong></span>: Once you select your component in the <span class="strong"><strong>My Blueprints</strong></span> tab, you can<a id="id251" class="indexterm"/> right-click on the graph and get all the <span class="strong"><strong>Events</strong></span> for that component.<div class="mediaobject"><img src="graphics/B03950_06_05.jpg" alt="Adding events for components"/></div></li></ul></div></div></div><div class="section" title="My Blueprints tab"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec55"/>My Blueprints tab</h2></div></div></div><p>The <span class="strong"><strong>My Blueprints</strong></span> tab displays a list of <span class="strong"><strong>Graphs</strong></span>, <span class="strong"><strong>Functions</strong></span>, <span class="strong"><strong>Macros</strong></span>, <span class="strong"><strong>Variables</strong></span>, and so on that are contained within <a id="id252" class="indexterm"/>your Blueprint. This tab is dependent on the type of Blueprint. For example, a class Blueprint will have <span class="strong"><strong>EventGraph</strong></span>, <span class="strong"><strong>ConstructionScript Graph</strong></span>, <span class="strong"><strong>Variables</strong></span>, <span class="strong"><strong>Functions</strong></span>, <span class="strong"><strong>Macros</strong></span>, and so on. An interface <a id="id253" class="indexterm"/>will only show the list of functions within it. A <span class="strong"><strong>Macro Library</strong></span> will show only the macros created within it.</p><div class="section" title="Creation buttons"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl3sec21"/>Creation buttons</h3></div></div></div><p>You can create new <a id="id254" class="indexterm"/>variables, functions, macros, event graphs, and event dispatchers inside the <span class="strong"><strong>My Blueprints</strong></span> tab by clicking the shortcut button (<span class="strong"><strong>+</strong></span>).</p><div class="mediaobject"><img src="graphics/B03950_06_06.jpg" alt="Creation buttons"/></div><p>You can also add them<a id="id255" class="indexterm"/> by clicking the <span class="strong"><strong>+Add New</strong></span> drop-down button.</p></div><div class="section" title="Searching in my Blueprint"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl3sec22"/>Searching in my Blueprint</h3></div></div></div><p>The <span class="strong"><strong>My Blueprint</strong></span> tab also provides a search area to search for your variables, functions, macros, event graphs, and event <a id="id256" class="indexterm"/>dispatchers. You can search based on name, comment, or any other data.</p></div><div class="section" title="Categorizing in My Blueprint"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl3sec23"/>Categorizing in My Blueprint</h3></div></div></div><p>It is always a good practice to<a id="id257" class="indexterm"/> organize your variables, functions, macros, event dispatchers, and so on into various categories. In the <span class="strong"><strong>My Blueprints</strong></span> tab, you can have as many categories with sub-categories. Check the following screenshot:</p><div class="mediaobject"><img src="graphics/B03950_06_07.jpg" alt="Categorizing in My Blueprint"/></div><p>Here you can see how I have organized everything into various categories and sub-categories. To set a category for your variables, functions, macros, and event dispatchers, simply select them <a id="id258" class="indexterm"/>and in the <span class="strong"><strong>Details</strong></span> panel you can type your new category name or select from an existing category. If you need sub-categories then you need to separate your sub-category name with a vertical bar key (<span class="strong"><strong>|</strong></span>). For example, if you want <span class="strong"><strong>Health</strong></span> as a sub-category in <span class="strong"><strong>Attributes</strong></span>, you can set it like this: <span class="strong"><strong>Attributes</strong></span> | <span class="strong"><strong>Health</strong></span>.</p></div></div><div class="section" title="Toolbar"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec56"/>Toolbar</h2></div></div></div><p>The toolbar provides access to common commands required while editing Blueprints. Toolbar buttons will be <a id="id259" class="indexterm"/>different depending on which mode (editing mode, play in editor mode, and so on) is active and which Blueprint type <a id="id260" class="indexterm"/>you are currently editing.</p></div><div class="section" title="Graph editor"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec57"/>Graph editor</h2></div></div></div><p>Graph editor is the main area of <a id="id261" class="indexterm"/>your Blueprint. This is where you<a id="id262" class="indexterm"/> add new nodes and connect them to create the network that defines the scripted behavior. More information on how to create new nodes and various nodes will be explained later on in this book.</p></div><div class="section" title="Details panel"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec58"/>Details panel</h2></div></div></div><p>The <span class="strong"><strong>Details</strong></span> panel provides<a id="id263" class="indexterm"/> access to properties of the <a id="id264" class="indexterm"/>selected <span class="strong"><strong>Components</strong></span> or <span class="strong"><strong>Variables</strong></span>. It contains a search field so you can search for a specific property.</p></div></div>
<div class="section" title="Blueprint graph types"><div class="titlepage"><div><div><h1 class="title"><a id="ch06lvl1sec31"/>Blueprint graph types</h1></div></div></div><p>As we mentioned before, Blueprints are assets that are saved in <span class="strong"><strong>Content Browser</strong></span> that are used to create new types of Actors or script gameplay logic, events, and so on, giving both designers and <a id="id265" class="indexterm"/>programmers the ability to quickly iterate gameplay without writing a single line of code. In order for a Blueprint to have scripted behavior, we need to define how it behaves using various nodes in graph editor. Let's take a quick look at various graphs:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Construction Script Graph</strong></span>: Construction graph is executed the moment the Blueprint is initialized<a id="id266" class="indexterm"/> and whenever a change happens to any variables within the Blueprint. This means that whenever you place an instance of the Blueprint in the level and <a id="id267" class="indexterm"/>change its transformation or any variable, the construction graph is executed. This graph is executed once every time it is constructed and again when any of the properties or Blueprint is updated. This can be used to construct procedural elements or to set up values before the game begins.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Event Graph</strong></span>: This is <a id="id268" class="indexterm"/>where all the gameplay logic is contained, including<a id="id269" class="indexterm"/> interactivity and dynamic responses. Using various event nodes as entry points to functions, flow controls, and variables, you can script the behavior of the Blueprint. Event graphs are only executed when you start the game.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Function Graph</strong></span>: By default, this graph contains one single entry point with the name of the function. This node <a id="id270" class="indexterm"/>can never be deleted but you can move it around freely. Nodes in this graph are only executed when you call this function in the construction<a id="id271" class="indexterm"/> or event graph or from another Blueprint that is referencing the Blueprint that this function belongs to.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Macro Graph</strong></span>: This is like a<a id="id272" class="indexterm"/> collapsed graph that contains <a id="id273" class="indexterm"/>your nodes. Unlike function graphs, macros can have multiple inputs or outputs.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Interface Graph</strong></span>: Interface graphs are<a id="id274" class="indexterm"/> disabled and you<a id="id275" class="indexterm"/> cannot move, create graphs, variables, or components.</li></ul></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note19"/>Note</h3><p>Only class Blueprints have <span class="strong"><strong>Construction Script</strong></span> and it stops executing when gameplay begins and is considered completed before gameplay.</p></div></div><div class="section" title="Function graph"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec59"/>Function graph</h2></div></div></div><p>Function graphs are node graphs created inside a Blueprint and can be executed from another graph (such as <span class="strong"><strong>Event Graph</strong></span> or <span class="strong"><strong>Construction Script</strong></span>) or from another Blueprint. By default, function graphs contain a single <a id="id276" class="indexterm"/>execution pin that is<a id="id277" class="indexterm"/> activated when the function is called, causing the connected nodes to execute.</p><div class="section" title="Creating functions"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl3sec24"/>Creating functions</h3></div></div></div><p>Function graphs are<a id="id278" class="indexterm"/> created through <span class="strong"><strong>My Blueprints</strong></span> tab and you can create as many functions as you want.</p><p>Inside <span class="strong"><strong>My Blueprints</strong></span> tab you can hover your mouse over the functions header and click on <span class="strong"><strong>+Function</strong></span> to add a new function</p><div class="mediaobject"><img src="graphics/B03950_06_08.jpg" alt="Creating functions"/></div><p>Clicking that button (the yellow highlighted button) will create a new function and prompts you to enter a<a id="id279" class="indexterm"/> new name for it.</p></div><div class="section" title="Graph settings"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl3sec25"/>Graph settings</h3></div></div></div><p>When you create<a id="id280" class="indexterm"/> a new function and select it, you will get some properties of that function, which you can change in the <span class="strong"><strong>Details</strong></span> panel. Let's take a quick look at them.</p><div class="mediaobject"><img src="graphics/B03950_06_09.jpg" alt="Graph settings"/></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Description</strong></span>: Appears as a tooltip when you hover your mouse over this function in another graph.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Category</strong></span>: Keeps this function in its given category (for organizational purpose only).</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Access Specifier</strong></span>: Sometimes when you create functions, you don't want to access some of them in another Blueprint. Access specifiers let you specify what other objects can access this function.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Public</strong></span>: This means any object can access this function from anywhere. This is the default setting.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Protected</strong></span>: This means current Blueprint and any Blueprints derived from the current Blueprint can access this function.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Private</strong></span>: This setting<a id="id281" class="indexterm"/> means only the current Blueprint can access this function.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Pure</strong></span>: When enabled, this function is marked as a <span class="strong"><strong>Pure Function</strong></span> and when disabled it is an <span class="strong"><strong>Impure Function</strong></span>.<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Pure Function</strong></span> will not modify state or members of a class in any way and is considered a <span class="strong"><strong>Constant Function</strong></span> that only outputs a data value and does not have an execution pin. These are connected to other <span class="strong"><strong>Data Pins</strong></span> and are automatically executed when the data on them is required.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Impure Function</strong></span> is free to modify any value in a class and contains an execution pin.</li></ul></div></li></ul></div><p>The following is a screenshot showing the difference between <span class="strong"><strong>Pure Function</strong></span> and <span class="strong"><strong>Impure Function</strong></span>:</p><div class="mediaobject"><img src="graphics/B03950_06_10.jpg" alt="Graph settings"/></div></div><div class="section" title="Editing functions"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl3sec26"/>Editing functions</h3></div></div></div><p>To define the functionality<a id="id282" class="indexterm"/> of the function you need to edit it. You can have as many inputs or outputs as you want, and can then create a node network between those inputs and outputs to define the functionality. To add input or output, you first need to select the function either in the <span class="strong"><strong>My Blueprint</strong></span> tab or select the main pink node when you open the <span class="strong"><strong>Function Graph</strong></span>. Then, in the <span class="strong"><strong>Details</strong></span> panel, you will see a button labelled <span class="strong"><strong>New</strong></span> that creates new inputs or outputs.</p><div class="mediaobject"><img src="graphics/B03950_06_11.jpg" alt="Editing functions"/></div><p>In this screenshot you can see how I added new inputs and outputs to <span class="strong"><strong>Function Example</strong></span>.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note20"/>Note</h3><p>
<span class="strong"><strong>ReturnNode</strong></span> is optional and will only appear if you have at least one output data pin. If you remove all output pins then <span class="strong"><strong>ReturnNode</strong></span> is automatically removed and you can still use your function.</p></div></div><p>For example, in the<a id="id283" class="indexterm"/> following screenshot I created a Blueprint function that appends a prefix to my character name so I can use this one single function to change the prefix anytime I want.</p><div class="mediaobject"><img src="graphics/B03950_06_12.jpg" alt="Editing functions"/></div><p>Now, back in <span class="strong"><strong>Event Graph</strong></span>, I call this function on the <span class="strong"><strong>Begin Play</strong></span> event so I can set the character name when the<a id="id284" class="indexterm"/> game starts.</p><div class="mediaobject"><img src="graphics/B03950_06_13.jpg" alt="Editing functions"/></div></div></div><div class="section" title="Macro graph"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec60"/>Macro graph</h2></div></div></div><p>Macro graphs are essentially collapsed graphs of nodes, which contain an entry point and exit point designated by<a id="id285" class="indexterm"/> tunnel nodes but cannot contain variables. Macro graphs can have any number of execution or data pins.</p><p>Macros can be created inside<a id="id286" class="indexterm"/> a <span class="strong"><strong>Class Blueprint</strong></span> or <span class="strong"><strong>Level Blueprint</strong></span> like functions or you can organize your <span class="strong"><strong>Macros</strong></span> in a <span class="strong"><strong>Blueprint Macro Library</strong></span>, which can be created in <span class="strong"><strong>Content Browser</strong></span>.</p><p>
<span class="strong"><strong>Blueprint Macro Library</strong></span> can contain all your <span class="strong"><strong>Macros</strong></span> in one place so you can use them in any other Blueprint. These can be real time-savers as they can contain most commonly used nodes and can transfer data. But changes to a macro graph are only reflected when the Blueprint containing that macro is recompiled.</p><p>To create a macro library you need to right-click in <span class="strong"><strong>Content Browser</strong></span> and select <span class="strong"><strong>Blueprint Macro Library</strong></span> from the Blueprints sub-category.</p><div class="mediaobject"><img src="graphics/B03950_06_14.jpg" alt="Macro graph"/></div><p>Once you select that option you have to select a parent class for your Macro. Most of the time we select Actor as the parent class. After the selection, you will be prompted to type a name for your Macro library and save it.</p><p>If you just created your Macro<a id="id287" class="indexterm"/> library, the editor will create a blank Macro named <span class="strong"><strong>NewMacro_0</strong></span> and will be highlighted for you to rename.</p><p>As you did with functions, you <a id="id288" class="indexterm"/>can type a description and define a <span class="strong"><strong>Category</strong></span> for your Macro. You also get an option to define a color for your Macro using <span class="strong"><strong>Instance Color</strong></span>.</p><p>In the following screenshot you can see I created a Macro with multiple outputs and defined a <span class="strong"><strong>Description</strong></span>, <span class="strong"><strong>Category</strong></span>, and <a id="id289" class="indexterm"/>an <span class="strong"><strong>Instance Color</strong></span> for the Macro:</p><div class="mediaobject"><img src="graphics/B03950_06_15.jpg" alt="Macro graph"/></div><p>In any other Blueprint I can<a id="id290" class="indexterm"/> now get this Macro and use it. If you hover you mouse over the Macro, you can see the description you set as a <span class="strong"><strong>Tooltip</strong></span>.</p><div class="mediaobject"><img src="graphics/B03950_06_16.jpg" alt="Macro graph"/></div></div><div class="section" title="Interface graph"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec61"/>Interface graph</h2></div></div></div><p>Interface graphs are a collection of functions without any implementation, which can be added to other Blueprints. Any Blueprint class implementing an interface will definitely contain all the functions from<a id="id291" class="indexterm"/> the interface. It is then up to the user to give functionality to the functions in that interface. Interface editor is similar to other Blueprints but you cannot add new variables, edit the graph, or add <a id="id292" class="indexterm"/>any components.</p><p>Interfaces are used to communicate between various Blueprints that share specific functionality. For example, if the player is having a <span class="strong"><strong>Flame Thrower</strong></span> gun and in the game you have <span class="strong"><strong>Ice</strong></span> and <span class="strong"><strong>Cloth</strong></span>, both can take damage but one should melt and the other should burn. You can create a <span class="strong"><strong>Blueprint Interface</strong></span> that contains a <span class="strong"><strong>TakeWeaponFire</strong></span> function and have <span class="strong"><strong>Ice</strong></span> and <span class="strong"><strong>Cloth</strong></span> implement this interface. Then, in <span class="strong"><strong>Ice Blueprint</strong></span>, you can implement the <span class="strong"><strong>TakeWeaponFire</strong></span> function and make the ice melt and, in <span class="strong"><strong>Cloth Blueprint</strong></span>, you can implement that same function and make the cloth burn. Now when you are firing your <span class="strong"><strong>Flame Thrower</strong></span> you can simply call the <span class="strong"><strong>TakeWeaponFire</strong></span> function and it calls them in those Blueprints.</p><p>To create a new interface, you<a id="id293" class="indexterm"/> need to right-click on the <span class="strong"><strong>Content Browser</strong></span> and select <span class="strong"><strong>Blueprint Interface</strong></span> from the Blueprints sub-category and then<a id="id294" class="indexterm"/> name it.</p><p>In the following example I named it <span class="strong"><strong>BP_TestInterface</strong></span>:</p><div class="mediaobject"><img src="graphics/B03950_06_17.jpg" alt="Interface graph"/></div><p>If you just created your interface the editor will create a blank function named <span class="strong"><strong>NewFunction_0</strong></span>, which will be highlighted for you to rename. If you implement this interface on any Blueprint then it will have this function.</p><p>In this example, I <a id="id295" class="indexterm"/>created a function called <span class="strong"><strong>MyInterfaceFunction</strong></span>. We will use this to simply print out the Actor<a id="id296" class="indexterm"/> name that implements this interface.</p><div class="mediaobject"><img src="graphics/B03950_06_18.jpg" alt="Interface graph"/></div><p>To create functionality for this function, we first need to implement this interface in a Blueprint. So open your Blueprint where you want this to be implemented and select <span class="strong"><strong>Class Settings</strong></span> in the <span class="strong"><strong>Toolbar</strong></span>.</p><div class="mediaobject"><img src="graphics/B03950_06_19.jpg" alt="Interface graph"/></div><p>Now the <span class="strong"><strong>Details</strong></span> panel will show the settings for this Blueprint and, under the <span class="strong"><strong>Interfaces</strong></span> section, you can add your interface.</p><div class="mediaobject"><img src="graphics/B03950_06_20.jpg" alt="Interface graph"/></div><p>Once you add that<a id="id297" class="indexterm"/> interface, the <span class="strong"><strong>My Blueprints</strong></span> tab will update to<a id="id298" class="indexterm"/> show you the interface functions. Now all you have to do is double-click on the function to open the graph and add functionality.</p><div class="mediaobject"><img src="graphics/B03950_06_21.jpg" alt="Interface graph"/></div><p>The reason why <span class="strong"><strong>MyInterfaceFunction</strong></span> appears in the <span class="strong"><strong>My Blueprints</strong></span> tab is because that function contains an output <a id="id299" class="indexterm"/>value. If you have an interface function <a id="id300" class="indexterm"/>without an output then it won't appear in the <span class="strong"><strong>My Blueprints</strong></span> tab. Instead it appears under <span class="strong"><strong>Events</strong></span> when right-clicking in your Blueprint. For example, in that same interface I created another function without output data.</p><div class="mediaobject"><img src="graphics/B03950_06_22.jpg" alt="Interface graph"/></div><p>This <span class="strong"><strong>AnotherInterfaceFunction</strong></span> will not appear in the <span class="strong"><strong>My Blueprints</strong></span> tab because it has no output. So, to implement this<a id="id301" class="indexterm"/> function in your Blueprint, you have<a id="id302" class="indexterm"/> to add this as an event.</p><div class="mediaobject"><img src="graphics/B03950_06_23.jpg" alt="Interface graph"/></div></div></div>
<div class="section" title="Blueprint node references"><div class="titlepage"><div><div><h1 class="title"><a id="ch06lvl1sec32"/>Blueprint node references</h1></div></div></div><p>The behavior of a Blueprint object is<a id="id303" class="indexterm"/> defined using various nodes. Nodes can be <span class="strong"><strong>Events</strong></span>, <span class="strong"><strong>Function Calls</strong></span>, <span class="strong"><strong>Flow Control</strong></span>, <span class="strong"><strong>Variables</strong></span>, and so on that are used in the graph. Even though each type of node has a unique function, the way they are created and used is common.</p><p>Nodes are added to the<a id="id304" class="indexterm"/> graph by right-clicking inside the graph panel and selecting the node from the <span class="strong"><strong>Context Menu</strong></span>. If a component inside Blueprint is selected, events and functions supported by that component are also listed.</p><div class="mediaobject"><img src="graphics/B03950_06_24.jpg" alt="Blueprint node references"/></div><p>After a node is added you can select it and move it around using the left mouse button. You can use <span class="emphasis"><em>Ctrl</em></span> to add or remove from the current selection of nodes. Clicking and dragging inside the graph creates a <span class="strong"><strong>Marquee Selection</strong></span> that adds to the current selection.</p><p>Nodes can have multiple inputs and outputs and are of two types: <span class="strong"><strong>Execution Pins</strong></span> and <span class="strong"><strong>Data Pins</strong></span>.</p><p>Execution pins start the flow of execution and when the execution is completed it activates an output execution pin to continue the flow. Execution pins are drawn as outlines when not wired and solid white when connected.</p><div class="mediaobject"><img src="graphics/B03950_06_25.jpg" alt="Blueprint node references"/></div><p>Data pins are nodes that transfer (such as taking and outputting) data from one node to the other. These nodes are type <a id="id305" class="indexterm"/>specific. That means they can be connected to variables of the same type. Some data pins are automatically converted if you connect them to another data pin that is not of the same type. For example, if you connect a <code class="literal">float</code> variable to <code class="literal">string</code>, the Blueprint editor will automatically insert a <code class="literal">float</code> to a <code class="literal">string</code> conversion node. Like execution pins, they are drawn as an outline when not connected, and a solid color when connected.</p><div class="mediaobject"><img src="graphics/B03950_06_26.jpg" alt="Blueprint node references"/></div><div class="section" title="Node colors"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec62"/>Node colors</h2></div></div></div><p>Nodes in Blueprint have different <a id="id306" class="indexterm"/>colors that show what kind of node it is.</p><p>A red-colored node means it's an event node and this is where execution starts.</p><div class="mediaobject"><img src="graphics/B03950_06_27.jpg" alt="Node colors"/></div><p>A blue-colored node means it can either be a function or an event being called. These nodes can have multiple inputs or outputs. The icon on top of the function will be changed based on whether it's a function or event.</p><div class="mediaobject"><img src="graphics/B03950_06_28.jpg" alt="Node colors"/></div><p>A purple-colored node can<a id="id307" class="indexterm"/> neither be created nor destroyed. You can see this node in <span class="strong"><strong>Construction Script</strong></span> and <span class="strong"><strong>Functions</strong></span>.</p><div class="mediaobject"><img src="graphics/B03950_06_29.jpg" alt="Node colors"/></div><p>A grey node can be a <span class="strong"><strong>Macro</strong></span>, <span class="strong"><strong>Flow Control</strong></span>, or <span class="strong"><strong>Collapsed</strong></span> node.</p><div class="mediaobject"><img src="graphics/B03950_06_30.jpg" alt="Node colors"/></div><p>A green-colored node usually means a Pure function used to get a value.</p><div class="mediaobject"><img src="graphics/B03950_06_31.jpg" alt="Node colors"/></div><p>A cyan-colored node<a id="id308" class="indexterm"/> means it's a cast node. This node converts the given object to another.</p><div class="mediaobject"><img src="graphics/B03950_06_32.jpg" alt="Node colors"/></div></div><div class="section" title="Variables"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec63"/>Variables</h2></div></div></div><p>Variables are properties that hold a <a id="id309" class="indexterm"/>value or an object reference. They can be accessed inside the Blueprint editor or from another Blueprint. They can be created to include data types (<code class="literal">float</code>, <code class="literal">integer</code>, <code class="literal">Boolean</code>, and so on) or reference types or classes. Each variable can also be an array. All types are color coded for easy identification.</p></div><div class="section" title="Math expression"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec64"/>Math expression</h2></div></div></div><p>Math expression nodes are <a id="id310" class="indexterm"/>essentially collapsed nodes that you can double-click to open the sub graph to see the functionality. Whenever you rename the node, the new expression is parsed and a new graph is generated. To rename the node, simply select it and press <span class="emphasis"><em>F2</em></span>.</p><p>To create a <span class="strong"><strong>Math Expression</strong></span> node, right-click on the graph editor and select <span class="strong"><strong>Add Math Expression</strong></span> node. You will then be prompted to type your <span class="strong"><strong>Math Expression</strong></span>.</p><p>For example, let's type this expression: <span class="emphasis"><em>(vector(x, y, z)) + ((a + 1) * (b + 1))</em></span> and press <span class="emphasis"><em>Enter</em></span>.</p><div class="mediaobject"><img src="graphics/B03950_06_33.jpg" alt="Math expression"/></div><p>You will now see that the <span class="strong"><strong>Math Expression</strong></span> node has automatically parsed your expression and generated proper variables <a id="id311" class="indexterm"/>and a graph from your expression.</p><div class="mediaobject"><img src="graphics/B03950_06_34.jpg" alt="Math expression"/></div><p>The following operators are supported and can be combined with logical and comparison operators to create complex <a id="id312" class="indexterm"/>expressions:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Multiplicative</strong></span>: *, /, % (modulo)</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Additive</strong></span>: +, -</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Relational</strong></span>: &lt;, &gt;, &lt;=, &gt;=</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Equality</strong></span>: == (equal), != (not equal)</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Logical</strong></span>: || (or), &amp;&amp; (and), ^ (power)</li></ul></div></div></div>
<div class="section" title="Creating our first Blueprint class"><div class="titlepage"><div><div><h1 class="title"><a id="ch06lvl1sec33"/>Creating our first Blueprint class</h1></div></div></div><p>Now that we have an idea of what <a id="id313" class="indexterm"/>Blueprint is and what it does, let's create a simple Blueprint actor that spins on its own and destroys itself after a few seconds with a particle effect and sound. After creating our Blueprint, we will drag and drop this into the world and we will also use the <span class="strong"><strong>Level Blueprint</strong></span> to dynamically spawn this Blueprint while running the game.</p><div class="section" title="Creating a new Blueprint"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec65"/>Creating a new Blueprint</h2></div></div></div><p>To create this Blueprint, first right-click inside <span class="strong"><strong>Content Browser</strong></span> and select <span class="strong"><strong>Blueprint Class</strong></span>. Once you click<a id="id314" class="indexterm"/> that you will be prompted to select a parent class for the Blueprint. You need to specify a parent class for your Blueprint as it will inherit all properties from that parent class.</p><p>Even though you can choose all existing classes (even other Blueprint classes), let's take a look at the most <a id="id315" class="indexterm"/>common parent classes:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Actor</strong></span>: An Actor-based Blueprint can be placed or spawned in the level</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Pawn</strong></span>: <span class="strong"><strong>Pawn</strong></span> is what you can call an agent which you can possess and receives inputs from the controller</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Character</strong></span>: This is an extended version of <span class="strong"><strong>Pawn</strong></span> with the ability to walk, run, jump, crouch, and more</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Player Controller</strong></span>: This is used to control the <span class="strong"><strong>Character</strong></span> or <span class="strong"><strong>Pawn</strong></span></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Game Mode</strong></span>: This defines the game being played</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Actor Component</strong></span>: This is a reusable component that can be added to any actor</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Scene Component</strong></span>: This is a component with scene transform and can be attached to other scene components</li></ul></div><p>In this example, we will use the <span class="strong"><strong>Actor</strong></span> class as our parent because we want to place it in the level and spawn at runtime. So choose <span class="strong"><strong>Actor</strong></span> class and Unreal will create and place your new Blueprint in <span class="strong"><strong>Content Browser</strong></span>. Double-click on your newly created Blueprint and this will open the Blueprint editor. By default, it should open the <span class="strong"><strong>Viewport</strong></span> tab but if it doesn't then simply select the <span class="strong"><strong>Viewport</strong></span> tab. This is where you can see and manipulate all of your components.</p><p>Now we need a component that will spin when this Blueprint is spawned. On the <span class="strong"><strong>Components</strong></span> tab, click <span class="strong"><strong>Add Component</strong></span> and select <span class="strong"><strong>Static Mesh</strong></span> component. After you add the component, rename it to <span class="strong"><strong>Mesh Component</strong></span> (you can choose whatever name you want but, for this example, let's choose that name) and note how the <span class="strong"><strong>Details</strong></span> panel has been populated with <span class="strong"><strong>Static Mesh</strong></span> properties.</p><p>In the <span class="strong"><strong>Details</strong></span> panel, you can find the section that corresponds to your component type where you can assign the asset to use.</p><p>But, in this example, instead of <a id="id316" class="indexterm"/>directly assigning a mesh in the <span class="strong"><strong>Components</strong></span> tab, we <a id="id317" class="indexterm"/> create a <span class="strong"><strong>Static Mesh</strong></span> variable and use that to assign the mesh in the graph. This way, we can change the mesh without opening the Blueprint editor.</p><p>In the <span class="strong"><strong>My Blueprints</strong></span> tab, create a new variable and set the type to <span class="strong"><strong>Static Mesh</strong></span> (make sure to select <span class="strong"><strong>reference</strong></span>).</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip21"/>Tip</h3><p>In versions before Unreal Engine 4.9, you can search for <span class="strong"><strong>Static Mesh</strong></span> and simply select the reference. There was no additional options to select before 4.9.</p></div></div><p>After that, rename that variable to <span class="strong"><strong>My Mesh</strong></span>. Since this variable is used to assign the asset to use with our <span class="strong"><strong>Static Mesh</strong></span> component, let's expose this variable so that we can change it in the <span class="strong"><strong>Details</strong></span> panel after placing it in world. To expose this variable, select it and enable <span class="strong"><strong>Editable</strong></span> in the <span class="strong"><strong>Details</strong></span> panel inside the Blueprint editor. After making it editable, compile the Blueprint (shortcut key: <span class="emphasis"><em>F7</em></span>) and you will be able to assign a default mesh for the <span class="strong"><strong>My Mesh</strong></span> variable. For this example, let's add a simple cube <span class="strong"><strong>Static Mesh</strong></span>.</p><p>Now that our variable is set, we can assign it to our <span class="strong"><strong>Static Mesh</strong></span> component. Since we know that <span class="strong"><strong>Construction Graph</strong></span> is executed every time this Blueprint is initialized and whenever a variable or property is changed, that is where we are going to assign the mesh for our <span class="strong"><strong>Static Mesh</strong></span> component. So, open the <span class="strong"><strong>Construction Graph</strong></span> and:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Right-click on the graph editor and search for the <span class="strong"><strong>Get Mesh</strong></span> component.</li><li class="listitem" style="list-style-type: disc">Select <span class="strong"><strong>Get Mesh</strong></span> component from the context menu.</li><li class="listitem" style="list-style-type: disc">Click and drag from the output pin and release it. You will now see a new context menu and, in that resulting menu, search for <span class="strong"><strong>Set Static Mesh</strong></span> and select it.</li><li class="listitem" style="list-style-type: disc">Right-click again on graph editor and search for <span class="strong"><strong>Get My Mesh</strong></span>.</li><li class="listitem" style="list-style-type: disc">Select <span class="strong"><strong>Get My Mesh</strong></span> and connect the output pin to the input (<span class="strong"><strong>New Mesh</strong></span>) of the <span class="strong"><strong>Set Static Mesh</strong></span> Blueprint node.</li><li class="listitem" style="list-style-type: disc">And, finally, connect the execution pin of <span class="strong"><strong>Construction Script</strong></span> to <span class="strong"><strong>Set Static Mesh Blueprint</strong></span> node and press <span class="strong"><strong>Compile</strong></span> (shortcut key: <span class="emphasis"><em>F7</em></span>).</li></ul></div><p>If you check the <span class="strong"><strong>Viewport</strong></span> tab <a id="id318" class="indexterm"/>after compiling, you will see your new mesh there. From this point, feel free to drag this Blueprint to the world and in the <span class="strong"><strong>Details</strong></span> panel you can change <span class="strong"><strong>My Mesh</strong></span> to any other <span class="strong"><strong>Static Mesh</strong></span>.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip22"/>Tip</h3><p>Press <span class="emphasis"><em>Ctrl</em></span>+<span class="emphasis"><em>E</em></span> to open the associated editor of the object you have selected in world.</p></div></div></div><div class="section" title="Spinning static mesh"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec66"/>Spinning static mesh</h2></div></div></div><p>In Blueprint editor, there are a couple of ways to rotate a mesh and in this section we will look into the simplest way, which is using a <span class="strong"><strong>Rotate Movement</strong></span> component.</p><p>Open the Blueprint if you have<a id="id319" class="indexterm"/> closed it and add a new component called <span class="strong"><strong>Rotating Movement</strong></span>. This component will make this Actor continuously rotate at a given rotation rate optionally around a specified point. This component has three main parameters that can be changed in the Blueprint graph. They are:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Rotation Rate</strong></span>: The speed at which this will update the <span class="strong"><strong>Roll</strong></span>/<span class="strong"><strong>Pitch</strong></span>/<span class="strong"><strong>Yaw</strong></span> axis.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Pivot Translation</strong></span>: The pivot point at which we rotate. If set to zero then we rotate around the object's origin.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Rotation in Local Space</strong></span>: Whether rotation is applied in local space or world space.</li></ul></div><p>You can create two new variables (<span class="strong"><strong>Rotator</strong></span> and <span class="strong"><strong>Vector</strong></span> variables) and make them editable so you can change it in the <span class="strong"><strong>Details</strong></span> panel in world. The final graph should look like this:</p><div class="mediaobject"><img src="graphics/B03950_06_35.jpg" alt="Spinning static mesh"/></div></div></div>
<div class="section" title="Destroying our Blueprint Actor after some seconds"><div class="titlepage"><div><div><h1 class="title"><a id="ch06lvl1sec34"/>Destroying our Blueprint Actor after some seconds</h1></div></div></div><p>Once we place or<a id="id320" class="indexterm"/> spawn this Actor in world we will destroy this actor with a particle effect and sound. To do that:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Create a new variable (<code class="literal">float</code>) and name it <span class="strong"><strong>DestroyAfter</strong></span>. Let's give it a default value of five seconds.</li><li class="listitem" style="list-style-type: disc">Go to <span class="strong"><strong>Event Graph</strong></span> and add a new event called <span class="strong"><strong>Event BeginPlay</strong></span>. This node is immediately executed when the game starts or when the actor is spawned in the game.</li><li class="listitem" style="list-style-type: disc">Right-click on the graph editor and search for <span class="strong"><strong>Delay</strong></span> and add it. Connect <span class="strong"><strong>Event BeginPlay</strong></span> to the <span class="strong"><strong>Delay</strong></span> node. This node is used to call an action after a number of specified seconds.</li><li class="listitem" style="list-style-type: disc">The <span class="strong"><strong>Delay</strong></span> node takes a <code class="literal">float</code> value, which is used for the duration. After the duration runs out, execution is continued to the next action. We will connect our <span class="strong"><strong>DestroyAfter</strong></span> variable to the duration of <span class="strong"><strong>Delay</strong></span>.</li><li class="listitem" style="list-style-type: disc">Right-click on the graph and search for <span class="strong"><strong>Spawn Emitter At Location</strong></span>. This node will spawn the given particle effect at the specified location and rotation. Connect <span class="strong"><strong>Delay</strong></span> to this node and set a particle effect by assigning it in the <span class="strong"><strong>Emitter Template</strong></span>. To set the location, right-click on the graph and search for <span class="strong"><strong>GetActorLocation</strong></span> and connect it to <span class="strong"><strong>Location pin</strong></span>.</li><li class="listitem" style="list-style-type: disc">Right-click on the graph and search for <span class="strong"><strong>Spawn Sound At Location</strong></span>. This node will spawn and play a sound at the given location. Connect <span class="strong"><strong>Spawn Emitter</strong></span> node to this one.</li><li class="listitem" style="list-style-type: disc">And, finally, to destroy this actor, right-click on the graph editor and search for <span class="strong"><strong>DestroyActor</strong></span> and connect it to <span class="strong"><strong>Spawn Sound</strong></span> node.</li></ul></div><p>The final graph should look like this:</p><div class="mediaobject"><img src="graphics/B03950_06_36.jpg" alt="Destroying our Blueprint Actor after some seconds"/></div><p>Now, when you place this actor in world and start the game you will see it spin and, after five seconds (or the value you used in <span class="strong"><strong>Destroy After</strong></span>), this actor will be destroyed after spawning the particle effect and sound.</p></div>
<div class="section" title="Spawning our Blueprint class in Level Blueprint"><div class="titlepage"><div><div><h1 class="title"><a id="ch06lvl1sec35"/>Spawning our Blueprint class in Level Blueprint</h1></div></div></div><p>We will now see how <a id="id321" class="indexterm"/>we can spawn this Blueprint Actor in world while the game is running, instead of directly placing when editing.</p><p>Before we continue we <a id="id322" class="indexterm"/>will make a change to the <span class="strong"><strong>DestroyAfter</strong></span> variable in our spinning Blueprint Actor. Open our spinning actor's Blueprint editor and, in <span class="strong"><strong>Variables</strong></span>, select the <span class="strong"><strong>DestroyAfter</strong></span> variable and, in the <span class="strong"><strong>Details</strong></span> panel, enable the <span class="strong"><strong>Expose On Spawn</strong></span> setting.</p><div class="mediaobject"><img src="graphics/B03950_06_37.jpg" alt="Spawning our Blueprint class in Level Blueprint"/></div><p>This setting means this variable will be exposed in the <span class="strong"><strong>Spawn Actor</strong></span> node.</p><p>Open your level and, on the toolbar, click the Blueprints button and select <span class="strong"><strong>Open Level</strong></span> Blueprint. In <span class="strong"><strong>Level Blueprint</strong></span> perform the following steps:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Right-click on the graph and search for <span class="strong"><strong>Event BeginPlay</strong></span> and add it.</li><li class="listitem" style="list-style-type: disc">Right-click on the graph and search for <span class="strong"><strong>Spawn Actor</strong></span> from <span class="strong"><strong>Class</strong></span> and add it. This node will spawn the given actor class at the specified location, rotation and scale.</li><li class="listitem" style="list-style-type: disc">In the class pin set the <a id="id323" class="indexterm"/>class to our <span class="strong"><strong>Rotating Blueprint</strong></span> Actor. Note how the <span class="strong"><strong>Destroy After</strong></span> variable is now exposed to <span class="strong"><strong>Spawn</strong></span> node. You can now adjust that value from that <span class="strong"><strong>Spawn</strong></span> node.</li><li class="listitem" style="list-style-type: disc">Drag from the <span class="strong"><strong>Spawn Transform</strong></span> node and release the left mouse button. From the resulting context<a id="id324" class="indexterm"/> menu, select <span class="strong"><strong>Make Transform</strong></span>. The transform node contains 3D transformation including translation, rotation, and scale. For this example, let's set the <span class="strong"><strong>Location</strong></span> to <span class="strong"><strong>0,0,300</strong></span> so that is this Actor will be spawned 300 units above the ground.</li></ul></div><p>The resulting graph should look like this:</p><div class="mediaobject"><img src="graphics/B03950_06_38.jpg" alt="Spawning our Blueprint class in Level Blueprint"/></div><p>If you play (<span class="emphasis"><em>Alt</em></span>+<span class="emphasis"><em>P</em></span>) or simulate (<span class="emphasis"><em>Alt</em></span>+<span class="emphasis"><em>S</em></span>) you will see this rotating Actor spawn <span class="strong"><strong>300</strong></span> units above the ground and spinning.</p></div>
<div class="section" title="Summary"><div class="titlepage"><div><div><h1 class="title"><a id="ch06lvl1sec36"/>Summary</h1></div></div></div><p>In this chapter, we have learned what components are and how we can use them to define a Blueprint Actor. We also learned about Blueprint nodes and how you can create them. From what you have learned in this chapter, you can take it even further by:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Spawning this actor when overlapping a trigger volume placed in the level</li><li class="listitem" style="list-style-type: disc">Playing a particle and sound effect when spawning this Blueprint</li><li class="listitem" style="list-style-type: disc">Applying damage to a player if the player is in a certain radius</li></ul></div><p>In the next chapter, we will use Matinee to create a cut scene.</p></div></body></html>