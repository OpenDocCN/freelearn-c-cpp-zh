<html><head></head><body><div class="chapter" title="Chapter&#xA0;5.&#xA0;Creating GUIs"><div class="titlepage"><div><div><h1 class="title"><a id="ch05"/>Chapter 5. Creating GUIs</h1></div></div></div><p>In this chapter, we're going to create various UI parts. The following topics will be covered in this chapter:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Creating menus</li><li class="listitem" style="list-style-type: disc">Creating buttons</li><li class="listitem" style="list-style-type: disc">Creating checkboxes</li><li class="listitem" style="list-style-type: disc">Creating loading bar</li><li class="listitem" style="list-style-type: disc">Creating sliders</li><li class="listitem" style="list-style-type: disc">Creating text fields</li><li class="listitem" style="list-style-type: disc">Creating scroll views</li><li class="listitem" style="list-style-type: disc">Creating page views</li><li class="listitem" style="list-style-type: disc">Creating list views</li></ul></div><div class="section" title="Introduction"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec43"/>Introduction</h1></div></div></div><p>Games have a lot of GUI parts, for example, there are menus, buttons, checkboxes, loading bars, and so on. We cannot make our game without these parts. Further, these are a little different from the node we've discussed until now. In this chapter we will see how to create various GUI parts such as menus, sliders, text fields etc. for a game.</p></div></div>
<div class="section" title="Creating menus"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec44"/>Creating menus</h1></div></div></div><p>In this recipe, we will <a id="id228" class="indexterm"/>create a menu. A menu has various buttons such as a start button and a pause button. A Menu is a very important component for any game and they are really useful too. The steps to use a menu are little complex. In this recipe, we will have a glance over creating menus to understand its complexity and to get used to them.</p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec111"/>Getting ready</h2></div></div></div><p>We prepared the following image as a button image and added them to the <code class="literal">Resources/res</code> folder in our project. We will use the following image of the button to use it as menu:</p><div class="mediaobject"><img src="graphics/0561_05_01.jpg" alt="Getting ready"/></div></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec112"/>How to do it...</h2></div></div></div><p>Firstly, we will create a<a id="id229" class="indexterm"/> simple menu that has one item for a button. We will use the <code class="literal">item1.png</code> file as the button image. Create the menu by using the code here.</p><div class="informalexample"><pre class="programlisting">auto normalItem = Sprite::create("res/item1.png");
auto selectedItem = Sprite::create("res/item1.png");
selectedItem-&gt;setColor(Color3B::GRAY);
auto item = MenuItemSprite::create(normalItem, selectedItem,
[](Ref* sender){
    CCLOG("tapped item");
});
auto size = Director::getInstance()-&gt;getVisibleSize();
item-&gt;setPosition(size/2);
auto menu = Menu::create(item, nullptr);
menu-&gt;setPosition(Vec2());
this-&gt;addChild(menu);</pre></div><p>The execution result of this code is shown in the following image:</p><div class="mediaobject"><img src="graphics/0561_05_02.jpg" alt="How to do it..."/></div><p>Further, you can see the <code class="literal">tapped item</code> text in the log after tapping the menu item. You will notice that the button becomes a little dark when you tap it.</p></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec113"/>How it works...</h2></div></div></div><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Create a<a id="id230" class="indexterm"/> sprite of the normal status when the button is not operated.</li><li class="listitem">Create a sprite of the selected status when the button is pressed. In this case, we used the same images for both the normal status and the selected status, but players could not understand the change in status when they tapped the button. That's why we changed the selected image to a slightly darker image by using the <code class="literal">setColor</code> method.</li><li class="listitem">Create an instance of the <code class="literal">MenuItemSprite</code> class by using these two sprites. The third argument specifies the lambda expression to be processed when the button is pressed.</li></ol></div><p>This time, we created only one button in the menu, but we can add more buttons in the menu. To do so, we can enumerate several items in the <code class="literal">Menu::create</code> method and specify <code class="literal">nullptr</code> at the end. To add multiple buttons in the menu, use the following code:</p><div class="informalexample"><pre class="programlisting">auto menu = Menu::create(item1, item2, item3, nullptr);</pre></div><p>In addition, it is possible to add an item by using the <code class="literal">addChild</code> method of the menu instance.</p><div class="informalexample"><pre class="programlisting">menu-&gt;addChild(item);</pre></div><p>If the button is pressed, the lambda expression process that you specify when you create an <a id="id231" class="indexterm"/>instance of <code class="literal">MenuItemSprite</code> starts running. The argument is passed an instance of the <code class="literal">MenuItemSprite</code> that was pressed.</p></div><div class="section" title="There's more..."><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec114"/>There's more...</h2></div></div></div><p>It is also possible to automatically align multiple buttons. We created three items in the <code class="literal">Resources/res</code> folder. These are named <code class="literal">item1.png</code>, <code class="literal">item2.png</code>, and <code class="literal">item3.png</code>. You can create three buttons and use the following code to align these buttons vertically in the center of the screen:</p><div class="informalexample"><pre class="programlisting">Vector&lt;MenuItem*&gt; menuItems;
for (int i=1; i&lt;=3; i++) {
    std::string name = StringUtils::format("res/item%d.png", i);
    auto normalItem = Sprite::create(name);
    auto selectedItem = Sprite::create(name);
    selectedItem-&gt;setColor(Color3B::GRAY);
    auto item = MenuItemSprite::create(normalItem, selectedItem,
[](Ref* sender){
        auto node = dynamic_cast&lt;Node*&gt;(sender);
        if (node!=nullptr) {
            CCLOG("tapped item %d", node-&gt;getTag());
        }
    });
    item-&gt;setTag(i);
    menuItems.pushBack(item);
}
auto size = Director::getInstance()-&gt;getVisibleSize();
auto menu = Menu::createWithArray(menuItems);
menu-&gt;setPosition(size/2);
menu-&gt;alignItemsVertically();
this-&gt;addChild(menu);</pre></div><div class="mediaobject"><img src="graphics/0561_05_03.jpg" alt="There's more..."/></div><p>If you want to align these items horizontally, you can use the following code:</p><div class="informalexample"><pre class="programlisting">menu-&gt;alignItemsHorizontally();</pre></div><p>Until now, the alignment of intervals has been adjusted automatically; however, if you want to specify the padding, you can use another method.</p><p>The following code <a id="id232" class="indexterm"/>will specify the intervals side by side in a vertical manner:</p><div class="informalexample"><pre class="programlisting">menu-&gt;alignItemsVerticallyWithPadding(20.0f);</pre></div><p>The following code will specify the intervals side by side in a horizontal manner:</p><div class="informalexample"><pre class="programlisting">menu-&gt;alignItemsHorizontallyWithPadding(20.0f);</pre></div></div></div>
<div class="section" title="Creating buttons"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec45"/>Creating buttons</h1></div></div></div><p>In this recipe, we will explain <a id="id233" class="indexterm"/>how to create buttons. Before the <code class="literal">Button</code> class was released, we created a button by using the <code class="literal">Menu</code> class that was introduced in the previous recipe. Due to the <code class="literal">Button</code> class, it has become possible to finely control the button press.</p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec115"/>Getting ready</h2></div></div></div><p>To use the <code class="literal">Button</code> class and other GUI parts mentioned in this chapter, you must include the <code class="literal">CocosGUI.h</code> file. Let's add the following line of code in <code class="literal">HelloWorldScene.cpp</code>:</p><div class="informalexample"><pre class="programlisting">#include "ui/CocosGUI.h"</pre></div></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec116"/>How to do it...</h2></div></div></div><p>Let's create a button using the<a id="id234" class="indexterm"/> <code class="literal">Button</code> class. Firstly, you will generate a button instance by using <code class="literal">item1.png</code> image that was used in the previous recipe. We will also specify the callback function as a lambda expression by using the <code class="literal">addEventListener</code> method when the button is pressed. You can create the button by using the following code:</p><div class="informalexample"><pre class="programlisting">auto size = Director::getInstance()-&gt;getVisibleSize();
auto button = ui::Button::create("res/item1.png");
button-&gt;setPosition(size/2);
this-&gt;addChild(button);
button-&gt; addTouchEventListener(
    [](Ref* sender, ui::Widget::TouchEventType type){
        switch (type) {
            case ui::Widget::TouchEventType::BEGAN:
                CCLOG("touch began");
                break;
            case ui::Widget::TouchEventType::MOVED:
                CCLOG("touch moved");
                break;
            case ui::Widget::TouchEventType::ENDED:
                CCLOG("touch ended");
                break;
            case ui::Widget::TouchEventType::CANCELED:
                CCLOG("touch canceled");
                break;

            default:
                break;
        }
    });</pre></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec117"/>How it works...</h2></div></div></div><p>You can now run this project and push the button. Further, you can move your touch position and release your finger. Thus, you will see that the touch status of the button will change in the log. Let's take a look at it step-by-step.</p><p>When you use the <code class="literal">Button</code> class and other GUI parts mentioned in this chapter, you have to include the <code class="literal">CocosGUI.h</code> file as this file defines the necessary classes. Further, please note that these classes have their own namespace such as "<code class="literal">cocos2d::ui</code>."</p><p>It is easy to create an instance of the <code class="literal">Button</code> class. You only need to specify the sprite file name. Further, you can create a callback function as a lambda expression by using the <code class="literal">addTouchEventListener</code> method. This function has two parameters. The first parameter is a button instance that was pressed. The second parameter is the touch status. Touch statuses are of four types. <code class="literal">TouchEventType::BEGAN</code> is the status at the moment that the button is pressed. <code class="literal">TouchEventType::MOVE</code> is the event type that occurs when you move your finger after<a id="id235" class="indexterm"/> you press it. <code class="literal">TouchEventType::ENDED</code> is the event that occurs at the moment you release your finger from the screen. <code class="literal">TouchEventType::CANCELED</code> is the event that occurs when you release your finger outside of the button.</p></div><div class="section" title="There's more..."><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec118"/>There's more...</h2></div></div></div><p>It is possible to create a button instance by specifying the selected status image and the disabled status image. Create this button by using the code here.</p><div class="informalexample"><pre class="programlisting">auto button = ui::Button::create(
    "res/normal.png",
    "res/selected.png",
    "res/disabled.png");</pre></div><p>Unlike the <code class="literal">MenuItemSprite</code> class, you won't be able to specify the selection status by changing the normal image color that was set using the <code class="literal">setColor</code> method. You have to prepare the images as selected image and disabled image.</p></div></div>
<div class="section" title="Creating checkboxes"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec46"/>Creating checkboxes</h1></div></div></div><p>In this recipe, we will<a id="id236" class="indexterm"/> create a checkbox. In Cocos2d-x version 2, a checkbox was created by using the <code class="literal">MenuItemToggle</code> class. However, doing so was quite cumbersome. In Cocos2d-x version 3, we can create a checkbox by using the <code class="literal">Checkbox</code> class that can be used in Cocos Studio.</p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec119"/>Getting ready</h2></div></div></div><p>So let's prepare the images of the checkbox before you start. Here, we have prepared the images of the required minimum <code class="literal">On</code> and <code class="literal">Off</code> status. Please add these images to the <code class="literal">Resouces/res</code> folder.</p><p>The <code class="literal">Off</code> status image will look something like this:</p><div class="mediaobject"><img src="graphics/0561_05_04.jpg" alt="Getting ready"/></div><p>The <code class="literal">On</code> status image will look something like this:</p><div class="mediaobject"><img src="graphics/0561_05_05.jpg" alt="Getting ready"/></div></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec120"/>How to do it...</h2></div></div></div><p>Let's create a checkbox <a id="id237" class="indexterm"/>by using the <code class="literal">Checkbox</code> class. First, you will generate a checkbox instance by using the <code class="literal">check_box_normal.png</code> image and the <code class="literal">check_box_active.png</code> image. You will also specify the callback function as a lambda expression by using the <code class="literal">addEventListener</code> method when the checkbox status is changed. Create the checkbox by using the following code:</p><div class="informalexample"><pre class="programlisting">auto size = Director::getInstance()-&gt;getVisibleSize();
auto checkbox = ui::CheckBox::create(
    "res/check_box_normal.png",
    "res/check_box_active.png");
checkbox-&gt;setPosition(size/2);
this-&gt;addChild(checkbox);
checkbox-&gt;addEventListener([](Ref* sender, ui::CheckBox::EventType type){
    switch (type) {
        case ui::CheckBox::EventType::SELECTED:
            CCLOG("selected checkbox");
            break;
        case ui::CheckBox::EventType::UNSELECTED:
            CCLOG("unselected checkbox");
            break;
        default:
            break;
    }
});</pre></div><p>The following figure shows that the checkbox was selected by running the preceding code.</p><div class="mediaobject"><img src="graphics/0561_05_06.jpg" alt="How to do it..."/></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec121"/>How it works...</h2></div></div></div><p>It generates the <a id="id238" class="indexterm"/>instance of a checkbox by specifying the <code class="literal">On</code> and <code class="literal">Off</code> images. Further, the callback function was specified in the same way as the <code class="literal">Button</code> class was in the previous recipe. A checkbox has two <code class="literal">EventType</code> options, namely <code class="literal">ui::Checkbox::EventType::SELECTED</code> and<code class="literal"> ui::Checkbox::EventType::UNSELECTED.</code>
</p><p>You can also get the status of the checkbox by using the <code class="literal">isSelected</code> method.</p><div class="informalexample"><pre class="programlisting">If (checkbox-&gt;isSelected()) {
    CCLOG("selected checkbox");
} else {
  CCLOG("unselected checkbox");
}</pre></div><p>You can also change the status of the checkbox by using the <code class="literal">setSelected</code> method.</p><div class="informalexample"><pre class="programlisting">checkbox-&gt;setSelected(true);</pre></div></div><div class="section" title="There's more..."><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec122"/>There's more...</h2></div></div></div><p>In addition, it is <a id="id239" class="indexterm"/>possible to further specify the image of a more detailed checkbox status. The <code class="literal">Checkbox::create</code> method has five parameters. These parameters are as follows:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Unselected image</li><li class="listitem" style="list-style-type: disc">Unselected and pushing image</li><li class="listitem" style="list-style-type: disc">Selected image</li><li class="listitem" style="list-style-type: disc">Unselected and disabled image</li><li class="listitem" style="list-style-type: disc">Selected and disabled image</li></ul></div><p>Here's how to specify the images of these five statuses:</p><div class="informalexample"><pre class="programlisting">auto checkbox = ui::CheckBox::create(
    "res/check_box_normal.png",
    "res/check_box_normal_press.png",
    "res/check_box_active.png",
    "res/check_box_normal_disable.png",
    "res/check_box_active_disable.png");</pre></div><p>To disable the checkbox, use the following code:</p><div class="informalexample"><pre class="programlisting">checkbox-&gt;setEnabled(false);</pre></div></div></div>
<div class="section" title="Creating loading bars"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec47"/>Creating loading bars</h1></div></div></div><p>When you are consuming a process <a id="id240" class="indexterm"/>or downloading something, you can indicate that it is not frozen by showing its progress to the user. To show such progresses, Cocos2d-x has a <code class="literal">LoadingBar</code> class. In this recipe, you will learn how to create and show the loading bars.</p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec123"/>Getting ready</h2></div></div></div><p>Firstly, we have to prepare an image for the progress bar. This image is called <code class="literal">loadingbar.png</code>. You will add this image in the <code class="literal">Resouces/res</code> folder.</p><div class="mediaobject"><img src="graphics/0561_05_07.jpg" alt="Getting ready"/></div></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec124"/>How to do it...</h2></div></div></div><p>It generates an instance<a id="id241" class="indexterm"/> of the loading bar by specifying the image of the loading bar. Further, it is set to 0% by using the <code class="literal">setPercent</code> method. Finally, in order to advance the bar from 0% to 100% by 1% at 0.1 s, we will use the <code class="literal">schedule</code> method as follows:</p><div class="informalexample"><pre class="programlisting">auto loadingbar = ui::LoadingBar::create("res/loadingbar.png");
loadingbar-&gt;setPosition(size/2);
loadingbar-&gt;setPercent(0);
this-&gt;addChild(loadingbar);
this-&gt;schedule([=](float delta){
    float percent = loadingbar-&gt;getPercent();
    percent++;
    loadingbar-&gt;setPercent(percent);
    if (percent&gt;=100.0f) {
        this-&gt;unschedule("updateLoadingBar");
    }
}, 0.1f, "updateLoadingBar");</pre></div><p>The following figure is an image of the loading bar at 100%.</p><div class="mediaobject"><img src="graphics/0561_05_08.jpg" alt="How to do it..."/></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec125"/>How it works...</h2></div></div></div><p>You have to specify <a id="id242" class="indexterm"/>one image as the loading bar image to create an instance of the <code class="literal">LoadingBar</code> class. You can set the percentage of the loading bar by using the <code class="literal">setPercent</code> method. Further, you can get its percentage by using the <code class="literal">getPercent</code> method.</p></div><div class="section" title="There's more..."><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec126"/>There's more...</h2></div></div></div><p>By default, the loading bar will progress toward the right. You can change this direction by using the <code class="literal">setDirection</code> method.</p><div class="informalexample"><pre class="programlisting">loadingbar-&gt;setDirection(ui::LoadingBar::Direction::RIGHT);</pre></div><p>When you set the <code class="literal">ui::LoadingBar::Direction::RIGHT</code> value, the start position of the loading bar is the right edge. Then, the loading bar will progress in the left direction.</p></div></div>
<div class="section" title="Creating sliders"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec48"/>Creating sliders</h1></div></div></div><p>In this recipe, we will <a id="id243" class="indexterm"/>explain the slider. The slider will be used for tasks such as changing the volume of the sound or music. Cocos2d-x has a <code class="literal">Slider</code> class for it. If we use this class, we can create a slider easily.</p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec127"/>Getting ready</h2></div></div></div><p>So, let's prepare the images of the slider before we start. Please add these images in the <code class="literal">Resouces/res</code> folder.</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">sliderTrack.png</code>: Background of the slider<div class="mediaobject"><img src="graphics/0561_05_09.jpg" alt="Getting ready"/></div></li><li class="listitem" style="list-style-type: disc"><code class="literal">sliderThumb.png</code>: Image to move the slider<div class="mediaobject"><img src="graphics/0561_05_10.jpg" alt="Getting ready"/></div></li></ul></div></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec128"/>How to do it...</h2></div></div></div><p>Let's create a slider <a id="id244" class="indexterm"/>by using the <code class="literal">Slider</code> class. First, you will generate a slider instance by using the <code class="literal">sliderTrack.png</code> image and the <code class="literal">sliderThumb.png</code> image. You will also specify the callback function as a lambda expression by using the <code class="literal">addEventListener</code> method when the slider value is changed.</p><div class="informalexample"><pre class="programlisting">auto slider = ui::Slider::create("res/sliderTrack.png",
"res/sliderThumb.png");
slider-&gt;setPosition(size/2);
this-&gt;addChild(slider);
slider-&gt;addEventListener([](Ref* sender, ui::Slider::EventType
type){
    auto slider = dynamic_cast&lt;ui::Slider*&gt;(sender);
    if (type==ui::Slider::EventType::ON_PERCENTAGE_CHANGED) {
        CCLOG("percentage = %d", slider-&gt;getPercent());
    }
});</pre></div><p>The following figure shows the result of the preceding code.</p><div class="mediaobject"><img src="graphics/0561_05_11.jpg" alt="How to do it..."/></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec129"/>How it works...</h2></div></div></div><p>You have to specify<a id="id245" class="indexterm"/> two images as the slider's bar image and the slider's thumb image to create an instance of the <code class="literal">Slider</code> class. The callback function was specified in the same way as the <code class="literal">Button</code> class was in the previous recipe. The slider has only one <code class="literal">EventType</code> as <code class="literal">ui::Slider::EventType::ON_PERCENTAGE_CHANGED</code>. That's why the status is the only changing value. You can get the percentage shown on the slider by using the <code class="literal">getPercent</code> method.</p></div><div class="section" title="There's more..."><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec130"/>There's more...</h2></div></div></div><p>If you want to see the progress on the slider, you can use the <code class="literal">loadProgressBarTexture</code> method. We will require an image for the progress bar. The following image shows the progress bar image. Let's add it to the <code class="literal">Resources/res</code> folder.</p><div class="mediaobject"><img src="graphics/0561_05_12.jpg" alt="There's more..."/></div><p>Then, we use the <code class="literal">loadProgressbarTexture</code> method by specifying this image.</p><div class="informalexample"><pre class="programlisting">slider-&gt;loadProgressBarTexture("res/sliderProgress.png");</pre></div><p>Let's run the code that has been modified so far. You will see it with the color on the left side of the bar as shown in the following screenshot:</p><div class="mediaobject"><img src="graphics/0561_05_13.jpg" alt="There's more..."/></div></div></div>
<div class="section" title="Creating text fields"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec49"/>Creating text fields</h1></div></div></div><p>You may want to set a <a id="id246" class="indexterm"/>nickname in your game. To set nicknames or to get the player's input text, you can use the <code class="literal">TextField</code> class. In this recipe, we will learn about a simple <code class="literal">TextField</code> sample and how to add a textfield in a game.</p><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec131"/>How to do it...</h2></div></div></div><p>You will create a text field by specifying the placeholder text, font name, and font size. Then, you set a callback function by using <code class="literal">addEventListener</code>. In the callback function, you can get the text that the player input in the <code class="literal">textField</code>. Create the <code class="literal">textField</code> by using the following code:</p><div class="informalexample"><pre class="programlisting">auto textField = ui::TextField::create("Enter your name", "Arial", 30);
textField-&gt;setPosition(Vec2(size.width/2, size.height*0.75f));
this-&gt;addChild(textField);
textField-&gt;addEventListener([](Ref* sender,
ui::TextField::EventType type){
    auto textField = dynamic_cast&lt;ui::TextField*&gt;(sender);
    switch (type) {
        case ui::TextField::EventType::ATTACH_WITH_IME:
                CCLOG("displayed keyboard");
                break;
        case ui::TextField::EventType::DETACH_WITH_IME:
                CCLOG("dismissed keyboard");
                break;
          case ui::TextField::EventType::INSERT_TEXT:
                CCLOG("inserted text : %s",
                textField-&gt;getString().c_str());
                break;
          case ui::TextField::EventType::DELETE_BACKWARD:
                CCLOG("deleted backward");
                break;
          default:
                break;
    }
});</pre></div><p>Let's run this code. You<a id="id247" class="indexterm"/> will see it within the placeholder text, and it will show the keyboard automatically as shown in the following screenshot:</p><div class="mediaobject"><img src="graphics/0561_05_14.jpg" alt="How to do it..."/></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec132"/>How it works...</h2></div></div></div><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">You create an instance of the <code class="literal">TextField</code> class. The first argument is the placeholder string. The second argument is the font name. You can specify only a true type font. The third argument is the font size.</li><li class="listitem">You can get the <a id="id248" class="indexterm"/>event by using the <code class="literal">addEventListener</code> method. The following list provides the event names and their descriptions:</li></ol></div><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Event Name</p>
</th><th style="text-align: left" valign="bottom">
<p>Description</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">ATTACH_WITH_IME</code>
</p>
</td><td style="text-align: left" valign="top">
<p>The keyboard will appear.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">DETACH_WITH_IME</code>
</p>
</td><td style="text-align: left" valign="top">
<p>The keyboard will disappear.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">INSERT_TEXT</code>
</p>
</td><td style="text-align: left" valign="top">
<p>The text was input. You can get the string by using the <code class="literal">getString</code> method.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">DELETE_BACKWARD</code>
</p>
</td><td style="text-align: left" valign="top">
<p>The text was deleted.</p>
</td></tr></tbody></table></div></div><div class="section" title="There's more..."><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec133"/>There's more...</h2></div></div></div><p>When a player enters a password, you have to hide it by using the <code class="literal">setPasswordEnable</code> method.</p><div class="informalexample"><pre class="programlisting">textField-&gt;setPasswordEnabled(true);</pre></div><p>Let's run the code that has been modified so far. You will see how to hide a password that you enter, as shown in the following screenshot:</p><div class="mediaobject"><img src="graphics/0561_05_15.jpg" alt="There's more..."/></div></div></div>
<div class="section" title="Creating scroll views"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec50"/>Creating scroll views</h1></div></div></div><p>When a huge map is displayed <a id="id249" class="indexterm"/>in your game, a scroll view is required. It can be scrolled by a swipe, and bounce at the edge of the area. In this recipe, we explain the <code class="literal">ScrollView</code> class of Cocos2d-x.</p><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec134"/>How to do it...</h2></div></div></div><p>Let's implement it right away. In this case, we doubled the size of <code class="literal">HelloWorld.png</code>. Further, we try to display this huge image in <code class="literal">ScrollView</code>. Create the scroll view by using the following code:</p><div class="informalexample"><pre class="programlisting">auto scrollView = ui::ScrollView::create();
scrollView-&gt;setPosition(Vec2());
scrollView-&gt;setDirection(ui::ScrollView::Direction::BOTH);
scrollView-&gt;setBounceEnabled(true);
this-&gt;addChild(scrollView);

auto sprite = Sprite::create("res/HelloWorld.png");
sprite-&gt;setScale(2.0f);
sprite-&gt;setPosition(sprite-&gt;getBoundingBox().size/2);
scrollView-&gt;addChild(sprite);
scrollView-&gt;setInnerContainerSize(sprite-&gt;getBoundingBox().size);
scrollView-&gt;setContentSize(sprite-&gt;getContentSize());</pre></div><p>Let's run this code. You will see the huge <code class="literal">HelloWorld.png</code> image. Further, you will see that you can scroll it by swiping.</p><div class="mediaobject"><img src="graphics/0561_05_16.jpg" alt="How to do it..."/></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec135"/>How it works...</h2></div></div></div><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">You create an<a id="id250" class="indexterm"/> instance of the <code class="literal">ScrollView</code> class by using the <code class="literal">create</code> method without arguments.</li><li class="listitem">You set the direction of the scroll view by using the <code class="literal">setDirection</code> method. In this case, we want to scroll up and down, and left and right, so you should set <code class="literal">ui::ScrollView::Direction::BOTH</code>. This implies that we can scroll in both the vertical and the horizontal directions. If you want to scroll just up and down, you set <code class="literal">ui::ScrollView::Direction::VERTICAL</code>. If you want to scroll just left and right, you set <code class="literal">ui::ScrollView::Direction::HORIZONTAL</code>.</li><li class="listitem">If you want to bounce when it is scrolled at the edge of the area, you should set <code class="literal">true</code> by using the <code class="literal">setBounceEnabled</code> method.</li><li class="listitem">You will provide the content to be displayed in the scroll view. Here, we have used <code class="literal">HelloWorld.png</code> that has been scaled twice.</li><li class="listitem">You have to specify the size of the content in the scroll view by using the <code class="literal">setInnerContainerSize</code> method. In this case, we specify double the size of <code class="literal">HelloWorld.png</code> in the <code class="literal">setInnerContainerSize</code> method</li><li class="listitem">You have to specify the size of the scroll view by using the <code class="literal">setContentSize</code> method. In this case, we specify the original size of <code class="literal">HelloWorld.png</code> by <a id="id251" class="indexterm"/>using the <code class="literal">setContentSize</code> method.</li></ol></div></div></div>
<div class="section" title="Creating page views"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec51"/>Creating page views</h1></div></div></div><p>A page view is similar to a<a id="id252" class="indexterm"/> scroll view, but it will be scrolled on a page-by-page basis. <code class="literal">PageView</code> is also a class in Cocos2d-x. In this recipe, we will explain how to use the <code class="literal">PageView</code> class.</p><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec136"/>How to do it...</h2></div></div></div><p>Let's immediately get it implemented. Here, we will arrange three images of <code class="literal">HelloWorld.png</code> side-by-side in the page view. Create the page view by using the following code:</p><div class="informalexample"><pre class="programlisting">auto pageView = ui::PageView::create();
pageView-&gt;setPosition(Vec2());
pageView-&gt;setContentSize(size);
this-&gt;addChild(pageView);

for (int i=0; i&lt;3; i++) {
    auto page = ui::Layout::create();
    page-&gt;setContentSize(pageView-&gt;getContentSize());

    auto sprite = Sprite::create("res/HelloWorld.png");
    sprite-&gt;setPosition(sprite-&gt;getContentSize()/2);
    page-&gt;addChild(sprite);
    pageView-&gt;insertPage(page, i);
}

pageView-&gt;addEventListener([](Ref* sender, ui::PageView::EventType type){
    if (type==ui::PageView::EventType::TURNING) {
        auto pageView = dynamic_cast&lt;ui::PageView*&gt;(sender);
        CCLOG("current page no =%zd",
        pageView-&gt;getCurPageIndex());
    }
});</pre></div><p>When you run this code, you will see one <code class="literal">HelloWorld.png</code>. You will see that you can move to the next page by using a swiping movement.</p></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec137"/>How it works...</h2></div></div></div><p>Create an instance <a id="id253" class="indexterm"/>of the <code class="literal">PageView</code> class by using the <code class="literal">create</code> method without arguments. Here, we set it as the same size as that of the screen.</p><p>Display three <code class="literal">HelloWorld.png</code> images side-by-side. You must use the <code class="literal">Layout</code> class to set the page layout in <code class="literal">PageView</code>.</p><p>Set the page size and add the image by using the <code class="literal">addChild</code> method.</p><p>Insert an instance of the <code class="literal">Layout</code> class to the page view by using the <code class="literal">insertPage</code> method. At this time, you specify the page number as the second argument.</p><p>Get the event when the page has changed, you use the <code class="literal">addEventListener</code> method. <code class="literal">PageView</code> has only one event, <code class="literal">PageView::EventType::TURNING</code>. You can get the current page number by using the <code class="literal">getCurPageIndex</code> method.</p></div></div>
<div class="section" title="Creating list views"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec52"/>Creating list views</h1></div></div></div><p>
<code class="literal">ListView</code> is a class in Cocos2d-x. It <a id="id254" class="indexterm"/>is like <code class="literal">UITableView</code> for iOS or <code class="literal">List View</code> for Android. <code class="literal">ListView</code> is useful for creating a lot of buttons as required in the case of setting a scene. In this recipe, we will explain how to use the <code class="literal">ListView</code> class.</p><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec138"/>How to do it...</h2></div></div></div><p>Here, we try to display <code class="literal">ListView</code> that has 20 buttons. Each button is identified with a number such as "<code class="literal">list item 10.</code>" In addition, we display the number of the button that you selected on the log when you tap any button. Create the list view by using the following code:</p><div class="informalexample"><pre class="programlisting">auto listView = ui::ListView::create();
listView-&gt;setPosition(Vec2(size.width/2 - 200, 0.0f));
listView-&gt;setDirection(ui::ListView::Direction::VERTICAL);
listView-&gt;setBounceEnabled(true);
listView-&gt;setContentSize(size);
this-&gt;addChild(listView);

for (int i=0; i&lt;20; i++) {
    auto layout = ui::Layout::create();
    layout-&gt;setContentSize(Size(400, 50));
    layout-&gt;setBackGroundColorType(ui::Layout::BackGroundColorType::SOLID);
    layout-&gt;setBackGroundColor(Color3B::WHITE);

    auto button = ui::Button::create();
    button-&gt;setPosition(layout-&gt;getContentSize()/2);
    std::string name = StringUtils::format("list item %d", i); 
    button-&gt;setTitleText(name);
    button-&gt;setTitleFontSize(30);
    button-&gt;setTitleColor(Color3B::BLACK);
    layout-&gt;addChild(button);
    listView-&gt;addChild(layout);
}

listView-&gt;addEventListener([](Ref* sender, ui::ListView::EventType 
type){
    auto listView = dynamic_cast&lt;ui::ListView*&gt;(sender);
    switch (type) {
        case ui::ListView::EventType::ON_SELECTED_ITEM_START:
            CCLOG("select item started");
            break;
        case ui::ListView::EventType::ON_SELECTED_ITEM_END:
            CCLOG("selected item : %zd", listView-&gt;getCurSelectedIndex());
            break;
        default: 
            break; 
    } 
});</pre></div><p>When you run this code, you <a id="id255" class="indexterm"/>will see some buttons. You will see that you can scroll it by swiping and you can get the number of the button you tapped.</p><div class="mediaobject"><img src="graphics/0561_05_17.jpg" alt="How to do it..."/></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec139"/>How it works...</h2></div></div></div><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Create an instance<a id="id256" class="indexterm"/> of the <code class="literal">ListView</code> class. It is possible to specify the scroll direction in the same way as <code class="literal">ScrollView</code>. Since we want to scroll only in the vertical direction, you specify <code class="literal">ui::ListView::Direction::VERTICAL</code>. Also, you can specify the bounce at the edge of the area by using the <code class="literal">setBounceEnabled</code> method.</li><li class="listitem">Create 20 buttons to display in the list view. You have to use the <code class="literal">Layout</code> class to display the content in the list view as in the case of <code class="literal">PageView</code>. You add an instance of the <code class="literal">Button</code> class to the instance of the <code class="literal">Layout</code> class.</li><li class="listitem">Get the event by using the <code class="literal">addEventListener</code> method. <code class="literal">ListView</code> has two events, namely <code class="literal">ON_SELECTED_ITEM_START</code> and <code class="literal">ON_SELECTED_ITEM_END</code>. When you touch the list view, <code class="literal">ON_SELECTED_ITEM_START</code> is fired. When you release the finger without moving it, <code class="literal">ON_SELECTED_ITEM_END</code> is fired. If you move your finger, <code class="literal">ON_SELECTED_ITEM_END</code> is not fired and it will be a scrolling process. You can get the button number by using the <code class="literal">getCurSelectedIndex</code> method.</li></ol></div></div></div></body></html>