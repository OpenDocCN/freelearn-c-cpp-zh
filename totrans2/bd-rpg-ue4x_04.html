<html><head></head><body><div><div><div><div><h1 class="title"><a id="ch04"/>Chapter 4. Pause Menu Framework</h1></div></div></div><p>At this point, we have created a basic combat engine for our game. We can now dive into out-of-combat operations such as the creation of a pause menu screen, where we will be able to view player stats and edit inventory.</p><p>In this chapter, we will create the first part of our menu system, which is to design and create a framework for a pause menu. We will cover the following topics in this chapter:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">UMG pause screen initial setup</li><li class="listitem" style="list-style-type: disc">UMG background color</li><li class="listitem" style="list-style-type: disc">UMG text</li><li class="listitem" style="list-style-type: disc">UMG buttons</li><li class="listitem" style="list-style-type: disc">UMG inventory submenu</li><li class="listitem" style="list-style-type: disc">UMG equipment submenu</li><li class="listitem" style="list-style-type: disc">Key binding</li><li class="listitem" style="list-style-type: disc">Button programming</li></ul></div><div><div><div><div><h1 class="title"><a id="ch04lvl1sec28"/>UMG pause screen initial setup</h1></div></div></div><p>For our<a id="id178" class="indexterm"/> pause screen, we will need to think about quite a few things regarding the design. As listed in the earlier chapter, the pause screen will give the ability to the player to view party members, equip and unequip<a id="id179" class="indexterm"/> equipment, use items, and so on. So we must design our pause screen with that sort of functionality in mind.</p><p>To design the pause screen, we will be using <a id="id180" class="indexterm"/><strong>Unreal Motion Graphics</strong> (<strong>UMG</strong>), which is a separate portion of UE4 that allows us to design virtual user interfaces without the need for programs such as Adobe Flash. UMG is very intuitive and does not require programming knowledge in order to use it.</p><p>To start with, we will navigate to our already created <strong>Blueprints</strong> | <strong>UI</strong> folder and create a Widget Blueprint <a id="id181" class="indexterm"/>for our pause menu. To <a id="id182" class="indexterm"/>do this, right-click on your <strong>UI</strong> folder and then navigate to <strong>User Interface</strong> | <strong>Widget Blueprint</strong>:</p><div><img src="img/B04548_04_01.jpg" alt="UMG pause screen initial setup"/></div><p>Name the Widget Blueprint as <code class="literal">Pause</code>:</p><div><img src="img/B04548_04_02.jpg" alt="UMG pause screen initial setup"/></div><p>The Widget Blueprint will allow you to use UMG to design any user interface; we will be using this widget to design our own UI for the pause menu.</p><p>To start<a id="id183" class="indexterm"/> designing the pause menu, open<a id="id184" class="indexterm"/> the <strong>Pause</strong> Widget Blueprint by double-clicking on it from within <strong>Content Browser</strong>. You should see the <strong>Designer</strong> screen that looks like the following screenshot:</p><div><img src="img/B04548_04_03.jpg" alt="UMG pause screen initial setup"/></div><p>We are first going to create an area for our first screen where we want the pause menu to be. We will first be adding a Canvas Panel that acts as a container to allow several widgets to be laid out within it. This is a great place to start because we will need to feature several navigation points, which we will design in the form of buttons within our pause screen. To add a Canvas Panel, navigate to <strong>Palette</strong> | <strong>Panel</strong> | <strong>Canvas Panel</strong>. Then, drag the Canvas Panel into your <strong>Designer</strong> viewport (note that if you already have a Canvas Panel in your <strong>Hierarchy</strong> tab by default, you can skip this step):</p><div><img src="img/B04548_04_05.jpg" alt="UMG pause screen initial setup"/></div><p>You should see a <a id="id185" class="indexterm"/>few new things<a id="id186" class="indexterm"/> in your pause menu. Firstly, you will see that under the <strong>Hierarchy</strong> tab, there is now <strong>CanvasPanel</strong> in <strong>Root</strong>. This means that in the root of the pause screen is the Canvas Panel that we just added. You will also notice that your Canvas Panel, while selected, contains details that can be seen in the <strong>Details</strong> tab. The <strong>Details</strong> tab will allow you to edit properties of any selected item. We will be using these areas of Widget Blueprint frequently throughout our development process.</p><p>We now need to think about what sorts of navigation points and information we need on our screen when the player presses the pause button. Based on the functionality, the following are the items we will need to lay out on our first screen:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Characters along with their stats (level, HP, MP, and experience/next level)</li><li class="listitem" style="list-style-type: disc">The <strong>Inventory</strong> button</li><li class="listitem" style="list-style-type: disc">The <strong>Equipment</strong> button</li><li class="listitem" style="list-style-type: disc">The <strong>Exit</strong> button</li><li class="listitem" style="list-style-type: disc">Gold</li></ul></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch04lvl1sec29"/>UMG background color</h1></div></div></div><p>Before <a id="id187" class="indexterm"/>we begin creating texts and buttons for our menu, we should first make a background color that will be laid behind the texts and buttons of the pause screen. To do this, navigate to <strong>Palette</strong> | <strong>Common</strong> | <strong>Image</strong>. Then, drag and drop the image onto the Canvas Panel so that the image is within the Canvas Panel. From here, locate the <strong>Anchors</strong> drop-down menu under <strong>Details</strong> | <strong>Slots</strong>. Select the <strong>Anchors</strong> option that creates anchors on all the four corners of the canvas. </p><p>This is <a id="id188" class="indexterm"/>an icon that looks like a large square covering the entire canvas located on the bottom-right of the <strong>Anchors</strong> drop-down menu:</p><div><img src="img/B04548_04_07.jpg" alt="UMG background color"/></div><p>Once this is done, set the <strong>Offset Right</strong> and <strong>Offset Bottom</strong> values to 0. This will ensure that, just like the left <a id="id189" class="indexterm"/>and the top of the image, the <a id="id190" class="indexterm"/>right and the bottom of the image will start at 0, thus, allowing the image to stretch to all our anchor points that are positioned at all four corners of our canvas:</p><div><img src="img/B04548_04_08.jpg" alt="UMG background color"/></div><p>To make the background image a little easier on the eyes, we should make it a bit more of a dull color. To adjust the color, navigate to <strong>Details</strong> | <strong>Appearance</strong> | <strong>Color and Opacity</strong> and then click on the rectangular box next to it. This will open a <strong>Color Picker</strong> box where we can pick any color we want. In our example, we will use a dull blue:</p><div><img src="img/B04548_04_10.jpg" alt="UMG background color"/></div><p>Press <strong>OK</strong> once <a id="id191" class="indexterm"/>you are finished. You will notice that your image name is something like <strong>Image_###</strong>; we should adjust this so that it is <a id="id192" class="indexterm"/>more descriptive. To rename the image, simply navigate to <strong>Details</strong> and change the name. We will change the name to <strong>BG_Color</strong>. Lastly, change the <strong>ZOrder</strong> value in <strong>Details</strong> | <strong>Slot</strong> to <strong>-1</strong>. This will ensure that the background is drawn behind other widgets:</p><div><img src="img/B04548_04_12.jpg" alt="UMG background color"/></div></div>
<div><div><div><div><h1 class="title"><a id="ch04lvl1sec30"/>UMG text</h1></div></div></div><p>Now<a id="id193" class="indexterm"/> that we have finished creating a background for <a id="id194" class="indexterm"/>our menu, it is time to lay out our text and navigation. We will add text by navigating to <strong>Common</strong> | <strong>Text</strong>. Then, we will drag and drop the text into the Canvas Panel located in the <strong>Hierarchy</strong> tab:</p><div><img src="img/B04548_04_14.jpg" alt="UMG text"/></div><p>Note down a few important details. Firstly, you will see that in the <strong>Hierarchy</strong> tab, the Text Block is located within the Canvas Panel. This means that the Canvas Panel is acting as a <a id="id195" class="indexterm"/>container for the text; thus, it can only be seen if the player is navigating through the Canvas Panel. You will also notice that the <strong>Details</strong> tab <a id="id196" class="indexterm"/>has changed in order to include specific properties for the text. Some really important details are listed here, such as position, size, text, and anchors. Lastly, you should see that the selected text is in the form of a movable and resizable text box, which means we can place and edit this however we choose to. For now, we won't worry about making the pause screen look pretty, we just need to focus on the layout and functionality. A common layout will be one that navigates the eyes left to right and top to bottom. Since we are starting with the characters, we will make our first text be the character names. Also, we will have them start at the top-left corner of the pause menu.</p><p>Firstly, we will add the text necessary for the character names or classes. While selecting the text, navigate to <strong>Details</strong> | <strong>Content</strong> | <strong>Text</strong> and type the name of the first class—<code class="literal">Soldier</code>. You will notice that the text that you wrote in the <strong>Content</strong> tab is now written in your Text Block in the <strong>Designer</strong> view. However, it is small, which makes the text hard to see. Change its size by navigating to <strong>Details</strong> | <strong>Appearance</strong> | <strong>Font</strong>. Here, you can change the size to something larger such as <strong>48</strong>:</p><div><img src="img/B04548_04_15.jpg" alt="UMG text"/></div><p>Position the text <a id="id197" class="indexterm"/>by navigating to <strong>Details</strong> | <strong>Slot</strong> and moving the text <a id="id198" class="indexterm"/>so that it is located on the top-left corner, but give it some padding. In our example, we will set <strong>Position X</strong> to <strong>100</strong> and <strong>Position Y</strong> to <strong>100</strong> so that there is a 100-pixel padding for <strong>Soldier</strong>. Lastly, we will rename the text as <strong>Header_Soldier</strong>:</p><div><img src="img/B04548_04_17.jpg" alt="UMG text"/></div><p>You will notice that<a id="id199" class="indexterm"/> the font size does not change and this is because you must press <strong>Compile</strong> at the top-left corner of the window. You will need to <a id="id200" class="indexterm"/>press <strong>Compile</strong> whenever you make technical changes such as these in your <strong>Design</strong> view. Once compiled, you should see that your font is resized. However, the text is too large for the Text Block. You can fix this by simply checking <strong>Size to Content</strong>, which is located in <strong>Details</strong> | <strong>Slot</strong>:</p><div><img src="img/B04548_04_19.jpg" alt="UMG text"/></div><p>Now that we have <a id="id201" class="indexterm"/>created the header for our first character, we can <a id="id202" class="indexterm"/>continue to create more texts for its stats. We will start by creating a font for HP. To do so, you will need another Text Block on your canvas:</p><div><img src="img/B04548_04_20.jpg" alt="UMG text"/></div><p>From here, you <a id="id203" class="indexterm"/>can position your Text Block so that it is <a id="id204" class="indexterm"/>somewhere below the <strong>Header_Soldier</strong> text. In this example, we will place it at a <strong>Position X</strong> value of <strong>200</strong> and a <strong>Position Y</strong> value of <strong>200</strong>:</p><div><img src="img/B04548_04_21.jpg" alt="UMG text"/></div><p>We will then <a id="id205" class="indexterm"/>write content for the text; in this case, the content <a id="id206" class="indexterm"/>will be <strong>HP</strong>. Here, we will give a font size of <strong>32</strong> to the text and compile it; then, we will check <strong>Size to Content</strong>:</p><div><img src="img/B04548_04_23.jpg" alt="UMG text"/></div><p>Lastly, we will name this widget <strong>Menu_HP</strong>:</p><div><img src="img/B04548_04_24.jpg" alt="UMG text"/></div><p>As you can see, all <a id="id207" class="indexterm"/>we did was added text that says <strong>HP</strong> in the menu; however, you will also need actual numbers for the HP displayed on the screen. For now, we<a id="id208" class="indexterm"/> are simply going to make a blank Text Block on the right-hand side of the HP text. Later on in this chapter, we will tie this in with the code we created for the character HP in the previous chapter. So for now, drag and drop a Text Block as a child of your Canvas Panel:</p><div><img src="img/B04548_04_25.jpg" alt="UMG text"/></div><p>Rename it <a id="id209" class="indexterm"/>as <strong>Editable_Soldier_HP</strong>. Then, position it so<a id="id210" class="indexterm"/> that it is to the right of <strong>Menu_HP</strong>. In this case, we can set the <strong>Position X</strong> value as <strong>300</strong> and the <strong>Position Y</strong> value as <strong>200</strong>:</p><div><img src="img/B04548_04_27.jpg" alt="UMG text"/></div><p>Lastly, we <a id="id211" class="indexterm"/>can<a id="id212" class="indexterm"/> change the font style to <strong>Regular</strong>, the font size to <strong>32</strong>, check <strong>Size to Content</strong>, and compile:</p><div><img src="img/B04548_04_28.jpg" alt="UMG text"/></div><p>Now that you know what the layout is like and how we can create text blocks for characters and their stats, you can proceed to create the other necessary stats for your character such as level, MP, and experience/next level. After you have finished laying out characters and their stats, your final result should look something like the following:</p><div><img src="img/B04548_04_29.jpg" alt="UMG text"/></div><p>At this point, you<a id="id213" class="indexterm"/> may also move on to creating more <a id="id214" class="indexterm"/>characters. For instance, if you wanted to create a Healer, you could have easily copied most of the content we created for the Soldier and its layout in our pause screen. Your pause screen with placeholders for both Soldier and Healer stats may look something like the following:</p><div><img src="img/B04548_04_30.jpg" alt="UMG text"/></div><p>The last <a id="id215" class="indexterm"/>placeholder<a id="id216" class="indexterm"/> we need to make on this screen is for gold that is collected by the player. Just like we did for the party stats, create a Text Block and make sure the content of the text is <strong>Gold</strong>. Place this somewhere away from the character stats, for example, in the bottom-left corner of the pause screen. Then, rename the Text Block as <strong>Menu_Gold</strong>. Finally, create a second Text Block, place it to the right of <strong>Menu_Gold</strong>, and call it <strong>Editable_Gold</strong>:</p><div><img src="img/B04548_04_32.jpg" alt="UMG text"/></div><p>Like the empty text <a id="id217" class="indexterm"/>boxes in the character stats, we will link <strong>Editable_Gold</strong> with the gold accumulated in the game later on.</p><p>We can now move <a id="id218" class="indexterm"/>on to creating buttons for our menu, which will eventually navigate to submenus.</p></div>
<div><div><div><div><h1 class="title"><a id="ch04lvl1sec31"/>UMG buttons</h1></div></div></div><p>So far, we <a id="id219" class="indexterm"/>have created the first screen of our pause menu that includes all of our characters and placeholders for their stats and gold. The <a id="id220" class="indexterm"/>next thing we need to design is buttons, which will be the last portion of our first pause screen. Much like buttons in other software packages, they are typically used to trigger events built around mouse clicks. A programmer can simply have their button listen to a press from a mouse button and cause an action or series of actions to occur based around that button click. The buttons we are creating will be used as navigation to submenus since we need a way of navigating through the inventory and equipment screens. Therefore, on our main screen, we will need a button for both inventory and equipment. We will also need a button to go to the pause menu and resume playing the game as well.</p><p>Let us start by creating our first button. Navigate to <strong>Palette</strong> | <strong>Common</strong> | <strong>Button</strong> and place it in your Canvas Panel under the <strong>Hierarchy</strong> tab:</p><div><img src="img/B04548_04_34.jpg" alt="UMG buttons"/></div><p>For organization<a id="id221" class="indexterm"/> purposes, we will lay our first button on the <a id="id222" class="indexterm"/>top-right of the menu. So the best thing to do is navigate to <strong>Details</strong> | <strong>Slot</strong> | <strong>Anchors</strong> and anchor the button at the top-right. This will ensure that as the screen or objects resize, the button aligns to the right-hand side:</p><div><img src="img/B04548_04_35.jpg" alt="UMG buttons"/></div><p>You should <a id="id223" class="indexterm"/>notice that the anchor icon on your screen moves to the top-right of the screen. You will also notice that the <strong>Position X</strong> value changes to a negative number that reflects the size of your screen, since the origin of the button position is placed <a id="id224" class="indexterm"/>at the opposite end of the screen; the values of <strong>Position X</strong> of this particular button are now flipped. This concept may be confusing at first, but it will make the math for the placement of each button much easier in the long run:</p><div><img src="img/B04548_04_36.jpg" alt="UMG buttons"/></div><p>Change the <strong>Position X</strong> value to <strong>-200</strong> (since <strong>Position X</strong> of the button is now <strong>-1920</strong> to be positioned from the left and <strong>-100</strong> to be positioned to the right, to add <strong>100</strong> pixels of padding would be <strong>-200</strong>) and <strong>Position Y</strong> value to <strong>100</strong>. Name this button <strong>Button_Inventory</strong>:</p><div><img src="img/B04548_04_38.jpg" alt="UMG buttons"/></div><p>We will now <a id="id225" class="indexterm"/>add<a id="id226" class="indexterm"/> text to the button. So select <strong>Text</strong> under <strong>Palette</strong> | <strong>Common</strong> | <strong>Text</strong> and drag it into the button. You will notice that the text is within the button in both the <strong>Hierarchy</strong> tab and the <strong>Designer</strong> view:</p><div><img src="img/B04548_04_39.jpg" alt="UMG buttons"/></div><p>You may also<a id="id227" class="indexterm"/> notice <a id="id228" class="indexterm"/>that the text is not sized to our liking and it does not fit into the button. Rather than resizing the button right away, let us resize the text to our liking first and then resize the button around the text so that the text is readable. Navigate to <strong>Details</strong> | <strong>Appearance</strong> | <strong>Font</strong> and change the font size to <strong>48</strong>:</p><div><img src="img/B04548_04_40.jpg" alt="UMG buttons"/></div><p>Then, under <strong>Details</strong> | <strong>Content</strong> | <strong>Text</strong>, change <a id="id229" class="indexterm"/>the text to <strong>Inventory</strong> and <a id="id230" class="indexterm"/>the name of the Text widget to <strong>Menu_Inventory</strong>:</p><div><img src="img/B04548_04_41.jpg" alt="UMG buttons"/></div><p>Click <a id="id231" class="indexterm"/>on <strong>Button_Inventory</strong>. You <a id="id232" class="indexterm"/>may be thinking that checking <strong>Size to Content</strong> would be the right idea here, but it isn't in our circumstances because you will be creating multiple buttons, each with a different text in it. Therefore, if they were all sized to the content (content being the text within the button), all your buttons would be sized differently, which is very unattractive. Instead, you should pick a button size that will easily fit all the text, even for your longest worded text. For this button, we will change the <strong>Size X</strong> value to <strong>350</strong> and <strong>Size Y</strong> value to <strong>100</strong>:</p><div><img src="img/B04548_04_42.jpg" alt="UMG buttons"/></div><p>You will notice that the <a id="id233" class="indexterm"/>button is drawn off the screen and<a id="id234" class="indexterm"/> this is because the button, like every other object, is still drawn from the top-left of the object, so we will need to adjust our <strong>Position X</strong> value again; however, the math is easy since we are anchored at the top-right. All we need to do is take the horizontal sizes of our button, 350, and then subtract it from where the button thinks the right edge of our screen is due to the anchor, which is 0. So this gives us <em>0 - 350 = -350</em>. Then, we take -350 and subtract the 100 pixels of padding that we want, which gives us <em>-350 - 100 = -450</em>, which is the value we should change our <strong>Position X</strong> to:</p><div><img src="img/B04548_04_43.jpg" alt="UMG buttons"/></div><p>Now that we <a id="id235" class="indexterm"/>have a button perfectly placed, we <a id="id236" class="indexterm"/>can place more buttons. We will use the same steps to create an <strong>Equipment</strong> button below the <strong>Inventory</strong> button. Once you have completed creating the <strong>Equipment</strong> button, it can be placed just below the <strong>Inventory</strong> button:</p><div><img src="img/B04548_04_44.jpg" alt="UMG buttons"/></div><p>We can also <a id="id237" class="indexterm"/>create <a id="id238" class="indexterm"/>an <strong>Exit</strong> button, which we will place at the bottom-right of the screen:</p><div><img src="img/B04548_04_45.jpg" alt="UMG buttons"/></div><p>There you have<a id="id239" class="indexterm"/> it—we have finished designing the first<a id="id240" class="indexterm"/> screen of our pause menu. You will notice that we have not yet programmed the buttons to do anything, and this is because we do not have screens for the buttons to navigate to, so it won't make sense to program the buttons just yet. The next steps will be to design our submenus.</p></div>
<div><div><div><div><h1 class="title"><a id="ch04lvl1sec32"/>The UMG inventory submenu</h1></div></div></div><p>As <a id="id241" class="indexterm"/>mentioned earlier, we need to create submenus for our buttons to navigate to. Using UMG, there are several ways to create submenus, but <a id="id242" class="indexterm"/>the most straightforward way is to create a new Widget Blueprint for each submenu and then bind the Widget Blueprints together.</p><p>Since we will need many of the same items in our submenus such as the character names and most of their stats, we can save a lot of time by carefully making a copy of our main pause menu, renaming it, and then editing it to fit whatever submenus we need. Since we have initially saved the main pause menu as <strong>Pause</strong>, we may want to first rename it so that it is more descriptive. So head back into your <strong>Content Browser</strong>, locate where you saved your pause menu, and rename it by right-clicking on the pause menu widget and selecting <strong>Rename</strong>. Rename this file as <strong>Pause_Main</strong>:</p><div><img src="img/B04548_04_46.jpg" alt="The UMG inventory submenu"/></div><p>Next, make<a id="id243" class="indexterm"/> a duplicate of <strong>Pause_Main</strong> by<a id="id244" class="indexterm"/> right clicking on the file and selecting <strong>Duplicate</strong>:</p><div><img src="img/B04548_04_47.jpg" alt="The UMG inventory submenu"/></div><p>Rename <a id="id245" class="indexterm"/>this <a id="id246" class="indexterm"/>as <strong>Pause_Inventory</strong>:</p><div><img src="img/B04548_04_48.jpg" alt="The UMG inventory submenu"/></div><p>We will now be able to design an <strong>Inventory</strong> screen. Open up your newly created <strong>Pause_Inventory</strong> Widget Blueprint. You will notice that it is an exact duplicate of <strong>Pause_Main</strong>. From here, we can edit out what is not needed. First <a id="id247" class="indexterm"/>of all, we are not planning to have any items that affect XP, so we can remove XP Text Blocks from our characters:</p><div><img src="img/B04548_04_49.jpg" alt="The UMG inventory submenu"/></div><p>Also, we will <a id="id248" class="indexterm"/>not need to keep a track of gold in our <strong>Inventory</strong> screen either. So, we can remove gold.</p><p>For ease of creation, we will also make the navigation around the main pause screen and its submenus "old school", by using <strong>Pause_Main</strong> as a central hub to all submenus, such as <strong>Pause_Inventory</strong> and <strong>Pause_Equipment</strong>, and only allowing the player to enter the <strong>Equipment</strong> screen if they are backed out to <strong>Pause_Main</strong> and they press the <strong>Equipment</strong> button from there. Based on the idea behind this design, we may also remove the <strong>Inventory</strong> and <strong>Equipment</strong> buttons from this screen:</p><div><img src="img/B04548_04_51.jpg" alt="The UMG inventory submenu"/></div><p>We can, however, keep<a id="id249" class="indexterm"/> the <strong>Exit</strong> button, but <a id="id250" class="indexterm"/>based on our ideas behind the screen navigation, we should rename this button and its Text Block to reflect backing out of the screen and going to <strong>Pause_Main</strong> when pressed. So we can select <strong>Button_Exit</strong> and rename it as <strong>Button_Back</strong>:</p><div><img src="img/B04548_04_52.jpg" alt="The UMG inventory submenu"/></div><p>Then, select <a id="id251" class="indexterm"/>the Text Block within <a id="id252" class="indexterm"/>the <strong>Exit</strong> button, rename it as <strong>Menu_Back</strong>, and change the text to <strong>Back</strong>:</p><div><img src="img/B04548_04_53.jpg" alt="The UMG inventory submenu"/></div><p>In the previous chapter, we defined more stats than just HP and MP; we also defined attack power, defense, and luck. While health and magic potions don't typically affect any stats other <a id="id253" class="indexterm"/>than HP or MP, you may later on want <a id="id254" class="indexterm"/>to create items that are usable and effect things such as luck, defense, or attack power. In preparation of this, we will create placeholders for these three other stats for each character in the same way you created the HP and MP Text Blocks. We will be positioning these stats below the HP and MP stats. Note that, if you run out of room for these stats, you may need to play around with spacing. Also, remember to name all Text Blocks you make with something very descriptive so that you can identify them when the time comes to reference them.</p><p>When you are finished adding stats, your Text Blocks should look something like the following screenshot:</p><div><img src="img/B04548_04_54.jpg" alt="The UMG inventory submenu"/></div><p>We now need a place <a id="id255" class="indexterm"/>that will populate our inventory. Since we are unsure about how many items the player in the game will carry, it will be safest to create a Scroll Box that will be populated with our inventory. We will also want to create a Scroll Box that is wide enough <a id="id256" class="indexterm"/>in case we have items that have very long names. If you designed your screen like I have, you should have plenty of room for a Scroll Box. To create a Scroll Box, navigate to <strong>Palette</strong> | <strong>Panel</strong> | <strong>Scroll Box</strong>:</p><div><img src="img/B04548_04_55.jpg" alt="The UMG inventory submenu"/></div><p>Then, drag it into your Canvas Panel under the <strong>Hierarchy</strong> tab:</p><div><img src="img/B04548_04_56.jpg" alt="The UMG inventory submenu"/></div><p>For now, rename <a id="id257" class="indexterm"/>the Scroll Box as <strong>ScrollBox_Inventory</strong>. Then, change<a id="id258" class="indexterm"/> the position so that it is placed in the middle of the screen while neatly taking up a wide amount space on the screen. I will change my <strong>Position X</strong> value to <strong>700</strong>, <strong>Position Y</strong> value to <strong>200</strong>, <strong>Size X</strong> value to 600, and <strong>Size Y</strong> value to <strong>600</strong>. When you are finished, your Scroll Box should look something like the following screenshot:</p><div><img src="img/B04548_04_57.jpg" alt="The UMG inventory submenu"/></div><p>In a later chapter, we<a id="id259" class="indexterm"/> will be dynamically inserting items into the Scroll Box and creating logic to apply the effects of the items to each character.</p><p>To finish off this <a id="id260" class="indexterm"/>screen, you should notify the player about which screen they are currently viewing. So create another Text Block and size the font to something large, such as 48 pixels. Pick an anchor for your Text Block that is at the center-top. This will make it such that your Text Block recognizes the 0 <em>X</em> position as the middle of the screen and the <em>0</em> Y position as the top of the screen. So you can now put <strong>0</strong> as the <strong>Position X</strong> value and pad the <strong>Position Y</strong> value:</p><div><img src="img/B04548_04_59.jpg" alt="The UMG inventory submenu"/></div><p>You will <a id="id261" class="indexterm"/>notice that the inventory is not quite <a id="id262" class="indexterm"/>written at the middle of the screen, so adjust the <strong>Position X</strong> value until it is. I changed my <strong>Position X</strong> value to half of the size of the Text Block, which came out to be -135:</p><div><img src="img/B04548_04_60.jpg" alt="The UMG inventory submenu"/></div><p>At this <a id="id263" class="indexterm"/>point, you <a id="id264" class="indexterm"/>can save and compile your <strong>Inventory</strong> screen. We are done for now.</p></div>
<div><div><div><div><h1 class="title"><a id="ch04lvl1sec33"/>The UMG equipment submenu</h1></div></div></div><p>The last <a id="id265" class="indexterm"/>submenu we need to design is the equipment <a id="id266" class="indexterm"/>submenu. Since our submenu for equipment will be very similar to the submenu for inventory, the easiest way to start would be to navigate back to <strong>Content Browser</strong>, duplicate <strong>Pause_Inventory</strong>, and rename it as <strong>Pause_Equipment</strong> so that <strong>Pause_Equipment</strong> is a direct copy of <strong>Pause_Inventory</strong>. Next, open up <strong>Pause_Equipment</strong>.</p><p>We will be designing this screen in a similar way to the <strong>Inventory</strong> screen. We will still be using the Scroll Box to populate items (in this case, equipment). We will be mostly keeping the same stats for each character; we will continue utilizing the Back button that will eventually navigate back to the pause screen. Let us edit the differences. First, change the title of the screen from <strong>Inventory</strong> to <strong>Equipment</strong> and reposition it so that it is horizontally aligned to the middle of the screen:</p><div><img src="img/B04548_04_61.jpg" alt="The UMG equipment submenu"/></div><p>Next, we will <a id="id267" class="indexterm"/>need to edit the character stats. We may have equipment in this game that when equipped, will change the AP, DP, and Lk stats. However, we<a id="id268" class="indexterm"/> will most likely not have equipment that will have an effect on HP and MP. We also know that we will need weapons and armor for each character. Therefore, we can easily edit the text of HP and MP out with weapon and armor (which I will call <strong>Weap</strong> and <strong>Arm</strong> to save space). In terms of details, I will change the name of the <strong>Menu_HP</strong> text block to <strong>Menu_Weapon</strong> and the text of the Text Block to <strong>Weap</strong>. We will do something similar to <strong>Menu_MP</strong> by changing it to an armor slot:</p><div><img src="img/B04548_04_62.jpg" alt="The UMG equipment submenu"/></div><p>Follow similar <a id="id269" class="indexterm"/>naming conventions when <a id="id270" class="indexterm"/>switching out any other character's HP and MP with weapon and armor placeholders. When you are finished, your screen should look like the following screenshot:</p><div><img src="img/B04548_04_63.jpg" alt="The UMG equipment submenu"/></div><p>Since our<a id="id271" class="indexterm"/> characters<a id="id272" class="indexterm"/> will be equipping weapons and armor, we will need placeholders for these slots. Eventually, we will allow the player to select equipment that they want to equip, and the equipment will appear in the appropriate weapon or armor slot. The type of widget that would be most appropriate is <strong>Border</strong>. This will contain a Text Block that will change when a weapon or armor is equipped. To do this, select <strong>Border</strong> from <strong>Palette</strong> | <strong>Common</strong> | <strong>Border</strong>. Drag the Border into the Canvas Panel:</p><div><img src="img/B04548_04_65.jpg" alt="The UMG equipment submenu"/></div><p>Then, position the<a id="id273" class="indexterm"/> Canvas Panel so that it is in <a id="id274" class="indexterm"/>the same position as the Text Block that is placed to the right of the soldier's <strong>Menu_Weapon</strong>. At this point, you may delete the Text Block that is to the right of <strong>Menu_Weapon</strong>. It was originally used as the text for HP, and we will no longer need it:</p><div><img src="img/B04548_04_67.jpg" alt="The UMG equipment submenu"/></div><p>We will <a id="id275" class="indexterm"/>still <a id="id276" class="indexterm"/>need text in the border, so drop text from <strong>Palette</strong> | <strong>Common</strong> | <strong>Text</strong> into your Border:</p><div><img src="img/B04548_04_68.jpg" alt="The UMG equipment submenu"/></div><p>You can keep<a id="id277" class="indexterm"/> the <a id="id278" class="indexterm"/>defaults of the Text Block for now, except you will notice that the border did not resize and everything is still white. Navigate back to your Border and check <strong>Size to Content</strong>. Under <strong>Appearance</strong> | <strong>Brush Color</strong>, change the <strong>A</strong> value to <strong>0</strong>. The <strong>A</strong> value is alpha. When the alpha is 0, the color is completely transparent, and when the alpha is 1, the color is completely opaque; anywhere in between is only slightly transparent. We don't really care about seeing the color of the block, we want it to be invisible to the player:</p><div><img src="img/B04548_04_69.jpg" alt="The UMG equipment submenu"/></div><p>Lastly, change<a id="id279" class="indexterm"/> the Border name to<a id="id280" class="indexterm"/> something descriptive such as <strong>Border_Weapon</strong>:</p><div><img src="img/B04548_04_70.jpg" alt="The UMG equipment submenu"/></div><p>Navigate<a id="id281" class="indexterm"/> back <a id="id282" class="indexterm"/>to the Text Block within the border. Name the Text Block <strong>Text_Weapon</strong>, and change the font to a regular style at 32 pixels to match the rest of the Text Blocks:</p><div><img src="img/B04548_04_71.jpg" alt="The UMG equipment submenu"/></div><p>Now that <a id="id283" class="indexterm"/>you <a id="id284" class="indexterm"/>know how to design borders and Text Blocks for the soldier's weapon, you can design Borders and Text Blocks for the soldier's armor and any other character's weapon and armor. When you are finished, you should have something that looks like the following screenshot:</p><div><img src="img/B04548_04_72.jpg" alt="The UMG equipment submenu"/></div><p>At this point, we <a id="id285" class="indexterm"/>are finished designing all<a id="id286" class="indexterm"/> our screens that appear when the player presses the pause button. The next steps will be to program the functionality of these screens.</p></div>
<div><div><div><div><h1 class="title"><a id="ch04lvl1sec34"/>Key binding</h1></div></div></div><p>We are <a id="id287" class="indexterm"/>now going to bind a key to open up the pause menu, and<a id="id288" class="indexterm"/> only allow this to happen when the player is not in battle (in other words, the player is out in the field). Since we already have a <strong>FieldPlayer</strong> set up from the previous chapter, we can easily create actions within our <strong>FieldPlayer</strong> Blueprint class that will control our pause menu. To start, navigate to <strong>Blueprints</strong> | <strong>Open Blueprint Class…</strong> | <strong>FieldPlayer</strong>:</p><div><img src="img/B04548_04_73.jpg" alt="Key binding"/></div><p>At this point, we <a id="id289" class="indexterm"/>are going to want to have the pause screen pop up when the player presses a key; in this case, we will use <em>P</em> for pause. To do this, we<a id="id290" class="indexterm"/> will first need to create a key event that will fire off a set of actions of our choice after a specific key is pressed. To start this key event, right-click on your Event Graph, which will open up all actions that can be associated with this Blueprint, and then navigate to <strong>Input</strong> | <strong>KeyEvents</strong> | <strong>P</strong>:</p><div><img src="img/B04548_04_74.jpg" alt="Key binding"/></div><p>Once done, this <a id="id291" class="indexterm"/>will create a key event for the press and release of <em>P</em>. You <a id="id292" class="indexterm"/>will notice that this event has pressed and released executables that work as they are described, an action can occur when the player presses <em>P</em> or when the player releases <em>P</em>. For our actions regarding the pausing of the game and the pop up of the pause menu, we will use the released executable, because in order for the released executable to be called, it would mean that the player has gone through the act of pressing and releasing the key. It is often the best practice for a player to commit to a button press just like a player commits to a move in Chess by letting go of a piece. Before we pop up the pause menu, let us pause the game by creating a call to the <strong>Set Game Paused</strong> function that can be found by right-clicking in the Event Graph and navigating to <strong>Game</strong> | <strong>Set Game Paused</strong>:</p><div><img src="img/B04548_04_75.jpg" alt="Key binding"/></div><p>Within<a id="id293" class="indexterm"/> the <strong>Set Game Paused</strong> node, check <strong>Paused</strong> so that it is <a id="id294" class="indexterm"/>set to true, and link the <strong>Released</strong> executable of the key event <strong>P</strong> to the in pin of the <strong>Set Game Paused</strong>. Your game should now pause whenever the player presses and releases <em>P</em>:</p><div><img src="img/B04548_04_76.jpg" alt="Key binding"/></div><p>From here, we will pop up the pause menu. To do so, upon the game being paused, we will create the main pause screen by right-clicking on the Event Graph and navigating to <strong>User Interface</strong> | <strong>Create Widget</strong>. This allows us to create instances of any widget that we made. We<a id="id295" class="indexterm"/> can create our <strong>Pause_Main</strong> here by pressing the <strong>Select Class</strong> drop-down menu within <strong>Create Widget</strong> and selecting <strong>Pause_Main</strong>:</p><div><img src="img/B04548_04_78.jpg" alt="Key binding"/></div><p>Next, we can link the <a id="id296" class="indexterm"/>out pin of <strong>Set Game Paused</strong> to the in pin of the <strong>Create Pause_MainWidget</strong>:</p><div><img src="img/B04548_04_79.jpg" alt="Key binding"/></div><p>This will make it such that after the game is paused, <strong>Pause_Main</strong> will be created. Although we are creating <strong>Pause_Main</strong>, this will still not pop up on screen until we tell it to draw on screen. To do so, we will need to create a call to the <strong>Add to Viewport</strong> function that can add any graphic to a viewport. To do this, left-click and drag out the <strong>Return Value</strong> pin from the <strong>Create Pause_Main</strong> widget node, and select <strong>User Interface</strong> | <strong>Viewport</strong> | <strong>Add to Viewport</strong>. This will create a new <strong>Add to Viewport</strong> node:</p><div><img src="img/B04548_04_80.jpg" alt="Key binding"/></div><p>If you test<a id="id297" class="indexterm"/> this, you will notice that the game pauses and the pause <a id="id298" class="indexterm"/>menu pops up, but it is missing a mouse cursor. To add the mouse cursor, we will first need to get the player controller by right-clicking on the Event Graph and navigating to <strong>Game</strong> | <strong>Get Player Controller</strong> | <strong>Get Player Controller</strong>:</p><div><img src="img/B04548_04_81.jpg" alt="Key binding"/></div><p>From here, simply <a id="id299" class="indexterm"/>left-click and drag out the <strong>Return Value</strong> pin <a id="id300" class="indexterm"/>from the <strong>Get Player Controller</strong> node, then select <strong>Variables</strong> | <strong>Mouse Interface</strong> | <strong>Set Show Mouse Cursor</strong>:</p><div><img src="img/B04548_04_82.jpg" alt="Key binding"/></div><p>Once done, link<a id="id301" class="indexterm"/> the out pin of the <strong>Add to Viewport</strong> node to the in pin of <strong>Set Show Mouse Cursor</strong>. What this will do is set the <strong>Show Mouse Cursor</strong> variable (which is a Boolean) to either true or false after the pause menu has been displayed in the viewport. The <strong>Set Show Mouse Cursor</strong> variable needs to also get the player controller because the player controller holds the mouse input information.</p><p>If you playtest this <a id="id302" class="indexterm"/>now, you will notice that the mouse cursor still does not show up; this is because <strong>Show Mouse Cursor</strong> within <strong>Set Show Mouse Cursor</strong> is unchecked, meaning that <strong>Show Mouse Cursor</strong> is set to false, so check the box whenever you want to show the mouse cursor.</p><p>At this point, your menu should pop up perfectly after pressing <em>P</em> and the mouse should be completely visible and controllable. Your level blueprint should now look like the following screenshot:</p><div><img src="img/B04548_04_84.jpg" alt="Key binding"/></div><p>You will notice <a id="id303" class="indexterm"/>that none of the buttons work in the actual <a id="id304" class="indexterm"/>menu so we cannot exit the pause menu or view any of the submenus. This is because we have not programmed any of the menu buttons yet. We will now focus on programming those buttons.</p></div>
<div><div><div><div><h1 class="title"><a id="ch04lvl1sec35"/>Button programming</h1></div></div></div><p>Now that<a id="id305" class="indexterm"/> we have completed player access <a id="id306" class="indexterm"/>to the pause menu, we will now focus on navigation within the main pause menu and its submenus. At this point, head back into your <strong>Pause_Main</strong> widget. Let us first create the navigation to <strong>Pause_Inventory</strong>. To do this, click on the <strong>Inventory</strong> button:</p><div><img src="img/B04548_04_85.jpg" alt="Button programming"/></div><p>Navigate<a id="id307" class="indexterm"/> to <strong>Details</strong> | <strong>Events</strong> | <strong>OnClicked</strong> and then press the <strong>+</strong> button:</p><div><img src="img/B04548_04_86.jpg" alt="Button programming"/></div><p>Clicking<a id="id308" class="indexterm"/> on the <strong>+</strong> button will automatically open the<a id="id309" class="indexterm"/> Event Graph of <strong>Pause_Main</strong> and also create an <strong>OnClicked</strong> event:</p><div><img src="img/B04548_04_87.jpg" alt="Button programming"/></div><p>The <strong>OnClicked</strong> event <a id="id310" class="indexterm"/>will work similar to our key bind in the previous section where we created something that allows us to press a key, which triggers an event that can then trigger a series of actions. Only this time, the <strong>OnClicked</strong> event is bound to our <strong>Inventory</strong> button and will only trigger when the user has left-clicked on the <strong>Inventory</strong> button. What we will want to do is, when we click on the <strong>Inventory</strong> button, have it create a <strong>Pause_Inventory</strong> widget that gets displayed on the screen. This should <a id="id311" class="indexterm"/>sound very familiar because we just did something like this with <strong>Pause_Main</strong>. So firstly, create a widget and attach it to the <strong>OnClicked</strong> event. Next, you will notice that the <strong>Class</strong> pin in the widget is empty so we need to select a class. You will be selecting <strong>Pause_Inventory</strong> since we want to create the inventory widget when the button is pressed:</p><div><img src="img/B04548_04_89.jpg" alt="Button programming"/></div><p>Lastly, just add this widget to the viewport so the user can see the inventory being displayed. In the end, your Blueprint should look like the following screenshot:</p><div><img src="img/B04548_04_90.jpg" alt="Button programming"/></div><p>If you test your<a id="id312" class="indexterm"/> pause screen now, you should notice that you are able to navigate to<a id="id313" class="indexterm"/> your inventory screen, but you are not able to navigate back to your main pause screen. This is easily fixable. Simply open your <strong>Pause_Inventory</strong> widget, press the <strong>Back</strong> button, navigate to <strong>Details</strong> | <strong>Events</strong> | <strong>OnClicked</strong>, and then press the <strong>+</strong> button:</p><div><img src="img/B04548_04_91.jpg" alt="Button programming"/></div><p>Just like our last button, the Event Graph will automatically open up and an <strong>OnClicked</strong> event for our button will be created; only this time, the event is bound to our <strong>Back</strong> button:</p><div><img src="img/B04548_04_92.jpg" alt="Button programming"/></div><p>From here, you will <a id="id314" class="indexterm"/>set the screen to remove itself by linking the <strong>OnClicked</strong> event to <strong>Remove from Parent</strong>.</p><p>When you are finished <a id="id315" class="indexterm"/>creating the Blueprint for your <strong>Back</strong> button, it should look like the following screenshot:</p><div><img src="img/B04548_04_93.jpg" alt="Button programming"/></div><p>You can now create the same setup for navigation from <strong>Pause_Equipment</strong> by making sure that when we click on the <strong>Equipment</strong> button, we create a <strong>Pause_Equipment</strong> widget and display it; when we click on the <strong>Back</strong> button in the <strong>Pause_Equipment</strong>, we navigate back to the <strong>Pause_Main</strong> removing the <strong>Pause_Inventory</strong> screen.</p><p>The next step is to allow the player to exit when they click on the <strong>Exit</strong> button. To do this, you must first create an <strong>OnClicked</strong> event on the <strong>Exit</strong> button within <strong>Pause_Main</strong>. Again, when you press the <strong>+</strong> button of <strong>OnClicked</strong> within the <strong>Design</strong> view, an <strong>OnClicked</strong> button for the <strong>Exit</strong> button will be created in the Event Graph:</p><div><img src="img/B04548_04_94.jpg" alt="Button programming"/></div><p>From here, you <a id="id316" class="indexterm"/>will set the screen to remove <a id="id317" class="indexterm"/>itself by linking the <strong>OnClicked</strong> event to <strong>Remove from Parent</strong>:</p><div><img src="img/B04548_04_95.jpg" alt="Button programming"/></div><p>Your screens should now navigate perfectly, but we are not done yet. The last thing you will notice is that the game is still paused when the pause menu is exited. We will need to unpause the game. This fix is very simple. Within the <strong>Pause_Main</strong> Blueprint, simply link <strong>Set Game Paused</strong> to <strong>Remove from Parent</strong> so that when the widget is removed, the game unpauses:</p><div><img src="img/B04548_04_96.jpg" alt="Button programming"/></div><p>You may notice that when leaving the pause menu, the mouse cursor is still present. You can remove the mouse cursor by simply creating a <strong>Set Show Mouse Cursor</strong> node and having it connected to your <strong>OnClicked Button_Exit</strong> event after you unpause the game, which would be similar to how you added a mouse cursor in the first place, this time making sure the checkbox within the <strong>Set Show Mouse Cursor</strong> node is unchecked meaning that S<strong>et Show Mouse Cursor</strong> is set to false, and attaching a <strong>Get Player Controller</strong> to it.</p><p>There you <a id="id318" class="indexterm"/>have it. We are now finished with <a id="id319" class="indexterm"/>the navigation of our pause menu and its submenus.</p></div>
<div><div><div><div><h1 class="title"><a id="ch04lvl1sec36"/>Summary</h1></div></div></div><p>In this chapter, we completed pause menu placeholders for other important aspects of our game such as the <strong>Inventory</strong> and <strong>Equipment</strong> Scroll Boxes that will hold the inventory/equipment that we acquire in the game. We will continue to add to this pause menu in the next few chapters by covering the tracking of stats, gold, items, and equipment.</p></div></body></html>