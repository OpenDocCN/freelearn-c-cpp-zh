<html><head></head><body><div class="chapter" title="Chapter&#xA0;4.&#xA0;Pause Menu Framework"><div class="titlepage"><div><div><h1 class="title"><a id="ch04"/>Chapter 4. Pause Menu Framework</h1></div></div></div><p>At this point, we have created a basic combat engine for our game. We can now dive into out-of-combat operations such as the creation of a pause menu screen, where we will be able to view player stats and edit inventory.</p><p>In this chapter, we will create the first part of our menu system, which is to design and create a framework for a pause menu. We will cover the following topics in this chapter:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">UMG pause screen initial setup</li><li class="listitem" style="list-style-type: disc">UMG background color</li><li class="listitem" style="list-style-type: disc">UMG text</li><li class="listitem" style="list-style-type: disc">UMG buttons</li><li class="listitem" style="list-style-type: disc">UMG inventory submenu</li><li class="listitem" style="list-style-type: disc">UMG equipment submenu</li><li class="listitem" style="list-style-type: disc">Key binding</li><li class="listitem" style="list-style-type: disc">Button programming</li></ul></div><div class="section" title="UMG pause screen initial setup"><div class="titlepage"><div><div><h1 class="title"><a id="ch04lvl1sec28"/>UMG pause screen initial setup</h1></div></div></div><p>For our<a id="id178" class="indexterm"/> pause screen, we will need to think about quite a few things regarding the design. As listed in the earlier chapter, the pause screen will give the ability to the player to view party members, equip and unequip<a id="id179" class="indexterm"/> equipment, use items, and so on. So we must design our pause screen with that sort of functionality in mind.</p><p>To design the pause screen, we will be using <a id="id180" class="indexterm"/><span class="strong"><strong>Unreal Motion Graphics</strong></span> (<span class="strong"><strong>UMG</strong></span>), which is a separate portion of UE4 that allows us to design virtual user interfaces without the need for programs such as Adobe Flash. UMG is very intuitive and does not require programming knowledge in order to use it.</p><p>To start with, we will navigate to our already created <span class="strong"><strong>Blueprints</strong></span> | <span class="strong"><strong>UI</strong></span> folder and create a Widget Blueprint <a id="id181" class="indexterm"/>for our pause menu. To <a id="id182" class="indexterm"/>do this, right-click on your <span class="strong"><strong>UI</strong></span> folder and then navigate to <span class="strong"><strong>User Interface</strong></span> | <span class="strong"><strong>Widget Blueprint</strong></span>:</p><div class="mediaobject"><img src="graphics/B04548_04_01.jpg" alt="UMG pause screen initial setup"/></div><p>Name the Widget Blueprint as <code class="literal">Pause</code>:</p><div class="mediaobject"><img src="graphics/B04548_04_02.jpg" alt="UMG pause screen initial setup"/></div><p>The Widget Blueprint will allow you to use UMG to design any user interface; we will be using this widget to design our own UI for the pause menu.</p><p>To start<a id="id183" class="indexterm"/> designing the pause menu, open<a id="id184" class="indexterm"/> the <span class="strong"><strong>Pause</strong></span> Widget Blueprint by double-clicking on it from within <span class="strong"><strong>Content Browser</strong></span>. You should see the <span class="strong"><strong>Designer</strong></span> screen that looks like the following screenshot:</p><div class="mediaobject"><img src="graphics/B04548_04_03.jpg" alt="UMG pause screen initial setup"/></div><p>We are first going to create an area for our first screen where we want the pause menu to be. We will first be adding a Canvas Panel that acts as a container to allow several widgets to be laid out within it. This is a great place to start because we will need to feature several navigation points, which we will design in the form of buttons within our pause screen. To add a Canvas Panel, navigate to <span class="strong"><strong>Palette</strong></span> | <span class="strong"><strong>Panel</strong></span> | <span class="strong"><strong>Canvas Panel</strong></span>. Then, drag the Canvas Panel into your <span class="strong"><strong>Designer</strong></span> viewport (note that if you already have a Canvas Panel in your <span class="strong"><strong>Hierarchy</strong></span> tab by default, you can skip this step):</p><div class="mediaobject"><img src="graphics/B04548_04_05.jpg" alt="UMG pause screen initial setup"/></div><p>You should see a <a id="id185" class="indexterm"/>few new things<a id="id186" class="indexterm"/> in your pause menu. Firstly, you will see that under the <span class="strong"><strong>Hierarchy</strong></span> tab, there is now <span class="strong"><strong>CanvasPanel</strong></span> in <span class="strong"><strong>Root</strong></span>. This means that in the root of the pause screen is the Canvas Panel that we just added. You will also notice that your Canvas Panel, while selected, contains details that can be seen in the <span class="strong"><strong>Details</strong></span> tab. The <span class="strong"><strong>Details</strong></span> tab will allow you to edit properties of any selected item. We will be using these areas of Widget Blueprint frequently throughout our development process.</p><p>We now need to think about what sorts of navigation points and information we need on our screen when the player presses the pause button. Based on the functionality, the following are the items we will need to lay out on our first screen:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Characters along with their stats (level, HP, MP, and experience/next level)</li><li class="listitem" style="list-style-type: disc">The <span class="strong"><strong>Inventory</strong></span> button</li><li class="listitem" style="list-style-type: disc">The <span class="strong"><strong>Equipment</strong></span> button</li><li class="listitem" style="list-style-type: disc">The <span class="strong"><strong>Exit</strong></span> button</li><li class="listitem" style="list-style-type: disc">Gold</li></ul></div></div></div>
<div class="section" title="UMG background color"><div class="titlepage"><div><div><h1 class="title"><a id="ch04lvl1sec29"/>UMG background color</h1></div></div></div><p>Before <a id="id187" class="indexterm"/>we begin creating texts and buttons for our menu, we should first make a background color that will be laid behind the texts and buttons of the pause screen. To do this, navigate to <span class="strong"><strong>Palette</strong></span> | <span class="strong"><strong>Common</strong></span> | <span class="strong"><strong>Image</strong></span>. Then, drag and drop the image onto the Canvas Panel so that the image is within the Canvas Panel. From here, locate the <span class="strong"><strong>Anchors</strong></span> drop-down menu under <span class="strong"><strong>Details</strong></span> | <span class="strong"><strong>Slots</strong></span>. Select the <span class="strong"><strong>Anchors</strong></span> option that creates anchors on all the four corners of the canvas. </p><p>This is <a id="id188" class="indexterm"/>an icon that looks like a large square covering the entire canvas located on the bottom-right of the <span class="strong"><strong>Anchors</strong></span> drop-down menu:</p><div class="mediaobject"><img src="graphics/B04548_04_07.jpg" alt="UMG background color"/></div><p>Once this is done, set the <span class="strong"><strong>Offset Right</strong></span> and <span class="strong"><strong>Offset Bottom</strong></span> values to 0. This will ensure that, just like the left <a id="id189" class="indexterm"/>and the top of the image, the <a id="id190" class="indexterm"/>right and the bottom of the image will start at 0, thus, allowing the image to stretch to all our anchor points that are positioned at all four corners of our canvas:</p><div class="mediaobject"><img src="graphics/B04548_04_08.jpg" alt="UMG background color"/></div><p>To make the background image a little easier on the eyes, we should make it a bit more of a dull color. To adjust the color, navigate to <span class="strong"><strong>Details</strong></span> | <span class="strong"><strong>Appearance</strong></span> | <span class="strong"><strong>Color and Opacity</strong></span> and then click on the rectangular box next to it. This will open a <span class="strong"><strong>Color Picker</strong></span> box where we can pick any color we want. In our example, we will use a dull blue:</p><div class="mediaobject"><img src="graphics/B04548_04_10.jpg" alt="UMG background color"/></div><p>Press <span class="strong"><strong>OK</strong></span> once <a id="id191" class="indexterm"/>you are finished. You will notice that your image name is something like <span class="strong"><strong>Image_###</strong></span>; we should adjust this so that it is <a id="id192" class="indexterm"/>more descriptive. To rename the image, simply navigate to <span class="strong"><strong>Details</strong></span> and change the name. We will change the name to <span class="strong"><strong>BG_Color</strong></span>. Lastly, change the <span class="strong"><strong>ZOrder</strong></span> value in <span class="strong"><strong>Details</strong></span> | <span class="strong"><strong>Slot</strong></span> to <span class="strong"><strong>-1</strong></span>. This will ensure that the background is drawn behind other widgets:</p><div class="mediaobject"><img src="graphics/B04548_04_12.jpg" alt="UMG background color"/></div></div>
<div class="section" title="UMG text"><div class="titlepage"><div><div><h1 class="title"><a id="ch04lvl1sec30"/>UMG text</h1></div></div></div><p>Now<a id="id193" class="indexterm"/> that we have finished creating a background for <a id="id194" class="indexterm"/>our menu, it is time to lay out our text and navigation. We will add text by navigating to <span class="strong"><strong>Common</strong></span> | <span class="strong"><strong>Text</strong></span>. Then, we will drag and drop the text into the Canvas Panel located in the <span class="strong"><strong>Hierarchy</strong></span> tab:</p><div class="mediaobject"><img src="graphics/B04548_04_14.jpg" alt="UMG text"/></div><p>Note down a few important details. Firstly, you will see that in the <span class="strong"><strong>Hierarchy</strong></span> tab, the Text Block is located within the Canvas Panel. This means that the Canvas Panel is acting as a <a id="id195" class="indexterm"/>container for the text; thus, it can only be seen if the player is navigating through the Canvas Panel. You will also notice that the <span class="strong"><strong>Details</strong></span> tab <a id="id196" class="indexterm"/>has changed in order to include specific properties for the text. Some really important details are listed here, such as position, size, text, and anchors. Lastly, you should see that the selected text is in the form of a movable and resizable text box, which means we can place and edit this however we choose to. For now, we won't worry about making the pause screen look pretty, we just need to focus on the layout and functionality. A common layout will be one that navigates the eyes left to right and top to bottom. Since we are starting with the characters, we will make our first text be the character names. Also, we will have them start at the top-left corner of the pause menu.</p><p>Firstly, we will add the text necessary for the character names or classes. While selecting the text, navigate to <span class="strong"><strong>Details</strong></span> | <span class="strong"><strong>Content</strong></span> | <span class="strong"><strong>Text</strong></span> and type the name of the first class—<code class="literal">Soldier</code>. You will notice that the text that you wrote in the <span class="strong"><strong>Content</strong></span> tab is now written in your Text Block in the <span class="strong"><strong>Designer</strong></span> view. However, it is small, which makes the text hard to see. Change its size by navigating to <span class="strong"><strong>Details</strong></span> | <span class="strong"><strong>Appearance</strong></span> | <span class="strong"><strong>Font</strong></span>. Here, you can change the size to something larger such as <span class="strong"><strong>48</strong></span>:</p><div class="mediaobject"><img src="graphics/B04548_04_15.jpg" alt="UMG text"/></div><p>Position the text <a id="id197" class="indexterm"/>by navigating to <span class="strong"><strong>Details</strong></span> | <span class="strong"><strong>Slot</strong></span> and moving the text <a id="id198" class="indexterm"/>so that it is located on the top-left corner, but give it some padding. In our example, we will set <span class="strong"><strong>Position X</strong></span> to <span class="strong"><strong>100</strong></span> and <span class="strong"><strong>Position Y</strong></span> to <span class="strong"><strong>100</strong></span> so that there is a 100-pixel padding for <span class="strong"><strong>Soldier</strong></span>. Lastly, we will rename the text as <span class="strong"><strong>Header_Soldier</strong></span>:</p><div class="mediaobject"><img src="graphics/B04548_04_17.jpg" alt="UMG text"/></div><p>You will notice that<a id="id199" class="indexterm"/> the font size does not change and this is because you must press <span class="strong"><strong>Compile</strong></span> at the top-left corner of the window. You will need to <a id="id200" class="indexterm"/>press <span class="strong"><strong>Compile</strong></span> whenever you make technical changes such as these in your <span class="strong"><strong>Design</strong></span> view. Once compiled, you should see that your font is resized. However, the text is too large for the Text Block. You can fix this by simply checking <span class="strong"><strong>Size to Content</strong></span>, which is located in <span class="strong"><strong>Details</strong></span> | <span class="strong"><strong>Slot</strong></span>:</p><div class="mediaobject"><img src="graphics/B04548_04_19.jpg" alt="UMG text"/></div><p>Now that we have <a id="id201" class="indexterm"/>created the header for our first character, we can <a id="id202" class="indexterm"/>continue to create more texts for its stats. We will start by creating a font for HP. To do so, you will need another Text Block on your canvas:</p><div class="mediaobject"><img src="graphics/B04548_04_20.jpg" alt="UMG text"/></div><p>From here, you <a id="id203" class="indexterm"/>can position your Text Block so that it is <a id="id204" class="indexterm"/>somewhere below the <span class="strong"><strong>Header_Soldier</strong></span> text. In this example, we will place it at a <span class="strong"><strong>Position X</strong></span> value of <span class="strong"><strong>200</strong></span> and a <span class="strong"><strong>Position Y</strong></span> value of <span class="strong"><strong>200</strong></span>:</p><div class="mediaobject"><img src="graphics/B04548_04_21.jpg" alt="UMG text"/></div><p>We will then <a id="id205" class="indexterm"/>write content for the text; in this case, the content <a id="id206" class="indexterm"/>will be <span class="strong"><strong>HP</strong></span>. Here, we will give a font size of <span class="strong"><strong>32</strong></span> to the text and compile it; then, we will check <span class="strong"><strong>Size to Content</strong></span>:</p><div class="mediaobject"><img src="graphics/B04548_04_23.jpg" alt="UMG text"/></div><p>Lastly, we will name this widget <span class="strong"><strong>Menu_HP</strong></span>:</p><div class="mediaobject"><img src="graphics/B04548_04_24.jpg" alt="UMG text"/></div><p>As you can see, all <a id="id207" class="indexterm"/>we did was added text that says <span class="strong"><strong>HP</strong></span> in the menu; however, you will also need actual numbers for the HP displayed on the screen. For now, we<a id="id208" class="indexterm"/> are simply going to make a blank Text Block on the right-hand side of the HP text. Later on in this chapter, we will tie this in with the code we created for the character HP in the previous chapter. So for now, drag and drop a Text Block as a child of your Canvas Panel:</p><div class="mediaobject"><img src="graphics/B04548_04_25.jpg" alt="UMG text"/></div><p>Rename it <a id="id209" class="indexterm"/>as <span class="strong"><strong>Editable_Soldier_HP</strong></span>. Then, position it so<a id="id210" class="indexterm"/> that it is to the right of <span class="strong"><strong>Menu_HP</strong></span>. In this case, we can set the <span class="strong"><strong>Position X</strong></span> value as <span class="strong"><strong>300</strong></span> and the <span class="strong"><strong>Position Y</strong></span> value as <span class="strong"><strong>200</strong></span>:</p><div class="mediaobject"><img src="graphics/B04548_04_27.jpg" alt="UMG text"/></div><p>Lastly, we <a id="id211" class="indexterm"/>can<a id="id212" class="indexterm"/> change the font style to <span class="strong"><strong>Regular</strong></span>, the font size to <span class="strong"><strong>32</strong></span>, check <span class="strong"><strong>Size to Content</strong></span>, and compile:</p><div class="mediaobject"><img src="graphics/B04548_04_28.jpg" alt="UMG text"/></div><p>Now that you know what the layout is like and how we can create text blocks for characters and their stats, you can proceed to create the other necessary stats for your character such as level, MP, and experience/next level. After you have finished laying out characters and their stats, your final result should look something like the following:</p><div class="mediaobject"><img src="graphics/B04548_04_29.jpg" alt="UMG text"/></div><p>At this point, you<a id="id213" class="indexterm"/> may also move on to creating more <a id="id214" class="indexterm"/>characters. For instance, if you wanted to create a Healer, you could have easily copied most of the content we created for the Soldier and its layout in our pause screen. Your pause screen with placeholders for both Soldier and Healer stats may look something like the following:</p><div class="mediaobject"><img src="graphics/B04548_04_30.jpg" alt="UMG text"/></div><p>The last <a id="id215" class="indexterm"/>placeholder<a id="id216" class="indexterm"/> we need to make on this screen is for gold that is collected by the player. Just like we did for the party stats, create a Text Block and make sure the content of the text is <span class="strong"><strong>Gold</strong></span>. Place this somewhere away from the character stats, for example, in the bottom-left corner of the pause screen. Then, rename the Text Block as <span class="strong"><strong>Menu_Gold</strong></span>. Finally, create a second Text Block, place it to the right of <span class="strong"><strong>Menu_Gold</strong></span>, and call it <span class="strong"><strong>Editable_Gold</strong></span>:</p><div class="mediaobject"><img src="graphics/B04548_04_32.jpg" alt="UMG text"/></div><p>Like the empty text <a id="id217" class="indexterm"/>boxes in the character stats, we will link <span class="strong"><strong>Editable_Gold</strong></span> with the gold accumulated in the game later on.</p><p>We can now move <a id="id218" class="indexterm"/>on to creating buttons for our menu, which will eventually navigate to submenus.</p></div>
<div class="section" title="UMG buttons"><div class="titlepage"><div><div><h1 class="title"><a id="ch04lvl1sec31"/>UMG buttons</h1></div></div></div><p>So far, we <a id="id219" class="indexterm"/>have created the first screen of our pause menu that includes all of our characters and placeholders for their stats and gold. The <a id="id220" class="indexterm"/>next thing we need to design is buttons, which will be the last portion of our first pause screen. Much like buttons in other software packages, they are typically used to trigger events built around mouse clicks. A programmer can simply have their button listen to a press from a mouse button and cause an action or series of actions to occur based around that button click. The buttons we are creating will be used as navigation to submenus since we need a way of navigating through the inventory and equipment screens. Therefore, on our main screen, we will need a button for both inventory and equipment. We will also need a button to go to the pause menu and resume playing the game as well.</p><p>Let us start by creating our first button. Navigate to <span class="strong"><strong>Palette</strong></span> | <span class="strong"><strong>Common</strong></span> | <span class="strong"><strong>Button</strong></span> and place it in your Canvas Panel under the <span class="strong"><strong>Hierarchy</strong></span> tab:</p><div class="mediaobject"><img src="graphics/B04548_04_34.jpg" alt="UMG buttons"/></div><p>For organization<a id="id221" class="indexterm"/> purposes, we will lay our first button on the <a id="id222" class="indexterm"/>top-right of the menu. So the best thing to do is navigate to <span class="strong"><strong>Details</strong></span> | <span class="strong"><strong>Slot</strong></span> | <span class="strong"><strong>Anchors</strong></span> and anchor the button at the top-right. This will ensure that as the screen or objects resize, the button aligns to the right-hand side:</p><div class="mediaobject"><img src="graphics/B04548_04_35.jpg" alt="UMG buttons"/></div><p>You should <a id="id223" class="indexterm"/>notice that the anchor icon on your screen moves to the top-right of the screen. You will also notice that the <span class="strong"><strong>Position X</strong></span> value changes to a negative number that reflects the size of your screen, since the origin of the button position is placed <a id="id224" class="indexterm"/>at the opposite end of the screen; the values of <span class="strong"><strong>Position X</strong></span> of this particular button are now flipped. This concept may be confusing at first, but it will make the math for the placement of each button much easier in the long run:</p><div class="mediaobject"><img src="graphics/B04548_04_36.jpg" alt="UMG buttons"/></div><p>Change the <span class="strong"><strong>Position X</strong></span> value to <span class="strong"><strong>-200</strong></span> (since <span class="strong"><strong>Position X</strong></span> of the button is now <span class="strong"><strong>-1920</strong></span> to be positioned from the left and <span class="strong"><strong>-100</strong></span> to be positioned to the right, to add <span class="strong"><strong>100</strong></span> pixels of padding would be <span class="strong"><strong>-200</strong></span>) and <span class="strong"><strong>Position Y</strong></span> value to <span class="strong"><strong>100</strong></span>. Name this button <span class="strong"><strong>Button_Inventory</strong></span>:</p><div class="mediaobject"><img src="graphics/B04548_04_38.jpg" alt="UMG buttons"/></div><p>We will now <a id="id225" class="indexterm"/>add<a id="id226" class="indexterm"/> text to the button. So select <span class="strong"><strong>Text</strong></span> under <span class="strong"><strong>Palette</strong></span> | <span class="strong"><strong>Common</strong></span> | <span class="strong"><strong>Text</strong></span> and drag it into the button. You will notice that the text is within the button in both the <span class="strong"><strong>Hierarchy</strong></span> tab and the <span class="strong"><strong>Designer</strong></span> view:</p><div class="mediaobject"><img src="graphics/B04548_04_39.jpg" alt="UMG buttons"/></div><p>You may also<a id="id227" class="indexterm"/> notice <a id="id228" class="indexterm"/>that the text is not sized to our liking and it does not fit into the button. Rather than resizing the button right away, let us resize the text to our liking first and then resize the button around the text so that the text is readable. Navigate to <span class="strong"><strong>Details</strong></span> | <span class="strong"><strong>Appearance</strong></span> | <span class="strong"><strong>Font</strong></span> and change the font size to <span class="strong"><strong>48</strong></span>:</p><div class="mediaobject"><img src="graphics/B04548_04_40.jpg" alt="UMG buttons"/></div><p>Then, under <span class="strong"><strong>Details</strong></span> | <span class="strong"><strong>Content</strong></span> | <span class="strong"><strong>Text</strong></span>, change <a id="id229" class="indexterm"/>the text to <span class="strong"><strong>Inventory</strong></span> and <a id="id230" class="indexterm"/>the name of the Text widget to <span class="strong"><strong>Menu_Inventory</strong></span>:</p><div class="mediaobject"><img src="graphics/B04548_04_41.jpg" alt="UMG buttons"/></div><p>Click <a id="id231" class="indexterm"/>on <span class="strong"><strong>Button_Inventory</strong></span>. You <a id="id232" class="indexterm"/>may be thinking that checking <span class="strong"><strong>Size to Content</strong></span> would be the right idea here, but it isn't in our circumstances because you will be creating multiple buttons, each with a different text in it. Therefore, if they were all sized to the content (content being the text within the button), all your buttons would be sized differently, which is very unattractive. Instead, you should pick a button size that will easily fit all the text, even for your longest worded text. For this button, we will change the <span class="strong"><strong>Size X</strong></span> value to <span class="strong"><strong>350</strong></span> and <span class="strong"><strong>Size Y</strong></span> value to <span class="strong"><strong>100</strong></span>:</p><div class="mediaobject"><img src="graphics/B04548_04_42.jpg" alt="UMG buttons"/></div><p>You will notice that the <a id="id233" class="indexterm"/>button is drawn off the screen and<a id="id234" class="indexterm"/> this is because the button, like every other object, is still drawn from the top-left of the object, so we will need to adjust our <span class="strong"><strong>Position X</strong></span> value again; however, the math is easy since we are anchored at the top-right. All we need to do is take the horizontal sizes of our button, 350, and then subtract it from where the button thinks the right edge of our screen is due to the anchor, which is 0. So this gives us <span class="emphasis"><em>0 - 350 = -350</em></span>. Then, we take -350 and subtract the 100 pixels of padding that we want, which gives us <span class="emphasis"><em>-350 - 100 = -450</em></span>, which is the value we should change our <span class="strong"><strong>Position X</strong></span> to:</p><div class="mediaobject"><img src="graphics/B04548_04_43.jpg" alt="UMG buttons"/></div><p>Now that we <a id="id235" class="indexterm"/>have a button perfectly placed, we <a id="id236" class="indexterm"/>can place more buttons. We will use the same steps to create an <span class="strong"><strong>Equipment</strong></span> button below the <span class="strong"><strong>Inventory</strong></span> button. Once you have completed creating the <span class="strong"><strong>Equipment</strong></span> button, it can be placed just below the <span class="strong"><strong>Inventory</strong></span> button:</p><div class="mediaobject"><img src="graphics/B04548_04_44.jpg" alt="UMG buttons"/></div><p>We can also <a id="id237" class="indexterm"/>create <a id="id238" class="indexterm"/>an <span class="strong"><strong>Exit</strong></span> button, which we will place at the bottom-right of the screen:</p><div class="mediaobject"><img src="graphics/B04548_04_45.jpg" alt="UMG buttons"/></div><p>There you have<a id="id239" class="indexterm"/> it—we have finished designing the first<a id="id240" class="indexterm"/> screen of our pause menu. You will notice that we have not yet programmed the buttons to do anything, and this is because we do not have screens for the buttons to navigate to, so it won't make sense to program the buttons just yet. The next steps will be to design our submenus.</p></div>
<div class="section" title="The UMG inventory submenu"><div class="titlepage"><div><div><h1 class="title"><a id="ch04lvl1sec32"/>The UMG inventory submenu</h1></div></div></div><p>As <a id="id241" class="indexterm"/>mentioned earlier, we need to create submenus for our buttons to navigate to. Using UMG, there are several ways to create submenus, but <a id="id242" class="indexterm"/>the most straightforward way is to create a new Widget Blueprint for each submenu and then bind the Widget Blueprints together.</p><p>Since we will need many of the same items in our submenus such as the character names and most of their stats, we can save a lot of time by carefully making a copy of our main pause menu, renaming it, and then editing it to fit whatever submenus we need. Since we have initially saved the main pause menu as <span class="strong"><strong>Pause</strong></span>, we may want to first rename it so that it is more descriptive. So head back into your <span class="strong"><strong>Content Browser</strong></span>, locate where you saved your pause menu, and rename it by right-clicking on the pause menu widget and selecting <span class="strong"><strong>Rename</strong></span>. Rename this file as <span class="strong"><strong>Pause_Main</strong></span>:</p><div class="mediaobject"><img src="graphics/B04548_04_46.jpg" alt="The UMG inventory submenu"/></div><p>Next, make<a id="id243" class="indexterm"/> a duplicate of <span class="strong"><strong>Pause_Main</strong></span> by<a id="id244" class="indexterm"/> right clicking on the file and selecting <span class="strong"><strong>Duplicate</strong></span>:</p><div class="mediaobject"><img src="graphics/B04548_04_47.jpg" alt="The UMG inventory submenu"/></div><p>Rename <a id="id245" class="indexterm"/>this <a id="id246" class="indexterm"/>as <span class="strong"><strong>Pause_Inventory</strong></span>:</p><div class="mediaobject"><img src="graphics/B04548_04_48.jpg" alt="The UMG inventory submenu"/></div><p>We will now be able to design an <span class="strong"><strong>Inventory</strong></span> screen. Open up your newly created <span class="strong"><strong>Pause_Inventory</strong></span> Widget Blueprint. You will notice that it is an exact duplicate of <span class="strong"><strong>Pause_Main</strong></span>. From here, we can edit out what is not needed. First <a id="id247" class="indexterm"/>of all, we are not planning to have any items that affect XP, so we can remove XP Text Blocks from our characters:</p><div class="mediaobject"><img src="graphics/B04548_04_49.jpg" alt="The UMG inventory submenu"/></div><p>Also, we will <a id="id248" class="indexterm"/>not need to keep a track of gold in our <span class="strong"><strong>Inventory</strong></span> screen either. So, we can remove gold.</p><p>For ease of creation, we will also make the navigation around the main pause screen and its submenus "old school", by using <span class="strong"><strong>Pause_Main</strong></span> as a central hub to all submenus, such as <span class="strong"><strong>Pause_Inventory</strong></span> and <span class="strong"><strong>Pause_Equipment</strong></span>, and only allowing the player to enter the <span class="strong"><strong>Equipment</strong></span> screen if they are backed out to <span class="strong"><strong>Pause_Main</strong></span> and they press the <span class="strong"><strong>Equipment</strong></span> button from there. Based on the idea behind this design, we may also remove the <span class="strong"><strong>Inventory</strong></span> and <span class="strong"><strong>Equipment</strong></span> buttons from this screen:</p><div class="mediaobject"><img src="graphics/B04548_04_51.jpg" alt="The UMG inventory submenu"/></div><p>We can, however, keep<a id="id249" class="indexterm"/> the <span class="strong"><strong>Exit</strong></span> button, but <a id="id250" class="indexterm"/>based on our ideas behind the screen navigation, we should rename this button and its Text Block to reflect backing out of the screen and going to <span class="strong"><strong>Pause_Main</strong></span> when pressed. So we can select <span class="strong"><strong>Button_Exit</strong></span> and rename it as <span class="strong"><strong>Button_Back</strong></span>:</p><div class="mediaobject"><img src="graphics/B04548_04_52.jpg" alt="The UMG inventory submenu"/></div><p>Then, select <a id="id251" class="indexterm"/>the Text Block within <a id="id252" class="indexterm"/>the <span class="strong"><strong>Exit</strong></span> button, rename it as <span class="strong"><strong>Menu_Back</strong></span>, and change the text to <span class="strong"><strong>Back</strong></span>:</p><div class="mediaobject"><img src="graphics/B04548_04_53.jpg" alt="The UMG inventory submenu"/></div><p>In the previous chapter, we defined more stats than just HP and MP; we also defined attack power, defense, and luck. While health and magic potions don't typically affect any stats other <a id="id253" class="indexterm"/>than HP or MP, you may later on want <a id="id254" class="indexterm"/>to create items that are usable and effect things such as luck, defense, or attack power. In preparation of this, we will create placeholders for these three other stats for each character in the same way you created the HP and MP Text Blocks. We will be positioning these stats below the HP and MP stats. Note that, if you run out of room for these stats, you may need to play around with spacing. Also, remember to name all Text Blocks you make with something very descriptive so that you can identify them when the time comes to reference them.</p><p>When you are finished adding stats, your Text Blocks should look something like the following screenshot:</p><div class="mediaobject"><img src="graphics/B04548_04_54.jpg" alt="The UMG inventory submenu"/></div><p>We now need a place <a id="id255" class="indexterm"/>that will populate our inventory. Since we are unsure about how many items the player in the game will carry, it will be safest to create a Scroll Box that will be populated with our inventory. We will also want to create a Scroll Box that is wide enough <a id="id256" class="indexterm"/>in case we have items that have very long names. If you designed your screen like I have, you should have plenty of room for a Scroll Box. To create a Scroll Box, navigate to <span class="strong"><strong>Palette</strong></span> | <span class="strong"><strong>Panel</strong></span> | <span class="strong"><strong>Scroll Box</strong></span>:</p><div class="mediaobject"><img src="graphics/B04548_04_55.jpg" alt="The UMG inventory submenu"/></div><p>Then, drag it into your Canvas Panel under the <span class="strong"><strong>Hierarchy</strong></span> tab:</p><div class="mediaobject"><img src="graphics/B04548_04_56.jpg" alt="The UMG inventory submenu"/></div><p>For now, rename <a id="id257" class="indexterm"/>the Scroll Box as <span class="strong"><strong>ScrollBox_Inventory</strong></span>. Then, change<a id="id258" class="indexterm"/> the position so that it is placed in the middle of the screen while neatly taking up a wide amount space on the screen. I will change my <span class="strong"><strong>Position X</strong></span> value to <span class="strong"><strong>700</strong></span>, <span class="strong"><strong>Position Y</strong></span> value to <span class="strong"><strong>200</strong></span>, <span class="strong"><strong>Size X</strong></span> value to 600, and <span class="strong"><strong>Size Y</strong></span> value to <span class="strong"><strong>600</strong></span>. When you are finished, your Scroll Box should look something like the following screenshot:</p><div class="mediaobject"><img src="graphics/B04548_04_57.jpg" alt="The UMG inventory submenu"/></div><p>In a later chapter, we<a id="id259" class="indexterm"/> will be dynamically inserting items into the Scroll Box and creating logic to apply the effects of the items to each character.</p><p>To finish off this <a id="id260" class="indexterm"/>screen, you should notify the player about which screen they are currently viewing. So create another Text Block and size the font to something large, such as 48 pixels. Pick an anchor for your Text Block that is at the center-top. This will make it such that your Text Block recognizes the 0 <span class="emphasis"><em>X</em></span> position as the middle of the screen and the <span class="emphasis"><em>0</em></span> Y position as the top of the screen. So you can now put <span class="strong"><strong>0</strong></span> as the <span class="strong"><strong>Position X</strong></span> value and pad the <span class="strong"><strong>Position Y</strong></span> value:</p><div class="mediaobject"><img src="graphics/B04548_04_59.jpg" alt="The UMG inventory submenu"/></div><p>You will <a id="id261" class="indexterm"/>notice that the inventory is not quite <a id="id262" class="indexterm"/>written at the middle of the screen, so adjust the <span class="strong"><strong>Position X</strong></span> value until it is. I changed my <span class="strong"><strong>Position X</strong></span> value to half of the size of the Text Block, which came out to be -135:</p><div class="mediaobject"><img src="graphics/B04548_04_60.jpg" alt="The UMG inventory submenu"/></div><p>At this <a id="id263" class="indexterm"/>point, you <a id="id264" class="indexterm"/>can save and compile your <span class="strong"><strong>Inventory</strong></span> screen. We are done for now.</p></div>
<div class="section" title="The UMG equipment submenu"><div class="titlepage"><div><div><h1 class="title"><a id="ch04lvl1sec33"/>The UMG equipment submenu</h1></div></div></div><p>The last <a id="id265" class="indexterm"/>submenu we need to design is the equipment <a id="id266" class="indexterm"/>submenu. Since our submenu for equipment will be very similar to the submenu for inventory, the easiest way to start would be to navigate back to <span class="strong"><strong>Content Browser</strong></span>, duplicate <span class="strong"><strong>Pause_Inventory</strong></span>, and rename it as <span class="strong"><strong>Pause_Equipment</strong></span> so that <span class="strong"><strong>Pause_Equipment</strong></span> is a direct copy of <span class="strong"><strong>Pause_Inventory</strong></span>. Next, open up <span class="strong"><strong>Pause_Equipment</strong></span>.</p><p>We will be designing this screen in a similar way to the <span class="strong"><strong>Inventory</strong></span> screen. We will still be using the Scroll Box to populate items (in this case, equipment). We will be mostly keeping the same stats for each character; we will continue utilizing the Back button that will eventually navigate back to the pause screen. Let us edit the differences. First, change the title of the screen from <span class="strong"><strong>Inventory</strong></span> to <span class="strong"><strong>Equipment</strong></span> and reposition it so that it is horizontally aligned to the middle of the screen:</p><div class="mediaobject"><img src="graphics/B04548_04_61.jpg" alt="The UMG equipment submenu"/></div><p>Next, we will <a id="id267" class="indexterm"/>need to edit the character stats. We may have equipment in this game that when equipped, will change the AP, DP, and Lk stats. However, we<a id="id268" class="indexterm"/> will most likely not have equipment that will have an effect on HP and MP. We also know that we will need weapons and armor for each character. Therefore, we can easily edit the text of HP and MP out with weapon and armor (which I will call <span class="strong"><strong>Weap</strong></span> and <span class="strong"><strong>Arm</strong></span> to save space). In terms of details, I will change the name of the <span class="strong"><strong>Menu_HP</strong></span> text block to <span class="strong"><strong>Menu_Weapon</strong></span> and the text of the Text Block to <span class="strong"><strong>Weap</strong></span>. We will do something similar to <span class="strong"><strong>Menu_MP</strong></span> by changing it to an armor slot:</p><div class="mediaobject"><img src="graphics/B04548_04_62.jpg" alt="The UMG equipment submenu"/></div><p>Follow similar <a id="id269" class="indexterm"/>naming conventions when <a id="id270" class="indexterm"/>switching out any other character's HP and MP with weapon and armor placeholders. When you are finished, your screen should look like the following screenshot:</p><div class="mediaobject"><img src="graphics/B04548_04_63.jpg" alt="The UMG equipment submenu"/></div><p>Since our<a id="id271" class="indexterm"/> characters<a id="id272" class="indexterm"/> will be equipping weapons and armor, we will need placeholders for these slots. Eventually, we will allow the player to select equipment that they want to equip, and the equipment will appear in the appropriate weapon or armor slot. The type of widget that would be most appropriate is <span class="strong"><strong>Border</strong></span>. This will contain a Text Block that will change when a weapon or armor is equipped. To do this, select <span class="strong"><strong>Border</strong></span> from <span class="strong"><strong>Palette</strong></span> | <span class="strong"><strong>Common</strong></span> | <span class="strong"><strong>Border</strong></span>. Drag the Border into the Canvas Panel:</p><div class="mediaobject"><img src="graphics/B04548_04_65.jpg" alt="The UMG equipment submenu"/></div><p>Then, position the<a id="id273" class="indexterm"/> Canvas Panel so that it is in <a id="id274" class="indexterm"/>the same position as the Text Block that is placed to the right of the soldier's <span class="strong"><strong>Menu_Weapon</strong></span>. At this point, you may delete the Text Block that is to the right of <span class="strong"><strong>Menu_Weapon</strong></span>. It was originally used as the text for HP, and we will no longer need it:</p><div class="mediaobject"><img src="graphics/B04548_04_67.jpg" alt="The UMG equipment submenu"/></div><p>We will <a id="id275" class="indexterm"/>still <a id="id276" class="indexterm"/>need text in the border, so drop text from <span class="strong"><strong>Palette</strong></span> | <span class="strong"><strong>Common</strong></span> | <span class="strong"><strong>Text</strong></span> into your Border:</p><div class="mediaobject"><img src="graphics/B04548_04_68.jpg" alt="The UMG equipment submenu"/></div><p>You can keep<a id="id277" class="indexterm"/> the <a id="id278" class="indexterm"/>defaults of the Text Block for now, except you will notice that the border did not resize and everything is still white. Navigate back to your Border and check <span class="strong"><strong>Size to Content</strong></span>. Under <span class="strong"><strong>Appearance</strong></span> | <span class="strong"><strong>Brush Color</strong></span>, change the <span class="strong"><strong>A</strong></span> value to <span class="strong"><strong>0</strong></span>. The <span class="strong"><strong>A</strong></span> value is alpha. When the alpha is 0, the color is completely transparent, and when the alpha is 1, the color is completely opaque; anywhere in between is only slightly transparent. We don't really care about seeing the color of the block, we want it to be invisible to the player:</p><div class="mediaobject"><img src="graphics/B04548_04_69.jpg" alt="The UMG equipment submenu"/></div><p>Lastly, change<a id="id279" class="indexterm"/> the Border name to<a id="id280" class="indexterm"/> something descriptive such as <span class="strong"><strong>Border_Weapon</strong></span>:</p><div class="mediaobject"><img src="graphics/B04548_04_70.jpg" alt="The UMG equipment submenu"/></div><p>Navigate<a id="id281" class="indexterm"/> back <a id="id282" class="indexterm"/>to the Text Block within the border. Name the Text Block <span class="strong"><strong>Text_Weapon</strong></span>, and change the font to a regular style at 32 pixels to match the rest of the Text Blocks:</p><div class="mediaobject"><img src="graphics/B04548_04_71.jpg" alt="The UMG equipment submenu"/></div><p>Now that <a id="id283" class="indexterm"/>you <a id="id284" class="indexterm"/>know how to design borders and Text Blocks for the soldier's weapon, you can design Borders and Text Blocks for the soldier's armor and any other character's weapon and armor. When you are finished, you should have something that looks like the following screenshot:</p><div class="mediaobject"><img src="graphics/B04548_04_72.jpg" alt="The UMG equipment submenu"/></div><p>At this point, we <a id="id285" class="indexterm"/>are finished designing all<a id="id286" class="indexterm"/> our screens that appear when the player presses the pause button. The next steps will be to program the functionality of these screens.</p></div>
<div class="section" title="Key binding"><div class="titlepage"><div><div><h1 class="title"><a id="ch04lvl1sec34"/>Key binding</h1></div></div></div><p>We are <a id="id287" class="indexterm"/>now going to bind a key to open up the pause menu, and<a id="id288" class="indexterm"/> only allow this to happen when the player is not in battle (in other words, the player is out in the field). Since we already have a <span class="strong"><strong>FieldPlayer</strong></span> set up from the previous chapter, we can easily create actions within our <span class="strong"><strong>FieldPlayer</strong></span> Blueprint class that will control our pause menu. To start, navigate to <span class="strong"><strong>Blueprints</strong></span> | <span class="strong"><strong>Open Blueprint Class…</strong></span> | <span class="strong"><strong>FieldPlayer</strong></span>:</p><div class="mediaobject"><img src="graphics/B04548_04_73.jpg" alt="Key binding"/></div><p>At this point, we <a id="id289" class="indexterm"/>are going to want to have the pause screen pop up when the player presses a key; in this case, we will use <span class="emphasis"><em>P</em></span> for pause. To do this, we<a id="id290" class="indexterm"/> will first need to create a key event that will fire off a set of actions of our choice after a specific key is pressed. To start this key event, right-click on your Event Graph, which will open up all actions that can be associated with this Blueprint, and then navigate to <span class="strong"><strong>Input</strong></span> | <span class="strong"><strong>KeyEvents</strong></span> | <span class="strong"><strong>P</strong></span>:</p><div class="mediaobject"><img src="graphics/B04548_04_74.jpg" alt="Key binding"/></div><p>Once done, this <a id="id291" class="indexterm"/>will create a key event for the press and release of <span class="emphasis"><em>P</em></span>. You <a id="id292" class="indexterm"/>will notice that this event has pressed and released executables that work as they are described, an action can occur when the player presses <span class="emphasis"><em>P</em></span> or when the player releases <span class="emphasis"><em>P</em></span>. For our actions regarding the pausing of the game and the pop up of the pause menu, we will use the released executable, because in order for the released executable to be called, it would mean that the player has gone through the act of pressing and releasing the key. It is often the best practice for a player to commit to a button press just like a player commits to a move in Chess by letting go of a piece. Before we pop up the pause menu, let us pause the game by creating a call to the <span class="strong"><strong>Set Game Paused</strong></span> function that can be found by right-clicking in the Event Graph and navigating to <span class="strong"><strong>Game</strong></span> | <span class="strong"><strong>Set Game Paused</strong></span>:</p><div class="mediaobject"><img src="graphics/B04548_04_75.jpg" alt="Key binding"/></div><p>Within<a id="id293" class="indexterm"/> the <span class="strong"><strong>Set Game Paused</strong></span> node, check <span class="strong"><strong>Paused</strong></span> so that it is <a id="id294" class="indexterm"/>set to true, and link the <span class="strong"><strong>Released</strong></span> executable of the key event <span class="strong"><strong>P</strong></span> to the in pin of the <span class="strong"><strong>Set Game Paused</strong></span>. Your game should now pause whenever the player presses and releases <span class="emphasis"><em>P</em></span>:</p><div class="mediaobject"><img src="graphics/B04548_04_76.jpg" alt="Key binding"/></div><p>From here, we will pop up the pause menu. To do so, upon the game being paused, we will create the main pause screen by right-clicking on the Event Graph and navigating to <span class="strong"><strong>User Interface</strong></span> | <span class="strong"><strong>Create Widget</strong></span>. This allows us to create instances of any widget that we made. We<a id="id295" class="indexterm"/> can create our <span class="strong"><strong>Pause_Main</strong></span> here by pressing the <span class="strong"><strong>Select Class</strong></span> drop-down menu within <span class="strong"><strong>Create Widget</strong></span> and selecting <span class="strong"><strong>Pause_Main</strong></span>:</p><div class="mediaobject"><img src="graphics/B04548_04_78.jpg" alt="Key binding"/></div><p>Next, we can link the <a id="id296" class="indexterm"/>out pin of <span class="strong"><strong>Set Game Paused</strong></span> to the in pin of the <span class="strong"><strong>Create Pause_MainWidget</strong></span>:</p><div class="mediaobject"><img src="graphics/B04548_04_79.jpg" alt="Key binding"/></div><p>This will make it such that after the game is paused, <span class="strong"><strong>Pause_Main</strong></span> will be created. Although we are creating <span class="strong"><strong>Pause_Main</strong></span>, this will still not pop up on screen until we tell it to draw on screen. To do so, we will need to create a call to the <span class="strong"><strong>Add to Viewport</strong></span> function that can add any graphic to a viewport. To do this, left-click and drag out the <span class="strong"><strong>Return Value</strong></span> pin from the <span class="strong"><strong>Create Pause_Main</strong></span> widget node, and select <span class="strong"><strong>User Interface</strong></span> | <span class="strong"><strong>Viewport</strong></span> | <span class="strong"><strong>Add to Viewport</strong></span>. This will create a new <span class="strong"><strong>Add to Viewport</strong></span> node:</p><div class="mediaobject"><img src="graphics/B04548_04_80.jpg" alt="Key binding"/></div><p>If you test<a id="id297" class="indexterm"/> this, you will notice that the game pauses and the pause <a id="id298" class="indexterm"/>menu pops up, but it is missing a mouse cursor. To add the mouse cursor, we will first need to get the player controller by right-clicking on the Event Graph and navigating to <span class="strong"><strong>Game</strong></span> | <span class="strong"><strong>Get Player Controller</strong></span> | <span class="strong"><strong>Get Player Controller</strong></span>:</p><div class="mediaobject"><img src="graphics/B04548_04_81.jpg" alt="Key binding"/></div><p>From here, simply <a id="id299" class="indexterm"/>left-click and drag out the <span class="strong"><strong>Return Value</strong></span> pin <a id="id300" class="indexterm"/>from the <span class="strong"><strong>Get Player Controller</strong></span> node, then select <span class="strong"><strong>Variables</strong></span> | <span class="strong"><strong>Mouse Interface</strong></span> | <span class="strong"><strong>Set Show Mouse Cursor</strong></span>:</p><div class="mediaobject"><img src="graphics/B04548_04_82.jpg" alt="Key binding"/></div><p>Once done, link<a id="id301" class="indexterm"/> the out pin of the <span class="strong"><strong>Add to Viewport</strong></span> node to the in pin of <span class="strong"><strong>Set Show Mouse Cursor</strong></span>. What this will do is set the <span class="strong"><strong>Show Mouse Cursor</strong></span> variable (which is a Boolean) to either true or false after the pause menu has been displayed in the viewport. The <span class="strong"><strong>Set Show Mouse Cursor</strong></span> variable needs to also get the player controller because the player controller holds the mouse input information.</p><p>If you playtest this <a id="id302" class="indexterm"/>now, you will notice that the mouse cursor still does not show up; this is because <span class="strong"><strong>Show Mouse Cursor</strong></span> within <span class="strong"><strong>Set Show Mouse Cursor</strong></span> is unchecked, meaning that <span class="strong"><strong>Show Mouse Cursor</strong></span> is set to false, so check the box whenever you want to show the mouse cursor.</p><p>At this point, your menu should pop up perfectly after pressing <span class="emphasis"><em>P</em></span> and the mouse should be completely visible and controllable. Your level blueprint should now look like the following screenshot:</p><div class="mediaobject"><img src="graphics/B04548_04_84.jpg" alt="Key binding"/></div><p>You will notice <a id="id303" class="indexterm"/>that none of the buttons work in the actual <a id="id304" class="indexterm"/>menu so we cannot exit the pause menu or view any of the submenus. This is because we have not programmed any of the menu buttons yet. We will now focus on programming those buttons.</p></div>
<div class="section" title="Button programming"><div class="titlepage"><div><div><h1 class="title"><a id="ch04lvl1sec35"/>Button programming</h1></div></div></div><p>Now that<a id="id305" class="indexterm"/> we have completed player access <a id="id306" class="indexterm"/>to the pause menu, we will now focus on navigation within the main pause menu and its submenus. At this point, head back into your <span class="strong"><strong>Pause_Main</strong></span> widget. Let us first create the navigation to <span class="strong"><strong>Pause_Inventory</strong></span>. To do this, click on the <span class="strong"><strong>Inventory</strong></span> button:</p><div class="mediaobject"><img src="graphics/B04548_04_85.jpg" alt="Button programming"/></div><p>Navigate<a id="id307" class="indexterm"/> to <span class="strong"><strong>Details</strong></span> | <span class="strong"><strong>Events</strong></span> | <span class="strong"><strong>OnClicked</strong></span> and then press the <span class="strong"><strong>+</strong></span> button:</p><div class="mediaobject"><img src="graphics/B04548_04_86.jpg" alt="Button programming"/></div><p>Clicking<a id="id308" class="indexterm"/> on the <span class="strong"><strong>+</strong></span> button will automatically open the<a id="id309" class="indexterm"/> Event Graph of <span class="strong"><strong>Pause_Main</strong></span> and also create an <span class="strong"><strong>OnClicked</strong></span> event:</p><div class="mediaobject"><img src="graphics/B04548_04_87.jpg" alt="Button programming"/></div><p>The <span class="strong"><strong>OnClicked</strong></span> event <a id="id310" class="indexterm"/>will work similar to our key bind in the previous section where we created something that allows us to press a key, which triggers an event that can then trigger a series of actions. Only this time, the <span class="strong"><strong>OnClicked</strong></span> event is bound to our <span class="strong"><strong>Inventory</strong></span> button and will only trigger when the user has left-clicked on the <span class="strong"><strong>Inventory</strong></span> button. What we will want to do is, when we click on the <span class="strong"><strong>Inventory</strong></span> button, have it create a <span class="strong"><strong>Pause_Inventory</strong></span> widget that gets displayed on the screen. This should <a id="id311" class="indexterm"/>sound very familiar because we just did something like this with <span class="strong"><strong>Pause_Main</strong></span>. So firstly, create a widget and attach it to the <span class="strong"><strong>OnClicked</strong></span> event. Next, you will notice that the <span class="strong"><strong>Class</strong></span> pin in the widget is empty so we need to select a class. You will be selecting <span class="strong"><strong>Pause_Inventory</strong></span> since we want to create the inventory widget when the button is pressed:</p><div class="mediaobject"><img src="graphics/B04548_04_89.jpg" alt="Button programming"/></div><p>Lastly, just add this widget to the viewport so the user can see the inventory being displayed. In the end, your Blueprint should look like the following screenshot:</p><div class="mediaobject"><img src="graphics/B04548_04_90.jpg" alt="Button programming"/></div><p>If you test your<a id="id312" class="indexterm"/> pause screen now, you should notice that you are able to navigate to<a id="id313" class="indexterm"/> your inventory screen, but you are not able to navigate back to your main pause screen. This is easily fixable. Simply open your <span class="strong"><strong>Pause_Inventory</strong></span> widget, press the <span class="strong"><strong>Back</strong></span> button, navigate to <span class="strong"><strong>Details</strong></span> | <span class="strong"><strong>Events</strong></span> | <span class="strong"><strong>OnClicked</strong></span>, and then press the <span class="strong"><strong>+</strong></span> button:</p><div class="mediaobject"><img src="graphics/B04548_04_91.jpg" alt="Button programming"/></div><p>Just like our last button, the Event Graph will automatically open up and an <span class="strong"><strong>OnClicked</strong></span> event for our button will be created; only this time, the event is bound to our <span class="strong"><strong>Back</strong></span> button:</p><div class="mediaobject"><img src="graphics/B04548_04_92.jpg" alt="Button programming"/></div><p>From here, you will <a id="id314" class="indexterm"/>set the screen to remove itself by linking the <span class="strong"><strong>OnClicked</strong></span> event to <span class="strong"><strong>Remove from Parent</strong></span>.</p><p>When you are finished <a id="id315" class="indexterm"/>creating the Blueprint for your <span class="strong"><strong>Back</strong></span> button, it should look like the following screenshot:</p><div class="mediaobject"><img src="graphics/B04548_04_93.jpg" alt="Button programming"/></div><p>You can now create the same setup for navigation from <span class="strong"><strong>Pause_Equipment</strong></span> by making sure that when we click on the <span class="strong"><strong>Equipment</strong></span> button, we create a <span class="strong"><strong>Pause_Equipment</strong></span> widget and display it; when we click on the <span class="strong"><strong>Back</strong></span> button in the <span class="strong"><strong>Pause_Equipment</strong></span>, we navigate back to the <span class="strong"><strong>Pause_Main</strong></span> removing the <span class="strong"><strong>Pause_Inventory</strong></span> screen.</p><p>The next step is to allow the player to exit when they click on the <span class="strong"><strong>Exit</strong></span> button. To do this, you must first create an <span class="strong"><strong>OnClicked</strong></span> event on the <span class="strong"><strong>Exit</strong></span> button within <span class="strong"><strong>Pause_Main</strong></span>. Again, when you press the <span class="strong"><strong>+</strong></span> button of <span class="strong"><strong>OnClicked</strong></span> within the <span class="strong"><strong>Design</strong></span> view, an <span class="strong"><strong>OnClicked</strong></span> button for the <span class="strong"><strong>Exit</strong></span> button will be created in the Event Graph:</p><div class="mediaobject"><img src="graphics/B04548_04_94.jpg" alt="Button programming"/></div><p>From here, you <a id="id316" class="indexterm"/>will set the screen to remove <a id="id317" class="indexterm"/>itself by linking the <span class="strong"><strong>OnClicked</strong></span> event to <span class="strong"><strong>Remove from Parent</strong></span>:</p><div class="mediaobject"><img src="graphics/B04548_04_95.jpg" alt="Button programming"/></div><p>Your screens should now navigate perfectly, but we are not done yet. The last thing you will notice is that the game is still paused when the pause menu is exited. We will need to unpause the game. This fix is very simple. Within the <span class="strong"><strong>Pause_Main</strong></span> Blueprint, simply link <span class="strong"><strong>Set Game Paused</strong></span> to <span class="strong"><strong>Remove from Parent</strong></span> so that when the widget is removed, the game unpauses:</p><div class="mediaobject"><img src="graphics/B04548_04_96.jpg" alt="Button programming"/></div><p>You may notice that when leaving the pause menu, the mouse cursor is still present. You can remove the mouse cursor by simply creating a <span class="strong"><strong>Set Show Mouse Cursor</strong></span> node and having it connected to your <span class="strong"><strong>OnClicked Button_Exit</strong></span> event after you unpause the game, which would be similar to how you added a mouse cursor in the first place, this time making sure the checkbox within the <span class="strong"><strong>Set Show Mouse Cursor</strong></span> node is unchecked meaning that S<span class="strong"><strong>et Show Mouse Cursor</strong></span> is set to false, and attaching a <span class="strong"><strong>Get Player Controller</strong></span> to it.</p><p>There you <a id="id318" class="indexterm"/>have it. We are now finished with <a id="id319" class="indexterm"/>the navigation of our pause menu and its submenus.</p></div>
<div class="section" title="Summary"><div class="titlepage"><div><div><h1 class="title"><a id="ch04lvl1sec36"/>Summary</h1></div></div></div><p>In this chapter, we completed pause menu placeholders for other important aspects of our game such as the <span class="strong"><strong>Inventory</strong></span> and <span class="strong"><strong>Equipment</strong></span> Scroll Boxes that will hold the inventory/equipment that we acquire in the game. We will continue to add to this pause menu in the next few chapters by covering the tracking of stats, gold, items, and equipment.</p></div></body></html>