<html><head></head><body><div class="chapter" title="Chapter&#xA0;6.&#xA0;NPCs and Dialog"><div class="titlepage"><div><div><h1 class="title"><a id="ch06"/>Chapter 6. NPCs and Dialog</h1></div></div></div><p>By now, you already have a player character by default that interacts with battles on the field, but the game is in dire need of <a id="id347" class="indexterm"/><span class="strong"><strong>non-player characters</strong></span> (<span class="strong"><strong>NPCs</strong></span>).</p><p>In this chapter, you will create an NPC that will act as an information hub and shop owner. Since we have not yet given useable items and equipment to the character, or a reason for the character to have gold, the next logical step is to create a shop owner who will play the role of an NPC by talking to the player and offering the player business transactions when the player decides to interact with the NPC.</p><p>We will cover the following topics in this chapter:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Creating the NPC Character Blueprint</li><li class="listitem" style="list-style-type: disc">Interacting with the NPC</li><li class="listitem" style="list-style-type: disc">Dialog box setup</li><li class="listitem" style="list-style-type: disc">Creating an NPC welcome box</li><li class="listitem" style="list-style-type: disc">Adding an NPC talk box</li></ul></div><div class="section" title="Creating the NPC Character Blueprint"><div class="titlepage"><div><div><h1 class="title"><a id="ch06lvl1sec41"/>Creating the NPC Character Blueprint</h1></div></div></div><p>To get started, we <a id="id348" class="indexterm"/>will need to create a new Character Blueprint class. Since we already have a location for characters, navigate to the <code class="literal">character</code> folder located in your <span class="strong"><strong>Content Browser</strong></span> under <span class="strong"><strong>Content</strong></span> | <span class="strong"><strong>Blueprints</strong></span> | <span class="strong"><strong>Characters</strong></span> (create a new <code class="literal">character</code> folder in <code class="literal">content/blueprints</code> if one is not there already, just to stay more organized; you can even drag your <span class="strong"><strong>FieldPlayer</strong></span> Blueprint into the <code class="literal">character</code> folder if you'd like), and add a new character by clicking on <span class="strong"><strong>Add New</strong></span> | <span class="strong"><strong>Blueprint Class</strong></span>:</p><div class="mediaobject"><img src="graphics/B04548_06_01.jpg" alt="Creating the NPC Character Blueprint"/></div><p>The <span class="strong"><strong>Pick Parent Class</strong></span> window <a id="id349" class="indexterm"/>will pop up. This will allow you to pick a common parent class for your Blueprint class or create your own class:</p><div class="mediaobject"><img src="graphics/B04548_06_02.jpg" alt="Creating the NPC Character Blueprint"/></div><p>UE4 has a lot of <a id="id350" class="indexterm"/>common classes built in, which have a lot of the frameworks of several different types of classes already built for us. One of those classes is <span class="strong"><strong>Character</strong></span> which allows us to work with a common character framework for use with any type of character pawn we want. So, from this window, select <span class="strong"><strong>Character</strong></span>.</p><p>Once you have selected <span class="strong"><strong>Character</strong></span>, a new Character Blueprint should now be in <span class="strong"><strong>Content</strong></span> | <span class="strong"><strong>Blueprints</strong></span> | <span class="strong"><strong>Characters</strong></span>. Rename the character as <span class="strong"><strong>NPC_ShopOwner</strong></span> since we will be using this character as the shop owner:</p><div class="mediaobject"><img src="graphics/B04548_06_03.jpg" alt="Creating the NPC Character Blueprint"/></div><p>From here, open <span class="strong"><strong>NPC_ShopOwner</strong></span> to <a id="id351" class="indexterm"/>enter the viewport of your new character:</p><div class="mediaobject"><img src="graphics/B04548_06_04.jpg" alt="Creating the NPC Character Blueprint"/></div><p>You should see that, as mentioned earlier, this class inherits <code class="literal">Character.h</code> which already has a framework for a lot of components. This will now make it easy for us to make a visible NPC. Within the <span class="strong"><strong>Components</strong></span> panel, you will see <span class="strong"><strong>CapsuleComponent</strong></span>, which holds inherited data such as <span class="strong"><strong>ArrowComponent</strong></span> that determines which way the object is pointing, and <span class="strong"><strong>Mesh</strong></span>, which holds an instance of a skeletal mesh.</p><p>Let us first apply a <a id="id352" class="indexterm"/>mesh and animations to our <span class="strong"><strong>Mesh</strong></span> component. Since we are not creating character models and animations in this book, we can simply use built-in assets. First, click on <span class="strong"><strong>Mesh</strong></span> within <span class="strong"><strong>Components</strong></span> | <span class="strong"><strong>CapsuleComponent</strong></span>:</p><div class="mediaobject"><img src="graphics/B04548_06_05.jpg" alt="Creating the NPC Character Blueprint"/></div><p>From here, you will notice that your <span class="strong"><strong>Details</strong></span> panel changes in order to display the <span class="strong"><strong>Mesh</strong></span> variable and its components. For now, we will want to keep most of the defaults here since the character has everything we would want out of an NPC. However, the character does not have a mesh, so let's give it one by navigating to <span class="strong"><strong>Details</strong></span> | <span class="strong"><strong>Mesh</strong></span> and, in <span class="strong"><strong>Skeletal Mesh</strong></span>, selecting the <span class="strong"><strong>None</strong></span> drop-down menu that would house a skeletal mesh. Then, you should see all the skeletal meshes available in our project. In our game, there is a skeletal mesh called <span class="strong"><strong>SK_Mannequin</strong></span>, we will select this as our skeletal mesh:</p><div class="mediaobject"><img src="graphics/B04548_06_06.jpg" alt="Creating the NPC Character Blueprint"/></div><p>Now that we have <a id="id353" class="indexterm"/>selected a skeletal mesh, you should see it displayed in your viewport. At this point, you may notice that your skeletal mesh is much higher than the bottom of the capsule because the skeletal mesh's origin is at its feet and is attached to the origin of the capsule that is located in the middle of the capsule. There are a lot of ways to fix this problem, but the quickest way would be to reposition the character manually by bringing the character down on the <span class="emphasis"><em>Z</em></span> axis. A value of <span class="strong"><strong>-90</strong></span> for <span class="strong"><strong>Z Location</strong></span> seems to work perfectly in this example:</p><div class="mediaobject"><img src="graphics/B04548_06_07.jpg" alt="Creating the NPC Character Blueprint"/></div><p>You will also want the<a id="id354" class="indexterm"/> character to be facing the right way. You can see that the character is faced the wrong way because the arrow component is pointing perpendicular to the way the character is facing. Simply adjust the character rotation on the <span class="emphasis"><em>Z</em></span> axis. A value of <span class="strong"><strong>-90</strong></span> for <span class="strong"><strong>Z Rotation</strong></span> seems to do the trick:</p><div class="mediaobject"><img src="graphics/B04548_06_08.jpg" alt="Creating the NPC Character Blueprint"/></div><p>Lastly, we need to <a id="id355" class="indexterm"/>get the character out of the relaxed pose. So navigate to <span class="strong"><strong>Details</strong></span> | <span class="strong"><strong>Animation</strong></span> and select the <span class="strong"><strong>Anim Class</strong></span> drop-down menu. In this drop-down menu, select <span class="strong"><strong>ThirdPerson_AnimBP</strong></span>, which is the animation class for the character we selected. If you are using another character with a different animation class, be sure to select the animation class that is built for your character:</p><div class="mediaobject"><img src="graphics/B04548_06_09.jpg" alt="Creating the NPC Character Blueprint"/></div><p>We also need a way <a id="id356" class="indexterm"/>to interact with this character. For this, we are going to create a volume that expands a certain distance in front of the character; this will be the area in which the player is able to interact with the NPC. To do this, we will need to add another component to <span class="strong"><strong>CapsuleComponent</strong></span>. Navigate to the <span class="strong"><strong>Components</strong></span> panel and select <span class="strong"><strong>Add Component</strong></span> | <span class="strong"><strong>Collision</strong></span> | <span class="strong"><strong>Box Collision</strong></span>:</p><div class="mediaobject"><img src="graphics/B04548_06_10.jpg" alt="Creating the NPC Character Blueprint"/></div><p>This creates a box <a id="id357" class="indexterm"/>collision at the character's origin:</p><div class="mediaobject"><img src="graphics/B04548_06_11.jpg" alt="Creating the NPC Character Blueprint"/></div><p>We are going to use <a id="id358" class="indexterm"/>this collision by calculating whether the player is inside the box or outside the box. If they are in the box, the player will be able to interact with the NPC; if the player is outside the box, the player will not be able to interact with the NPC. Since we want to make this as realistic as possible, the player should only interact with the NPC if the character is standing in front of the NPC. So adjust the location and scale of the box until it is in front of the character and sized such that the player can easily walk a forgivable distance in front of the NPC to interact with it. </p><p>For this character, I will edit the <span class="strong"><strong>Location X</strong></span> value to be <span class="strong"><strong>60</strong></span>, <span class="strong"><strong>Scale X</strong></span> value to be <span class="strong"><strong>2</strong></span>, <span class="strong"><strong>Scale Y</strong></span> value to be <span class="strong"><strong>2</strong></span>, and <span class="strong"><strong>Scale Z</strong></span> value to be <span class="strong"><strong>3</strong></span>:</p><div class="mediaobject"><img src="graphics/B04548_06_12.jpg" alt="Creating the NPC Character Blueprint"/></div><p>Finally, we want to <a id="id359" class="indexterm"/>give the collision box a type that does not block the player, but allows the player to enter the collision box. Navigate to <span class="strong"><strong>Details</strong></span> | <span class="strong"><strong>Collision</strong></span> and under <span class="strong"><strong>Collision Presets</strong></span>, select <span class="strong"><strong>Trigger</strong></span>:</p><div class="mediaobject"><img src="graphics/B04548_06_13.jpg" alt="Creating the NPC Character Blueprint"/></div><p>This will essentially turn the collision box into a trigger volume that can be used to trigger events such <a id="id360" class="indexterm"/>as dialog and shop menus.</p><p>At this point, you can drag and drop your <span class="strong"><strong>NPC_ShopOwner</strong></span> into your level:</p><div class="mediaobject"><img src="graphics/B04548_06_14.jpg" alt="Creating the NPC Character Blueprint"/></div><p>If you playtest this, you should notice that you will collide with the skeletal mesh, but you will not collide with the trigger volume. You are now ready to create Blueprints to make this NPC interactive.</p></div></div>
<div class="section" title="Interacting with the NPC"><div class="titlepage"><div><div><h1 class="title"><a id="ch06lvl1sec42"/>Interacting with the NPC</h1></div></div></div><p>Now that <a id="id361" class="indexterm"/>you have made the NPC and volume that will trigger interaction with the NPC, it is time to program interaction with the NPC by using the trigger volume.</p><p>Let us first think about the logic. What we will want to do is only allow the player to interact with the NPC if the player is within the NPC's line of sight (in this case, the trigger volume). If the player is not within the trigger volume, we do not want to allow the player to interact with the NPC. In this case, we will need some sort of Boolean that will return <span class="emphasis"><em>true</em></span> if the player is in the trigger volume and <span class="emphasis"><em>false</em></span> if the character is not within the trigger volume. We also want to allow the player to press a key to interact with the NPC, but only when the Boolean we create is set to true, since the Boolean we create to keep track of the NPC trigger volume may span across multiple classes. Just like in the previous chapters, let's declare that global variable in <code class="literal">RPGGameInstance.h</code>. We will put the variable in the same <code class="literal">Game Data</code> category that our other global variables are in, but this time, instead of only allowing the Blueprint to read the variable, we need to allow Blueprint to write the variable since we will be switching the variable between true and false. We will add a Boolean called <code class="literal">TalkShop</code> as one of our public variables:</p><div class="informalexample"><pre class="programlisting">UPROPERTY( EditDefaultsOnly, BlueprintReadWrite, Category = "Game Data" )
bool TalkShop;</pre></div><p>When you are finished editing <code class="literal">RPGGameInstance.h</code>, your header file should now look like the following:</p><div class="informalexample"><pre class="programlisting">#pragma once

#include "Engine/GameInstance.h"
#include "GameCharacter.h"

#include "RPGGameInstance.generated.h"

/**
 * 
 */
UCLASS()
class RPG_API URPGGameInstance : public UGameInstance
{
  GENERATED_BODY()

  URPGGameInstance( const class FObjectInitializer&amp; ObjectInitializer );

public:
  UPROPERTY( EditDefaultsOnly, BlueprintReadOnly, Category = "Game Data" )
  TArray&lt;UGameCharacter*&gt; PartyMembers;

  UPROPERTY( EditDefaultsOnly, BlueprintReadWrite, Category = "Game Data" )
  bool TalkShop;

protected:
  bool isInitialized;

public:
  void Init();
  void PrepareReset();
};</pre></div><p>Compile the code <a id="id362" class="indexterm"/>and then head into the <span class="strong"><strong>NPC_ShopOwner</strong></span> Character Blueprint. Select the <span class="strong"><strong>Box</strong></span> component in the <span class="strong"><strong>Components</strong></span> panel, and within the <span class="strong"><strong>Details</strong></span> panel, scroll down to <span class="strong"><strong>Events</strong></span>. You will notice that there are many different types of events that can be created here based around how the box is interacted with:</p><div class="mediaobject"><img src="graphics/B04548_06_15.jpg" alt="Interacting with the NPC"/></div><p>We are most<a id="id363" class="indexterm"/> interested in <span class="strong"><strong>On Component Begin Overlap</strong></span> and <span class="strong"><strong>On Component End Overlap</strong></span> because these are the events that will trigger if something either intersects the box or does not intersect the box. Let us first work on triggering an event if the player intersects the box. So, within <span class="strong"><strong>Details</strong></span> | <span class="strong"><strong>Events</strong></span> | <span class="strong"><strong>On Component Begin Overlap</strong></span>, select <span class="strong"><strong>+</strong></span>. This will automatically open <span class="strong"><strong>Event Graph</strong></span> and create an <span class="strong"><strong>OnComponentBeginOverlap</strong></span> event:</p><div class="mediaobject"><img src="graphics/B04548_06_16.jpg" alt="Interacting with the NPC"/></div><p>All we will need <a id="id364" class="indexterm"/>to do here is simply set the <code class="literal">TalkShop</code> Boolean that we created previously to <code class="literal">true</code> if the player intersects the box. To do so, first cast to the <span class="strong"><strong>FieldPlayer</strong></span> using <span class="strong"><strong>Cast To FieldPlayer</strong></span> located under <span class="strong"><strong>Utilities</strong></span> | <span class="strong"><strong>Casting</strong></span> and set the interaction component to the <span class="strong"><strong>FieldPlayer</strong></span> object by linking the <span class="strong"><strong>OtherActor</strong></span> pin within <span class="strong"><strong>OnComponentBeginOverlap</strong></span> to the <span class="strong"><strong>Object</strong></span> pin within the <span class="strong"><strong>Cast To FieldPlayer</strong></span> node:</p><div class="mediaobject"><img src="graphics/B04548_06_17.jpg" alt="Interacting with the NPC"/></div><p>From here, we <a id="id365" class="indexterm"/>have <span class="strong"><strong>FieldPlayer</strong></span> triggering a cast to <span class="strong"><strong>RPGGameInstance</strong></span> using the <span class="strong"><strong>Cast To RPGGameInstance</strong></span> node located under <span class="strong"><strong>Utilities</strong></span> | <span class="strong"><strong>Casting</strong></span>, whose <span class="strong"><strong>Object</strong></span> pin is <span class="strong"><strong>Get Game Instance</strong></span> since the <code class="literal">TalkShop</code> variable is located within <span class="strong"><strong>RPGGameInstance</strong></span>:</p><div class="mediaobject"><img src="graphics/B04548_06_18.jpg" alt="Interacting with the NPC"/></div><p>Lastly, create a <span class="strong"><strong>Set Talk Shop</strong></span> action <a id="id366" class="indexterm"/>by unchecking <span class="strong"><strong>Context Sensitive</strong></span>, navigating to <span class="strong"><strong>Class</strong></span> | <span class="strong"><strong>RPGGameInstance</strong></span>, and selecting <span class="strong"><strong>Set Talk Shop</strong></span>:</p><div class="mediaobject"><img src="graphics/B04548_06_19.jpg" alt="Interacting with the NPC"/></div><p>Have <span class="strong"><strong>Cast To RPGGameInstance</strong></span> trigger the <span class="strong"><strong>Set Talk Shop</strong></span> action and be sure that we are referencing the <code class="literal">TalkShop</code> variable within <span class="strong"><strong>RPGGameInstance</strong></span> by linking the <span class="strong"><strong>As RPGGameInstance</strong></span> pin from <span class="strong"><strong>Cast To RPGGameInstance</strong></span> to the <span class="strong"><strong>Target</strong></span> pin from <span class="strong"><strong>Set Talk Shop</strong></span>. Also, be sure to set the <code class="literal">TalkShop</code> variable to <code class="literal">true</code> by checking the <span class="strong"><strong>Talk Shop</strong></span> Boolean within the <span class="strong"><strong>Set Talk Shop</strong></span> node. When you are finished, your Blueprint should look like the following screenshot:</p><div class="mediaobject"><img src="graphics/B04548_06_20.jpg" alt="Interacting with the NPC"/></div><p>Now that we are <a id="id367" class="indexterm"/>finished creating the <span class="strong"><strong>Begin Overlap</strong></span> event, let us create our player/key interaction and check whether or not the <span class="strong"><strong>Talk Shop</strong></span> Boolean is true or false. Since the player controller won't have direct access to <span class="strong"><strong>NPC_ShopOwner</strong></span>, we will need to create the key interaction either within the Field Player class or the Level Blueprint class. Because the NPC is specifically part of this particular level and different levels will most likely house different NPCs, it would make the most sense for the key and Boolean check to be located within the Level Blueprint. So at this point, navigate to <span class="strong"><strong>Blueprints</strong></span> | <span class="strong"><strong>Open Level Blueprint</strong></span> to enter the Level Blueprint.</p><p>Within the Level Blueprint, we will create a key event to the letter <span class="emphasis"><em>E</em></span> by navigating to <span class="strong"><strong>Input</strong></span> | <span class="strong"><strong>Key Events</strong></span> | <span class="strong"><strong>E</strong></span>. Then, upon release of the <span class="emphasis"><em>E</em></span> key (because we want the player to commit to the key press), trigger <span class="strong"><strong>Cast To RPGGameInstance</strong></span> whose object is <span class="strong"><strong>Get Game Instance</strong></span> because upon the key press, we will want to check the status of the <code class="literal">TalkShop</code> variable that is located within <span class="strong"><strong>RPGGameInstance</strong></span>:</p><div class="mediaobject"><img src="graphics/B04548_06_21.jpg" alt="Interacting with the NPC"/></div><p>Reference <a id="id368" class="indexterm"/>the <code class="literal">TalkShop</code> variable by dragging out the <span class="strong"><strong>As RPGGameInstance</strong></span> pin within <span class="strong"><strong>Cast To RPGGameInstance</strong></span>, navigate to <span class="strong"><strong>Variables</strong></span> | <span class="strong"><strong>Game Data</strong></span> and then select <span class="strong"><strong>Get Talk Shop</strong></span>, since we will be checking <span class="strong"><strong>Talk Shop</strong></span>:</p><div class="mediaobject"><img src="graphics/B04548_06_22.jpg" alt="Interacting with the NPC"/></div><p>Now that we are referencing the <code class="literal">TalkShop</code> variable, we can check the condition of <span class="strong"><strong>Talk Shop</strong></span> by creating a <span class="strong"><strong>Branch</strong></span> statement located under <span class="strong"><strong>Utilities</strong></span> | <span class="strong"><strong>Flow Control</strong></span>:</p><div class="mediaobject"><img src="graphics/B04548_06_23.jpg" alt="Interacting with the NPC"/></div><p>Link <a id="id369" class="indexterm"/>the <span class="strong"><strong>Talk Shop</strong></span> pin to the <span class="strong"><strong>Condition</strong></span> pin within the <span class="strong"><strong>Branch</strong></span> node to check the condition of <code class="literal">TalkShop</code>, and have the <span class="strong"><strong>Cast To RPGGameInstance</strong></span> activate <span class="strong"><strong>Branch</strong></span>:</p><div class="mediaobject"><img src="graphics/B04548_06_24.jpg" alt="Interacting with the NPC"/></div><p>Now that we have this framework set up, we can do something if the <code class="literal">TalkShop</code> condition is true or false. For now, we will just run a test by printing some text to the screen by navigating to <span class="strong"><strong>Utilities</strong></span> | <span class="strong"><strong>Text</strong></span> | <span class="strong"><strong>Print Text</strong></span>, which will create a <span class="strong"><strong>Print Text</strong></span> function. Link the <span class="strong"><strong>True</strong></span> pin from the <span class="strong"><strong>Branch</strong></span> node to the <span class="strong"><strong>In</strong></span> pin of <span class="strong"><strong>Print Text</strong></span>. When you are finished, your Level Blueprint should look like the following screenshot:</p><div class="mediaobject"><img src="graphics/B04548_06_25.jpg" alt="Interacting with the NPC"/></div><p>If you <a id="id370" class="indexterm"/>test this now, you should notice that if the player presses the <span class="emphasis"><em>E</em></span> key outside the NPC trigger volume, nothing will happen; however, if the player presses <span class="emphasis"><em>E</em></span> when they are within the trigger volume, text will appear on the screen. However, if we exit the volume and continue to press <span class="emphasis"><em>E</em></span>, the text will continue to appear on the screen. This is because we are never setting the <code class="literal">TalkShop</code> Boolean back to <code class="literal">false</code>. Doing this is very simple. Navigate back to <span class="strong"><strong>NPC_ShopOwner</strong></span> and select <span class="strong"><strong>+</strong></span> under <span class="strong"><strong>Details</strong></span> | <span class="strong"><strong>On Component End Overlap</strong></span> to create an <span class="strong"><strong>OnComponentEndOverlap</strong></span> event:</p><div class="mediaobject"><img src="graphics/B04548_06_26.jpg" alt="Interacting with the NPC"/></div><p>Since we have<a id="id371" class="indexterm"/> already created a reference to <span class="strong"><strong>Talk Shop</strong></span> when creating the <span class="strong"><strong>OnComponentBeginOverlap</strong></span> event, and set that reference to true, we can simply make the <span class="strong"><strong>OnComponentEndOverlap</strong></span> event that does the exact same thing as the <span class="strong"><strong>OnComponentBeginOverlap</strong></span>; however, instead of setting <code class="literal">TalkShop</code> to <code class="literal">true</code>, set <code class="literal">TalkShop</code> to <code class="literal">false</code> by <a id="id372" class="indexterm"/>making sure the <span class="strong"><strong>Talk Shop</strong></span> pin within the <span class="strong"><strong>Set Talk Shop</strong></span> node is unchecked. Your <span class="strong"><strong>OnComponentEndOverlap</strong></span> event should now look like the following screenshot:</p><div class="mediaobject"><img src="graphics/B04548_06_27.jpg" alt="Interacting with the NPC"/></div><p>When you test this now, interaction with the NPC via the <span class="emphasis"><em>E</em></span> key should only work if the player is intersecting the NPC's trigger volume as intended.</p></div>
<div class="section" title="Dialog box setup"><div class="titlepage"><div><div><h1 class="title"><a id="ch06lvl1sec43"/>Dialog box setup</h1></div></div></div><p>We are <a id="id373" class="indexterm"/>now ready to create dialog that our NPC will state to the character. To do this, we will first create a Widget Blueprint that will be responsible for <a id="id374" class="indexterm"/>housing all parent variables of the NPC, such as the dialog in the game, so that we can simply pull dialog anytime we need it by calling the dialog variable within the function. This process will be better than the hardcoding text in UMG because it will allow us to need only a single dialog UMG that we will dynamically place text into.</p><p>So let's first create a new Widget Blueprint by navigating to <span class="strong"><strong>Content Browser</strong></span> | <span class="strong"><strong>Content</strong></span> | <span class="strong"><strong>Blueprints</strong></span> | <span class="strong"><strong>UI</strong></span> and then selecting <span class="strong"><strong>Add New</strong></span> | <span class="strong"><strong>User Interface</strong></span> | <span class="strong"><strong>Widget Blueprint</strong></span>. Then, name it <span class="strong"><strong>NPC_Parent</strong></span>:</p><div class="mediaobject"><img src="graphics/B04548_06_28.jpg" alt="Dialog box setup"/></div><p>Once<a id="id375" class="indexterm"/> created, open<a id="id376" class="indexterm"/> the new Widget Blueprint and then navigate to the graph. From here, head to the <span class="strong"><strong>My Blueprint</strong></span> panel and select <span class="strong"><strong>+</strong></span> to the right of <span class="strong"><strong>Variables</strong></span>; this will create a new variable. Name this variable <span class="strong"><strong>NPCDialog</strong></span> and make it public by clicking the eye to the right of the variable name:</p><div class="mediaobject"><img src="graphics/B04548_06_29.jpg" alt="Dialog box setup"/></div><p>In the <span class="strong"><strong>Details</strong></span> panel, change <span class="strong"><strong>Variable Type</strong></span> to <span class="strong"><strong>Text</strong></span> since we will be using text to display dialog. Also, click on the square icon to the right of <span class="strong"><strong>Variable Type</strong></span> to make the variable a text array:</p><div class="mediaobject"><img src="graphics/B04548_06_30.jpg" alt="Dialog box setup"/></div><p>Next, scroll <a id="id377" class="indexterm"/>down <a id="id378" class="indexterm"/>to the <span class="strong"><strong>Default Value</strong></span> tab within the <span class="strong"><strong>Details</strong></span> panel to the area that contains elements of an array. By default, it does not have elements:</p><div class="mediaobject"><img src="graphics/B04548_06_31.jpg" alt="Dialog box setup"/></div><p>In <span class="strong"><strong>Details</strong></span> | <span class="strong"><strong>Default Value</strong></span>, click on <span class="strong"><strong>+</strong></span> next to <span class="strong"><strong>elements</strong></span> to add an element that will create a text box next <a id="id379" class="indexterm"/>to the element <span class="strong"><strong>0</strong></span>. Put a value in this element by writing some text. You can write any form <a id="id380" class="indexterm"/>of text you want here; since at one point I plan to have the NPC give the player information, I will make the dialog say <span class="emphasis"><em>You can check out your Character Status by pressing P when you are outside of battle</em></span>:</p><div class="mediaobject"><img src="graphics/B04548_06_32.jpg" alt="Dialog box setup"/></div><p>Since our NPC is <a id="id381" class="indexterm"/>a shop owner, they can greet us, for example, by saying <span class="emphasis"><em>Greetings. I am Roy, the shop owner, what can I do for you?</em></span> You can add this text as a second element in the <span class="strong"><strong>NPCDialog</strong></span> array:</p><div class="mediaobject"><img src="graphics/B04548_06_33.jpg" alt="Dialog box setup"/></div><p>Whenever we need<a id="id382" class="indexterm"/> a new NPC variable that we may not want hardcoded, we can go back to this Widget Blueprint and add dialog like we did just now. Next, we can<a id="id383" class="indexterm"/> create the actual dialog for our NPC by navigating back to our <span class="strong"><strong>Content Browser</strong></span>. Since we may end up having many different characters using the same dialog box just with different text in it, we may want to create another Widget Blueprint that just has a basic window and a button to exit the dialog box. In <span class="strong"><strong>Content Browser</strong></span>, navigate to <span class="strong"><strong>Content</strong></span> | <span class="strong"><strong>Blueprints</strong></span> | <span class="strong"><strong>UI</strong></span> and then select <span class="strong"><strong>Add New</strong></span> | <span class="strong"><strong>User Interface</strong></span> | <span class="strong"><strong>Widget Blueprint</strong></span>. Then, name it <span class="strong"><strong>DialogBox</strong></span>:</p><div class="mediaobject"><img src="graphics/B04548_06_34.jpg" alt="Dialog box setup"/></div><p>Open the new <a id="id384" class="indexterm"/>Widget Blueprint. From here, navigate to <span class="strong"><strong>File</strong></span> | <span class="strong"><strong>Reparent Blueprint</strong></span> and reparent it to <span class="strong"><strong>NPC_Parent</strong></span>, which holds all our variables:</p><div class="mediaobject"><img src="graphics/B04548_06_35.jpg" alt="Dialog box setup"/></div><p>Since dialog boxes<a id="id385" class="indexterm"/> are rarely the size of the entire screen, we are going to create a Canvas Panel within our default Canvas Panel by navigating to <span class="strong"><strong>Panel</strong></span> | <span class="strong"><strong>Canvas Panel</strong></span> and dragging the new Canvas Panel within the parent Canvas Panel:</p><div class="mediaobject"><img src="graphics/B04548_06_36.jpg" alt="Dialog box setup"/></div><p>Rename<a id="id386" class="indexterm"/> this <a id="id387" class="indexterm"/>new Canvas Panel <span class="strong"><strong>CanvasPanel_DialogBox</strong></span>. Also, anchor this Canvas Panel to the middle of the screen:</p><div class="mediaobject"><img src="graphics/B04548_06_37.jpg" alt="Dialog box setup"/></div><p>You may <a id="id388" class="indexterm"/>also <a id="id389" class="indexterm"/>want to resize the text box to hold a decent amount of text. I will resize this text box to have a <span class="strong"><strong>Size X</strong></span> value of <span class="strong"><strong>1024</strong></span> and <span class="strong"><strong>Size Y</strong></span> value of <span class="strong"><strong>512</strong></span>. You should also center the box by setting <span class="strong"><strong>Position X</strong></span> to -1024/2 which is equal to <span class="strong"><strong>-512</strong></span>, and <span class="strong"><strong>Position Y</strong></span> to -512/2 which is equal to <span class="strong"><strong>-256</strong></span>:</p><div class="mediaobject"><img src="graphics/B04548_06_38.jpg" alt="Dialog box setup"/></div><p>Within <span class="strong"><strong>CanvasPanel_DialogBox</strong></span>, add an image from <span class="strong"><strong>Palette</strong></span> | <span class="strong"><strong>Common</strong></span> | <span class="strong"><strong>Image</strong></span> that we can use to add a background color in a similar way to what we did for the pause menu:</p><div class="mediaobject"><img src="graphics/B04548_06_39.jpg" alt="Dialog box setup"/></div><p>In <a id="id390" class="indexterm"/>the <span class="strong"><strong>Details</strong></span> panel, rename<a id="id391" class="indexterm"/> this image <span class="strong"><strong>BGColor</strong></span> and position and resize it so that it is in the middle of the screen. This can easily be done by choosing a center anchor:</p><div class="mediaobject"><img src="graphics/B04548_06_40.jpg" alt="Dialog box setup"/></div><p>Resize and <a id="id392" class="indexterm"/>position <a id="id393" class="indexterm"/>this to be the same as the Canvas Panel, that is, the <span class="strong"><strong>Size X</strong></span> value as <span class="strong"><strong>1024</strong></span>, <span class="strong"><strong>Size Y</strong></span> value as <span class="strong"><strong>512</strong></span>, <span class="strong"><strong>Position X</strong></span> value as <span class="strong"><strong>-512</strong></span>, and <span class="strong"><strong>Position Y</strong></span> value as <span class="strong"><strong>256</strong></span>:</p><div class="mediaobject"><img src="graphics/B04548_06_41.jpg" alt="Dialog box setup"/></div><p>Lastly, under <span class="strong"><strong>Details</strong></span> | <span class="strong"><strong>Appearance</strong></span> | <span class="strong"><strong>Color and Opacity</strong></span>, adjust <a id="id394" class="indexterm"/>the color to be the same as the other <a id="id395" class="indexterm"/>menus. In this case, we can select the color picker and pass in the linear hex value of <span class="strong"><strong>267FFFFF</strong></span>:</p><div class="mediaobject"><img src="graphics/B04548_06_42.jpg" alt="Dialog box setup"/></div><p>Next, let us<a id="id396" class="indexterm"/> insert <a id="id397" class="indexterm"/>an exit button to leave this menu by selecting and dragging a button from <span class="strong"><strong>Palette</strong></span> | <span class="strong"><strong>Common</strong></span> | <span class="strong"><strong>Button</strong></span> into <span class="strong"><strong>CanvasPanel_DialogBox</strong></span>:</p><div class="mediaobject"><img src="graphics/B04548_06_43.jpg" alt="Dialog box setup"/></div><p>Rename this <a id="id398" class="indexterm"/>button <span class="strong"><strong>Button_Exit</strong></span> and position it towards the right-hand side of your Canvas Panel by first changing the size of your button to match <a id="id399" class="indexterm"/>the size of the pause menu buttons, which have the <span class="strong"><strong>Size X</strong></span> value as <span class="strong"><strong>300</strong></span> and the <span class="strong"><strong>Size Y</strong></span> value as <span class="strong"><strong>100</strong></span>. Then, position the button in the bottom-right of the Canvas Panel, by changing the anchor to bottom-right aligned. Then, use simple positions such as the one that gives 20 pixels of padding, that is, <span class="strong"><strong>Position X</strong></span> as <span class="strong"><strong>-320</strong></span> and <span class="strong"><strong>Position Y</strong></span> as <span class="strong"><strong>-120</strong></span>. You will also notice that the button is behind <span class="strong"><strong>BGColor</strong></span>; simply change the <span class="strong"><strong>ZOrder</strong></span> value to <span class="strong"><strong>1</strong></span>:</p><div class="mediaobject"><img src="graphics/B04548_06_44.jpg" alt="Dialog box setup"/></div><div class="mediaobject"><img src="graphics/B04548_06_45.jpg" alt="Dialog box setup"/></div><p>Now that you <a id="id400" class="indexterm"/>have a button <a id="id401" class="indexterm"/>created and positioned, add a Text Block to it. Rename the <a id="id402" class="indexterm"/>text <a id="id403" class="indexterm"/><span class="strong"><strong>TextBlock_Exit</strong></span> and under <span class="strong"><strong>Details</strong></span> | <span class="strong"><strong>Appearance</strong></span> | <span class="strong"><strong>Font</strong></span>, change the font size to <span class="strong"><strong>48</strong></span>. Also, change the content of the Text Block to <span class="strong"><strong>Exit</strong></span>:</p><div class="mediaobject"><img src="graphics/B04548_06_46.jpg" alt="Dialog box setup"/></div><p>Program <a id="id404" class="indexterm"/>the button<a id="id405" class="indexterm"/> to exit as well, just like you did in the previous menu creations, by selecting the button, scrolling down to <span class="strong"><strong>OnClicked</strong></span> in <span class="strong"><strong>Details</strong></span> | <span class="strong"><strong>Events</strong></span>, and then clicking on the <span class="strong"><strong>+</strong></span> button. This will open up <span class="strong"><strong>Event Graph</strong></span> and populate the <span class="strong"><strong>OnClicked</strong></span> event for the exit button. Drag out the <span class="strong"><strong>Out</strong></span> pin from the <span class="strong"><strong>OnClicked</strong></span> event and select <span class="strong"><strong>Remove from Parent</strong></span> located under <span class="strong"><strong>Widget</strong></span>:</p><div class="mediaobject"><img src="graphics/B04548_06_47.jpg" alt="Dialog box setup"/></div><p>Navigate <a id="id406" class="indexterm"/>back to <a id="id407" class="indexterm"/>the <span class="strong"><strong>Designer</strong></span> view and add a Text Block to <span class="strong"><strong>CanvasPanel_DialogBox</strong></span>, name it <span class="strong"><strong>TextBlock_Dialog</strong></span>, and have it take up most of the Canvas Panel. For this, we can position the Text Block to have a padding of 20 pixels by giving <span class="strong"><strong>Position X</strong></span> a value of <span class="strong"><strong>20</strong></span> and <span class="strong"><strong>Position Y</strong></span> a value of <span class="strong"><strong>20</strong></span>. We can also set the size of the Text Block giving <span class="strong"><strong>Size X</strong></span> a value of <span class="strong"><strong>986</strong></span> and <span class="strong"><strong>Size Y</strong></span> a value of <span class="strong"><strong>300</strong></span>. Lastly, set the <span class="strong"><strong>ZOrder</strong></span> value to <span class="strong"><strong>1</strong></span>:</p><div class="mediaobject"><img src="graphics/B04548_06_48.jpg" alt="Dialog box setup"/></div><p>At this point, we<a id="id408" class="indexterm"/> are <a id="id409" class="indexterm"/>finished with creating the dialog box template. We can now move on to creating dialog boxes for our NPC.</p></div>
<div class="section" title="Creating an NPC welcome box"><div class="titlepage"><div><div><h1 class="title"><a id="ch06lvl1sec44"/>Creating an NPC welcome box</h1></div></div></div><p>Now that we <a id="id410" class="indexterm"/>have a template for our dialog boxes, let's use them by creating custom dialog boxes for our NPC that are based on what we just created. To stay organized, we should make a separate folder for NPCs since we will most likely have a lot more UMG and opportunities to use our dialog box outside of the NPC creation. So within <span class="strong"><strong>Content Browser</strong></span>, navigate to <span class="strong"><strong>Content</strong></span> | <span class="strong"><strong>Blueprints</strong></span> | <span class="strong"><strong>UI</strong></span> and create a new folder under <span class="strong"><strong>Add New</strong></span>. Name this folder <code class="literal">NPC</code> and then navigate into the folder. Create a duplicate of the <span class="strong"><strong>DialogBox</strong></span> Widget Blueprint that you made in the previous section and move it into the <code class="literal">NPC</code> folder. Name the duplicated widget <span class="strong"><strong>Shop_Welcome</strong></span>:</p><div class="mediaobject"><img src="graphics/B04548_06_50.jpg" alt="Creating an NPC welcome box"/></div><p>Open the <span class="strong"><strong>Shop_Welcome</strong></span> widget <a id="id411" class="indexterm"/>and select the <span class="strong"><strong>TextBlock_Dialog</strong></span> Text Block. In <span class="strong"><strong>Details</strong></span> | <span class="strong"><strong>Content</strong></span>, create a new text binding that will then open up the graph:</p><div class="mediaobject"><img src="graphics/B04548_06_51.jpg" alt="Creating an NPC welcome box"/></div><p>At this point, you can right click to find <span class="strong"><strong>All Actions for this Blueprint</strong></span>, and under <span class="strong"><strong>Variables</strong></span> | <span class="strong"><strong>Default</strong></span>, you should find the <span class="strong"><strong>Get NPCDialog</strong></span> variable which you can use:</p><div class="mediaobject"><img src="graphics/B04548_06_52.jpg" alt="Creating an NPC welcome box"/></div><p>From here, drag <a id="id412" class="indexterm"/>out the <span class="strong"><strong>NPCDialog</strong></span> array pin and select the <span class="strong"><strong>Get</strong></span> function under <span class="strong"><strong>Utilities</strong></span> | <span class="strong"><strong>Array</strong></span>:</p><div class="mediaobject"><img src="graphics/B04548_06_53.jpg" alt="Creating an NPC welcome box"/></div><p>From here, you <a id="id413" class="indexterm"/>can select any of the text that is in <span class="strong"><strong>NPCDialog</strong></span> by choosing the right element. Since the welcome text is in element 1, change the <span class="strong"><strong>0</strong></span> in the <span class="strong"><strong>Get</strong></span> function to <span class="strong"><strong>1</strong></span>. To have this text return to the Text Block, link <span class="strong"><strong>GET</strong></span> to <span class="strong"><strong>Return Value</strong></span> of <span class="strong"><strong>ReturnNode</strong></span>:</p><div class="mediaobject"><img src="graphics/B04548_06_54.jpg" alt="Creating an NPC welcome box"/></div><p>Since this is the <a id="id414" class="indexterm"/>welcome dialog box, we will still allow the player to exit, but we should also allow them to get general details from the NPC or visit their shop. So let's copy the <span class="strong"><strong>Exit</strong></span> button and put place holders for both talking and shopping. Navigate back to the <span class="strong"><strong>Designer</strong></span> view and make two more buttons on the left-hand side of the <span class="strong"><strong>Exit</strong></span> button, one that says <span class="strong"><strong>Shop</strong></span> and one that says <span class="strong"><strong>Talk</strong></span>. You don't have to program these buttons yet since we do not have a shop or talk UMG yet:</p><div class="mediaobject"><img src="graphics/B04548_06_55.jpg" alt="Creating an NPC welcome box"/></div><p>Next, make this <a id="id415" class="indexterm"/>screen appear at the proper time by opening the Level Blueprint that you started at the beginning of this chapter. Instead of printing text to the screen when the <span class="strong"><strong>Talk Shop</strong></span> condition is true, link <span class="strong"><strong>Create Widget</strong></span> under <span class="strong"><strong>User Interface</strong></span> to <span class="strong"><strong>True</strong></span>:</p><div class="mediaobject"><img src="graphics/B04548_06_56.jpg" alt="Creating an NPC welcome box"/></div><p>For the <a id="id416" class="indexterm"/>class, select <span class="strong"><strong>Shop_Welcome</strong></span>:</p><div class="mediaobject"><img src="graphics/B04548_06_57.jpg" alt="Creating an NPC welcome box"/></div><p>Lastly, display this to<a id="id417" class="indexterm"/> the screen by linking the Return Value pin of <span class="strong"><strong>Create Shop_Welcome Widget</strong></span> to <span class="strong"><strong>Add to Viewport</strong></span>, which is located under <span class="strong"><strong>User Interface</strong></span> | <span class="strong"><strong>Viewport</strong></span>:</p><div class="mediaobject"><img src="graphics/B04548_06_58.jpg" alt="Creating an NPC welcome box"/></div><p>Also, give the player <a id="id418" class="indexterm"/>access to a mouse cursor by creating a <span class="strong"><strong>Get Player Controller</strong></span> function under <span class="strong"><strong>Game</strong></span> and linking its <span class="strong"><strong>Return Value</strong></span> to <span class="strong"><strong>Set Show Mouse Cursor</strong></span> located under <span class="strong"><strong>Class</strong></span> | <span class="strong"><strong>Player Controller</strong></span>. Finally, link the <span class="strong"><strong>Add to Viewport</strong></span> node to the <span class="strong"><strong>Set Show Mouse Cursor</strong></span> node and check <span class="strong"><strong>Show Mouse Cursor</strong></span>. When you are finished, your Level Blueprint should look like the following screenshot:</p><div class="mediaobject"><img src="graphics/B04548_06_59.jpg" alt="Creating an NPC welcome box"/></div><p>If you playtest this now, you should be able to still go up to the NPC and press <span class="emphasis"><em>E</em></span> to interact with him, but this time a dialog box will appear:</p><div class="mediaobject"><img src="graphics/B04548_06_60.jpg" alt="Creating an NPC welcome box"/></div><p>Congratulations, you <a id="id419" class="indexterm"/>have created your first dialog box. Now let us move on to making navigation buttons that open up other interactive widgets.</p></div>
<div class="section" title="Adding an NPC talk box"><div class="titlepage"><div><div><h1 class="title"><a id="ch06lvl1sec45"/>Adding an NPC talk box</h1></div></div></div><p>Now that you have<a id="id420" class="indexterm"/> already created a dialog box that pops up when the player interacts with the NPC, you can easily add dialog for the player to see when they click on the <span class="strong"><strong>Talk</strong></span> button. Simply duplicate the <span class="strong"><strong>DialogBox</strong></span> Widget Blueprint that you made previously and place it in the <code class="literal">NPC</code> folder under<span class="strong"><strong> Content Browser</strong></span> located in <span class="strong"><strong>Content</strong></span> | <span class="strong"><strong>Blueprints</strong></span> | <span class="strong"><strong>UI</strong></span>. Rename the duplicated Widget Blueprint <span class="strong"><strong>Shop_Talk</strong></span>.</p><p>We will now add some proper dialog to this menu by opening the <span class="strong"><strong>Shop_Talk</strong></span> Widget Blueprint. Then, within the <span class="strong"><strong>Designer</strong></span> viewport, select the Text Block that is already placed into your Canvas Panel.</p><p>Once selected, navigate to <span class="strong"><strong>Details</strong></span> | <span class="strong"><strong>Content</strong></span> and, within <span class="strong"><strong>Text</strong></span>, select <span class="strong"><strong>Bind</strong></span> | <span class="strong"><strong>+ Create Binding</strong></span>.</p><p>As always, this <a id="id421" class="indexterm"/>action will automatically bring you to the Graph Editor and set the <span class="strong"><strong>Get Text</strong></span> function to return a null value from a <span class="strong"><strong>Return</strong></span> node. The next steps are identical to the steps that you did when calling dialog from the <span class="strong"><strong>NPCDialog</strong></span> variable in the previous sections. You must navigate to the <span class="strong"><strong>My Blueprint</strong></span> tab and use the <span class="strong"><strong>GET</strong></span> version of the <span class="strong"><strong>NPCDialog</strong></span> variable.</p><p>Then, drag out the <span class="strong"><strong>NPCDialog</strong></span> array pin and select the <span class="strong"><strong>Get</strong></span> function under <span class="strong"><strong>Utilities</strong></span> | <span class="strong"><strong>Array</strong></span>. Lastly, have the <span class="strong"><strong>GET</strong></span> function select the correct element of the <span class="strong"><strong>NPCDialog</strong></span> array. In this case, we would keep element 0 selected since we set our dialog in element 0 earlier in this chapter. Once the proper dialog is chosen, link <span class="strong"><strong>GET</strong></span> to <span class="strong"><strong>Return Value</strong></span> of the <span class="strong"><strong>ReturnNode</strong></span>. At this point, your Graph Editor should look like the following screenshot:</p><p> </p><div class="mediaobject"><img src="graphics/B04548_06_64.jpg" alt="Adding an NPC talk box"/></div><p>
</p><p>You are now finished with the <span class="strong"><strong>Shop_Talk</strong></span> Widget Blueprint. You need to now bind it to the <span class="strong"><strong>Talk</strong></span> button in the <span class="strong"><strong>Shop_Welcome</strong></span> Widget Blueprint, so open the <span class="strong"><strong>Designer</strong></span> view in <span class="strong"><strong>Shop_Welcome</strong></span> and select the <span class="strong"><strong>Talk</strong></span> button. In the <span class="strong"><strong>Details</strong></span> panel, navigate to <span class="strong"><strong>Events</strong></span> and press the <span class="strong"><strong>+</strong></span> button next to <span class="strong"><strong>OnClicked</strong></span>:</p><div class="mediaobject"><img src="graphics/B04548_06_65.jpg" alt="Adding an NPC talk box"/></div><p>This should now <a id="id422" class="indexterm"/>create an <span class="strong"><strong>OnClicked</strong></span> event bound to your <span class="strong"><strong>Talk</strong></span> button and the Event Graph should now have automatically opened. From here, what we need to do is upon the button being clicked, we need to close the <span class="strong"><strong>Shop_Welcome</strong></span> Widget Blueprint and open the <span class="strong"><strong>Shop_Talk</strong></span> Widget Blueprint. These steps should be very similar to what you did many times previously when you opened and closed Widget Blueprints after button presses. Link the <span class="strong"><strong>OnClicked</strong></span> event to <span class="strong"><strong>Remove from Parent</strong></span> located under <span class="strong"><strong>Widget</strong></span>, which will close your current Widget Blueprint. Then, link the <span class="strong"><strong>Create Widget</strong></span> node to <span class="strong"><strong>Remove from Parent</strong></span>, which is located under <span class="strong"><strong>User Interface</strong></span>. Change the class of <span class="strong"><strong>Create Widget</strong></span> to <span class="strong"><strong>Shop_Talk</strong></span> so that your <span class="strong"><strong>Shop_Talk</strong></span> Widget Blueprint is generated. From here, link <span class="strong"><strong>Add to Viewport</strong></span> to <span class="strong"><strong>Return Value</strong></span> of the <span class="strong"><strong>Create Shop_Talk Widget</strong></span> node that is located under <span class="strong"><strong>User Interface</strong></span> | <span class="strong"><strong>Viewport</strong></span>. Also, be sure <span class="strong"><strong>Add to Viewport</strong></span> is linked to the out pin of <span class="strong"><strong>Create Shop_Talk Widget</strong></span> so that the Widget Blueprint is displayed in the player's view only after the <span class="strong"><strong>Shop_Talk</strong></span> widget is created. When you are finished, your <span class="strong"><strong>EventGraph</strong></span> for your <span class="strong"><strong>Talk</strong></span> button should look like the following screenshot:</p><div class="mediaobject"><img src="graphics/B04548_06_66.jpg" alt="Adding an NPC talk box"/></div><p>You may have <a id="id423" class="indexterm"/>noticed that the <span class="strong"><strong>Talk</strong></span> button now works perfectly, but the text will get cut off:</p><div class="mediaobject"><img src="graphics/B04548_06_67.jpg" alt="Adding an NPC talk box"/></div><p>This is because we are not wrapping the text. To wrap the text, go back into the <span class="strong"><strong>Shop_Talk</strong></span> Widget <a id="id424" class="indexterm"/>Blueprint and, in the <span class="strong"><strong>Designer</strong></span> view, select the <span class="strong"><strong>Dialog</strong></span> Text Block. Then, in the <span class="strong"><strong>Details</strong></span> panel, navigate to <span class="strong"><strong>Appearance</strong></span> and check <span class="strong"><strong>Auto Text Wrap</strong></span>. This will ensure that the text is always wrapped around the content, which in this case will move the text to a new line when it hits the border of the Text Block. If you test the <span class="strong"><strong>Talk</strong></span> button, the words should now wrap like this:</p><div class="mediaobject"><img src="graphics/B04548_06_68.jpg" alt="Adding an NPC talk box"/></div><p>At this point, you should have the interaction working perfectly between the player and the NPC with all buttons working properly, with the exception of the <span class="strong"><strong>Shop</strong></span> button.</p></div>
<div class="section" title="Summary"><div class="titlepage"><div><div><h1 class="title"><a id="ch06lvl1sec46"/>Summary</h1></div></div></div><p>In this chapter, we created an NPC that can communicate with the player through the use of a trigger volume and key binding. Now, we can display dialog from an array of strings at any point in our game. In the next chapter, we will transform our NPC into a shop owner and allow the player to purchase equipment from the shop.</p></div></body></html>