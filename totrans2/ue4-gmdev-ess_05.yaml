- en: Chapter 5. Lights
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Lighting is an important factor in your game, which can be easily overlooked,
    and wrong usage can severely impact on performance. But with proper settings,
    combined with post process, you can create very beautiful and realistic scenes.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
- en: In this chapter, we will look into different light mobilities and learn more
    about Lightmass Global Illumination, which is the static Global Illumination solver
    created by Epic games. We will also learn how to prepare assets to be used with
    it.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
- en: Lighting basics
  id: totrans-3
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this section, we will see how to place lights and how to adjust some important
    values.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
- en: Placing lights
  id: totrans-5
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'In Unreal Engine 4, lights can be placed in two different ways. Through the
    modes tab or by right-clicking in the level:'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
- en: '**Modes tab**: In the **Modes** tab, go to the place tab (*Shift* + *1*) and
    go to the **Lights** section. From there you can drag and drop various lights.![Placing
    lights](img/B03950_05_01.jpg)'
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Right-clicking**: Right-click in viewport and in **Place Actor** you can
    select your light.![Placing lights](img/B03950_05_02.jpg)'
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Once a light is added to the level, you can use the transform tool (*W* to move,
    *E* to rotate) to change the position and rotation of your selected light.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
- en: Tip
  id: totrans-10
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Since **Directional Light** casts light from an infinite source, updating their
    location has no effect.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
- en: Various lights
  id: totrans-12
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Unreal Engine 4 features four different types of light Actors. They are:'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
- en: '**Directional Light**: Simulates light from a source that is infinitely far
    away. Since all shadows cast by this light will be parallel, this is the ideal
    choice for simulating sunlight.'
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Spot Light**: Emits light from a single point in a cone shape. There are
    two cones (inner cone and outer cone). Within the inner cone, light achieves full
    brightness and between the inner and outer cone a falloff takes place, which softens
    the illumination. That means after the inner cone, light slowly loses its illumination
    as it goes to the outer cone.'
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Point Light**: Emits light from a single point to all directions, much like
    a real-world light bulb.'
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Sky Light**: Does not really emit light, but instead captures the distant
    parts of your scene (for example, Actors that are placed beyond **Sky Distance
    Threshold**) and applies them as light. That means you can have lights coming
    from your atmosphere, distant mountains, and so on. Note that **Sky Light** will
    only update when you rebuild your lighting or by pressing **Recapture Scene**
    (in the **Details** panel with **Sky Light** selected).'
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Common light settings
  id: totrans-18
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Now that we know how to place lights into a scene, let''s take a look at some
    of the common settings of a light. Select your light in a scene and in the **Details**
    panel you will see these settings:'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
- en: '**Intensity**: Determines the intensity (energy) of the light. This is in lumens
    so, for example, 1700 lm corresponds to a 100 W bulb.'
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Light Color**: Determines the color of the light.'
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Attenuation Radius**: Sets the limit of the light. It also calculates the
    falloff of the light. This setting is only available in **Point Lights** and **Spot
    Lights**.![Common light settings](img/B03950_05_03.jpg)'
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**衰减半径**：设置光线的限制。它还会计算光线的衰减。此设置仅在**点光源**和**聚光灯**中可用。![常见光线设置](img/B03950_05_03.jpg)'
- en: 'Attenuation Radius from left to right: 100, 200, 500.'
  id: totrans-23
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 从左到右的衰减半径：100，200，500。
- en: '**Source Radius**: Defines the size of specular highlights on surfaces. This
    effect can be subdued by adjusting the **Min Roughness** setting. This also affects
    building light using **Lightmass**. A larger **Source Radius** will cast softer
    shadows. Since this is processed by **Lightmass**, it will only work on **Lights**
    with mobility set to **Static**.![Common light settings](img/B03950_05_04.jpg)'
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**源半径**：定义表面上的镜面高光大小。此效果可以通过调整**最小粗糙度**设置来减弱。这也会影响使用**光线质量**的建筑物照明。较大的**源半径**会产生更柔和的阴影。由于这是通过**光线质量**处理的，因此它仅适用于设置为**静态**移动性的**光线**。![常见光线设置](img/B03950_05_04.jpg)'
- en: Source Radius 0\. Notice the sharp edges of the shadow.
  id: totrans-25
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 源半径 0. 注意阴影的锐利边缘。
- en: '![Common light settings](img/B03950_05_05.jpg)'
  id: totrans-26
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![常见光线设置](img/B03950_05_05.jpg)'
- en: Source Radius 5\. Notice the soft edges of the shadow.
  id: totrans-27
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 源半径 5. 注意阴影的柔和边缘。
- en: '**Source Length**: Same as **Source Radius**.'
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**源长度**：与**源半径**相同。'
- en: Light mobility
  id: totrans-29
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 光线移动性
- en: 'Light mobility is an important setting to keep in mind when placing lights
    in your level because this changes the way light works and impacts on performance.
    There are three settings that you can choose. They are as follows:'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 在放置你的关卡中的光线时，光线移动性是一个需要记住的重要设置，因为它会改变光线的工作方式并影响性能。你可以选择三个设置。它们如下所示：
- en: '**Static**: A completely static light that has no impact on performance. This
    type of light will not cast shadows or specular on dynamic objects (for example,
    characters, movable objects, and so on). Example usage: Use this light where the
    player will never reach, such as distant cityscapes, ceilings, and so on. You
    can literally have millions of lights with static mobility.'
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**静态**：这是一种完全静态的光，不会影响性能。此类光线不会在动态对象（例如，角色、可移动对象等）上产生阴影或镜面反射。示例用法：在玩家永远不会到达的地方使用此光线，例如遥远的城市景观、天花板等。你可以有数百万个具有静态移动性的光线。'
- en: '**Stationary**: This is a mix of static and dynamic lights and can change its
    color and brightness while running the game, but cannot move or rotate. Stationary
    lights can interact with dynamic objects and are used where the player can go.'
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**静止**：这是一种静态和动态光线的混合，在游戏运行时可以改变其颜色和亮度，但不能移动或旋转。静止光线可以与动态对象交互，并用于玩家可以到达的地方。'
- en: '**Movable**: This is a completely dynamic light and all properties can be changed
    at runtime. Movable lights are heavier on performance so use them sparingly.'
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**可移动**：这是一个完全动态的光，所有属性都可以在运行时更改。可移动光线对性能的影响较大，因此应谨慎使用。'
- en: Only four or fewer stationary lights are allowed to overlap each other. If you
    have more than four stationary lights overlapping each other, the light icon will
    change to red X, which indicates that the light is using dynamic shadows at a
    severe performance cost!
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 只允许四个或更少的静止光线相互重叠。如果你有超过四个静止光线相互重叠，光线图标将变为红色 X，这表示光线正在以严重的性能成本使用动态阴影！
- en: '![Light mobility](img/B03950_05_06.jpg)'
  id: totrans-35
  prefs: []
  type: TYPE_IMG
  zh: '![光线移动性](img/B03950_05_06.jpg)'
- en: In the following screenshot, you can easily see the overlapping light.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 在以下屏幕截图中，你可以轻松看到重叠的光线。
- en: '![Light mobility](img/B03950_05_07_revised.jpg)'
  id: totrans-37
  prefs: []
  type: TYPE_IMG
  zh: '![光线移动性](img/B03950_05_07_revised.jpg)'
- en: In **View** Mode, you can change to **Stationary Light Overlap** to see which
    light is causing an issue.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 在**视图**模式下，你可以切换到**静止光线重叠**以查看哪个光线导致了问题。
- en: Lightmass Global Illumination
  id: totrans-39
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 光线质量全局照明
- en: Lightmass is the high-quality static Global Illumination solver created by Epic
    games. **Global Illumination** (**GI**) means the process that simulates indirect
    lighting (for example, light bouncing and color bleeding from surfaces). In Unreal
    Engine, light bounces by default with Lightmass and is based on the base color
    of your material, which controls how much light should bounce from the surface
    of the object. Even though a more highly saturated color will bounce more light,
    and a less saturated color will bounce less, it all depends on the scene. In a
    simple room-like scene, this can be noticeable, whereas if it's an outdoor day
    scene this might not be that noticeable.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: Lightmass是由Epic Games创建的高质量静态全局照明求解器。**全局照明**（**GI**）意味着模拟间接照明的过程（例如，光线反射和表面颜色渗透）。在Unreal
    Engine中，默认情况下，光线通过Lightmass进行反射，并基于你的材质的基础颜色，这控制了从物体表面反射多少光线。尽管更饱和的颜色会反射更多光线，而较不饱和的颜色会反射较少，但这都取决于场景。在一个简单的房间场景中，这可能是明显的，而如果是户外白天场景，这可能不那么明显。
- en: 'Let''s take a quick look at the following scene:'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们快速看一下以下场景：
- en: '![Lightmass Global Illumination](img/B03950_05_08.jpg)'
  id: totrans-42
  prefs: []
  type: TYPE_IMG
  zh: '![Lightmass全局照明](img/B03950_05_08.jpg)'
- en: This is a simple scene in unlit mode.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一个在无光照模式下的简单场景。
- en: '![Lightmass Global Illumination](img/B03950_05_09.jpg)'
  id: totrans-44
  prefs: []
  type: TYPE_IMG
  zh: '![Lightmass全局照明](img/B03950_05_09.jpg)'
- en: Now I added one **Directional Light** and this is how it looks with no GI. That
    means there is only direct lighting and no indirect lighting (meaning there is
    no light bouncing).
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我添加了一束**方向光**，这是没有GI时的样子。这意味着只有直接照明，没有间接照明（意味着没有光线反射）。
- en: '![Lightmass Global Illumination](img/B03950_05_10.jpg)'
  id: totrans-46
  prefs: []
  type: TYPE_IMG
  zh: '![Lightmass全局照明](img/B03950_05_10.jpg)'
- en: The previous screenshot is with static GI and you can see how the whole scene
    came to life with GI. Notice how the pillars are casting shadows. These are called
    **Indirect Shadows** since they are from **Indirect Light**.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 上一张截图是使用静态全局照明（GI），你可以看到整个场景因为GI而变得生动起来。注意柱子是如何投射阴影的。这些被称为**间接阴影**，因为它们来自**间接光**。
- en: 'The intensity and color of indirect light depends on the light and base color
    of the material that the light is bouncing off. To illustrate this effect, let''s
    take a look at the following two screenshots:'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 间接光的强度和颜色取决于光线反射的材质的光和基础颜色。为了说明这个效果，让我们看看以下两张截图：
- en: '![Lightmass Global Illumination](img/B03950_05_11.jpg)'
  id: totrans-49
  prefs: []
  type: TYPE_IMG
  zh: '![Lightmass全局照明](img/B03950_05_11.jpg)'
- en: Here I applied a pure red material (the red value is 1.0) to the sphere and
    you can see bounced lighting picked up the base color of the red sphere changing
    the environment. This is called color bleeding and is most noticeable with highly
    saturated colors.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，我将纯红色材质（红色值为1.0）应用到球体上，你可以看到反射照明拾取了红色球体的基础颜色，改变了环境。这被称为颜色渗透，在高度饱和的颜色中最明显。
- en: '![Lightmass Global Illumination](img/B03950_05_12.jpg)'
  id: totrans-51
  prefs: []
  type: TYPE_IMG
  zh: '![Lightmass全局照明](img/B03950_05_12.jpg)'
- en: In this screenshot, I changed the value of red to 0.1 and rebuilt the lighting.
    And since red is more dark now, less light is bouncing. This is because darker
    colors will absorb the light instead of reflecting it.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 在这张截图中，我将红色的值改为0.1并重新构建了照明。由于红色现在更暗，反射的光更少。这是因为较暗的颜色会吸收光线而不是反射它。
- en: Now that we know what Lightmass is, let's take a look at how we can prepare
    our assets to use Lightmass and learn more about Lightmass settings.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经知道了什么是Lightmass，让我们来看看如何准备我们的资产以使用Lightmass，并了解更多关于Lightmass设置的信息。
- en: Preparing your assets for precomputed lighting
  id: totrans-54
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 为预计算照明准备你的资产
- en: In order for your asset to have clean light and shadow details, it is necessary
    to have uniquely unwrapped UV to represent its own space to receive dark and light
    information. One rule of thumb when creating lightmap UVs is that the UV face
    should never overlap with any other face within the UV space. This is because
    if they are overlapping, then after light building, the lightmap corresponding
    to that space will be applied to both faces, which will result in inaccurate lighting
    and shadow errors. Overlapping faces are good for normal texture UVs since the
    texture resolution will be higher for each face, but the same rule does not apply
    for lightmap UVs. In a 3D program, we unwrap lightmap UVs to a new channel and
    use that channel in Unreal Engine 4.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
- en: '![Preparing your assets for precomputed lighting](img/B03950_05_13.jpg)'
  id: totrans-56
  prefs: []
  type: TYPE_IMG
- en: Here, you can see I'm using the second channel in my mesh for lightmap.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
- en: Note
  id: totrans-58
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Unreal starts counting from 0 while most 3d programs count from 1\. That means
    UV channel 1 in the 3d program is UV channel 0 in Unreal, and UV channel 2 means
    UV channel 1 in Unreal. Here, in the previous screenshot, you can see the **Light
    Map Coordinate Index** is **1**, which means it is using the 2nd UV channel in
    mesh.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
- en: Even though you can generate lightmap UVs in Unreal Engine 4, it is highly recommended
    to create these UVs in a 3d program (for example, Autodesk Maya, Autodesk 3dsmax,
    Modo, and so on) in order to have clean lightmaps. Before creating a lightmap
    UV you have to set up the grid setting in your 3d app's UV editor. For example,
    if you have an asset that requires a lightmap resolution of 128, then your grid
    setting should be *1/126*, which is *0.00793650*. 128 will be the lightmap texture
    resolution. Higher values, such as 256, 512, 1024, and so on, will result in high-quality
    lightmaps but will also increase memory usage. Once we decide what lightmap resolution
    we need for our asset, we subtract 2 (you can also use 4) from that resolution.
    The reason behind this is that in order for Lightmass to calculate correctly without
    any filter bleeding errors, it is recommended to have a minimum of 2 pixel gaps
    between UVs. So if your asset is going to use a lightmap resolution of 128, it
    will be *128 – 2 = 126*. The reason why we divide it by 1 is that by default,
    Lightmass uses a 1 pixel border for filtering purposes.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
- en: Once you import your mesh into Unreal Engine 4, you set the Light Map Resolution
    for your Static Mesh. This value controls how good the shadow will look when another
    object casts a shadow onto this object.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
- en: Lightmaps are textures generated by Unreal Engine and overlayed on top of your
    scene. Since this is a texture, it should be in power of two (for example, 16,
    32, 64, 128, 256, 512, 1024, etc.).
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
- en: '![Preparing your assets for precomputed lighting](img/B03950_05_14.jpg)'
  id: totrans-63
  prefs: []
  type: TYPE_IMG
- en: The floor in the preceding screenshot has a lightmap resolution of **32**. Notice
    inaccurate shadows on the floor.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
- en: '![Preparing your assets for precomputed lighting](img/B03950_05_15.jpg)'
  id: totrans-65
  prefs: []
  type: TYPE_IMG
- en: The floor in the preceding screenshot has a lightmap resolution of **256**.
    Notice better shadows on the floor.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
- en: Note
  id: totrans-67
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Even though increasing the lightmap resolution gives accurate shadows, it is
    not a good idea to increase it for every mesh in your level as it will severely
    increase build times and may even crash the whole editor. For smaller objects,
    it is always a good idea to keep it low.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
- en: In Unreal Engine 4, you can generate lightmap UVs when importing your mesh by
    enabling **Generate Lightmap UVs**.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
- en: '![Preparing your assets for precomputed lighting](img/B03950_05_16.jpg)'
  id: totrans-70
  prefs: []
  type: TYPE_IMG
- en: 'In case you miss this option, you can still generate lightmap UVs after importing.
    To do that perform the following steps:'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
- en: Double-click on the **Static Mesh** in **Content Browser**.
  id: totrans-72
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Then, under the **LOD** tab, enable **Generate Lightmap UVs**.
  id: totrans-73
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select **Source Lightmap Index**. Most of the time this will be **0** since
    that is normal texture UVs, and Unreal generates your lightmap UVs from texture
    UVs.
  id: totrans-74
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Set **Destination Lightmap Index**. This is where Unreal will save your newly
    created lightmap UVs. Set this to 1.
  id: totrans-75
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click **Apply Changes** to generate lightmap UVs.![Preparing your assets for
    precomputed lighting](img/B03950_05_17.jpg)
  id: totrans-76
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Note
  id: totrans-77
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
- en: If you already have a lightmap UV in the **Destination Lightmap Index**, it
    will be replaced when generating a new one.
  id: totrans-78
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: You can preview UVs by clicking on the **UV** button in the toolbar and selecting
    your **UV Channel**.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
- en: '![Preparing your assets for precomputed lighting](img/B03950_05_18.jpg)'
  id: totrans-80
  prefs: []
  type: TYPE_IMG
- en: Building a scene with Lightmass
  id: totrans-81
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Building a scene with Lightmass is a pretty straightforward process. In order
    to have high-quality static Global Illumination (aka **Precomputed Lighting**),
    you need to have a **Lightmass Importance Volume** in your scene. This is because
    in many maps, we have areas large enough and the playable area is actually smaller.
    So instead of calculating lighting for the whole scene, which can increase light
    building heavily, we limit the area by using **Lightmass Importance Volume**.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
- en: Once we have a **Lightmass Importance Volume** in the scene and start light
    building, Lightmass will only calculate lighting within the volume. All objects
    outside the volume will only get one bounce of light with low quality.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
- en: To enclose the playable area in **Lightmass Importance Volume** you just have
    to drag and drop it from the **Modes** tab. Just like other objects, you can use
    transform tools (*W* to move, *E* to rotate, and *R* to scale) to adjust **Lightmass
    Importance Volume** in your scene. Once that is done, all you have to do is build
    the lighting from the **Build** button.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
- en: '![Building a scene with Lightmass](img/B03950_05_19.jpg)'
  id: totrans-85
  prefs: []
  type: TYPE_IMG
- en: Alternatively, you can simply press the **Build** button, which will build the
    lighting. Lightmass has four different quality levels that you can choose from.
    They are **Preview**, **Medium**, **High**, and **Production**.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
- en: '![Building a scene with Lightmass](img/B03950_05_20.jpg)'
  id: totrans-87
  prefs: []
  type: TYPE_IMG
  zh: '![使用光子构建场景](img/B03950_05_20.jpg)'
- en: '**Preview**: Can be used while developing and this results in building the
    light faster.'
  id: totrans-88
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**预览**：在开发过程中可以使用，这会导致更快地构建光线。'
- en: '**Production**: When your project is near-complete or ready to ship you should
    use the production setting since it makes the scene more realistic and corrects
    various light bleed errors.'
  id: totrans-89
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**生产**：当您的项目接近完成或准备发布时，您应该使用生产设置，因为它会使场景更加逼真并纠正各种光溢出错误。'
- en: Tip
  id: totrans-90
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: Lighting quality are just presets. There are lots of settings that should be
    tweaked to get the desired effect you want in your game.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 照明质量只是预设。有许多设置应该调整以获得游戏中期望的效果。
- en: Tweaking Lightmass settings
  id: totrans-92
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 调整光子设置
- en: Lightmass offers a lot of options in **World Settings**, which you can tweak
    to get the best visual quality. You can access them by clicking on **Settings**
    and selecting **World Settings**.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: Lightmass 在 **世界设置** 中提供了很多选项，您可以调整以获得最佳的视觉质量。您可以通过单击 **设置** 并选择 **世界设置** 来访问它们。
- en: '![Tweaking Lightmass settings](img/B03950_05_21.jpg)'
  id: totrans-94
  prefs: []
  type: TYPE_IMG
  zh: '![调整光子设置](img/B03950_05_21.jpg)'
- en: In **World Settings**, expand **Lightmass Settings** and you will see various
    settings you can tweak to get the most out of **Lightmass**.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 在 **世界设置** 中，展开 **光子设置**，你会看到各种可以调整的设置，以充分利用 **光子**。
- en: '![Tweaking Lightmass settings](img/B03950_05_22.jpg)'
  id: totrans-96
  prefs: []
  type: TYPE_IMG
  zh: '![调整光子设置](img/B03950_05_22.jpg)'
- en: 'Controlling these settings helps you get the best visual quality when using
    Lightmass. Let''s take a look at these settings:'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 控制这些设置可以帮助您在使用 Lightmass 时获得最佳的视觉质量。让我们来看看这些设置：
- en: '**Static Lighting Level**: This setting calculates the detail when building
    the light. Smaller values will have more detail but greatly increase build time!
    Larger values can be used for huge levels to lower build times.'
  id: totrans-98
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**静态照明级别**：此设置在构建光线时计算细节。较小的值将具有更多细节但会大大增加构建时间！较大的值可用于大型级别以降低构建时间。'
- en: '**Num Indirect Lighting Bounces**: This determines how many times the light
    should bounce off surfaces. 0 is direct lighting only, meaning there will be no
    Global Illumination, and 1 is one bounce of indirect lighting, and so on. Bounce
    1 contributes most to the visual quality, and successive bounces are nearly free
    but do not add very much light since bounced light gets weaker after each bounce.![Tweaking
    Lightmass settings](img/B03950_05_23.jpg)'
  id: totrans-99
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**间接照明反弹次数**：这决定了光线应该从表面反弹多少次。0 表示只有直接照明，这意味着将没有全局照明，1 表示一次间接照明反弹，依此类推。反弹 1
    对视觉质量贡献最大，后续反弹几乎免费，但不会增加很多光线，因为每次反弹后反弹的光线会变弱。![调整光子设置](img/B03950_05_23.jpg)'
- en: Num Indirect Lighting Bounces set to 1
  id: totrans-100
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 间接照明反弹次数设置为 1
- en: '**Indirect Lighting Quality**: Higher settings result in fewer artifacts such
    as noise, splotchiness, and so on, but will also increase build time. Using this
    setting with **Indirect Lighting Smoothness** helps to get detailed indirect shadows
    and ambient occlusion.'
  id: totrans-101
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**间接照明质量**：较高的设置会导致更少的噪声、斑驳等问题，但也会增加构建时间。使用此设置与 **间接照明平滑度** 结合可以帮助获得详细的间接阴影和环境遮挡。'
- en: '**Indirect Lighting Smoothness**: Higher values will cause Lightmass to smooth
    out indirect lighting but will lose detailed indirect shadows.![Tweaking Lightmass
    settings](img/B03950_05_24.jpg)'
  id: totrans-102
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**间接照明平滑度**：较高的值会导致 Lightmass 平滑化间接照明，但会失去详细的间接阴影。![调整光子设置](img/B03950_05_24.jpg)'
- en: Indirect Lighting Quality and Smoothness set to 1.0
  id: totrans-103
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 间接照明质量和平滑度设置为 1.0
- en: '![Tweaking Lightmass settings](img/B03950_05_25.jpg)'
  id: totrans-104
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![调整光子设置](img/B03950_05_25.jpg)'
- en: 'Indirect Lighting Quality: 4.0 and Indirect Lighting Smoothness: 0.5\. Notice
    the difference in the shadow cast by the pillar'
  id: totrans-105
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 间接照明质量：4.0 和间接照明平滑度：0.5。注意柱子投下的阴影差异
- en: '**Environment Color**: Think of this as a big sphere surrounding the level,
    emitting color in all direction. That is, this acts as the HDR environment.'
  id: totrans-106
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**环境颜色**：将其想象为围绕级别的巨大球体，向所有方向发射颜色。也就是说，这充当了 HDR 环境的作用。'
- en: '**Environment Intensity**: Scales the intensity of **Environment Color**.'
  id: totrans-107
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**环境强度**：缩放 **环境颜色** 的强度。'
- en: '**Diffuse Boost**: This is an effective way of increasing the intensity of
    indirect lighting in your scene. Since indirect lighting bounces off surfaces,
    this value will boost the influence of the color.'
  id: totrans-108
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**漫反射增强**：这是在场景中增强间接照明强度的有效方法。由于间接照明会从表面反弹，这个值将增强颜色的影响。'
- en: '**Use Ambient Occlusion**: Enables static ambient occlusion. Since ambient
    occlusion requires dense lighting samples, it will not look good in **Preview**
    builds. It''s better to tweak ambient occlusion settings while you are building
    using production preset.'
  id: totrans-109
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Direct Illumination Occlusion Fraction**: How much ambient occlusion to be
    applied to direct lighting.'
  id: totrans-110
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Indirect Illumination Occlusion Fraction**: How much ambient occlusion to
    be applied to indirect lighting.'
  id: totrans-111
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Occlusion Exponent**: Higher values increase the ambient occlusion contrast.'
  id: totrans-112
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Fully Occluded Samples Fraction**: This value determines how much Ambient
    Occlusion an object should generate on other objects.'
  id: totrans-113
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Max Occlusion Distance**: Maximum distance for an object to cause occlusion
    on another object.'
  id: totrans-114
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Visualize Material Diffuse**: Overrides normal direct lighting and indirect
    lighting with the material diffuse term exported to Lightmass.![Tweaking Lightmass
    settings](img/B03950_05_26.jpg)'
  id: totrans-115
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Visualize Material Diffuse enabled
  id: totrans-116
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '**Visualize Ambient Occlusion**: Overrides normal direct lighting and indirect
    lighting with ambient occlusion. This is useful when you are tweaking **Ambient
    Occlusion** settings.![Tweaking Lightmass settings](img/B03950_05_27.jpg)'
  id: totrans-117
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Visualize Ambient Occlusion enabled
  id: totrans-118
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '**Volume Light Sample Placement Scale**: Scales the distance at which volume
    lighting samples are placed.'
  id: totrans-119
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Note
  id: totrans-120
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: All these Lightmass settings require lighting rebuild. So if you change any
    of these settings, make sure you rebuild the lighting for the changes to take
    effect.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
- en: '**Volume Light Samples** are placed by Lightmass in the level after light building,
    and are used for dynamic objects such as characters, since Lightmass only generates
    lightmaps for static objects. This is also called **Indirect Lighting Cache**.'
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
- en: 'In the following screenshots, you can see how the movable object (red sphere)
    is lit using **Indirect Lighting Cache**:'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
- en: '![Tweaking Lightmass settings](img/B03950_05_28.jpg)'
  id: totrans-124
  prefs: []
  type: TYPE_IMG
- en: With Indirect Lighting Cache
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
- en: '![Tweaking Lightmass settings](img/B03950_05_29.jpg)'
  id: totrans-126
  prefs: []
  type: TYPE_IMG
- en: Without Indirect Lighting Cache
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
- en: Note
  id: totrans-128
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '**Volume Light Samples** are only placed within **Lightmass Importance Volume**
    and on static surfaces.'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
- en: '**Indirect Lighting Cache** also helps with previewing objects with unbuilt
    lighting. After light building, if you move a static object, it will automatically
    use **Indirect Lighting Cache** until the next light build.'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
- en: To visualize volume lighting samples, click on **Show** | **Visualize** | **Volume
    Lighting Samples**.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
- en: '![Tweaking Lightmass settings](img/B03950_05_30.jpg)'
  id: totrans-132
  prefs: []
  type: TYPE_IMG
- en: Volume Lighting Samples previewed in the level.
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
- en: Note
  id: totrans-134
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: You can adjust **Global Illumination Intensity** and **Color** in **Post Process
    Volume**. In **Post Process Volume**, expand **Post Process Settings** | **Global
    Illumination** and there you see settings for **Color** and **Intensity**.
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
- en: '![Tweaking Lightmass settings](img/B03950_05_31.jpg)'
  id: totrans-136
  prefs: []
  type: TYPE_IMG
- en: To toggle specific lighting components for debugging, you can use the various
    lighting component flags under the **Show** | **Lighting Components** section.
    For example, if you want to preview your scene without any direct lighting, you
    can turn off **Direct Lighting** and preview your scene in **Indirect Lighting**
    only. Keep in mind that these are only editor features and do not affect your
    game. These are only for debugging purposes.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 要切换特定的照明组件以进行调试，您可以在**显示** | **照明组件**部分使用各种照明组件标志。例如，如果您想预览您的场景而不使用任何直接照明，您可以关闭**直接照明**，仅预览**间接照明**的场景。请注意，这些功能仅适用于编辑器，并且不会影响您的游戏。这些功能仅用于调试目的。
- en: '![Tweaking Lightmass settings](img/B03950_05_32.jpg)'
  id: totrans-138
  prefs: []
  type: TYPE_IMG
  zh: '![调整Lightmass设置](img/B03950_05_32.jpg)'
- en: Summary
  id: totrans-139
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: 'In this chapter, we learned about lights and how they can improve the realism
    of your scene by using Lightmass Global Illumination, and how to prepare our assets
    to use with Lightmass. We also learned about various lights and common settings.
    In the next chapter we will dive into the best and most unique feature of Unreal
    Engine 4: Blueprints.'
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们学习了关于灯光的知识，以及如何通过使用Lightmass全局照明来提高场景的真实感，以及如何准备我们的资产以与Lightmass一起使用。我们还学习了各种灯光和常见设置。在下一章中，我们将深入了解Unreal
    Engine 4最独特和最佳的功能：蓝图。
