<html><head></head><body>
<div id="page" style="height:0pt"/><div class="book" title="Chapter&#xA0;1.&#xA0;Installing Cocos2d-x"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch01" class="calibre1"/>Chapter 1. Installing Cocos2d-x</h1></div></div></div><p class="calibre6">
<span class="strong"><em class="calibre8">In this chapter, we'll get things up and running on your machine so you can get the most out of the examples in this book. This will include information on downloading the framework and creating a project as well as an overview of the basic structure of a Cocos2d-x application.</em></span>
</p><p class="calibre6">
<span class="strong"><em class="calibre8">I will also point you to some extra tools you should consider getting to help you with the development process, such as tools to build sprite sheets, particle effects, and bitmap fonts. Although these tools are optional, and you can still learn how to use sprite sheets, particles, and bitmap fonts just by following the examples given in this book, you might consider these tools for your own projects.</em></span>
</p><p class="calibre6">Things you will learn in this first chapter are as follows:</p><div class="book"><ul class="itemizedlist"><li class="listitem">How to download Cocos2d-x</li><li class="listitem">How to run your first multiplatform application</li><li class="listitem">What the basic project looks like and how to find your way around it</li><li class="listitem">How to use the test project as a major reference source</li></ul></div></div>

<div class="book" title="Chapter&#xA0;1.&#xA0;Installing Cocos2d-x">
<div class="book" title="Downloading and installing Cocos2d-x"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_1"><a id="ch01lvl1sec10" class="calibre1"/>Downloading and installing Cocos2d-x</h1></div></div></div><p class="calibre6">All the examples in this<a id="id0" class="calibre1"/> book were developed in a Mac using Xcode and/or Eclipse. The example in the final chapter uses Cocos2d-x own IDE for scripting. Although you can use Cocos2d-x to develop your games for other platforms using different systems, the examples were built in a Mac and deployed to both iOS and Android.</p><p class="calibre6">Xcode<a id="id1" class="calibre1"/> is free and can be downloaded from the Mac App <a id="id2" class="calibre1"/>store (<a class="calibre1" href="https://developer.apple.com/xcode/index.php">https://developer.apple.com/xcode/index.php</a>), but in order to test your code on an iOS device and publish your games, you will need a developer account with Apple, which will cost you $99 a year. You can find more information on their <a id="id3" class="calibre1"/>website: <a class="calibre1" href="https://developer.apple.com/">https://developer.apple.com/</a>.</p><p class="calibre6">For Android deployment, I recommend that you get the Eclipse and ADT bundle<a id="id4" class="calibre1"/> from Google, which you can find at <a class="calibre1" href="http://developer.android.com/sdk/installing/installing-adt.html">http://developer.android.com/sdk/installing/installing-adt.html</a>. You will be able to test your games in an Android device for free.</p><p class="calibre6">So, assuming you have an Internet connection, let's begin!</p></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Time for action &#x2013; downloading, downloading, downloading"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch01lvl1sec11" class="calibre1"/>Time for action – downloading, downloading, downloading</h1></div></div></div><p class="calibre6">We start by <a id="id5" class="calibre1"/>downloading the necessary SDKs, NDKs, and general bits and bobs:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Go to <a class="calibre1" href="http://www.cocos2d-x.org/download">http://www.cocos2d-x.org/download</a> and download the latest stable version of <a id="id6" class="calibre1"/>Cocos2d-x. For this book, I'll be using version Cocos2d-x-3.4.</li><li class="listitem" value="2">Uncompress the files somewhere in your machine you can remember later. I recommend that you add all the files we're going to download now to the same folder.</li><li class="listitem" value="3">Go ahead and download the Code IDE as well. We'll be using this in the last chapter in this book.</li><li class="listitem" value="4">Then, go to <a class="calibre1" href="http://developer.android.com/sdk/installing/installing-adt.html">http://developer.android.com/sdk/installing/installing-adt.html</a> and download the Eclipse ADT plugin<a id="id7" class="calibre1"/> (if you don't have Eclipse or the Android SDK<a id="id8" class="calibre1"/> installed, download them at <a class="calibre1" href="https://eclipse.org/downloads/">https://eclipse.org/downloads/</a> and <a class="calibre1" href="http://developer.android.com/sdk/installing/index.html?pkg=tools">http://developer.android.com/sdk/installing/index.html?pkg=tools</a>, respectively).<div class="note" title="Note"><h3 class="title2"><a id="note02" class="calibre1"/>Note</h3><p class="calibre6">If you have any <a id="id9" class="calibre1"/>problems installing the ADT plugin, you will find complete instructions at <a class="calibre1" href="http://developer.android.com/sdk/installing/installing-adt.html">http://developer.android.com/sdk/installing/installing-adt.html</a>.</p></div></li><li class="listitem" value="5">Now, for Apache Ant<a id="id10" class="calibre1"/>, go to <a class="calibre1" href="http://ant.apache.org/bindownload.cgi">http://ant.apache.org/bindownload.cgi</a> and look for the links to the compressed files, and download the <code class="email">.zip</code> one.</li><li class="listitem" value="6">Lastly, go to <a class="calibre1" href="https://developer.android.com/tools/sdk/ndk/index.html">https://developer.android.com/tools/sdk/ndk/index.html</a> and <a id="id11" class="calibre1"/>download the latest version of the NDK for your target system. Follow the installation instructions on this same page on how to extract the files as some systems will not allow these to be self-extractable. A word of warning: you must use a version of the NDK above r8e with Cocos2d-x 3.x.</li></ol><div class="calibre12"/></div></div>

<div class="book" title="Time for action &#x2013; downloading, downloading, downloading">
<div class="book" title="What just happened?"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch01lvl2sec11" class="calibre1"/>
<span class="strong"><em class="calibre8">What just happened?</em></span>
</h2></div></div></div><p class="calibre6">You have successfully <a id="id12" class="calibre1"/>downloaded everything you'll need to set up Cocos2d-x in your machine and start development. If you are using a Mac, you will probably need to change your security settings in <span class="strong"><strong class="calibre7">System Preferences</strong></span> to allow Eclipse to run. Also, go ahead and open the Android SDK Manager inside Eclipse by going to the <span class="strong"><strong class="calibre7">Window-Android SDK Manager</strong></span> menu, and install the packages for at least Version 2.3.3 and then anything above that you might wish to target.</p><p class="calibre6">Also, make sure you have Python installed in your machine. Inside Terminal or command prompt, just type the word <code class="email">python</code> and hit enter. If you don't have it installed, <a id="id13" class="calibre1"/>visit <a class="calibre1" href="https://www.python.org/">https://www.python.org/</a> and follow the instructions there.</p><p class="calibre6">So by the end of this step you should have Cocos2d-x, CocosIDE, the Android SDK the NDK, and Apache Ant all extracted inside a folder.</p><p class="calibre6">Now let's install Cocos2d-x.</p></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Time for action &#x2013; installing Cocos2d-x"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch01lvl1sec12" class="calibre1"/>Time for action – installing Cocos2d-x</h1></div></div></div><p class="calibre6">Open Terminal or command <a id="id14" class="calibre1"/>prompt and navigate to the Cocos2d-x extracted folder:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">You can do this by typing <code class="email">cd</code> (that is, <code class="email">cd</code> and a space) and then dragging the folder to the Terminal window and hitting <span class="strong"><em class="calibre8">Enter</em></span>. In my machine this looks like:<div class="informalexample"><pre class="programlisting">cd /Applications/Dev/cocos2d-x-3.4</pre></div></li><li class="listitem" value="2">Next, type <code class="email">python setup.py</code>.</li><li class="listitem" value="3">Hit <span class="strong"><em class="calibre8">Enter</em></span>. You will be prompted for the paths to the NDK, SDK and Apache ANT root. You must drag each one of the folders to the Terminal window, making sure to delete any extra spaces at the end of the path and hit <span class="strong"><em class="calibre8">Enter</em></span>. So for the NDK I get:<div class="informalexample"><pre class="programlisting">/Applications/Dev/android-ndk-r10c</pre></div></li><li class="listitem" value="4">Next, it's the path for the SDK. Once again, I drag the folder that I have stored inside Eclipse's folder:<div class="informalexample"><pre class="programlisting">/Applications/eclipse/sdk</pre></div></li><li class="listitem" value="5">Next, it's the path to ANT. If you have it properly installed on your machine, the path will be something like <code class="email">usr/local/bin</code> and the setup script will find it for you. Otherwise, you can use the one you downloaded and extracted. Just point to the <code class="email">bin</code> folder inside it:<div class="informalexample"><pre class="programlisting">/Applications/Dev/apache-ant-1.9.4/bin</pre></div></li><li class="listitem" value="6">The last step is to add these paths to your system. Follow the last instruction in the window where it says: <span class="strong"><strong class="calibre7">Please execute command: "source /Users/YOUR_USER_NAME/.bash_profile" to make added system variables take effect</strong></span>. You can copy the command inside the quotes, paste it, and hit <span class="strong"><em class="calibre8">Enter</em></span>.</li></ol><div class="calibre12"/></div></div>

<div class="book" title="Time for action &#x2013; installing Cocos2d-x">
<div class="book" title="What just happened?"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch01lvl2sec12" class="calibre1"/>
<span class="strong"><em class="calibre8">What just happened?</em></span>
</h2></div></div></div><p class="calibre6">You now have <a id="id15" class="calibre1"/>Cocos2d-x installed on your machine and you're ready to go. Time to create our first project!</p></div></div>
<div class="book" title="Hello-x World-x"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch01lvl1sec13" class="calibre1"/>Hello-x World-x</h1></div></div></div><p class="calibre6">Let's create that<a id="id16" class="calibre1"/> old chestnut in computer programming: the <code class="email">hello world</code> example.</p></div>

<div id="page" style="height:0pt"/><div class="book" title="Time for action &#x2013; creating an application"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch01lvl1sec14" class="calibre1"/>Time for action – creating an application</h1></div></div></div><p class="calibre6">Open Terminal again<a id="id17" class="calibre1"/> and follow these easy steps:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">You should have the path to the Cocos2d-x console already added to your system. You can test this by using the <code class="email">cocos</code> command inside Terminal. In order to create a new project called <code class="email">HelloWorld</code>, using C++ as its primary language and save it on your desktop, you need to run the following command, replacing <code class="email">YOUR_BUNDLE_INDETIFIER</code> with a package name of your choice, and replacing <code class="email">PATH_TO_YOUR_PROJECT</code> with the path to wherever you wish to save your project:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">cocos new HelloWorld -p YOUR_BUNDLE_IDENTIFIER -l cpp -d PATH_TO_YOUR_PROJECT</strong></span>
</pre></div></li><li class="listitem" value="2">As an example, in my machine this is the line I typed:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">cocos new HelloWorld -p com.rengelbert.HelloWorld -l cpp -d /Users/rengelbert/Desktop/HelloWorld</strong></span>
</pre></div><p class="calibre13">And hit <span class="strong"><em class="calibre8">Enter</em></span>. If you choose not to give a directory parameter <code class="email">(-d</code>), the Cocos console will save the project inside the <code class="email">Cocos2d-x</code> folder.</p></li><li class="listitem" value="3">Now you can go to your desktop, or wherever you chose to save your project, and navigate to the folder <code class="email">proj.ios_mac</code> inside the <code class="email">HelloWorld</code> project. Inside that folder you'll find the Xcode project file. Once you open the project inside Xcode, you can click the <span class="strong"><strong class="calibre7">Run</strong></span> button and you're done.<div class="mediaobject"><img src="../images/00002.jpeg" alt="Time for action – creating an application" class="calibre9"/></div><p class="calibre14"> </p></li></ol><div class="calibre12"/></div><div class="informalexample" title="Note"><h3 class="title2"><a id="note03" class="calibre1"/>Note</h3><p class="calibre6">When you run a <span class="strong"><strong class="calibre7">cocos2d-x</strong></span> application in Xcode, it is quite common for the program to post some warnings regarding your code, or most likely, the frameworks. These will mostly reference deprecated methods or statements that do not precisely follow more recent and stricter rules of the current SDK. But that's okay. These warnings, though certainly annoying, can be ignored.</p></div></div>

<div class="book" title="Time for action &#x2013; creating an application">
<div class="book" title="What just happened?"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch01lvl2sec13" class="calibre1"/>
<span class="strong"><em class="calibre8">What just happened?</em></span>
</h2></div></div></div><p class="calibre6">You created your first <a id="id18" class="calibre1"/>Cocos2d-x application. The parameters used on the command line are:</p><div class="book"><ul class="itemizedlist"><li class="listitem"><code class="email">-p</code> for package or bundle identifier</li><li class="listitem"><code class="email">-l</code> for language, and here, you have the option <code class="email">cpp</code>, <code class="email">lua</code>, or JavaScript</li></ul></div><p class="calibre6">Now let's run this app in Android.</p><div class="informalexample" title="Note"><h3 class="title2"><a id="tip02" class="calibre1"/>Tip</h3><p class="calibre6">
<span class="strong"><strong class="calibre7">Downloading the example code </strong></span>
</p><p class="calibre6">You can download the example code files from your account at <a class="calibre1" href="http://www.packtpub.com">http://www.packtpub.com</a> for all the Packt Publishing books you have purchased. If you purchased this book elsewhere, you can visit <a class="calibre1" href="http://www.packtpub.com/support">http://www.packtpub.com/support</a> and register to have the files e-mailed directly to you.</p></div></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Time for action &#x2013; deploying to Android"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch01lvl1sec15" class="calibre1"/>Time for action – deploying to Android</h1></div></div></div><p class="calibre6">We're going to <a id="id19" class="calibre1"/>open the project inside Eclipse:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Open Eclipse.</li><li class="listitem" value="2">We need to fix the path to the NDK; this step may be optional in your system, and in any case, it must be done only once. Inside Eclipse, go to <span class="strong"><strong class="calibre7">Eclipse-Preferences</strong></span>, then inside the <span class="strong"><strong class="calibre7">C/C++</strong></span> option select <span class="strong"><strong class="calibre7">Build-Environment</strong></span>.</li><li class="listitem" value="3">You need to add the<a id="id20" class="calibre1"/> NDK path and it must be called <code class="email">NDK_ROOT</code>. In order to do this, you must click <span class="strong"><strong class="calibre7">Add…</strong></span>, and use <code class="email">NDK_ROOT</code> as the name and then click inside the <span class="strong"><strong class="calibre7">Value</strong></span> field to make sure the mouse cursor is active inside it, and then drag the NDK folder you downloaded inside the field. On my machine the result looked like this:<div class="mediaobject"><img src="../images/00003.jpeg" alt="Time for action – deploying to Android" class="calibre9"/></div><p class="calibre14"> </p></li><li class="listitem" value="4">Click <span class="strong"><strong class="calibre7">Apply</strong></span>. It might be good to restart Eclipse. (If you do not see the <span class="strong"><strong class="calibre7">C/C++</strong></span> option in <span class="strong"><strong class="calibre7">Preferences,</strong></span> it means you do not have the CDT plugins<a id="id21" class="calibre1"/> installed. Look for complete instructions at <a class="calibre1" href="http://www.eclipse.org/cdt/">http://www.eclipse.org/cdt/</a> on how to install them.)</li><li class="listitem" value="5">Now we're ready to bring our project inside Eclipse. Select <span class="strong"><strong class="calibre7">File</strong></span> | <span class="strong"><strong class="calibre7">Import…</strong></span>.</li><li class="listitem" value="6">In the dialog box, select the <span class="strong"><strong class="calibre7">Android</strong></span> option, and then select the <span class="strong"><strong class="calibre7">Existing Android Code Into Workspace</strong></span> option and click <span class="strong"><strong class="calibre7">Next</strong></span>:<div class="mediaobject"><img src="../images/00004.jpeg" alt="Time for action – deploying to Android" class="calibre9"/></div><p class="calibre14"> </p></li><li class="listitem" value="7">Click on the <a id="id22" class="calibre1"/><span class="strong"><strong class="calibre7">Browse</strong></span> button and navigate to the <code class="email">HelloWorld</code> project, and select the <code class="email">proj.android</code> folder inside it and hit <span class="strong"><strong class="calibre7">Next</strong></span>.</li><li class="listitem" value="8">You should see the project compiling. The entire framework library will be compiled and so will the classes used in the base template.</li><li class="listitem" value="9">Sadly, with Version 3.4 of the framework, we have an extra step here. It was gone in Version 3.3, but now it's back. You must import the project's referenced Cocos2d-x library into Eclipse's package explorer. Repeat step 8, but instead of selecting the <code class="email">proj.android</code> folder, select <code class="email">cocos2d/cocos/platform/android/java</code>, and hit <span class="strong"><strong class="calibre7">Next</strong></span>.</li><li class="listitem" value="10">This will select a library called <code class="email">libcocos2dx</code>; click on <span class="strong"><strong class="calibre7">Finish</strong></span>.</li><li class="listitem" value="11">Once that's done, it might be good to run a build just in case your project failed to generate the correct resource files. So, navigate to <span class="strong"><strong class="calibre7">Project</strong></span> | <span class="strong"><strong class="calibre7">Build All</strong></span>.</li><li class="listitem" value="12">Now, connect your Android device and make sure Eclipse has recognized it. You might need to turn on <span class="strong"><strong class="calibre7">Development</strong></span> options in your device, or restart your device while connected to your computer and with Eclipse running.</li><li class="listitem" value="13">Right-click on your project folder and select <span class="strong"><strong class="calibre7">Run As</strong></span> | <span class="strong"><strong class="calibre7">Android Application</strong></span>.</li></ol><div class="calibre12"/></div></div>

<div class="book" title="Time for action &#x2013; deploying to Android">
<div class="book" title="What just happened?"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch01lvl2sec14" class="calibre1"/>
<span class="strong"><em class="calibre8">What just happened?</em></span>
</h2></div></div></div><p class="calibre6">You ran your first <a id="id23" class="calibre1"/>Cocos2d-x application in Android. Don't bother with the simulator for your Android builds; it's a waste of time. If you don't have a device handy, consider investing in one.</p><p class="calibre6">Alternatively, you could open your project's root folder inside Terminal (or command prompt) and use the Cocos2d-x console <code class="email">compile</code> command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">cocos compile -p android</strong></span>
</pre></div><p class="calibre6">The people behind Cocos2d-x have announced they will get rid of the build Python script in the future versions of the framework, so it's good to be prepared and know how to go without it.</p><p class="calibre6">While working with Eclipse, you might soon be faced with the dreaded <code class="email">java.lang.NullPointerException</code> error. This might be related to conflicts in the ADT, CDT or NDK!</p><div class="informalexample" title="Note"><h3 class="title2"><a id="note04" class="calibre1"/>Note</h3><p class="calibre6">When you're faced with this error you have no option other than reinstall whatever Eclipse points to as the culprit. This might happen after an update, or if for some reason you have installed another framework that uses a path to the NDK or ADT. If the error is tied to a particular project or library, just remove all projects from the package explorer in Eclipse and reimport them.</p></div><p class="calibre6">Now let's go over the sample application and its files.</p></div></div>

<div class="book" title="Time for action &#x2013; deploying to Android">
<div class="book" title="The folder structure"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch01lvl2sec15" class="calibre1"/>The folder structure</h2></div></div></div><p class="calibre6">First you <a id="id24" class="calibre1"/>have the <code class="email">Classes</code> folder; this will contain the classes for your application, and are written entirely in C++. Below that is the <code class="email">Resources</code> folder, where you find the images, fonts, and any kind of media used by the application.</p><p class="calibre6">The <code class="email">ios</code> folder has the necessary underlying connection between your app and iOS. For other platforms, you will have their necessary linkage files in separate folders targeting their respective platform.</p><p class="calibre6">It is important to maintain this file structure. So your classes will go into the <code class="email">Classes</code> folder and all your images, sound files, fonts, level data should be placed in the <code class="email">Resources</code> folder.</p><div class="mediaobject"><img src="../images/00005.jpeg" alt="The folder structure" class="calibre9"/></div><p class="calibre10"> </p><p class="calibre6">Now let's go over the main classes of the basic application.</p></div></div>

<div class="book" title="Time for action &#x2013; deploying to Android">
<div class="book" title="The iOS linkage classes"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch01lvl2sec16" class="calibre1"/>The iOS linkage classes</h2></div></div></div><p class="calibre6">
<code class="email">AppController</code> and <code class="email">RootViewController</code> are <a id="id25" class="calibre1"/>responsible to <a id="id26" class="calibre1"/>setting up OpenGL in iOS as well as telling the underlying operating system that your application is about to say <code class="email">Hello... To the World</code>.</p><p class="calibre6">These classes are written with a mix of Objective-C and C++, as all the nice brackets and the <code class="email">.mm</code> extension show. You will change very little, if anything, on these classes; and again that will reflect in changes to the way iOS handles your application. So other targets would require the same instructions or none at all, depending on the target.</p><p class="calibre6">In <code class="email">AppController</code> for instance, I could add support for multitouch. And in <code class="email">RootViewController</code>, I could limit the screen orientations supported by my application, for instance.</p></div></div>

<div class="book" title="Time for action &#x2013; deploying to Android">
<div class="book" title="The AppDelegate class"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_4"><a id="ch01lvl2sec17" class="calibre1"/>The AppDelegate class</h2></div></div></div><p class="calibre6">This class marks <a id="id27" class="calibre1"/>the first time your C++ app will talk to the underlying OS. It <a id="id28" class="calibre1"/>attempts to map the main events mobile devices we want to dispatch and listen to. From here on, all your application will be written in C++ (unless you need something else for a specific target) and from this point on, you can add conditional code for different targets.</p><p class="calibre6">In <code class="email">AppDelegate</code>, you should set up the <code class="email">Director</code> object (it is the Cocos2d-x all powerful singleton manager object), to run your application just the way you want. You can:</p><div class="book"><ul class="itemizedlist"><li class="listitem">Get rid of the application status information</li><li class="listitem">Change the frame rate of your application</li><li class="listitem">Tell <code class="email">Director</code> where your high definition images are, and where your standard definition images are, as well as which to use</li><li class="listitem">You can change the overall scale of your application, so it will best fit different screens</li><li class="listitem">The <code class="email">AppDelegate</code> class is also the best place to start any preloading process</li><li class="listitem">And most importantly, it is here you tell the <code class="email">Director</code> object what <code class="email">Scene</code> to begin your application with</li></ul></div><p class="calibre6">Here too, you will handle what happens to your application if the OS decides to kill it, push it aside, or hang it upside down to dry. All you need to do is place your logic inside the correct event handler: <code class="email">applicationDidEnterBackground</code> or <code class="email">applicationWillEnterForeground</code>.</p></div></div>

<div class="book" title="Time for action &#x2013; deploying to Android">
<div class="book" title="The HelloWorldScene class"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_5"><a id="ch01lvl2sec18" class="calibre1"/>The HelloWorldScene class</h2></div></div></div><p class="calibre6">When you run the <a id="id29" class="calibre1"/>application, you get a screen with the words <code class="email">Hello World</code> and a<a id="id30" class="calibre1"/> bunch of numbers in one corner; those are the display statistics you decided you wanted around in the <code class="email">AppDelegate</code> class.</p><p class="calibre6">The actual screen is created by the oddly named <code class="email">HelloWorldScene</code> class. It is a <code class="email">Layer</code> class that creates its own scene (don't worry if you don't know what a <code class="email">Layer</code> or a <code class="email">Scene</code> class is; you will know soon).</p><p class="calibre6">When it initializes, <code class="email">HelloWorldScene</code> puts a button on the screen that you can press to exit the application. The button is actually a <code class="email">Menu</code> item part of a <code class="email">Menu</code> object that only has one button, with two image states for the button, and one call back event when the said button is pressed.</p><p class="calibre6">The <code class="email">Menu</code> object automatically handles touch events targeting its members, so you don't get to see any of that code floating about. Then, there is also the necessary <code class="email">Label</code> object to show the <code class="email">Hello World</code> message and the background image.</p></div></div>

<div class="book" title="Time for action &#x2013; deploying to Android">
<div class="book" title="Who begets whom?"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_6"><a id="ch01lvl2sec19" class="calibre1"/>Who begets whom?</h2></div></div></div><p class="calibre6">If have you never worked<a id="id31" class="calibre1"/> with either Cocos2d or Cocos2d-x before, the way the initial <code class="email">scene()</code> method is instantiated may lead to dizziness. To recap, in <code class="email">AppDelegate</code> you have:</p><div class="informalexample"><pre class="programlisting">auto scene = HelloWorld::createScene();
director-&gt;runWithScene(scene);</pre></div><p class="calibre6">
<code class="email">Director</code> needs a <code class="email">Scene</code> object to run, which you can think of as being your application, basically. <code class="email">Scene</code> needs something to show, and in this case, a <code class="email">Layer</code> object will do. <code class="email">Scene</code> is then said to contain a <code class="email">Layer</code> object.</p><p class="calibre6">Here a <code class="email">Scene</code> object is created through a static method <code class="email">scene</code> inside a <code class="email">Layer</code> derived class. So the layer creates the scene, and the scene immediately adds the layer to itself. Huh? Relax. This incestuous-like instantiation will most likely happen only once, and you get nothing to do with it when it happens. So you can easily ignore all these funny goings-on and look the other way. I promise instantiations will be a much easier task after this first one.</p></div></div>
<div class="book" title="Finding more reference material"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch01lvl1sec16" class="calibre1"/>Finding more reference material</h1></div></div></div><p class="calibre6">Follow these steps to access one of the best sources for reference material on Cocos2d-x: its <code class="email">Test</code> project.</p></div>

<div id="page" style="height:0pt"/><div class="book" title="Time for action &#x2013; running the test samples"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch01lvl1sec17" class="calibre1"/>Time for action – running the test samples</h1></div></div></div><p class="calibre6">You can open the test project<a id="id32" class="calibre1"/> just like you would any other Xcode/Eclipse project:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">In Eclipse, you can import the test project from inside the Cocos2d-x folder you downloaded. You'll find it in <code class="email">tests/cpp-tests/proj.android</code>.</li><li class="listitem" value="2">You can follow the same steps as before to build this project.</li><li class="listitem" value="3">In Xcode, you must open the tests project file that you'll find in the Cocos2d-x framework folder inside the <code class="email">build</code> folder: <code class="email">build/cocos2d_tests.xcodeproj</code>.</li><li class="listitem" value="4">Once the project is opened in Xcode, you must select the correct target next to the <span class="strong"><strong class="calibre7">Run</strong></span> button as follows:<div class="mediaobject"><img src="../images/00006.jpeg" alt="Time for action – running the test samples" class="calibre9"/></div><p class="calibre14"> </p></li><li class="listitem" value="5">In order to actually review the code inside the tests, you may <a id="id33" class="calibre1"/>navigate to <code class="email">tests/cpp-tests/Classes</code> for the C++ tests or <code class="email">tests/lua-tests/src</code> for the Lua tests. Better yet, if you have a program such as <code class="email">TextWrangler</code> or an equivalent, you can open these entire directories inside a <span class="strong"><strong class="calibre7">Disk Browser</strong></span> window and have all that information ready for referencing right at your desktop.</li></ol><div class="calibre12"/></div></div>

<div class="book" title="Time for action &#x2013; running the test samples">
<div class="book" title="What just happened?"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch01lvl2sec20" class="calibre1"/>
<span class="strong"><em class="calibre8">What just happened?</em></span>
</h2></div></div></div><p class="calibre6">With the test samples, you can visualize most features in Cocos2d-x, what they do, as well as see some of the ways you can initialize and customize them.</p><p class="calibre6">I will refer to the code found in the tests quite often. As usual with programming, there is always a different way to accomplish the same task, so sometimes, after showing you one way, I'll refer to a different one that you can find (and by then easily understand) inside the <code class="email">Test</code> classes.</p></div></div>
<div class="book" title="The other tools"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch01lvl1sec18" class="calibre1"/>The other tools</h1></div></div></div><p class="calibre6">Now comes the part <a id="id34" class="calibre1"/>where you may need to spend a bit more money to get some extremely helpful tools (and do some extra bit of learning). In this book's examples, I use four of them:</p><div class="book"><ul class="itemizedlist"><li class="listitem">A tool to help build sprite sheets: I'll use <span class="strong"><strong class="calibre7">TexturePacker</strong></span><a id="id35" class="calibre1"/> (<a class="calibre1" href="http://www.codeandweb.com/texturepacker">http://www.codeandweb.com/texturepacker</a>). There are other alternatives, such as <a id="id36" class="calibre1"/><span class="strong"><strong class="calibre7">Zwoptex</strong></span> (<a class="calibre1" href="http://zwopple.com/zwoptex/">http://zwopple.com/zwoptex/</a>), and they usually offer some features for free. Cocos2d-x now offers a free program called <a id="id37" class="calibre1"/><span class="strong"><strong class="calibre7">CocosStudio</strong></span>, which is somewhat similar to <a id="id38" class="calibre1"/><span class="strong"><strong class="calibre7">SpriteBuilder</strong></span> (previously <a id="id39" class="calibre1"/><span class="strong"><strong class="calibre7">CocosBuilder</strong></span>), and it offers ways to build sprite sheets, bitmap fonts, as well as a number of other goodies. At the time of writing this, the Windows version is somewhat superior to the Mac version, but they are free!</li><li class="listitem">A tool to help build particle effects: I'll use Particle Designer<a id="id40" class="calibre1"/> (<a class="calibre1" href="http://www.71squared.com/en/particledesigner">http://www.71squared.com/en/particledesigner</a>). Depending on your operating system, you may find free tools online for this. Cocos2d-x comes bundled with some common particle effects that you can customize. But doing it blindly is a process I do not recommend. CocosStudio also allows you to create your own particle effects, but you may find its interface a bit daunting. It certainly requires its own book of tutorials!</li><li class="listitem">A tool to help build bitmap fonts: I'll use<a id="id41" class="calibre1"/> Glyph Designer (<a class="calibre1" href="http://www.71squared.com/en/glyphdesigner">http://www.71squared.com/en/glyphdesigner</a>). But there are others: bmGlyph (which is not as expensive) and FontBuilder (which is free). It is not extremely hard to build a bitmap font—not nearly as hard as building a particle effect from scratch—but doing it once is enough to convince you to get one of these tools fast. Once again, you might give CocosStudio a go.</li><li class="listitem">A tool to produce sound effects: No contest—sfxr for Windows<a id="id42" class="calibre1"/> or its<a id="id43" class="calibre1"/> Mac port cfxr. Both are free (<a class="calibre1" href="http://www.drpetter.se/project_sfxr.html">http://www.drpetter.se/project_sfxr.html</a> and <a class="calibre1" href="http://thirdcog.eu/apps/cfxr">http://thirdcog.eu/apps/cfxr</a>, respectively).</li></ul></div></div>
<div class="book" title="Summary"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch01lvl1sec19" class="calibre1"/>Summary</h1></div></div></div><p class="calibre6">You just learned how to install Cocos2d-x and create a basic application. You also learned enough of the structure of a basic Cocos2d-x application to start building your first game and you know how to deploy to both iOS and Android.</p><p class="calibre6">Keep the <code class="email">Test</code> classes by your side as you go over the examples in this book and you will be a Cocos2d-x pro in no time!</p><p class="calibre6">But first, let's go over a few things regarding the framework and its native language.</p></div></body></html>