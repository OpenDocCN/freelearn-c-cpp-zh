<html><head></head><body><div><div><div><div><h1 class="title"><a id="ch04"/>Chapter 4. Constraints</h1></div></div></div><div><div><div><div><h1 class="title"><a id="ch04lvl1sec44"/>What are constraints?</h1></div></div></div><p>Constraints are <a id="id247" class="indexterm"/>basic physical actors in Unreal Engine 4. Imagine that physical rules need something to be presented with, such as a tool, switch, calculator, or container. It's <a id="id248" class="indexterm"/>called <strong>physic actor</strong>, and physic actors that are responsible for simulating the physical behavior between two objects are known as physics constraint actor.</p><p>It works in a similar way to a minicomputer. You can connect two inputs to it, and it calculates how these two should play with the physical rules in the game. Finally, it applies the changes to the object as real-time processing during the game play.</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch04lvl1sec45"/>The first physics constraint actor experience</h1></div></div></div><p>Before we <a id="id249" class="indexterm"/>start working in Unreal Editor, we <a id="id250" class="indexterm"/>will need to have a project to work with. Perform the following steps:</p><div><ol class="orderedlist arabic"><li class="listitem">First, open Unreal Editor by clicking on the <strong>Launch</strong> button from Unreal Engine launcher.</li><li class="listitem">Start a new project from <strong>Project</strong> browser by selecting the <strong>New Project</strong> tab. Select <strong>First Person</strong> and make sure that <strong>With Starter Content</strong> is selected and give the project a name (<code class="literal">constraints_test</code>).</li><li class="listitem">Once you are finished, locate the two cubes on your view. Select one and then click on the small icon in the top-right corner of your view:<div><img src="img/image00277.jpeg" alt="The first physics constraint actor experience"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">Now, you <a id="id251" class="indexterm"/>have four viewports <a id="id252" class="indexterm"/>on your screen. It's good practice when you are working with constraints to check your stage from four views. Now, select one of the cubes, middle-click on the top view, and press the <em>F</em> key. This automatically navigates all your viewports so that they are all focused on your actual selection.<div><img src="img/image00278.jpeg" alt="The first physics constraint actor experience"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">Now, we <a id="id253" class="indexterm"/>need to move one cube <a id="id254" class="indexterm"/>onto another one. Also, rotate the upper cube so that it fits the same angle as the one after it. Use the move and rotate tools to create your stage, as shown in the following screenshot. As you can see, the upper cube is about three times further away from the lower cube:<div><img src="img/image00279.jpeg" alt="The first physics constraint actor experience"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">Let's click <a id="id255" class="indexterm"/>on the area in the top-right corner of your <strong>Perspective</strong> view to expand it and press <strong>Play</strong>. You will <a id="id256" class="indexterm"/>see one cube just fall on the lower cube. This is caused by gravity. Also, you can move the cubes by shooting balls at them. We need to disable this physic rules for the upper cube. Now, click on <strong>Stop</strong> to exit the play mode. Select the upper cube and uncheck <strong>Simulate Physics</strong> in <strong>Details</strong> on the right-hand side of your editor. Then, click on <strong>Play</strong> again.<div><img src="img/image00280.jpeg" alt="The first physics constraint actor experience"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">Now, the upper cube not only falls, but also, when you shoot at it, it doesn't move. This <a id="id257" class="indexterm"/>gives an ideal location to hang the other cube to this one. For this purpose, Unreal Engine defines some tools (known <a id="id258" class="indexterm"/>as <strong>PhysX Constraint</strong>). These <a id="id259" class="indexterm"/>tools allow you to simulate reality based on the physical behavior and the mode of the game world. Then, switch back to four views, click on <strong>All Classes</strong> in <strong>Modes</strong>, and locate <strong>PhysicsConstraintActor</strong> near <strong>All Classes</strong>:<div><img src="img/image00281.jpeg" alt="The first physics constraint actor experience"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">Drag and drop this actor and place it in the middle of the cubes. Locate the <strong>Constraint</strong> section from the right-hand side list. Each physics constraint actor needs two objects to operate with. This means that we need to give the actor object names and then this actor presents a physical-based action in the game world <a id="id260" class="indexterm"/>during the game <a id="id261" class="indexterm"/>play. How we do this? You will find two similar actors in the <strong>Constraint</strong> section: <strong>Constraint Actor 1</strong> and <strong>Constraint Actor 2</strong>. Here, we can define objects. Simply click on the picker icon and then on the upper cube for <strong>Constraint Actor 1</strong> and another cube for <strong>Constraint Actor 2</strong>, as shown in the following screenshot:<div><img src="img/image00282.jpeg" alt="The first physics constraint actor experience"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">Now, switch <a id="id262" class="indexterm"/>to the <strong>Perspective</strong> <a id="id263" class="indexterm"/>view, move the lower cube a bit up, press <strong>Play</strong>, and shoot the lower cube from different angles and locations, as shown in the following screenshot:<div><img src="img/image00283.jpeg" alt="The first physics constraint actor experience"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">As you <a id="id264" class="indexterm"/>can see, it looks like <a id="id265" class="indexterm"/>something is grabbing the lower cube and forcing it to remain there and rotate around that point. Also, the cube shows normal behavior with gravity.<div><img src="img/image00284.jpeg" alt="The first physics constraint actor experience"/></div><p style="clear:both; height: 1em;"> </p></li></ol><div></div><p>What you <a id="id266" class="indexterm"/>observe here is how physic constraints work in Unreal Engine. You <a id="id267" class="indexterm"/>can change the physical parameters related to each object and obtain different results. Let's take a look at some:</p><div><ol class="orderedlist arabic"><li class="listitem">For the upper cube, check <strong>Physics</strong> in the <strong>Details</strong> window. When you play, it seems that all the cubes are connected to each other, whereas when you move one, others react to your interaction. Click on <strong>Stop</strong> and uncheck <strong>Physics</strong> for the upper cube.</li><li class="listitem">Select the lower cube. Then, in <strong>Physics</strong>, change <strong>Mass Scale</strong> from <code class="literal">1.0</code> to <code class="literal">1000</code>. Now, play the game and try to move the cube. It looks like it's heavy, very heavy. So, click on <strong>Stop</strong> and change <strong>Mass Scale</strong> to <code class="literal">1.0</code>.<div><img src="img/image00285.jpeg" alt="The first physics constraint actor experience"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">Select the <a id="id268" class="indexterm"/>lower cube, uncheck <strong>Enable Gravity</strong>, and click on <strong>Play</strong>. Try to shoot the cube and observe the <a id="id269" class="indexterm"/>difference. It saves its connection to other objects, but doesn't follow the gravity of the game world.<div><img src="img/image00286.jpeg" alt="The first physics constraint actor experience"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">Then, press <strong>Stop</strong> and check <strong>Enable Gravity</strong>.</li></ol><div></div></div>
<div><div><div><div><h1 class="title"><a id="ch04lvl1sec46"/>Customizing physics constraint actor</h1></div></div></div><p>Now we <a id="id270" class="indexterm"/>know that this actor connects <a id="id271" class="indexterm"/>two objects to each other by supporting the gravity and physical aspects of each object. We also know that it is invisible to players. In addition, <strong>Physics Constraint Actor</strong> has some properties that strongly shape the physical behavior of objects. Let's start with position. Switch back to four views and move your <strong>Physics Constraint Actor</strong> close to the upper cube, as shown in the following screenshot:</p><div><img src="img/image00287.jpeg" alt="Customizing physics constraint actor"/></div><p style="clear:both; height: 1em;"> </p><p>Now, press <a id="id272" class="indexterm"/>
<strong>Play</strong> and shoot the cube. As you <a id="id273" class="indexterm"/>can see, it even goes over the upper cube. It seems that the rotation point is going higher. This is correct. The exact description is that you move your physics constraint actor to the top. This basically changes the way these two objects behave based on physical rules.</p><p>Now, click on <strong>Stop</strong>. Then, click on your physics constraint actor and press <em>F</em>. In <strong>Angular Limits</strong>, in the <strong>Details</strong> section on the right-hand side, set <strong>Angular Swing 1Motion</strong> to <strong>Locked</strong>, <strong>Angular Twist Motion</strong> to <strong>Limited</strong>, and <strong>Twist Limit Angel</strong> and <strong>Angular Swing 2Motion</strong> to <strong>60</strong>:</p><div><img src="img/image00288.jpeg" alt="Customizing physics constraint actor"/></div><p style="clear:both; height: 1em;"> </p><p>Now, click on <strong>Play</strong>. As you can see, the cube plays in a pyramid-like area between 60 degrees and <a id="id274" class="indexterm"/>nowhere else. Then, click on <a id="id275" class="indexterm"/>
<strong>Stop</strong> and change <strong>Angular Swing 1Motion</strong> to <strong>Free</strong>. Finally, click on <strong>Play</strong>. As you can see, the cube has free rotation on its <em>z</em> axis.</p></div>
<div><div><div><div><h1 class="title"><a id="ch04lvl1sec47"/>A simple game with Blueprint</h1></div></div></div><p>After you click <a id="id276" class="indexterm"/>on <strong>Stop</strong>, select the cubes and your actor. Then, hold <em>Alt</em> and create a copy of all by moving on the <em>Y</em> axis. Now, click on the second actor and pick the upper and lower cubes. Then, select one point light object from <strong>Modes</strong> | <strong>Basic</strong> on the left-hand side and place it close to the stage surface between the two cubes. Our goal is to turn on the light when the cubes experience collision and break one of the cube's physical constraints.</p><div><img src="img/image00289.jpeg" alt="A simple game with Blueprint"/></div><p style="clear:both; height: 1em;"> </p><p>Now, click on <a id="id277" class="indexterm"/>point light and navigate to <strong>Rendering</strong> in the <strong>Details</strong> section and uncheck <strong>Visible</strong>:</p><div><img src="img/image00290.jpeg" alt="A simple game with Blueprint"/></div><p style="clear:both; height: 1em;"> </p><p>Now, click on <strong>Blueprint</strong> and select <strong>Open Level Blueprint</strong>. Navigate back to editor and select your point <a id="id278" class="indexterm"/>light. Now, go back to the <strong>Blueprint</strong> editor, right click on it, and select <strong>Create a Reference to PointLight</strong> from the list. You will have a curvy box with the <strong>PointLight</strong> title on your blueprint stage. Now, locate the small blue hollow circle in the top-right corner of your point light box. Then, click and hold the mouse and move the pointer to the right. You will find a wire-like line that follows your mouse. When you leave the mouse, a list will appear with a search area to type. Enter toggle and click on <strong>Toggle Visibility (PointLightComponent)</strong> from the names in the list, as shown in the following screenshot:</p><div><img src="img/image00291.jpeg" alt="A simple game with Blueprint"/></div><p style="clear:both; height: 1em;"> </p><p>Now, navigate back to editor and select one of the lower cubes. Then, go back to <strong>Blueprint</strong> and use the <a id="id279" class="indexterm"/>same method to open the list, but this time, open <strong>Add Event</strong> for your cube name. Then, open <strong>Collision</strong> and select <strong>Add On Actor Hit</strong>. Now, connect a wire to the previous box you made, as shown in the following screenshot:</p><div><img src="img/image00292.jpeg" alt="A simple game with Blueprint"/></div><p style="clear:both; height: 1em;"> </p><p>What this does is you first define the reference to your <strong>PointLight</strong> and then add the <strong>Toggle</strong> functionality to the visibility of the light. However, you need to turn the light on by selecting <strong>Hit Event</strong> for your cubes. So, we can add <strong>Event</strong> for collision and set the event to execute our toggle function. Click on <strong>Play</strong> and check how it works. As you can see, <strong>PointLight</strong> turns on and off on each hit to the selected cube.</p><p>Now, we need to define another rule for our game. We need to disable the physical actor on the hit event. Then, select your actor over the other cube. Create a reference for it as you did for the lamp. Then, create the <strong>Break Constraint</strong> function with the break keyword on the <a id="id280" class="indexterm"/>search area. Now, select the cube that responds to the actor and then create another hit event and connect it to this function. This is how the result should look:</p><div><img src="img/image00293.jpeg" alt="A simple game with Blueprint"/></div><p style="clear:both; height: 1em;"> </p><p>Now, test the game. As a result of the heat effect, one cube turns the light on/off, whereas another falls on the game stage.</p></div>
<div><div><div><div><h1 class="title"><a id="ch04lvl1sec48"/>Summary</h1></div></div></div><p>The way game designers and artists try to project the mode and presentation of objects in the game meets the frame by frame animation, or wisely use the physical aspects of Unreal Engine.</p><p>Twenty years ago, game designers animated the open and close movement of a simple door with the frame by frame method as an image-sequence file (such as GIF). Now, we can do the same in real time with light effects, materials, physical rules, and the blueprint code. Unreal Engine 4 provides the detailed properties and customizations for movements and dependency between objects in the game world. This is how creativity meets artistic details in a game design. Working with constraints is a kind of creative art.</p></div></body></html>