<html><head></head><body><div class="chapter" title="Chapter&#xA0;1.&#xA0;Getting Started with OpenGL"><div class="titlepage"><div><div><h1 class="title"><a id="ch01"/>Chapter 1. Getting Started with OpenGL</h1></div></div></div><p>In this chapter, we will cover the following topics:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Setting up a Windows-based development platform</li><li class="listitem" style="list-style-type: disc">Setting up a Mac-based development platform</li><li class="listitem" style="list-style-type: disc">Setting up a Linux-based development platform</li><li class="listitem" style="list-style-type: disc">Installing the GLFW library in Windows</li><li class="listitem" style="list-style-type: disc">Installing the GLFW library in Mac OS X and Linux</li><li class="listitem" style="list-style-type: disc">Creating your first OpenGL application with GLFW</li><li class="listitem" style="list-style-type: disc">Compiling and running your first OpenGL application in Windows</li><li class="listitem" style="list-style-type: disc">Compiling and running your first OpenGL application in Mac OS X or Linux</li></ul></div><div class="section" title="Introduction"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec09"/>Introduction</h1></div></div></div><p>OpenGL is an ideal multiplatform, cross-language, and hardware-accelerated graphics rendering interface that is well suited to visualize large 2D and 3D datasets in many fields. In fact, OpenGL has become the industry standard to create stunning graphics, most notably in gaming applications and numerous professional tools for 3D modeling. As we collect more and more data in fields ranging from biomedical imaging to wearable computing (especially with the evolution of Big Data), a high-performance platform for data visualization is becoming an essential component of many future applications. Indeed, the visualization of massive datasets is becoming an increasingly challenging problem for developers, scientists, and engineers in many fields. Therefore, OpenGL can provide a unified solution for the creation of impressive, stunning visuals in many real-time applications.</p><p>The APIs of OpenGL encapsulate the complexity of hardware interactions while allowing users to have low-level control over the process. From a sophisticated multiserver setup to a mobile device, OpenGL libraries provide developers with an easy-to-use interface for high-performance graphics rendering. The increasing availability and capability of graphics hardware and mass storage devices, coupled with their decreasing cost, further motivate the development of interactive OpenGL-based data visualization tools.</p><p>Modern computers come with dedicated <span class="strong"><strong>Graphics Processing Units</strong></span> (<span class="strong"><strong>GPUs</strong></span>), highly customized pieces of hardware designed to accelerate graphics rendering. GPUs can also be used to accelerate general-purpose, highly parallelizable computational tasks. By leveraging hardware and OpenGL, we can produce highly interactive and aesthetically pleasing results.</p><p>This chapter introduces the essential tools to develop OpenGL-based data visualization applications and provides a step-by-step tutorial on how to set up the environment for our first demo application. In addition, this chapter outlines the steps to set up a popular tool called CMake, which is a cross-platform software that automates the process of generating standard build files (for example, makefiles in Linux that define the compilation parameters and commands) with simple configuration files. The CMake tool will be used to compile additional libraries in the future, including the GLFW (OpenGL FrameWork) library introduced later in this chapter. Briefly, the GLFW library is an open source, multiplatform library that allows users to create and manage windows with OpenGL contexts as well as handle inputs from peripheral devices such as the mouse and keyboard. By default, OpenGL itself does not support other peripherals; thus, the GLFW library is used to fill in the gap. We hope that this detailed tutorial will be especially useful for beginners who are interested in exploring OpenGL for data visualization but have little or no prior experience. However, we will assume that you are familiar with the C/C++ programming language.</p></div></div>
<div class="section" title="Setting up a Windows-based development platform"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec10"/>Setting up a Windows-based development platform</h1></div></div></div><p>There are various development tools available to create applications in the Windows environment. In this book, we will focus on creating OpenGL applications using Visual C++ from Microsoft Visual Studio 2013, given its extensive documentation and support.</p><div class="section" title="Installing Visual Studio 2013"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec13"/>Installing Visual Studio 2013</h2></div></div></div><p>In this section, we outline the steps to install Visual Studio 2013.</p></div><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec14"/>Getting ready</h2></div></div></div><p>We assume that you have already installed Windows 7.0 or higher. For optimal performance, we recommend that you get a dedicated graphics card, such as NVIDIA GeForce graphics cards, and have at least 10 GB of free disk space as well as 4 GB of RAM on your computer. Download and install the latest driver for your graphics card.</p></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec15"/>How to do it...</h2></div></div></div><p>To install Microsoft Visual Studio 2013 for free, download the Express 2013 version for Windows Desktop from Microsoft's official website (refer to <a class="ulink" href="https://www.visualstudio.com/en-us/downloads/">https://www.visualstudio.com/en-us/downloads/</a>). Once you have downloaded the installer executable, we can start the process. By default, we will assume that programs are installed in the following path:</p><div class="mediaobject"><img src="graphics/9727OS_01_01.jpg" alt="How to do it..."/></div><p>To verify the installation, click on the <span class="strong"><strong>Launch</strong></span> button at the end of the installation, and it will execute the VS Express 2013 for Desktop application for the first time.</p></div><div class="section" title="Installing CMake in Windows"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec16"/>Installing CMake in Windows</h2></div></div></div><p>In this section, we outline the steps to install CMake, which is a popular tool that automates the process of creating standard build files for Visual Studio (among other tools).</p></div><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec17"/>Getting ready</h2></div></div></div><p>To obtain the CMake tool (CMake 3.2.1), you can download the executable (<code class="literal">cmake-3.2.1-win32-x86.exe</code>) from <a class="ulink" href="http://www.cmake.org/download/">http://www.cmake.org/download/</a>.</p></div><div class="section" title="How to do it…"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec18"/>How to do it…</h2></div></div></div><p>The installation wizard will guide you through the process (select <span class="strong"><strong>Add CMake to the system PATH for all users</strong></span> when prompted for installation options). To verify the installation, run CMake(<code class="literal">cmake-gui</code>).</p><div class="mediaobject"><img src="graphics/9727OS_01_02.jpg" alt="How to do it…"/></div><p>At this point, you should have both Visual Studio 2013 and CMake successfully installed on your machine and be ready to compile/install the GLFW library to create your first OpenGL application.</p></div></div>
<div class="section" title="Setting up a Mac-based development platform"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec11"/>Setting up a Mac-based development platform</h1></div></div></div><p>One important advantage of using OpenGL is the possibility of cross-compiling the same source code on different platforms. If you are planning to develop your application on a Mac platform, you can easily set up your machine for development using the upcoming steps. We assume that you have either Mac OS X 10.9 or higher installed. OpenGL updates are integrated into the system updates for Mac OS X through the graphics driver.</p><div class="section" title="Installing Xcode and command-line tools"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec19"/>Installing Xcode and command-line tools</h2></div></div></div><p>The Xcode development software from Apple provides developers with a comprehensive set of tools, which include an IDE, OpenGL headers, compilers, and debugging tools, to create native Mac applications. To simplify the process, we will compile our code using the command-line interface that shares most of the common features in Linux.</p></div><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec20"/>Getting ready</h2></div></div></div><p>If you are using Mac OS X 10.9 or higher, you can download Xcode through the App Store shipped with Mac OS. Full installation support and instructions are available on the Apple Developer website (<a class="ulink" href="https://developer.apple.com/xcode/">https://developer.apple.com/xcode/</a>).</p></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec21"/>How to do it...</h2></div></div></div><p>We can install the command-line tools in Xcode through the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Search for the keyword <code class="literal">Terminal</code> in <span class="strong"><strong>Spotlight</strong></span> and run <span class="strong"><strong>Terminal</strong></span>.<div class="mediaobject"><img src="graphics/9727OS_01_03.jpg" alt="How to do it..."/></div></li><li class="listitem">Execute the following command in the terminal:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong> xcode-select --install</strong></span>
</pre></div><p>Note that if you have previously installed the command-line tools, an error stating "command-line are already installed" will appear. In this case, simply skip to step 4 to verify the installation.</p></li><li class="listitem">Click on the <span class="strong"><strong>Install</strong></span> button to directly install the command-line tools. This will install basic compiling tools such as <span class="strong"><strong>gcc</strong></span> and <span class="strong"><strong>make</strong></span> for application development purposes (note that CMake needs to be installed separately).</li><li class="listitem">Finally, enter <code class="literal">gcc --version</code> to verify the installation.<div class="mediaobject"><img src="graphics/9727OS_01_04.jpg" alt="How to do it..."/></div></li></ol></div></div><div class="section" title="See also"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec22"/>See also</h2></div></div></div><p>If you encounter the <span class="strong"><strong>command not found</strong></span> error or other similar issues, make sure that the command-line tools are installed successfully. Apple provides an extensive set of documentation, and more information on installing Xcode can be found at <a class="ulink" href="https://developer.apple.com/xcode">https://developer.apple.com/xcode</a>.</p></div><div class="section" title="Installing MacPorts and CMake"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec23"/>Installing MacPorts and CMake</h2></div></div></div><p>In this section, we outline the steps to install MacPorts, which greatly simplifies the subsequent setup steps, and CMake for Mac.</p></div><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec24"/>Getting ready</h2></div></div></div><p>Similar to the Windows installation, you can download the binary distribution of <span class="strong"><strong>CMake</strong></span> from <a class="ulink" href="http://www.cmake.org/cmake/resources/software.html">http://www.cmake.org/cmake/resources/software.html</a> and manually configure the command-line options. However, to simplify the installation and automate the configuration process, we highly recommend that you use MacPorts.</p></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec25"/>How to do it...</h2></div></div></div><p>To install MacPorts, follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Download the MacPorts package installer for the corresponding version of Mac OS X (<a class="ulink" href="https://guide.macports.org/#installing.macports">https://guide.macports.org/#installing.macports</a>):<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Mac OS X 10.10 Yosemite: <a class="ulink" href="https://distfiles.macports.org/MacPorts/MacPorts-2.3.3-10.10-Yosemite.pkg">https://distfiles.macports.org/MacPorts/MacPorts-2.3.3-10.10-Yosemite.pkg</a></li><li class="listitem" style="list-style-type: disc">Mac OS X 10.9 Mavericks: <a class="ulink" href="https://distfiles.macports.org/MacPorts/MacPorts-2.3.3-10.9-Mavericks.pkg">https://distfiles.macports.org/MacPorts/MacPorts-2.3.3-10.9-Mavericks.pkg</a></li></ul></div></li><li class="listitem">Double-click on the package installer and follow the onscreen instructions.<div class="mediaobject"><img src="graphics/9727OS_01_05.jpg" alt="How to do it..."/></div></li><li class="listitem">Verify the installation in the terminal by typing in <code class="literal">port version</code>, which returns the version of MacPorts currently installed (<code class="literal">Version: 2.3.3</code> in the preceding package).</li></ol></div><p>To install <span class="strong"><strong>CMake</strong></span> on Mac, follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Open the <span class="strong"><strong>Terminal</strong></span> application.</li><li class="listitem">Execute the following command:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>sudo port install cmake +gui</strong></span>
</pre></div></li></ol></div><p>To verify the installation, enter <code class="literal">cmake –version </code>to show the current version installed and enter <code class="literal">cmake-gui </code>to explore the GUI.</p><div class="mediaobject"><img src="graphics/9727OS_01_06.jpg" alt="How to do it..."/></div><p>At this point, your Mac is configured for OpenGL development and is ready to compile your first OpenGL application. For those who have been more accustomed to GUIs, using the command-line interface in Mac can initially be an overwhelming experience. However, in the long run, it is a rewarding learning experience due to its overall simplicity. Command-line tools and interfaces are often more time-invariant compared to constantly evolving GUIs. At the end of the day, you can just copy and paste the same command lines, thereby saving precious time needed to consult new documentation every time a GUI changes.</p></div></div>
<div class="section" title="Setting up a Linux-based development platform"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec12"/>Setting up a Linux-based development platform</h1></div></div></div><p>To prepare your development environment on the Linux platform, we can utilize the powerful Debian Package Management system. The <code class="literal">apt-get</code> or <code class="literal">aptitude</code> program automatically retrieves the precompiled packages from the server and also resolves and installs all dependent packages that are required. If you are using non-Debian based platform, such as Fedora, you can find the equivalents by searching for the keywords of each packages listed in this recipe.</p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec26"/>Getting ready</h2></div></div></div><p>We assume that you have successfully installed all updates and latest graphics drivers associated with your graphics hardware. Ubuntu 12.04 or higher has support for third-party proprietary NVIDIA and AMD graphics drivers, and more information can be found at <a class="ulink" href="https://help.ubuntu.com/community/BinaryDriverHowto">https://help.ubuntu.com/community/BinaryDriverHowto</a>.</p></div><div class="section" title="How to do it…"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec27"/>How to do it…</h2></div></div></div><p>Use the following steps to install all development tools and the associated dependencies:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Open a terminal.</li><li class="listitem">Enter the update command:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>sudo apt-get update</strong></span>
</pre></div></li><li class="listitem">Enter the install command and enter <code class="literal">y</code> for all prompts:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>sudo apt-get install build-essential cmake-gui xorg-dev libglu1-mesa-dev mesa-utils</strong></span>
</pre></div></li><li class="listitem">Verify the results:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>gcc --version</strong></span>
</pre></div><p>If successful, this command should return the current version of <code class="literal">gcc</code> installed.</p></li></ol></div></div><div class="section" title="How it works…"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec28"/>How it works…</h2></div></div></div><p>In summary, the <code class="literal">apt-get update </code>command automatically updates the local database in the Debian Package Management system. This ensures that the latest packages are retrieved and installed in the process. The <code class="literal">apt-get</code> system also provides other package management features, such as package removal (uninstall), dependency retrieval, as well as package upgrades. These advanced functions are outside the scope of this book, but more information can be found at <a class="ulink" href="https://wiki.debian.org/apt-get">https://wiki.debian.org/apt-get</a>.</p><p>The preceding commands install a number of packages to your machine. Here, we will briefly explain the purpose of each package.</p><p>The <code class="literal">build-essential</code> package, as the name itself suggests, encapsulates the essential packages, namely gcc and g++, that are required to compile C and C++ source code in Linux. Additionally, it will download header files and resolve all dependencies in the process.</p><p>The <code class="literal">cmake-gui</code> package is the CMake program described earlier in the chapter. Instead of downloading CMake directly from the website and compiling from the source, it retrieves the latest supported version that had been compiled, tested, and released by the Ubuntu community. One advantage of using the Debian Package Management system is the stability and ease of updating in the future. However, for users who are looking for the cutting-edge version, apt-get based systems would be a few versions behind.</p><p>The <code class="literal">xorg-dev</code> and <code class="literal">libglu1-mesa-dev</code> packages are the development files required to compile the GLFW library. These packages include header files and libraries required by other programs. If you choose to use the precompiled binary version of GLFW, you may be able to skip some of the packages. However, we highly recommend that you follow the steps for the purpose of this tutorial.</p></div><div class="section" title="See also"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec29"/>See also</h2></div></div></div><p>For more information, most of the steps described are documented and explained in depth in this online documentation: <a class="ulink" href="https://help.ubuntu.com/community/UsingTheTerminal">https://help.ubuntu.com/community/UsingTheTerminal</a>.</p></div></div>
<div class="section" title="Installing the GLFW library in Windows"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec13"/>Installing the GLFW library in Windows</h1></div></div></div><p>There are two ways to install the GLFW library in Windows, both of which will be discussed in this section. The first approach involves compiling the GLFW source code directly with CMake for full control. However, to simplify the process, we suggest that you download the precompiled binary distribution.</p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec30"/>Getting ready</h2></div></div></div><p>We assume that you have successfully installed both Visual Studio 2013 and CMake, as described in the earlier section. For completeness, we will demonstrate how to install GLFW using CMake.</p></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec31"/>How to do it...</h2></div></div></div><p>To use the precompiled binary package for GLFW, follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Create the <code class="literal">C:/Program Files (x86)/glfw-3.0.4</code> directory. Grant the necessary permissions when prompted.</li><li class="listitem">Download the <code class="literal">glfw-3.0.4.bin.WIN32.zip</code> package from <a class="ulink" href="http://sourceforge.net/projects/glfw/files/glfw/3.0.4/glfw-3.0.4.bin.WIN32.zip">http://sourceforge.net/projects/glfw/files/glfw/3.0.4/glfw-3.0.4.bin.WIN32.zip</a> and unzip the package.</li><li class="listitem">Copy all the extracted content inside the <code class="literal">glfw-3.0.4.bin.WIN32</code> folder (for example, include <code class="literal">lib-msvc2012</code>) into the <code class="literal">C:/Program Files (x86)/glfw-3.0.4</code> directory. Grant permissions when prompted.</li><li class="listitem">Rename the <code class="literal">lib-msvc2012</code> folder to <code class="literal">lib</code><span class="strong"><strong> </strong></span>inside the <code class="literal">C:/Program Files (x86)/glfw-3.0.4</code> directory. Grant permissions when prompted.</li></ol></div><p>Alternatively, to compile the source files directly, follow these procedures:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Download the source package from <a class="ulink" href="http://sourceforge.net/projects/glfw/files/glfw/3.0.4/glfw-3.0.4.zip">http://sourceforge.net/projects/glfw/files/glfw/3.0.4/glfw-3.0.4.zip</a> and unzip the package on the desktop. Create a new folder called <code class="literal">build</code> inside the extracted <code class="literal">glfw-3.0.4</code> folder to store the binaries.and open <code class="literal">cmake-gui</code>.</li><li class="listitem">Select <code class="literal">glfw-3.0.4</code> (from the desktop) as the source directory and <code class="literal">glfw-3.0.4/build</code> as the build directory. The screenshot is shown as follows:<div class="mediaobject"><img src="graphics/9727OS_01_07.jpg" alt="How to do it..."/></div></li><li class="listitem">Click on <span class="strong"><strong>Generate</strong></span> and select <span class="strong"><strong>Visual Studio 12 2013</strong></span> in the prompt.<div class="mediaobject"><img src="graphics/9727OS_01_08.jpg" alt="How to do it..."/></div></li><li class="listitem">Click on <span class="strong"><strong>Generate</strong></span> again.<div class="mediaobject"><img src="graphics/9727OS_01_09.jpg" alt="How to do it..."/></div></li><li class="listitem">Open the <code class="literal">build</code> directory and double-click on <span class="strong"><strong>GLFW.sln</strong></span> to open Visual Studio.</li><li class="listitem">In Visual Studio, click Build Solution (press <span class="emphasis"><em>F7</em></span>).</li><li class="listitem">Copy <span class="strong"><strong>build/src/Debug/glfw3.lib</strong></span> to <span class="strong"><strong>C:/Program Files (x86)/glfw-3.0.4/lib</strong></span>.</li><li class="listitem">Copy the <code class="literal">include</code> directory (inside <code class="literal">glfw-3.0.4/include</code>) to <span class="strong"><strong>C:/Program Files (x86)/glfw-3.0.4/</strong></span>.</li></ol></div><p>After this step, we should have the <code class="literal">include </code>(<code class="literal">glfw3.h</code>) and <code class="literal">library</code> (<code class="literal">glfw3.lib</code>) files inside the <code class="literal">C:/Program Files (x86)/glfw-3.0.4</code>
<span class="strong"><strong> </strong></span>directory, as shown in the setup procedure using precompiled binaries.</p></div></div>
<div class="section" title="Installing the GLFW library in Mac OS X and Linux"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec14"/>Installing the GLFW library in Mac OS X and Linux</h1></div></div></div><p>The installation procedures for Mac and Linux are essentially identical using the command-line interface. To simplify the process, we recommend that you use MacPorts for Mac users.</p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec32"/>Getting ready</h2></div></div></div><p>We assume that you have successfully installed the basic development tools, including CMake, as described in the earlier section. For maximum flexibility, we can compile the library directly from the source code (refer to <a class="ulink" href="http://www.glfw.org/docs/latest/compile.html">http://www.glfw.org/docs/latest/compile.html</a> and <a class="ulink" href="http://www.glfw.org/download.html">http://www.glfw.org/download.html</a>).</p></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec33"/>How to do it...</h2></div></div></div><p>For Mac users, enter the following command in a terminal to install GLFW using MacPorts:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>sudo port install glfw</strong></span>
</pre></div><p>For Linux users (or Mac users who would like to practice using the command-line tools), here are the steps to compile and install the GLFW source package directly with the command-line interface:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Create a new folder called <code class="literal">opengl_dev</code> and change the current directory to the new path:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>mkdir ~/opengl_dev</strong></span>
<span class="strong"><strong>cd ~/opengl_dev</strong></span>
</pre></div></li><li class="listitem">Obtain a copy of the GLFW source package (<code class="literal">glfw-3.0.4</code>) from the official repository: <a class="ulink" href="http://sourceforge.net/projects/glfw/files/glfw/3.0.4/glfw-3.0.4.tar.gz">http://sourceforge.net/projects/glfw/files/glfw/3.0.4/glfw-3.0.4.tar.gz</a>.</li><li class="listitem">Extract the package.<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>tar xzvf glfw-3.0.4.tar.gz</strong></span>
</pre></div></li><li class="listitem">Perform the compilation and installation:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>cd glfw-3.0.4</strong></span>
<span class="strong"><strong>mkdir build</strong></span>
<span class="strong"><strong>cd build</strong></span>
<span class="strong"><strong>cmake ../</strong></span>
<span class="strong"><strong>make &amp;&amp; sudo make install</strong></span>
</pre></div></li></ol></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec34"/>How it works...</h2></div></div></div><p>The first set of commands create a new working directory to store the new files retrieved using the <code class="literal">wget</code> command, which downloads a copy of the GLFW library to the current directory. The <code class="literal">tar xzvf</code> command extracts the compressed packages and creates a new folder with all the contents.</p><p>Then, the <code class="literal">cmake</code> command automatically generates the necessary build files that are needed for the compilation process to the current <code class="literal">build</code> directory. This process also checks for missing dependencies and verifies the versioning of the applications.</p><p>The <code class="literal">make</code> command then takes all instructions from the Makefile script that is generated automatically and compiles the source code into libraries.</p><p>The <code class="literal">sudo make install</code> command installs the library header files as well as the static or shared libraries onto your machine. As this command requires writing to the root directory, the <code class="literal">sudo</code> command is needed to grant such permissions. By default, the files will be copied to the<code class="literal"> /usr/local</code> directory. In the rest of the book, we will assume that the installations follow these default paths.</p><p>For advanced users, we can optimize the compilation by configuring the packages with the CMake GUI (<code class="literal">cmake-gui</code>).</p><div class="mediaobject"><img src="graphics/9727OS_01_10.jpg" alt="How it works..."/></div><p>For example, you can enable the <code class="literal">BUILD_SHARED_LIBS</code> option if you are planning to compile the GLFW library as a shared library. In this book, we will not explore the full functionality of the GLFW library, but these options can be useful to developers who are looking for further customizations. Additionally, you can customize the installation prefix (<code class="literal">CMAKE_INSTALL_PREFIX</code>) if you would like to install the library files at a separate location.</p></div></div>
<div class="section" title="Creating your first OpenGL application with GLFW"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec15"/>Creating your first OpenGL application with GLFW</h1></div></div></div><p>Now that you have successfully configured your development platform and installed the GLFW library, we will provide a tutorial on how to create your first OpenGL-based application.</p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec35"/>Getting ready</h2></div></div></div><p>At this point, you should already have all the pre requisite tools ready regardless of which operating system you may have, so we will immediately jump into building your first OpenGL application using these tools.</p></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec36"/>How to do it...</h2></div></div></div><p>The following code outlines the basic steps to create a simple OpenGL program that utilizes the GLFW library and draws a rotating triangle:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Create an empty file, and then include the header file for the GLFW library and standard C++ libraries:<div class="informalexample"><pre class="programlisting">#include &lt;GLFW/glfw3.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;stdio.h&gt;</pre></div></li><li class="listitem">Initialize GLFW and create a GLFW window object (640 x 480):<div class="informalexample"><pre class="programlisting">int main(void)
{
  GLFWwindow* window;
  if (!glfwInit())
    exit(EXIT_FAILURE);
  window = glfwCreateWindow(640, 480, "Chapter 1: Simple GLFW Example", NULL, NULL);
  if (!window)
  {
    glfwTerminate();
    exit(EXIT_FAILURE);
  }
  glfwMakeContextCurrent(window);</pre></div></li><li class="listitem">Define a loop that terminates when the window is closed:<div class="informalexample"><pre class="programlisting">  while (!glfwWindowShouldClose(window))
  {</pre></div></li><li class="listitem">Set up the viewport (using the width and height of the window) and clear the screen color buffer:<div class="informalexample"><pre class="programlisting">    float ratio;
    int width, height;

    glfwGetFramebufferSize(window, &amp;width, &amp;height);
    ratio = (float) width / (float) height;

    glViewport(0, 0, width, height);
    glClear(GL_COLOR_BUFFER_BIT);</pre></div></li><li class="listitem">Set up the camera matrix. Note that further details on the camera model will be discussed in <a class="link" href="ch03.html" title="Chapter 3. Interactive 3D Data Visualization">Chapter 3</a>, <span class="emphasis"><em>Interactive 3D Data Visualization</em></span>:<div class="informalexample"><pre class="programlisting">    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glOrtho(-ratio, ratio, -1.f, 1.f, 1.f, -1.f);
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();</pre></div></li><li class="listitem">Draw a rotating triangle and set a different color (red, green, and blue channels) for each vertex (<span class="emphasis"><em>x</em></span>, <span class="emphasis"><em>y</em></span>, and <span class="emphasis"><em>z</em></span>) of the triangle. The first line rotates the triangle over time:<div class="informalexample"><pre class="programlisting">    glRotatef((float)glfwGetTime() * 50.f, 0.f, 0.f, 1.f);
    glBegin(GL_TRIANGLES);
    glColor3f(1.f, 0.f, 0.f);
    glVertex3f(-0.6f, -0.4f, 0.f);
    glColor3f(0.f, 1.f, 0.f);
    glVertex3f(0.6f, -0.4f, 0.f);
    glColor3f(0.f, 0.f, 1.f);
    glVertex3f(0.f, 0.6f, 0.f);
    glEnd();</pre></div></li><li class="listitem">Swap the front and back buffers (GLFW uses double buffering) to update the screen and process all pending events:<div class="informalexample"><pre class="programlisting">    glfwSwapBuffers(window);
    glfwPollEvents();
  }</pre></div></li><li class="listitem">Release the memory and terminate the GLFW library. Then, exit the application:<div class="informalexample"><pre class="programlisting">  glfwDestroyWindow(window);
  glfwTerminate();
  exit(EXIT_SUCCESS);
}</pre></div></li><li class="listitem">Save the file as <code class="literal">main.cpp</code> using the text editor of your choice.</li></ol></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec37"/>How it works...</h2></div></div></div><p>By including the GLFW library header, <code class="literal">glfw3.h</code>, we automatically import all necessary files from the OpenGL library. Most importantly, GLFW automatically determines the platform and thus allows you to write portable source code seamlessly.</p><p>In the main function, we must first initialize the GLFW library with the <span class="strong"><strong>glfwInit</strong></span> function in the main thread. This is required before any GLFW functions can be used. Before a program exits, GLFW should be terminated to release any allocated resources.</p><p>Then, the <span class="strong"><strong>glfwCreateWindow</strong></span> function creates a window and its associated context, and it also returns a pointer to the <code class="literal">GLFWwindow</code> object. Here, we can define the width, height, title, and other properties for the window. After the window is created, we then call the <span class="strong"><strong>glfwMakeContextCurrent</strong></span> function to switch the context and make sure that the context of the specified window is current on the calling thread.</p><p>At this point, we are ready to render our graphics element on the window. The <span class="strong"><strong>while</strong></span> loop provides a mechanism to redraw our graphics as long as the window remains open. OpenGL requires an explicit setup on the camera parameters; further details will be discussed in the upcoming chapters. In the future, we can provide different parameters to simulate perspective and also handle more complicated issues (such as anti-aliasing). For now, we have set up a simple scene to render a basic primitive shape (namely a triangle) and fixed the color for the vertices. Users can modify the parameters in the <span class="strong"><strong>glColor3f</strong></span> and <span class="strong"><strong>glVertex3f</strong></span> functions to change the color as well as the position of the vertices.</p><p>This example demonstrates the basics required to create graphics using OpenGL. Despite the simplicity of the sample code, it provides a nice introductory framework on how you can create high-performance graphics rendering applications with graphics hardware using OpenGL and GLFW.</p></div></div>
<div class="section" title="Compiling and running your first OpenGL application in Windows"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec16"/>Compiling and running your first OpenGL application in Windows</h1></div></div></div><p>There are several ways to set up an OpenGL project. Here, we create a sample project using Visual Studio 2013 or higher and provide a complete walkthrough for the first-time configuration of the OpenGL and GLFW libraries. These same steps can be incorporated into your own projects in the future.</p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec38"/>Getting ready</h2></div></div></div><p>Assuming that you have both Visual Studio 2013 and GLFW (version 3.0.4) installed successfully on your environment, we will start our project from scratch.</p></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec39"/>How to do it...</h2></div></div></div><p>In Visual Studio 2013, use the following steps to create a new project and compile the source code:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Open Visual Studio 2013 (VS Express 2013 for desktop).</li><li class="listitem">Create a new Win32 Console Application and name it as <code class="literal">Tutorial1</code>.<div class="mediaobject"><img src="graphics/9727OS_01_11.jpg" alt="How to do it..."/></div></li><li class="listitem">Check the <span class="strong"><strong>Empty project</strong></span> option, and click on <span class="strong"><strong>Finish</strong></span>.<div class="mediaobject"><img src="graphics/9727OS_01_12.jpg" alt="How to do it..."/></div></li><li class="listitem">Right-click on <span class="strong"><strong>Source Files</strong></span>, and add a new C++ source file (<span class="strong"><strong>Add</strong></span> | <span class="strong"><strong>New Item</strong></span>) called <span class="strong"><strong>main.cpp</strong></span>.<div class="mediaobject"><img src="graphics/9727OS_01_13.jpg" alt="How to do it..."/></div></li><li class="listitem">Copy and paste the source code  from the previous section into the <span class="strong"><strong>main.cpp</strong></span> and save it.</li><li class="listitem">Open <span class="strong"><strong>Project Properties</strong></span> (<span class="emphasis"><em>Alt</em></span> + <span class="emphasis"><em>F7</em></span>).</li><li class="listitem">Add the <code class="literal">include</code> path of the GLFW library, <span class="strong"><strong>C:\Program Files (x86)\glfw-3.0.4\include</strong></span>, by navigating to <span class="strong"><strong>Configuration Properties</strong></span> | <span class="strong"><strong>C/C++</strong></span> | <span class="strong"><strong>General</strong></span> | <span class="strong"><strong>Additional Include Directories</strong></span>.<div class="mediaobject"><img src="graphics/9727OS_01_14.jpg" alt="How to do it..."/></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip02"/>Tip</h3><p><span class="strong"><strong>Downloading the example code</strong></span></p><p>You can download the example code files from your account at <a class="ulink" href="http://www.packtpub.com">http://www.packtpub.com</a> for all the Packt Publishing books you have purchased. If you purchased this book elsewhere, you can visit <a class="ulink" href="http://www.packtpub.com/support">http://www.packtpub.com/support</a> and register to have the files e-mailed directly to you.</p></div></div></li><li class="listitem">Add the GLFW library path, <span class="strong"><strong>C:\Program Files (x86)\glfw-3.0.4\lib</strong></span>, by navigating to <span class="strong"><strong>Configuration Properties</strong></span> | <span class="strong"><strong>Linker</strong></span> | <span class="strong"><strong>General</strong></span> | <span class="strong"><strong>Additional Library Directories</strong></span>.<div class="mediaobject"><img src="graphics/9727OS_01_15.jpg" alt="How to do it..."/></div></li><li class="listitem">Add the GLFW and OpenGL libraries (<code class="literal">glu32.lib</code>, <code class="literal">glfw3.lib</code> and <code class="literal">opengl32.lib</code>) by navigating to <span class="strong"><strong>Configuration Properties</strong></span> | <span class="strong"><strong>Linker</strong></span> | <span class="strong"><strong>Input</strong></span> | <span class="strong"><strong>Additional Dependencies</strong></span>.<div class="mediaobject"><img src="graphics/9727OS_01_16.jpg" alt="How to do it..."/></div></li><li class="listitem">Build <span class="strong"><strong>Solution</strong></span> (press <span class="emphasis"><em>F7</em></span>).</li><li class="listitem">Run the program (press <span class="emphasis"><em>F5</em></span>).</li></ol></div><p>Here is your first OpenGL application showing a rotating triangle that is running natively on your graphics hardware. Although we have only defined the color of the vertices to be red, green, and blue, the graphics engine interpolates the intermediate results and all calculations are performed using the graphics hardware. The screenshot is shown as follows:</p><div class="mediaobject"><img src="graphics/9727OS_01_17.jpg" alt="How to do it..."/></div></div></div>
<div class="section" title="Compiling and running your first OpenGL application in Mac OS X or Linux"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec17"/>Compiling and running your first OpenGL application in Mac OS X or Linux</h1></div></div></div><p>Setting up a Linux or Mac machine is made much simpler with the command-line interface. We assume that you have all the components that were discussed earlier ready, and all default paths are used as recommended.</p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec40"/>Getting ready</h2></div></div></div><p>We will start by compiling the sample code described previously. You can download the complete code package from the official website of Packt Publishing <a class="ulink" href="https://www.packtpub.com">https://www.packtpub.com</a>. We assume that all files are saved to a top-level directory called <code class="literal">code</code> and the <code class="literal">main.cpp</code> file is saved inside the <code class="literal">/code/Tutorial1</code> subdirectory.</p></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec41"/>How to do it...</h2></div></div></div><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Open a terminal or an equivalent command-line interface.</li><li class="listitem">Change the current directory to the working directory:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>cd ~/code</strong></span>
</pre></div></li><li class="listitem">Enter the following command to compile the program:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>gcc -Wall `pkg-config --cflags glfw3` -o main Tutorial1/main.cpp `pkg-config --static --libs glfw3`</strong></span>
</pre></div></li><li class="listitem">Run the program:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>./main</strong></span>
</pre></div></li></ol></div><p>Here is your first OpenGL application that runs natively on your graphics hardware and displays a rotating triangle. Although we have defined the color of only three vertices to be red, green, and blue, the graphics engine interpolates the intermediate results and all calculations are performed using the graphics hardware.</p><div class="mediaobject"><img src="graphics/9727OS_01_18.jpg" alt="How to do it..."/></div><p>To further simplify the process, we have provided a compile script in the sample code. You can execute the script by simply typing the following commands in a terminal:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>chmod  +x compile.sh</strong></span>
<span class="strong"><strong>./compile.sh</strong></span>
</pre></div><p>You may notice that the OpenGL code is platform-independent. One of the most powerful features of the GLFW library is that it handles the windows management and other platform-dependent functions behind the scene. Therefore, the same source code (<code class="literal">main.cpp</code>) can be shared and compiled on multiple platforms without the need for any changes.</p></div></div></body></html>