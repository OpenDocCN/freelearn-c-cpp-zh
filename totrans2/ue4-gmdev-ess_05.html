<html><head></head><body><div class="chapter" title="Chapter&#xA0;5.&#xA0;Lights"><div class="titlepage"><div><div><h1 class="title"><a id="ch05"/>Chapter 5. Lights</h1></div></div></div><p>Lighting is <a id="id186" class="indexterm"/>an important factor in your game, which can be easily overlooked, and wrong usage can severely impact on performance. But with proper settings, combined with post process, you can create very beautiful and realistic scenes.</p><p>In this chapter, we will look into different light mobilities and learn more about Lightmass Global Illumination, which is the static Global Illumination solver created by Epic games. We will also learn how to prepare assets to be used with it.</p><div class="section" title="Lighting basics"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec26"/>Lighting basics</h1></div></div></div><p>In this <a id="id187" class="indexterm"/>section, we will see how to place lights and how to adjust some important values.</p><div class="section" title="Placing lights"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec47"/>Placing lights</h2></div></div></div><p>In <a id="id188" class="indexterm"/>Unreal Engine 4, lights can be placed in two different ways. Through the modes tab or by right-clicking in the level:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Modes tab</strong></span>: In <a id="id189" class="indexterm"/>the <span class="strong"><strong>Modes</strong></span> tab, go to the place tab (<span class="emphasis"><em>Shift</em></span> + <span class="emphasis"><em>1</em></span>) and go to the <span class="strong"><strong>Lights</strong></span> section. From there you can drag and drop various lights.<div class="mediaobject"><img src="graphics/B03950_05_01.jpg" alt="Placing lights"/></div></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Right-clicking</strong></span>: Right-click<a id="id190" class="indexterm"/> in viewport and in <span class="strong"><strong>Place Actor</strong></span> you can select your light.<div class="mediaobject"><img src="graphics/B03950_05_02.jpg" alt="Placing lights"/></div></li></ul></div><p>Once a light is added to the level, you can use the transform tool (<span class="emphasis"><em>W</em></span> to move, <span class="emphasis"><em>E</em></span> to rotate) to change the position and rotation of your selected light.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip19"/>Tip</h3><p>Since <span class="strong"><strong>Directional Light</strong></span> casts light from an infinite source, updating their location has no effect.</p></div></div></div><div class="section" title="Various lights"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec48"/>Various lights</h2></div></div></div><p>Unreal Engine 4 features<a id="id191" class="indexterm"/> four different types of light Actors. They are:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Directional Light</strong></span>: Simulates<a id="id192" class="indexterm"/> light from a source that is infinitely far away. Since all shadows cast by this light will be parallel, this is the ideal choice for simulating sunlight.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Spot Light</strong></span>: Emits <a id="id193" class="indexterm"/>light from a single point in a cone shape. There are two cones (inner cone and outer cone). Within the inner cone, light achieves full brightness and between the inner and outer cone a falloff takes place, which softens the illumination. That means after the inner cone, light slowly loses its illumination as it goes to the outer cone.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Point Light</strong></span>: Emits<a id="id194" class="indexterm"/> light from a single point to all directions, much like a real-world light bulb.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Sky Light</strong></span>: Does <a id="id195" class="indexterm"/>not really emit light, but instead captures the distant parts of your scene (for example, Actors that are placed beyond <a id="id196" class="indexterm"/><span class="strong"><strong>Sky Distance Threshold</strong></span>) and applies them as light. That means you can have lights coming from your atmosphere, distant mountains, and so on. Note that <span class="strong"><strong>Sky Light</strong></span> will only update when you rebuild your lighting or by pressing <span class="strong"><strong>Recapture Scene</strong></span> (in the <span class="strong"><strong>Details</strong></span> panel with <span class="strong"><strong>Sky Light</strong></span> selected).</li></ul></div></div><div class="section" title="Common light settings"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec49"/>Common light settings</h2></div></div></div><p>Now <a id="id197" class="indexterm"/>that we know how to place lights into a scene, let's<a id="id198" class="indexterm"/> take a look at some of the common settings of a light. Select your light in a scene and in the <span class="strong"><strong>Details</strong></span> panel you will see these settings:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Intensity</strong></span>: Determines the intensity (energy) of the light. This is in lumens so, for example, 1700 lm corresponds to a 100 W bulb.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Light Color</strong></span>: Determines the color of the light.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Attenuation Radius</strong></span>: Sets the limit of the light. It also calculates the falloff of the light. This setting is only available in <span class="strong"><strong>Point Lights</strong></span> and <span class="strong"><strong>Spot Lights</strong></span>.<div class="mediaobject"><img src="graphics/B03950_05_03.jpg" alt="Common light settings"/><div class="caption"><p>Attenuation Radius from left to right: 100, 200, 500.</p></div></div></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Source Radius</strong></span>: Defines the size of specular highlights on surfaces. This effect can be subdued by adjusting the <span class="strong"><strong>Min Roughness</strong></span> setting. This also affects building light using <span class="strong"><strong>Lightmass</strong></span>. A larger<span class="strong"><strong> Source Radius</strong></span> will cast softer shadows. Since this is processed by <span class="strong"><strong>Lightmass</strong></span>, it will only work on <span class="strong"><strong>Lights</strong></span> with mobility set to <span class="strong"><strong>Static</strong></span>.<div class="mediaobject"><img src="graphics/B03950_05_04.jpg" alt="Common light settings"/><div class="caption"><p>Source Radius 0. Notice the sharp edges of the shadow.</p></div></div><div class="mediaobject"><img src="graphics/B03950_05_05.jpg" alt="Common light settings"/><div class="caption"><p>Source Radius 5. Notice the soft edges of the shadow.</p></div></div></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Source Length</strong></span>: Same as <span class="strong"><strong>Source Radius</strong></span>.</li></ul></div></div><div class="section" title="Light mobility"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec50"/>Light mobility</h2></div></div></div><p>Light mobility<a id="id199" class="indexterm"/> is an important setting to keep in mind when <a id="id200" class="indexterm"/>placing lights in your level because this changes the way light works and impacts on performance. There are three settings that you can choose. They are as follows:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Static</strong></span>: A <a id="id201" class="indexterm"/>completely static light that has no impact on performance. This type of light will not cast shadows or specular on dynamic objects (for example, characters, movable objects, and so on). Example usage: Use this light where the player will never reach, such as distant cityscapes, ceilings, and so on. You can literally have millions of lights with static mobility.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Stationary</strong></span>: This <a id="id202" class="indexterm"/>is a mix of static and dynamic lights and can change its color and brightness while running the game, but cannot move or rotate. Stationary lights can interact with dynamic objects and are used where the player can go.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Movable</strong></span>: This<a id="id203" class="indexterm"/> is a completely dynamic light and all properties can be changed at runtime. Movable lights are heavier on performance so use them sparingly.</li></ul></div><p>Only four or fewer stationary lights are allowed to overlap each other. If you have more than four stationary lights overlapping each other, the light icon will change to red X, which indicates that the light is using dynamic shadows at a severe performance cost!</p><div class="mediaobject"><img src="graphics/B03950_05_06.jpg" alt="Light mobility"/></div><p>In the following screenshot, you can easily see the overlapping light.</p><div class="mediaobject"><img src="graphics/B03950_05_07_revised.jpg" alt="Light mobility"/></div><p>In <span class="strong"><strong>View</strong></span> Mode, you <a id="id204" class="indexterm"/>can change to <span class="strong"><strong>Stationary Light Overlap</strong></span> to see which light is causing an issue.</p></div></div></div>
<div class="section" title="Lightmass Global Illumination"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec27"/>Lightmass Global Illumination</h1></div></div></div><p>Lightmass is the <a id="id205" class="indexterm"/>high-quality static Global Illumination solver created by Epic games. <span class="strong"><strong>Global Illumination</strong></span> (<span class="strong"><strong>GI</strong></span>) means the process that simulates indirect lighting (for example, light bouncing and color bleeding from surfaces). In Unreal Engine, light bounces by default with Lightmass and is based on the base color of your material, which controls how much light should bounce from the surface of the object. Even though a more highly saturated color will bounce more light, and a less saturated color will bounce less, it all depends on the scene. In a simple room-like scene, this can be noticeable, whereas if it's an outdoor day scene this might not be that noticeable.</p><p>Let's take a quick look at the following scene:</p><div class="mediaobject"><img src="graphics/B03950_05_08.jpg" alt="Lightmass Global Illumination"/></div><p>This is a <a id="id206" class="indexterm"/>simple scene in unlit mode.</p><div class="mediaobject"><img src="graphics/B03950_05_09.jpg" alt="Lightmass Global Illumination"/></div><p>Now I added <a id="id207" class="indexterm"/>one <span class="strong"><strong>Directional Light</strong></span> and this is how it looks with no GI. That means there is only direct lighting and no indirect lighting (meaning there is no light bouncing).</p><div class="mediaobject"><img src="graphics/B03950_05_10.jpg" alt="Lightmass Global Illumination"/></div><p>The previous screenshot is with static GI and you can see how the whole scene came to life with GI. Notice how the pillars are casting shadows. These are called <a id="id208" class="indexterm"/>
<span class="strong"><strong>Indirect Shadows</strong></span> since they are from <a id="id209" class="indexterm"/>
<span class="strong"><strong>Indirect Light</strong></span>.</p><p>The intensity and color of indirect light depends on the light and base color of the material that the light is bouncing off. To illustrate this effect, let's take a look at the following two screenshots:</p><div class="mediaobject"><img src="graphics/B03950_05_11.jpg" alt="Lightmass Global Illumination"/></div><p>Here I applied a pure red material (the red value is 1.0) to the sphere and you can see bounced lighting picked up the base color of the red sphere changing the environment. This is called color bleeding and is most noticeable with highly saturated colors.</p><div class="mediaobject"><img src="graphics/B03950_05_12.jpg" alt="Lightmass Global Illumination"/></div><p>In this screenshot, I changed the value of red to 0.1 and rebuilt the lighting. And since red is more dark now, less light is bouncing. This is because darker colors will absorb the light instead of reflecting it.</p><p>Now that we know what Lightmass is, let's take a look at how we can prepare our assets to use Lightmass and learn more about Lightmass settings.</p><div class="section" title="Preparing your assets for precomputed lighting"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec51"/>Preparing your assets for precomputed lighting</h2></div></div></div><p>In <a id="id210" class="indexterm"/>order for your asset to have clean light and shadow details, it is necessary to have uniquely unwrapped UV to represent its own space to receive dark and light information. One rule of thumb when creating lightmap UVs is that the UV face should never overlap with any other face within the UV space. This is because if they are overlapping, then after light building, the lightmap corresponding to that space will be applied to both faces, which will result in inaccurate lighting and shadow errors. Overlapping faces are good for normal texture UVs since the texture resolution will be higher for each face, but the same rule does not apply for lightmap UVs. In a 3D program, we unwrap lightmap UVs to a new channel and use that channel in Unreal Engine 4.</p><div class="mediaobject"><img src="graphics/B03950_05_13.jpg" alt="Preparing your assets for precomputed lighting"/></div><p>Here, you<a id="id211" class="indexterm"/> can see I'm using the second channel in my mesh for lightmap.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note11"/>Note</h3><p>Unreal starts counting from 0 while most 3d programs count from 1. That means UV channel 1 in the 3d program is UV channel 0 in Unreal, and UV channel 2 means UV channel 1 in Unreal. Here, in the previous screenshot, you can see the <span class="strong"><strong>Light Map Coordinate Index</strong></span> is <span class="strong"><strong>1</strong></span>, which means it is using the 2nd UV channel in mesh.</p></div></div><p>Even though you can generate lightmap UVs in Unreal Engine 4, it is highly recommended to create these UVs in a 3d program (for example, Autodesk Maya, Autodesk 3dsmax, Modo, and so on) in order to have clean lightmaps. Before creating a lightmap UV you have to set up the grid setting in your 3d app's UV editor. For example, if you have an asset that requires a lightmap resolution of 128, then your grid setting should be <span class="emphasis"><em>1/126</em></span>, which is <span class="emphasis"><em>0.00793650</em></span>. 128 will be the lightmap texture resolution. Higher values, such as 256, 512, 1024, and so on, will result in high-quality lightmaps but will also increase <a id="id212" class="indexterm"/>memory usage. Once we decide what lightmap resolution we need for our asset, we subtract 2 (you can also use 4) from that resolution. The reason behind this is that in order for Lightmass to calculate correctly without any filter bleeding errors, it is recommended to have a minimum of 2 pixel gaps between UVs. So if your asset is going to use a lightmap resolution of 128, it will be <span class="emphasis"><em>128 – 2 = 126</em></span>. The reason why we divide it by 1 is that by default, Lightmass uses a 1 pixel border for filtering purposes.</p><p>Once you import your mesh into Unreal Engine 4, you set the Light Map Resolution for your Static Mesh. This value controls how good the shadow will look when another object casts a shadow onto this object.</p><p>Lightmaps are textures generated by Unreal Engine and overlayed on top of your scene. Since this is a texture, it should be in power of two (for example, 16, 32, 64, 128, 256, 512, 1024, etc.).</p><div class="mediaobject"><img src="graphics/B03950_05_14.jpg" alt="Preparing your assets for precomputed lighting"/></div><p>The floor <a id="id213" class="indexterm"/>in the preceding screenshot has a lightmap resolution of <span class="strong"><strong>32</strong></span>. Notice inaccurate shadows on the floor.</p><div class="mediaobject"><img src="graphics/B03950_05_15.jpg" alt="Preparing your assets for precomputed lighting"/></div><p>The floor in the preceding screenshot has a lightmap resolution of <span class="strong"><strong>256</strong></span>. Notice better shadows on the floor.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note12"/>Note</h3><p>Even though increasing the lightmap resolution gives accurate shadows, it is not a good idea to increase it for every mesh in your level as it will severely increase build times and may even crash the whole editor. For smaller objects, it is always a good idea to keep it low.</p></div></div><p>In Unreal <a id="id214" class="indexterm"/>Engine 4, you can generate lightmap UVs when importing your mesh by enabling <span class="strong"><strong>Generate Lightmap UVs</strong></span>.</p><div class="mediaobject"><img src="graphics/B03950_05_16.jpg" alt="Preparing your assets for precomputed lighting"/></div><p>In case you miss this option, you can still generate lightmap UVs after importing. To do that perform the <a id="id215" class="indexterm"/>following steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Double-click on the <span class="strong"><strong>Static Mesh</strong></span> in <span class="strong"><strong>Content Browser</strong></span>.</li><li class="listitem">Then, under the <span class="strong"><strong>LOD</strong></span> tab, enable <span class="strong"><strong>Generate Lightmap UVs</strong></span>.</li><li class="listitem">Select <span class="strong"><strong>Source Lightmap Index</strong></span>. Most of the time this will be <span class="strong"><strong>0</strong></span> since that is normal texture UVs, and Unreal generates your lightmap UVs from texture UVs.</li><li class="listitem">Set <span class="strong"><strong>Destination Lightmap Index</strong></span>. This is where Unreal will save your newly created lightmap UVs. Set this to 1.</li><li class="listitem">Click <span class="strong"><strong>Apply Changes</strong></span> to generate lightmap UVs.<div class="mediaobject"><img src="graphics/B03950_05_17.jpg" alt="Preparing your assets for precomputed lighting"/></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note13"/>Note</h3><p>If you already have a lightmap UV in the <span class="strong"><strong>Destination Lightmap Index</strong></span>, it will be replaced when generating a new one.</p></div></div></li></ol></div><p>You can preview <a id="id216" class="indexterm"/>UVs by clicking on the <span class="strong"><strong>UV</strong></span> button in the toolbar and selecting your <span class="strong"><strong>UV Channel</strong></span>.</p><div class="mediaobject"><img src="graphics/B03950_05_18.jpg" alt="Preparing your assets for precomputed lighting"/></div></div><div class="section" title="Building a scene with Lightmass"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec52"/>Building a scene with Lightmass</h2></div></div></div><p>Building a <a id="id217" class="indexterm"/>scene with Lightmass is a pretty straightforward process. In order to have high-quality static Global Illumination (aka <span class="strong"><strong>Precomputed Lighting</strong></span>), you need to have a <span class="strong"><strong>Lightmass Importance Volume</strong></span> in your scene. This is because in many maps, we have areas large enough and the playable area is actually smaller. So instead of calculating lighting for the whole scene, which can increase light building heavily, we limit the area by using <span class="strong"><strong>Lightmass Importance Volume</strong></span>. </p><p>Once we have a <span class="strong"><strong>Lightmass Importance Volume</strong></span> in the scene and start light building, Lightmass will only calculate lighting within the volume. All objects outside the volume will only get one bounce of light with low quality.</p><p>To enclose the playable area in <span class="strong"><strong>Lightmass Importance Volume</strong></span> you just have to drag and drop it from the <span class="strong"><strong>Modes</strong></span> tab. Just like other objects, you can use transform tools (<span class="emphasis"><em>W</em></span> to move, <span class="emphasis"><em>E</em></span> to rotate, and <span class="emphasis"><em>R</em></span> to scale) to adjust <span class="strong"><strong>Lightmass Importance Volume</strong></span> in your scene. Once that is done, all you have to do is build the lighting from the <span class="strong"><strong>Build</strong></span> button.</p><div class="mediaobject"><img src="graphics/B03950_05_19.jpg" alt="Building a scene with Lightmass"/></div><p>Alternatively, you can simply press the <span class="strong"><strong>Build</strong></span> button, which will build the lighting. Lightmass has four different quality levels that you can choose from. They are <span class="strong"><strong>Preview</strong></span>, <span class="strong"><strong>Medium</strong></span>, <span class="strong"><strong>High</strong></span>, and <span class="strong"><strong>Production</strong></span>.</p><div class="mediaobject"><img src="graphics/B03950_05_20.jpg" alt="Building a scene with Lightmass"/></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Preview</strong></span>: Can be used while developing and this results in building the light faster.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Production</strong></span>: When<a id="id218" class="indexterm"/> your project is near-complete or ready to ship you should use the production setting since it makes the scene more realistic and corrects various light bleed errors.</li></ul></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip20"/>Tip</h3><p>Lighting quality are just presets. There are lots of settings that should be tweaked to get the desired effect you want in your game.</p></div></div></div><div class="section" title="Tweaking Lightmass settings"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec53"/>Tweaking Lightmass settings</h2></div></div></div><p>Lightmass offers <a id="id219" class="indexterm"/>a lot of options in <span class="strong"><strong>World Settings</strong></span>, which you can tweak to get the best visual quality. You can access them by clicking on <span class="strong"><strong>Settings</strong></span> and selecting <span class="strong"><strong>World Settings</strong></span>.</p><div class="mediaobject"><img src="graphics/B03950_05_21.jpg" alt="Tweaking Lightmass settings"/></div><p>In <span class="strong"><strong>World Settings</strong></span>, expand <span class="strong"><strong>Lightmass Settings</strong></span> and you will see various settings you can tweak to get <a id="id220" class="indexterm"/>the most out of <span class="strong"><strong>Lightmass</strong></span>.</p><div class="mediaobject"><img src="graphics/B03950_05_22.jpg" alt="Tweaking Lightmass settings"/></div><p>Controlling <a id="id221" class="indexterm"/>these settings helps you get the best visual quality when using Lightmass. Let's take a look at these settings:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Static Lighting Level</strong></span>: This setting calculates the detail when building the light. Smaller values will have more detail but greatly increase build time! Larger values can be used for huge levels to lower build times.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Num Indirect Lighting Bounces</strong></span>: This determines how many times the light should bounce off surfaces. 0 is direct lighting only, meaning there will be no Global Illumination, and 1 is one bounce of indirect lighting, and so on. Bounce 1 contributes most to the visual quality, and successive bounces are nearly free but do not add very much light since bounced light gets weaker after each bounce.<div class="mediaobject"><img src="graphics/B03950_05_23.jpg" alt="Tweaking Lightmass settings"/><div class="caption"><p>Num Indirect Lighting Bounces set to 1</p></div></div></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Indirect Lighting Quality</strong></span>: Higher<a id="id222" class="indexterm"/> settings result in fewer artifacts such as noise, splotchiness, and so on, but will also increase build time. Using this setting with <span class="strong"><strong>Indirect Lighting Smoothness</strong></span> helps to get detailed indirect shadows and ambient occlusion.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Indirect Lighting Smoothness</strong></span>: Higher values will cause Lightmass to smooth out indirect lighting but will lose detailed indirect shadows.<div class="mediaobject"><img src="graphics/B03950_05_24.jpg" alt="Tweaking Lightmass settings"/><div class="caption"><p>Indirect Lighting Quality and Smoothness set to 1.0</p></div></div><div class="mediaobject"><img src="graphics/B03950_05_25.jpg" alt="Tweaking Lightmass settings"/><div class="caption"><p>Indirect Lighting Quality: 4.0 and Indirect Lighting Smoothness: 0.5. Notice the difference in the shadow cast by the pillar</p></div></div></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Environment Color</strong></span>: Think of this as a big sphere surrounding the level, emitting color in all direction. That is, this acts as the HDR environment.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Environment Intensity</strong></span>: Scales the intensity of <span class="strong"><strong>Environment Color</strong></span>.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Diffuse Boost</strong></span>: This <a id="id223" class="indexterm"/>is an effective way of increasing the intensity of indirect lighting in your scene. Since indirect lighting bounces off surfaces, this value will boost the influence of the color.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Use Ambient Occlusion</strong></span>: Enables static ambient occlusion. Since ambient occlusion requires dense lighting samples, it will not look good in <span class="strong"><strong>Preview</strong></span> builds. It's better to tweak ambient occlusion settings while you are building using production preset.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Direct Illumination Occlusion Fraction</strong></span>: How much ambient occlusion to be applied to direct lighting.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Indirect Illumination Occlusion Fraction</strong></span>: How much ambient occlusion to be applied to indirect lighting.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Occlusion Exponent</strong></span>: Higher values increase the ambient occlusion contrast.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Fully Occluded Samples Fraction</strong></span>: This value determines how much Ambient Occlusion an object should generate on other objects.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Max Occlusion Distance</strong></span>: Maximum distance for an object to cause occlusion on another object.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Visualize Material Diffuse</strong></span>: Overrides normal direct lighting and indirect lighting with the material diffuse term exported to Lightmass.<div class="mediaobject"><img src="graphics/B03950_05_26.jpg" alt="Tweaking Lightmass settings"/><div class="caption"><p>Visualize Material Diffuse enabled</p></div></div></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Visualize Ambient Occlusion</strong></span>: Overrides normal direct lighting and indirect lighting with <a id="id224" class="indexterm"/>ambient occlusion. This is useful when you are tweaking <span class="strong"><strong>Ambient Occlusion</strong></span> settings.<div class="mediaobject"><img src="graphics/B03950_05_27.jpg" alt="Tweaking Lightmass settings"/><div class="caption"><p>Visualize Ambient Occlusion enabled</p></div></div></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Volume Light Sample Placement Scale</strong></span>: Scales the distance at which volume <a id="id225" class="indexterm"/>lighting samples are placed.</li></ul></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note14"/>Note</h3><p>All these Lightmass settings require lighting rebuild. So if you change any of these settings, make sure you rebuild the lighting for the changes to take effect.</p></div></div><p>
<span class="strong"><strong>Volume Light Samples</strong></span> are placed by Lightmass in the level after light building, and are used for dynamic objects such as characters, since Lightmass only generates lightmaps for static objects. This is also called <a id="id226" class="indexterm"/>
<span class="strong"><strong>Indirect Lighting Cache</strong></span>.</p><p>In the following screenshots, you <a id="id227" class="indexterm"/>can see how the movable object (red sphere) is lit using <span class="strong"><strong>Indirect Lighting Cache</strong></span>:</p><div class="mediaobject"><img src="graphics/B03950_05_28.jpg" alt="Tweaking Lightmass settings"/><div class="caption"><p>With Indirect Lighting Cache</p></div></div><div class="mediaobject"><img src="graphics/B03950_05_29.jpg" alt="Tweaking Lightmass settings"/><div class="caption"><p>Without Indirect Lighting Cache</p></div></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note15"/>Note</h3><p>
<span class="strong"><strong>Volume Light Samples</strong></span> are only placed within <span class="strong"><strong>Lightmass Importance Volume</strong></span> and on static surfaces.</p></div></div><p>
<span class="strong"><strong>Indirect Lighting Cache</strong></span> also<a id="id228" class="indexterm"/> helps with previewing objects with unbuilt lighting. After light building, if you move a static object, it will automatically use <span class="strong"><strong>Indirect Lighting Cache</strong></span> until the next light build.</p><p>To visualize volume<a id="id229" class="indexterm"/> lighting samples, click on <span class="strong"><strong>Show</strong></span> | <span class="strong"><strong>Visualize</strong></span> | <span class="strong"><strong>Volume Lighting Samples</strong></span>.</p><div class="mediaobject"><img src="graphics/B03950_05_30.jpg" alt="Tweaking Lightmass settings"/><div class="caption"><p>Volume Lighting Samples previewed in the level.</p></div></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note16"/>Note</h3><p>You can adjust <span class="strong"><strong>Global Illumination Intensity</strong></span> and <span class="strong"><strong>Color</strong></span> in <span class="strong"><strong>Post Process Volume</strong></span>. In <span class="strong"><strong>Post Process Volume</strong></span>, expand <span class="strong"><strong>Post Process Settings</strong></span> | <span class="strong"><strong>Global Illumination</strong></span> and there you see settings for <span class="strong"><strong>Color</strong></span> and <span class="strong"><strong>Intensity</strong></span>.</p></div></div><div class="mediaobject"><img src="graphics/B03950_05_31.jpg" alt="Tweaking Lightmass settings"/></div><p>To toggle specific lighting components for debugging, you can use the various lighting component flags <a id="id230" class="indexterm"/>under the <span class="strong"><strong>Show</strong></span> | <span class="strong"><strong>Lighting Components</strong></span> section. For example, if you want to preview your scene without any direct lighting, you can turn off <span class="strong"><strong>Direct Lighting</strong></span> and preview your scene in <span class="strong"><strong>Indirect Lighting</strong></span> only. Keep in mind that these are only editor features and do not affect your game. These are only for debugging purposes.</p><div class="mediaobject"><img src="graphics/B03950_05_32.jpg" alt="Tweaking Lightmass settings"/></div></div></div>
<div class="section" title="Summary"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec28"/>Summary</h1></div></div></div><p>In this chapter, we learned about lights and how they can improve the realism of your scene by using Lightmass Global Illumination, and how to prepare our assets to use with Lightmass. We also learned about various lights and common settings. In the next chapter we will dive into the best and most unique feature of Unreal Engine 4: Blueprints.</p></div></body></html>