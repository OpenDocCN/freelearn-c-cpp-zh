<html><head></head><body><div class="chapter" title="Chapter&#xA0;7.&#xA0;Creating a Vehicle Blueprint"><div class="titlepage" id="aid-20R682"><div><div><h1 class="title"><a id="ch07"/>Chapter 7. Creating a Vehicle Blueprint</h1></div></div></div><p>In this chapter, we will create a working <span class="strong"><strong>Vehicle Blueprint</strong></span> from scratch using the default assets provided by Unreal Engine 4 with the <span class="strong"><strong>VehicleGame</strong></span> project example as well as using assets which we will be creating by ourselves. First, we will start with an overview of what <span class="strong"><strong>Vehicle Blueprint</strong></span> will be composed of and then move on to the specifics on how to create the different blueprints for all of their aspects. Following the overview, we will cover the following topics:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">Creating Vehicle Blueprints</li><li class="listitem">Editing Vehicle Blueprints</li><li class="listitem">Setting up user controls</li><li class="listitem">Testing the vehicle</li></ul></div><p>There is a lot of content to cover in this chapter, so let's get started.</p><div class="section" title="Vehicle Blueprint – a content overview"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec62"/>Vehicle Blueprint – a content overview</h1></div></div></div><p>A vehicle in <a id="id378" class="indexterm"/>Unreal Engine 4 contains a number of different types of <a id="id379" class="indexterm"/>assets:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">A <span class="strong"><strong>Skeletal Mesh</strong></span></li><li class="listitem">A <span class="strong"><strong>Physics Asset</strong></span></li><li class="listitem">An <span class="strong"><strong>Animation Blueprint</strong></span></li><li class="listitem">A <span class="strong"><strong>Vehicle Blueprint</strong></span></li><li class="listitem">One or more <span class="strong"><strong>Wheel Blueprints</strong></span></li><li class="listitem">A <span class="strong"><strong>Tire Type Data Asset</strong></span></li></ul></div><p>Let's start by creating the necessary game project so that we have access to a <span class="strong"><strong>Vehicle Skeletal Mesh</strong></span> by default, and we don't have to create our own in a third-party 3D modeling program. To do so, let's open the Epic Games<span class="strong"><strong> </strong></span>Unreal launcher and navigate to the <span class="strong"><strong>Learn</strong></span> tab. Here, scroll down to the <span class="strong"><strong>Example Game Projects</strong></span> section and find the <span class="strong"><strong>Vehicle Game</strong></span> project template. Select this project and then the <span class="strong"><strong>Download</strong></span> option:</p><div class="mediaobject"><img src="../Images/image00322.jpeg" alt="Vehicle Blueprint – a content overview"/></div><p style="clear:both; height: 1em;"> </p><p>Once successfully downloaded, we can create the project by navigating to the <span class="strong"><strong>Library</strong></span> tab of the Unreal <a id="id380" class="indexterm"/>Engine launcher, scroll to the very bottom of the page to the <span class="strong"><strong>Vault</strong></span> section, and select the <span class="strong"><strong>Create Project</strong></span> option for <span class="strong"><strong>Vehicle Game</strong></span>:</p><div class="mediaobject"><img src="../Images/image00323.jpeg" alt="Vehicle Blueprint – a content overview"/></div><p style="clear:both; height: 1em;"> </p><p>When we select the <span class="strong"><strong>Create Project</strong></span> option, it will ask us for a name of the project. Let's call this project <code class="literal">Vehicle_PhyProject</code>. After the Unreal Engine launcher creates the vehicle project for us, we should see it available in our list of projects in the <span class="strong"><strong>My Projects</strong></span> section of the <span class="strong"><strong>Library</strong></span> tab. Now, double-click on the project image to open the Unreal Engine 4 editor for this project. By default, this project contains all the assets necessary to create a working <span class="strong"><strong>Vehicle Blueprint</strong></span>, such as a <span class="strong"><strong>Skeletal Mesh</strong></span>, <span class="strong"><strong>Wheel Blueprints</strong></span>, a <span class="strong"><strong>Vehicle Animation Blueprint</strong></span>, and so on, but we will only use the <span class="strong"><strong>Skeletal Mesh</strong></span> that the project provides, and we will create every other aspect of the <span class="strong"><strong>Vehicle Blueprint</strong></span> from scratch step by step.</p><p>Now that we have successfully created the <span class="strong"><strong>Vehicle Game Project</strong></span>, feel free to explore some of the content that it contains and play the game in the <span class="strong"><strong>Desert Rally Race</strong></span> level to see how our final result will be for this chapter. Once we are satisfied exploring the game project, let's begin by creating a new folder in <span class="strong"><strong>Content Browser</strong></span> that will house all of our content for this chapter. First, navigate to <span class="strong"><strong>Content Browser</strong></span> and highlight the <span class="strong"><strong>Content</strong></span> folder at the very top of the content hierarchy in the top-left corner of the browser. Once highlighted, we can <a id="id381" class="indexterm"/>either right-click on the <span class="strong"><strong>Content</strong></span> folder, select the <span class="strong"><strong>New Folder</strong></span> option, or left-click on the <span class="strong"><strong>Add New</strong></span> drop-down menu and select <span class="strong"><strong>New Folder</strong></span>. Name this folder <code class="literal">VehicleContent</code>. With the folder in place, we will now navigate to the <span class="strong"><strong>Vehicles</strong></span> folder, the <span class="strong"><strong>VH_Buggy</strong></span> folder and then to the <span class="strong"><strong>Mesh</strong></span> folder; this folder contains the <span class="strong"><strong>SK_Buggy_Vehicle Skeletal Mesh</strong></span> that we need to begin this lesson. Let's left-click and drag the <span class="strong"><strong>SK_Buggy_Vehicle</strong></span> asset to our <span class="strong"><strong>VehicleContent</strong></span> folder and select it to create a copy. Name this copy <code class="literal">SK_Buggy_NewVehicle</code>. If we want to create our own <span class="strong"><strong>Skeletal Mesh</strong></span>, here are some of the things we should keep in mind.</p><p>The basic, bare minimum, art setup required to create a proper vehicle is just a <span class="strong"><strong>Skeletal Mesh</strong></span>. The type of vehicle will dictate how complicated an art setup we will need, and special considerations may need to be given to the suspension. For example, a tank does not require a special suspension setup, whereas a dune buggy (such as the one in the <span class="strong"><strong>Vehicle Game</strong></span> project example) will require additional joints to make the exposed components move in a believable way.</p><p>Some of the more important basic information we need to know about setting up our vehicle in a third-party art program (such as 3ds Max or Maya) is that we want the vehicle mesh to point to the positive <span class="emphasis"><em>X</em></span> direction. Next, we will need to measure the radius of our wheels in centimeters for use in Unreal Engine 4 because we had discussed earlier in this book that Unreal Engine 4 uses centimeters as its unit of measurement, where 1 <span class="strong"><strong>Unreal </strong></span>
<a id="id382" class="indexterm"/>
<span class="strong"><strong>Unit</strong></span> (<span class="strong"><strong>uu</strong></span>) is equal to 1 <span class="strong"><strong>centimeter</strong></span> (<span class="strong"><strong>cm</strong></span>). The minimum number of <span class="strong"><strong>Joints</strong></span> <a id="id383" class="indexterm"/>required for a four-wheeled vehicle is 5:1 and 4 wheels; this will change depending on the number of wheels the vehicle has (remember what we discussed in <a class="link" title="Chapter 5. Physics Damping, Friction, and Physics Bodies" href="part0055.xhtml#aid-1KEEU2">Chapter 5</a>, <span class="emphasis"><em>Physics Damping, Friction, and Physics Bodies</em></span>). The wheel and root joints should be aligned with the <span class="emphasis"><em>X</em></span> direction looking forward and the <span class="emphasis"><em>Z</em></span> direction looking upwards. By doing so, this will ensure that the wheel will roll on the <span class="emphasis"><em>Y</em></span> axis and steer on the <span class="emphasis"><em>Z</em></span> axis. All the other joints can be arranged as required, but it should be noted that things such as <span class="strong"><strong>Look At</strong></span> nodes for the <span class="strong"><strong>Animation Blueprint</strong></span> assume that the <span class="emphasis"><em>X</em></span> direction is forward. To prevent visual oddities, the joints for our wheels should be accurately centered, as shown in the following screenshot:</p><div class="mediaobject"><img src="../Images/image00324.jpeg" alt="Vehicle Blueprint – a content overview"/></div><p style="clear:both; height: 1em;"> </p><p>The visual mesh will not be used for collision detection; however, if the wheel mesh is off-center, it will look as if the wheel is broken and will be really noticeable due to motion blur.</p><p>For binding purposes, we can use either the standard smooth bind for Maya or the skin modifier for 3ds Max. Wheels should only have weights on one joint so that they can spin free with no odd deformation. For shocks and struts, we can get away with some fancy skinning, but it will <a id="id384" class="indexterm"/>require more thought on the Unreal Engine Editor side.</p><p>Lastly, vehicles are simply exported as <span class="strong"><strong>Skeletal Meshes</strong></span> with no special considerations when you import the asset to Unreal Engine 4.</p><p>Now that we have our own copy of the <span class="strong"><strong>Skeletal Mesh</strong></span> vehicle, we can create our <span class="strong"><strong>Physics Asset</strong></span> for this vehicle by right-clicking on <span class="strong"><strong>SK_Buggy_NewVehicle</strong></span> from our <span class="strong"><strong>VehicleContent</strong></span> folder, selecting the <span class="strong"><strong>Create</strong></span> option from the drop-down menu and then <span class="strong"><strong>Physics Asset</strong></span>. Then, name this asset <code class="literal">PA_Buggy_NewVehicle</code> and leave all the setup options to their default values, as shown in the following screenshot:</p><div class="mediaobject"><img src="../Images/image00325.jpeg" alt="Vehicle Blueprint – a content overview"/></div><p style="clear:both; height: 1em;"> </p><p>Now, double-click <a id="id385" class="indexterm"/>on the new <span class="strong"><strong>Physics Asset</strong></span>, and we should see something similar to this screenshot in <span class="strong"><strong>PhAT</strong></span>:</p><div class="mediaobject"><img src="../Images/image00326.jpeg" alt="Vehicle Blueprint – a content overview"/></div><p style="clear:both; height: 1em;"> </p><p>We obtain this result because the <span class="strong"><strong>Physics Asset Tool (PhAT)</strong></span> in Unreal Engine 4 attempts to wrap the vertices that are skinned to a joint as best as it can. <span class="strong"><strong>PhAT</strong></span> does not currently have a way to effectively handle the recreation of the constraints that hold all the <span class="strong"><strong>Physics Bodies</strong></span> together, so what we need to do is delete all the existing <span class="strong"><strong>Physics Bodies</strong></span> in <span class="strong"><strong>Hierarchy</strong></span> so that we can start building them from the root joint. By doing so, all of our constraints will be created correctly.</p><p>To do this, navigate to <span class="strong"><strong>Hierarchy</strong></span>, press <span class="emphasis"><em>Shift</em></span> and left-click on all the options, and press the <span class="emphasis"><em>Delete</em></span> key; this will remove all the <span class="strong"><strong>Physics Bodies</strong></span> from the asset:</p><div class="mediaobject"><img src="../Images/image00327.jpeg" alt="Vehicle Blueprint – a content overview"/></div><p style="clear:both; height: 1em;"> </p><p>Starting with the root joint: <span class="strong"><strong>rootJNT</strong></span>, let's create the <span class="strong"><strong>Physics Bodies</strong></span> on the joints of our vehicles. Keep in mind that we only need a <span class="strong"><strong>Physics Body</strong></span> on a joint that either needs to be physically simulated or affects the bounds of our vehicle. For our vehicle, a box shape for the root/main body and spheres for each of the wheels will serve us just fine, but we will add additional <a id="id386" class="indexterm"/>
<span class="strong"><strong>Physics Bodies</strong></span> to get the desired behavior that we want for other parts of the vehicle (such as the antenna).</p><p>For our <span class="strong"><strong>Buggy Vehicle</strong></span>, we will have a total of 10 <span class="strong"><strong>Physics Bodies</strong></span>. The end result should look similar to the following image:</p><div class="mediaobject"><img src="../Images/image00328.jpeg" alt="Vehicle Blueprint – a content overview"/></div><p style="clear:both; height: 1em;"> </p><p>To accomplish this, we will first create the large bounding box that surrounds the main body of <span class="strong"><strong>Buggy Vehicle</strong></span>. Select the <span class="strong"><strong>rootJNT</strong></span> option from the <span class="strong"><strong>Hierarchy</strong></span> panel on the right-hand side and then right-click and select the <span class="strong"><strong>Add Box</strong></span> option. Make sure to use the <span class="strong"><strong>Translation</strong></span> and <span class="strong"><strong>Scale</strong></span> tools to shape the <span class="strong"><strong>Physics Body</strong></span> box to match the shape of the body of the buggy as best as you can. Next, let's navigate to the <span class="strong"><strong>Collision</strong></span> section of the <span class="strong"><strong>Details</strong></span> panel and make sure that <span class="strong"><strong>Simulation Generates Hit Events</strong></span> is set to <code class="literal">True</code>. Lastly, in the <span class="strong"><strong>Details</strong></span> panel of the newly created box, <span class="strong"><strong>Physics Body</strong></span>, make sure that <span class="strong"><strong>Physics Type</strong></span> is set to <code class="literal">Default</code>.</p><p>Now, let's create the <a id="id387" class="indexterm"/>
<span class="strong"><strong>Physics Bodies</strong></span> for the four wheels of our vehicle. Each <span class="strong"><strong>Physics Body</strong></span> will be of the same size and shape, and have the same properties associated to them. Let's select <span class="strong"><strong>F_L_wheelJNT</strong></span> from the <span class="strong"><strong>Hierarchy</strong></span> panel, right-click on this option, and select the <span class="strong"><strong>Add Sphere</strong></span> option. Use the <span class="strong"><strong>Scale</strong></span> and <span class="strong"><strong>Translation</strong></span> tools to position the spherical <span class="strong"><strong>Physics Body</strong></span> around the front-left wheel of the vehicle and change its <span class="strong"><strong>Physics Type</strong></span> to <span class="strong"><strong>Kinematic</strong></span>. Follow this process for the remaining three wheels: <span class="strong"><strong>F_R_wheelJNT</strong></span>, <span class="strong"><strong>B_R_wheelJNT</strong></span>, and <span class="strong"><strong>B_K_wheelJNT</strong></span>. Lastly, let's navigate to the <span class="strong"><strong>Collision</strong></span> section of the <span class="strong"><strong>Details</strong></span> panel for each of the four wheels and make sure that <span class="strong"><strong>Simulation Generates Hit Events</strong></span> is set to <code class="literal">True</code>.</p><div class="mediaobject"><img src="../Images/image00329.jpeg" alt="Vehicle Blueprint – a content overview"/></div><p style="clear:both; height: 1em;"> </p><p>Moving on, let's now create the <span class="strong"><strong>Physics Bodies</strong></span> for the front and back bumpers of the vehicle by right-clicking on <span class="strong"><strong>rootJNT</strong></span> and selecting the <span class="strong"><strong>Add Sphyl</strong></span> option, which will create a capsule-shaped <span class="strong"><strong>Physics Body</strong></span>. Use the <span class="strong"><strong>Scale</strong></span> and <span class="strong"><strong>Translation</strong></span> tools to position this <span class="strong"><strong>Physics Body</strong></span> around the front bumper of the vehicle and set its <span class="strong"><strong>Physics Type</strong></span> to <code class="literal">Default</code>. Repeat this process for the back bumper of the vehicle as well. Lastly, let's navigate to the <span class="strong"><strong>Collision</strong></span> section of the <span class="strong"><strong>Details</strong></span> option for both. Make sure that <span class="strong"><strong>Simulation Generates Hit Events</strong></span> is set to <code class="literal">True</code>.</p><p>Before we move on to creating the <span class="strong"><strong>Physics Body</strong></span> for the antenna, let's first create the two box shapes for the left-hand side and the right-hand side suspensions for the buggy. With the <span class="strong"><strong>rootJNT</strong></span> bone joint selected in <span class="strong"><strong>Hierarchy</strong></span> on the right-hand side, right-click and select the <span class="strong"><strong>Add Box</strong></span> option. Lastly, let's navigate to the <span class="strong"><strong>Collision</strong></span> section of the <span class="strong"><strong>Details</strong></span> panel and make sure that <span class="strong"><strong>Simulation Generates Hit Events </strong></span>is set to <code class="literal">True</code>. Then, the scale and position of the box should look similar to the following screenshot:</p><div class="mediaobject"><img src="../Images/image00330.jpeg" alt="Vehicle Blueprint – a content overview"/></div><p style="clear:both; height: 1em;"> </p><p>Now, create an additional <span class="strong"><strong>Box Physics Body</strong></span> and shape and transform it so that it covers the other side of the buggy's suspensions. Then, set both their <span class="strong"><strong>Physics Type</strong></span> parameters to <code class="literal">Default</code>. Next, let's navigate to the <span class="strong"><strong>Collision</strong></span> section of the <span class="strong"><strong>Details</strong></span> panel and make sure that <span class="strong"><strong>Simulation Generates Hit Events</strong></span> is set to <code class="literal">True</code>.</p><p>Lastly, let's set up the <span class="strong"><strong>Physics Body</strong></span> for the antenna of our vehicle so that we can simulate a responsive antenna when we move in our vehicle. To do this, select the <span class="strong"><strong>Antenna_01</strong></span> option from the <span class="strong"><strong>Hierarchy</strong></span> panel, right-click on it, and select the <span class="strong"><strong>Add Sphyl</strong></span> option. Next, set <a id="id388" class="indexterm"/>
<span class="strong"><strong>Physics Type</strong></span> to <code class="literal">Default</code>, and set the following parameters in the <span class="strong"><strong>Details</strong></span> panel for our antenna's <span class="strong"><strong>Physics Body</strong></span>:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong>Mass Scale</strong></span>: Set this parameter to <code class="literal">0.01</code></li><li class="listitem"><span class="strong"><strong>Angular Damping</strong></span>: Set this parameter to <code class="literal">10.0</code></li><li class="listitem"><span class="strong"><strong>Linear Damping</strong></span>: Set this parameter to <code class="literal">3.0</code></li></ul></div><p>To finish off the <span class="strong"><strong>Physics Body</strong></span> for our antenna, make sure that the <span class="strong"><strong>Antenna_01</strong></span> joint is selected in the <span class="strong"><strong>Hierarchy</strong></span> panel. Then, select <span class="strong"><strong>Constraint Mode</strong></span> from the <span class="strong"><strong>Body Mode</strong></span> drop-down menu:</p><div class="mediaobject"><img src="../Images/image00331.jpeg" alt="Vehicle Blueprint – a content overview"/></div><p style="clear:both; height: 1em;"> </p><p>While in <span class="strong"><strong>Constraint Mode</strong></span> and with the <span class="strong"><strong>Antenna_01</strong></span> joint selected, set the following parameters in the <span class="strong"><strong>Details Panel</strong></span>:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong>Angular Swing 1 Motion</strong></span>: Set this parameter to <code class="literal">Limited</code></li><li class="listitem"><span class="strong"><strong>Angular Twist Motion</strong></span>: Set this parameter to <code class="literal">Locked</code></li><li class="listitem"><span class="strong"><strong>Angular Swing 2 Motion</strong></span>: Set this parameter to <code class="literal">Limited</code></li><li class="listitem"><span class="strong"><strong>Swing 1 Limit </strong></span><a id="id389" class="indexterm"/><span class="strong"><strong>Angle</strong></span>: Set this parameter to <code class="literal">1.0</code></li><li class="listitem"><span class="strong"><strong>Swing 2 Limit Angle</strong></span>: Set this parameter to <code class="literal">1.0</code></li><li class="listitem"><span class="strong"><strong>Swing Limit Stiffness</strong></span>: Set this parameter to <code class="literal">500.0</code></li><li class="listitem"><span class="strong"><strong>Swing Limit Damping</strong></span>: Set this parameter to <code class="literal">50.0</code></li></ul></div><p>With these changes in place, let's return to <span class="strong"><strong>Body Mode</strong></span>, select <span class="strong"><strong>rootJNT</strong></span> from the <span class="strong"><strong>Hierarchy</strong></span> panel and then the <span class="strong"><strong>Selected Simulation</strong></span> option, and select <span class="strong"><strong>Simulate</strong></span> to see how our <span class="strong"><strong>Physics Bodies</strong></span> are affected by the gravity of simulation:</p><div class="mediaobject"><img src="../Images/image00332.jpeg" alt="Vehicle Blueprint – a content overview"/></div><p style="clear:both; height: 1em;"> </p><p>We can see that the wheels rotate in a strange manner that don't make too much sense in the context of a working vehicle for a racing game, but we will change this behavior later when we create the blueprints for the vehicle.</p></div></div>
<div class="section" title="Vehicle Blueprints &#x2013; a section overview" id="aid-21PMQ1"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec63"/>Vehicle Blueprints – a section overview</h1></div></div></div><p>In this section, we <a id="id390" class="indexterm"/>discussed the necessary components that make up a working <span class="strong"><strong>Vehicle Blueprint</strong></span>, and we looked at the necessary details of how to create the <span class="strong"><strong>Physics Bodies</strong></span> for our vehicle. Lastly, we used <span class="strong"><strong>PhAT</strong></span> in Unreal Engine 4 to recreate the necessary <span class="strong"><strong>Physics Body</strong></span> components of the <span class="strong"><strong>Buggy Vehicle</strong></span> to establish a working <span class="strong"><strong>Physical Body</strong></span> for the vehicle. Now that we have created the <span class="strong"><strong>Physics Asset</strong></span> from the premade <a id="id391" class="indexterm"/>
<span class="strong"><strong>Skeletal Mesh</strong></span> that is created by default when working with the <span class="strong"><strong>VehicleGame</strong></span> project, we can now move on and work on <span class="strong"><strong>Vehicle Blueprints</strong></span>.</p></div>
<div class="section" title="Creating the Vehicle Blueprints"><div class="titlepage" id="aid-22O7C2"><div><div><h1 class="title"><a id="ch07lvl1sec64"/>Creating the Vehicle Blueprints</h1></div></div></div><p>To create a new <a id="id392" class="indexterm"/>
<span class="strong"><strong>Vehicle Blueprint</strong></span>, let's first navigate to our <span class="strong"><strong>VehicleContent</strong></span> folder in <span class="strong"><strong>Content Browser</strong></span> and then right-click on an area that is empty. From the context drop-menu, we will select the <span class="strong"><strong>Blueprint Class</strong></span> option, click on the drop-down <span class="strong"><strong>All Classes</strong></span> menu, search for the <span class="strong"><strong>WheeledVehicle Pawn</strong></span> class, and name this blueprint <code class="literal">BP_NewVehicle</code>.</p><div class="mediaobject"><img src="../Images/image00333.jpeg" alt="Creating the Vehicle Blueprints"/></div><p style="clear:both; height: 1em;"> </p><p>The <span class="strong"><strong>WheeledVehicle Pawn</strong></span> blueprint contains an inherited component called <span class="strong"><strong>VehicleMovement</strong></span>. This component allows you to have more control over the wheels and the overall behavior for the vehicle.</p><p>Next, we will need to create two different types of <span class="strong"><strong>Wheel Blueprints</strong></span> for our vehicle (one for the front wheels and one for the back wheels). To get this going, let's navigate to the <span class="strong"><strong>VehicleContent</strong></span> folder in <span class="strong"><strong>Content Browser</strong></span>, right-click on an area of <span class="strong"><strong>Content Browser</strong></span> that is empty, and select the <span class="strong"><strong>Blueprint Class</strong></span> option. Now, in the context sensitive drop-down menu, enter <code class="literal">Vehicle Wheel</code> to locate the <span class="strong"><strong>VehicleWheel Blueprint Object</strong></span> class. We will create two different <span class="strong"><strong>VehicleWheel Blueprint</strong></span> classes (one named <code class="literal">BP_FrontWheel</code> and another named <code class="literal">BP_BackWheel</code>).</p><p>In most cases, we will want to have at least two wheel types: that is, one wheel type that is affected by steering and another that is affected by the vehicle handbrake. Additionally, we can set differing radii, mass, width, handbrake effect, suspension, and many other properties to give our vehicle the handling we desire.</p><p>Now, we can move on and create the <span class="strong"><strong>TireType</strong></span> data asset that we will need for our <span class="strong"><strong>VehicleWheel</strong></span> blueprint. To create a new <span class="strong"><strong>TireType</strong></span> data asset in <span class="strong"><strong>Content Browser</strong></span>, we need to right-click on an area of the <span class="strong"><strong>VehicleContent</strong></span> folder that is empty, select the <span class="strong"><strong>Miscellaneous</strong></span> option <a id="id393" class="indexterm"/>and then the <span class="strong"><strong>TireType</strong></span> option from the context sensitive drop-down menu that appears:</p><div class="mediaobject"><img src="../Images/image00334.jpeg" alt="Creating the Vehicle Blueprints"/></div><p style="clear:both; height: 1em;"> </p><p>Let's name this asset <code class="literal">DA_TireType</code> and then right-click on<code class="literal"> </code>the asset to open <span class="strong"><strong>Generic Asset Editor</strong></span>. The <span class="strong"><strong>TireType</strong></span> data asset has only one single value: <span class="strong"><strong>Friction Scale</strong></span>. This value not only affects the raw friction of the wheel, but also scales the value for how difficult or easy it is for a wheel to slide during a hard turn. There is a property slot in the <span class="strong"><strong>VehicleWheel</strong></span> blueprint for the <span class="strong"><strong>TireType</strong></span> data asset that we will use once the time comes.</p><p>Lastly, we have to create the <span class="strong"><strong>Animation</strong></span> blueprint. We will use this to animate our <span class="strong"><strong>Buggy Vehicle</strong></span>. To do this, navigate to <span class="strong"><strong>Content Browser</strong></span> and then go to the <span class="strong"><strong>VehicleContent</strong></span> folder. Now, in an empty area, right-click and select the <span class="strong"><strong>Animation</strong></span> option from the drop-down menu and then select<span class="strong"><strong> Animation Blueprint</strong></span>:</p><div class="mediaobject"><img src="../Images/image00335.jpeg" alt="Creating the Vehicle Blueprints"/></div><p style="clear:both; height: 1em;"> </p><p>When we first create an <span class="strong"><strong>Animation Blueprint</strong></span>, it will ask us for a <span class="strong"><strong>Target Skeleton</strong></span> to use; we will select the <span class="strong"><strong>SK_Buggy_Vehicle_Skeleton</strong></span> option from the <span class="strong"><strong>Target Skeleton</strong></span> drop-down list. We also want to make sure that we select the <span class="strong"><strong>VehicleAnimInstance</strong></span> option from the <span class="strong"><strong>Parent </strong></span>
<a id="id394" class="indexterm"/>
<span class="strong"><strong>Class</strong></span> context sensitive drop-down list and name this animation blueprint <code class="literal">BP_VehicleAnimation</code>. Before we move on and discuss how to edit the different blueprints and data assets we created to complete our vehicle, let's briefly discuss what animation blueprints are.</p><p>An <span class="strong"><strong>Animation Blueprint</strong></span> is a specialized blueprint that contains graphs used to control the animation of a skeletal mesh. It can perform blending of animations, has direct control of the bones in a skeleton, and outputs a final pose for our skeletal mesh in each frame. The <span class="strong"><strong>Controller</strong></span> directs the pawn or character to move based on the player input or decisions made based on what the game play dictates. Each pawn has a <span class="strong"><strong>Skeletal Mesh</strong></span> component that references the <span class="strong"><strong>Skeletal Mesh</strong></span> to animate and has an instance of an <span class="strong"><strong>Animation Blueprint</strong></span>.</p><p>Through the use of its two graphs, the <span class="strong"><strong>Animation Blueprint</strong></span> can access properties of the owning pawn, compute the values used for blending, state transitions, or driving <span class="strong"><strong>Anim Montages</strong></span>, and can calculate the current pose of the skeletal mesh based on the blending of animation sequences and direct transformations of the skeleton from <span class="strong"><strong>Skeletal Controls</strong></span>. When we work with animation blueprints, we have to keep in mind that there are two main components that work in correlation with one another to create the final animation for each frame. One is <span class="strong"><strong>Event Graph</strong></span> that we can recognize from other blueprints. This is in charge of performing updates to values that can be used in <span class="strong"><strong>Anim Graph</strong></span> to drive <span class="strong"><strong>State Machines</strong></span>, <span class="strong"><strong>Blend Spaces</strong></span>, or other nodes that allows you to blend between multiple animation sequences or poses that fire off notifications to other systems, thereby enabling dynamically-driven animation effects to take place.</p><p>There is one <span class="strong"><strong>Event Graph</strong></span> in every <span class="strong"><strong>Animation Blueprint</strong></span> that uses a collection of special animation-based events to initiate sequences of actions. The most common use of <span class="strong"><strong>Event Graph</strong></span> is to update the values used by <span class="strong"><strong>Blend Spaces</strong></span> and other blend nodes to drive animations in the <span class="strong"><strong>Anim Graph</strong></span>.</p><p>The <span class="strong"><strong>Anim Graph</strong></span> is used to evaluate the final pose of a skeletal mesh for the current frame. By default, each <span class="strong"><strong>Animation Blueprint</strong></span> has an <span class="strong"><strong>Anim Graph</strong></span>. This graph can contain animation nodes that are placed in it to sample animation sequences, perform animation blends, or control <a id="id395" class="indexterm"/>bone transformations using <span class="strong"><strong>Skeletal Controls</strong></span>. The resulting pose is then applied to our <span class="strong"><strong>Skeletal Mesh</strong></span> for each frame in the game.</p><div class="mediaobject"><img src="../Images/image00336.jpeg" alt="Creating the Vehicle Blueprints"/></div><p style="clear:both; height: 1em;"> </p></div>
<div class="section" title="Creating the Vehicle Blueprints &#x2013; a section review" id="aid-23MNU1"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec65"/>Creating the Vehicle Blueprints – a section review</h1></div></div></div><p>In this section, we looked <a id="id396" class="indexterm"/>at the necessary blueprints and data assets. We will move on and edit their properties to obtain the behaviors we need for our working <span class="strong"><strong>Buggy Vehicle</strong></span>. First, we created the <span class="strong"><strong>WheeledVehicle</strong></span> blueprint. This is the main blueprint for our vehicle. Then, we created two types of <span class="strong"><strong>Wheel Blueprints</strong></span> (one for our front wheels and another for our back wheels). Further, we created the <span class="strong"><strong>TireType</strong></span> data asset. This is necessary to control the <span class="strong"><strong>Friction</strong></span> property for our wheels. Lastly, we created our animation blueprint for the <span class="strong"><strong>Buggy</strong></span> skeletal mesh, and we discussed about <span class="strong"><strong>Animation Blueprints</strong></span> and its functionalities in detail. Now that we have created the necessary blueprint and data assets for our vehicle, we can move on and edit the properties of these assets.</p></div>
<div class="section" title="Editing the Vehicle Blueprints"><div class="titlepage" id="aid-24L8G2"><div><div><h1 class="title"><a id="ch07lvl1sec66"/>Editing the Vehicle Blueprints</h1></div></div></div><p>With the vehicle <a id="id397" class="indexterm"/>blueprints created, let's now move on and edit the properties of these blueprints in order to obtain the behaviors we want for our vehicle. We will begin by working with the <span class="strong"><strong>BP_VehicleAnimation</strong></span> blueprint by double-clicking on our <span class="strong"><strong>Content Browser</strong></span> and opening its <span class="strong"><strong>Anim Graph</strong></span>; which opens by default. The first node we will create is the <span class="strong"><strong>Mesh Space Ref Pose</strong></span> node, and this is used to return the mesh space reference pose for our skeletal mesh in the <span class="strong"><strong>Animation Blueprint</strong></span>. To create this node, right-click on an area of the <span class="strong"><strong>Anim Graph</strong></span> that is empty. Now, from the context menu, we will <a id="id398" class="indexterm"/>search for the <span class="strong"><strong>Mesh Space Ref Pose</strong></span> node:</p><div class="mediaobject"><img src="../Images/image00337.jpeg" alt="Editing the Vehicle Blueprints"/></div><p style="clear:both; height: 1em;"> </p><p>Next, we will need a <span class="strong"><strong>Wheel Handler</strong></span> node. This is used to alter the wheel transformation based on the setup in the <span class="strong"><strong>Wheeled Vehicle</strong></span> blueprint; keep in mind that this will only work when the owner is of the <span class="strong"><strong>Wheeled Vehicle</strong></span> class. The <span class="strong"><strong>Wheel Handler</strong></span> node also handles the animation needs of our wheels, such as the spinning, the steering, the handbrake, and the suspension. There is no additional setup required; this node obtains all the necessary information from the wheels and transforms it into animation on the bone that the wheel is associated with. To create the <span class="strong"><strong>Wheel Handler</strong></span> node in the <span class="strong"><strong>Anim Graph</strong></span> of our <span class="strong"><strong>Vehicle Animation</strong></span> blueprint, we need to right-click on an area of the graph that is empty. Then, from the context-sensitive menu, we can search for <span class="strong"><strong>Wheel Handler</strong></span>. Finally, we can connect the <span class="strong"><strong>Component Pose</strong></span> output of the <span class="strong"><strong>Mesh Space Ref Pose</strong></span> node to the <span class="strong"><strong>Component Pose</strong></span> input of <span class="strong"><strong>Wheel Handler</strong></span>, as shown in the following screenshot:</p><div class="mediaobject"><img src="../Images/image00338.jpeg" alt="Editing the Vehicle Blueprints"/></div><p style="clear:both; height: 1em;"> </p><p>Unless we have additional struts or other suspension needs, we would connect the <span class="strong"><strong>Component Pose</strong></span> output of the <span class="strong"><strong>Wheeler Handler</strong></span> node to the <span class="strong"><strong>Result</strong></span> output node of the <span class="strong"><strong>Final Animation Pose</strong></span>; if we do this, a <span class="strong"><strong>Component to Local</strong></span> node will automatically be generated between the <span class="strong"><strong>Wheel Handler</strong></span> and the <span class="strong"><strong>Final Animation Pose</strong></span> nodes so that it can convert <span class="strong"><strong>Component Space Pose</strong></span> to <span class="strong"><strong>Local Space Pose</strong></span>. As our <span class="strong"><strong>Vehicle Physics Asset</strong></span> and <span class="strong"><strong>Vehicle Skeletal Mesh</strong></span> contain bones for the vehicle suspension, we will want to create additional nodes to handle the joints that affect the suspension polygons. To do this, pull the output of the <span class="strong"><strong>Wheel Handler</strong></span> node and use the context-sensitive drop-down menu; we will search for the <span class="strong"><strong>Look At</strong></span> node. In the <span class="strong"><strong>Details</strong></span> panel under the <span class="strong"><strong>Skeletal Control</strong></span> section of the <span class="strong"><strong>Look At</strong></span> node, we will want to edit the <span class="strong"><strong>Bone to Modify</strong></span> and <span class="strong"><strong>Look at Bone</strong></span> properties so that we can modify the four bones we have on our vehicle's skeletal mesh, and we have the <span class="strong"><strong>Look at Bone</strong></span> look at our wheel joints. Let's create four different <span class="strong"><strong>Look At</strong></span> nodes and set <a id="id399" class="indexterm"/>each individual property for the <span class="strong"><strong>Bone to Modify</strong></span> and <span class="strong"><strong>Look at Bone</strong></span> settings:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">First node:<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong>Bone to Modify</strong></span>: Select this property as <code class="literal">F_L_Suspension</code></li><li class="listitem"><span class="strong"><strong>Look at Bone</strong></span>: Select this property as <code class="literal">F_L_wheelJNT</code></li></ul></div></li><li class="listitem">Second node:<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong>Bone to Modify</strong></span>: Select this property as <code class="literal">F_R_Suspension</code></li><li class="listitem"><span class="strong"><strong>Look at Bone</strong></span>: Select this property as <code class="literal">F_R_wheelJNT</code></li></ul></div></li><li class="listitem">Third node:<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong>Bone to Modify</strong></span>: Select this property as <code class="literal">B_R_Suspension</code></li><li class="listitem"><span class="strong"><strong>Look at Bone</strong></span>: Select this property as <code class="literal">B_R_wheelJNT</code></li></ul></div></li><li class="listitem">Fourth node:<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong>Bone to Modify</strong></span>: Select this property as <code class="literal">B_L_Suspension</code></li><li class="listitem"><span class="strong"><strong>Look at Bone</strong></span>: Select this property as <code class="literal">B_L_wheelJNT</code></li></ul></div></li></ol><div style="height:10px; width: 1px"/></div><p>With the four <span class="strong"><strong>Look At</strong></span> nodes in place, we can now connect the output of the last <span class="strong"><strong>Look At</strong></span> node to the <span class="strong"><strong>Result</strong></span> input node of the <span class="strong"><strong>Final Animation Pose</strong></span> node. Our final <span class="strong"><strong>Vehicle Animation</strong></span> blueprint should look similar to the following screenshot:</p><div class="mediaobject"><img src="../Images/image00339.jpeg" alt="Editing the Vehicle Blueprints"/></div><p style="clear:both; height: 1em;"> </p><p>With these nodes in place, we are done with the <span class="strong"><strong>Vehicle Animation</strong></span> blueprint. We can now move on and edit our <span class="strong"><strong>Tire</strong></span> data asset.</p><p>Similar to what we have discussed earlier, the <span class="strong"><strong>Tire</strong></span> data asset only has one property value to edit: <span class="strong"><strong>Friction Scale</strong></span>. Let's <a id="id400" class="indexterm"/>navigate back to <span class="strong"><strong>Content Browser</strong></span> and to our <span class="strong"><strong>VehicleContent</strong></span> folder. Now, we double-click on the <span class="strong"><strong>DA_Tire Tire Type</strong></span> asset. In the <span class="strong"><strong>Generic Asset Editor</strong></span>, let's change the <span class="strong"><strong>Friction Scale</strong></span> property from its default value of <code class="literal">1.0</code> to a new value of <code class="literal">2.0</code>:</p><div class="mediaobject"><img src="../Images/image00340.jpeg" alt="Editing the Vehicle Blueprints"/></div><p style="clear:both; height: 1em;"> </p><p>With this change to our <span class="strong"><strong>Tire</strong></span> data asset in place, we can now move on and edit our <span class="strong"><strong>Wheel</strong></span> blueprints. Navigate back to <span class="strong"><strong>Content Browser</strong></span> and to our <span class="strong"><strong>VehicleContent</strong></span> folder so that we can double-click our <span class="strong"><strong>BP_BackWheel</strong></span> blueprint and edit its properties. As discussed previously, the properties of the front and back wheels will vary slightly because the front wheels will be responsible for steering, whereas the back wheels will be responsible for responding to the handbrake.</p><p>The properties that we need to initially set are as follows:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong>Shape Radius</strong></span>: This <a id="id401" class="indexterm"/>property determines the radius of the shape used for the vehicle wheel.</li><li class="listitem"><span class="strong"><strong>Shape Width</strong></span>: This <a id="id402" class="indexterm"/>property determines the width of the shape used for the vehicle wheel.</li><li class="listitem"><span class="strong"><strong>Affected by Handbrake</strong></span>: This property determines whether or not the wheel is affected <a id="id403" class="indexterm"/>by the handbrake that the player uses to stop the vehicle. This parameter is typically used for back wheels only, not for the front wheels.</li><li class="listitem"><span class="strong"><strong>Steer Angle</strong></span>: This <a id="id404" class="indexterm"/>specifies the maximum angle that the wheel can rotate in both the positive and negative directions, that is, turning left and right.</li><li class="listitem"><span class="strong"><strong>Tire Type</strong></span>: This <a id="id405" class="indexterm"/>property determines the <span class="strong"><strong>TireType</strong></span> data asset that the wheel will use for its <span class="strong"><strong>Friction Scale</strong></span> property.</li></ul></div><p>The <span class="strong"><strong>Shape Radius</strong></span> and <span class="strong"><strong>Shape Width</strong></span> properties are determined by the size of the wheels, and in this specific case, these are the back wheels on our vehicle, so for these settings, let's set the following parameters:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong>Shape Radius</strong></span>: Set this parameter as <code class="literal">57.0</code></li><li class="listitem"><span class="strong"><strong>Shape Width</strong></span>: Set this parameter as <code class="literal">30.0</code></li></ul></div><p>Again, keep in mind that these values will change depending on the vehicle being used and the size of the wheels. Next, we will need to change the value of the <span class="strong"><strong>Steer Angle</strong></span> property. As we will work <a id="id406" class="indexterm"/>with the <span class="strong"><strong>BP_BackWheel Wheel</strong></span> blueprint, and the back wheel will not control the steering; we will set the <span class="strong"><strong>Steer Angle</strong></span> property from its default value of <code class="literal">70.0</code> to a value of <code class="literal">0.0</code>.</p><p>Moving on, we need to make sure that the <span class="strong"><strong>BP_BackWheel Wheel</strong></span> blueprint has the <span class="strong"><strong>Affected by Handbrake</strong></span> property set to <code class="literal">True</code> so that these wheels are affected when the player uses the brakes of the vehicle to slow it down and allow it to stop. Lastly, we need to set <span class="strong"><strong>Tire Type</strong></span> from its default value of <code class="literal">DefaultTireType</code> to <code class="literal">DA_Tire</code> from the drop-down menu so that this <span class="strong"><strong>Tire Type</strong></span> is used by our <span class="strong"><strong>BP_BackWheel</strong></span>.</p><div class="mediaobject"><img src="../Images/image00341.jpeg" alt="Editing the Vehicle Blueprints"/></div><p style="clear:both; height: 1em;"> </p><p>Now that we have completed the <span class="strong"><strong>BP_BackWheel</strong></span> blueprint, let's navigate back to <span class="strong"><strong>Content Browser</strong></span> and to our <span class="strong"><strong>VehicleContent</strong></span> folder and then double-click and open the <span class="strong"><strong>BP_FrontWheel</strong></span> blueprint. If we take a look at the skeletal mesh for our vehicle, we will see that the back wheels are slightly larger than the front wheels; this will be important when you set the values for the <span class="strong"><strong>Shape Radius</strong></span> and <span class="strong"><strong>Shape Width</strong></span> parameters of the <span class="strong"><strong>BP_FrontWheel</strong></span> blueprint. Set the following values for the <span class="strong"><strong>Shape Radius</strong></span> and <span class="strong"><strong>Shape Width</strong></span> properties:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong>Shape Radius</strong></span>: Set this parameter to <code class="literal">52.0</code></li><li class="listitem"><span class="strong"><strong>Shape Width</strong></span>: Set this parameter to <code class="literal">23.0</code></li></ul></div><p>We can see that the shape radius is only 5 units less than the <span class="strong"><strong>BP_BackWheel</strong></span> value and the shape width is only 7.0 units less; this is the difference in <span class="strong"><strong>Unreal Units</strong></span> (<span class="strong"><strong>uu</strong></span>) between the two types of wheels.</p><p>As we will work with the <span class="strong"><strong>BP_FrontWheel</strong></span> blueprint, we will want to uncheck the <span class="strong"><strong>Affected by Handbrake</strong></span> property so that it is <code class="literal">False</code> because the front wheels of our vehicle should not react at all to the handbrake. Before we set the <span class="strong"><strong>Steer Angle</strong></span> parameter, we have to understand that this angle is the max angle that the wheel can rotate in both the positive and negative directions, that is, turning left and right. For our <span class="strong"><strong>Buggy Vehicle</strong></span>, any value between <code class="literal">50</code> and <code class="literal">60</code> <a id="id407" class="indexterm"/>works best, but for the sake of providing a value for testing purposes, let's set the <span class="strong"><strong>Steering Angle</strong></span> value to <code class="literal">55</code>.</p><p>Last but not least, let's make sure that the <span class="strong"><strong>TireType</strong></span> parameter is using our <span class="strong"><strong>DA_Tire</strong></span> data asset.</p><div class="mediaobject"><img src="../Images/image00342.jpeg" alt="Editing the Vehicle Blueprints"/></div><p style="clear:both; height: 1em;"> </p><p>Before we move on to editing the <span class="strong"><strong>BP_NewVehicle Vehicle</strong></span> blueprint, let's take some time here to briefly define some of the parameters of our <span class="strong"><strong>Wheel</strong></span> blueprints that we didn't edit so that we have a better understanding of the overall functionality of the <span class="strong"><strong>Wheel</strong></span> blueprint. Here are the additional properties we can manipulate  for our <span class="strong"><strong>Wheel</strong></span> blueprint for further customization:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong>Lat Stiff Max Load</strong></span>: This is the maximum normalized tire load, in which the tire can <a id="id408" class="indexterm"/>deliver no more lateral (sideways) stiffness, irrespective of how much extra load is applied to the tire.</li><li class="listitem"><span class="strong"><strong>Lat Stiff Value</strong></span>: This <a id="id409" class="indexterm"/>determines how much lateral stiffness can be given to the lateral slip.</li><li class="listitem"><span class="strong"><strong>Long Stiff Value</strong></span>: This <a id="id410" class="indexterm"/>determines how much longitudinal stiffness can be given to the longitudinal slip.</li><li class="listitem"><span class="strong"><strong>Suspension Force Offset</strong></span>: This is the vertical offset from the vehicle center of mass <a id="id411" class="indexterm"/>where suspension forces are applied.</li><li class="listitem"><span class="strong"><strong>Suspension Max Raise</strong></span>: This value determines how far the wheel can go above <a id="id412" class="indexterm"/>its resting position.</li><li class="listitem"><span class="strong"><strong>Suspension Max Drop</strong></span>: This value determines how far the wheel can go below its <a id="id413" class="indexterm"/>resting position.</li><li class="listitem"><span class="strong"><strong>Suspension Natural Frequency</strong></span>: This determines the oscillation frequency of <a id="id414" class="indexterm"/>suspension; most cars have values between <code class="literal">5</code> and <code class="literal">10</code>.</li><li class="listitem"><span class="strong"><strong>Suspension Damping Ratio</strong></span>: This value is the rate at which energy is dissipated <a id="id415" class="indexterm"/>from the spring of the vehicle. Most cars have values between <code class="literal">0.8</code> and <code class="literal">1.2</code>; values less than <code class="literal">1</code> are more sluggish, whereas values greater than <code class="literal">1</code> is twitchier.</li><li class="listitem"><span class="strong"><strong>Max Brake Torque</strong></span>: This sets the maximum brake torque of our vehicle in <span class="strong"><strong>Newton </strong></span><a id="id416" class="indexterm"/><span class="strong"><strong>Meters</strong></span> (<span class="strong"><strong>Nm</strong></span>).</li><li class="listitem"><span class="strong"><strong>Max Hand </strong></span><a id="id417" class="indexterm"/><span class="strong"><strong>Brake Torque</strong></span>: This property sets the maximum handbrake torque for this wheel in Nm. A handbrake should have a stronger brake torque than the brake. This will be ignored for wheels that are not affected by the handbrake.</li></ul></div><p>Now that we have a better understanding of <span class="strong"><strong>Wheel Blueprints</strong></span>, let's move on to our <span class="strong"><strong>Vehicle Blueprint</strong></span>. Navigate back to <span class="strong"><strong>Content Browser</strong></span> and to our <span class="strong"><strong>VehicleContent</strong></span> folder. Let's double-click on <span class="strong"><strong>BP_NewVehicle</strong></span> and focus on the <span class="strong"><strong>Details</strong></span> panel when we select the <span class="strong"><strong>Mesh (Inherited)</strong></span> component from the <span class="strong"><strong>Components</strong></span> tab in the top-left corner of our blueprint. Keep in mind that we need to click on the <span class="strong"><strong>Open Full</strong></span> blueprint editor before viewing the <span class="strong"><strong>Viewport</strong></span>, <span class="strong"><strong>Construction Script</strong></span>, and <span class="strong"><strong>Event Graph</strong></span> tabs in the blueprint.</p><p>The first thing we will do is select the <span class="strong"><strong>Mesh (Inherited)</strong></span> component in the <span class="strong"><strong>Components</strong></span> tab. Then, in its <span class="strong"><strong>Details</strong></span> panel, we will change the <span class="strong"><strong>Anim Blueprint Generated Class</strong></span> property and the <span class="strong"><strong>Skeletal Mesh</strong></span> property. For the <span class="strong"><strong>Anim Blueprint Generated Class</strong></span> property, we want to ensure that our <code class="literal">BP_VehicleAnimation</code> blueprint is selected from the context-sensitive drop-down menu; we do this because we want our vehicle to use the animation blueprint that we set up earlier. For the <span class="strong"><strong>Skeletal Mesh</strong></span> property, we will use the <code class="literal">SK_Buggy_NewVehicle</code> skeletal mesh that we made a copy of in the <span class="strong"><strong>VehicleContent</strong></span> folder. With these properties in place, we can now edit the parameters of the <span class="strong"><strong>VehicleMovement (Inherited)</strong></span> component, where we will implement the <span class="strong"><strong>Wheel Blueprints</strong></span> for our vehicle.</p><p>Select the <span class="strong"><strong>VehicleMovement (Inherited)</strong></span> component from the <span class="strong"><strong>Components</strong></span> tab. Then, in its <span class="strong"><strong>Details</strong></span> panel, let's find the <span class="strong"><strong>Wheel Setups</strong></span> parameters, where we can set <span class="strong"><strong>Wheel Class</strong></span> and <span class="strong"><strong>Bone Names</strong></span> that we want to use for each individual wheel for our vehicle. In the <span class="strong"><strong>Wheel Setups</strong></span> <a id="id418" class="indexterm"/>section, set the following parameters for the four wheels:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem"><span class="strong"><strong>Wheel 0</strong></span>:<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong>Wheel Class</strong></span>: Set this parameter to <code class="literal">BP_FrontWheel</code></li><li class="listitem"><span class="strong"><strong>Bone Name</strong></span>: Set this parameter to <code class="literal">F_L_wheelJNT</code></li></ul></div></li><li class="listitem"><span class="strong"><strong>Wheel 1</strong></span>:<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong>Wheel Class</strong></span>: Set this parameter to <code class="literal">BP_FrontWheel</code></li><li class="listitem"><span class="strong"><strong>Bone Name</strong></span>: Set this parameter to <code class="literal">F_R_wheelJNT</code></li></ul></div></li><li class="listitem"><span class="strong"><strong>Wheel 2</strong></span>:<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong>Wheel Class</strong></span>: Set this parameter to <code class="literal">BP_BackWheel</code></li><li class="listitem"><span class="strong"><strong>Bone Name</strong></span>: Set this parameter to <code class="literal">B_L_wheelJNT</code></li></ul></div></li><li class="listitem"><span class="strong"><strong>Wheel 3</strong></span>:<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong>Wheel Class</strong></span>: Set this parameter to <code class="literal">BP_BackWheel</code></li><li class="listitem"><span class="strong"><strong>Bone Name</strong></span>: Set this parameter to <code class="literal">B_R_wheelJNT</code></li></ul></div><div class="mediaobject"><img src="../Images/image00343.jpeg" alt="Editing the Vehicle Blueprints"/></div><p style="clear:both; height: 1em;"> </p></li></ol><div style="height:10px; width: 1px"/></div><p>Keep in mind that when we use a unique skeletal mesh, the <span class="strong"><strong>Bone Name</strong></span> properties will be different depending on how they are named. We can also add more wheels to the vehicle setup by clicking on the <span class="strong"><strong>+</strong></span> sign next to the <span class="strong"><strong>Wheel Setups</strong></span> option.</p><p>The last thing we need to do for this <span class="strong"><strong>Vehicle Blueprint</strong></span> is implement a third-person view camera position behind and slightly above our vehicle. To create a <span class="strong"><strong>Camera</strong></span> component, we need to navigate to the <a id="id419" class="indexterm"/>
<span class="strong"><strong>Components</strong></span> tab. From the <span class="strong"><strong>Add Component</strong></span> option, we can search the <span class="strong"><strong>Camera</strong></span> component. Name this component <code class="literal">VehicleCamera</code> and set its position and rotation values as follows:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong>Location</strong></span>:<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong>X</strong></span>: Set value to <code class="literal">-490.0</code></li><li class="listitem"><span class="strong"><strong>Y</strong></span>: Set value to <code class="literal">0.0</code></li><li class="listitem"><span class="strong"><strong>Z</strong></span>: Set value to <code class="literal">310.0</code></li></ul></div></li><li class="listitem"><span class="strong"><strong>Rotation</strong></span>:<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong>Roll (X)</strong></span>: Set value to <code class="literal">0.0</code></li><li class="listitem"><span class="strong"><strong>Pitch (Y)</strong></span>: Set value to <code class="literal">-10.0</code></li><li class="listitem"><span class="strong"><strong>Yaw (Z)</strong></span>: Set value to <code class="literal">0.0</code></li></ul></div></li></ul></div><p>Finally, we want to make sure that the <span class="strong"><strong>Use Pawn Control Rotation</strong></span> option from the <span class="strong"><strong>Details</strong></span> panel of the <span class="strong"><strong>VehicleCamera</strong></span> component is unchecked so that it is set to <code class="literal">False</code>. With these parameters in place, we are now ready to start setting up our <span class="strong"><strong>User Controls</strong></span> so that we can begin to test our <span class="strong"><strong>Vehicle Blueprint</strong></span>.</p></div>
<div class="section" title="Editing the Vehicle Blueprints &#x2013; a section review" id="aid-25JP21"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec67"/>Editing the Vehicle Blueprints – a section review</h1></div></div></div><p>In this section, we <a id="id420" class="indexterm"/>set up the basic functionality for all of our vehicle blueprints. First, we added the functionality to our <span class="strong"><strong>Vehicle</strong></span> animation blueprint by creating a <span class="strong"><strong>Mesh Space Ref Pose</strong></span> node, connected it to a <span class="strong"><strong>Wheel Handler</strong></span> node, and implemented four different <span class="strong"><strong>Look At</strong></span> nodes for each of our <span class="strong"><strong>Suspension Bones</strong></span> that are attached to our vehicle. Next, we set up the <span class="strong"><strong>Friction Scale</strong></span> value for our <span class="strong"><strong>Tire Type</strong></span> data asset. Then, we set up the parameters required for our two different <span class="strong"><strong>Wheel Blueprints</strong></span> so that we get the appropriate behaviors for our front and back wheels. Lastly, we set up the parameters for our <span class="strong"><strong>Vehicle Blueprint</strong></span> by applying the necessary skeletal mesh and animal blueprint for the vehicle. We also took the time to implement the two <span class="strong"><strong>Wheel Blueprints</strong></span> and associated them with the four wheel bones of the vehicle's skeletal mesh. With these blueprints in place, we can now implement the user controls for our vehicle so that the player can actually drive the vehicle in the game environment.</p></div>
<div class="section" title="Setting up user controls"><div class="titlepage" id="aid-26I9K2"><div><div><h1 class="title"><a id="ch07lvl1sec68"/>Setting up user controls</h1></div></div></div><p>When we use the <a id="id421" class="indexterm"/>
<span class="strong"><strong>Vehicle Game</strong></span> project example, there are default <span class="strong"><strong>User Inputs</strong></span> already in place that allows you to control the vehicle in the game, but we will take a look at the input settings so that we have a better understanding of what they are. To view the current input controls, let's navigate to <span class="strong"><strong>Project Settings</strong></span> by first left-clicking on the <span class="strong"><strong>Edit</strong></span> drop-down and selecting <span class="strong"><strong>Project Settings</strong></span>; be sure to either be in a blueprint or a level to gain access to <span class="strong"><strong>Edit</strong></span> options:</p><div class="mediaobject"><img src="../Images/image00344.jpeg" alt="Setting up user controls"/></div><p style="clear:both; height: 1em;"> </p><p>From <span class="strong"><strong>Project Settings</strong></span>, navigate to the <span class="strong"><strong>Input</strong></span> option in the <span class="strong"><strong>Engine</strong></span> section so that we gain access to <span class="strong"><strong>Action Mappings</strong></span> and <span class="strong"><strong>Axis Mappings</strong></span> for our controls. By default, we already have the <span class="strong"><strong>MoveForward</strong></span> mapping and the <span class="strong"><strong>MoveRight</strong></span> mapping in place that utilize a combination of keyboard keys and gamepad buttons; for our purposes, we will only need to use a few of these buttons. Let's expand the <span class="strong"><strong>Axis Mappings</strong></span> drop-down list and first view the <span class="strong"><strong>MoveForward</strong></span> option; we will see multiple buttons that are used to move our vehicle forward, such as the <span class="emphasis"><em>W</em></span>, <span class="emphasis"><em>S</em></span>, up, and down keys for example. We will remove all the options, except the <span class="emphasis"><em>W</em></span> and <span class="emphasis"><em>S</em></span> keys to ensure that we don't have any unnecessary key bindings for our controls; to do this, just click on the <span class="strong"><strong>X</strong></span> button located next to each option to remove it. We will also see a <span class="strong"><strong>Scale</strong></span> value next to each key binding: <code class="literal">1</code> and <code class="literal">-1</code>. This refers to the direction that the <span class="strong"><strong>MoveForward</strong></span> control will actually move the player or vehicle forward or backward; the same idea applies to the <span class="strong"><strong>MoveRight</strong></span> option as well. Let's expand the <span class="strong"><strong>MoveRight Axis</strong></span> mapping and remove all the key bindings, except the <span class="emphasis"><em>A</em></span> and <span class="emphasis"><em>D</em></span> keys.</p><p>The last thing we want to do here is evaluate <span class="strong"><strong>Handbrake Action Mapping</strong></span>. By default, we have multiple key <a id="id422" class="indexterm"/>bindings, but we want to remove all of them, except the <span class="strong"><strong>Space Bar</strong></span> option:</p><div class="mediaobject"><img src="../Images/image00345.jpeg" alt="Setting up user controls"/></div><p style="clear:both; height: 1em;"> </p><p>Before we move on, let's briefly discuss the differences between <span class="strong"><strong>Action Mappings</strong></span> and <span class="strong"><strong>Axis Mappings</strong></span>:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong>Action Mapping</strong></span>: These mappings are for key presses and releases, such as the pressing and releasing of <span class="emphasis"><em>spacebar</em></span></li><li class="listitem"><span class="strong"><strong>Axis Mapping</strong></span>: These mappings allow inputs that have a continuous range and direction</li></ul></div><p>Overall, <span class="strong"><strong>Action</strong></span> and <span class="strong"><strong>Axis Mappings</strong></span> provide a mechanism to easily map keys and axes to input behaviors by inserting a layer of indirection between an input behavior and the keys or the game pad buttons that initiate it.</p><p>The final step is for us to create a <span class="strong"><strong>Game Mode</strong></span> blueprint so that when we play in-editor, we are able to drive around in our vehicle. Let's navigate back to <span class="strong"><strong>Content Browser</strong></span> and to our <span class="strong"><strong>VehicleContent</strong></span> folder so that we can create the <span class="strong"><strong>Game Mode</strong></span> blueprint. Once in the <span class="strong"><strong>VehicleContent</strong></span> folder, let's right-click <code class="literal">o</code>n an area of the <span class="strong"><strong>Content</strong></span> folder that is empty, select the <span class="strong"><strong>Blueprint Class</strong></span> option. Then, from <span class="strong"><strong>Common Classes</strong></span>, select the <span class="strong"><strong>Game Mode</strong></span> option and name this new blueprint <code class="literal">BP_VehicleGameMode</code>. Now, double-click on this new blueprint, and under the <span class="strong"><strong>Details</strong></span> panel, we will find the section labeled as <span class="strong"><strong>Classes</strong></span>. We will change the <span class="strong"><strong>Default Pawn</strong></span> class from <code class="literal">DefaultPawn</code> to <code class="literal">BP_NewVehicle</code>. This ensures that when we play the game, by default, it will use our <span class="strong"><strong>BP_NewVehicle Pawn</strong></span> class.</p><p>The last thing we need to do is apply this new <span class="strong"><strong>BP_VehicleGameMode</strong></span> to our <span class="strong"><strong>Project Settings</strong></span> by navigating back to <span class="strong"><strong>Project Settings</strong></span>, and under the <span class="strong"><strong>Project</strong></span> section, we will find the <span class="strong"><strong>Maps &amp; Modes</strong></span> option. It's here that we can apply <span class="strong"><strong>BP_VehicleGameMode</strong></span> by expanding the <span class="strong"><strong>Default Modes</strong></span> section. Now, from the <span class="strong"><strong>Default Game Mode</strong></span> drop-down list, we can select the <code class="literal">BP_VehicleGameMode</code> option. For future reference, when we create levels, we can navigate to the <span class="strong"><strong>Settings</strong></span> option while in the main <span class="strong"><strong>Level Editor</strong></span> and select <span class="strong"><strong>World Settings</strong></span>. This <a id="id423" class="indexterm"/>allows you to view your <span class="strong"><strong>World Settings</strong></span> located next to the <span class="strong"><strong>Details</strong></span> panel on the right-hand side of the screen. In <span class="strong"><strong>World Settings</strong></span>, we will find the <span class="strong"><strong>Game Mode</strong></span> section. Here, we can see the <span class="strong"><strong>Game Mode Override</strong></span> parameter and select <span class="strong"><strong>BP_VehicleGameMode</strong></span>. With this in place, we can play the game and see our vehicle in action, but we will see that we are unable to move our vehicle when we press the <span class="emphasis"><em>W</em></span>, <span class="emphasis"><em>A</em></span>, <span class="emphasis"><em>S</em></span>, and <span class="emphasis"><em>D</em></span> keys.</p><div class="mediaobject"><img src="../Images/image00346.jpeg" alt="Setting up user controls"/></div><p style="clear:both; height: 1em;"> </p><p>We can now move on and add the input action events in our <span class="strong"><strong>BP_NewVehicle</strong></span> so that we are able to move around and control our vehicle.</p></div>
<div class="section" title="Setting up user controls &#x2013; a section review" id="aid-27GQ61"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec69"/>Setting up user controls – a section review</h1></div></div></div><p>In this section, we created the <a id="id424" class="indexterm"/>
<span class="strong"><strong>Axis Mappings</strong></span> so that the vehicle could gain the ability to move forward/backward and right/left. We also implemented the ability to use the handbrake with the <span class="strong"><strong>Action Mapping</strong></span> in <span class="strong"><strong>Project Settings</strong></span>. Lastly, we created a new <span class="strong"><strong>Game Mode</strong></span> blueprint and implemented the <span class="strong"><strong>Game Mode</strong></span> in the <span class="strong"><strong>Project</strong></span> and <span class="strong"><strong>World Settings</strong></span> of our level. With these in place, we can move on and add behaviors to our <span class="strong"><strong>BP_NewVehicle Event Graph</strong></span>. This allows you to control your vehicle.</p></div>
<div class="section" title="Scripting movement behaviors"><div class="titlepage" id="aid-28FAO2"><div><div><h1 class="title"><a id="ch07lvl1sec70"/>Scripting movement behaviors</h1></div></div></div><p>Before we can <a id="id425" class="indexterm"/>have our vehicle move through various player controls, we need to script the blueprint behaviors in <span class="strong"><strong>BP_NewVehicle Event Graph</strong></span> by taking advantage of the <span class="strong"><strong>VehicleMovement (Inherited) Component</strong></span> variable. To start with, let's navigate to <span class="strong"><strong>Content Browser</strong></span> and to our <span class="strong"><strong>VehicleContent</strong></span> folder so that we can double-click and open <span class="strong"><strong>BP_NewVehicle</strong></span>.</p><p>In an empty area of <span class="strong"><strong>Event Graph</strong></span>, let's right-click and use the context-sensitive drop-down menu to search for our <span class="strong"><strong>Input Axis MoveForward</strong></span> event node so that we can control the forward and backward throttle of our vehicle. Next, we need to grab a <span class="strong"><strong>Get</strong></span> variable of the <span class="strong"><strong>VehicleMovement (Inherited)</strong></span> component. To do this, we have to hold down the <span class="emphasis"><em>CTRL</em></span> key and then click and drag the <span class="strong"><strong>VehicleMovement</strong></span> component from the <span class="strong"><strong>Components</strong></span> tab onto our <span class="strong"><strong>Event Graph</strong></span>. Then, we can pull the <span class="strong"><strong>VehicleMovement</strong></span> variable and search for the <span class="strong"><strong>Set Throttle Input</strong></span> action node from the context-sensitive drop-down menu that appears. Finally, we can connect the main executable pin of <span class="strong"><strong>Input Axis MoveForward Event</strong></span> to the input executable pin of the <span class="strong"><strong>Set Throttle Input</strong></span> node, and we need to connect the <span class="strong"><strong>Axis Value</strong></span> float output of our event to the <span class="strong"><strong>Throttle</strong></span> float value input, as shown in the following screenshot:</p><div class="mediaobject"><img src="../Images/image00347.jpeg" alt="Scripting movement behaviors"/></div><p style="clear:both; height: 1em;"> </p><p>What this logic does is it uses <span class="strong"><strong>Axis Value</strong></span> for our <span class="strong"><strong>Input Axis MoveForward</strong></span> option, which will either be <code class="literal">1</code> or <code class="literal">-1</code> depending on the keys that are pressed, and applies this value to the <span class="strong"><strong>Throttle</strong></span> of our vehicle, which results in our vehicle moving forward or backward.</p><p>Next, let's set up the logic to steer our vehicle by right-clicking on an empty area of our <span class="strong"><strong>Event Graph</strong></span> and search for the <span class="strong"><strong>Input Axis MoveRight</strong></span> event. We will also need a copy of the <span class="strong"><strong>Vehicle Movement Component</strong></span> variable so that we can pull this copy and search for the <span class="strong"><strong>Set Steering </strong></span>
<a id="id426" class="indexterm"/>
<span class="strong"><strong>Input</strong></span> action node from the context sensitive drop-down menu. Connect the output executable pin of the <span class="strong"><strong>Input Axis MoveRight</strong></span> event node to the input executable pin of the <span class="strong"><strong>Set Steering Input</strong></span> node. Also, connect the <span class="strong"><strong>Axis Value Float</strong></span> output to the <span class="strong"><strong>Steering Float</strong></span> input, as shown in the following screenshot:</p><div class="mediaobject"><img src="../Images/image00348.jpeg" alt="Scripting movement behaviors"/></div><p style="clear:both; height: 1em;"> </p><p>Lastly, we need to set up the logic for the handbrake so that when the player presses and releases the <span class="emphasis"><em>spacebar</em></span>, the handbrake will react appropriately to the input. To begin with, let's right-click <code class="literal">o</code>n an empty area of <span class="strong"><strong>Event Graph</strong></span> and search for the <span class="strong"><strong>Input Action Handbrake</strong></span> event node. Next, we will need to create a copy of the <span class="strong"><strong>Vehicle Movement Component</strong></span> variable, and from this variable, we need to pull from it and search for the <span class="strong"><strong>Set Handbrake Input</strong></span> action node from the context-sensitive drop-down menu. We then need to check the <span class="strong"><strong>New Handbrake Boolean</strong></span> input variable of the <span class="strong"><strong>Set Handbrake Input</strong></span> node so that it uses the handbrake of our vehicle to come to a halt. Next, we need to create a copy of the <span class="strong"><strong>Vehicle Movement Component</strong></span> variable and the <span class="strong"><strong>Set Handbrake Input</strong></span> node, but for this copy, we want to make sure that the <span class="strong"><strong>New Handbrake Boolean</strong></span> input variable is unchecked. Lastly, we need to connect the <span class="strong"><strong>Pressed</strong></span> output executable pin of the <span class="strong"><strong>Input Action Handbrake</strong></span> node to the input executable pin of the <span class="strong"><strong>Set Handbrake Input</strong></span> node that has its <span class="strong"><strong>New Handbrake Boolean</strong></span> set to <code class="literal">True</code>. Then, connect the <span class="strong"><strong>Released</strong></span> output executable pin of the <span class="strong"><strong>Input Action Handbrake</strong></span> node to the input executable pin of <a id="id427" class="indexterm"/>the <span class="strong"><strong>Set Handbrake Input</strong></span> node that has its <span class="strong"><strong>New Handbrake</strong></span> set to <code class="literal">False</code>.</p><div class="mediaobject"><img src="../Images/image00349.jpeg" alt="Scripting movement behaviors"/></div><p style="clear:both; height: 1em;"> </p><p>With the logic in place in our <span class="strong"><strong>BP_NewVehicle Vehicle</strong></span> blueprint, we can compile and save the content and then navigate to the <span class="strong"><strong>DesertRallyRace</strong></span> level so that we can play in-editor and test our vehicle. Again, make sure that <span class="strong"><strong>World Settings</strong></span> has the <span class="strong"><strong>GameMode Override</strong></span> parameter set to our <span class="strong"><strong>BP_VehicleGameMode</strong></span> blueprint before the testing phase.</p><p>Now, when we play the game, we will be able to move our vehicle forward and backward with the <span class="emphasis"><em>W</em></span> and <span class="emphasis"><em>S</em></span> keys, steer the vehicle with the <span class="emphasis"><em>A</em></span> and <span class="emphasis"><em>D</em></span> keys, and use the handbrake with <span class="emphasis"><em>spacebar</em></span> to have our vehicle come to a halt. We will also see that the wheels spin when it moves either forward or backward, the front wheels turn in the direction we press, and the physics of our vehicle work as expected.</p></div>
<div class="section" title="Scripting movement behaviors &#x2013; a section review" id="aid-29DRA1"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec71"/>Scripting movement behaviors – a section review</h1></div></div></div><p>In this section, we <a id="id428" class="indexterm"/>worked on scripting the necessary behaviors of our vehicle so that when we play the game, we were able to move and steer our vehicle. First, we implemented <span class="strong"><strong>Set Throttle Input</strong></span> in conjunction with our <span class="strong"><strong>Input Axis MoveForward</strong></span> event node. Then, we used the <span class="strong"><strong>Set Steering Input</strong></span> node with our <span class="strong"><strong>Input Axis MoveRight</strong></span> event. Lastly, we associated the <span class="strong"><strong>Set Handbrake</strong></span> node functionality with the <a id="id429" class="indexterm"/>
<span class="strong"><strong>Input Action Handbrake</strong></span> event node. Now that we are able to drive our vehicle in the game, we can evaluate its behavior and test how it feels.</p></div>
<div class="section" title="Testing the vehicle" id="aid-2ACBS1"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec72"/>Testing the vehicle</h1></div></div></div><p>When we test our <a id="id430" class="indexterm"/>vehicle, we have to keep in mind the controls and the feel we are trying to create when we drive the vehicle. The behaviors of a vehicle will drastically differ depending on the type of gameplay we are going for, such as the drastic difference between the vehicles in Mario Kart as compared to the ones from the Forza series.</p><p>If tweaks or changes are necessary to obtain the desired behavior, the main aspect to view is the <span class="strong"><strong>VehicleMovement (Inherited)</strong></span> component in the <span class="strong"><strong>BP_NewVehicle</strong></span> blueprint, where it has various parameters in its <span class="strong"><strong>Details</strong></span> panel that we can change in order to change the behavior of the vehicle, such as <span class="strong"><strong>Differential Setup</strong></span> or <span class="strong"><strong>Transmission Setup</strong></span>. We can also use <span class="strong"><strong>VH_Buggy</strong></span> and the other default vehicle content that is provided by Epic Games when we use the <span class="strong"><strong>Vehicle Game Project</strong></span> example as a reference point to change the way our vehicle behaves.</p><p>Use the vehicle we have created in this chapter as a stepping stone to create a unique vehicle that behaves in different ways. Also, feel free to play around with the settings in the <span class="strong"><strong>Animation</strong></span>, <span class="strong"><strong>Wheel</strong></span>, and <span class="strong"><strong>Vehicle</strong></span> <span class="strong"><strong>Blueprints</strong></span> to see what we can create.</p></div>
<div class="section" title="Summary" id="aid-2BASE1"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec73"/>Summary</h1></div></div></div><p>In this chapter, we created our own working vehicle with the <span class="strong"><strong>Vehicle Game Project Example</strong></span> template step by step from scratch. In the process of doing so, we accomplished certain tasks.</p><p>First, we downloaded and created a project using the <span class="strong"><strong>Vehicle Game Project Example</strong></span> template so that we could have access to several resources and content available to create a basic vehicle and a template racing game. Then, we created our own <span class="strong"><strong>Physics Asset</strong></span> using <span class="strong"><strong>PhAT</strong></span> with the default buggy skeletal mesh as a base and implemented our own <span class="strong"><strong>Physics Bodies</strong></span> to the vehicle.</p><p>Next, we created all the necessary blueprints and data assets required in constructing a working vehicle for our game. To begin with, we created a <span class="strong"><strong>Wheel Vehicle Blueprint</strong></span> component that contained the <span class="strong"><strong>VehicleMovement (Inherited) Component</strong></span> class. Then, we created two different types of <span class="strong"><strong>Wheel Blueprints</strong></span> (one for the front wheels and another for the back wheels). Each has its own set of unique parameters. Lastly, we created the <span class="strong"><strong>Vehicle Animation Blueprint</strong></span> component required to obtain the proper motion of our wheels when we drive.</p><p>Additionally, we then edited each of these blueprints so that we could obtain the proper behavior for our vehicle. We also set up the user controls for our vehicle by editing <span class="strong"><strong>Input Action</strong></span> and <span class="strong"><strong>Axis Mappings</strong></span> so that the appropriate key bindings were set for our vehicle to move forward/backward in order to use the handbrake and steer left/right.</p><p>Then, we implemented the <span class="strong"><strong>Blueprint</strong></span> logic within our <span class="strong"><strong>BP_NewVehicle Wheeled Vehicle Blueprint</strong></span> by implementing the <span class="strong"><strong>Input Action</strong></span> and <span class="strong"><strong>Axis Mapping</strong></span> event nodes to the appropriate <span class="strong"><strong>Vehicle Movement</strong></span> actions such as setting the throttle value, and the steering input values.</p><p>Lastly, we set up our own <span class="strong"><strong>Game Mode Blueprint</strong></span> that utilizes our <span class="strong"><strong>BP_NewVehicle Pawn Blueprint</strong></span> class and implemented that <span class="strong"><strong>Game Mode</strong></span> into the <span class="strong"><strong>Project Settings</strong></span>, as well as to the <span class="strong"><strong>World Settings</strong></span> of our level. From there, we were able to play in-game and drive our vehicle around the level, and we posed the challenge of changing the parameters of our <span class="strong"><strong>BP_NewVehicle</strong></span> in order to obtain unique behaviors for our vehicle.</p><p>In the next chapter, we will be covering advanced physics topics and troubleshooting concepts like pragmatic physics.</p></div></body></html>