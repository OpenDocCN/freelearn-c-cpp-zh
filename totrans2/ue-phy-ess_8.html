<html><head></head><body><div><div><div><div><h1 class="title"><a id="ch08"/>Chapter 8. Advanced Topics</h1></div></div></div><p>Mixing multiple physical rules of an object and customizing physical properties is one of the new and powerful features in Unreal Engine 4. This allows designers and developers to apply physics on a larger scale. Things such as ocean water, sky, a grass field, and object destruction are examples of how to apply multiple physics for player interactions in the game world.</p><p>This chapter provides an example of various physics rules of a simple object.</p><div><div><div><div><h1 class="title"><a id="ch08lvl1sec74"/>Simulating complex physics – destruction</h1></div></div></div><p>If you <a id="id431" class="indexterm"/>want to destroy an object in the game into small pieces, you have to break it into small objects and save the model as a huge file that needs heavy processing by the machine to render, and it also takes time to make animation for each piece. Some designers have ignored this method by replacing objects with some particle system over the object position.</p><p>Today, Unreal Engine 4 not only solves this issue, but also provides features and properties to customize the destruction of an object. Depending on the artistic or reality-based features of the game, you can simulate the way the energy flows and destroys the object and control the physical aspects of the target at the same time. Each destruction is simply an interaction or collision between two objects. This displays special visual presentations during a specific period of time in the game world. In our example, we will simulate the bullet from the first person shooter map in UE4 over a simple cube. For this, first we need to define our bullet blueprint and then work on the cube object to display the destruction after the hit. Perform the following steps:</p><div><ol class="orderedlist arabic"><li class="listitem">First, open Unreal Editor by clicking on the <strong>Launch</strong> button from Unreal Engine launcher.</li><li class="listitem">Then, start a new project from <strong>Project</strong> browser by selecting the <strong>New Project</strong> tab. Now, select <strong>First Person</strong> and make sure that <strong>With Starter Content</strong> is selected and name the project <code class="literal">dest_test</code>.</li><li class="listitem">Now, open the <strong>FirstPersonBP</strong> folder and then in the <strong>Blueprints</strong> folder, double-click on <strong>FirstPersonProjectile</strong>. This opens the blueprint of your bullet. Check the titles of the box and the relations between each of them. This box simulates the default behavior of the bullets: hit the target and disappear and hit the wall and return at the opposite angle. These two have branches <a id="id432" class="indexterm"/>from the <strong>Other Comp</strong> output on the event box.<div><img src="img/image00350.jpeg" alt="Simulating complex physics – destruction"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">Disconnect <strong>Event Hit</strong> by pressing <em>Alt</em> + right-click on the outputs. Move it to an empty area on the blueprint screen and connect <strong>Cast To Destructible Actor</strong> to it. This means that the bullet will interact with the destroyable object. Click on the <strong>Cast Failed</strong> output and connect <strong>Destroy Actor</strong> to it. This means that if the bullet doesn't interact with any objects, it gets destroyed after a while.</li><li class="listitem">Click on the <strong>As Destructible Actor</strong> output and connect the <strong>Get Destructible</strong> component to it and then connect the <strong>Destructible Component</strong> output of this box to <strong>Apply Radius Damage</strong>. By changing the properties of this box, you can control the <a id="id433" class="indexterm"/>physical simulation of the destruction of an object.<div><h3 class="title"><a id="note03"/>Note</h3><p>To create a new box in <strong>Blueprint</strong>, it's better to click and hold the mouse on the output of the box and then drag the wire, leave the mouse, and in the opening menu, enter the new box name.</p></div></li><li class="listitem">Now, add more connections between your boxes, as shown in the following screenshot:<div><img src="img/image00351.jpeg" alt="Simulating complex physics – destruction"/></div><p style="clear:both; height: 1em;"> </p><p>As you can see in the preceding screenshot, the <strong>Hit Location</strong> output and the <strong>Hit Origin</strong> input are directly connected to each other. You can include more blueprint boxes between the <strong>Hit Location</strong> output and the <strong>Hit Origin</strong> input of your blueprint to support different scenarios. For example, imagine you want the player to shoot at an object in the sky and destroy another object located on the surface. For this scenario, there are a couple of ways to create a blueprint. This is not part of the physical rules and is mostly related to the controls and event handling in the blueprint. In our example, they are located at the same point, so the object gets destroyed by the bullet at the hit point.</p></li></ol><div></div><p>Now, let's create and <a id="id434" class="indexterm"/>customize the target by performing the following steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Go back to the editor and create a simple material with just the base color and one physical material in your material library. Then, drag and drop a cube from <strong>Basic</strong> in the <strong>Modes</strong> panel, right-click on it, and select <strong>Find</strong> in <strong>Content Browser</strong>. This will find the original object in the engine local library. Now, right-click on it in <strong>Content Browser</strong>. From the menu, select <strong>Create Destructible Mesh</strong>. This will create a new cube object with the properties to simulate destruction.<div><img src="img/image00352.jpeg" alt="Simulating complex physics – destruction"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">Drag an instance of this new cube onto the stage and apply your materials to this new object. Hit <a id="id435" class="indexterm"/><strong>Play</strong> at the top and shoot at the cube. You will find that your bullets get projected from the surface of the cube. Now, click on <strong>Stop</strong> and navigate back to editor. Open the blueprint for your <strong>First Person Projectile</strong>, locate the <strong>Apply Radius Damage</strong> box, and change <strong>Base Damage</strong> to <code class="literal">1000</code>, as shown in the following screenshot:<div><img src="img/image00353.jpeg" alt="Simulating complex physics – destruction"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">In editor, double-click on the <strong>Destructible Component</strong> section in the <strong>Details</strong> panel of your cube. A new window will open. Here, you can define the properties <a id="id436" class="indexterm"/>related to destruction. Change <strong>Support Depth</strong> to <code class="literal">1</code> and then <strong>Voronoi</strong> to <code class="literal">360</code> (if your system is not very powerful, change it to <code class="literal">120</code>). Now, click on <strong>Fracture Mesh</strong> located at the top. With this action, you will be able to apply your setting to the mesh; otherwise, it will not work.<div><img src="img/image00354.jpeg" alt="Simulating complex physics – destruction"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">Again, let's navigate back to editor, hit <strong>Play</strong>, and shoot just one bullet at the object. As you <a id="id437" class="indexterm"/>can see, the cube breaks into many small particles. Now, hit stop and double-click on <strong>Destructible Component</strong> again. This time, change <strong>Voronoi</strong> to <code class="literal">2</code>, click on <strong>Fracture Mesh</strong> at the top, and play the level again (shoot just one bullet at the object).<div><img src="img/image00355.jpeg" alt="Simulating complex physics – destruction"/></div><p style="clear:both; height: 1em;"> </p><p>As you can see in the preceding image, there is a big difference between the number of particles and the changes on <strong>Voronoi</strong>. This way, you can define the number of pieces for the object during the destruction period. Unreal Engine 4 automatically calculates the shape of pieces and renders them to the stage in real time based on physical rules. You can also import other meshes and apply the same.</p></li><li class="listitem">Change <a id="id438" class="indexterm"/><strong>Voronoi</strong> back to <code class="literal">360</code> and then <strong>Damage Threshold</strong> to <code class="literal">40</code>. Click on <strong>Fracture Mesh</strong> and play the level (shoot just one bullet at the object).<div><img src="img/image00356.jpeg" alt="Simulating complex physics – destruction"/></div><p style="clear:both; height: 1em;"> </p><p>As you can see, the object provides some resistance against your bullet. If you increase <strong>Damage Threshold</strong> to <code class="literal">120</code>, you need to shoot more than one bullet to destroy the object and particles. This is similar to a rifle bullet destruction of a heavy material similar to stone.</p></li><li class="listitem">Now, change <strong>Damage Threshold</strong> to <code class="literal">1</code> (the default value), click on <strong>Fracture Mesh</strong> and then switch back to the blueprint. We want to simulate the shotgun bullet's destructive power on the target. Change <strong>Impulse Strength</strong> to <code class="literal">600</code> and click on <strong>Compile</strong> at the top. Then, navigate back to editor and play <a id="id439" class="indexterm"/>the level by shooting one bullet at the object.<p>As you can see in the following screenshot, it breaks with much more energy. Also, the visual simulation of physics is different. Now, navigate back to blueprint, change it to <strong>6000</strong>, click on <strong>Compile</strong> at the top, and play the game again. Bang! This looks similar to a heavy shotgun hit from close distance, isn't it?</p><div><img src="img/image00357.jpeg" alt="Simulating complex physics – destruction"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">You can also involve physical material features in the object. This means that with multiple physical rules, you can work at the same location. Now, double-click on your physical material and change <strong>Friction</strong> to <code class="literal">-60</code> and <strong>Restitution</strong> to <code class="literal">0</code>. Then, play the game. You can see in the following screenshot that the object breaks into particles similar to ice cubes and spreads around the game stage. Such a cool effect can be combined by changing <strong>Restitution</strong> to <code class="literal">1.8</code>.<div><img src="img/image00358.jpeg" alt="Simulating complex physics – destruction"/></div><p style="clear:both; height: 1em;"> </p></li></ol><div></div><p>There are many ways to combine the physical aspect of your object and the bullet preferences with the destruction properties of the object. For example, you can tune your bullet energy by changing <strong>Impulse Strength</strong> over a period of time. Also, as you know, each material can be customized by its own blueprint. For example, imagine that you have a ghost in your game; when you destroy it, it breaks into many particles and parts, and each part looks like rainwater. To create this scenario, try to apply some dynamic or random changes, such as waving, to your material and compare the results.</p><p>Sometimes, when you <a id="id440" class="indexterm"/>use a couple of physical customizations on an object, they tend to overlap with each other or remove each other's effect. To avoid such problems, it's good practice to understand the physical rules related to the instigator of the event (the bullet in the previous example) and then the physical rules of the target.</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch08lvl1sec75"/>Summary</h1></div></div></div><p>A simulation of mass change or a series of changes is a kind of art in the game world. A sufficient blueprint by developers can synchronize the physics behind the scenes. The presentation and quality of the simulation is based on the artist's efforts and madness.</p><p>Based on what you learned in this chapter, imagine that you (as a developer) try to put 50 objects on the stage. When you shoot at one, all get destroyed within a delay of a second. Also, you (as an artist) should design how and in which way the objects get destroyed and probably ask developers to make life easier with some blueprints. This great mix of developers and artists in the game design is one of the powerful aspects of Unreal Engine 4.</p></div></body></html>