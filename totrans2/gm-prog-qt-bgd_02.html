<html><head></head><body><div><div><div><div><h1 class="title"><a id="ch02"/>Chapter 2. Installation</h1></div></div></div><div><blockquote class="blockquote"><p><em>In this chapter, you will learn how to install Qt on your development machine, including Qt Creator, an IDE tailored to use with Qt. You will see how to configure the IDE for your needs and learn the basic skills to use that environment. In addition to this, the chapter will describe the process of building Qt from the source code, which can be useful for customizing your Qt installation as well as getting a working Qt installation for embedded platforms. By the end of this chapter, you will be able to prepare your working environment for both desktop and embedded platforms using tools included in the Qt release.</em></p></blockquote></div><div><div><div><div><h1 class="title"><a id="ch02lvl1sec15"/>Installing the Qt SDK</h1></div></div></div><p>Before you can <a id="id30" class="indexterm"/>start using Qt on your machine, it needs to be downloaded and installed. Qt can be installed using dedicated installers that come in two flavors—the online installer, which downloads all the needed components on the fly, and a much larger offline installer, which already contains all the required components. Using an online installer is easier for regular desktop installs, so we will prefer this approach.</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch02lvl1sec16"/>Time for action – installing Qt using an online installer</h1></div></div></div><p>First, go to <a class="ulink" href="http://qt.io">http://qt.io</a> and click on <strong>Download</strong>. This should bring you to a page containing <a id="id31" class="indexterm"/>a list of options for different licensing schemes. To use the <a id="id32" class="indexterm"/>open source version, <a id="id33" class="indexterm"/>choose the Open Source edition licensed under GPL and LGPL. Then, you can click on the <strong>Download Now</strong> button to retrieve the online installer for the platform that you are currently running on or you can click on any of the header sections to reach a more comprehensive list of options. The links to online installers are at the beginning of the list, as shown in the following screenshot. Click and download the one suited to your host machine:</p><div><img src="img/8874OS_02_01.jpg" alt="Time for action – installing Qt using an online installer"/></div><p>When <a id="id34" class="indexterm"/>the download completes, run the installer, as <a id="id35" class="indexterm"/>shown:</p><div><img src="img/8874OS_02_02.jpg" alt="Time for action – installing Qt using an online installer"/></div><p>Click on <a id="id36" class="indexterm"/>
<strong>Next</strong> and after a while of waiting as the downloader checks remote repositories, you'll be asked for the installation path. Be sure to choose a <a id="id37" class="indexterm"/>path where you have write access (it's best to put Qt into your personal directory unless you ran the installer as the system administrator user). Clicking on <strong>Next</strong> again will present you with choices of components that you wish to install, as shown in the following screenshot. You will be given different choices depending on your platform.</p><div><img src="img/8874OS_02_03.jpg" alt="Time for action – installing Qt using an online installer"/></div><p>Choose whichever platforms you need, for example, to build native and Android applications on Linux, choose both gcc-based installation and one for the desired Android platform. When on Windows, you have to make additional choices. When using Microsoft compilers, you can choose whether to use native OpenGL drivers (the versions with the <code class="literal">OpenGL</code> suffix) or to emulate OpenGL ES using DirectX calls. If you don't have a Microsoft compiler or you simply don't want to use it, choose the version of Qt for the MinGW compiler. If you don't have a MinGW installation, don't worry—the installer will also install it for you.</p><p>After <a id="id38" class="indexterm"/>choosing the needed components and clicking on <strong>Next</strong> <a id="id39" class="indexterm"/>again, you will have to accept the licensing terms for Qt by marking an appropriate choice, as shown in the following screenshot. After clicking on <strong>Install</strong>, the installer will begin downloading and installing the required packages. Once this is done, your Qt installation will be ready. At the end of the process, you will be given an option to launch Qt Creator.</p><div><img src="img/8874OS_02_05.jpg" alt="Time for action – installing Qt using an online installer"/></div><div><div><div><div><h2 class="title"><a id="ch02lvl2sec20"/>
<em>What just happened?</em>
</h2></div></div></div><p>The process we went through results in the whole Qt infrastructure appearing on your disk. You <a id="id40" class="indexterm"/>can examine the directory you pointed to the installer to see that it created a number of subdirectories in this directory—one for each version of <a id="id41" class="indexterm"/>Qt chosen with the installer and another one called <code class="literal">Tools</code> that contains Qt Creator. You can see that if you ever decide to install another version of Qt, it will not conflict with your existing installation. Furthermore, for each version, you can have a number of platform subdirectories that contain the actual Qt installations for particular platforms.</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch02lvl1sec17"/>Setting up Qt Creator</h1></div></div></div><p>After Qt <a id="id42" class="indexterm"/>Creator starts, you should be presented with the following screen:</p><div><img src="img/8874OS_02_07.jpg" alt="Setting up Qt Creator"/></div><p>The program should already be configured properly for you to use the version of Qt and compiler that were just installed, but let's verify that anyway. From the <strong>Tools</strong> menu, choose <strong>Options</strong>. Once a dialog box pops up, choose <strong>Build &amp; Run</strong> from the side list. This is the place where we can configure the way Qt Creator builds our project. A complete build configuration is called a <strong>kit</strong>. It consists of a Qt installation and a compiler that will be executed to perform the build. You can see tabs for all the three entities in the <strong>Build &amp; Run</strong> section of the <strong>Options</strong> dialog box.</p><p>Let's start with the <a id="id43" class="indexterm"/>
<strong>Compilers</strong> tab. If your compiler was not autodetected properly and is not in the list, click on the <strong>Add</strong> button, choose your compiler type from the list, and fill the name and path to the compiler. If the settings were entered correctly, Creator will autofill all the other details. Then, you can click on <strong>Apply</strong> to save the changes.</p><p>Next, you can switch to the <strong>Qt Versions</strong> tab. Again, if your Qt installation was not detected automatically, you can click on <strong>Add</strong>. This will open a file dialog box where you will need to find your Qt installation's directory wherein all the binary executables are stored (usually in the <code class="literal">bin</code> directory) and select a binary called <code class="literal">qmake</code>. Qt Creator will warn you if you choose a wrong file. Otherwise, your Qt installation and version should be detected properly. If you want, you can adjust the version name in the appropriate box.</p><p>The last tab to look at is the <strong>Kits</strong> tab. It allows you to pair a compiler with the Qt version to be used for <a id="id44" class="indexterm"/>compilation. In addition to this, for embedded and mobile platforms, you can specify a device to deploy to and a <code class="literal">sysroot</code> directory containing all the files needed to build the software for the specified embedded platform.</p></div>
<div><div><div><div><h1 class="title"><a id="ch02lvl1sec18"/>Time for action – loading an example project</h1></div></div></div><p>Qt comes <a id="id45" class="indexterm"/>with a lot of examples. Let's try building one to check whether the installation and configuration were done correctly. In Qt Creator, click on the <strong>Welcome</strong> button on the top-left corner of the window to go the initial screen of the IDE. On the right-hand side of the page that appears (refer to the previous screenshot) there are a couple of tabs among which one of them happens to be called <strong>Examples</strong>. Clicking on that tab will open a list of examples with a search box. Make sure that the version of Qt you just installed is chosen in the list next to the search box. In the box, enter <code class="literal">aff</code> to filter the list of examples and click on <strong>Affine Transformations</strong> to open the project. If you are asked whether you want to copy the project to a new folder, agree. Qt Creator will then present you with the following window:</p><div><img src="img/8874OS_02_08.jpg" alt="Time for action – loading an example project"/></div><div><div><div><div><h2 class="title"><a id="ch02lvl2sec21"/>
<em>What just happened?</em>
</h2></div></div></div><p>Qt Creator loaded the project and set a view that will help us to learn from example projects. The view is divided into four parts. Let's enumerate them starting from the left side. First there is Qt Creator's working mode <a id="id46" class="indexterm"/>selector that contains an action bar, which allows us to toggle between different modes of the IDE. Then, there is the project view that contains a list of files for the project. Next comes the source code editor, displaying the main part of the project's source code. Finally, far to the right, you can see the online help window displaying the documentation for the opened example.</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch02lvl1sec19"/>Time for action – running the Affine Transformations project</h1></div></div></div><p>Let's try <a id="id47" class="indexterm"/>building and running the project to check whether the building environment is configured properly. First, click on the <a id="id48" class="indexterm"/>icon in the action bar directly over the green triangle icon to open the build configuration popup, as shown in the following screenshot:</p><div><img src="img/8874OS_02_09.jpg" alt="Time for action – running the Affine Transformations project"/></div><p>The exact content that you get may vary depending on your installation, but in general, on the left-hand side you will see the list of kits configured for the project and on the right-hand side you will see the list of build configurations defined for that kit. Choose a kit for your desktop installation and any of the configurations defined for that kit. You can adjust configurations by switching Qt Creator to the project management mode by clicking on the <strong>Projects</strong> button in the working mode selector bar. There, you can add and remove kits from the project and manage build configurations for each of the kits, as shown in the following screenshot:</p><div><img src="img/8874OS_02_10.jpg" alt="Time for action – running the Affine Transformations project"/></div><p>You can adjust, build, and clean steps, and toggle shadow building (that is, building your project outside the source code directory tree).</p><p>To build the <a id="id49" class="indexterm"/>project, click on the hammer icon at the bottom of the action bar. You can also click on the green triangle icon to <a id="id50" class="indexterm"/>build and run the project. If everything works, after some time, the application should be launched, as shown in the next screenshot:</p><div><img src="img/8874OS_02_11.jpg" alt="Time for action – running the Affine Transformations project"/></div><div><div><div><div><h2 class="title"><a id="ch02lvl2sec22"/>
<em>What just happened?</em>
</h2></div></div></div><p>How exactly was the project built? If you open the <strong>Projects</strong> mode and look at <strong>Build Settings</strong> for a kit assigned to the project (as seen in one of the previous screenshots), you will notice that a number of build steps were defined. The first step for Qt projects is usually the <code class="literal">qmake</code> step, which runs a special tool that generates a <code class="literal">Makefile</code> for the project that is fed in the second step to a classic <code class="literal">make</code> tool. You can expand each of the steps by clicking on the respective <strong>Details</strong> button to see configuration options for each of the steps.</p><p>While <code class="literal">make</code> is considered as a standard tool for building software projects, <code class="literal">qmake</code> is a custom tool provided with Qt. If you go back to the <strong>Edit</strong> mode and see which files are listed in the project contents, you will notice a file with a <code class="literal">pro</code> extension. This is the main project file that contains a list of source and headers files in the project, definitions of Qt modules <a id="id51" class="indexterm"/>active for the project, and optionally, external libraries that the project needs to link against. If you want to learn the details of how such project files are managed, you can switch to the <strong>Help</strong> mode, choose <a id="id52" class="indexterm"/>
<strong>Index</strong> from the drop-down list on the top of the window, and type <code class="literal">qmake Manual</code> to find the manual for the tool. Otherwise, just let Qt Creator manage your project for you. For self-contained Qt projects, you don't need to be a qmake expert.</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch02lvl1sec20"/>Building Qt from sources</h1></div></div></div><p>In most <a id="id53" class="indexterm"/>cases for desktop and mobile platforms, the binary release of Qt you download from the webpage is sufficient for all your needs. However, for embedded systems, especially for those ARM-based systems, there is no binary release available or it is too heavy resource-wise for such a lightweight system. In such cases, a custom Qt build needs to be performed. There are two ways to do such a build. One is to download the sources as a compressed archive just like the binary package. The other is to download the code directly from a Git repository. Since the first way is pretty much self-explanatory, we'll focus on the second approach.</p></div>
<div><div><div><div><h1 class="title"><a id="ch02lvl1sec21"/>Time for action – setting up Qt sources using Git</h1></div></div></div><p>First, you <a id="id54" class="indexterm"/>need to install Git on your system if you don't <a id="id55" class="indexterm"/>already have it. How to do that depends on your operating system. For Windows, simply download an installer from <a class="ulink" href="https://git-for-windows.github.io">https://git-for-windows.github.io</a>. For Mac, the installer is available at <a class="ulink" href="http://code.google.com/p/git-osx-installer">http://code.google.com/p/git-osx-installer</a>. For Linux, the simplest way is to use your system's <a id="id56" class="indexterm"/>package manager. For instance, on Debian-based distributions, just issue the <code class="literal">sudo apt-get install git</code> command on a terminal and wait until the installation gets completed.</p><p>Afterwards, you need to clone Qt's Git repository. Since Git is a command-line tool, we'll be using the command line from now on. To clone Qt's repository to a directory where you want to keep the sources, issue the following command:</p><div><pre class="programlisting">
<strong>git clone git://code.qt.io/qt/qt5.git</strong>
</pre></div><p>If all goes well, Git will download a lot of source code from the network and create a <code class="literal">qt5</code> directory, containing all the files that were downloaded. Then, change the current working directory to the one containing the freshly downloaded code:</p><div><pre class="programlisting">
<strong>cd qt5</strong>
</pre></div><p>Then you need to <a id="id57" class="indexterm"/>run a Perl script that will set up all the additional repositories for you. If you don't have Perl installed, you should do that now (you can get Perl for Windows from <a class="ulink" href="http://www.activestate.com/activeperl/downloads">http://www.activestate.com/activeperl/downloads</a>). Then, issue the following command:</p><div><pre class="programlisting">
<strong>perl init-repository</strong>
</pre></div><p>The script will <a id="id58" class="indexterm"/>start downloading all the modules required for <a id="id59" class="indexterm"/>Qt and should complete successfully after a period dependent on your network link speed.</p><div><div><div><div><h2 class="title"><a id="ch02lvl2sec23"/>
<em>What just happened?</em>
</h2></div></div></div><p>At this point in the <code class="literal">qt5</code> directory, you have a number of subdirectories for different Qt modules (some of them were mentioned in <a class="link" href="ch01.html" title="Chapter 1. Introduction to Qt">Chapter 1</a>, <em>Introduction to Qt</em>) each with a local Git repository containing the source code for the respective Qt modules and tools. Each of the modules can be updated separately if required.</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch02lvl1sec22"/>Time for action – configuring and building Qt</h1></div></div></div><p>Having the <a id="id60" class="indexterm"/>sources in place, we can start building the framework. To do that, in <a id="id61" class="indexterm"/>addition to a supported compiler, you will need Perl and Python (Version 2.7 or later) installed. For Windows, you will also need Ruby. If you are missing any of the tools, it's a good time to install them. Afterwards, open the command line and change the current working directory to the one containing the Qt source code. Then, issue the following command:</p><div><pre class="programlisting">
<strong>configure -opensource -nomake tests</strong>
</pre></div><p>This will launch a tool that detects whether all the requirements are met and will report any inconsistencies. It will also report the exact configuration of the build. You can customize the build (for example, if you need to enable or disable some features or cross-compile Qt for an embedded platform) by passing additional options to <code class="literal">configure</code>. You can see the available options by running <code class="literal">configure</code> with the <code class="literal">-help</code> switch.</p><p>If <code class="literal">configure</code> reports problems, you will have to fix them and restart the tool. Otherwise, start the build process by invoking <code class="literal">make</code> (or an equivalent like <code class="literal">mingw32-make</code> if using MinGW or <code class="literal">nmake</code> if using MSVC).</p><div><div><h3 class="title"><a id="tip05"/>Tip</h3><p>Instead of <a id="id62" class="indexterm"/>
<code class="literal">nmake</code>, you can use a tool called <code class="literal">jom</code> that is bundled with <a id="id63" class="indexterm"/>Qt. It will reduce the compilation time on multicore machines, which is what the default <code class="literal">nmake</code> tool can't do. For <code class="literal">make</code> and <code class="literal">mingw32-make</code>, you can pass the <code class="literal">-j N</code> parameter, where <code class="literal">N</code> stands for the number of cores in your machine.</p></div></div><div><div><div><div><h2 class="title"><a id="ch02lvl2sec24"/>
<em>What just happened?</em>
</h2></div></div></div><p>After some time (usually less than an hour), if all goes well, the build should be complete and you will be ready to add the compiled framework to the list of kits available in Qt Creator.</p><div><div><h3 class="title"><a id="tip06"/>Tip</h3><p>In Unix systems after the build gets completed, you can invoke a <code class="literal">make</code> install command with super-user privileges (obtained for example, with <code class="literal">sudo</code>) to copy the framework to a more appropriate place.</p></div></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch02lvl1sec23"/>Summary</h1></div></div></div><p>By now, you should be able to install Qt on your development machine. You can now use Qt Creator to browse the existing examples and learn from them or to read the Qt reference manual to gain additional knowledge. You can also just start a new C++ project and start writing code for it, build, and execute it. Once you become an experienced Qt developer, you will also be able to make your own custom build of Qt. In the next chapter, we will finally start using the framework and you will learn how to create graphical user interfaces by implementing our very first simple game.</p></div></body></html>