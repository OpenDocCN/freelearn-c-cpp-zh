<html><head></head><body><div class="chapter" title="Chapter&#xA0;1.&#xA0;Getting Started"><div class="titlepage"><div><div><h1 class="title"><a id="ch01"/>Chapter 1. Getting Started</h1></div></div></div><p>In this chapter we will cover:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Creating a project for a basic application</li><li class="listitem" style="list-style-type: disc">Creating a project for a screensaver application</li><li class="listitem" style="list-style-type: disc">Creating a project for an iOS touch application</li><li class="listitem" style="list-style-type: disc">Understanding the basic structure of an application</li><li class="listitem" style="list-style-type: disc">Responding to mouse input</li><li class="listitem" style="list-style-type: disc">Responding to key input</li><li class="listitem" style="list-style-type: disc">Responding to touch input</li><li class="listitem" style="list-style-type: disc">Accessing the files dropped onto the application window</li><li class="listitem" style="list-style-type: disc">Adjusting a scene after resizing the window</li><li class="listitem" style="list-style-type: disc">Using resources on Windows</li><li class="listitem" style="list-style-type: disc">Using resources on OSX and iOS</li><li class="listitem" style="list-style-type: disc">Using assets</li></ul></div><div class="section" title="Introduction"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec08"/>Introduction</h1></div></div></div><p>In this chapter we'll learn the fundamentals of creating applications using Cinder.<a id="id0" class="indexterm"/></p><p>We'll start by creating different types of applications on the different platforms that Cinder supports using a powerful tool called TinderBox<a id="id1" class="indexterm"/>.</p><p>We'll cover the basic structure of an application and see how to respond to user input events.</p><p>Finally, we will learn how to use resources on Windows and Mac.</p></div></div>
<div class="section" title="Creating a project for a basic application"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec09"/>Creating a project for a basic application</h1></div></div></div><p>In this recipe, we'll learn how to create a project for a basic desktop application for Windows and Mac OSX.<a id="id2" class="indexterm"/></p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec07"/>Getting ready</h2></div></div></div><p>Projects can be created using a<a id="id3" class="indexterm"/> powerful tool called TinderBox. TinderBox comes bundled in your Cinder download and contains templates for creating projects for different applications for both Microsoft Visual C++ 2010 and OSX Xcode.</p><p>To find Tinderbox, go to your Cinder folder, inside which you will find a folder named <code class="literal">tools</code> with, TinderBox application in it.</p><div class="mediaobject"><img src="graphics/8703OS_1_1.jpg" alt="Getting ready"/></div><p>The first time you open TinderBox, you'll be asked to specify the folder where you installed Cinder. You'll need to do this only the first time you open TinderBox. If you need to redefine the location of Cinder installation, you can do so by selecting the <span class="strong"><strong>File</strong></span> menu and then <span class="strong"><strong>Preferences</strong></span> on Windows or selecting the <span class="strong"><strong>TinderBox</strong></span> menu and then <span class="strong"><strong>Preferences</strong></span> on OS X.</p></div><div class="section" title="How to do it…"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec08"/>How to do it…</h2></div></div></div><p>We'll use TinderBox, a utility tool that comes bundled with Cinder that allows for the easy creation of projects. Perform <a id="id4" class="indexterm"/>the following steps to create a project for a basic application:<a id="id5" class="indexterm"/></p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Open TinderBox and choose your project's location. In the main <span class="strong"><strong>TinderBox</strong></span> window select <span class="strong"><strong>BasicApp</strong></span> as <span class="strong"><strong>Target</strong></span> and <span class="strong"><strong>OpenGL</strong></span> as <span class="strong"><strong>Template</strong></span>, as shown in the following screenshot:<div class="mediaobject"><img src="graphics/8703OS_1_2.jpg" alt="How to do it…"/></div></li><li class="listitem">Choose your project's location. The <span class="strong"><strong>Naming Prefix</strong></span> and <span class="strong"><strong>Project Name</strong></span> fields will default to the project's name, as shown in the following screenshot:<div class="mediaobject"><img src="graphics/8703OS_1_3.jpg" alt="How to do it…"/></div></li><li class="listitem">Select the compilers you want to use for your project, either Microsoft Visual C++ 2010 and/or OS X Xcode.<div class="mediaobject"><img src="graphics/8703OS_1_4.jpg" alt="How to do it…"/></div></li><li class="listitem">Click on the <span class="strong"><strong>Create</strong></span> button <a id="id6" class="indexterm"/>and TinderBox will show you the folder where your new project is located. TinderBox will remain open; you can close it now.</li></ol></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec09"/>How it works...</h2></div></div></div><p>TinderBox will create the selected projects for the chosen platforms (Visual C++ 2010 and OS X Xcode) and create <a id="id7" class="indexterm"/>references to the compiled Cinder library. It will also create the application's class as a subclass of <code class="literal">ci::app::AppBasic</code>. It will also create some sample code with a basic example to help you get started.</p></div><div class="section" title="There's more..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec10"/>There's more...</h2></div></div></div><p>Your project name and naming prefix will be, by default, the name of the folder in which the project is being created. You can edit this if you want, but always make sure both <span class="strong"><strong>Project Name</strong></span> and <span class="strong"><strong>Naming Prefix</strong></span> fields do not have spaces as you might get errors.</p><p>The naming prefix will be used to name your application's class by adding the <code class="literal">App</code> suffix. For example, if you set your <span class="strong"><strong>Naming Prefix</strong></span> field as <code class="literal">MyCinderTest</code>, your application's class will be <code class="literal">MyCinderTestApp</code>.</p></div></div>
<div class="section" title="Creating a project for a screensaver application"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec10"/>Creating a project for a screensaver application</h1></div></div></div><p>In this recipe, we will learn <a id="id8" class="indexterm"/>how to create a project for a desktop screensaver for both <a id="id9" class="indexterm"/>Windows and Mac OS X.</p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec11"/>Getting ready</h2></div></div></div><p>To get ready with TinderBox, please refer to the <span class="emphasis"><em>Getting ready</em></span> section of the previous <span class="emphasis"><em>Creating a project for a basic application</em></span> recipe.</p></div><div class="section" title="How to do it…"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec12"/>How to do it…</h2></div></div></div><p>We'll use TinderBox, a utility tool that comes bundled with Cinder that allows easy creation of projects. <a id="id10" class="indexterm"/>Perform the following steps to create a project for a screensaver application:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Open TinderBox and choose your project's location. In the main <span class="strong"><strong>TinderBox</strong></span> window select <span class="strong"><strong>Screensaver</strong></span> as <span class="strong"><strong>Target</strong></span> and <span class="strong"><strong>OpenGL</strong></span> as <span class="strong"><strong>Template</strong></span>, as shown in the following screenshot:<div class="mediaobject"><img src="graphics/8703OS_1_5.jpg" alt="How to do it…"/></div></li><li class="listitem">Select the compilers you<a id="id11" class="indexterm"/> want to create a project to, either Microsoft Visual C++ 2010 and/or OS X Xcode.</li><li class="listitem">Click on <span class="strong"><strong>Create</strong></span> and TinderBox will direct you to the folder where your project was created.</li></ol></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec13"/>How it works...</h2></div></div></div><p>TinderBox will create both a project for you and link it against the compiled Cinder library. It will also create the application's class and make it a subclass of <code class="literal">ci::app::AppScreenSaver</code>, which is the class with all the basic functionality for a screensaver application. It will also create some sample code with a basic example to help you get started.</p></div></div>
<div class="section" title="Creating a project for an iOS touch application"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec11"/>Creating a project for an iOS touch application</h1></div></div></div><p>In this recipe, we'll learn how to <a id="id12" class="indexterm"/>create a project for an application that<a id="id13" class="indexterm"/> runs on iOS devices such as iPhone and iPad.</p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec14"/>Getting ready</h2></div></div></div><p>To get ready with TinderBox, please refer to the <span class="emphasis"><em>Getting ready</em></span> section of the <span class="emphasis"><em>Creating a project for a basic application</em></span> recipe.</p><p>Please note that the iOS touch application will only work on iOS devices such as iPhones and iPads, and that the projects created with TinderBox will be for OSX Xcode only.</p></div><div class="section" title="How to do it…"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec15"/>How to do it…</h2></div></div></div><p>We'll use TinderBox, a utility tool that comes bundled with Cinder that allows easy creation of projects. Perform the following steps to create a project for an iOS touch application:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Open TinderBox and choose your project's location. In the main <span class="strong"><strong>TinderBox</strong></span> window select <span class="strong"><strong>Cocoa Touch</strong></span> as <span class="strong"><strong>Target</strong></span> and <span class="strong"><strong>Simple</strong></span> as <span class="strong"><strong>Template</strong></span>, as shown in the following screenshot:<div class="mediaobject"><img src="graphics/8703OS_1_6.jpg" alt="How to do it…"/></div></li><li class="listitem">Select the compilers you want <a id="id14" class="indexterm"/>to create a project to, either Microsoft Visual C++ 2010 and/or OS X Xcode.</li><li class="listitem">Click on <span class="strong"><strong>Create</strong></span> and TinderBox will direct you to the folder where your project was created.</li></ol></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec16"/>How it works...</h2></div></div></div><p>TinderBox will create an OS X Xcode project and create the references to link against the compiled Cinder library. It will also create the application's class as a subclass of <code class="literal">ci::app::AppCocoaTouch</code>, which is the class with all the basic functionality for a screensaver application. It will also create some sample code with a basic example to help you get started.<a id="id15" class="indexterm"/></p><p>This application is built on top of Apple's Cocoa Touch framework to create iOS applications.</p></div></div>
<div class="section" title="Understanding the basic structure of an application"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec12"/>Understanding the basic structure of an application</h1></div></div></div><p>Your application's class can have <a id="id16" class="indexterm"/>several methods that will be called at different points during the execution of the program. The following table lists these methods:</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Method</p>
</th><th style="text-align: left" valign="bottom">
<p>Usage</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p><code class="literal">prepareSettings</code>
<a id="id17" class="indexterm"/></p>
</td><td style="text-align: left" valign="top">
<p>This method is called once at the very beginning of the application, before creating the renderer. Here, we may define several parameters of the application before the application gets initialized, such as the frame rate or the size of the window. If none are specified, the application <a id="id18" class="indexterm"/>will initialize with default values.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p><code class="literal">setup</code>
<a id="id19" class="indexterm"/></p>
</td><td style="text-align: left" valign="top">
<p>This method is called once at the beginning of the application lifecycle. Here, you initialize all members and prepare the application for running.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p><code class="literal">update</code>
<a id="id20" class="indexterm"/></p>
</td><td style="text-align: left" valign="top">
<p>This method is called in a loop during the application's runtime before the <code class="literal">draw</code> method. It is used to animate and update the states of the application's components. Even though you may update them during the <code class="literal">draw</code> method, it is recommended you keep the update and drawing routines separate as a matter of organization.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p><code class="literal">draw</code>
<a id="id21" class="indexterm"/></p>
</td><td style="text-align: left" valign="top">
<p>This method is called in a loop during the application's runtime after the update. All drawing code should be placed here.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p><code class="literal">shutdown</code>
<a id="id22" class="indexterm"/></p>
</td><td style="text-align: left" valign="top">
<p>This method is called just before the application exits. Use it to do any necessary cleanup such as freeing memory and allocated resources or shutting down hardware devices.</p>
</td></tr></tbody></table></div><p>To execute our code, we must overwrite these methods with our own code.</p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec17"/>Getting ready</h2></div></div></div><p>It is not mandatory to override all of the preceding methods; you can use the ones that your application requires specifically. For example, if you do not want to do any drawing, you may omit the <code class="literal">draw</code> method.</p><p>In this recipe and for the sake of learning, we will implement all of them.</p><p>Declare the following methods in your class declaration:</p><div class="informalexample"><pre class="programlisting">Void prepareSettings( Settings *settings );
Void setup();
Void update();
Void draw();
Void shutdown();</pre></div></div><div class="section" title="How to do it…"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec18"/>How to do it…</h2></div></div></div><p>We will implement several methods <a id="id23" class="indexterm"/>that make up the basic structure of an application. <a id="id24" class="indexterm"/>Perform the following steps to do so:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Implement the<a id="id25" class="indexterm"/> <code class="literal">prepareSettings</code> method. Here we can define, for example, the size of the window, its title, and the frame rate:<div class="informalexample"><pre class="programlisting">void MyApp::prepareSettings( Settings *settings ){
  settings-&gt;setSize( 1024, 768 );
  settings-&gt;setTitle( "My Application Window" );
  settings-&gt;setFrameRate( 60 );
}</pre></div></li><li class="listitem">Implement the <code class="literal">setup</code> method. Here we should initialize all members of the application's class. For example, to initialize capturing from a webcam we would declare the following members:<div class="informalexample"><pre class="programlisting">int mCamWidth;
int mCamHeight;
Capture mCapture;
And initialize them in the setup
void Myapp::setup(){
  mCamWidth = 640;
  mCamHeight = 480;
  mCapture = Capture( mCamWidth, mCamHeight );
}</pre></div></li><li class="listitem">Implement the <code class="literal">update</code> method.<a id="id26" class="indexterm"/> As an example, we will print the current frame count to the console:<div class="informalexample"><pre class="programlisting">void MyApp::update(){
  console() &lt; &lt; geElapsedFrames() &lt; &lt; std::endl;
}</pre></div></li><li class="listitem">Implement the <code class="literal">draw</code> method with all the drawing commands. Here we clear the background with black and draw a red circle:<div class="informalexample"><pre class="programlisting">void MyApp::draw(){
  gl::clear( Color::black() );
  gl::color( Color( 1.0f, 0.0f, 0.0f ) );
  gl::drawSolidCircle( Vec2f( 300.0f, 300.0f ), 100.0f  );
}</pre></div></li><li class="listitem">Implement the <code class="literal">shutdown</code> method<a id="id27" class="indexterm"/>. This method should take code for doing cleanup, for example, to shut<a id="id28" class="indexterm"/> down threads or save the state of your application.</li><li class="listitem">Here's a sample code for saving some parameters in an XML format:<div class="informalexample"><pre class="programlisting">void MyApp::shutdown(){
  XmlTree doc = XmlTree::createDoc();
  XmlTree settings = xmlTree( "Settings", "" );
  //add some attributes to the settings node
  doc.push_back( settings );
  doc.write( writeFile( "Settings.xml" ) );
}</pre></div></li></ol></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec19"/>How it works...</h2></div></div></div><p>Our application's superclass implements the preceding methods as virtual empty methods.</p><p>When the application runs, these methods are called, calling our own code we implemented or the parent class' empty<a id="id29" class="indexterm"/> method if we didn't.</p><p>In step 1 we defined several application parameters in the<a id="id30" class="indexterm"/> <code class="literal">prepareSettings</code> method. It is not recommended to use the <code class="literal">setup</code> method to initialize these parameters, as it means that the renderer has to be initialized with the default values and then readjusted during the setup. The result is extra initialization time.</p></div><div class="section" title="There's more..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec20"/>There's more...</h2></div></div></div><p>There are other callbacks that respond to user input such as mouse and keyboard events, resizing of the window, and dragging files onto the application window. These are described in more detail in the <span class="emphasis"><em>Responding to mouse input</em></span>, <span class="emphasis"><em>Responding to key input</em></span>, <span class="emphasis"><em>Responding to touch input</em></span>, <span class="emphasis"><em>Accessing files dragged on the application window</em></span>, and <span class="emphasis"><em>Adjusting a scene after resizing the window</em></span> recipes.</p></div><div class="section" title="See also"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec21"/>See also</h2></div></div></div><p>To learn how to create a basic app with TinderBox, read the <span class="emphasis"><em>Creating a project for a basic application</em></span> recipe.</p></div></div>
<div class="section" title="Responding to mouse input"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec13"/>Responding to mouse input</h1></div></div></div><p>An application can respond to<a id="id31" class="indexterm"/> mouse interaction through several event handlers that are called depending on the action being performed.</p><p>The existing handlers that respond to mouse interaction are listed in the following table:</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Method</p>
</th><th style="text-align: left" valign="bottom">
<p>Usage</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p><code class="literal">mouseDown</code>
<a id="id32" class="indexterm"/></p>
</td><td style="text-align: left" valign="top">
<p>This is called when the user presses a mouse button</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p><code class="literal">mouseUp</code>
<a id="id33" class="indexterm"/></p>
</td><td style="text-align: left" valign="top">
<p>This is called when the user releases a mouse button</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p><code class="literal">mouseWheel</code>
<a id="id34" class="indexterm"/></p>
</td><td style="text-align: left" valign="top">
<p>This is called when the user rotates the mouse wheel</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p><code class="literal">mouseMove</code>
<a id="id35" class="indexterm"/></p>
</td><td style="text-align: left" valign="top">
<p>This is called when the mouse is moved without any button pressed</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p><code class="literal">mouseDrag</code>
<a id="id36" class="indexterm"/></p>
</td><td style="text-align: left" valign="top">
<p>This is called when the mouse is moved with any button pressed</p>
</td></tr></tbody></table></div><p>It is not mandatory to implement all of the <a id="id37" class="indexterm"/>preceding methods; you can implement only the ones required by your application.</p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec22"/>Getting ready</h2></div></div></div><p>Implement the necessary event handlers according to the mouse events you need to respond to. For example, to create an application that responds to all available mouse events, you must implement the following code inside your main class declaration:</p><div class="informalexample"><pre class="programlisting">void mouseDown( MouseEvent event );
void mouseUp( MouseEvent event );
void mouseWheel( MouseEvent event );
void mouseMove( MouseEvent event );
void mouseDrag( MouseEvent event );</pre></div><p>The <code class="literal">MouseEvent</code> object passed as a parameter contains information about the mouse event.</p></div><div class="section" title="How to do it…"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec23"/>How to do it…</h2></div></div></div><p>We will learn how to work with the <a id="id38" class="indexterm"/>
<code class="literal">ci::app::MouseEvent</code> class to respond to mouse events. Perform the following steps to do so:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">To get the position where the event has happened, in terms of screen coordinates, we can type in the following line of code:<div class="informalexample"><pre class="programlisting">Vec2i mousePos = event.getPos();</pre></div><p>Or we can get the separate x and y coordinates by calling the <code class="literal">getX</code> and <code class="literal">getY</code> methods:</p><div class="informalexample"><pre class="programlisting">int mouseX = event.getX();
int mouseY = event.getY();</pre></div></li><li class="listitem">The <code class="literal">MouseEvent</code> object<a id="id39" class="indexterm"/> also<a id="id40" class="indexterm"/> lets us know which mouse button triggered the event by calling the <code class="literal">isLeft</code>, <code class="literal">isMiddle</code>, or <code class="literal">isRight</code> methods. They return a <code class="literal">bool</code> value indicating if it was the left, middle, or right button, respectively.<div class="informalexample"><pre class="programlisting">bool leftButton = event.isLeft();
bool rightButton = event.isRight();
bool middleButton = event.isMiddle();</pre></div></li><li class="listitem">To know if the event was triggered by pressing a mouse button, we can call the <code class="literal">isLeftDown</code>, <code class="literal">isRightDown</code>, and <code class="literal">isMiddleDown</code> methods that return <code class="literal">true</code> depending on whether the left, right, or middle buttons of the mouse were pressed.<div class="informalexample"><pre class="programlisting">bool leftDown = event.isLeftDown();
bool rightDown = event.isRightDown();
bool middleDown = event.isMiddleDown();</pre></div></li><li class="listitem">The <code class="literal">getWheelIncrement</code> method<a id="id41" class="indexterm"/> returns a <code class="literal">float</code> value with the movement increment of the mouse wheel.<div class="informalexample"><pre class="programlisting">float wheelIncrement = event.getWheelIncrement();</pre></div></li><li class="listitem">It is also possible to know if a special key was being pressed during the event. The <code class="literal">isShiftDown</code> method<a id="id42" class="indexterm"/> returns <code class="literal">true</code> if the <span class="emphasis"><em>Shift</em></span> key was pressed, the <code class="literal">isAltDown</code> method returns <code class="literal">true</code> if the <span class="emphasis"><em>Alt</em></span> key was pressed, <code class="literal">isControlDown</code> returns <code class="literal">true</code> if the <span class="emphasis"><em>control</em></span> key was pressed, and <code class="literal">isMetaDown</code> returns <code class="literal">true</code> if the Windows key was pressed on Windows or the <span class="emphasis"><em>option</em></span> key was pressed on OS X, <code class="literal">isAccelDown</code> returns <code class="literal">true</code> if the <span class="emphasis"><em>Ctrl</em></span> key was pressed on Windows or the <span class="emphasis"><em>command</em></span> key was pressed on OS X.</li></ol></div></div><div class="section" title="How it works"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec24"/>How it works</h2></div></div></div><p>A Cinder application responds<a id="id43" class="indexterm"/> internally to the system's native mouse events. It then creates a <code class="literal">ci::app::MouseEvent</code> object using the native information and calls the necessary mouse event handlers of our application's class.</p></div><div class="section" title="There's more..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec25"/>There's more...</h2></div></div></div><p>It is also possible to access the native modifier mask by calling the <code class="literal">getNativeModifiers</code> method.<a id="id44" class="indexterm"/> These are platform-specific values that Cinder uses internally and may be of use for advanced uses.<a id="id45" class="indexterm"/></p></div></div>
<div class="section" title="Responding to key input"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec14"/>Responding to key input</h1></div></div></div><p>A Cinder application can respond to<a id="id46" class="indexterm"/> key events through several callbacks.</p><p>The available callbacks that get called by keyboard interaction are listed in the following table:</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Method</p>
</th><th style="text-align: left" valign="bottom">
<p>Usage</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p><code class="literal">keyDown</code>
<a id="id47" class="indexterm"/></p>
</td><td style="text-align: left" valign="top">
<p>This is called when the user first presses a key and called repeatedly if a key is kept pressed.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p><code class="literal">keyUp</code>
<a id="id48" class="indexterm"/></p>
</td><td style="text-align: left" valign="top">
<p>This is called when a key is released.</p>
</td></tr></tbody></table></div><p>Both these methods receive a <code class="literal">ci::app::KeyEvent</code> object as a parameter with information about the event such as the key code being pressed or if any special key (such as <span class="emphasis"><em>Shift</em></span> or <span class="emphasis"><em>control</em></span>) is being pressed.</p><p>It is not mandatory to implement all of the preceding key event handlers; you can implement only the ones that your application requires.</p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec26"/>Getting ready</h2></div></div></div><p>Implement the necessary event handlers according to what key events you need to respond to. For example, to create an application that responds to both key down and key up events, you must declare the following methods:</p><div class="informalexample"><pre class="programlisting">void keyDown( KeyEvent event );
void keyUp( KeyEvent event );</pre></div><p>The <code class="literal">ci::app::KeyEvent</code> parameter contains information about the key event.</p></div><div class="section" title="How to do it…"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec27"/>How to do it…</h2></div></div></div><p>We will learn how to work<a id="id49" class="indexterm"/> with the <code class="literal">ci::app::KeyEvent</code> class<a id="id50" class="indexterm"/> to learn how to understand key events. Perform the following steps to do so:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">To get the ASCII code of the character that triggered the key event, you can type in the following line of code:<div class="informalexample"><pre class="programlisting">char character = event.getChar();</pre></div></li><li class="listitem">To respond to <a id="id51" class="indexterm"/>special keys that do not map to the ASCII character table, we must call the <code class="literal">getCode</code> method that retrieves an <code class="literal">int</code> value that can be mapped to a character table in the <code class="literal">ci::app::KeyEvent</code> class. To test, for example, if the key event was triggered by the <span class="emphasis"><em>Esc</em></span> key you can type in the following line of code:<div class="informalexample"><pre class="programlisting">bool escPressed = event.getCode() == KeyEvent::KEY_ESCAPE;</pre></div><p><code class="literal">escPressed</code> will be <code class="literal">true</code> if the escape key triggered the event, or <code class="literal">false</code> otherwise.</p></li><li class="listitem">The <code class="literal">ci::app::KeyEvent</code> parameter also has information about modifier keys that were pressed during the event. The <code class="literal">isShiftDown</code> method returns <code class="literal">true</code> if the <span class="emphasis"><em>Shift</em></span> key was pressed, <code class="literal">isAltDown</code> returns <code class="literal">true</code> if the <span class="emphasis"><em>Alt</em></span> key was pressed, <code class="literal">isControlDown</code> returns <code class="literal">true</code> if the <span class="emphasis"><em>control</em></span> key was pressed, <code class="literal">isMetaDown</code> returns <code class="literal">true</code> if the Windows key was pressed on Windows or the <span class="emphasis"><em>command</em></span> key was pressed on OS X, and <code class="literal">isAccelDown</code> returns <code class="literal">true</code> if the <span class="emphasis"><em>Ctrl</em></span> key was pressed on Windows or the <span class="emphasis"><em>command</em></span> key<a id="id52" class="indexterm"/> was pressed on OS X.</li></ol></div></div><div class="section" title="How it works…"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec28"/>How it works…</h2></div></div></div><p>A Cinder application responds internally to the system's native key events. When receiving a native key event, it creates a <code class="literal">ci::app::KeyEvent</code> object based on the native information and calls the correspondent callback on our application's class.</p></div><div class="section" title="There's more..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec29"/>There's more...</h2></div></div></div><p>It is also possible to access the native key code by calling the<a id="id53" class="indexterm"/> <code class="literal">getNativeKeyCode</code> method. This method returns an <code class="literal">int</code> value with the native, platform-specific code of the key. It can be important for advanced uses.</p></div></div>
<div class="section" title="Responding to touch input"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec15"/>Responding to touch input</h1></div></div></div><p>A Cinder application can<a id="id54" class="indexterm"/> receive several touch events.</p><p>The available touch event handlers that get called by touch interaction are listed in the following table:</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Method</p>
</th><th style="text-align: left" valign="bottom">
<p>Usage</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p><code class="literal">touchesBegan</code>
<a id="id55" class="indexterm"/></p>
</td><td style="text-align: left" valign="top">
<p>This is called when new touches are detected</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p><code class="literal">touchesMoved</code>
<a id="id56" class="indexterm"/></p>
</td><td style="text-align: left" valign="top">
<p>This is called when existing touches move</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p><code class="literal">touchesEnded</code>
<a id="id57" class="indexterm"/></p>
</td><td style="text-align: left" valign="top">
<p>This is called when existing touches are removed</p>
</td></tr></tbody></table></div><p>All of the preceding methods receive a <code class="literal">ci::app::TouchEvent</code> object as a parameter with a <code class="literal">std::vector</code> of <code class="literal">ci::app::TouchEvent::Touch</code> objects with information about each touch detected. Since many devices can detect and respond to several touches simultaneously, it is possible and common for a touch event to contain several touches.</p><p>It is not mandatory to<a id="id58" class="indexterm"/> implement all of the preceding event handlers; you can use the ones your application requires specifically.</p><p>Cinder applications can respond to touch events on any touch-enabled device running Windows 7, OS X, or iOS.</p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec30"/>Getting ready</h2></div></div></div><p>Implement the necessary touch event handlers according to the touch events you want to respond to. For example, to respond to all available touch events (touches added, touches moved, and touches removed), you would need to declare and implement the following methods:</p><div class="informalexample"><pre class="programlisting">void touchesBegan( TouchEvent event );
void touchesMoved( TouchEvent event );
void touchesEnded( TouchEvent event );</pre></div></div><div class="section" title="How to do it…"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec31"/>How to do it…</h2></div></div></div><p>We will learn how to work<a id="id59" class="indexterm"/> with the <code class="literal">ci::app::TouchEvent</code> class<a id="id60" class="indexterm"/> to understand touch events. Perform the following steps to do so:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">To access the list of touches, you can type in the following line of code:<div class="informalexample"><pre class="programlisting">const std::vector&lt;TouchEvent::Touch&gt;&amp; touches = event.getTouches();</pre></div><p>Iterate through the container to access each individual element.</p><div class="informalexample"><pre class="programlisting">for( std::vector&lt;TouchEvent::Touch&gt;::const_iterator it = touches.begin(); it != touches.end(); ++it ){
  const TouchEvent::Touch&amp; touch = *it;
  //do something with the touch object
}</pre></div></li><li class="listitem">You can get the position of a touch by calling the <a id="id61" class="indexterm"/><code class="literal">getPos</code> method that returns a <code class="literal">Vec2f</code> value with its position or using the <code class="literal">getX</code> and <code class="literal">getY</code> methods <a id="id62" class="indexterm"/>to receive the x and y coordinates separately, for example:<div class="informalexample"><pre class="programlisting">for( std::vector&lt;TouchEvent::Touch&gt;::const_iterator it = touches.begin(); it != touches.end(); ++it ){
  const TouchEvent::Touch&amp; touch = *it;
  vec2f pos = touch.getPos();
  float x = touch.getX();
  float y = touch.getY(); 
}</pre></div></li><li class="listitem">The <code class="literal">getId</code> method<a id="id63" class="indexterm"/> returns a <code class="literal">uint32_t</code> value with a unique ID for the <code class="literal">touch</code> object. This ID is persistent throughout the lifecycle of the touch, which means you can use it to keep<a id="id64" class="indexterm"/> track of a specific touch as you access it on the different touch events.<p>For example, to make an application where we draw lines using our fingers, we can create <code class="literal">std::map</code> that associates each line, in the form of a <code class="literal">ci::PolyLine&lt;Vec2f&gt;</code> object, with a <code class="literal">uint32_t</code> key with the unique ID of a touch.</p><p>We need to include the file with <code class="literal">std::map</code> and <code class="literal">PolyLine</code> to our project by adding the following code snippet to the beginning of the source file:</p><div class="informalexample"><pre class="programlisting">#include "cinder/polyline.h"
#include &lt;map&gt;</pre></div></li><li class="listitem">We can now declare the container:<div class="informalexample"><pre class="programlisting">std::map&lt; uint32_t, PolyLine&lt;Vec2f&gt; &gt; mLines;</pre></div></li><li class="listitem">In the <code class="literal">touchesBegan</code> method<a id="id65" class="indexterm"/> we create a new line for each detected touch and map it to the unique ID of each touch:<div class="informalexample"><pre class="programlisting">const std::vector&lt;TouchEvent::Touch&gt;&amp; touches = event.getTouches();
for( std::vector&lt;TouchEvent::Touch&gt;::const_iterator it = touches.begin(); it != touches.end(); ++it ){
  const TouchEvent::Touch&amp; touch = *it;
  mLines[ touch.getId() ] = PolyLine&lt;Vec2f&gt;();
}</pre></div></li><li class="listitem">In the <code class="literal">touchesMoved</code> method<a id="id66" class="indexterm"/>, we add the position of each touch to its corresponding line:<div class="informalexample"><pre class="programlisting">const std::vector&lt;TouchEvent::Touch&gt;&amp; touches = event.getTouches();
for( std::vector&lt;TouchEvent::Touch&gt;::const_iterator it = touches.begin(); it != touches.end(); ++it ){
  const TouchEvent::Touch&amp; touch = *it;
  mLines[ touch.getId() ].push_back( touch.getPos() ); 
}</pre></div></li><li class="listitem">In the <code class="literal">touchesEnded</code> method<a id="id67" class="indexterm"/>, we remove the line that corresponds to a touch being removed:<div class="informalexample"><pre class="programlisting">const std::vector&lt;TouchEvent::Touch&gt;&amp; touches = event.getTouches();
for( std::vector&lt;TouchEvent::Touch&gt;::const_iterator it = touches.begin(); it != touches.end(); ++it ){
  const TouchEvent::Touch&amp; touch = *it;
  mLines.erase( touch.getId() );
}</pre></div></li><li class="listitem">Finally, the lines can be drawn.<a id="id68" class="indexterm"/> Here we clear the background with black and draw the lines with in white. The following is the implementation of the <code class="literal">draw</code> method:<div class="informalexample"><pre class="programlisting">gl::clear( Color::black() );
gl::color( Color::white() );
for( std::map&lt;uint32_t, PolyLine&lt;Vec2f&gt; &gt;::iterator it = mLines.begin(); it != mLines.end(); ++it ){
  gl::draw( it-&gt;second );
}</pre></div><p>The following is a screenshot of our app running after drawing some lines:</p><div class="mediaobject"><img src="graphics/8703OS_1_7.jpg" alt="How to do it…"/></div></li></ol></div></div><div class="section" title="How it works…"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec32"/>How it works…</h2></div></div></div><p>A Cinder application responds internally <a id="id69" class="indexterm"/>to the system calls for any touch event. It will then create a <code class="literal">ci::app::TouchEvent</code> object with information about the event and call the corresponding event handler in our application's class. The way to respond to touch events becomes uniform across the Windows and Mac platforms.</p><p>The <code class="literal">ci::app::TouchEvent</code> class contains only one accessor method that returns a <code class="literal">const</code> reference to a <code class="literal">std::vector&lt;TouchEvent::Touch&gt;</code> container. This container has one <code class="literal">ci::app::TouchEvent::Touch</code> object for each detected touch and contains information about the touch.</p><p>The <code class="literal">ci::app::TouchEvent::Touch</code> object contains information about the touch including position and previous position, unique ID, the time stamp, and a pointer to the native event object which maps to <code class="literal">UITouch</code> on Cocoa Touch and <code class="literal">TOUCHPOINT</code> on Windows 7.</p></div><div class="section" title="There's more..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec33"/>There's more...</h2></div></div></div><p>At any time, it is also possible to get a<a id="id70" class="indexterm"/> container with all active touches by calling the <code class="literal">getActiveTouches</code> method. It returns a <code class="literal">const</code> reference to a <code class="literal">std::vector&lt;TouchEvent::Touch&gt;</code> container. It offers flexibility when working with touch applications as it can be accessed outside the touch event methods.</p><p>For example, if you want to draw a solid red circle around each active touch, you can add the following code snippet to your <code class="literal">draw</code> method:</p><div class="informalexample"><pre class="programlisting">const std::vector&lt;TouchEvent::Touch&gt;&amp;activeTouches = getActiveTouches();
gl::color( Color( 1.0f, 0.0f, 0.0f ) );
for( std::vector&lt;TouchEvent::Touch&gt;::const_iterator it = activeTouches.begin(); it != activeTouches.end(); ++it ){
  const TouchEvent::Touch&amp; touch = *it;
gl::drawSolidCircle( touch.getPos(), 10.0f );
}</pre></div></div></div>
<div class="section" title="Accessing files dropped onto the application window"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec16"/>Accessing files dropped onto the application window</h1></div></div></div><p>Cinder applications can respond to files dropped onto the application window through the callback, <code class="literal">fileDrop</code>
<a id="id71" class="indexterm"/>. This method takes a <code class="literal">ci::app::FileDropEvent</code> object as a parameter <a id="id72" class="indexterm"/>with information about the event.<a id="id73" class="indexterm"/></p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec34"/>Getting ready</h2></div></div></div><p>Your application must implement a <code class="literal">fileDrop</code> method<a id="id74" class="indexterm"/> which takes a <code class="literal">ci::app::FileDropEvent</code> object as a parameter.</p><p>Add the following method to the application's class declaration:</p><div class="informalexample"><pre class="programlisting">void fileDrop( FileDropEvent event );</pre></div></div><div class="section" title="How to do it…"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec35"/>How to do it…</h2></div></div></div><p>We will learn how to work with the <code class="literal">ci::app::FileDropEvent</code> object to work with file drop events. Perform the following steps to do so:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">In the method implementation you can use the <code class="literal">ci::app::FileDropEvent</code> parameter to access the list of files dropped onto the application by calling the <code class="literal">getFiles</code> method. This method returns a <code class="literal">conststd::vector</code> container with <code class="literal">fs::path</code> objects:<div class="informalexample"><pre class="programlisting">const vector&lt;fs::path &gt;&amp; files = event.getFiles();</pre></div></li><li class="listitem">The position where the files were dropped onto the window can be accessed through the following callback methods:<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">To get a <code class="literal">ci::Vec2i</code> object with the position of the files dropped, type in the following line of code:<div class="informalexample"><pre class="programlisting">Vec2i dropPosition = event.getPos();</pre></div></li><li class="listitem" style="list-style-type: disc">To get the x and y coordinates separately, you can use the <code class="literal">getX</code> and <code class="literal">getY</code> methods, for example:<div class="informalexample"><pre class="programlisting">int pOS X = event.getX();
int posY = event.getY();</pre></div></li></ul></div></li><li class="listitem">You can find the number of dropped files by using the <code class="literal">getNumFiles</code> method:<div class="informalexample"><pre class="programlisting">int numFiles = event.getNumFiles();</pre></div></li><li class="listitem">To access a specific file, if you already know its index, you can use the <code class="literal">getFile</code> method<a id="id75" class="indexterm"/> and pass the index as a parameter.<p>For example, to access the file with an index of <code class="literal">2</code>, you can use the following line of code:</p><div class="informalexample"><pre class="programlisting">const fs::path&amp; file = event.getFile( 2 );</pre></div></li></ol></div></div><div class="section" title="How it works…"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec36"/>How it works…</h2></div></div></div><p>A Cinder application will respond to the system's native event for file drops. It will then create a <code class="literal">ci::app::FileDropEvent</code> object <a id="id76" class="indexterm"/>with information about the event and call the <code class="literal">fileDrop</code> callback in our application.<a id="id77" class="indexterm"/> This way Cinder creates a uniform way of responding to file drop events across the Windows and OS X platforms.</p></div><div class="section" title="There's more…"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec37"/>There's more…</h2></div></div></div><p>Cinder uses <code class="literal">ci::fs::path</code> objects to define paths. These are <code class="literal">typedef</code> instances of <code class="literal">boost::filesystem::path</code> objects and allow for much greater flexibility when working with paths. To learn more about the <code class="literal">fs::path</code> objects, please refer to the <code class="literal">boost::filesystem</code> library reference, available at <a class="ulink" href="http://www.boost.org/doc/libs/1_50_0/libs/filesystem/doc/index.htm">http://www.boost.org/doc/libs/1_50_0/libs/filesystem/doc/index.htm</a>.</p></div></div>
<div class="section" title="Adjusting a scene after resizing the window"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec17"/>Adjusting a scene after resizing the window</h1></div></div></div><p>Cinder applications can <a id="id78" class="indexterm"/>respond to resizing the window by implementing the resize event. This method takes a <code class="literal">ci::app::ResizeEvent</code> parameter with information about the event.</p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec38"/>Getting ready</h2></div></div></div><p>If your application doesn't have a <code class="literal">resize</code> method, implement one. In the application's class declaration, add the following line of code:</p><div class="informalexample"><pre class="programlisting">void resize( ResizeEvent event );</pre></div><p>In the method's implementation, you can use the <code class="literal">ResizeEvent</code> parameter to find information about the window's new size and format.</p></div><div class="section" title="How to do it…"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec39"/>How to do it…</h2></div></div></div><p>We will learn how to work with the<a id="id79" class="indexterm"/> <code class="literal">ci::app::ResizeEvent</code> parameter to respond to window resize events. Perform the following steps to do so:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">To find the new size of the window, you can use the <code class="literal">getSize</code> method<a id="id80" class="indexterm"/> which returns a <code class="literal">ci::Vec2iwith</code> object, the window's width as the x component, and the height as the y component.<div class="informalexample"><pre class="programlisting">Vec2i windowSize = event.getSize();</pre></div><p>The <code class="literal">getWidth and getHeight</code> methods both return <code class="literal">int</code> values with the window's width and height respectively, for example:</p><div class="informalexample"><pre class="programlisting">int width = event.getWidth();
int height = event.getHeight();</pre></div></li><li class="listitem">The <code class="literal">getAspectRatio</code> method<a id="id81" class="indexterm"/> <a id="id82" class="indexterm"/>returns a <code class="literal">float</code> value with the aspect ratio of the window, which is the ratio between its width and height:<div class="informalexample"><pre class="programlisting">float ratio = event.getAspectRatio();</pre></div></li><li class="listitem">Any element on screen that needs adjusting must use the new window size to recalculate its properties. For example, to have a rectangle that is drawn at the center of the window with a 20 pixel margin on all sides, we must first declare a <code class="literal">ci::Rectf</code> object in the class declaration:<div class="informalexample"><pre class="programlisting">Rect frect;</pre></div><p>In the setup we set its properties so that it has a 20 pixel margin on all sides from the window:</p><div class="informalexample"><pre class="programlisting">rect.x1 = 20.0f;
rect.y1 = 20.0f;
rect.x2 = getWindowWidth() – 20.0f;
rect.y2 = getWindowHeight() – 20.0f;</pre></div></li><li class="listitem">To draw the rectangle with a red color, add the following code snippet to the <code class="literal">draw</code> method:<a id="id83" class="indexterm"/><div class="informalexample"><pre class="programlisting">gl::color( Color( 1.0f, 0.0f, 0.0f ) );
gl::drawSolidRect( rect );</pre></div></li><li class="listitem">In the <code class="literal">resize</code> method, we must recalculate the rectangle properties so that it resizes itself to maintain the 20 pixel margin on all sides of the window:<div class="informalexample"><pre class="programlisting">rect.x1 = 20.0f;
rect.y1 = 20.0f;
rect.x2 = event.getWidth() – 20.0f;
rect.y2 = event.getHeight() – 20.0f;</pre></div></li><li class="listitem">Run the application and resize the window. The rectangle will maintain its relative size and position according to the window size.<div class="mediaobject"><img src="graphics/8703OS_1_8.jpg" alt="How to do it…"/></div></li></ol></div></div><div class="section" title="How it works…"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec40"/>How it works…</h2></div></div></div><p>A Cinder application responds internally<a id="id84" class="indexterm"/> to the system's window resize events. It will then create the<a id="id85" class="indexterm"/> <code class="literal">ci::app::ResizeEvent</code> object and call the <code class="literal">resize</code> method<a id="id86" class="indexterm"/> on our application's class. This way Cinder creates a uniform way of dealing with resize events across the Windows and Mac platforms.</p></div></div>
<div class="section" title="Using resources on Windows"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec18"/>Using resources on Windows</h1></div></div></div><p>It is common for Windows<a id="id87" class="indexterm"/> applications to use external files either to<a id="id88" class="indexterm"/> load images, play audio or video, or to load or save settings on XML files.</p><p>Resources are external files to your application that are embedded in the application's executable file. Resource files are hidden from the user to avoid alterations.</p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec41"/>Getting ready</h2></div></div></div><p>Resources should be stored in a <a id="id89" class="indexterm"/>folder named <code class="literal">resources</code> in your project folder. If this folder does not exist, create it.</p><p>Resources on Windows must be referenced in a file called <code class="literal">Resources.rc</code>. This file should be placed next to the <a id="id90" class="indexterm"/>Visual C++ solution in the <code class="literal">vc10</code> folder. If this file does not exist, you must create it as an empty file. If the <code class="literal">resources.rs</code> file is not included already in your project solution, you must add it by right-clicking on the <span class="strong"><strong>Resources</strong></span> filter and choosing <span class="strong"><strong>Add</strong></span> and then <span class="strong"><strong>ExistingItem</strong></span>. Navigate to the file and select it. As a convention, this file should be kept in the same folder as the project solution.</p></div><div class="section" title="How to do it…"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec42"/>How to do it…</h2></div></div></div><p>We will use Visual C++ 2010 to add resources to our applications on Windows. Perform the following steps to do so:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Open the Visual C++ solution and open the <code class="literal">resources.h</code> file inside the <span class="strong"><strong>Header Files</strong></span> filter.</li><li class="listitem">Add the <code class="literal">#pragma once</code> macro to your file to prevent it from being included more than once in your project and include the <code class="literal">CinderResources.h</code> file.<div class="informalexample"><pre class="programlisting">#pragma once
#include "cinder/CinderResources.h"</pre></div></li><li class="listitem">On Windows, each resource must have a unique ID number. As a convention, the IDs are defined as sequential numbers starting from 128, but you can use other IDs if it suits you better. Make sure to never use the same ID twice. You must also define a type string. The type string is used to identify resources of the same type, for example, the string <code class="literal">IMAGE</code> may be used when declaring image resources, <code class="literal">VIDEO</code> for declaring video resources, and so on.</li><li class="listitem">To simplify writing multiplatform code, Cinder has a macro for declaring resources that can be used on both Windows and Mac.<p>For example, to declare the resource of an image file named <code class="literal">image.png</code>, we would type in the following line of code:</p><div class="informalexample"><pre class="programlisting">#define RES_IMAGE CINDER_RESOURCE(../resources/, image.png, 128, IMAGE)</pre></div><p>The first parameter of the <code class="literal">CINDER_RESOURCE</code> macro is the relative path to the folder where the resource file is, in this case the default <code class="literal">resources</code> folder.</p><p>The second parameter is the name of the file, and after that comes the unique ID of this resource, and finally its type string.</p></li><li class="listitem">Now we need<a id="id91" class="indexterm"/> to add <a id="id92" class="indexterm"/>our <code class="literal">resources</code> macro to the <code class="literal">resources.rs</code> file, as follows:<div class="informalexample"><pre class="programlisting">#include "..\include\Resources.h"
RES_IMAGE</pre></div></li><li class="listitem">This resource is now ready to be used in our application. To load this image into <code class="literal">ci::gl::Texture</code> we simply include the <code class="literal">Texture.h</code> file in our application's source code:<div class="informalexample"><pre class="programlisting">#include "cinder/gl/Texture.h"</pre></div></li><li class="listitem">We can now declare the texture:<div class="informalexample"><pre class="programlisting">gl::Texture mImage;</pre></div></li><li class="listitem">In the setup, we create the texture by loading the resource:<div class="informalexample"><pre class="programlisting">mImage = gl::Texture( loadImage( loadResource( RES_IMAGE ) );</pre></div></li><li class="listitem">The texture is now ready to be drawn on screen. To draw the image at position (20, 20), we will type in the following line of code inside the <code class="literal">draw</code> method:<div class="informalexample"><pre class="programlisting">gl::draw( mImage, Vec2f( 20.0f, 20.0f ) );</pre></div></li></ol></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec43"/>How it works...</h2></div></div></div><p>The <code class="literal">resources.rc</code> file is used by a resource compiler to embed resources into the executable file as binary data.</p></div><div class="section" title="There's more..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec44"/>There's more...</h2></div></div></div><p>Cinder allows writing code to use resources that is coherent across all supported platforms, but the way resources are handled on Windows and OS X/iOS is slightly different. To learn how to use resources on a Mac, please read the <span class="emphasis"><em>Using resources on iOS and OS X</em></span> recipe.</p></div></div>
<div class="section" title="Using resources on iOS and OS X"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec19"/>Using resources on iOS and OS X</h1></div></div></div><p>It is common for<a id="id93" class="indexterm"/> Windows applications to use external files either to load images, play audio or video, or to load or save<a id="id94" class="indexterm"/> settings on XML files.</p><p>Resources are external files to your application <a id="id95" class="indexterm"/>that are included in the applications bundle. Resource files are hidden from the user to avoid alterations. <a id="id96" class="indexterm"/></p><p>Cinder allows writing code to use resources that is equal when writing Windows or Mac applications, but the way resources are handled is slightly different. To learn how to use resources on Windows, please read the <span class="emphasis"><em>Using resources on Windows</em></span> recipe.</p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec45"/>Getting ready</h2></div></div></div><p>Resources should be stored in a folder named <code class="literal">resources</code> in your <code class="literal">project</code> folder. If this folder does not exist, create it.</p></div><div class="section" title="How to do it…"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec46"/>How to do it…</h2></div></div></div><p>We will use Xcode to add resources to our application on iOS and OS X. Perform the following steps to do so:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Place any resource file you wish to use in the <code class="literal">resources</code> folder.</li><li class="listitem">Add these files to your project by right-clicking on the <span class="strong"><strong>Resources</strong></span> filter in your Xcode project and selecting <span class="strong"><strong>Add</strong></span> and then <span class="strong"><strong>ExistingFiles</strong></span>, navigate to the <code class="literal">resources</code> folder, and select the resource files you wish to add.</li><li class="listitem">To load a resource in your code, you use the <code class="literal">loadResource</code> method and pass the name of the resource file. For example, to load an image named <code class="literal">image.png</code>, you should first create the <code class="literal">gl::Texture</code> member in the class declaration:<div class="informalexample"><pre class="programlisting">gl::Texture mImage;</pre></div></li><li class="listitem">In the <code class="literal">setup</code> method, we initialize the texture with the following resource:<div class="informalexample"><pre class="programlisting">mImage = loadImage( loadResource( "image.png" ));</pre></div></li><li class="listitem">The texture is now ready to be drawn in the window. To draw it at position (20, 20), type in the following line of code inside the <code class="literal">draw</code> method:<div class="informalexample"><pre class="programlisting">gl::draw( mImage, Vec2f( 20.0f, 20.0f ) );</pre></div></li></ol></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec47"/>How it works...</h2></div></div></div><p>On iOS and OS X, applications are actually folders that contain all the necessary files to run the application, such as the Unix executable file, the frameworks used, and the resources. You can access<a id="id97" class="indexterm"/> the content of these folders by clicking on any Mac application and selecting <span class="strong"><strong>Show Package Contents</strong></span>.<a id="id98" class="indexterm"/></p><p>When you add <a id="id99" class="indexterm"/>resources to the <code class="literal">resources</code> folder in your Xcode project, these files are copied during the build stage to the <code class="literal">resources</code> folder of your application bundle.</p></div><div class="section" title="There's more..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec48"/>There's more...</h2></div></div></div><p>You can also load resources using the same <a id="id100" class="indexterm"/>
<code class="literal">loadResource</code> method that is used in Windows applications. This is very useful when writing cross-platform applications so that no changes are necessary in your code.</p><p>You should create the <code class="literal">resource</code> macro in the <code class="literal">Resources.h</code> file, and add the unique resource ID and its type string. For example, to load the image <code class="literal">image.png</code>, you can type in the following code snippet:</p><div class="informalexample"><pre class="programlisting">#pragma once
#include "cinder/CinderResources.h"
#define RES_IMAGE CINDER_RESOURCE(../resources/, image.png, 128, IMAGE)</pre></div><p>And this is what the <code class="literal">Resources.rc</code> file should look like:</p><div class="informalexample"><pre class="programlisting">#include "..\include\Resources.h"

RES_IMAGE</pre></div><p>Using the preceding <a id="id101" class="indexterm"/> example to load an image, the only difference is that we would load the texture with the following line of code:</p><div class="informalexample"><pre class="programlisting">mImage = loadImage( loadResource( RES_IMAGE ) );</pre></div><p>The resource unique ID and type string will be ignored in Mac applications, but adding them allows creating code that is cross-platform.</p></div></div>
<div class="section" title="Using assets"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec20"/>Using assets</h1></div></div></div><p>In this recipe, we will learn how we can load and use assets.</p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec49"/>Getting ready</h2></div></div></div><p>As an example for this<a id="id102" class="indexterm"/> recipe, we will load and display an asset image.</p><p>Place an image file<a id="id103" class="indexterm"/> inside the <code class="literal">assets</code> folder in your project directory and name it <code class="literal">image.png</code>.</p><p>Include the following files at the top of your source code:</p><div class="informalexample"><pre class="programlisting">#include "cinder/gl/Texture.h"
#include "cinder/ImageIO.h"</pre></div><p>Also add the following useful <code class="literal">using</code> statements:</p><div class="informalexample"><pre class="programlisting">using namespace ci;
using namespace ci::app;
using namespace std;</pre></div></div><div class="section" title="How to do it…"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec50"/>How to do it…</h2></div></div></div><p>As an example, we will learn how we can load and display an image asset. Perform the following steps to do so:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Declare a <code class="literal">ci::gl::Texture</code> object:<div class="informalexample"><pre class="programlisting">gl::Texture image;</pre></div></li><li class="listitem">In the <code class="literal">setup</code> method let's load the image asset. We will use a <code class="literal">try/catch</code> block in if it is not possible to load the asset.<div class="informalexample"><pre class="programlisting">    try{
        image = loadImage( loadAsset( "image.png" ) );
    } catch( ... ){
        console() &lt;&lt; "asset not found" &lt;&lt; endl;
    }</pre></div></li><li class="listitem">In the <code class="literal">draw</code> method we will draw the texture. We will use an <code class="literal">if</code> statement to check if the texture has been successfully initialized:<div class="informalexample"><pre class="programlisting">if( image ){
  gl::draw( image, getWindowBounds() );
    }</pre></div></li></ol></div></div><div class="section" title="How it works…"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec51"/>How it works…</h2></div></div></div><p>The first application uses an<a id="id104" class="indexterm"/> asset Cinder, which will try to find its default <code class="literal">assets</code> folder. It will begin by searching the executable or application bundle folder, depending on the platform, and continue searching its parent's folder up to five levels. This is done to accommodate for different project setups.</p></div><div class="section" title="There's more…"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec52"/>There's more…</h2></div></div></div><p>You can add an additional <code class="literal">assets</code> folder <a id="id105" class="indexterm"/>using the <code class="literal">addAssetDirectory</code> method<a id="id106" class="indexterm"/>, which takes a <code class="literal">ci::fs::path</code> object as a parameter. Every time Cinder searches for an asset, it will first look in its default <code class="literal">asset</code> folder and then in every folder the user may have added.</p><p>You can also create subfolders inside the <code class="literal">assets</code> folder, for example, if our image was inside a subfolder named <code class="literal">My Images</code>, we would type in the following code snippet in the <code class="literal">setup</code> method:</p><div class="informalexample"><pre class="programlisting">try{
     image = loadImage( loadAsset( "My Images/image.png" ) );
}catch( ... ){
     console() &lt;&lt; "asset not found" &lt;&lt; endl;
 }</pre></div><p>It is also possible to know the path where a specific folder lies. To do this, use the <code class="literal">getAssetPath</code> method<a id="id107" class="indexterm"/>, which takes a<a id="id108" class="indexterm"/> <code class="literal">ci::fs::path</code> object as a parameter with the name of the file.</p></div></div></body></html>