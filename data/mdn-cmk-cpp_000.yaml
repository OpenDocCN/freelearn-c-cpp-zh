- en: Preface
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 序言
- en: Creating top-notch software isn't an easy task. Developers researching this
    subject online frequently have problems determining which advice is up to date
    and which approaches have already been superseded by fresher, better practices.
    At the same time, most resources explain this process chaotically, without the
    proper background, context, and structure.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 打造顶级软件并非易事。开发者在网上研究这一主题时，常常遇到的问题是如何判断哪些建议是更新的，哪些方法已经被更 fresh、更好的实践所超越。与此同时，大多数资源对这个过程的解释是混乱的，没有适当的背景、上下文和结构。
- en: '*Modern CMake for C++* is an end-to-end guide offering a simpler experience,
    as it treats building C++ solutions in a comprehensive manner. It teaches you
    how to use CMake in your CMake projects, and also shows you what makes them maintainable,
    elegant, and clean. It guides you through the automation of complex tasks appearing
    in many projects, including building, testing, and packaging.'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: '*现代CMake for C++* 是一本端到端的指南，提供了更简单的体验，因为它全面地处理了C++解决方案的构建。它教会您如何在CMake项目中使用CMake，并展示使其可维护、优雅和干净的原因。它引导您通过许多项目中出现的复杂任务的自动化，包括构建、测试和打包。'
- en: 'The book instructs you on how to form the source directories, as well as build
    targets and packages. As you progress, you will learn how to compile and link
    executables and libraries, how these processes work in detail, and how to optimize
    all steps to achieve the best results. You''ll also understand how to add external
    dependencies to the project: third-party libraries, testing frameworks, program
    analysis tools, and documentation generators. Finally, you''ll explore how to
    export, install, and package your solution for internal and external purposes.'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 本书将指导您如何形成源目录，以及如何构建目标和包。随着您的进展，您将学习如何编译和链接可执行文件和库，这些过程是如何详细工作的，以及如何优化所有步骤以获得最佳结果。您还将了解如何将外部依赖项添加到项目中：第三方库、测试框架、程序分析工具和文档生成器。最后，您将探索如何为内部和外部目的导出、安装和打包您的解决方案。
- en: After completing this book, you'll be able to use CMake confidently on a professional
    level.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 完成本书后，您将能够在专业水平上自信地使用CMake。
- en: Who this book is for
  id: totrans-5
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 本书适合谁阅读
- en: Learning the C++ language often isn't enough to prepare you for delivering projects
    to the highest standards. If you're interested in becoming a professional build
    engineer, a better software developer, or simply want to become proficient with
    CMake, if you'd like to understand how projects come together and why, if you're
    transitioning from a different build environment, or if you're interested in learning
    modern CMake from the ground up, then this book is for you.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 学习C++语言往往不足以让你为交付项目到最高标准做好准备。如果你有兴趣成为一名专业的构建工程师，一个更好的软件开发者，或者简单地说，想精通CMake，如果你想了解项目是如何组合在一起的以及为什么这样，如果你正在从不同的构建环境中过渡，或者如果你对从零开始学习现代CMake感兴趣，那么这本书适合你。
- en: What this book covers
  id: totrans-7
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 本书涵盖内容
- en: '[*Chapter 1*](B17205_01_Final_JC_ePub.xhtml#_idTextAnchor014), *First Steps
    with CMake*, covers how to install and use CMake''s command line, along with what
    files make up the project.'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: '[第1章](B17205_01_Final_JC_ePub.xhtml#_idTextAnchor014)，*CMake的初步步骤*，涵盖了如何安装和使用CMake的命令行，以及构成项目的文件。'
- en: '[*Chapter 2*](B17205_02_Final_JC_ePub.xhtml#_idTextAnchor051), *The* *CMake
    Language*, provides key code information: comments, command invocations and arguments,
    variables, lists, and control structures.'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: '[第2章](B17205_02_Final_JC_ePub.xhtml#_idTextAnchor051)，*CMake语言*，提供了关键代码信息：注释、命令调用和参数、变量、列表和控制结构。'
- en: '[*Chapter 3*](B17205_03_Final_JC_ePub.xhtml#_idTextAnchor078), *Setting Up
    Your First CMake Project*, introduces the basic configuration of a project, the
    required CMake version, project metadata, and file structure, as well as the toolchain
    setup.'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: '[第3章](B17205_03_Final_JC_ePub.xhtml#_idTextAnchor078)，*设置您的第一个CMake项目*，介绍了项目的基本配置、所需的CMake版本、项目元数据和文件结构，以及工具链设置。'
- en: '[*Chapter 4*](B17205_04_Final_JC_ePub.xhtml#_idTextAnchor106), *Working with
    Targets*, introduces the logical build targets that produce artifacts for executables
    and libraries.'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: '[第4章](B17205_04_Final_JC_ePub.xhtml#_idTextAnchor106)，*与目标工作*，介绍了逻辑构建目标，这些目标为可执行文件和库生成工件。'
- en: '[*Chapter 5*](B17205_05_Final_JC_ePub.xhtml#_idTextAnchor126), *Compiling C++
    Sources with CMake*, explains how the details of compilation process works and
    how it can be controlled in a CMake project.'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: '[第5章](B17205_05_Final_JC_ePub.xhtml#_idTextAnchor126)，*使用CMake编译C++源代码*，解释了编译过程的细节以及如何在CMake项目中控制编译过程。'
- en: '[*Chapter 6*](B17205_06_Final_JC_ePub.xhtml#_idTextAnchor146), *Linking with
    CMake*, provides general information on linking, static, and shared libraries.
    This chapter also explains how to structure a project so that it can be tested.'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: '[第6章](B17205_06_Final_JC_ePub.xhtml#_idTextAnchor146)，*使用CMake链接*，提供了关于链接、静态和共享库的一般信息。本章还解释了如何结构化一个项目，以便它可以被测试。'
- en: '[*Chapter 7*](B17205_07_Final_JC_ePub.xhtml#_idTextAnchor162), *Managing Dependencies
    with CMake*, explains the dependency management methods available in modern CMake.'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: '[第7章](B17205_07_Final_JC_ePub.xhtml#_idTextAnchor162)，*使用CMake管理依赖项*，解释了现代CMake中可用的依赖管理方法。'
- en: '[*Chapter 8*](B17205_08_Final_JC_ePub.xhtml#_idTextAnchor179), *Testing Frameworks*,
    describes how to add the most popular testing frameworks to your project, as well
    as how to use the CTest utility available in the CMake toolset.'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: '[第8章](B17205_08_Final_JC_ePub.xhtml#_idTextAnchor179)，*测试框架*，描述了如何将最流行的测试框架添加到您的项目中，以及如何使用CMake工具集中的CTest工具。'
- en: '[*Chapter 9*](B17205_09_Final_JC_ePub.xhtml#_idTextAnchor195), *Program Analysis
    Tools*, covers how to perform automatic formatting, as well as static and dynamic
    analyses, in your project.'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: '[第9章](B17205_09_Final_JC_ePub.xhtml#_idTextAnchor195)，*程序分析工具*，介绍了如何在您的项目中执行自动格式化，以及进行静态和动态分析。'
- en: '[*Chapter 10*](B17205_10_Final_JC_ePub.xhtml#_idTextAnchor210), *Generating
    Documentation*, explains how to use Doxygen to generate manuals for users straight
    from the C++ source code.'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: '[第10章](B17205_10_Final_JC_ePub.xhtml#_idTextAnchor210)，*生成文档*，解释了如何使用Doxygen直接从C++源代码生成用户手册。'
- en: '[*Chapter 11*](B17205_11_Final_JC_ePub.xhtml#_idTextAnchor217), *Installing
    and Packaging*, shows how to prepare your project to be used in other projects
    or installed on the system. We''ll also see an explanation of the CPack utility.'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: '[第11章](B17205_11_Final_JC_ePub.xhtml#_idTextAnchor217)，*安装和打包*，展示了如何将您的项目准备成在其他项目中使用或在系统上安装。我们还将看到CPack工具的解释。'
- en: '[*Chapter 12*](B17205_12_Final_JC_ePub.xhtml#_idTextAnchor240), *Creating Your
    Professional Project*, sets out how to put together all the knowledge you have
    acquired hitherto in to a fully formed project.'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: '[第12章](B17205_12_Final_JC_ePub.xhtml#_idTextAnchor240)，*创建你的专业项目*，介绍了如何将迄今为止你所获得的所有知识整合成一个完全形成的项目。'
- en: '[*Appendix*](B17205_Appendix_Final_JC_ePub.xhtml#_idTextAnchor264): *Miscellaneous
    Commands*, provides a quick reference of the most popular commands: `string()`,
    `list()`, `file()`, and `math()`.'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: '[附录](B17205_Appendix_Final_JC_ePub.xhtml#_idTextAnchor264)：*杂项命令*，提供最流行命令的快速参考：`string()`、`list()`、`file()`
    和 `math()`。'
- en: To get the most out of this book
  id: totrans-21
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 为了充分利用本书
- en: Basic familiarity with C++ and Unix-like systems is assumed throughout the book.
    Although this isn't a strict requirement, it will prove helpful in fully understanding
    the examples given in this book.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 本书假设您对C++和类Unix系统有基本的熟悉度。虽然这不是一个严格的要求，但熟悉这些内容将有助于您完全理解本书中的示例。
- en: This book targets CMake 3.20, but most of the techniques described should work
    from CMake 3.15 (features that were added after are usually highlighted).
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 本书针对CMake 3.20，但描述的大多数技术应该从CMake 3.15起就可以工作（在之后添加的功能通常会 highlighted）。
- en: 'All examples have been tested on Debian with the following packages installed:'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 所有示例已在安装以下包的Debian上进行测试：
- en: '`clang-format clang-tidy cppcheck doxygen g++ gawk git graphviz lcov libpqxx-dev
    libprotobuf-dev make pkg-config protobuf-compiler tree valgrind vim wget`'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: '`clang-format clang-tidy cppcheck doxygen g++ gawk git graphviz lcov libpqxx-dev
    libprotobuf-dev make pkg-config protobuf-compiler tree valgrind vim wget`'
- en: To experience the same environment, it is recommended to use the Docker images,
    as explained in [*Chapter 1*](B17205_01_Final_JC_ePub.xhtml#_idTextAnchor014).
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 为了体验相同的环境，建议使用如[第1章](B17205_01_Final_JC_ePub.xhtml#_idTextAnchor014)所解释的Docker镜像。
- en: '**If you are using the digital version of this book, we advise you to type
    the code yourself or access the code from the book''s GitHub repository (a link
    is available in the next section). Doing so will help you avoid any potential
    errors related to the copying and pasting of code.**'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: '**如果你使用的是本书的数字版，我们建议你亲自输入代码或从本书的 GitHub 仓库（下一节中有链接）访问代码。这样做可以帮助你避免因复制和粘贴代码而可能出现的任何潜在错误。**'
- en: Download the example code files
  id: totrans-28
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 下载示例代码文件
- en: You can download the example code files for this book from GitHub at [https://github.com/PacktPublishing/Modern-CMake-for-Cpp](https://github.com/PacktPublishing/Modern-CMake-for-Cpp).
    If there's an update to the code, it will be updated in the GitHub repository.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以从GitHub下载本书的示例代码文件，地址为[https://github.com/PacktPublishing/Modern-CMake-for-Cpp](https://github.com/PacktPublishing/Modern-CMake-for-Cpp)。如果代码有更新，它将在GitHub仓库中更新。
- en: We also have other code bundles from our rich catalog of books and videos available
    at [https://github.com/PacktPublishing/](https://github.com/PacktPublishing/).
    Check them out!
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还有其他丰富的书籍和视频目录中的代码包，可在[https://github.com/PacktPublishing/](https://github.com/PacktPublishing/)找到。去看看吧！
- en: Download the color images
  id: totrans-31
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 下载彩色图像
- en: 'We also provide a PDF file that has color images of the screenshots and diagrams
    used in this book. You can download it here: [https://static.packt-cdn.com/downloads/9781801070058_ColorImages.pdf](https://static.packt-cdn.com/downloads/9781801070058_ColorImages.pdf).'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还提供了一个PDF文件，其中包含本书中使用的屏幕截图和图表的彩色图像。您可以通过此链接下载： [https://static.packt-cdn.com/downloads/9781801070058_ColorImages.pdf](https://static.packt-cdn.com/downloads/9781801070058_ColorImages.pdf)。
- en: Conventions used
  id: totrans-33
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 本书中使用了以下约定：
- en: There are a number of text conventions used throughout this book.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 本书中使用了多种文本约定。
- en: '`Code in text`: Indicates code words in the text, database table names, folder
    names, filenames, file extensions, pathnames, dummy URLs, user input, and Twitter
    handles. Here is an example: "Select `Debug`, `Release`, `MinSizeRel`, or `RelWithDebInfo`
    and specify it as follows."'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: '`文本中的代码`：表示文本中的代码单词、数据库表名、文件夹名、文件名、文件扩展名、路径名、假URL、用户输入和Twitter处理。以下是一个示例："选择`Debug`、`Release`、`MinSizeRel`或`RelWithDebInfo`并按如下方式指定。"'
- en: 'A block of code is set as follows:'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 代码块如下所示：
- en: '[PRE0]'
  id: totrans-37
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'When we wish to draw your attention to a particular part of a code block, the
    relevant lines or items are set in bold:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们要引起您对代码块中特定部分的关注时，相关行或项目以粗体显示：
- en: '[PRE1]'
  id: totrans-39
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Any command-line input or output is written as follows:'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 任何命令行输入或输出如下所示：
- en: '[PRE2]'
  id: totrans-41
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: '**Bold**: Indicates a new term, an important word, or words that you see on
    screen. For instance, words in menus or dialog boxes appear in **bold**. Here
    is an example: "If all else fails and we need to use the big guns there is always
    **trace mode**."'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: '**粗体**：表示新术语、重要单词或您在屏幕上看到的单词。例如，菜单或对话框中的单词以**粗体**显示。以下是一个示例："如果其他方法都失败了，我们需要使用大炮，总有**跟踪模式**。"'
- en: Tips or Important Notes
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 提示或重要说明
- en: Appear like this.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 文本中代码如下所示。
- en: Get in touch
  id: totrans-45
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 联系我们
- en: Feedback from our readers is always welcome.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 我们对读者的反馈总是持开放态度。
- en: '**General feedback**: If you have questions about any aspect of this book,
    email us at [customercare@packtpub.com](mailto:customercare@packtpub.com) and
    mention the book title in the subject of your message.'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: '**一般反馈**：如果您有任何关于本书的问题，请发送电子邮件至[customercare@packtpub.com](mailto:customercare@packtpub.com)，并在消息主题中提及书名。'
- en: '**Errata**: Although we have taken every care to ensure the accuracy of our
    content, mistakes do happen. If you have found a mistake in this book, we would
    be grateful if you would report this to us. Please visit [www.packtpub.com/support/errata](http://www.packtpub.com/support/errata)
    and fill in the form.'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: '**勘误**：尽管我们已经竭尽全力确保内容的准确性，但错误仍然可能发生。如果您在这本书中发现了错误，我们将非常感激您能向我们报告。请访问[www.packtpub.com/support/errata](http://www.packtpub.com/support/errata)填写表格。'
- en: '**Piracy**: If you come across any illegal copies of our works in any form
    on the internet, we would be grateful if you would provide us with the location
    address or website name. Please contact us at [copyright@packt.com](mailto:copyright@packt.com)
    with a link to the material.'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: '**盗版**：如果您在互联网上以任何形式发现我们作品的非法副本，我们将非常感激您能提供位置地址或网站名称。请联系我们，邮箱为[copyright@packt.com](mailto:copyright@packt.com)，并提供材料的链接。'
- en: '**If you are interested in becoming an author**: If there is a topic that you
    have expertise in and you are interested in either writing or contributing to
    a book, please visit [authors.packtpub.com](http://authors.packtpub.com).'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: '**如果您有兴趣成为作者**：如果您在某个领域有专业知识，并且有兴趣撰写或贡献书籍，请访问[authors.packtpub.com](http://authors.packtpub.com)。'
- en: Share Your Thoughts
  id: totrans-51
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 分享您的想法
- en: Once you've read *Modern CMake for C++*, we'd love to hear your thoughts! Please
    click here to go straight to the Amazon review page for this book and share your
    feedback.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 阅读完*现代CMake for C++*后，我们非常期待听到您的看法！请点击此处直接进入本书的亚马逊评论页面并分享您的反馈。
- en: Your review is important to us and the tech community and will help us make
    sure we're delivering excellent quality content.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 您的评论对我们和整个技术社区都很重要，这将帮助我们确保我们提供的内容质量卓越。
