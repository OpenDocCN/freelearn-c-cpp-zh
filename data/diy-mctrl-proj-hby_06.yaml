- en: '*Chapter 6*: Morse Code SOS Visual Alarm with a Bright LED'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '*第6章*：使用亮LED的摩尔斯电码SOS视觉警报'
- en: This chapter describes how to build a very noticeable visual alarm with a **super-bright
    LED** connected to a microcontroller board. The LED will show an SOS message (this
    is used when someone or a group of people is in danger or in distress). In this
    chapter, you will learn how to control a super-bright LED with a microcontroller
    board. The reason we are using a super-bright LED in this chapter is to increase
    the visibility of the SOS message with it. This chapter will be beneficial for
    future electronic projects because you will learn how to control an LED with a
    transistor working as a switch. The application made in this chapter can be used
    by people in distress while they are hiking, at sea, and in similar scenarios.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 本章描述了如何构建一个非常显眼的视觉警报器，该警报器通过连接到微控制器板的**超级亮LED**来显示SOS信息（当有人或一群人处于危险或困境时使用）。在本章中，你将学习如何使用微控制器板控制超级亮LED。我们之所以在本章中使用超级亮LED，是为了增加SOS信息的可见性。本章将有益于未来的电子项目，因为你将学习如何使用晶体管作为开关来控制LED。本章中制作的应用程序可以在徒步旅行、海上和类似场景中使用的困难人群中使用。
- en: 'In this chapter, we are going to cover the following main topics:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 本章我们将涵盖以下主要内容：
- en: Understanding Morse code and the SOS message
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 理解摩尔斯电码和SOS信息
- en: Introducing super-bright LEDs and calculating their necessary resistors
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 介绍超级亮LED及其所需电阻的计算
- en: Connecting the resistor and the super-bright LED to the microcontroller board
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将电阻和超级亮LED连接到微控制器板
- en: Coding the SOS Morse code signal
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 编写SOS摩尔斯电码信号
- en: Testing the visual alarm
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 测试视觉警报
- en: By the end of this chapter, you will be able to properly connect a super-bright
    LED to the Curiosity Nano and Blue Pill microcontroller boards and to generate
    a Morse code message with a microcontroller board.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 到本章结束时，你将能够正确地将超级亮LED连接到Curiosity Nano和Blue Pill微控制器板，并使用微控制器板生成摩尔斯电码信息。
- en: Technical requirements
  id: totrans-9
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 技术要求
- en: The software tools that you will be using in this chapter are the MPLAB-X and
    Arduino IDEs for editing and uploading your programs to the Curiosity Nano and
    the Blue Pill microcontroller boards, respectively.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 本章中你将使用的软件工具是MPLAB-X和Arduino IDE，分别用于编辑和上传你的程序到Curiosity Nano和Blue Pill微控制器板。
- en: 'The code used in this chapter can be found at the book''s GitHub repository:'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 本章中使用的代码可以在本书的GitHub仓库中找到：
- en: '[https://github.com/PacktPublishing/DIY-Microcontroller-Projects-for-Hobbyists/tree/master/Chapter06](https://github.com/PacktPublishing/DIY-Microcontroller-Projects-for-Hobbyists/tree/master/Chapter06)'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: '[https://github.com/PacktPublishing/DIY-Microcontroller-Projects-for-Hobbyists/tree/master/Chapter06](https://github.com/PacktPublishing/DIY-Microcontroller-Projects-for-Hobbyists/tree/master/Chapter06)'
- en: 'The Code in Action video for this chapter can be found here: [https://bit.ly/3iXDlEP](https://bit.ly/3iXDlEP)'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 本章的“代码在行动”视频可以在以下链接找到：[https://bit.ly/3iXDlEP](https://bit.ly/3iXDlEP)
- en: 'In this chapter, we will use the following pieces of hardware:'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 本章中，我们将使用以下硬件设备：
- en: A solderless breadboard.
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个无焊面包板。
- en: The Blue Pill and Curiosity Nano microcontroller boards.
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Blue Pill和Curiosity Nano微控制器板。
- en: A micro USB cable for connecting your microcontroller boards to a computer.
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用于将微控制器板连接到计算机的微型USB线。
- en: The ST-Link/V2 electronic interface needed to upload the compiled code to the
    Blue Pill. Bear in mind that the ST-Link/V2 requires four female-to-female DuPont
    wires.
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 需要上传编译后的代码到Blue Pill的ST-Link/V2电子接口。请注意，ST-Link/V2需要四根公对公的杜邦线。
- en: One 5 mm trough-hole 625 nm orange-red, super-bright LED, manufacturer number
    BL-BJU334V-1, made by American Bright Optoelectronics Corporation, or something
    similar.
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个5毫米的槽孔625纳米橙色-红色，超级亮LED，制造商编号BL-BJU334V-1，由美国光电子公司制造，或者类似的产品。
- en: Two 1 k ohm resistors rated at one-quarter watt. These resistors are for the
    LED and the transistor.
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 两个1千欧姆、四分之一瓦特的电阻。这些电阻用于LED和晶体管。
- en: One 220-ohm resistor rated at one-quarter watt. This is for the LED.
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个220欧姆、四分之一瓦特的电阻。这是为LED准备的。
- en: One **2N2222** transistor, TO-92 package.
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个**2N2222**晶体管，TO-92封装。
- en: A dozen male-to-male DuPont wires.
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一打男性到男性的杜邦线。
- en: The following section describes what Morse code is and why we are using it in
    this project.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 以下部分描述了摩尔斯电码是什么以及为什么在这个项目中使用它。
- en: Understanding Morse code and the SOS message
  id: totrans-25
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 理解摩尔斯电码和SOS信息
- en: '**Morse code** is a telecommunication technique used for encoding, receiving,
    and sending **alphanumeric** and **special characters** by applying signal sequences
    with different duration. Morse code is named after Samuel Morse, a telegraph inventor.
    This code is important because it was commonly used for radio and wired communication
    over long distances, in particular, for sending and receiving telegrams. Nowadays,
    Morse code is still used in amateur (*ham*) radio communications because it can
    be reliably decoded by people when electromagnetic atmospheric conditions are
    unfavorable. More importantly, Morse code can be used in an emergency by sending
    SOS messages in the form of light, audio, or electromagnetic signals. Morse code
    is still sometimes used in aviation as a radio navigation aid.'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: '**摩尔斯电码**是一种电信技术，通过应用不同持续时间的信号序列来编码、接收和发送 **字母数字** 和 **特殊字符**。摩尔斯电码是以电报发明家塞缪尔·摩尔斯的名字命名的。这种代码很重要，因为它在长距离的无线电和有线通信中普遍使用，特别是用于发送和接收电报。如今，摩尔斯电码在业余
    (*ham*) 无线电通信中仍然被使用，因为当电磁大气条件不利时，人们可以可靠地解码它。更重要的是，摩尔斯电码可以通过发送 SOS 信息以光、音频或电磁信号的形式在紧急情况下使用。摩尔斯电码有时在航空中作为无线电导航辅助工具使用。'
- en: 'Each character in Morse code is made with `-` symbol) and `.` symbol). A dot
    is one signal unit, and a dash is three signal units. Each alphabet letter, numerals,
    and special characters are encoded using a combination of dots and/or dashes.
    A space between letters is one signal unit (a dot), and a space between words
    is seven signal units. This code is generally transmitted on an information-carrying
    medium, for example, visible light and electromagnetic radio waves. The following
    is a list with the letters and numbers encoded using international Morse code:'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 摩尔斯电码中的每个字符都是由 `-` 符号和 `.` 符号组成的。一个点是一个信号单元，一个破折号是三个信号单元。每个字母、数字和特殊字符都是通过点与/或破折号的组合进行编码的。字母之间的空格是一个信号单元（一个点），单词之间的空格是七个信号单元。此代码通常在信息载体上传输，例如，可见光和电磁无线电波。以下是一个使用国际摩尔斯电码编码的字母和数字列表：
- en: A (`.-`)
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: A (`.-`)
- en: B (`-...`)
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: B (`-...`)
- en: C (`-.-.`)
  id: totrans-30
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: C (`-.-.`)
- en: D (`-..`)
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: D (`-..`)
- en: E (`.`)
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: E (`.`)
- en: F (`..-.`)
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: F (`..-.`)
- en: G (`- -.`)
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: G (`- -.`)
- en: H (`....`)
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: H (`....`)
- en: I (`..`)
  id: totrans-36
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: I (`..`)
- en: J (`.---`)
  id: totrans-37
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: J (`.---`)
- en: K (`-.-`)
  id: totrans-38
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: K (`-.-`)
- en: L (`.-..`)
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: L (`.-..`)
- en: M (`- -`)
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: M (`- -`)
- en: N (`-.`)
  id: totrans-41
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: N (`-.`)
- en: O (`- - -`)
  id: totrans-42
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: O (`- - -`)
- en: P (`.- -.`)
  id: totrans-43
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: P (`.- -.`)
- en: Q (`- -.-`)
  id: totrans-44
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Q (`- -.-`)
- en: R (`.-.`)
  id: totrans-45
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: R (`.-.`)
- en: S (`. . .`)
  id: totrans-46
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: S (`. . .`)
- en: T (`-`)
  id: totrans-47
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: T (`-`)
- en: U (`..-`)
  id: totrans-48
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: U (`..-`)
- en: V (`...-`)
  id: totrans-49
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: V (`...-`)
- en: W (`.- -`)
  id: totrans-50
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: W (`.- -`)
- en: X (`-..-`)
  id: totrans-51
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: X (`-..-`)
- en: Y (`-.--`)
  id: totrans-52
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Y (`-.--`)
- en: Z (`- -..`)
  id: totrans-53
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Z (`- -..`)
- en: 1 (`.- - - -`)
  id: totrans-54
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 1 (`.- - - -`)
- en: 2 (`..- - -`)
  id: totrans-55
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 2 (`..- - -`)
- en: 3 (`...- -`)
  id: totrans-56
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 3 (`...- -`)
- en: 4 (`. . . . -`)
  id: totrans-57
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 4 (`. . . . -`)
- en: 5 (`. . . . .`)
  id: totrans-58
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 5 (`. . . . .`)
- en: 6 (`-. . . .`)
  id: totrans-59
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 6 (`-. . . .`)
- en: 7 (`- - . . .`)
  id: totrans-60
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 7 (`- - . . .`)
- en: 8 (`- - - . .`)
  id: totrans-61
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 8 (`- - - . .`)
- en: 9 (`- - - -.`)
  id: totrans-62
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 9 (`- - - -.`)
- en: 0 (`- - - - -`)
  id: totrans-63
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 0 (`- - - - -`)
- en: 'Special characters, such as `$` and `#` and other characters from languages
    other than English, have also been encoded with Morse code, but showing them is
    beyond the scope of this chapter. For example, this is how we encode the word
    PARIS in Morse code: .- -.   .-   .-.   ..   ...'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 特殊字符，如 `$` 和 `#` 以及来自非英语语言的字符，也已被摩尔斯电码编码，但展示这些内容超出了本章的范围。例如，这是我们将单词 PARIS 用摩尔斯电码编码的方式：.-
    -.   .-   .-.   ..   ...
- en: This is another example. The word HELP can be codified as ….   .   .-..   .--.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 这是另一个例子。单词“HELP”可以编码为 ….   .   .-..   .--.
- en: 'Another longer example is the word ALIVE: .- .-.. .. ...- .'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个更长的例子是单词 ALIVE：.- .-.. .. ...- .
- en: A commonly used distress message encoded with Morse code is made up of the letters
    SOS. It is formed by three dots, three dashes, and three dots (`. . .  ---  .
    . .`). This message has been internationally applied and recognized by treaties,
    originally used for maritime emergency situations. Its origin is uncertain, but
    popular usage associates SOS with phrases such as *Save Our Ship* or *Save Our
    Souls*. Nonetheless, SOS is easy to remember and used in an emergency and is shorter
    than coding other words, such as *HELP*, in Morse code.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 常用的 distress 消息，用摩尔斯电码编码，由字母 SOS 组成。它由三个点、三个破折号和三个点组成（`. . .  ---  . . .`）。这个信息已被国际条约应用和认可，最初用于海上紧急情况。其起源不确定，但流行用法将
    SOS 与诸如 *Save Our Ship* 或 *Save Our Souls* 这样的短语联系起来。尽管如此，SOS 容易记忆，在紧急情况下使用，并且比用摩尔斯电码编码其他单词，如
    *HELP*，要短。
- en: In this chapter, we will use the SOS message to make a visual alarm, showing
    that message making the dots and dashes by turning on and off a super-bright LED
    with the Blue Pill and the Curiosity Nano boards.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将使用 SOS 信息制作一个视觉警报，通过使用 Blue Pill 和 Curiosity Nano 板通过开启和关闭一个超级明亮的 LED
    来显示信息中的点和破折号。
- en: The next section describes a brief introduction to super-bright LEDs, and what
    type of resistor can be connected to them for our Morse code purposes.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 下一节简要介绍了超亮LED，以及为了我们的摩尔斯电码目的，可以连接到它们的是什么类型的电阻。
- en: Introducing super-bright LEDs and calculating their necessary resistors
  id: totrans-70
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 介绍超亮LED及其所需电阻的计算
- en: A **super-bright LED** is a **light-emitting diode** (**LED**) that glows with
    high intensity, higher than regular LEDs. LED brightness (light intensity) is
    calculated in **millicandelas** (**mcd**). Bear in mind that 1,000 mcd equals
    1 candela. Candelas typically measure how much light is generated at the light
    source, in this case, an LED, but candelas can be used to measure other light
    sources, such as light bulbs. The super-bright LED that we use in this chapter
    is rated as 6,000 mcd, emitting a nice and powerful orange glow, which is quite
    bright when connected to a proper current-limiting resistor. In comparison, typical
    LEDs are rated at a range of about 50 to 200 mcd.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: '**超亮LED**是一种**发光二极管**（**LED**），以高亮度发光，比常规LED亮度更高。LED亮度（光强度）以**毫坎德拉**（**mcd**）计算。请注意，1,000
    mcd等于1坎德拉。坎德拉通常用来衡量光源产生的光量，在这种情况下，是一个LED，但坎德拉也可以用来衡量其他光源，如灯泡。我们在这章中使用的超亮LED额定为6,000
    mcd，发出一种漂亮且强大的橙色光芒，当连接到适当的限流电阻时相当明亮。相比之下，典型的LED额定值在约50到200 mcd之间。'
- en: Super-bright LEDs have a special design to increase light diffusion by using
    a transparent glass coating and reflective material. However, some super-bright
    LEDs have a reduced **viewing angle** (the observation angle with the LED light
    looks more intense) of about 35 degrees, such as the one we are using in this
    chapter, whereas the viewing angle of other regular and super-bright LEDs is 120%.
    This viewing angle depends on their cost, efficiency, and applications.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 超亮LED通过使用透明玻璃涂层和反射材料来增加光扩散的特殊设计。然而，一些超亮LED的**观看角度**（LED光观察的角度看起来更亮）减少了约35度，例如我们在这章中使用的那种，而其他常规和超亮LED的观看角度为120%。这个观看角度取决于它们的成本、效率和用途。
- en: 'As with regular LEDs, super-bright LEDs require a certain voltage to power
    them, typically between 2 and 3 volts. That''s why we need to connect a current-limiting
    resistor to an LED to reduce its voltage. We can use the formula R=(Vs-Vf)/If
    for calculating a current-limiting resistor for an LED in the following cases:'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 与常规LED一样，超亮LED需要一定的电压来供电，通常在2到3伏之间。这就是为什么我们需要将限流电阻连接到LED以降低其电压。我们可以使用公式R=(Vs-Vf)/If来计算以下情况下LED的限流电阻：
- en: '**Vs** = supplied voltage. The Blue Pill and Curiosity Nano output ports provide
    3.3 V.'
  id: totrans-74
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Vs** = 供电电压。Blue Pill和Curiosity Nano输出端口提供3.3伏。'
- en: '**Vf** = forward voltage, which is the voltage that drops through a resistor.'
  id: totrans-75
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Vf** = 正向电压，即通过电阻器下降的电压。'
- en: '**If** is the forward **amperage** (**amps**).'
  id: totrans-76
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**If** 是正向 **电流**（**amps**）。'
- en: '**R** is the resistor value that we want to calculate.'
  id: totrans-77
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**R** 是我们想要计算的电阻值。'
- en: 'A commonly used resistor value for connecting to LEDs is 1 k ohm. The drop
    voltage with that resistor is 1.8 V when applying a supply voltage of 3.3 volts
    and a current drawing 1.5 milliamps (or 0.0015 amps). Let''s apply the preceding
    formula to confirm this resistor value:'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 连接到LED时常用的电阻值是1 k欧姆。当施加3.3伏的电源电压，电流为1.5毫安（或0.0015安）时，该电阻器的下降电压为1.8伏。让我们应用前面的公式来确认这个电阻值：
- en: '![](img/B16413_06_001.png)'
  id: totrans-79
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B16413_06_001.png)'
- en: The resistor connected to a super-bright LED will determine the number of amps
    it will draw. Typical resistor values that are used for connecting to LEDs are
    220, 330, and 1 k ohms when using either 3.3 V or 5 V as the supply voltage that
    many microcontroller boards supply. The resistor value is not critical in the
    majority of LED applications (unless you are connecting an LED to a Blue Pill
    microcontroller board, as you will see in the next section), so we can use other
    resistors with similar values. First of all, you can determine whether the super-bright
    LED works. Go to the *Testing the visual alarm* section at the end of this chapter.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 连接到超亮LED的电阻器将决定其吸取的电流数量。当使用3.3伏或5伏作为许多微控制器板提供的电源电压时，常用的电阻值用于连接LED是220、330和1
    k欧姆。在大多数LED应用中（除非你将LED连接到Blue Pill微控制器板，如下一节所示），电阻值不是关键因素，因此我们可以使用其他具有相似值的电阻。首先，你可以确定超亮LED是否工作。前往本章末尾的*测试视觉警报*部分。
- en: Important note
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 重要注意事项
- en: Do not stare at a super-bright LED directly on top of it when it is turned on
    (glowing), as this may hurt your eyes. You can momentarily look at it from the
    side.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 当超级明亮的LED开启（发光）时，不要直接盯着它看，因为这可能会伤害你的眼睛。你可以暂时从侧面看它。
- en: '*Figure 6.1* shows the super-bright LED used in this chapter:'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: '*图6.1*展示了本章中使用的超级明亮的LED：'
- en: '![Figure 6.1 – The BL-BJU334V-1 super-bright LED](img/Figure_6.1_B16413.jpg)'
  id: totrans-84
  prefs: []
  type: TYPE_IMG
  zh: '![图6.1 – BL-BJU334V-1超级明亮的LED](img/Figure_6.1_B16413.jpg)'
- en: Figure 6.1 – The BL-BJU334V-1 super-bright LED
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.1 – BL-BJU334V-1超级明亮的LED
- en: '*Figure 6.1* depicts a BL-BJU334V-1 5 mm through-hole LED that emits bright
    orange light in the 625 nm wavelength. Its left pin is the anode (positive lead),
    and the right pin is the cathode (negative lead) which is the short one. There
    are other types of super-bright LEDs with higher brightness and sizes. We decided
    to use this one in particular for this chapter because is low cost and suitable
    for inserting it in a solderless breadboard and connecting it to a microcontroller
    board. The next section deals with the connection of a super-bright LED to the
    Blue Pill and Curiosity Nano boards.'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: '*图6.1*描绘了一个BL-BJU334V-1 5 mm通孔LED，在625 nm波长下发出明亮的橙色光。其左侧引脚是阳极（正极），右侧引脚是阴极（负极），这是较短的。还有其他类型的超级明亮的LED，亮度更高，尺寸更大。我们决定特别使用这个LED，因为它成本低，适合插入无焊面包板，并连接到微控制器板。下一节将处理超级明亮的LED连接到Blue
    Pill和Curiosity Nano板。'
- en: Connecting the resistor and the super-bright LED to the microcontroller board
  id: totrans-87
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 将电阻和超级明亮的LED连接到微控制器板
- en: This section shows how to use a super-bright LED connected to a microcontroller
    board to display a Morse code message. We begin by explaining how to connect a
    super-bright LED to one of the input ports of the Blue Pill and how to use a transistor
    as a switch to control the super-bright LED. Then, we describe how to connect
    the super-bright LED to the Curiosity Nano board.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 本节展示了如何使用连接到微控制器板的超级明亮的LED来显示摩尔斯电码信息。我们首先解释如何将超级明亮的LED连接到Blue Pill的一个输入端口，以及如何使用晶体管作为开关来控制超级明亮的LED。然后，我们描述如何将超级明亮的LED连接到Curiosity
    Nano板。
- en: '*Figure 6.2* shows a Fritzing diagram containing a super-bright LED:'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: '*图6.2*显示了一个包含超级明亮的LED的Fritzing图：'
- en: '![Figure 6.2 – A super-bright LED connected to a Blue Pill''s I/O port](img/Figure_6.2_B16413.jpg)'
  id: totrans-90
  prefs: []
  type: TYPE_IMG
  zh: '![图6.2 – 一个超级明亮的LED连接到Blue Pill的I/O端口](img/Figure_6.2_B16413.jpg)'
- en: Figure 6.2 – A super-bright LED connected to a Blue Pill's I/O port
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.2 – 一个超级明亮的LED连接到Blue Pill的I/O端口
- en: 'As you can see from *Figure 6.2*, the super-bright LED''s anode is connected
    to a 1 k ohm current-limiting resistor. The resistor is connected to output port
    B12, providing 3.3 V to it every time a dot or dash from a Morse code character
    is sent to it. The following are the steps for connecting all the components shown
    in *Figure 6.2*:'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 如*图6.2*所示，超级明亮的LED的阳极连接到一个1 k欧姆限流电阻。该电阻连接到输出端口B12，每次发送摩尔斯电码字符的点或划时，都会向其提供3.3
    V电压。以下是将*图6.2*中显示的所有组件连接的步骤：
- en: Connect the 1 k ohm resistor to the Blue Pill's B12 port.
  id: totrans-93
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将1 k欧姆电阻连接到Blue Pill的B12端口。
- en: Connect the resistor to the super-bright LED's anode pin (its longest leg, which
    is the left one shown in *Figure 6.1*).
  id: totrans-94
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将电阻连接到超级明亮的LED的阳极引脚（其最长的腿，如*图6.1*中所示，为左侧）。
- en: Connect the super-bright LED's cathode pin (its shortest leg) to the lower solderless
    breadboard's row ground.
  id: totrans-95
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将超级明亮的LED的阴极引脚（其最短的腿）连接到较低的无焊面包板的行接地。
- en: Connect the Blue Pill's GND pin to the solderless breadboard's lower rail.
  id: totrans-96
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将Blue Pill的GND引脚连接到无焊面包板的下轨。
- en: When doing those steps, be sure to connect the right LED polarity.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 在执行这些步骤时，请确保连接正确的LED极性。
- en: Important note
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: Do *not* connect a super-bright LED directly to the power supply, as you will
    damage it. You should connect a current-limiting resistor to its anode (the long
    LED leg).
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 不要将超级明亮的LED直接连接到电源，因为这会损坏它。你应该在其阳极（长LED腿）上连接一个限流电阻。
- en: Each Blue Pill I/O port can handle up to 6 mA (milliamps). Be careful, because
    in some cases and configurations, a super bright LED could consume more than 6
    mA of current. That's why we connected a 1 k ohm resistor to its anode to limit
    the current (and its voltage) arriving at the LED. If anything connected to a
    Blue Pill port is drawing more than 6 mA, you will damage the Blue Pill board.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 每个Blue Pill I/O端口可以处理高达6 mA（毫安）的电流。请注意，在某些情况下和配置中，一个超级明亮的LED可能会消耗超过6 mA的电流。这就是为什么我们将其阳极连接到一个1
    k欧姆电阻上，以限制到达LED的电流（及其电压）。如果连接到Blue Pill端口的任何设备消耗超过6 mA的电流，你将会损坏Blue Pill板。
- en: 'Before we connect everything to a Blue Pill microcontroller board port, we
    need to know how many amps in the I/O **B12** port are consumed by the LED to
    see whether it is below the maximum amps that the port can handle. The amps (current)
    consumed by the LED from *Figure 6.2* is calculated using the following formula:'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们将所有东西连接到 Blue Pill 微控制器板端口之前，我们需要知道 I/O **B12** 端口消耗了多少安培，以查看它是否低于端口可以处理的最大安培数。LED
    从 *图 6.2* 消耗的安培（电流）使用以下公式计算：
- en: '![](img/B16413_06_002.png)'
  id: totrans-102
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B16413_06_002.png)'
- en: 'The following are the descriptions for the symbols:'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是对符号的描述：
- en: Vs = 3.3 V, which is the supplied voltage given by the output port generated
    when making the Morse code's dots and dashes.
  id: totrans-104
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Vs = 3.3 V，这是在生成摩尔斯电码的点划线时由输出端口提供的供电电压。
- en: Vf = 1.8 V, which is the forward voltage that drops across the 1 k resistor
    (we measured it with a multimeter).
  id: totrans-105
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Vf = 1.8 V，这是通过 1 k 欧姆电阻的导通电压（我们用万用表测量了它）。
- en: R is the resistor value (1 k ohm).
  id: totrans-106
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: R 是电阻值（1 k 欧姆）。
- en: Thus, ![](img/B16413_06_003.png), or 1.5 milliamps, well below the maximum 6
    mA that each Blue Pill port can handle, so we can safely use a 1 k ohm resistor
    for our super-bright LED if we connect it to a port that produces 3.3 V.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，![](img/B16413_06_003.png)，或 1.5 毫安，远低于每个 Blue Pill 端口可以处理的 6 mA 最大值，所以如果我们将其连接到产生
    3.3 V 的端口，我们可以安全地使用 1 k 欧姆电阻为我们的超级明亮 LED 提供电源。
- en: 'It is important to note that the resistor value and the voltage arriving at
    the resistor from the port will determine the LED brightness. We could use a resistor
    with a lower value for making the LED glow brighter. For example, we could use
    a 220-ohm resistor. Its dropping voltage is 1.9 V (we measured it with a multimeter).
    Let''s calculate its amperage (amps) using Vs = 3.3 V: I=(Vs-Vf)/R=(3.3-1.9)/220=6
    mA, which is the limit amps that a Blue Pill port can handle. If we use a 220-ohm
    (or a lower value) resistor for connecting it to a super-bright LED, we should
    use a transistor working as a switch for protecting the Blue Pill port by not
    drawing current directly from it. *Figure 6.3* shows a Fritzing diagram with a
    2N2222 transistor. It will close its *switch*, that is, connect its collector
    and emitter internally, when it receives a voltage to its base (transistor pin
    number 2), and thus connect the LED''s cathode to the ground:'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 重要的是要注意，电阻值和从端口到达电阻的电压将决定 LED 的亮度。我们可以使用具有较低值的电阻来使 LED 发光更亮。例如，我们可以使用 220 欧姆电阻。其降压电压为
    1.9 V（我们用万用表测量了它）。让我们使用 Vs = 3.3 V 来计算其电流（安培）：I=(Vs-Vf)/R=(3.3-1.9)/220=6 mA，这是
    Blue Pill 端口可以处理的极限电流。如果我们使用 220 欧姆（或更低值）的电阻将其连接到超级明亮 LED，我们应该使用一个作为开关工作的晶体管来保护
    Blue Pill 端口，避免直接从它那里吸取电流。*图 6.3* 展示了一个带有 2N2222 晶体管的 Fritzing 图，当它收到基极（晶体管引脚编号
    2）的电压时，它会关闭 *开关*，即内部连接其集电极和发射极，从而将 LED 的阴极连接到地：
- en: '![Figure 6.3 – The super-bright LED switched on/off by the 2N2222 transistor](img/Figure_6.3_B16413.jpg)'
  id: totrans-109
  prefs: []
  type: TYPE_IMG
  zh: '![图 6.3 – 由 2N2222 晶体管开关的超级明亮 LED](img/Figure_6.3_B16413.jpg)'
- en: Figure 6.3 – The super-bright LED switched on/off by the 2N2222 transistor
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.3 – 由 2N2222 晶体管开关的超级明亮 LED
- en: 'As you can see from *Figure 6.3*, the LED is connected to a 220-ohm resistor
    that is connected to the Blue Pill''s 3.3 V pin. This resistor draws the current
    from the Blue Pill''s 3.3 pin, which handles up to 300 mA, and not from the B12
    port handling up to 6 mA. Thus, the transistor controls the power flow to another
    part of the circuit switching the LED''s ground. Every time the transistor receives
    a certain voltage at its base, it saturates and creates the binary on/off switch
    effect between its collector and emitter pins. We need to connect a resistor to
    its base to reduce its voltage and thus properly saturate it. A typical value
    for saturating the transistor used in this chapter is 1 k ohm when applying 3.3
    V to it. The low-cost and popular transistor used in *Figure 6.3* has the part
    number 2N2222 (in a TO-92 package). This transistor handles up to 600 mA, enough
    to drive our super-bright LED. The following are the steps for connecting all
    the components shown in *Figure 6.3*:'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 如*图6.3*所示，LED连接到一个220欧姆电阻，该电阻连接到Blue Pill的3.3 V引脚。这个电阻从Blue Pill的3.3 V引脚吸取电流，该引脚可以处理高达300
    mA的电流，而不是从处理高达6 mA的B12端口。因此，晶体管控制着流向电路另一部分的电流，切换LED的地线。每当晶体管在其基极接收到一定电压时，它就会饱和，并在其集电极和发射极引脚之间创建开/关的开关效果。我们需要在其基极连接一个电阻来降低其电压，从而正确地饱和它。在本章中，当施加3.3
    V电压时，用于饱和晶体管的典型值是1 k欧姆。*图6.3*中使用的低成本且流行的晶体管零件号为2N2222（在TO-92封装中）。这个晶体管可以处理高达600
    mA的电流，足以驱动我们的超亮LED。以下是将*图6.3*中显示的所有组件连接起来的步骤：
- en: Connect the Blue Pill's GND pin to the breadboard's upper row.
  id: totrans-112
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将Blue Pill的GND引脚连接到面包板的上面一行。
- en: Connect the 1 k ohm resistor to the Blue Pill's B12 port.
  id: totrans-113
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将1 k欧姆电阻连接到Blue Pill的B12端口。
- en: Connect the 1 k ohm resistor to the 2N2222 transistor's base (pin number **2**).
  id: totrans-114
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将1 k欧姆电阻连接到2N2222晶体管的基极（引脚编号**2**）。
- en: Connect the 2N2222 transistor's emitter (pin number **1**) to the ground (the
    breadboard's upper row).
  id: totrans-115
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将2N2222晶体管的发射极（引脚编号**1**）连接到地（面包板的上面一行）。
- en: Connect the LED's cathode pin (its shortest leg) to the 2N2222's collector (pin
    number **3**).
  id: totrans-116
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将LED的负极引脚（其最短的一端）连接到2N2222的集电极（引脚编号**3**）。
- en: Connect the 220-ohm resistor to the LED's anode pin (its longest leg).
  id: totrans-117
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将220欧姆电阻连接到LED的正极引脚（其最长的一端）。
- en: Connect the 220-ohm resistor to Blue Pill's 3V3 (3.3) pin.
  id: totrans-118
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将220欧姆电阻连接到Blue Pill的3V3（3.3）引脚。
- en: '*Figure 6.4* shows the 2N2222 pinout:'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: '*图6.4*显示了2N2222的引脚图：'
- en: '![Figure 6.4 – The 2N2222 transistor pin numbers](img/Figure_6.4_B16413.jpg)'
  id: totrans-120
  prefs: []
  type: TYPE_IMG
  zh: '![图6.4 – 2N2222晶体管引脚编号](img/Figure_6.4_B16413.jpg)'
- en: Figure 6.4 – The 2N2222 transistor pin numbers
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.4 – 2N2222晶体管引脚编号
- en: '*Figure 6.4* shows a 2N2222 transistor in its TO-92 package, showing its three
    pins. Pin 1 is its emitter, pin 2 is its base, and pin 3 is its collector. The
    N shown on the transistor means that the 2N2222 is an NPN-type transistor, an
    internal configuration composed of negative-positive-negative layers. That big
    N letter is not actually shown on commercial transistors; it appears only on the
    Fritzing diagram shown in *Figure 6.4*. Instead, commercial transistors show their
    part number on them.'
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: '*图6.4*显示了2N2222晶体管在TO-92封装中的样子，显示了其三个引脚。引脚1是其发射极，引脚2是其基极，引脚3是其集电极。晶体管上的N表示2N2222是NPN型晶体管，其内部配置由负-正-负层组成。那个大的N字母实际上并没有在商业晶体管上显示；它只出现在*图6.4*中显示的Fritzing图上。相反，商业晶体管在其上显示它们的零件号。'
- en: '*Figure 6.5* shows the electronic symbol for the transistor:'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: '*图6.5*显示了晶体管的电子符号：'
- en: '![Figure 6.5 – The transistor''s electronic diagram (NPN type)](img/B16413_Figure_6.5.jpg)'
  id: totrans-124
  prefs: []
  type: TYPE_IMG
  zh: '![图6.5 – 晶体管的电子图（NPN型）](img/B16413_Figure_6.5.jpg)'
- en: Figure 6.5 – The transistor's electronic diagram (NPN type)
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.5 – 晶体管的电子图（NPN型）
- en: As you can see from *Figure 6.5*, the symbol shows the 2N2222's pin numbers.
    This pin order will change in other types of transistors.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 如*图6.5*所示，符号显示了2N2222的引脚编号。这种引脚顺序在其他类型的晶体管中会改变。
- en: '*Figure 6.6* shows how everything is connected:'
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: '*图6.6*显示了所有连接方式：'
- en: '![Figure 6.6 – Connecting the super-bright LED to a 2N2222 transistor](img/Figure_6.6_B16413.jpg)'
  id: totrans-128
  prefs: []
  type: TYPE_IMG
  zh: '![图6.6 – 将超亮LED连接到2N2222晶体管](img/Figure_6.6_B16413.jpg)'
- en: Figure 6.6 – Connecting the super-bright LED to a 2N2222 transistor
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.6 – 将超亮LED连接到2N2222晶体管
- en: '*Figure 6.6* shows the 2N2222 transistor connected to the BluePill''s ground
    and 3.3 (3.3 V) pins. The transistor is connected at the left of the super-bright
    LED. The next section deals with connecting the super-bright LED to the Curiosity
    Nano board using a resistor and a transistor.'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: '*图 6.6* 展示了 2N2222 晶体管连接到 BluePill 的接地和 3.3（3.3 V）引脚。晶体管连接在超亮 LED 的左侧。下一节将介绍如何使用电阻和晶体管将超亮
    LED 连接到 Curiosity Nano 板。'
- en: Connecting the super-bright LED to the Curiosity Nano
  id: totrans-131
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 将超亮 LED 连接到 Curiosity Nano
- en: This section explains how to control the super-bright LED from the Curiosity
    Nano board to display the SOS Morse code message.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 本节解释了如何从 Curiosity Nano 板控制超亮 LED 来显示 SOS 摩尔斯电码信息。
- en: '*Figure 6.7* is a Fritzing diagram showing how to connect a super-bright LED
    to the Curiosity Nano:'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: '*图 6.7* 是一个 Fritzing 图表，展示了如何将超亮 LED 连接到 Curiosity Nano：'
- en: '![Figure 6.7 – A super-bright LED connected to a Curiosity Nano''s I/O port](img/Figure_6.7_B16413.jpg)'
  id: totrans-134
  prefs: []
  type: TYPE_IMG
  zh: '![图 6.7 – 超亮 LED 连接到 Curiosity Nano 的 I/O 端口](img/Figure_6.7_B16413.jpg)'
- en: Figure 6.7 – A super-bright LED connected to a Curiosity Nano's I/O port
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.7 – 超亮 LED 连接到 Curiosity Nano 的 I/O 端口
- en: 'As you can see in *Figure 6.7*, we use a 1 k ohm resistor to connect the super-bright
    LED, which is a similar circuit for the Blue Pill microcontroller board explained
    in a previous section. Here are the steps for connecting the components shown
    in *Figure 6.7*:'
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 如 *图 6.7* 所示，我们使用 1 k 欧姆电阻连接超亮 LED，这与之前章节中解释的 Blue Pill 微控制器板的类似电路。以下是连接 *图
    6.7* 中所示组件的步骤：
- en: Connect the Curiosity Nano's RD3 pin to a 1 k ohm resistor.
  id: totrans-137
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将 Curiosity Nano 的 RD3 引脚连接到 1 k 欧姆电阻。
- en: Connect the resistor to the super-bright LED's anode pin (its longest leg).
  id: totrans-138
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将电阻连接到超亮 LED 的阳极引脚（其最长的一端）。
- en: Connect the super-bright LED's cathode pin (its shortest leg) to the Curiosity
    Nano's GND pin.
  id: totrans-139
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将超亮 LED 的阴极引脚（其最短的一端）连接到 Curiosity Nano 的 GND 引脚。
- en: 'Be aware that in theory, each of the Curiosity Nano I/O ports can handle up
    to 12.8 milliamps (500 milliamps/39 ports), and the Curiosity Nano''s voltage
    regulator (VBUS) can handle up to 500 milliamps. This may change a bit with the
    ambient temperature, according to its manufacturer. We could make the LED glow
    brighter by connecting a lower-value resistor, or we could connect more than one
    LED to a port, but this will draw more current, potentially damaging the microcontroller
    board. Since each port cannot support a lot of current, we need to connect a transistor
    to switch the LED''s ground. *Figure 6.8* shows how all the components are connected:'
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，在理论上，Curiosity Nano 的每个 Nano I/O 端口可以处理高达 12.8 毫安（500 毫安/39 个端口），Curiosity
    Nano 的电压调节器（VBUS）可以处理高达 500 毫安。根据制造商的说法，这可能会因环境温度而略有变化。我们可以通过连接一个低值电阻来使 LED 发光更亮，或者我们可以将多个
    LED 连接到一个端口上，但这将消耗更多电流，可能会损坏微控制器板。由于每个端口不能支持太多电流，我们需要连接一个晶体管来切换 LED 的接地。*图 6.8*
    展示了所有组件的连接方式：
- en: '![Figure 6.8 – The super-bright LED switched on/off by the transistor, connected
    to the Curiosity Nano board](img/Figure_6.8_B16413.jpg)'
  id: totrans-141
  prefs: []
  type: TYPE_IMG
  zh: '![图 6.8 – 通过晶体管开关，连接到 Curiosity Nano 板的超亮 LED](img/Figure_6.8_B16413.jpg)'
- en: Figure 6.8 – The super-bright LED switched on/off by the transistor, connected
    to the Curiosity Nano board
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.8 – 通过晶体管开关，连接到 Curiosity Nano 板的超亮 LED
- en: 'As you can see in *Figure 6.8*, the resistor connected to the LED''s anode
    pin is connected to the Curiosity Nano''s VTG port that provides 3.3 V. These
    are the steps for connecting all the components:'
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 如 *图 6.8* 所示，连接到 LED 阳极引脚的电阻连接到 Curiosity Nano 的 VTG 端口，该端口提供 3.3 V。以下是连接所有组件的步骤：
- en: Insert the Curiosity Nano, the 2N2222 transistor, and the super-bright LED to
    the solderless breadboard.
  id: totrans-144
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将 Curiosity Nano、2N2222 晶体管和超亮 LED 插入无焊面包板。
- en: Connect the transistor's pin 1 to the Curiosity Nano's ground (GND) pin.
  id: totrans-145
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将晶体管的引脚 1 连接到 Curiosity Nano 的接地（GND）引脚。
- en: Connect the 1 k ohm resistor to Curiosity Nano's RD3 port.
  id: totrans-146
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将 1 k 欧姆电阻连接到 Curiosity Nano 的 RD3 端口。
- en: Connect the 1 k ohm resistor to the transistor's pin 2\.
  id: totrans-147
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将 1 k 欧姆电阻连接到晶体管的引脚 2。
- en: Connect the super-bright LED's cathode (its shortest pin) to the transistor's
    pin 3\.
  id: totrans-148
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将超亮 LED 的阴极（其最短的引脚）连接到晶体管的引脚 3。
- en: Connect the 220-ohm resistor to the super-bright LED's anode (its longest pin).
  id: totrans-149
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将 220 欧姆电阻连接到超亮 LED 的阳极（其最长的引脚）。
- en: Connect the 220-ohm resistor to Curiosity Nano's VTG pin.
  id: totrans-150
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将 220 欧姆电阻连接到 Curiosity Nano 的 VTG 引脚。
- en: '*Figure 6.9* shows how everything is connected:'
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: '*图 6.9* 展示了所有组件的连接方式：'
- en: '![Figure 6.9 – The transistor and the LED connected to the Curiosity Nano](img/Figure_6.9_B16413.jpg)'
  id: totrans-152
  prefs: []
  type: TYPE_IMG
  zh: '![图6.9 – Curiosity Nano上连接的晶体管和LED](img/Figure_6.9_B16413.jpg)'
- en: Figure 6.9 – The transistor and the LED connected to the Curiosity Nano
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.9 – Curiosity Nano上连接的晶体管和LED
- en: As you can see from *Figure 6.9*, the 2N2222 transistor is switching the super-bright
    LED's ground.
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 如*图6.9*所示，2N2222晶体管正在切换超亮LED的地线。
- en: The next section describes how the SOS signal can be programmed on the Blue
    Pill and the Curiosity Nano boards.
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 下一个部分描述了如何在Blue Pill和Curiosity Nano板上编程SOS信号。
- en: Coding the SOS Morse code signal
  id: totrans-156
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 编码SOS莫尔斯代码信号
- en: 'This section describes the code necessary for turning the LED for showing the
    SOS Morse signal, which runs on the Blue Pill board, on and off. The following
    code shows the main functions used for defining the SOS Morse code message and
    for sending it to the board''s output port. The next code segment defines the
    necessary dot, dash, and space values, as well as the port label:'
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 本节描述了用于在Blue Pill板上开关LED以显示SOS莫尔斯信号的代码，该代码运行在Blue Pill板上。以下代码显示了用于定义SOS莫尔斯代码消息并将其发送到板输出端口的主体函数。下一个代码段定义了必要的点、划线和空间值，以及端口标签：
- en: '[PRE0]'
  id: totrans-158
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'The next function sets up the output port (`B12`) for turning the LED on and
    off:'
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 下一个函数设置了输出端口（`B12`）以控制LED的开关：
- en: '[PRE1]'
  id: totrans-160
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'These functions define the letter S and O to be used in the SOS message:'
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 这些函数定义了SOS消息中使用的字母S和O：
- en: '[PRE2]'
  id: totrans-162
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'The following functions define the time spaces in between the letters and the
    space in between each SOS message sent to the output port:'
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 以下函数定义了字母之间和每个发送到输出端口的SOS消息之间的时间空间：
- en: '[PRE3]'
  id: totrans-164
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'The following is the main function, which defines the SOS message and its leading
    time space:'
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 以下为`main`函数，它定义了SOS消息及其前导时间空间：
- en: '[PRE4]'
  id: totrans-166
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: The preceding code shows that the Blue Pill's `B12` port is used as an output
    for turning the super-bright LED on and off. In this example code, each dot has
    a duration of 150 milliseconds (stored in the `dot_duration` variable), and each
    dash has a duration of three times that of each dot. There is a short space of
    time in between each letter, made by the `shortspace()` function. Also, there
    is a time space in between each SOS word, made by the `space()` function. The
    letters S and O from the SOS Morse message are encoded by the functions `S()`
    and `O()`, respectively.
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 上述代码显示，Blue Pill的`B12`端口被用作输出，用于开关超亮LED。在此示例代码中，每个点持续时间为150毫秒（存储在`dot_duration`变量中），每个划线持续时间为每个点持续时间的三倍。每个字母之间有一个短的时间间隔，由`shortspace()`函数生成。此外，每个SOS单词之间也有一个时间间隔，由`space()`函数生成。SOS电报中的字母S和O分别由`S()`和`O()`函数编码。
- en: Bear in mind that the code uploaded to the GitHub repository has many comments
    explaining most of the instructions from the preceding code.
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 请记住，上传到GitHub仓库的代码中有许多注释，解释了前面代码中的大多数指令。
- en: Note
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: You can run the preceding code on an Arduino microcontroller board. Just change
    the output port number `PB12` to any Arduino digital port. For example, the Arduino
    Uno microcontroller board has digital ports `2` to `13`.
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以在Arduino微控制器板上运行前面的代码。只需将输出端口编号`PB12`更改为任何Arduino数字端口。例如，Arduino Uno微控制器板有数字端口`2`到`13`。
- en: The following section shows how to code the SOS message example on the Curiosity
    Nano board.
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 以下部分展示了如何在Curiosity Nano板上编写SOS消息示例代码。
- en: The SOS message code for the Curiosity Nano
  id: totrans-172
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Curiosity Nano的SOS消息代码
- en: 'The SOS message code for the Curiosity Nano microcontroller board is similar
    to the one that runs on the Blue Pill board. The next code segment defines the
    necessary dot, dash, and space values:'
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: Curiosity Nano微控制器板的SOS消息代码与在Blue Pill板上运行的代码类似。下一个代码段定义了必要的点、划线和空间值：
- en: '[PRE5]'
  id: totrans-174
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'The following functions define the time spaces in between the letters and the
    space in between each SOS message sent to the output port:'
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 以下函数定义了字母之间和每个发送到输出端口的SOS消息之间的时间空间：
- en: '[PRE6]'
  id: totrans-176
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'These functions define the letters S and O to be used in the SOS message:'
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 这些函数定义了SOS消息中使用的字母S和O：
- en: '[PRE7]'
  id: totrans-178
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'The following is the `main` function, which defines the SOS message and its
    leading time space:'
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 以下为`main`函数，它定义了SOS消息及其前导时间空间：
- en: '[PRE8]'
  id: totrans-180
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: As you can see from the preceding code, `RD3` is used as an output port for
    driving the 2N2222 transistor and therefore switching the LED on and off.
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 如前述代码所示，`RD3`被用作驱动2N2222晶体管并因此开关LED的输出端口。
- en: Bear in mind that the code uploaded to the GitHub repository contains many comments
    explaining its main parts.
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 请记住，上传到GitHub仓库的代码中包含许多注释，解释了其主要部分。
- en: The next section describes how can we test out a super-bright LED to see whether
    it works correctly, as well as testing the speed of the SOS message shown by the
    LED.
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 下一个部分将描述如何测试超亮LED以查看其是否正常工作，以及如何测试LED显示的SOS信息的速度。
- en: Testing the visual alarm
  id: totrans-184
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 测试视觉警报
- en: In this section, we will focus on how to test the super-bright LED, as well
    as how to test the speed of the SOS message shown by the LED.
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将重点介绍如何测试超亮LED，以及如何测试LED显示的SOS信息的速度。
- en: 'You can test the super-bright LED to establish whether it works OK with a power
    supply, as shown in *Figure 6.10*:'
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以通过*图6.10*来测试超亮LED是否与电源正常工作：
- en: '![Figure 6.10 – Connecting the super-bright LED to a battery set](img/Figure_6.10_B16413.jpg)'
  id: totrans-187
  prefs: []
  type: TYPE_IMG
  zh: '![图6.10 – 将超亮LED连接到电池组](img/Figure_6.10_B16413.jpg)'
- en: Figure 6.10 – Connecting the super-bright LED to a battery set
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.10 – 将超亮LED连接到电池组
- en: 'The following are the steps for connecting everything according to *Figure
    6.10*:'
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是根据*图6.10*连接所有部件的步骤：
- en: Connect the super-bright LED's anode (its longest leg) to a 1 k ohm resistor.
  id: totrans-190
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将超亮LED的阳极（其最长的腿）连接到一个1 k欧姆的电阻上。
- en: Connect the resistor to the battery set's positive terminal. The battery set
    should provide around 3 V (supplied by two AA batteries), which are enough for
    testing our super-bright LED.
  id: totrans-191
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将电阻连接到电池组的正极。电池组应提供大约3 V的电压（由两节AA电池提供），这对于测试我们的超亮LED来说已经足够了。
- en: Connect the battery set's negative terminal to the super-bright LED's cathode
    (its shortest leg).
  id: totrans-192
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将电池组的负极连接到超亮LED的阴极（其最短的腿）。
- en: After connecting everything as per the preceding steps, the LED should glow.
    If not, check the LED polarity, and whether the batteries have enough energy.
    Also check the connections. If the LED doesn't glow, it doesn't work and needs
    to be discarded.
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 按照前面的步骤连接好所有部件后，LED应该会发光。如果不会发光，请检查LED的正负极，以及电池是否有足够的电量。同时检查连接。如果LED不发光，则说明它无法工作，需要丢弃。
- en: If you compare the brightness of a regular LED against the super-bright LED
    that we used in this chapter, you will notice that the regular LED glows more
    uniformly and more **omnidirectional**, whereas the super-bright LED has a viewing
    angle of 35 degrees, meaning that it will be brighter from its top rather than
    from its sides. Try it! Observe very briefly both LEDs from the side. Remember
    that you shouldn't stare at the super-bright LED perpendicularly (top view), as
    it may hurt your eyes.
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你将本章中使用的普通LED与我们使用的超亮LED的亮度进行比较，你会注意到普通LED发光更均匀，且更**全向**，而超亮LED的视角为35度，这意味着它从顶部发出的光会比从侧面发出的光更亮。试试看！从侧面非常短暂地观察两个LED。记住，你不应该垂直（顶部视角）盯着超亮LED看，因为它可能会伤到你的眼睛。
- en: You can also test the speed of the SOS message. Change the value originally
    declared in the `dot_duration` variable in the preceding code for both the Blue
    Pill and Curiosity Nano. A smaller value will make the SOS message glow faster
    on the super-bright LED.
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 你还可以测试SOS信息的速度。在前面代码中，将`dot_duration`变量原本声明的值对Blue Pill和Curiosity Nano都进行更改。较小的值会使SOS信息在超亮LED上发光更快。
- en: Summary
  id: totrans-196
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: In this chapter, we learned what a super-bright LED is and how we can connect
    it to a microcontroller board. We also reviewed how to use the super-bright LED
    as a powerful visual alarm, since it glows much more intensely than conventional
    LEDs. We also summarized what Morse code is, how it is used worldwide, and how
    to show the SOS Morse code message, which is used in visual alarms as a distress
    message, by turning on and off the super-bright LED connected to the Blue Pill
    and Curiosity Nano microcontroller boards. Connecting a super-bright LED is not
    straightforward, since we will need to know how much current it will draw, because
    the microcontroller boards' output ports can handle a very limited amount of current,
    in the order of a few milliamps. This chapter will be beneficial for readers who
    would like to control an LED in other electronic projects. It also points out
    the importance of carefully calculating the amps that are drawn by a super-bright
    LED and using the right resistor or transistor to connect to it, so as to avoid
    damaging the microcontroller board.
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们学习了什么是超亮LED以及如何将其连接到微控制器板上。我们还回顾了如何使用超亮LED作为强大的视觉警报，因为它比传统LED发光更亮。我们还总结了摩尔斯电码是什么，它在全球的使用情况，以及如何通过开启和关闭连接到Blue
    Pill和Curiosity Nano微控制器板上的超亮LED来显示SOS摩尔斯电码信息，这在视觉警报中用作求救信号。连接超亮LED并不简单，因为我们需要知道它将消耗多少电流，因为微控制器板的输出端口只能处理非常有限量的电流，大约是几毫安。本章对希望在其他电子项目中控制LED的读者有益。它还指出，仔细计算超亮LED所消耗的安培数，并使用正确的电阻或晶体管将其连接起来，以避免损坏微控制器板的重要性。
- en: The next chapter will focus on using a small microphone connected to a microcontroller
    board to detect two clapping sounds in a row to activate a process on a microcontroller
    board.
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 下一章将重点介绍如何使用连接到微控制器板的小型麦克风检测连续的两次拍手声以激活微控制器板上的一个过程。
- en: Further reading
  id: totrans-199
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 进一步阅读
- en: 'Choudhuri, K. B. R. (2017). *Learn Arduino Prototyping in 10 days*. Birmingham,
    UK: Packt Publishing Ltd.'
  id: totrans-200
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'Choudhuri, K. B. R. (2017). *Learn Arduino Prototyping in 10 days*. Birmingham,
    UK: Packt Publishing Ltd.'
- en: 'Gay, W. (2018). *Beginning STM32: Developing with FreeRTOS, libopencm3, and
    GCC*. New York, NY: Apress.'
  id: totrans-201
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'Gay, W. (2018). *Beginning STM32: Developing with FreeRTOS, libopencm3, and
    GCC*. New York, NY: Apress.'
- en: 'Horowitz, P., Hill, W. (2015). *The Art of Electronics*. [3rd ed.] Cambridge
    University Press: New York, NY.'
  id: totrans-202
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'Horowitz, P., Hill, W. (2015). *The Art of Electronics*. [3rd ed.] Cambridge
    University Press: New York, NY.'
- en: 'Microchip (2019). *PIC16F15376 Curiosity Nano Hardware User Guide*. Microchip
    Technology, Inc. Available from: [http://ww1.microchip.com/downloads/en/DeviceDoc/50002900B.pdf](http://ww1.microchip.com/downloads/en/DeviceDoc/50002900B.pdf).'
  id: totrans-203
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Microchip (2019). *PIC16F15376 Curiosity Nano 硬件用户指南*. Microchip Technology,
    Inc. 可从：[http://ww1.microchip.com/downloads/en/DeviceDoc/50002900B.pdf](http://ww1.microchip.com/downloads/en/DeviceDoc/50002900B.pdf).
- en: '2N2222 (2013). P2N2222A transistor datasheet. Semiconductor Component Industries,
    LLC. Available from:'
  id: totrans-204
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 2N2222 (2013). P2N2222A晶体管数据表。Semiconductor Component Industries, LLC. 可从：
- en: '[https://www.onsemi.com/pub/Collateral/P2N2222A-D.PDF](https://www.onsemi.com/pub/Collateral/P2N2222A-D.PDF).'
  id: totrans-205
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '[https://www.onsemi.com/pub/Collateral/P2N2222A-D.PDF](https://www.onsemi.com/pub/Collateral/P2N2222A-D.PDF).'
- en: 'LED (n.d.) BL-BJ33V4V-1 super-bright LED datasheet. Bright LED Electronics
    Corp. Available from: http://www.maxim4u.com/download.php?id=1304920&pdfid=446ED6935162B290D3BC0AF8E0E068B8&file=0168\bl-bj33v4v-1_4138472.pdf.'
  id: totrans-206
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: LED (n.d.) BL-BJ33V4V-1 超亮LED数据表。Bright LED Electronics Corp. 可从：http://www.maxim4u.com/download.php?id=1304920&pdfid=446ED6935162B290D3BC0AF8E0E068B8&file=0168\bl-bj33v4v-1_4138472.pdf.
