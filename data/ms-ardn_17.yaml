- en: Using a Relay
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用继电器
- en: There are times where we want to control higher voltage items such as a light,
    fan or any other household appliance. However, the Arduino and every project so
    far in this book uses **direct current** (**DC**) while your household appliances
    use **alternating current** (**AC**). There are significant differences between
    AC and DC. In this chapter, we will look at how we can use a relay with an Arduino
    to control a lamp that runs on AC.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 有时候，我们想要控制高电压的物品，如灯、风扇或任何其他家用电器。然而，Arduino以及本书中迄今为止的所有项目都使用**直流电**（**DC**），而你的家用电器使用**交流电**（**AC**）。交流电和直流电之间存在显著差异。在本章中，我们将探讨如何使用Arduino和继电器来控制使用交流电的灯。
- en: 'In this chapter, you will learn:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，你将学习：
- en: What a relay is
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 什么是继电器
- en: How to use a relay to control an AC-powered device
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如何使用继电器控制交流供电设备
- en: How to use a relay to control a DC-powered device
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如何使用继电器控制直流供电设备
- en: How to isolate circuits using a relay
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如何使用继电器隔离电路
- en: Introduction
  id: totrans-7
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 简介
- en: '**WARNING:** In this chapter, we will be using 120V or 240V AC depending on
    what country you live in, which is significantly more powerful than anything else
    we have used in this book.'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: '**警告：**在本章中，我们将根据你所在的国家使用120V或240V交流电，这比本书中我们使用过的任何其他东西都要强大得多。'
- en: Mishandling, incorrect or improper use of the relay or the power cables can
    result in serious injury and even death. Make sure that you have read and understood
    how your relay board works, the voltage and current it is rated for, and the risks
    involved when using AC power before you attempt the project in this chapter.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 如果不当处理、使用不当或不正确使用继电器或电源线，可能会导致严重伤害，甚至死亡。在尝试本章中的项目之前，请确保你已经阅读并理解了你的继电器板的工作原理，它所标称的电压和电流，以及使用交流电的风险。
- en: '**Do not be afraid to seek professional help** if you are uncertain about anything.
    AC power is significantly more dangerous than the DC power that we have used previously
    in this book.'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: '**不要害怕寻求专业帮助**，如果你对任何事情不确定。交流电比我们在本书中之前使用的直流电危险得多。'
- en: If you do not feel comfortable using AC power in a project or if you are not
    familiar enough with it, there will be two circuit diagrams for this chapter.
    One diagram will show how to connect an AC-powered lamp to the relay and the other
    shows how to connect a motor and a 9V power source with a relay. The code for
    this chapter will work with either project and will turn the lamp or motor off
    and on.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你在一个项目中使用交流电感到不舒服，或者你对它不够熟悉，那么本章将提供两个电路图。一个图将展示如何将交流供电的灯连接到继电器，另一个图将展示如何使用继电器连接电机和9V电源。本章的代码将适用于任何项目，并将使灯或电机开启和关闭。
- en: When working on an AC-powered device, *always* make sure the device is unplugged
    prior to doing any work on it. An electrical shock from a wall socket can cause
    serious injury and even death.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 在对交流供电设备进行操作时，**始终**确保在开始工作之前将设备拔掉插头。来自电源插座的电击可能导致严重伤害，甚至死亡。
- en: A relay can be thought of as an electric switch. Many relays use electromagnets
    to mechanically operate the switch. However, there are other ways to control a
    relay. An example of this is a solid-state relay, which uses no mechanical parts.
    Most relays that we would use with the Arduino use electromagnets to operate the
    switch.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 继电器可以被视为一个电开关。许多继电器使用电磁铁来机械地操作开关。然而，还有其他控制继电器的方法。一个例子是固态继电器，它不使用任何机械部件。我们与Arduino一起使用的多数继电器使用电磁铁来操作开关。
- en: Relays are used when there is a need to isolate two or more circuits from each
    other while still having the ability for a component from one of the circuits
    (the Arduino) to control a component in the other circuits. When you are using
    DC power for all components in the project, there usually isn't a need to isolate
    the circuits; however, when you want to control an AC-powered device, such as
    a desk lamp, then a device like a relay is needed.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 当需要将两个或更多电路彼此隔离，同时仍能从其中一个电路（例如Arduino）控制另一个电路中的组件时，会使用继电器。当你在项目中使用所有组件的直流电时，通常不需要隔离电路；然而，当你想要控制一个交流供电设备，如台灯时，就需要一个像继电器这样的设备。
- en: As we mentioned earlier, if you are not familiar with working on AC-powered
    devices, then use the DC motor project rather than the lamp project. The same
    concepts are used in both projects; however, one is powered by AC, and the other
    is powered by DC.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 如我们之前提到的，如果你不熟悉在交流供电设备上工作，那么请使用直流电机项目而不是灯项目。这两个项目使用相同的概念；然而，一个由交流电供电，另一个由直流电供电。
- en: 'The plug for the AC-powered devices contains two wires. In order to connect
    this device to a relay, we will need to cut one of the wires and connect one end
    to the COM connection on the relay and the other to the NO connection on the relay.
    The other cable is left intact. The following photograph illustrates this:'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: AC供电设备的插头包含两根线。为了将此设备连接到继电器，我们需要剪断其中一根线，并将一端连接到继电器上的COM连接，另一端连接到继电器上的NO连接。另一根电缆保持完好。以下照片说明了这一点：
- en: '![](img/606d069a-b049-48c1-b280-cb9cec591d14.png)'
  id: totrans-17
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/606d069a-b049-48c1-b280-cb9cec591d14.png)'
- en: The **NO** label on the relay stands for **Normally Open** while the **NC**
    label stands for **Normally Closed**. The COM connection, which is usually between
    the NO and NC connections is the common connection. When the relay is off, power
    runs through the NC connection, which means that if the AC-powered device should
    be on when the relay is off, then it should be connected to the COM and NC connections.
    If the AC-powered device should be on only when the relay is turned on, then it
    should be connected to the COM and NO connections as we are doing here.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 电磁继电器上的**NO**标签代表**常开**，而**NC**标签代表**常闭**。COM连接，通常位于NO和NC连接之间，是公共连接。当继电器关闭时，电源通过NC连接，这意味着如果继电器关闭时AC供电设备应该开启，那么它应该连接到COM和NC连接。如果AC供电设备仅在继电器开启时开启，那么它应该连接到COM和NO连接，就像我们在这里做的那样。
- en: Relays are typically rated with a maximum voltage of 230 VAC to 250 VAC or 30
    VDC at 10A. You will want to verify that the relay in your project can handle
    the voltage and current that you are running.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 继电器通常标有最大电压为230 VAC至250 VAC或30 VDC，电流为10A。您需要验证项目中的继电器能否处理您正在运行的电压和电流。
- en: 'The following diagram shows how a relay works:'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 以下图示展示了继电器的工作原理：
- en: '![](img/9427cc72-8190-4316-9f90-d4d4601f6d07.png)'
  id: totrans-21
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/9427cc72-8190-4316-9f90-d4d4601f6d07.png)'
- en: In the preceding images, we see that when no voltage is applied to the relay,
    (image on the left) the NC pin is connected to the COM terminal, thereby completing
    that circuit. When a voltage is applied, the armature is pulled to the NO pin
    connecting it to the COM terminal, completing that circuit.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 在前面的图像中，我们看到当没有电压施加到继电器上时（左侧的图像），NC引脚连接到COM端子，从而完成该电路。当施加电压时，电枢被拉到NO引脚，连接到COM端子，完成该电路。
- en: 'In the preceding photograph, a board with a single relay was used. However,
    there are boards that contain multiple relays, which give us the ability to control
    components in multiple circuits. The following photograph shows a board with four
    relays:'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 在前面的照片中，使用了单个继电器的板。然而，还有包含多个继电器的板，这使我们能够控制多个电路中的组件。以下照片展示了一个包含四个继电器的板：
- en: '![](img/ec6fb4f6-a5f2-4908-bc1e-46d013ebb8ac.png)'
  id: totrans-24
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/ec6fb4f6-a5f2-4908-bc1e-46d013ebb8ac.png)'
- en: The relays that were shown in this chapter are rated for both AC and DC circuits.
    Therefore, they can be used for either project in this chapter. You could even
    attempt to do both projects if you would like.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 本章中展示的继电器适用于交流和直流电路。因此，它们可以用于本章中的任何项目。如果您愿意，甚至可以尝试两个项目。
- en: Let's look at the components that we will need for this chapter's projects.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看看本章项目所需的组件。
- en: Components needed
  id: totrans-27
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 需要的组件
- en: One Arduino Uno or compatible board
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个Arduino Uno或兼容板
- en: One relay board
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个继电器板
- en: Jumper wires
  id: totrans-30
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 跳线
- en: One AC-powered device that you would like to control with the Arduino, such
    as a desk lamp, or if you wish to use a DC power device rather than an AC powered
    one
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 您希望用Arduino控制的AC供电设备，例如台灯，或者如果您希望使用直流电源设备而不是交流电源设备
- en: One 9V battery adapter with a battery with a DC motor
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个9V电池适配器，带有直流电机的电池
- en: Circuit diagrams
  id: totrans-33
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 电路图
- en: 'The following diagrams show how we would connect an AC-powered device and an
    Arduino to a relay:'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 以下图示展示了我们如何将AC供电设备和Arduino连接到继电器：
- en: '![](img/44799267-d7a5-45e0-a89f-871ae2c4b7a5.png)'
  id: totrans-35
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/44799267-d7a5-45e0-a89f-871ae2c4b7a5.png)'
- en: The AC-powered device is connected to the relay as described in the *Introduction*
    section. The **VCC** pin on the relay is connected to the **5V** out on the Arduino,
    and the **GND** pin on the relay is connected to the **GND** pin on the Arduino.
    We connect the digital 3 pin on the Arduino to the pin labeled **IN** on the relay.
    The digital 3 pin will be used to control the relay.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: AC供电设备按照*简介*部分所述连接到继电器。继电器上的**VCC**引脚连接到Arduino的**5V**输出，继电器上的**GND**引脚连接到Arduino的**GND**引脚。我们将Arduino的数字3引脚连接到继电器上标记为**IN**的引脚。数字3引脚将用于控制继电器。
- en: 'The following diagram shows how we would use a relay to control a DC motor
    and 9V power source with the Arduino:'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 以下图示展示了我们如何使用继电器通过Arduino控制直流电机和9V电源：
- en: '![](img/9b0592dc-af2a-4144-b364-3b741757916d.png)'
  id: totrans-38
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/9b0592dc-af2a-4144-b364-3b741757916d.png)'
- en: In preceding circuits, we stressed the need to have a common ground between
    the various components; however, in this circuit, you will notice that there is
    not a common ground between the Arduino and the motor/9V battery circuit. When
    using a relay, the circuits on opposite sides of the relay are isolated from each
    other; therefore, we do not want a common ground between them. If you wish to
    have a common ground between the two circuits, then a relay is not necessary because
    a relay is used to isolate two circuits.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 在之前的电路中，我们强调了在各个组件之间需要有公共地线的重要性；然而，在这个电路中，你会注意到Arduino和电机/9V电池电路之间没有公共地线。当使用继电器时，继电器两边的电路是相互隔离的；因此，我们不想在这两者之间有公共地线。如果你希望两个电路之间有公共地线，那么继电器就不再必要了，因为继电器是用来隔离两个电路的。
- en: Now let's look at the code for these circuits.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们看看这些电路的代码。
- en: Code
  id: totrans-41
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 代码
- en: 'The following is the code for the projects in this chapter:'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 以下为本章项目中代码的示例：
- en: '[PRE0]'
  id: totrans-43
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: This code should look pretty familiar by now. This code starts off by defining
    that the relay is connected to the digital 3 pin on the Arduino. In the `setup()`
    function, we enable the relay pin for output because we want to use the `digitalWrite()`
    function to turn the relay on and off.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 现在代码看起来应该很熟悉了。此代码首先定义继电器连接到Arduino的数字3号引脚。在`setup()`函数中，我们启用继电器引脚以输出模式，因为我们想使用`digitalWrite()`函数来开启和关闭继电器。
- en: In the `loop()` function, we use the `digitalWrite()` function to set the relay
    pin to high, pause three seconds, use the `digitalWrite()` function again to set
    the relay pin to low and finally pause three seconds again. This will turn the
    components connected to the relay on and off every three seconds. This code will
    work with either the AC circuit or the DC circuit shown previously in this chapter.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 在`loop()`函数中，我们使用`digitalWrite()`函数将继电器引脚设置为高电平，暂停三秒钟，然后再次使用`digitalWrite()`函数将继电器引脚设置为低电平，并最终再次暂停三秒钟。这样，连接到继电器的组件每三秒钟就会开启和关闭一次。此代码适用于本章之前展示的交流电路或直流电路。
- en: Challenge
  id: totrans-46
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 挑战
- en: For this chapter's challenge, use a board with four relays and try connecting
    a component to each relay that can be controlled by the Arduino. Keep in mind
    that each circuit needs its own isolated power source.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 对于本章的挑战，使用带有四个继电器的板，并尝试将可以由Arduino控制的组件连接到每个继电器上。请注意，每个电路都需要其自身的独立电源。
- en: Summary
  id: totrans-48
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 概述
- en: In this chapter, we saw how we could use a relay to control both AC and DC components.
    We also saw that the circuits on either side of the relay need their own isolated
    power source.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们看到了如何使用继电器控制交流电和直流电组件。我们还了解到，继电器两边的电路需要各自的独立电源。
- en: In the next chapter, we will see how we can use radio frequencies to remotely
    control the Arduino.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将看到如何使用无线电频率远程控制Arduino。
