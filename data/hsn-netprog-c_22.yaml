- en: Setting Up Your C Compiler on macOS
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在 macOS 上设置您的 C 编译器
- en: macOS can be a good development environment for a C programmer. Let's get started.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: macOS 可以是一个不错的 C 程序员开发环境。让我们开始吧。
- en: Installing Homebrew and the C compiler
  id: totrans-2
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安装 Homebrew 和 C 编译器
- en: Setup on macOS will be simplified greatly if we use the **Homebrew** package
    manager.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们使用 **Homebrew** 软件包管理器，macOS 的设置将大大简化。
- en: The Homebrew package manager makes installing a C compiler and development libraries
    much easier than it would otherwise be.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: Homebrew 软件包管理器使得安装 C 编译器和开发库比其他方式要容易得多。
- en: 'To install Homebrew, navigate your web browser to [https://brew.sh/](https://brew.sh/):'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 要安装 Homebrew，导航您的网络浏览器到 [https://brew.sh/](https://brew.sh/)：
- en: '![](img/ee98dd6a-a7b3-4e28-b94a-b31d1d180cfe.png)'
  id: totrans-6
  prefs: []
  type: TYPE_IMG
  zh: '![](img/ee98dd6a-a7b3-4e28-b94a-b31d1d180cfe.png)'
- en: 'The website gives the command to install Homebrew. You will need to open a
    new Terminal window and paste in the command:'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 网站提供了安装 Homebrew 的命令。您需要打开一个新的终端窗口并粘贴该命令：
- en: '![](img/fcf3e010-1457-41ac-b5f3-fcbeb5688d53.png)'
  id: totrans-8
  prefs: []
  type: TYPE_IMG
  zh: '![](img/fcf3e010-1457-41ac-b5f3-fcbeb5688d53.png)'
- en: Just follow the instructions until Homebrew has finished installing.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 只需按照说明操作，直到 Homebrew 安装完成。
- en: 'Installing Homebrew will also cause the Xcode command-line tools to install.
    This means you''ll have a C compiler ready to go. Test that you have a working
    C compiler with the `gcc --version` command:'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 安装 Homebrew 也会导致 Xcode 命令行工具一起安装。这意味着您将有一个准备好的 C 编译器。使用 `gcc --version` 命令测试您是否有一个工作的
    C 编译器：
- en: '![](img/cb581ac8-03d7-49a4-88f9-1f5403400f48.png)'
  id: totrans-11
  prefs: []
  type: TYPE_IMG
  zh: '![](img/cb581ac8-03d7-49a4-88f9-1f5403400f48.png)'
- en: Note that macOS installs the Clang compiler, but aliases it as GCC. In any case,
    it will work fine for our purposes.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，macOS 安装了 Clang 编译器，但将其别名为 GCC。无论如何，它将适用于我们的目的。
- en: 'Git should also have been installed. You can verify this with `git --version`:'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: Git 也应该已经安装。您可以使用 `git --version` 来验证：
- en: '![](img/856a7eb6-4fbe-4b3a-ac86-f719ba7df035.png)'
  id: totrans-14
  prefs: []
  type: TYPE_IMG
  zh: '![](img/856a7eb6-4fbe-4b3a-ac86-f719ba7df035.png)'
- en: Installing OpenSSL
  id: totrans-15
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安装 OpenSSL
- en: Assuming you already have Homebrew installed, installing OpenSSL is easy.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 假设您已经安装了 Homebrew，安装 OpenSSL 非常简单。
- en: 'Open a new Terminal window and use the following command to install the OpenSSL
    library:'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 打开一个新的终端窗口并使用以下命令安装 OpenSSL 库：
- en: '[PRE0]'
  id: totrans-18
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: At the time of writing, the default Homebrew `openssl` package is outdated,
    therefore we'll use the `openssl@1.1` package instead.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 在撰写本文时，默认的 Homebrew `openssl` 软件包已过时，因此我们将使用 `openssl@1.1` 软件包。
- en: 'The following screenshot shows Homebrew installing the `openssl@1.1` package:'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 以下屏幕截图显示了 Homebrew 安装 `openssl@1.1` 软件包：
- en: '![](img/ba72cedc-00c3-40d9-b130-77ce2d2ebb7b.png)'
  id: totrans-21
  prefs: []
  type: TYPE_IMG
  zh: '![](img/ba72cedc-00c3-40d9-b130-77ce2d2ebb7b.png)'
- en: Be sure to read any output from `brew`.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 一定要阅读 `brew` 的任何输出。
- en: The method suggested by the `brew` command has you pass `-L` and `-I` to the
    compiler to tell it where to locate the OpenSSL libraries. This is tedious.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: '`brew` 命令建议的方法要求您传递 `-L` 和 `-I` 到编译器，以告诉它 OpenSSL 库的位置。这很麻烦。'
- en: You may prefer to symlink the installed library files to the `/usr/local` path
    so that your compiler can find them automatically. Whether you want to do this
    or not is up to you.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 您可能更喜欢将已安装的库文件符号链接到 `/usr/local` 路径，以便您的编译器可以自动找到它们。是否要这样做取决于您。
- en: 'If you want to create symlinks so the compiler can find OpenSSL, try the following
    commands:'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您想创建符号链接以便编译器可以找到 OpenSSL，请尝试以下命令：
- en: '[PRE1]'
  id: totrans-26
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'This is shown in the following screenshot:'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 这在下面的屏幕截图中显示：
- en: '![](img/2dff0ded-8a6c-4717-b6cd-13b81dbecfe8.png)'
  id: totrans-28
  prefs: []
  type: TYPE_IMG
  zh: '![](img/2dff0ded-8a6c-4717-b6cd-13b81dbecfe8.png)'
- en: 'You can try building `openssl_version.c` from [Chapter 9](47ba170d-42d9-4e38-b5d8-89503e005708.xhtml), *Loading
    Secure Web Pages with HTTPS and OpenSSL*, to test that everything is installed
    correctly. It should look like the following:'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以尝试从第 9 章 [加载带有 HTTPS 和 OpenSSL 的安全网页](47ba170d-42d9-4e38-b5d8-89503e005708.xhtml)构建
    `openssl_version.c`，以测试是否正确安装了所有内容。它应该看起来像以下这样：
- en: '![](img/36b04ada-7deb-45ef-a5ba-7f0a762a6846.png)'
  id: totrans-30
  prefs: []
  type: TYPE_IMG
  zh: '![](img/36b04ada-7deb-45ef-a5ba-7f0a762a6846.png)'
- en: Installing libssh
  id: totrans-31
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安装 libssh
- en: With Homebrew installed, installing `libssh` is also very easy.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 安装了 Homebrew 后，安装 `libssh` 也非常简单。
- en: 'Open a new Terminal window and use the following command to install the OpenSSL
    library:'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 打开一个新的终端窗口并使用以下命令安装 OpenSSL 库：
- en: '[PRE2]'
  id: totrans-34
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'This is shown in the following screenshot:'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 这在下面的屏幕截图中显示：
- en: '![](img/a67db30a-9ecf-4983-961a-c23b34fb46a5.png)'
  id: totrans-36
  prefs: []
  type: TYPE_IMG
  zh: '![](img/a67db30a-9ecf-4983-961a-c23b34fb46a5.png)'
- en: This time, we don't need to mess with any other options. You can start using
    `libssh` right away.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 这次，我们不需要处理任何其他选项。您可以直接开始使用 `libssh`。
- en: 'You can try building `ssh_version.c` from [Chapter 11](c9d0a1dc-878b-4961-825e-65688fac08ae.xhtml), *Establishing
    SSH Connections with libssh*, to test that everything is installed correctly.
    It should look like the following:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以从[第 11 章](c9d0a1dc-878b-4961-825e-65688fac08ae.xhtml)，*使用 libssh 建立 SSH 连接*，尝试构建
    `ssh_version.c` 来测试是否已正确安装了所有内容。它应该看起来像以下这样：
- en: '![](img/1462abd5-9dd0-4bde-9247-ced8bf5d3b16.png)'
  id: totrans-39
  prefs: []
  type: TYPE_IMG
  zh: '![](img/1462abd5-9dd0-4bde-9247-ced8bf5d3b16.png)'
- en: That concludes the setup for macOS.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 这就完成了 macOS 的设置。
